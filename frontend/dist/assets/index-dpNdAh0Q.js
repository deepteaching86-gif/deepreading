var bie=Object.defineProperty;var WP=t=>{throw TypeError(t)};var wie=(t,e,n)=>e in t?bie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ye=(t,e,n)=>wie(t,typeof e!="symbol"?e+"":e,n),mN=(t,e,n)=>e.has(t)||WP("Cannot "+n);var Be=(t,e,n)=>(mN(t,e,"read from private field"),n?n.call(t):e.get(t)),Mt=(t,e,n)=>e.has(t)?WP("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),gt=(t,e,n,r)=>(mN(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Bs=(t,e,n)=>(mN(t,e,"access private method"),n);var n1=(t,e,n,r)=>({set _(s){gt(t,e,s,n)},get _(){return Be(t,e,r)}});function l9(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Ci=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Cie(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var c9={exports:{}},$C={},u9={exports:{}},Ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0=Symbol.for("react.element"),Sie=Symbol.for("react.portal"),Bie=Symbol.for("react.fragment"),Nie=Symbol.for("react.strict_mode"),Eie=Symbol.for("react.profiler"),Iie=Symbol.for("react.provider"),kie=Symbol.for("react.context"),Tie=Symbol.for("react.forward_ref"),Fie=Symbol.for("react.suspense"),$ie=Symbol.for("react.memo"),_ie=Symbol.for("react.lazy"),GP=Symbol.iterator;function Oie(t){return t===null||typeof t!="object"?null:(t=GP&&t[GP]||t["@@iterator"],typeof t=="function"?t:null)}var A9={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d9=Object.assign,f9={};function Hp(t,e,n){this.props=t,this.context=e,this.refs=f9,this.updater=n||A9}Hp.prototype.isReactComponent={};Hp.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hp.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function h9(){}h9.prototype=Hp.prototype;function WF(t,e,n){this.props=t,this.context=e,this.refs=f9,this.updater=n||A9}var GF=WF.prototype=new h9;GF.constructor=WF;d9(GF,Hp.prototype);GF.isPureReactComponent=!0;var KP=Array.isArray,p9=Object.prototype.hasOwnProperty,KF={current:null},m9={key:!0,ref:!0,__self:!0,__source:!0};function g9(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)p9.call(e,r)&&!m9.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:q0,type:t,key:i,ref:o,props:s,_owner:KF.current}}function Die(t,e){return{$$typeof:q0,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function XF(t){return typeof t=="object"&&t!==null&&t.$$typeof===q0}function Rie(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var XP=/\/+/g;function gN(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Rie(""+t.key):e.toString(36)}function Db(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case q0:case Sie:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+gN(o,0):r,KP(s)?(n="",t!=null&&(n=t.replace(XP,"$&/")+"/"),Db(s,e,n,"",function(c){return c})):s!=null&&(XF(s)&&(s=Die(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(XP,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",KP(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+gN(i,a);o+=Db(i,e,n,l,s)}else if(l=Oie(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+gN(i,a++),o+=Db(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function r1(t,e,n){if(t==null)return t;var r=[],s=0;return Db(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Pie(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var li={current:null},Rb={transition:null},Uie={ReactCurrentDispatcher:li,ReactCurrentBatchConfig:Rb,ReactCurrentOwner:KF};function y9(){throw Error("act(...) is not supported in production builds of React.")}Ot.Children={map:r1,forEach:function(t,e,n){r1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return r1(t,function(){e++}),e},toArray:function(t){return r1(t,function(e){return e})||[]},only:function(t){if(!XF(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ot.Component=Hp;Ot.Fragment=Bie;Ot.Profiler=Eie;Ot.PureComponent=WF;Ot.StrictMode=Nie;Ot.Suspense=Fie;Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uie;Ot.act=y9;Ot.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=d9({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=KF.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)p9.call(e,l)&&!m9.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:q0,type:t.type,key:s,ref:i,props:r,_owner:o}};Ot.createContext=function(t){return t={$$typeof:kie,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Iie,_context:t},t.Consumer=t};Ot.createElement=g9;Ot.createFactory=function(t){var e=g9.bind(null,t);return e.type=t,e};Ot.createRef=function(){return{current:null}};Ot.forwardRef=function(t){return{$$typeof:Tie,render:t}};Ot.isValidElement=XF;Ot.lazy=function(t){return{$$typeof:_ie,_payload:{_status:-1,_result:t},_init:Pie}};Ot.memo=function(t,e){return{$$typeof:$ie,type:t,compare:e===void 0?null:e}};Ot.startTransition=function(t){var e=Rb.transition;Rb.transition={};try{t()}finally{Rb.transition=e}};Ot.unstable_act=y9;Ot.useCallback=function(t,e){return li.current.useCallback(t,e)};Ot.useContext=function(t){return li.current.useContext(t)};Ot.useDebugValue=function(){};Ot.useDeferredValue=function(t){return li.current.useDeferredValue(t)};Ot.useEffect=function(t,e){return li.current.useEffect(t,e)};Ot.useId=function(){return li.current.useId()};Ot.useImperativeHandle=function(t,e,n){return li.current.useImperativeHandle(t,e,n)};Ot.useInsertionEffect=function(t,e){return li.current.useInsertionEffect(t,e)};Ot.useLayoutEffect=function(t,e){return li.current.useLayoutEffect(t,e)};Ot.useMemo=function(t,e){return li.current.useMemo(t,e)};Ot.useReducer=function(t,e,n){return li.current.useReducer(t,e,n)};Ot.useRef=function(t){return li.current.useRef(t)};Ot.useState=function(t){return li.current.useState(t)};Ot.useSyncExternalStore=function(t,e,n){return li.current.useSyncExternalStore(t,e,n)};Ot.useTransition=function(){return li.current.useTransition()};Ot.version="18.3.1";u9.exports=Ot;var Q=u9.exports;const ie=Gt(Q),jie=l9({__proto__:null,default:ie},[Q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lie=Q,Mie=Symbol.for("react.element"),Qie=Symbol.for("react.fragment"),Hie=Object.prototype.hasOwnProperty,zie=Lie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vie={key:!0,ref:!0,__self:!0,__source:!0};function x9(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Hie.call(e,r)&&!Vie.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Mie,type:t,key:i,ref:o,props:s,_owner:zie.current}}$C.Fragment=Qie;$C.jsx=x9;$C.jsxs=x9;c9.exports=$C;var p=c9.exports,_E={},v9={exports:{}},oo={},b9={exports:{}},w9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(_,j){var K=_.length;_.push(j);e:for(;0<K;){var Y=K-1>>>1,J=_[Y];if(0<s(J,j))_[Y]=j,_[K]=J,K=Y;else break e}}function n(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var j=_[0],K=_.pop();if(K!==j){_[0]=K;e:for(var Y=0,J=_.length,ae=J>>>1;Y<ae;){var ue=2*(Y+1)-1,le=_[ue],fe=ue+1,Ie=_[fe];if(0>s(le,K))fe<J&&0>s(Ie,le)?(_[Y]=Ie,_[fe]=K,Y=fe):(_[Y]=le,_[ue]=K,Y=ue);else if(fe<J&&0>s(Ie,K))_[Y]=Ie,_[fe]=K,Y=fe;else break e}}return j}function s(_,j){var K=_.sortIndex-j.sortIndex;return K!==0?K:_.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,A=null,d=3,f=!1,h=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(_){for(var j=n(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=_)r(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function b(_){if(m=!1,v(_),!h)if(n(l)!==null)h=!0,L(w);else{var j=n(c);j!==null&&G(b,j.startTime-_)}}function w(_,j){h=!1,m&&(m=!1,y(S),S=-1),f=!0;var K=d;try{for(v(j),A=n(l);A!==null&&(!(A.expirationTime>j)||_&&!O());){var Y=A.callback;if(typeof Y=="function"){A.callback=null,d=A.priorityLevel;var J=Y(A.expirationTime<=j);j=t.unstable_now(),typeof J=="function"?A.callback=J:A===n(l)&&r(l),v(j)}else r(l);A=n(l)}if(A!==null)var ae=!0;else{var ue=n(c);ue!==null&&G(b,ue.startTime-j),ae=!1}return ae}finally{A=null,d=K,f=!1}}var C=!1,B=null,S=-1,N=5,k=-1;function O(){return!(t.unstable_now()-k<N)}function U(){if(B!==null){var _=t.unstable_now();k=_;var j=!0;try{j=B(!0,_)}finally{j?P():(C=!1,B=null)}}else C=!1}var P;if(typeof x=="function")P=function(){x(U)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,W=V.port2;V.port1.onmessage=U,P=function(){W.postMessage(null)}}else P=function(){g(U,0)};function L(_){B=_,C||(C=!0,P())}function G(_,j){S=g(function(){_(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(_){_.callback=null},t.unstable_continueExecution=function(){h||f||(h=!0,L(w))},t.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<_?Math.floor(1e3/_):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(_){switch(d){case 1:case 2:case 3:var j=3;break;default:j=d}var K=d;d=j;try{return _()}finally{d=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(_,j){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var K=d;d=_;try{return j()}finally{d=K}},t.unstable_scheduleCallback=function(_,j,K){var Y=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?Y+K:Y):K=Y,_){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=K+J,_={id:u++,callback:j,priorityLevel:_,startTime:K,expirationTime:J,sortIndex:-1},K>Y?(_.sortIndex=K,e(c,_),n(l)===null&&_===n(c)&&(m?(y(S),S=-1):m=!0,G(b,K-Y))):(_.sortIndex=J,e(l,_),h||f||(h=!0,L(w))),_},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(_){var j=d;return function(){var K=d;d=j;try{return _.apply(this,arguments)}finally{d=K}}}})(w9);b9.exports=w9;var Wie=b9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gie=Q,ro=Wie;function _e(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C9=new Set,gy={};function af(t,e){Wh(t,e),Wh(t+"Capture",e)}function Wh(t,e){for(gy[t]=e,t=0;t<e.length;t++)C9.add(e[t])}var Ac=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),OE=Object.prototype.hasOwnProperty,Kie=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qP={},YP={};function Xie(t){return OE.call(YP,t)?!0:OE.call(qP,t)?!1:Kie.test(t)?YP[t]=!0:(qP[t]=!0,!1)}function qie(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Yie(t,e,n,r){if(e===null||typeof e>"u"||qie(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ci(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var vs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vs[t]=new ci(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vs[e]=new ci(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vs[t]=new ci(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vs[t]=new ci(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vs[t]=new ci(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vs[t]=new ci(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vs[t]=new ci(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vs[t]=new ci(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vs[t]=new ci(t,5,!1,t.toLowerCase(),null,!1,!1)});var qF=/[\-:]([a-z])/g;function YF(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qF,YF);vs[e]=new ci(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qF,YF);vs[e]=new ci(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qF,YF);vs[e]=new ci(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vs[t]=new ci(t,1,!1,t.toLowerCase(),null,!1,!1)});vs.xlinkHref=new ci("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vs[t]=new ci(t,1,!1,t.toLowerCase(),null,!0,!0)});function JF(t,e,n,r){var s=vs.hasOwnProperty(e)?vs[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Yie(e,n,s,r)&&(n=null),r||s===null?Xie(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ec=Gie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,s1=Symbol.for("react.element"),Zf=Symbol.for("react.portal"),eh=Symbol.for("react.fragment"),ZF=Symbol.for("react.strict_mode"),DE=Symbol.for("react.profiler"),S9=Symbol.for("react.provider"),B9=Symbol.for("react.context"),e$=Symbol.for("react.forward_ref"),RE=Symbol.for("react.suspense"),PE=Symbol.for("react.suspense_list"),t$=Symbol.for("react.memo"),Kc=Symbol.for("react.lazy"),N9=Symbol.for("react.offscreen"),JP=Symbol.iterator;function Hm(t){return t===null||typeof t!="object"?null:(t=JP&&t[JP]||t["@@iterator"],typeof t=="function"?t:null)}var Yn=Object.assign,yN;function wg(t){if(yN===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);yN=e&&e[1]||""}return`
`+yN+t}var xN=!1;function vN(t,e){if(!t||xN)return"";xN=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{xN=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wg(t):""}function Jie(t){switch(t.tag){case 5:return wg(t.type);case 16:return wg("Lazy");case 13:return wg("Suspense");case 19:return wg("SuspenseList");case 0:case 2:case 15:return t=vN(t.type,!1),t;case 11:return t=vN(t.type.render,!1),t;case 1:return t=vN(t.type,!0),t;default:return""}}function UE(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case eh:return"Fragment";case Zf:return"Portal";case DE:return"Profiler";case ZF:return"StrictMode";case RE:return"Suspense";case PE:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case B9:return(t.displayName||"Context")+".Consumer";case S9:return(t._context.displayName||"Context")+".Provider";case e$:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case t$:return e=t.displayName||null,e!==null?e:UE(t.type)||"Memo";case Kc:e=t._payload,t=t._init;try{return UE(t(e))}catch{}}return null}function Zie(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return UE(e);case 8:return e===ZF?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function E9(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eoe(t){var e=E9(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function i1(t){t._valueTracker||(t._valueTracker=eoe(t))}function I9(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=E9(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lw(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jE(t,e){var n=e.checked;return Yn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ZP(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Lu(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function k9(t,e){e=e.checked,e!=null&&JF(t,"checked",e,!1)}function LE(t,e){k9(t,e);var n=Lu(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ME(t,e.type,n):e.hasOwnProperty("defaultValue")&&ME(t,e.type,Lu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function eU(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ME(t,e,n){(e!=="number"||lw(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Cg=Array.isArray;function yh(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Lu(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function QE(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(_e(91));return Yn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tU(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(_e(92));if(Cg(n)){if(1<n.length)throw Error(_e(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Lu(n)}}function T9(t,e){var n=Lu(e.value),r=Lu(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function nU(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function F9(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function HE(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?F9(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var o1,$9=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(o1=o1||document.createElement("div"),o1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=o1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yy(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},toe=["Webkit","ms","Moz","O"];Object.keys(Wg).forEach(function(t){toe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wg[e]=Wg[t]})});function _9(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wg.hasOwnProperty(t)&&Wg[t]?(""+e).trim():e+"px"}function O9(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=_9(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var noe=Yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zE(t,e){if(e){if(noe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(_e(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(_e(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(_e(61))}if(e.style!=null&&typeof e.style!="object")throw Error(_e(62))}}function VE(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var WE=null;function n$(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var GE=null,xh=null,vh=null;function rU(t){if(t=Z0(t)){if(typeof GE!="function")throw Error(_e(280));var e=t.stateNode;e&&(e=PC(e),GE(t.stateNode,t.type,e))}}function D9(t){xh?vh?vh.push(t):vh=[t]:xh=t}function R9(){if(xh){var t=xh,e=vh;if(vh=xh=null,rU(t),e)for(t=0;t<e.length;t++)rU(e[t])}}function P9(t,e){return t(e)}function U9(){}var bN=!1;function j9(t,e,n){if(bN)return t(e,n);bN=!0;try{return P9(t,e,n)}finally{bN=!1,(xh!==null||vh!==null)&&(U9(),R9())}}function xy(t,e){var n=t.stateNode;if(n===null)return null;var r=PC(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(_e(231,e,typeof n));return n}var KE=!1;if(Ac)try{var zm={};Object.defineProperty(zm,"passive",{get:function(){KE=!0}}),window.addEventListener("test",zm,zm),window.removeEventListener("test",zm,zm)}catch{KE=!1}function roe(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Gg=!1,cw=null,uw=!1,XE=null,soe={onError:function(t){Gg=!0,cw=t}};function ioe(t,e,n,r,s,i,o,a,l){Gg=!1,cw=null,roe.apply(soe,arguments)}function ooe(t,e,n,r,s,i,o,a,l){if(ioe.apply(this,arguments),Gg){if(Gg){var c=cw;Gg=!1,cw=null}else throw Error(_e(198));uw||(uw=!0,XE=c)}}function lf(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function L9(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sU(t){if(lf(t)!==t)throw Error(_e(188))}function aoe(t){var e=t.alternate;if(!e){if(e=lf(t),e===null)throw Error(_e(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return sU(s),t;if(i===r)return sU(s),e;i=i.sibling}throw Error(_e(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(_e(189))}}if(n.alternate!==r)throw Error(_e(190))}if(n.tag!==3)throw Error(_e(188));return n.stateNode.current===n?t:e}function M9(t){return t=aoe(t),t!==null?Q9(t):null}function Q9(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Q9(t);if(e!==null)return e;t=t.sibling}return null}var H9=ro.unstable_scheduleCallback,iU=ro.unstable_cancelCallback,loe=ro.unstable_shouldYield,coe=ro.unstable_requestPaint,hr=ro.unstable_now,uoe=ro.unstable_getCurrentPriorityLevel,r$=ro.unstable_ImmediatePriority,z9=ro.unstable_UserBlockingPriority,Aw=ro.unstable_NormalPriority,Aoe=ro.unstable_LowPriority,V9=ro.unstable_IdlePriority,_C=null,al=null;function doe(t){if(al&&typeof al.onCommitFiberRoot=="function")try{al.onCommitFiberRoot(_C,t,void 0,(t.current.flags&128)===128)}catch{}}var ya=Math.clz32?Math.clz32:poe,foe=Math.log,hoe=Math.LN2;function poe(t){return t>>>=0,t===0?32:31-(foe(t)/hoe|0)|0}var a1=64,l1=4194304;function Sg(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dw(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Sg(a):(i&=o,i!==0&&(r=Sg(i)))}else o=n&~s,o!==0?r=Sg(o):i!==0&&(r=Sg(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ya(e),s=1<<n,r|=t[n],e&=~s;return r}function moe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function goe(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ya(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=moe(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function qE(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function W9(){var t=a1;return a1<<=1,!(a1&4194240)&&(a1=64),t}function wN(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Y0(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ya(e),t[e]=n}function yoe(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ya(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function s$(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ya(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var on=0;function G9(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var K9,i$,X9,q9,Y9,YE=!1,c1=[],bu=null,wu=null,Cu=null,vy=new Map,by=new Map,eu=[],xoe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oU(t,e){switch(t){case"focusin":case"focusout":bu=null;break;case"dragenter":case"dragleave":wu=null;break;case"mouseover":case"mouseout":Cu=null;break;case"pointerover":case"pointerout":vy.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":by.delete(e.pointerId)}}function Vm(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Z0(e),e!==null&&i$(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function voe(t,e,n,r,s){switch(e){case"focusin":return bu=Vm(bu,t,e,n,r,s),!0;case"dragenter":return wu=Vm(wu,t,e,n,r,s),!0;case"mouseover":return Cu=Vm(Cu,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return vy.set(i,Vm(vy.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,by.set(i,Vm(by.get(i)||null,t,e,n,r,s)),!0}return!1}function J9(t){var e=td(t.target);if(e!==null){var n=lf(e);if(n!==null){if(e=n.tag,e===13){if(e=L9(n),e!==null){t.blockedOn=e,Y9(t.priority,function(){X9(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pb(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=JE(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);WE=r,n.target.dispatchEvent(r),WE=null}else return e=Z0(n),e!==null&&i$(e),t.blockedOn=n,!1;e.shift()}return!0}function aU(t,e,n){Pb(t)&&n.delete(e)}function boe(){YE=!1,bu!==null&&Pb(bu)&&(bu=null),wu!==null&&Pb(wu)&&(wu=null),Cu!==null&&Pb(Cu)&&(Cu=null),vy.forEach(aU),by.forEach(aU)}function Wm(t,e){t.blockedOn===e&&(t.blockedOn=null,YE||(YE=!0,ro.unstable_scheduleCallback(ro.unstable_NormalPriority,boe)))}function wy(t){function e(s){return Wm(s,t)}if(0<c1.length){Wm(c1[0],t);for(var n=1;n<c1.length;n++){var r=c1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bu!==null&&Wm(bu,t),wu!==null&&Wm(wu,t),Cu!==null&&Wm(Cu,t),vy.forEach(e),by.forEach(e),n=0;n<eu.length;n++)r=eu[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<eu.length&&(n=eu[0],n.blockedOn===null);)J9(n),n.blockedOn===null&&eu.shift()}var bh=Ec.ReactCurrentBatchConfig,fw=!0;function woe(t,e,n,r){var s=on,i=bh.transition;bh.transition=null;try{on=1,o$(t,e,n,r)}finally{on=s,bh.transition=i}}function Coe(t,e,n,r){var s=on,i=bh.transition;bh.transition=null;try{on=4,o$(t,e,n,r)}finally{on=s,bh.transition=i}}function o$(t,e,n,r){if(fw){var s=JE(t,e,n,r);if(s===null)$N(t,e,r,hw,n),oU(t,r);else if(voe(s,t,e,n,r))r.stopPropagation();else if(oU(t,r),e&4&&-1<xoe.indexOf(t)){for(;s!==null;){var i=Z0(s);if(i!==null&&K9(i),i=JE(t,e,n,r),i===null&&$N(t,e,r,hw,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else $N(t,e,r,null,n)}}var hw=null;function JE(t,e,n,r){if(hw=null,t=n$(r),t=td(t),t!==null)if(e=lf(t),e===null)t=null;else if(n=e.tag,n===13){if(t=L9(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hw=t,null}function Z9(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uoe()){case r$:return 1;case z9:return 4;case Aw:case Aoe:return 16;case V9:return 536870912;default:return 16}default:return 16}}var cu=null,a$=null,Ub=null;function ez(){if(Ub)return Ub;var t,e=a$,n=e.length,r,s="value"in cu?cu.value:cu.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ub=s.slice(t,1<r?1-r:void 0)}function jb(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function u1(){return!0}function lU(){return!1}function ao(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?u1:lU,this.isPropagationStopped=lU,this}return Yn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=u1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=u1)},persist:function(){},isPersistent:u1}),e}var zp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},l$=ao(zp),J0=Yn({},zp,{view:0,detail:0}),Soe=ao(J0),CN,SN,Gm,OC=Yn({},J0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:c$,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gm&&(Gm&&t.type==="mousemove"?(CN=t.screenX-Gm.screenX,SN=t.screenY-Gm.screenY):SN=CN=0,Gm=t),CN)},movementY:function(t){return"movementY"in t?t.movementY:SN}}),cU=ao(OC),Boe=Yn({},OC,{dataTransfer:0}),Noe=ao(Boe),Eoe=Yn({},J0,{relatedTarget:0}),BN=ao(Eoe),Ioe=Yn({},zp,{animationName:0,elapsedTime:0,pseudoElement:0}),koe=ao(Ioe),Toe=Yn({},zp,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Foe=ao(Toe),$oe=Yn({},zp,{data:0}),uU=ao($oe),_oe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ooe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Doe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Roe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Doe[t])?!!e[t]:!1}function c$(){return Roe}var Poe=Yn({},J0,{key:function(t){if(t.key){var e=_oe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jb(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ooe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:c$,charCode:function(t){return t.type==="keypress"?jb(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jb(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Uoe=ao(Poe),joe=Yn({},OC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),AU=ao(joe),Loe=Yn({},J0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:c$}),Moe=ao(Loe),Qoe=Yn({},zp,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hoe=ao(Qoe),zoe=Yn({},OC,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Voe=ao(zoe),Woe=[9,13,27,32],u$=Ac&&"CompositionEvent"in window,Kg=null;Ac&&"documentMode"in document&&(Kg=document.documentMode);var Goe=Ac&&"TextEvent"in window&&!Kg,tz=Ac&&(!u$||Kg&&8<Kg&&11>=Kg),dU=" ",fU=!1;function nz(t,e){switch(t){case"keyup":return Woe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rz(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var th=!1;function Koe(t,e){switch(t){case"compositionend":return rz(e);case"keypress":return e.which!==32?null:(fU=!0,dU);case"textInput":return t=e.data,t===dU&&fU?null:t;default:return null}}function Xoe(t,e){if(th)return t==="compositionend"||!u$&&nz(t,e)?(t=ez(),Ub=a$=cu=null,th=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tz&&e.locale!=="ko"?null:e.data;default:return null}}var qoe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hU(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qoe[t.type]:e==="textarea"}function sz(t,e,n,r){D9(r),e=pw(e,"onChange"),0<e.length&&(n=new l$("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xg=null,Cy=null;function Yoe(t){pz(t,0)}function DC(t){var e=sh(t);if(I9(e))return t}function Joe(t,e){if(t==="change")return e}var iz=!1;if(Ac){var NN;if(Ac){var EN="oninput"in document;if(!EN){var pU=document.createElement("div");pU.setAttribute("oninput","return;"),EN=typeof pU.oninput=="function"}NN=EN}else NN=!1;iz=NN&&(!document.documentMode||9<document.documentMode)}function mU(){Xg&&(Xg.detachEvent("onpropertychange",oz),Cy=Xg=null)}function oz(t){if(t.propertyName==="value"&&DC(Cy)){var e=[];sz(e,Cy,t,n$(t)),j9(Yoe,e)}}function Zoe(t,e,n){t==="focusin"?(mU(),Xg=e,Cy=n,Xg.attachEvent("onpropertychange",oz)):t==="focusout"&&mU()}function eae(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return DC(Cy)}function tae(t,e){if(t==="click")return DC(e)}function nae(t,e){if(t==="input"||t==="change")return DC(e)}function rae(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ba=typeof Object.is=="function"?Object.is:rae;function Sy(t,e){if(Ba(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!OE.call(e,s)||!Ba(t[s],e[s]))return!1}return!0}function gU(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yU(t,e){var n=gU(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gU(n)}}function az(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?az(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lz(){for(var t=window,e=lw();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lw(t.document)}return e}function A$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sae(t){var e=lz(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&az(n.ownerDocument.documentElement,n)){if(r!==null&&A$(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=yU(n,i);var o=yU(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iae=Ac&&"documentMode"in document&&11>=document.documentMode,nh=null,ZE=null,qg=null,eI=!1;function xU(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;eI||nh==null||nh!==lw(r)||(r=nh,"selectionStart"in r&&A$(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qg&&Sy(qg,r)||(qg=r,r=pw(ZE,"onSelect"),0<r.length&&(e=new l$("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=nh)))}function A1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rh={animationend:A1("Animation","AnimationEnd"),animationiteration:A1("Animation","AnimationIteration"),animationstart:A1("Animation","AnimationStart"),transitionend:A1("Transition","TransitionEnd")},IN={},cz={};Ac&&(cz=document.createElement("div").style,"AnimationEvent"in window||(delete rh.animationend.animation,delete rh.animationiteration.animation,delete rh.animationstart.animation),"TransitionEvent"in window||delete rh.transitionend.transition);function RC(t){if(IN[t])return IN[t];if(!rh[t])return t;var e=rh[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cz)return IN[t]=e[n];return t}var uz=RC("animationend"),Az=RC("animationiteration"),dz=RC("animationstart"),fz=RC("transitionend"),hz=new Map,vU="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nA(t,e){hz.set(t,e),af(e,[t])}for(var kN=0;kN<vU.length;kN++){var TN=vU[kN],oae=TN.toLowerCase(),aae=TN[0].toUpperCase()+TN.slice(1);nA(oae,"on"+aae)}nA(uz,"onAnimationEnd");nA(Az,"onAnimationIteration");nA(dz,"onAnimationStart");nA("dblclick","onDoubleClick");nA("focusin","onFocus");nA("focusout","onBlur");nA(fz,"onTransitionEnd");Wh("onMouseEnter",["mouseout","mouseover"]);Wh("onMouseLeave",["mouseout","mouseover"]);Wh("onPointerEnter",["pointerout","pointerover"]);Wh("onPointerLeave",["pointerout","pointerover"]);af("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));af("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));af("onBeforeInput",["compositionend","keypress","textInput","paste"]);af("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));af("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));af("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lae=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bg));function bU(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ooe(r,e,void 0,t),t.currentTarget=null}function pz(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;bU(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;bU(s,a,c),i=l}}}if(uw)throw t=XE,uw=!1,XE=null,t}function kn(t,e){var n=e[iI];n===void 0&&(n=e[iI]=new Set);var r=t+"__bubble";n.has(r)||(mz(e,t,2,!1),n.add(r))}function FN(t,e,n){var r=0;e&&(r|=4),mz(n,t,r,e)}var d1="_reactListening"+Math.random().toString(36).slice(2);function By(t){if(!t[d1]){t[d1]=!0,C9.forEach(function(n){n!=="selectionchange"&&(lae.has(n)||FN(n,!1,t),FN(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[d1]||(e[d1]=!0,FN("selectionchange",!1,e))}}function mz(t,e,n,r){switch(Z9(e)){case 1:var s=woe;break;case 4:s=Coe;break;default:s=o$}n=s.bind(null,e,n,t),s=void 0,!KE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function $N(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=td(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}j9(function(){var c=i,u=n$(n),A=[];e:{var d=hz.get(t);if(d!==void 0){var f=l$,h=t;switch(t){case"keypress":if(jb(n)===0)break e;case"keydown":case"keyup":f=Uoe;break;case"focusin":h="focus",f=BN;break;case"focusout":h="blur",f=BN;break;case"beforeblur":case"afterblur":f=BN;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=cU;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Noe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Moe;break;case uz:case Az:case dz:f=koe;break;case fz:f=Hoe;break;case"scroll":f=Soe;break;case"wheel":f=Voe;break;case"copy":case"cut":case"paste":f=Foe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=AU}var m=(e&4)!==0,g=!m&&t==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var x=c,v;x!==null;){v=x;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,y!==null&&(b=xy(x,y),b!=null&&m.push(Ny(x,b,v)))),g)break;x=x.return}0<m.length&&(d=new f(d,h,null,n,u),A.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==WE&&(h=n.relatedTarget||n.fromElement)&&(td(h)||h[dc]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(h=n.relatedTarget||n.toElement,f=c,h=h?td(h):null,h!==null&&(g=lf(h),h!==g||h.tag!==5&&h.tag!==6)&&(h=null)):(f=null,h=c),f!==h)){if(m=cU,b="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=AU,b="onPointerLeave",y="onPointerEnter",x="pointer"),g=f==null?d:sh(f),v=h==null?d:sh(h),d=new m(b,x+"leave",f,n,u),d.target=g,d.relatedTarget=v,b=null,td(u)===c&&(m=new m(y,x+"enter",h,n,u),m.target=v,m.relatedTarget=g,b=m),g=b,f&&h)t:{for(m=f,y=h,x=0,v=m;v;v=$f(v))x++;for(v=0,b=y;b;b=$f(b))v++;for(;0<x-v;)m=$f(m),x--;for(;0<v-x;)y=$f(y),v--;for(;x--;){if(m===y||y!==null&&m===y.alternate)break t;m=$f(m),y=$f(y)}m=null}else m=null;f!==null&&wU(A,d,f,m,!1),h!==null&&g!==null&&wU(A,g,h,m,!0)}}e:{if(d=c?sh(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var w=Joe;else if(hU(d))if(iz)w=nae;else{w=eae;var C=Zoe}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=tae);if(w&&(w=w(t,c))){sz(A,w,n,u);break e}C&&C(t,d,c),t==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&ME(d,"number",d.value)}switch(C=c?sh(c):window,t){case"focusin":(hU(C)||C.contentEditable==="true")&&(nh=C,ZE=c,qg=null);break;case"focusout":qg=ZE=nh=null;break;case"mousedown":eI=!0;break;case"contextmenu":case"mouseup":case"dragend":eI=!1,xU(A,n,u);break;case"selectionchange":if(iae)break;case"keydown":case"keyup":xU(A,n,u)}var B;if(u$)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else th?nz(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(tz&&n.locale!=="ko"&&(th||S!=="onCompositionStart"?S==="onCompositionEnd"&&th&&(B=ez()):(cu=u,a$="value"in cu?cu.value:cu.textContent,th=!0)),C=pw(c,S),0<C.length&&(S=new uU(S,t,null,n,u),A.push({event:S,listeners:C}),B?S.data=B:(B=rz(n),B!==null&&(S.data=B)))),(B=Goe?Koe(t,n):Xoe(t,n))&&(c=pw(c,"onBeforeInput"),0<c.length&&(u=new uU("onBeforeInput","beforeinput",null,n,u),A.push({event:u,listeners:c}),u.data=B))}pz(A,e)})}function Ny(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pw(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=xy(t,n),i!=null&&r.unshift(Ny(t,i,s)),i=xy(t,e),i!=null&&r.push(Ny(t,i,s))),t=t.return}return r}function $f(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wU(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=xy(n,i),l!=null&&o.unshift(Ny(n,l,a))):s||(l=xy(n,i),l!=null&&o.push(Ny(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var cae=/\r\n?/g,uae=/\u0000|\uFFFD/g;function CU(t){return(typeof t=="string"?t:""+t).replace(cae,`
`).replace(uae,"")}function f1(t,e,n){if(e=CU(e),CU(t)!==e&&n)throw Error(_e(425))}function mw(){}var tI=null,nI=null;function rI(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sI=typeof setTimeout=="function"?setTimeout:void 0,Aae=typeof clearTimeout=="function"?clearTimeout:void 0,SU=typeof Promise=="function"?Promise:void 0,dae=typeof queueMicrotask=="function"?queueMicrotask:typeof SU<"u"?function(t){return SU.resolve(null).then(t).catch(fae)}:sI;function fae(t){setTimeout(function(){throw t})}function _N(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),wy(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);wy(e)}function Su(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function BU(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vp=Math.random().toString(36).slice(2),nl="__reactFiber$"+Vp,Ey="__reactProps$"+Vp,dc="__reactContainer$"+Vp,iI="__reactEvents$"+Vp,hae="__reactListeners$"+Vp,pae="__reactHandles$"+Vp;function td(t){var e=t[nl];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dc]||n[nl]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=BU(t);t!==null;){if(n=t[nl])return n;t=BU(t)}return e}t=n,n=t.parentNode}return null}function Z0(t){return t=t[nl]||t[dc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(_e(33))}function PC(t){return t[Ey]||null}var oI=[],ih=-1;function rA(t){return{current:t}}function _n(t){0>ih||(t.current=oI[ih],oI[ih]=null,ih--)}function Bn(t,e){ih++,oI[ih]=t.current,t.current=e}var Mu={},js=rA(Mu),ki=rA(!1),_d=Mu;function Gh(t,e){var n=t.type.contextTypes;if(!n)return Mu;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ti(t){return t=t.childContextTypes,t!=null}function gw(){_n(ki),_n(js)}function NU(t,e,n){if(js.current!==Mu)throw Error(_e(168));Bn(js,e),Bn(ki,n)}function gz(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(_e(108,Zie(t)||"Unknown",s));return Yn({},n,r)}function yw(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mu,_d=js.current,Bn(js,t),Bn(ki,ki.current),!0}function EU(t,e,n){var r=t.stateNode;if(!r)throw Error(_e(169));n?(t=gz(t,e,_d),r.__reactInternalMemoizedMergedChildContext=t,_n(ki),_n(js),Bn(js,t)):_n(ki),Bn(ki,n)}var Ml=null,UC=!1,ON=!1;function yz(t){Ml===null?Ml=[t]:Ml.push(t)}function mae(t){UC=!0,yz(t)}function sA(){if(!ON&&Ml!==null){ON=!0;var t=0,e=on;try{var n=Ml;for(on=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ml=null,UC=!1}catch(s){throw Ml!==null&&(Ml=Ml.slice(t+1)),H9(r$,sA),s}finally{on=e,ON=!1}}return null}var oh=[],ah=0,xw=null,vw=0,wo=[],Co=0,Od=null,Xl=1,ql="";function MA(t,e){oh[ah++]=vw,oh[ah++]=xw,xw=t,vw=e}function xz(t,e,n){wo[Co++]=Xl,wo[Co++]=ql,wo[Co++]=Od,Od=t;var r=Xl;t=ql;var s=32-ya(r)-1;r&=~(1<<s),n+=1;var i=32-ya(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Xl=1<<32-ya(e)+s|n<<s|r,ql=i+t}else Xl=1<<i|n<<s|r,ql=t}function d$(t){t.return!==null&&(MA(t,1),xz(t,1,0))}function f$(t){for(;t===xw;)xw=oh[--ah],oh[ah]=null,vw=oh[--ah],oh[ah]=null;for(;t===Od;)Od=wo[--Co],wo[Co]=null,ql=wo[--Co],wo[Co]=null,Xl=wo[--Co],wo[Co]=null}var no=null,eo=null,Ln=!1,Aa=null;function vz(t,e){var n=No(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function IU(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,no=t,eo=Su(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,no=t,eo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Od!==null?{id:Xl,overflow:ql}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=No(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,no=t,eo=null,!0):!1;default:return!1}}function aI(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lI(t){if(Ln){var e=eo;if(e){var n=e;if(!IU(t,e)){if(aI(t))throw Error(_e(418));e=Su(n.nextSibling);var r=no;e&&IU(t,e)?vz(r,n):(t.flags=t.flags&-4097|2,Ln=!1,no=t)}}else{if(aI(t))throw Error(_e(418));t.flags=t.flags&-4097|2,Ln=!1,no=t}}}function kU(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;no=t}function h1(t){if(t!==no)return!1;if(!Ln)return kU(t),Ln=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rI(t.type,t.memoizedProps)),e&&(e=eo)){if(aI(t))throw bz(),Error(_e(418));for(;e;)vz(t,e),e=Su(e.nextSibling)}if(kU(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(_e(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){eo=Su(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}eo=null}}else eo=no?Su(t.stateNode.nextSibling):null;return!0}function bz(){for(var t=eo;t;)t=Su(t.nextSibling)}function Kh(){eo=no=null,Ln=!1}function h$(t){Aa===null?Aa=[t]:Aa.push(t)}var gae=Ec.ReactCurrentBatchConfig;function Km(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_e(309));var r=n.stateNode}if(!r)throw Error(_e(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(_e(284));if(!n._owner)throw Error(_e(290,t))}return t}function p1(t,e){throw t=Object.prototype.toString.call(e),Error(_e(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function TU(t){var e=t._init;return e(t._payload)}function wz(t){function e(y,x){if(t){var v=y.deletions;v===null?(y.deletions=[x],y.flags|=16):v.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function s(y,x){return y=Iu(y,x),y.index=0,y.sibling=null,y}function i(y,x,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<x?(y.flags|=2,x):v):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,x,v,b){return x===null||x.tag!==6?(x=MN(v,y.mode,b),x.return=y,x):(x=s(x,v),x.return=y,x)}function l(y,x,v,b){var w=v.type;return w===eh?u(y,x,v.props.children,b,v.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Kc&&TU(w)===x.type)?(b=s(x,v.props),b.ref=Km(y,x,v),b.return=y,b):(b=Wb(v.type,v.key,v.props,null,y.mode,b),b.ref=Km(y,x,v),b.return=y,b)}function c(y,x,v,b){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=QN(v,y.mode,b),x.return=y,x):(x=s(x,v.children||[]),x.return=y,x)}function u(y,x,v,b,w){return x===null||x.tag!==7?(x=wd(v,y.mode,b,w),x.return=y,x):(x=s(x,v),x.return=y,x)}function A(y,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return x=MN(""+x,y.mode,v),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case s1:return v=Wb(x.type,x.key,x.props,null,y.mode,v),v.ref=Km(y,null,x),v.return=y,v;case Zf:return x=QN(x,y.mode,v),x.return=y,x;case Kc:var b=x._init;return A(y,b(x._payload),v)}if(Cg(x)||Hm(x))return x=wd(x,y.mode,v,null),x.return=y,x;p1(y,x)}return null}function d(y,x,v,b){var w=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return w!==null?null:a(y,x,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case s1:return v.key===w?l(y,x,v,b):null;case Zf:return v.key===w?c(y,x,v,b):null;case Kc:return w=v._init,d(y,x,w(v._payload),b)}if(Cg(v)||Hm(v))return w!==null?null:u(y,x,v,b,null);p1(y,v)}return null}function f(y,x,v,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(v)||null,a(x,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case s1:return y=y.get(b.key===null?v:b.key)||null,l(x,y,b,w);case Zf:return y=y.get(b.key===null?v:b.key)||null,c(x,y,b,w);case Kc:var C=b._init;return f(y,x,v,C(b._payload),w)}if(Cg(b)||Hm(b))return y=y.get(v)||null,u(x,y,b,w,null);p1(x,b)}return null}function h(y,x,v,b){for(var w=null,C=null,B=x,S=x=0,N=null;B!==null&&S<v.length;S++){B.index>S?(N=B,B=null):N=B.sibling;var k=d(y,B,v[S],b);if(k===null){B===null&&(B=N);break}t&&B&&k.alternate===null&&e(y,B),x=i(k,x,S),C===null?w=k:C.sibling=k,C=k,B=N}if(S===v.length)return n(y,B),Ln&&MA(y,S),w;if(B===null){for(;S<v.length;S++)B=A(y,v[S],b),B!==null&&(x=i(B,x,S),C===null?w=B:C.sibling=B,C=B);return Ln&&MA(y,S),w}for(B=r(y,B);S<v.length;S++)N=f(B,y,S,v[S],b),N!==null&&(t&&N.alternate!==null&&B.delete(N.key===null?S:N.key),x=i(N,x,S),C===null?w=N:C.sibling=N,C=N);return t&&B.forEach(function(O){return e(y,O)}),Ln&&MA(y,S),w}function m(y,x,v,b){var w=Hm(v);if(typeof w!="function")throw Error(_e(150));if(v=w.call(v),v==null)throw Error(_e(151));for(var C=w=null,B=x,S=x=0,N=null,k=v.next();B!==null&&!k.done;S++,k=v.next()){B.index>S?(N=B,B=null):N=B.sibling;var O=d(y,B,k.value,b);if(O===null){B===null&&(B=N);break}t&&B&&O.alternate===null&&e(y,B),x=i(O,x,S),C===null?w=O:C.sibling=O,C=O,B=N}if(k.done)return n(y,B),Ln&&MA(y,S),w;if(B===null){for(;!k.done;S++,k=v.next())k=A(y,k.value,b),k!==null&&(x=i(k,x,S),C===null?w=k:C.sibling=k,C=k);return Ln&&MA(y,S),w}for(B=r(y,B);!k.done;S++,k=v.next())k=f(B,y,S,k.value,b),k!==null&&(t&&k.alternate!==null&&B.delete(k.key===null?S:k.key),x=i(k,x,S),C===null?w=k:C.sibling=k,C=k);return t&&B.forEach(function(U){return e(y,U)}),Ln&&MA(y,S),w}function g(y,x,v,b){if(typeof v=="object"&&v!==null&&v.type===eh&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case s1:e:{for(var w=v.key,C=x;C!==null;){if(C.key===w){if(w=v.type,w===eh){if(C.tag===7){n(y,C.sibling),x=s(C,v.props.children),x.return=y,y=x;break e}}else if(C.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Kc&&TU(w)===C.type){n(y,C.sibling),x=s(C,v.props),x.ref=Km(y,C,v),x.return=y,y=x;break e}n(y,C);break}else e(y,C);C=C.sibling}v.type===eh?(x=wd(v.props.children,y.mode,b,v.key),x.return=y,y=x):(b=Wb(v.type,v.key,v.props,null,y.mode,b),b.ref=Km(y,x,v),b.return=y,y=b)}return o(y);case Zf:e:{for(C=v.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){n(y,x.sibling),x=s(x,v.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=QN(v,y.mode,b),x.return=y,y=x}return o(y);case Kc:return C=v._init,g(y,x,C(v._payload),b)}if(Cg(v))return h(y,x,v,b);if(Hm(v))return m(y,x,v,b);p1(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,x!==null&&x.tag===6?(n(y,x.sibling),x=s(x,v),x.return=y,y=x):(n(y,x),x=MN(v,y.mode,b),x.return=y,y=x),o(y)):n(y,x)}return g}var Xh=wz(!0),Cz=wz(!1),bw=rA(null),ww=null,lh=null,p$=null;function m$(){p$=lh=ww=null}function g$(t){var e=bw.current;_n(bw),t._currentValue=e}function cI(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wh(t,e){ww=t,p$=lh=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Si=!0),t.firstContext=null)}function Mo(t){var e=t._currentValue;if(p$!==t)if(t={context:t,memoizedValue:e,next:null},lh===null){if(ww===null)throw Error(_e(308));lh=t,ww.dependencies={lanes:0,firstContext:t}}else lh=lh.next=t;return e}var nd=null;function y$(t){nd===null?nd=[t]:nd.push(t)}function Sz(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,y$(e)):(n.next=s.next,s.next=n),e.interleaved=n,fc(t,r)}function fc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xc=!1;function x$(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bz(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sc(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Vt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,fc(t,n)}return s=r.interleaved,s===null?(e.next=e,y$(r)):(e.next=s.next,s.next=e),r.interleaved=e,fc(t,n)}function Lb(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,s$(t,n)}}function FU(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Cw(t,e,n,r){var s=t.updateQueue;Xc=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var A=s.baseState;o=0,u=c=l=null,a=i;do{var d=a.lane,f=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var h=t,m=a;switch(d=e,f=n,m.tag){case 1:if(h=m.payload,typeof h=="function"){A=h.call(f,A,d);break e}A=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=m.payload,d=typeof h=="function"?h.call(f,A,d):h,d==null)break e;A=Yn({},A,d);break e;case 2:Xc=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=A):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(u===null&&(l=A),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Rd|=o,t.lanes=o,t.memoizedState=A}}function $U(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(_e(191,s));s.call(r)}}}var ex={},ll=rA(ex),Iy=rA(ex),ky=rA(ex);function rd(t){if(t===ex)throw Error(_e(174));return t}function v$(t,e){switch(Bn(ky,e),Bn(Iy,t),Bn(ll,ex),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:HE(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=HE(e,t)}_n(ll),Bn(ll,e)}function qh(){_n(ll),_n(Iy),_n(ky)}function Nz(t){rd(ky.current);var e=rd(ll.current),n=HE(e,t.type);e!==n&&(Bn(Iy,t),Bn(ll,n))}function b$(t){Iy.current===t&&(_n(ll),_n(Iy))}var Gn=rA(0);function Sw(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var DN=[];function w$(){for(var t=0;t<DN.length;t++)DN[t]._workInProgressVersionPrimary=null;DN.length=0}var Mb=Ec.ReactCurrentDispatcher,RN=Ec.ReactCurrentBatchConfig,Dd=0,Xn=null,Pr=null,Jr=null,Bw=!1,Yg=!1,Ty=0,yae=0;function Ns(){throw Error(_e(321))}function C$(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ba(t[n],e[n]))return!1;return!0}function S$(t,e,n,r,s,i){if(Dd=i,Xn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Mb.current=t===null||t.memoizedState===null?wae:Cae,t=n(r,s),Yg){i=0;do{if(Yg=!1,Ty=0,25<=i)throw Error(_e(301));i+=1,Jr=Pr=null,e.updateQueue=null,Mb.current=Sae,t=n(r,s)}while(Yg)}if(Mb.current=Nw,e=Pr!==null&&Pr.next!==null,Dd=0,Jr=Pr=Xn=null,Bw=!1,e)throw Error(_e(300));return t}function B$(){var t=Ty!==0;return Ty=0,t}function Wa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jr===null?Xn.memoizedState=Jr=t:Jr=Jr.next=t,Jr}function Qo(){if(Pr===null){var t=Xn.alternate;t=t!==null?t.memoizedState:null}else t=Pr.next;var e=Jr===null?Xn.memoizedState:Jr.next;if(e!==null)Jr=e,Pr=t;else{if(t===null)throw Error(_e(310));Pr=t,t={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},Jr===null?Xn.memoizedState=Jr=t:Jr=Jr.next=t}return Jr}function Fy(t,e){return typeof e=="function"?e(t):e}function PN(t){var e=Qo(),n=e.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=t;var r=Pr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((Dd&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var A={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=A,o=r):l=l.next=A,Xn.lanes|=u,Rd|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Ba(r,e.memoizedState)||(Si=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Xn.lanes|=i,Rd|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function UN(t){var e=Qo(),n=e.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ba(i,e.memoizedState)||(Si=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ez(){}function Iz(t,e){var n=Xn,r=Qo(),s=e(),i=!Ba(r.memoizedState,s);if(i&&(r.memoizedState=s,Si=!0),r=r.queue,N$(Fz.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Jr!==null&&Jr.memoizedState.tag&1){if(n.flags|=2048,$y(9,Tz.bind(null,n,r,s,e),void 0,null),ts===null)throw Error(_e(349));Dd&30||kz(n,e,s)}return s}function kz(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xn.updateQueue,e===null?(e={lastEffect:null,stores:null},Xn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Tz(t,e,n,r){e.value=n,e.getSnapshot=r,$z(e)&&_z(t)}function Fz(t,e,n){return n(function(){$z(e)&&_z(t)})}function $z(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ba(t,n)}catch{return!0}}function _z(t){var e=fc(t,1);e!==null&&xa(e,t,1,-1)}function _U(t){var e=Wa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fy,lastRenderedState:t},e.queue=t,t=t.dispatch=bae.bind(null,Xn,t),[e.memoizedState,t]}function $y(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xn.updateQueue,e===null?(e={lastEffect:null,stores:null},Xn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Oz(){return Qo().memoizedState}function Qb(t,e,n,r){var s=Wa();Xn.flags|=t,s.memoizedState=$y(1|e,n,void 0,r===void 0?null:r)}function jC(t,e,n,r){var s=Qo();r=r===void 0?null:r;var i=void 0;if(Pr!==null){var o=Pr.memoizedState;if(i=o.destroy,r!==null&&C$(r,o.deps)){s.memoizedState=$y(e,n,i,r);return}}Xn.flags|=t,s.memoizedState=$y(1|e,n,i,r)}function OU(t,e){return Qb(8390656,8,t,e)}function N$(t,e){return jC(2048,8,t,e)}function Dz(t,e){return jC(4,2,t,e)}function Rz(t,e){return jC(4,4,t,e)}function Pz(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Uz(t,e,n){return n=n!=null?n.concat([t]):null,jC(4,4,Pz.bind(null,e,t),n)}function E$(){}function jz(t,e){var n=Qo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&C$(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Lz(t,e){var n=Qo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&C$(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Mz(t,e,n){return Dd&21?(Ba(n,e)||(n=W9(),Xn.lanes|=n,Rd|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Si=!0),t.memoizedState=n)}function xae(t,e){var n=on;on=n!==0&&4>n?n:4,t(!0);var r=RN.transition;RN.transition={};try{t(!1),e()}finally{on=n,RN.transition=r}}function Qz(){return Qo().memoizedState}function vae(t,e,n){var r=Eu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Hz(t))zz(e,n);else if(n=Sz(t,e,n,r),n!==null){var s=si();xa(n,t,r,s),Vz(n,e,r)}}function bae(t,e,n){var r=Eu(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hz(t))zz(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ba(a,o)){var l=e.interleaved;l===null?(s.next=s,y$(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Sz(t,e,s,r),n!==null&&(s=si(),xa(n,t,r,s),Vz(n,e,r))}}function Hz(t){var e=t.alternate;return t===Xn||e!==null&&e===Xn}function zz(t,e){Yg=Bw=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Vz(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,s$(t,n)}}var Nw={readContext:Mo,useCallback:Ns,useContext:Ns,useEffect:Ns,useImperativeHandle:Ns,useInsertionEffect:Ns,useLayoutEffect:Ns,useMemo:Ns,useReducer:Ns,useRef:Ns,useState:Ns,useDebugValue:Ns,useDeferredValue:Ns,useTransition:Ns,useMutableSource:Ns,useSyncExternalStore:Ns,useId:Ns,unstable_isNewReconciler:!1},wae={readContext:Mo,useCallback:function(t,e){return Wa().memoizedState=[t,e===void 0?null:e],t},useContext:Mo,useEffect:OU,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Qb(4194308,4,Pz.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Qb(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qb(4,2,t,e)},useMemo:function(t,e){var n=Wa();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wa();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vae.bind(null,Xn,t),[r.memoizedState,t]},useRef:function(t){var e=Wa();return t={current:t},e.memoizedState=t},useState:_U,useDebugValue:E$,useDeferredValue:function(t){return Wa().memoizedState=t},useTransition:function(){var t=_U(!1),e=t[0];return t=xae.bind(null,t[1]),Wa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xn,s=Wa();if(Ln){if(n===void 0)throw Error(_e(407));n=n()}else{if(n=e(),ts===null)throw Error(_e(349));Dd&30||kz(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,OU(Fz.bind(null,r,i,t),[t]),r.flags|=2048,$y(9,Tz.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Wa(),e=ts.identifierPrefix;if(Ln){var n=ql,r=Xl;n=(r&~(1<<32-ya(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ty++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yae++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Cae={readContext:Mo,useCallback:jz,useContext:Mo,useEffect:N$,useImperativeHandle:Uz,useInsertionEffect:Dz,useLayoutEffect:Rz,useMemo:Lz,useReducer:PN,useRef:Oz,useState:function(){return PN(Fy)},useDebugValue:E$,useDeferredValue:function(t){var e=Qo();return Mz(e,Pr.memoizedState,t)},useTransition:function(){var t=PN(Fy)[0],e=Qo().memoizedState;return[t,e]},useMutableSource:Ez,useSyncExternalStore:Iz,useId:Qz,unstable_isNewReconciler:!1},Sae={readContext:Mo,useCallback:jz,useContext:Mo,useEffect:N$,useImperativeHandle:Uz,useInsertionEffect:Dz,useLayoutEffect:Rz,useMemo:Lz,useReducer:UN,useRef:Oz,useState:function(){return UN(Fy)},useDebugValue:E$,useDeferredValue:function(t){var e=Qo();return Pr===null?e.memoizedState=t:Mz(e,Pr.memoizedState,t)},useTransition:function(){var t=UN(Fy)[0],e=Qo().memoizedState;return[t,e]},useMutableSource:Ez,useSyncExternalStore:Iz,useId:Qz,unstable_isNewReconciler:!1};function ia(t,e){if(t&&t.defaultProps){e=Yn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uI(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Yn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var LC={isMounted:function(t){return(t=t._reactInternals)?lf(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=si(),s=Eu(t),i=sc(r,s);i.payload=e,n!=null&&(i.callback=n),e=Bu(t,i,s),e!==null&&(xa(e,t,s,r),Lb(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=si(),s=Eu(t),i=sc(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Bu(t,i,s),e!==null&&(xa(e,t,s,r),Lb(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=si(),r=Eu(t),s=sc(n,r);s.tag=2,e!=null&&(s.callback=e),e=Bu(t,s,r),e!==null&&(xa(e,t,r,n),Lb(e,t,r))}};function DU(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Sy(n,r)||!Sy(s,i):!0}function Wz(t,e,n){var r=!1,s=Mu,i=e.contextType;return typeof i=="object"&&i!==null?i=Mo(i):(s=Ti(e)?_d:js.current,r=e.contextTypes,i=(r=r!=null)?Gh(t,s):Mu),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=LC,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function RU(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&LC.enqueueReplaceState(e,e.state,null)}function AI(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},x$(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Mo(i):(i=Ti(e)?_d:js.current,s.context=Gh(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(uI(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&LC.enqueueReplaceState(s,s.state,null),Cw(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Yh(t,e){try{var n="",r=e;do n+=Jie(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function jN(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dI(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Bae=typeof WeakMap=="function"?WeakMap:Map;function Gz(t,e,n){n=sc(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Iw||(Iw=!0,wI=r),dI(t,e)},n}function Kz(t,e,n){n=sc(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){dI(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){dI(t,e),typeof r!="function"&&(Nu===null?Nu=new Set([this]):Nu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function PU(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Bae;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=jae.bind(null,t,e,n),e.then(t,t))}function UU(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jU(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=sc(-1,1),e.tag=2,Bu(n,e,1))),n.lanes|=1),t)}var Nae=Ec.ReactCurrentOwner,Si=!1;function Ys(t,e,n,r){e.child=t===null?Cz(e,null,n,r):Xh(e,t.child,n,r)}function LU(t,e,n,r,s){n=n.render;var i=e.ref;return wh(e,s),r=S$(t,e,n,r,i,s),n=B$(),t!==null&&!Si?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,hc(t,e,s)):(Ln&&n&&d$(e),e.flags|=1,Ys(t,e,r,s),e.child)}function MU(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!D$(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Xz(t,e,i,r,s)):(t=Wb(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Sy,n(o,r)&&t.ref===e.ref)return hc(t,e,s)}return e.flags|=1,t=Iu(i,r),t.ref=e.ref,t.return=e,e.child=t}function Xz(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Sy(i,r)&&t.ref===e.ref)if(Si=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Si=!0);else return e.lanes=t.lanes,hc(t,e,s)}return fI(t,e,n,r,s)}function qz(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bn(uh,Xi),Xi|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Bn(uh,Xi),Xi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Bn(uh,Xi),Xi|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Bn(uh,Xi),Xi|=r;return Ys(t,e,s,n),e.child}function Yz(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fI(t,e,n,r,s){var i=Ti(n)?_d:js.current;return i=Gh(e,i),wh(e,s),n=S$(t,e,n,r,i,s),r=B$(),t!==null&&!Si?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,hc(t,e,s)):(Ln&&r&&d$(e),e.flags|=1,Ys(t,e,n,s),e.child)}function QU(t,e,n,r,s){if(Ti(n)){var i=!0;yw(e)}else i=!1;if(wh(e,s),e.stateNode===null)Hb(t,e),Wz(e,n,r),AI(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Mo(c):(c=Ti(n)?_d:js.current,c=Gh(e,c));var u=n.getDerivedStateFromProps,A=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";A||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&RU(e,o,r,c),Xc=!1;var d=e.memoizedState;o.state=d,Cw(e,r,o,s),l=e.memoizedState,a!==r||d!==l||ki.current||Xc?(typeof u=="function"&&(uI(e,n,u,r),l=e.memoizedState),(a=Xc||DU(e,n,a,r,d,l,c))?(A||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Bz(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ia(e.type,a),o.props=c,A=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Mo(l):(l=Ti(n)?_d:js.current,l=Gh(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==A||d!==l)&&RU(e,o,r,l),Xc=!1,d=e.memoizedState,o.state=d,Cw(e,r,o,s);var h=e.memoizedState;a!==A||d!==h||ki.current||Xc?(typeof f=="function"&&(uI(e,n,f,r),h=e.memoizedState),(c=Xc||DU(e,n,c,r,d,h,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,h,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,h,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=h),o.props=r,o.state=h,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return hI(t,e,n,r,i,s)}function hI(t,e,n,r,s,i){Yz(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&EU(e,n,!1),hc(t,e,i);r=e.stateNode,Nae.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Xh(e,t.child,null,i),e.child=Xh(e,null,a,i)):Ys(t,e,a,i),e.memoizedState=r.state,s&&EU(e,n,!0),e.child}function Jz(t){var e=t.stateNode;e.pendingContext?NU(t,e.pendingContext,e.pendingContext!==e.context):e.context&&NU(t,e.context,!1),v$(t,e.containerInfo)}function HU(t,e,n,r,s){return Kh(),h$(s),e.flags|=256,Ys(t,e,n,r),e.child}var pI={dehydrated:null,treeContext:null,retryLane:0};function mI(t){return{baseLanes:t,cachePool:null,transitions:null}}function Zz(t,e,n){var r=e.pendingProps,s=Gn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Bn(Gn,s&1),t===null)return lI(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=HC(o,r,0,null),t=wd(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=mI(n),e.memoizedState=pI,t):I$(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Eae(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Iu(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Iu(a,i):(i=wd(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?mI(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=pI,r}return i=t.child,t=i.sibling,r=Iu(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function I$(t,e){return e=HC({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function m1(t,e,n,r){return r!==null&&h$(r),Xh(e,t.child,null,n),t=I$(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Eae(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=jN(Error(_e(422))),m1(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=HC({mode:"visible",children:r.children},s,0,null),i=wd(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Xh(e,t.child,null,o),e.child.memoizedState=mI(o),e.memoizedState=pI,i);if(!(e.mode&1))return m1(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(_e(419)),r=jN(i,r,void 0),m1(t,e,o,r)}if(a=(o&t.childLanes)!==0,Si||a){if(r=ts,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,fc(t,s),xa(r,t,s,-1))}return O$(),r=jN(Error(_e(421))),m1(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Lae.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,eo=Su(s.nextSibling),no=e,Ln=!0,Aa=null,t!==null&&(wo[Co++]=Xl,wo[Co++]=ql,wo[Co++]=Od,Xl=t.id,ql=t.overflow,Od=e),e=I$(e,r.children),e.flags|=4096,e)}function zU(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),cI(t.return,e,n)}function LN(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function eV(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ys(t,e,r.children,n),r=Gn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zU(t,n,e);else if(t.tag===19)zU(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Bn(Gn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Sw(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),LN(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Sw(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}LN(e,!0,n,null,i);break;case"together":LN(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hb(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function hc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rd|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(_e(153));if(e.child!==null){for(t=e.child,n=Iu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Iu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Iae(t,e,n){switch(e.tag){case 3:Jz(e),Kh();break;case 5:Nz(e);break;case 1:Ti(e.type)&&yw(e);break;case 4:v$(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Bn(bw,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Bn(Gn,Gn.current&1),e.flags|=128,null):n&e.child.childLanes?Zz(t,e,n):(Bn(Gn,Gn.current&1),t=hc(t,e,n),t!==null?t.sibling:null);Bn(Gn,Gn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return eV(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Bn(Gn,Gn.current),r)break;return null;case 22:case 23:return e.lanes=0,qz(t,e,n)}return hc(t,e,n)}var tV,gI,nV,rV;tV=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gI=function(){};nV=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,rd(ll.current);var i=null;switch(n){case"input":s=jE(t,s),r=jE(t,r),i=[];break;case"select":s=Yn({},s,{value:void 0}),r=Yn({},r,{value:void 0}),i=[];break;case"textarea":s=QE(t,s),r=QE(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mw)}zE(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(gy.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(gy.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&kn("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};rV=function(t,e,n,r){n!==r&&(e.flags|=4)};function Xm(t,e){if(!Ln)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Es(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kae(t,e,n){var r=e.pendingProps;switch(f$(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Es(e),null;case 1:return Ti(e.type)&&gw(),Es(e),null;case 3:return r=e.stateNode,qh(),_n(ki),_n(js),w$(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(h1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Aa!==null&&(BI(Aa),Aa=null))),gI(t,e),Es(e),null;case 5:b$(e);var s=rd(ky.current);if(n=e.type,t!==null&&e.stateNode!=null)nV(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(_e(166));return Es(e),null}if(t=rd(ll.current),h1(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[nl]=e,r[Ey]=i,t=(e.mode&1)!==0,n){case"dialog":kn("cancel",r),kn("close",r);break;case"iframe":case"object":case"embed":kn("load",r);break;case"video":case"audio":for(s=0;s<Bg.length;s++)kn(Bg[s],r);break;case"source":kn("error",r);break;case"img":case"image":case"link":kn("error",r),kn("load",r);break;case"details":kn("toggle",r);break;case"input":ZP(r,i),kn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},kn("invalid",r);break;case"textarea":tU(r,i),kn("invalid",r)}zE(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&f1(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&f1(r.textContent,a,t),s=["children",""+a]):gy.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&kn("scroll",r)}switch(n){case"input":i1(r),eU(r,i,!0);break;case"textarea":i1(r),nU(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=mw)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=F9(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[nl]=e,t[Ey]=r,tV(t,e,!1,!1),e.stateNode=t;e:{switch(o=VE(n,r),n){case"dialog":kn("cancel",t),kn("close",t),s=r;break;case"iframe":case"object":case"embed":kn("load",t),s=r;break;case"video":case"audio":for(s=0;s<Bg.length;s++)kn(Bg[s],t);s=r;break;case"source":kn("error",t),s=r;break;case"img":case"image":case"link":kn("error",t),kn("load",t),s=r;break;case"details":kn("toggle",t),s=r;break;case"input":ZP(t,r),s=jE(t,r),kn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Yn({},r,{value:void 0}),kn("invalid",t);break;case"textarea":tU(t,r),s=QE(t,r),kn("invalid",t);break;default:s=r}zE(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?O9(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&$9(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&yy(t,l):typeof l=="number"&&yy(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(gy.hasOwnProperty(i)?l!=null&&i==="onScroll"&&kn("scroll",t):l!=null&&JF(t,i,l,o))}switch(n){case"input":i1(t),eU(t,r,!1);break;case"textarea":i1(t),nU(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Lu(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?yh(t,!!r.multiple,i,!1):r.defaultValue!=null&&yh(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=mw)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Es(e),null;case 6:if(t&&e.stateNode!=null)rV(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(_e(166));if(n=rd(ky.current),rd(ll.current),h1(e)){if(r=e.stateNode,n=e.memoizedProps,r[nl]=e,(i=r.nodeValue!==n)&&(t=no,t!==null))switch(t.tag){case 3:f1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&f1(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nl]=e,e.stateNode=r}return Es(e),null;case 13:if(_n(Gn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ln&&eo!==null&&e.mode&1&&!(e.flags&128))bz(),Kh(),e.flags|=98560,i=!1;else if(i=h1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(_e(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(_e(317));i[nl]=e}else Kh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Es(e),i=!1}else Aa!==null&&(BI(Aa),Aa=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Gn.current&1?Lr===0&&(Lr=3):O$())),e.updateQueue!==null&&(e.flags|=4),Es(e),null);case 4:return qh(),gI(t,e),t===null&&By(e.stateNode.containerInfo),Es(e),null;case 10:return g$(e.type._context),Es(e),null;case 17:return Ti(e.type)&&gw(),Es(e),null;case 19:if(_n(Gn),i=e.memoizedState,i===null)return Es(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Xm(i,!1);else{if(Lr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Sw(t),o!==null){for(e.flags|=128,Xm(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Bn(Gn,Gn.current&1|2),e.child}t=t.sibling}i.tail!==null&&hr()>Jh&&(e.flags|=128,r=!0,Xm(i,!1),e.lanes=4194304)}else{if(!r)if(t=Sw(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ln)return Es(e),null}else 2*hr()-i.renderingStartTime>Jh&&n!==1073741824&&(e.flags|=128,r=!0,Xm(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=hr(),e.sibling=null,n=Gn.current,Bn(Gn,r?n&1|2:n&1),e):(Es(e),null);case 22:case 23:return _$(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xi&1073741824&&(Es(e),e.subtreeFlags&6&&(e.flags|=8192)):Es(e),null;case 24:return null;case 25:return null}throw Error(_e(156,e.tag))}function Tae(t,e){switch(f$(e),e.tag){case 1:return Ti(e.type)&&gw(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qh(),_n(ki),_n(js),w$(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return b$(e),null;case 13:if(_n(Gn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(_e(340));Kh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _n(Gn),null;case 4:return qh(),null;case 10:return g$(e.type._context),null;case 22:case 23:return _$(),null;case 24:return null;default:return null}}var g1=!1,Os=!1,Fae=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function ch(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tr(t,e,r)}else n.current=null}function yI(t,e,n){try{n()}catch(r){tr(t,e,r)}}var VU=!1;function $ae(t,e){if(tI=fw,t=lz(),A$(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,A=t,d=null;t:for(;;){for(var f;A!==n||s!==0&&A.nodeType!==3||(a=o+s),A!==i||r!==0&&A.nodeType!==3||(l=o+r),A.nodeType===3&&(o+=A.nodeValue.length),(f=A.firstChild)!==null;)d=A,A=f;for(;;){if(A===t)break t;if(d===n&&++c===s&&(a=o),d===i&&++u===r&&(l=o),(f=A.nextSibling)!==null)break;A=d,d=A.parentNode}A=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(nI={focusedElem:t,selectionRange:n},fw=!1,Xe=e;Xe!==null;)if(e=Xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Xe=t;else for(;Xe!==null;){e=Xe;try{var h=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var m=h.memoizedProps,g=h.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:ia(e.type,m),g);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_e(163))}}catch(b){tr(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Xe=t;break}Xe=e.return}return h=VU,VU=!1,h}function Jg(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&yI(e,n,i)}s=s.next}while(s!==r)}}function MC(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xI(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function sV(t){var e=t.alternate;e!==null&&(t.alternate=null,sV(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[nl],delete e[Ey],delete e[iI],delete e[hae],delete e[pae])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iV(t){return t.tag===5||t.tag===3||t.tag===4}function WU(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iV(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vI(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mw));else if(r!==4&&(t=t.child,t!==null))for(vI(t,e,n),t=t.sibling;t!==null;)vI(t,e,n),t=t.sibling}function bI(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bI(t,e,n),t=t.sibling;t!==null;)bI(t,e,n),t=t.sibling}var hs=null,ca=!1;function Mc(t,e,n){for(n=n.child;n!==null;)oV(t,e,n),n=n.sibling}function oV(t,e,n){if(al&&typeof al.onCommitFiberUnmount=="function")try{al.onCommitFiberUnmount(_C,n)}catch{}switch(n.tag){case 5:Os||ch(n,e);case 6:var r=hs,s=ca;hs=null,Mc(t,e,n),hs=r,ca=s,hs!==null&&(ca?(t=hs,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):hs.removeChild(n.stateNode));break;case 18:hs!==null&&(ca?(t=hs,n=n.stateNode,t.nodeType===8?_N(t.parentNode,n):t.nodeType===1&&_N(t,n),wy(t)):_N(hs,n.stateNode));break;case 4:r=hs,s=ca,hs=n.stateNode.containerInfo,ca=!0,Mc(t,e,n),hs=r,ca=s;break;case 0:case 11:case 14:case 15:if(!Os&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&yI(n,e,o),s=s.next}while(s!==r)}Mc(t,e,n);break;case 1:if(!Os&&(ch(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){tr(n,e,a)}Mc(t,e,n);break;case 21:Mc(t,e,n);break;case 22:n.mode&1?(Os=(r=Os)||n.memoizedState!==null,Mc(t,e,n),Os=r):Mc(t,e,n);break;default:Mc(t,e,n)}}function GU(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Fae),e.forEach(function(r){var s=Mae.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ea(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:hs=a.stateNode,ca=!1;break e;case 3:hs=a.stateNode.containerInfo,ca=!0;break e;case 4:hs=a.stateNode.containerInfo,ca=!0;break e}a=a.return}if(hs===null)throw Error(_e(160));oV(i,o,s),hs=null,ca=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){tr(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aV(e,t),e=e.sibling}function aV(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ea(e,t),Ma(t),r&4){try{Jg(3,t,t.return),MC(3,t)}catch(m){tr(t,t.return,m)}try{Jg(5,t,t.return)}catch(m){tr(t,t.return,m)}}break;case 1:ea(e,t),Ma(t),r&512&&n!==null&&ch(n,n.return);break;case 5:if(ea(e,t),Ma(t),r&512&&n!==null&&ch(n,n.return),t.flags&32){var s=t.stateNode;try{yy(s,"")}catch(m){tr(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&k9(s,i),VE(a,o);var c=VE(a,i);for(o=0;o<l.length;o+=2){var u=l[o],A=l[o+1];u==="style"?O9(s,A):u==="dangerouslySetInnerHTML"?$9(s,A):u==="children"?yy(s,A):JF(s,u,A,c)}switch(a){case"input":LE(s,i);break;case"textarea":T9(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?yh(s,!!i.multiple,f,!1):d!==!!i.multiple&&(i.defaultValue!=null?yh(s,!!i.multiple,i.defaultValue,!0):yh(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ey]=i}catch(m){tr(t,t.return,m)}}break;case 6:if(ea(e,t),Ma(t),r&4){if(t.stateNode===null)throw Error(_e(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){tr(t,t.return,m)}}break;case 3:if(ea(e,t),Ma(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wy(e.containerInfo)}catch(m){tr(t,t.return,m)}break;case 4:ea(e,t),Ma(t);break;case 13:ea(e,t),Ma(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(F$=hr())),r&4&&GU(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Os=(c=Os)||u,ea(e,t),Os=c):ea(e,t),Ma(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Xe=t,u=t.child;u!==null;){for(A=Xe=u;Xe!==null;){switch(d=Xe,f=d.child,d.tag){case 0:case 11:case 14:case 15:Jg(4,d,d.return);break;case 1:ch(d,d.return);var h=d.stateNode;if(typeof h.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,h.props=e.memoizedProps,h.state=e.memoizedState,h.componentWillUnmount()}catch(m){tr(r,n,m)}}break;case 5:ch(d,d.return);break;case 22:if(d.memoizedState!==null){XU(A);continue}}f!==null?(f.return=d,Xe=f):XU(A)}u=u.sibling}e:for(u=null,A=t;;){if(A.tag===5){if(u===null){u=A;try{s=A.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=A.stateNode,l=A.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_9("display",o))}catch(m){tr(t,t.return,m)}}}else if(A.tag===6){if(u===null)try{A.stateNode.nodeValue=c?"":A.memoizedProps}catch(m){tr(t,t.return,m)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===t)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===t)break e;for(;A.sibling===null;){if(A.return===null||A.return===t)break e;u===A&&(u=null),A=A.return}u===A&&(u=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:ea(e,t),Ma(t),r&4&&GU(t);break;case 21:break;default:ea(e,t),Ma(t)}}function Ma(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(iV(n)){var r=n;break e}n=n.return}throw Error(_e(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(yy(s,""),r.flags&=-33);var i=WU(t);bI(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=WU(t);vI(t,a,o);break;default:throw Error(_e(161))}}catch(l){tr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _ae(t,e,n){Xe=t,lV(t)}function lV(t,e,n){for(var r=(t.mode&1)!==0;Xe!==null;){var s=Xe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||g1;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Os;a=g1;var c=Os;if(g1=o,(Os=l)&&!c)for(Xe=s;Xe!==null;)o=Xe,l=o.child,o.tag===22&&o.memoizedState!==null?qU(s):l!==null?(l.return=o,Xe=l):qU(s);for(;i!==null;)Xe=i,lV(i),i=i.sibling;Xe=s,g1=a,Os=c}KU(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Xe=i):KU(t)}}function KU(t){for(;Xe!==null;){var e=Xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Os||MC(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Os)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ia(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&$U(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$U(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var A=u.dehydrated;A!==null&&wy(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_e(163))}Os||e.flags&512&&xI(e)}catch(d){tr(e,e.return,d)}}if(e===t){Xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Xe=n;break}Xe=e.return}}function XU(t){for(;Xe!==null;){var e=Xe;if(e===t){Xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Xe=n;break}Xe=e.return}}function qU(t){for(;Xe!==null;){var e=Xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{MC(4,e)}catch(l){tr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){tr(e,s,l)}}var i=e.return;try{xI(e)}catch(l){tr(e,i,l)}break;case 5:var o=e.return;try{xI(e)}catch(l){tr(e,o,l)}}}catch(l){tr(e,e.return,l)}if(e===t){Xe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Xe=a;break}Xe=e.return}}var Oae=Math.ceil,Ew=Ec.ReactCurrentDispatcher,k$=Ec.ReactCurrentOwner,Po=Ec.ReactCurrentBatchConfig,Vt=0,ts=null,Cr=null,ys=0,Xi=0,uh=rA(0),Lr=0,_y=null,Rd=0,QC=0,T$=0,Zg=null,vi=null,F$=0,Jh=1/0,jl=null,Iw=!1,wI=null,Nu=null,y1=!1,uu=null,kw=0,ey=0,CI=null,zb=-1,Vb=0;function si(){return Vt&6?hr():zb!==-1?zb:zb=hr()}function Eu(t){return t.mode&1?Vt&2&&ys!==0?ys&-ys:gae.transition!==null?(Vb===0&&(Vb=W9()),Vb):(t=on,t!==0||(t=window.event,t=t===void 0?16:Z9(t.type)),t):1}function xa(t,e,n,r){if(50<ey)throw ey=0,CI=null,Error(_e(185));Y0(t,n,r),(!(Vt&2)||t!==ts)&&(t===ts&&(!(Vt&2)&&(QC|=n),Lr===4&&tu(t,ys)),Fi(t,r),n===1&&Vt===0&&!(e.mode&1)&&(Jh=hr()+500,UC&&sA()))}function Fi(t,e){var n=t.callbackNode;goe(t,e);var r=dw(t,t===ts?ys:0);if(r===0)n!==null&&iU(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&iU(n),e===1)t.tag===0?mae(YU.bind(null,t)):yz(YU.bind(null,t)),dae(function(){!(Vt&6)&&sA()}),n=null;else{switch(G9(r)){case 1:n=r$;break;case 4:n=z9;break;case 16:n=Aw;break;case 536870912:n=V9;break;default:n=Aw}n=mV(n,cV.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function cV(t,e){if(zb=-1,Vb=0,Vt&6)throw Error(_e(327));var n=t.callbackNode;if(Ch()&&t.callbackNode!==n)return null;var r=dw(t,t===ts?ys:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Tw(t,r);else{e=r;var s=Vt;Vt|=2;var i=AV();(ts!==t||ys!==e)&&(jl=null,Jh=hr()+500,bd(t,e));do try{Pae();break}catch(a){uV(t,a)}while(!0);m$(),Ew.current=i,Vt=s,Cr!==null?e=0:(ts=null,ys=0,e=Lr)}if(e!==0){if(e===2&&(s=qE(t),s!==0&&(r=s,e=SI(t,s))),e===1)throw n=_y,bd(t,0),tu(t,r),Fi(t,hr()),n;if(e===6)tu(t,r);else{if(s=t.current.alternate,!(r&30)&&!Dae(s)&&(e=Tw(t,r),e===2&&(i=qE(t),i!==0&&(r=i,e=SI(t,i))),e===1))throw n=_y,bd(t,0),tu(t,r),Fi(t,hr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(_e(345));case 2:QA(t,vi,jl);break;case 3:if(tu(t,r),(r&130023424)===r&&(e=F$+500-hr(),10<e)){if(dw(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){si(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=sI(QA.bind(null,t,vi,jl),e);break}QA(t,vi,jl);break;case 4:if(tu(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ya(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=hr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Oae(r/1960))-r,10<r){t.timeoutHandle=sI(QA.bind(null,t,vi,jl),r);break}QA(t,vi,jl);break;case 5:QA(t,vi,jl);break;default:throw Error(_e(329))}}}return Fi(t,hr()),t.callbackNode===n?cV.bind(null,t):null}function SI(t,e){var n=Zg;return t.current.memoizedState.isDehydrated&&(bd(t,e).flags|=256),t=Tw(t,e),t!==2&&(e=vi,vi=n,e!==null&&BI(e)),t}function BI(t){vi===null?vi=t:vi.push.apply(vi,t)}function Dae(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ba(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tu(t,e){for(e&=~T$,e&=~QC,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ya(e),r=1<<n;t[n]=-1,e&=~r}}function YU(t){if(Vt&6)throw Error(_e(327));Ch();var e=dw(t,0);if(!(e&1))return Fi(t,hr()),null;var n=Tw(t,e);if(t.tag!==0&&n===2){var r=qE(t);r!==0&&(e=r,n=SI(t,r))}if(n===1)throw n=_y,bd(t,0),tu(t,e),Fi(t,hr()),n;if(n===6)throw Error(_e(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,QA(t,vi,jl),Fi(t,hr()),null}function $$(t,e){var n=Vt;Vt|=1;try{return t(e)}finally{Vt=n,Vt===0&&(Jh=hr()+500,UC&&sA())}}function Pd(t){uu!==null&&uu.tag===0&&!(Vt&6)&&Ch();var e=Vt;Vt|=1;var n=Po.transition,r=on;try{if(Po.transition=null,on=1,t)return t()}finally{on=r,Po.transition=n,Vt=e,!(Vt&6)&&sA()}}function _$(){Xi=uh.current,_n(uh)}function bd(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Aae(n)),Cr!==null)for(n=Cr.return;n!==null;){var r=n;switch(f$(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gw();break;case 3:qh(),_n(ki),_n(js),w$();break;case 5:b$(r);break;case 4:qh();break;case 13:_n(Gn);break;case 19:_n(Gn);break;case 10:g$(r.type._context);break;case 22:case 23:_$()}n=n.return}if(ts=t,Cr=t=Iu(t.current,null),ys=Xi=e,Lr=0,_y=null,T$=QC=Rd=0,vi=Zg=null,nd!==null){for(e=0;e<nd.length;e++)if(n=nd[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}nd=null}return t}function uV(t,e){do{var n=Cr;try{if(m$(),Mb.current=Nw,Bw){for(var r=Xn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Bw=!1}if(Dd=0,Jr=Pr=Xn=null,Yg=!1,Ty=0,k$.current=null,n===null||n.return===null){Lr=1,_y=e,Cr=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=ys,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,A=u.tag;if(!(u.mode&1)&&(A===0||A===11||A===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=UU(o);if(f!==null){f.flags&=-257,jU(f,o,a,i,e),f.mode&1&&PU(i,c,e),e=f,l=c;var h=e.updateQueue;if(h===null){var m=new Set;m.add(l),e.updateQueue=m}else h.add(l);break e}else{if(!(e&1)){PU(i,c,e),O$();break e}l=Error(_e(426))}}else if(Ln&&a.mode&1){var g=UU(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),jU(g,o,a,i,e),h$(Yh(l,a));break e}}i=l=Yh(l,a),Lr!==4&&(Lr=2),Zg===null?Zg=[i]:Zg.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=Gz(i,l,e);FU(i,y);break e;case 1:a=l;var x=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Nu===null||!Nu.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=Kz(i,a,e);FU(i,b);break e}}i=i.return}while(i!==null)}fV(n)}catch(w){e=w,Cr===n&&n!==null&&(Cr=n=n.return);continue}break}while(!0)}function AV(){var t=Ew.current;return Ew.current=Nw,t===null?Nw:t}function O$(){(Lr===0||Lr===3||Lr===2)&&(Lr=4),ts===null||!(Rd&268435455)&&!(QC&268435455)||tu(ts,ys)}function Tw(t,e){var n=Vt;Vt|=2;var r=AV();(ts!==t||ys!==e)&&(jl=null,bd(t,e));do try{Rae();break}catch(s){uV(t,s)}while(!0);if(m$(),Vt=n,Ew.current=r,Cr!==null)throw Error(_e(261));return ts=null,ys=0,Lr}function Rae(){for(;Cr!==null;)dV(Cr)}function Pae(){for(;Cr!==null&&!loe();)dV(Cr)}function dV(t){var e=pV(t.alternate,t,Xi);t.memoizedProps=t.pendingProps,e===null?fV(t):Cr=e,k$.current=null}function fV(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Tae(n,e),n!==null){n.flags&=32767,Cr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Lr=6,Cr=null;return}}else if(n=kae(n,e,Xi),n!==null){Cr=n;return}if(e=e.sibling,e!==null){Cr=e;return}Cr=e=t}while(e!==null);Lr===0&&(Lr=5)}function QA(t,e,n){var r=on,s=Po.transition;try{Po.transition=null,on=1,Uae(t,e,n,r)}finally{Po.transition=s,on=r}return null}function Uae(t,e,n,r){do Ch();while(uu!==null);if(Vt&6)throw Error(_e(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(_e(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(yoe(t,i),t===ts&&(Cr=ts=null,ys=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||y1||(y1=!0,mV(Aw,function(){return Ch(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Po.transition,Po.transition=null;var o=on;on=1;var a=Vt;Vt|=4,k$.current=null,$ae(t,n),aV(n,t),sae(nI),fw=!!tI,nI=tI=null,t.current=n,_ae(n),coe(),Vt=a,on=o,Po.transition=i}else t.current=n;if(y1&&(y1=!1,uu=t,kw=s),i=t.pendingLanes,i===0&&(Nu=null),doe(n.stateNode),Fi(t,hr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Iw)throw Iw=!1,t=wI,wI=null,t;return kw&1&&t.tag!==0&&Ch(),i=t.pendingLanes,i&1?t===CI?ey++:(ey=0,CI=t):ey=0,sA(),null}function Ch(){if(uu!==null){var t=G9(kw),e=Po.transition,n=on;try{if(Po.transition=null,on=16>t?16:t,uu===null)var r=!1;else{if(t=uu,uu=null,kw=0,Vt&6)throw Error(_e(331));var s=Vt;for(Vt|=4,Xe=t.current;Xe!==null;){var i=Xe,o=i.child;if(Xe.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Xe=c;Xe!==null;){var u=Xe;switch(u.tag){case 0:case 11:case 15:Jg(8,u,i)}var A=u.child;if(A!==null)A.return=u,Xe=A;else for(;Xe!==null;){u=Xe;var d=u.sibling,f=u.return;if(sV(u),u===c){Xe=null;break}if(d!==null){d.return=f,Xe=d;break}Xe=f}}}var h=i.alternate;if(h!==null){var m=h.child;if(m!==null){h.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Xe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Xe=o;else e:for(;Xe!==null;){if(i=Xe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Jg(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Xe=y;break e}Xe=i.return}}var x=t.current;for(Xe=x;Xe!==null;){o=Xe;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Xe=v;else e:for(o=x;Xe!==null;){if(a=Xe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:MC(9,a)}}catch(w){tr(a,a.return,w)}if(a===o){Xe=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,Xe=b;break e}Xe=a.return}}if(Vt=s,sA(),al&&typeof al.onPostCommitFiberRoot=="function")try{al.onPostCommitFiberRoot(_C,t)}catch{}r=!0}return r}finally{on=n,Po.transition=e}}return!1}function JU(t,e,n){e=Yh(n,e),e=Gz(t,e,1),t=Bu(t,e,1),e=si(),t!==null&&(Y0(t,1,e),Fi(t,e))}function tr(t,e,n){if(t.tag===3)JU(t,t,n);else for(;e!==null;){if(e.tag===3){JU(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nu===null||!Nu.has(r))){t=Yh(n,t),t=Kz(e,t,1),e=Bu(e,t,1),t=si(),e!==null&&(Y0(e,1,t),Fi(e,t));break}}e=e.return}}function jae(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=si(),t.pingedLanes|=t.suspendedLanes&n,ts===t&&(ys&n)===n&&(Lr===4||Lr===3&&(ys&130023424)===ys&&500>hr()-F$?bd(t,0):T$|=n),Fi(t,e)}function hV(t,e){e===0&&(t.mode&1?(e=l1,l1<<=1,!(l1&130023424)&&(l1=4194304)):e=1);var n=si();t=fc(t,e),t!==null&&(Y0(t,e,n),Fi(t,n))}function Lae(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hV(t,n)}function Mae(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(_e(314))}r!==null&&r.delete(e),hV(t,n)}var pV;pV=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ki.current)Si=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Si=!1,Iae(t,e,n);Si=!!(t.flags&131072)}else Si=!1,Ln&&e.flags&1048576&&xz(e,vw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hb(t,e),t=e.pendingProps;var s=Gh(e,js.current);wh(e,n),s=S$(null,e,r,t,s,n);var i=B$();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ti(r)?(i=!0,yw(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,x$(e),s.updater=LC,e.stateNode=s,s._reactInternals=e,AI(e,r,t,n),e=hI(null,e,r,!0,i,n)):(e.tag=0,Ln&&i&&d$(e),Ys(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Hb(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Hae(r),t=ia(r,t),s){case 0:e=fI(null,e,r,t,n);break e;case 1:e=QU(null,e,r,t,n);break e;case 11:e=LU(null,e,r,t,n);break e;case 14:e=MU(null,e,r,ia(r.type,t),n);break e}throw Error(_e(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ia(r,s),fI(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ia(r,s),QU(t,e,r,s,n);case 3:e:{if(Jz(e),t===null)throw Error(_e(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Bz(t,e),Cw(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Yh(Error(_e(423)),e),e=HU(t,e,r,n,s);break e}else if(r!==s){s=Yh(Error(_e(424)),e),e=HU(t,e,r,n,s);break e}else for(eo=Su(e.stateNode.containerInfo.firstChild),no=e,Ln=!0,Aa=null,n=Cz(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kh(),r===s){e=hc(t,e,n);break e}Ys(t,e,r,n)}e=e.child}return e;case 5:return Nz(e),t===null&&lI(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,rI(r,s)?o=null:i!==null&&rI(r,i)&&(e.flags|=32),Yz(t,e),Ys(t,e,o,n),e.child;case 6:return t===null&&lI(e),null;case 13:return Zz(t,e,n);case 4:return v$(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xh(e,null,r,n):Ys(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ia(r,s),LU(t,e,r,s,n);case 7:return Ys(t,e,e.pendingProps,n),e.child;case 8:return Ys(t,e,e.pendingProps.children,n),e.child;case 12:return Ys(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Bn(bw,r._currentValue),r._currentValue=o,i!==null)if(Ba(i.value,o)){if(i.children===s.children&&!ki.current){e=hc(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=sc(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),cI(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(_e(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),cI(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ys(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,wh(e,n),s=Mo(s),r=r(s),e.flags|=1,Ys(t,e,r,n),e.child;case 14:return r=e.type,s=ia(r,e.pendingProps),s=ia(r.type,s),MU(t,e,r,s,n);case 15:return Xz(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ia(r,s),Hb(t,e),e.tag=1,Ti(r)?(t=!0,yw(e)):t=!1,wh(e,n),Wz(e,r,s),AI(e,r,s,n),hI(null,e,r,!0,t,n);case 19:return eV(t,e,n);case 22:return qz(t,e,n)}throw Error(_e(156,e.tag))};function mV(t,e){return H9(t,e)}function Qae(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function No(t,e,n,r){return new Qae(t,e,n,r)}function D$(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hae(t){if(typeof t=="function")return D$(t)?1:0;if(t!=null){if(t=t.$$typeof,t===e$)return 11;if(t===t$)return 14}return 2}function Iu(t,e){var n=t.alternate;return n===null?(n=No(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wb(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")D$(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case eh:return wd(n.children,s,i,e);case ZF:o=8,s|=8;break;case DE:return t=No(12,n,e,s|2),t.elementType=DE,t.lanes=i,t;case RE:return t=No(13,n,e,s),t.elementType=RE,t.lanes=i,t;case PE:return t=No(19,n,e,s),t.elementType=PE,t.lanes=i,t;case N9:return HC(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case S9:o=10;break e;case B9:o=9;break e;case e$:o=11;break e;case t$:o=14;break e;case Kc:o=16,r=null;break e}throw Error(_e(130,t==null?t:typeof t,""))}return e=No(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function wd(t,e,n,r){return t=No(7,t,r,e),t.lanes=n,t}function HC(t,e,n,r){return t=No(22,t,r,e),t.elementType=N9,t.lanes=n,t.stateNode={isHidden:!1},t}function MN(t,e,n){return t=No(6,t,null,e),t.lanes=n,t}function QN(t,e,n){return e=No(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zae(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wN(0),this.expirationTimes=wN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wN(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function R$(t,e,n,r,s,i,o,a,l){return t=new zae(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=No(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},x$(i),t}function Vae(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zf,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gV(t){if(!t)return Mu;t=t._reactInternals;e:{if(lf(t)!==t||t.tag!==1)throw Error(_e(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ti(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(_e(171))}if(t.tag===1){var n=t.type;if(Ti(n))return gz(t,n,e)}return e}function yV(t,e,n,r,s,i,o,a,l){return t=R$(n,r,!0,t,s,i,o,a,l),t.context=gV(null),n=t.current,r=si(),s=Eu(n),i=sc(r,s),i.callback=e??null,Bu(n,i,s),t.current.lanes=s,Y0(t,s,r),Fi(t,r),t}function zC(t,e,n,r){var s=e.current,i=si(),o=Eu(s);return n=gV(n),e.context===null?e.context=n:e.pendingContext=n,e=sc(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bu(s,e,o),t!==null&&(xa(t,s,o,i),Lb(t,s,o)),o}function Fw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ZU(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function P$(t,e){ZU(t,e),(t=t.alternate)&&ZU(t,e)}function Wae(){return null}var xV=typeof reportError=="function"?reportError:function(t){console.error(t)};function U$(t){this._internalRoot=t}VC.prototype.render=U$.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(_e(409));zC(t,e,null,null)};VC.prototype.unmount=U$.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pd(function(){zC(null,t,null,null)}),e[dc]=null}};function VC(t){this._internalRoot=t}VC.prototype.unstable_scheduleHydration=function(t){if(t){var e=q9();t={blockedOn:null,target:t,priority:e};for(var n=0;n<eu.length&&e!==0&&e<eu[n].priority;n++);eu.splice(n,0,t),n===0&&J9(t)}};function j$(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function WC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ej(){}function Gae(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Fw(o);i.call(c)}}var o=yV(e,r,t,0,null,!1,!1,"",ej);return t._reactRootContainer=o,t[dc]=o.current,By(t.nodeType===8?t.parentNode:t),Pd(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Fw(l);a.call(c)}}var l=R$(t,0,!1,null,null,!1,!1,"",ej);return t._reactRootContainer=l,t[dc]=l.current,By(t.nodeType===8?t.parentNode:t),Pd(function(){zC(e,l,n,r)}),l}function GC(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Fw(o);a.call(l)}}zC(e,o,t,s)}else o=Gae(n,e,t,s,r);return Fw(o)}K9=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sg(e.pendingLanes);n!==0&&(s$(e,n|1),Fi(e,hr()),!(Vt&6)&&(Jh=hr()+500,sA()))}break;case 13:Pd(function(){var r=fc(t,1);if(r!==null){var s=si();xa(r,t,1,s)}}),P$(t,1)}};i$=function(t){if(t.tag===13){var e=fc(t,134217728);if(e!==null){var n=si();xa(e,t,134217728,n)}P$(t,134217728)}};X9=function(t){if(t.tag===13){var e=Eu(t),n=fc(t,e);if(n!==null){var r=si();xa(n,t,e,r)}P$(t,e)}};q9=function(){return on};Y9=function(t,e){var n=on;try{return on=t,e()}finally{on=n}};GE=function(t,e,n){switch(e){case"input":if(LE(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=PC(r);if(!s)throw Error(_e(90));I9(r),LE(r,s)}}}break;case"textarea":T9(t,n);break;case"select":e=n.value,e!=null&&yh(t,!!n.multiple,e,!1)}};P9=$$;U9=Pd;var Kae={usingClientEntryPoint:!1,Events:[Z0,sh,PC,D9,R9,$$]},qm={findFiberByHostInstance:td,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xae={bundleType:qm.bundleType,version:qm.version,rendererPackageName:qm.rendererPackageName,rendererConfig:qm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ec.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=M9(t),t===null?null:t.stateNode},findFiberByHostInstance:qm.findFiberByHostInstance||Wae,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var x1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!x1.isDisabled&&x1.supportsFiber)try{_C=x1.inject(Xae),al=x1}catch{}}oo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kae;oo.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!j$(e))throw Error(_e(200));return Vae(t,e,null,n)};oo.createRoot=function(t,e){if(!j$(t))throw Error(_e(299));var n=!1,r="",s=xV;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=R$(t,1,!1,null,null,n,!1,r,s),t[dc]=e.current,By(t.nodeType===8?t.parentNode:t),new U$(e)};oo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(_e(188)):(t=Object.keys(t).join(","),Error(_e(268,t)));return t=M9(e),t=t===null?null:t.stateNode,t};oo.flushSync=function(t){return Pd(t)};oo.hydrate=function(t,e,n){if(!WC(e))throw Error(_e(200));return GC(null,t,e,!0,n)};oo.hydrateRoot=function(t,e,n){if(!j$(t))throw Error(_e(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=xV;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=yV(e,null,t,1,n??null,s,!1,i,o),t[dc]=e.current,By(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new VC(e)};oo.render=function(t,e,n){if(!WC(e))throw Error(_e(200));return GC(null,t,e,!1,n)};oo.unmountComponentAtNode=function(t){if(!WC(t))throw Error(_e(40));return t._reactRootContainer?(Pd(function(){GC(null,null,t,!1,function(){t._reactRootContainer=null,t[dc]=null})}),!0):!1};oo.unstable_batchedUpdates=$$;oo.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!WC(n))throw Error(_e(200));if(t==null||t._reactInternals===void 0)throw Error(_e(38));return GC(t,e,n,!1,r)};oo.version="18.3.1-next-f1338f8080-20240426";function vV(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vV)}catch(t){console.error(t)}}vV(),v9.exports=oo;var qae=v9.exports,tj=qae;_E.createRoot=tj.createRoot,_E.hydrateRoot=tj.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oy(){return Oy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oy.apply(this,arguments)}var Au;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Au||(Au={}));const nj="popstate";function Yae(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return NI("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:$w(s)}return Zae(e,n,null,t)}function gr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bV(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Jae(){return Math.random().toString(36).substr(2,8)}function rj(t,e){return{usr:t.state,key:t.key,idx:e}}function NI(t,e,n,r){return n===void 0&&(n=null),Oy({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Wp(e):e,{state:n,key:e&&e.key||r||Jae()})}function $w(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wp(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Zae(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Au.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Oy({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function A(){a=Au.Pop;let g=u(),y=g==null?null:g-c;c=g,l&&l({action:a,location:m.location,delta:y})}function d(g,y){a=Au.Push;let x=NI(m.location,g,y);c=u()+1;let v=rj(x,c),b=m.createHref(x);try{o.pushState(v,"",b)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;s.location.assign(b)}i&&l&&l({action:a,location:m.location,delta:1})}function f(g,y){a=Au.Replace;let x=NI(m.location,g,y);c=u();let v=rj(x,c),b=m.createHref(x);o.replaceState(v,"",b),i&&l&&l({action:a,location:m.location,delta:0})}function h(g){let y=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof g=="string"?g:$w(g);return x=x.replace(/ $/,"%20"),gr(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let m={get action(){return a},get location(){return t(s,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(nj,A),l=g,()=>{s.removeEventListener(nj,A),l=null}},createHref(g){return e(s,g)},createURL:h,encodeLocation(g){let y=h(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:f,go(g){return o.go(g)}};return m}var sj;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(sj||(sj={}));function ele(t,e,n){return n===void 0&&(n="/"),tle(t,e,n)}function tle(t,e,n,r){let s=typeof e=="string"?Wp(e):e,i=L$(s.pathname||"/",n);if(i==null)return null;let o=wV(t);nle(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=hle(i);a=Ale(o[l],c)}return a}function wV(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(gr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ku([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(gr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),wV(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:cle(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of CV(i.path))s(i,o,l)}),e}function CV(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=CV(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function nle(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ule(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const rle=/^:[\w-]+$/,sle=3,ile=2,ole=1,ale=10,lle=-2,ij=t=>t==="*";function cle(t,e){let n=t.split("/"),r=n.length;return n.some(ij)&&(r+=lle),e&&(r+=ile),n.filter(s=>!ij(s)).reduce((s,i)=>s+(rle.test(i)?sle:i===""?ole:ale),r)}function ule(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Ale(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",A=dle({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!A)return null;Object.assign(s,A.params),o.push({params:s,pathname:ku([i,A.pathname]),pathnameBase:yle(ku([i,A.pathnameBase])),route:d}),A.pathnameBase!=="/"&&(i=ku([i,A.pathnameBase]))}return o}function dle(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=fle(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,A)=>{let{paramName:d,isOptional:f}=u;if(d==="*"){let m=a[A]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const h=a[A];return f&&!h?c[d]=void 0:c[d]=(h||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function fle(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),bV(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function hle(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bV(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function L$(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function ple(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Wp(t):t;return{pathname:n?n.startsWith("/")?n:mle(n,e):e,search:xle(r),hash:vle(s)}}function mle(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function HN(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gle(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function M$(t,e){let n=gle(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Q$(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Wp(t):(s=Oy({},t),gr(!s.pathname||!s.pathname.includes("?"),HN("?","pathname","search",s)),gr(!s.pathname||!s.pathname.includes("#"),HN("#","pathname","hash",s)),gr(!s.search||!s.search.includes("#"),HN("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let A=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),A-=1;s.pathname=d.join("/")}a=A>=0?e[A]:"/"}let l=ple(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const ku=t=>t.join("/").replace(/\/\/+/g,"/"),yle=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xle=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vle=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ble(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const SV=["post","put","patch","delete"];new Set(SV);const wle=["get",...SV];new Set(wle);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dy(){return Dy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dy.apply(this,arguments)}const H$=Q.createContext(null),Cle=Q.createContext(null),iA=Q.createContext(null),KC=Q.createContext(null),Ic=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),BV=Q.createContext(null);function Sle(t,e){let{relative:n}=e===void 0?{}:e;Gp()||gr(!1);let{basename:r,navigator:s}=Q.useContext(iA),{hash:i,pathname:o,search:a}=EV(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ku([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Gp(){return Q.useContext(KC)!=null}function tx(){return Gp()||gr(!1),Q.useContext(KC).location}function NV(t){Q.useContext(iA).static||Q.useLayoutEffect(t)}function is(){let{isDataRoute:t}=Q.useContext(Ic);return t?Ple():Ble()}function Ble(){Gp()||gr(!1);let t=Q.useContext(H$),{basename:e,future:n,navigator:r}=Q.useContext(iA),{matches:s}=Q.useContext(Ic),{pathname:i}=tx(),o=JSON.stringify(M$(s,n.v7_relativeSplatPath)),a=Q.useRef(!1);return NV(()=>{a.current=!0}),Q.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let A=Q$(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(A.pathname=A.pathname==="/"?e:ku([e,A.pathname])),(u.replace?r.replace:r.push)(A,u.state,u)},[e,r,o,i,t])}function oA(){let{matches:t}=Q.useContext(Ic),e=t[t.length-1];return e?e.params:{}}function EV(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=Q.useContext(iA),{matches:s}=Q.useContext(Ic),{pathname:i}=tx(),o=JSON.stringify(M$(s,r.v7_relativeSplatPath));return Q.useMemo(()=>Q$(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Nle(t,e){return Ele(t,e)}function Ele(t,e,n,r){Gp()||gr(!1);let{navigator:s}=Q.useContext(iA),{matches:i}=Q.useContext(Ic),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=tx(),u;if(e){var A;let g=typeof e=="string"?Wp(e):e;l==="/"||(A=g.pathname)!=null&&A.startsWith(l)||gr(!1),u=g}else u=c;let d=u.pathname||"/",f=d;if(l!=="/"){let g=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let h=ele(t,{pathname:f}),m=$le(h&&h.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:ku([l,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:ku([l,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,n,r);return e&&m?Q.createElement(KC.Provider,{value:{location:Dy({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Au.Pop}},m):m}function Ile(){let t=Rle(),e=ble(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),n?Q.createElement("pre",{style:s},n):null,null)}const kle=Q.createElement(Ile,null);class Tle extends Q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?Q.createElement(Ic.Provider,{value:this.props.routeContext},Q.createElement(BV.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Fle(t){let{routeContext:e,match:n,children:r}=t,s=Q.useContext(H$);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),Q.createElement(Ic.Provider,{value:e},r)}function $le(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(A=>A.route.id&&(a==null?void 0:a[A.route.id])!==void 0);u>=0||gr(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let A=o[u];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(c=u),A.route.id){let{loaderData:d,errors:f}=n,h=A.route.loader&&d[A.route.id]===void 0&&(!f||f[A.route.id]===void 0);if(A.route.lazy||h){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,A,d)=>{let f,h=!1,m=null,g=null;n&&(f=a&&A.route.id?a[A.route.id]:void 0,m=A.route.errorElement||kle,l&&(c<0&&d===0?(Ule("route-fallback"),h=!0,g=null):c===d&&(h=!0,g=A.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,d+1)),x=()=>{let v;return f?v=m:h?v=g:A.route.Component?v=Q.createElement(A.route.Component,null):A.route.element?v=A.route.element:v=u,Q.createElement(Fle,{match:A,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:v})};return n&&(A.route.ErrorBoundary||A.route.errorElement||d===0)?Q.createElement(Tle,{location:n.location,revalidation:n.revalidation,component:m,error:f,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var IV=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(IV||{}),kV=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(kV||{});function _le(t){let e=Q.useContext(H$);return e||gr(!1),e}function Ole(t){let e=Q.useContext(Cle);return e||gr(!1),e}function Dle(t){let e=Q.useContext(Ic);return e||gr(!1),e}function TV(t){let e=Dle(),n=e.matches[e.matches.length-1];return n.route.id||gr(!1),n.route.id}function Rle(){var t;let e=Q.useContext(BV),n=Ole(),r=TV();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Ple(){let{router:t}=_le(IV.UseNavigateStable),e=TV(kV.UseNavigateStable),n=Q.useRef(!1);return NV(()=>{n.current=!0}),Q.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Dy({fromRouteId:e},i)))},[t,e])}const oj={};function Ule(t,e,n){oj[t]||(oj[t]=!0)}function jle(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Yi(t){let{to:e,replace:n,state:r,relative:s}=t;Gp()||gr(!1);let{future:i,static:o}=Q.useContext(iA),{matches:a}=Q.useContext(Ic),{pathname:l}=tx(),c=is(),u=Q$(e,M$(a,i.v7_relativeSplatPath),l,s==="path"),A=JSON.stringify(u);return Q.useEffect(()=>c(JSON.parse(A),{replace:n,state:r,relative:s}),[c,A,s,n,r]),null}function Tn(t){gr(!1)}function Lle(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Au.Pop,navigator:i,static:o=!1,future:a}=t;Gp()&&gr(!1);let l=e.replace(/^\/*/,"/"),c=Q.useMemo(()=>({basename:l,navigator:i,static:o,future:Dy({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Wp(r));let{pathname:u="/",search:A="",hash:d="",state:f=null,key:h="default"}=r,m=Q.useMemo(()=>{let g=L$(u,l);return g==null?null:{location:{pathname:g,search:A,hash:d,state:f,key:h},navigationType:s}},[l,u,A,d,f,h,s]);return m==null?null:Q.createElement(iA.Provider,{value:c},Q.createElement(KC.Provider,{children:n,value:m}))}function Mle(t){let{children:e,location:n}=t;return Nle(EI(e),n)}new Promise(()=>{});function EI(t,e){e===void 0&&(e=[]);let n=[];return Q.Children.forEach(t,(r,s)=>{if(!Q.isValidElement(r))return;let i=[...e,s];if(r.type===Q.Fragment){n.push.apply(n,EI(r.props.children,i));return}r.type!==Tn&&gr(!1),!r.props.index||!r.props.children||gr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=EI(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function II(){return II=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},II.apply(this,arguments)}function Qle(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Hle(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zle(t,e){return t.button===0&&(!e||e==="_self")&&!Hle(t)}const Vle=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Wle="6";try{window.__reactRouterVersion=Wle}catch{}const Gle="startTransition",aj=jie[Gle];function Kle(t){let{basename:e,children:n,future:r,window:s}=t,i=Q.useRef();i.current==null&&(i.current=Yae({window:s,v5Compat:!0}));let o=i.current,[a,l]=Q.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=Q.useCallback(A=>{c&&aj?aj(()=>l(A)):l(A)},[l,c]);return Q.useLayoutEffect(()=>o.listen(u),[o,u]),Q.useEffect(()=>jle(r),[r]),Q.createElement(Lle,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Xle=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qle=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qc=Q.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:A}=e,d=Qle(e,Vle),{basename:f}=Q.useContext(iA),h,m=!1;if(typeof c=="string"&&qle.test(c)&&(h=c,Xle))try{let v=new URL(window.location.href),b=c.startsWith("//")?new URL(v.protocol+c):new URL(c),w=L$(b.pathname,f);b.origin===v.origin&&w!=null?c=w+b.search+b.hash:m=!0}catch{}let g=Sle(c,{relative:s}),y=Yle(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:A});function x(v){r&&r(v),v.defaultPrevented||y(v)}return Q.createElement("a",II({},d,{href:h||g,onClick:m||i?r:x,ref:n,target:l}))});var lj;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(lj||(lj={}));var cj;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(cj||(cj={}));function Yle(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=is(),c=tx(),u=EV(t,{relative:o});return Q.useCallback(A=>{if(zle(A,n)){A.preventDefault();let d=r!==void 0?r:$w(c)===$w(u);l(t,{replace:d,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}var XC=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Jle={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ru,VF,Z7,Zle=(Z7=class{constructor(){Mt(this,ru,Jle);Mt(this,VF,!1)}setTimeoutProvider(t){gt(this,ru,t)}setTimeout(t,e){return Be(this,ru).setTimeout(t,e)}clearTimeout(t){Be(this,ru).clearTimeout(t)}setInterval(t,e){return Be(this,ru).setInterval(t,e)}clearInterval(t){Be(this,ru).clearInterval(t)}},ru=new WeakMap,VF=new WeakMap,Z7),kI=new Zle;function ece(t){setTimeout(t,0)}var qC=typeof window>"u"||"Deno"in globalThis;function oa(){}function tce(t,e){return typeof t=="function"?t(e):t}function nce(t){return typeof t=="number"&&t>=0&&t!==1/0}function rce(t,e){return Math.max(t+(e||0)-Date.now(),0)}function TI(t,e){return typeof t=="function"?t(e):t}function sce(t,e){return typeof t=="function"?t(e):t}function uj(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==z$(o,e.options))return!1}else if(!Py(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function Aj(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Ry(e.options.mutationKey)!==Ry(i))return!1}else if(!Py(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function z$(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ry)(t)}function Ry(t){return JSON.stringify(t,(e,n)=>FI(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Py(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Py(t[n],e[n])):!1}var ice=Object.prototype.hasOwnProperty;function FV(t,e){if(t===e)return t;const n=dj(t)&&dj(e);if(!n&&!(FI(t)&&FI(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const u=n?c:i[c],A=t[u],d=e[u];if(A===d){a[u]=A,(n?c<s:ice.call(t,u))&&l++;continue}if(A===null||d===null||typeof A!="object"||typeof d!="object"){a[u]=d;continue}const f=FV(A,d);a[u]=f,f===A&&l++}return s===o&&l===s?t:a}function dj(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function FI(t){if(!fj(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!fj(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function fj(t){return Object.prototype.toString.call(t)==="[object Object]"}function oce(t){return new Promise(e=>{kI.setTimeout(e,t)})}function ace(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?FV(t,e):e}function lce(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function cce(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var V$=Symbol();function $V(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===V$?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var pd,su,Uh,e9,uce=(e9=class extends XC{constructor(){super();Mt(this,pd);Mt(this,su);Mt(this,Uh);gt(this,Uh,e=>{if(!qC&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Be(this,su)||this.setEventListener(Be(this,Uh))}onUnsubscribe(){var e;this.hasListeners()||((e=Be(this,su))==null||e.call(this),gt(this,su,void 0))}setEventListener(e){var n;gt(this,Uh,e),(n=Be(this,su))==null||n.call(this),gt(this,su,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Be(this,pd)!==e&&(gt(this,pd,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Be(this,pd)=="boolean"?Be(this,pd):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},pd=new WeakMap,su=new WeakMap,Uh=new WeakMap,e9),_V=new uce;function Ace(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var dce=ece;function fce(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=dce;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Zs=fce(),jh,iu,Lh,t9,hce=(t9=class extends XC{constructor(){super();Mt(this,jh,!0);Mt(this,iu);Mt(this,Lh);gt(this,Lh,e=>{if(!qC&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Be(this,iu)||this.setEventListener(Be(this,Lh))}onUnsubscribe(){var e;this.hasListeners()||((e=Be(this,iu))==null||e.call(this),gt(this,iu,void 0))}setEventListener(e){var n;gt(this,Lh,e),(n=Be(this,iu))==null||n.call(this),gt(this,iu,e(this.setOnline.bind(this)))}setOnline(e){Be(this,jh)!==e&&(gt(this,jh,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Be(this,jh)}},jh=new WeakMap,iu=new WeakMap,Lh=new WeakMap,t9),_w=new hce;function pce(t){return Math.min(1e3*2**t,3e4)}function OV(t){return(t??"online")==="online"?_w.isOnline():!0}var $I=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function DV(t){let e=!1,n=0,r;const s=Ace(),i=()=>s.status!=="pending",o=m=>{var g;if(!i()){const y=new $I(m);d(y),(g=t.onCancel)==null||g.call(t,y)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>_V.isFocused()&&(t.networkMode==="always"||_w.isOnline())&&t.canRun(),u=()=>OV(t.networkMode)&&t.canRun(),A=m=>{i()||(r==null||r(),s.resolve(m))},d=m=>{i()||(r==null||r(),s.reject(m))},f=()=>new Promise(m=>{var g;r=y=>{(i()||c())&&m(y)},(g=t.onPause)==null||g.call(t)}).then(()=>{var m;r=void 0,i()||(m=t.onContinue)==null||m.call(t)}),h=()=>{if(i())return;let m;const g=n===0?t.initialPromise:void 0;try{m=g??t.fn()}catch(y){m=Promise.reject(y)}Promise.resolve(m).then(A).catch(y=>{var C;if(i())return;const x=t.retry??(qC?0:3),v=t.retryDelay??pce,b=typeof v=="function"?v(n,y):v,w=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,y);if(e||!w){d(y);return}n++,(C=t.onFail)==null||C.call(t,n,y),oce(b).then(()=>c()?void 0:f()).then(()=>{e?d(y):h()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?h():f().then(h),s)}}var md,n9,RV=(n9=class{constructor(){Mt(this,md)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),nce(this.gcTime)&&gt(this,md,kI.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(qC?1/0:5*60*1e3))}clearGcTimeout(){Be(this,md)&&(kI.clearTimeout(Be(this,md)),gt(this,md,void 0))}},md=new WeakMap,n9),gd,Mh,vo,yd,qr,G0,xd,aa,Rl,r9,mce=(r9=class extends RV{constructor(e){super();Mt(this,aa);Mt(this,gd);Mt(this,Mh);Mt(this,vo);Mt(this,yd);Mt(this,qr);Mt(this,G0);Mt(this,xd);gt(this,xd,!1),gt(this,G0,e.defaultOptions),this.setOptions(e.options),this.observers=[],gt(this,yd,e.client),gt(this,vo,Be(this,yd).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,gt(this,gd,hj(this.options)),this.state=e.state??Be(this,gd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Be(this,qr))==null?void 0:e.promise}setOptions(e){if(this.options={...Be(this,G0),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=hj(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),gt(this,gd,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Be(this,vo).remove(this)}setData(e,n){const r=ace(this.state.data,e,this.options);return Bs(this,aa,Rl).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Bs(this,aa,Rl).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=Be(this,qr))==null?void 0:r.promise;return(s=Be(this,qr))==null||s.cancel(e),n?n.then(oa).catch(oa):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Be(this,gd))}isActive(){return this.observers.some(e=>sce(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===V$||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>TI(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!rce(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=Be(this,qr))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=Be(this,qr))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Be(this,vo).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(Be(this,qr)&&(Be(this,xd)?Be(this,qr).cancel({revert:!0}):Be(this,qr).cancelRetry()),this.scheduleGc()),Be(this,vo).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Bs(this,aa,Rl).call(this,{type:"invalidate"})}async fetch(e,n){var l,c,u,A,d,f,h,m,g,y,x,v;if(this.state.fetchStatus!=="idle"&&((l=Be(this,qr))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Be(this,qr))return Be(this,qr).continueRetry(),Be(this,qr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const b=this.observers.find(w=>w.options.queryFn);b&&this.setOptions(b.options)}const r=new AbortController,s=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(gt(this,xd,!0),r.signal)})},i=()=>{const b=$V(this.options,n),C=(()=>{const B={client:Be(this,yd),queryKey:this.queryKey,meta:this.meta};return s(B),B})();return gt(this,xd,!1),this.options.persister?this.options.persister(b,C,this):b(C)},a=(()=>{const b={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Be(this,yd),state:this.state,fetchFn:i};return s(b),b})();(c=this.options.behavior)==null||c.onFetch(a,this),gt(this,Mh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Bs(this,aa,Rl).call(this,{type:"fetch",meta:(A=a.fetchOptions)==null?void 0:A.meta}),gt(this,qr,DV({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:b=>{b instanceof $I&&b.revert&&this.setState({...Be(this,Mh),fetchStatus:"idle"}),r.abort()},onFail:(b,w)=>{Bs(this,aa,Rl).call(this,{type:"failed",failureCount:b,error:w})},onPause:()=>{Bs(this,aa,Rl).call(this,{type:"pause"})},onContinue:()=>{Bs(this,aa,Rl).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const b=await Be(this,qr).start();if(b===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(b),(f=(d=Be(this,vo).config).onSuccess)==null||f.call(d,b,this),(m=(h=Be(this,vo).config).onSettled)==null||m.call(h,b,this.state.error,this),b}catch(b){if(b instanceof $I){if(b.silent)return Be(this,qr).promise;if(b.revert){if(this.state.data===void 0)throw b;return this.state.data}}throw Bs(this,aa,Rl).call(this,{type:"error",error:b}),(y=(g=Be(this,vo).config).onError)==null||y.call(g,b,this),(v=(x=Be(this,vo).config).onSettled)==null||v.call(x,this.state.data,b,this),b}finally{this.scheduleGc()}}},gd=new WeakMap,Mh=new WeakMap,vo=new WeakMap,yd=new WeakMap,qr=new WeakMap,G0=new WeakMap,xd=new WeakMap,aa=new WeakSet,Rl=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...gce(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return gt(this,Mh,e.manual?s:void 0),s;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Zs.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Be(this,vo).notify({query:this,type:"updated",action:e})})},r9);function gce(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:OV(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function hj(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function pj(t){return{onFetch:(e,n)=>{var u,A,d,f,h;const r=e.options,s=(d=(A=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:A.fetchMore)==null?void 0:d.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((h=e.state.data)==null?void 0:h.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let m=!1;const g=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},y=$V(e.options,e.fetchOptions),x=async(v,b,w)=>{if(m)return Promise.reject();if(b==null&&v.pages.length)return Promise.resolve(v);const B=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:b,direction:w?"backward":"forward",meta:e.options.meta};return g(O),O})(),S=await y(B),{maxPages:N}=e.options,k=w?cce:lce;return{pages:k(v.pages,S,N),pageParams:k(v.pageParams,b,N)}};if(s&&i.length){const v=s==="backward",b=v?yce:mj,w={pages:i,pageParams:o},C=b(r,w);a=await x(w,C,v)}else{const v=t??i.length;do{const b=l===0?o[0]??r.initialPageParam:mj(r,a);if(l>0&&b==null)break;a=await x(a,b),l++}while(l<v)}return a};e.options.persister?e.fetchFn=()=>{var m,g;return(g=(m=e.options).persister)==null?void 0:g.call(m,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function mj(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function yce(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var K0,Xa,Ks,vd,qa,Vc,s9,xce=(s9=class extends RV{constructor(e){super();Mt(this,qa);Mt(this,K0);Mt(this,Xa);Mt(this,Ks);Mt(this,vd);gt(this,K0,e.client),this.mutationId=e.mutationId,gt(this,Ks,e.mutationCache),gt(this,Xa,[]),this.state=e.state||vce(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Be(this,Xa).includes(e)||(Be(this,Xa).push(e),this.clearGcTimeout(),Be(this,Ks).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){gt(this,Xa,Be(this,Xa).filter(n=>n!==e)),this.scheduleGc(),Be(this,Ks).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Be(this,Xa).length||(this.state.status==="pending"?this.scheduleGc():Be(this,Ks).remove(this))}continue(){var e;return((e=Be(this,vd))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,c,u,A,d,f,h,m,g,y,x,v,b,w,C,B,S,N;const n=()=>{Bs(this,qa,Vc).call(this,{type:"continue"})},r={client:Be(this,K0),meta:this.options.meta,mutationKey:this.options.mutationKey};gt(this,vd,DV({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(k,O)=>{Bs(this,qa,Vc).call(this,{type:"failed",failureCount:k,error:O})},onPause:()=>{Bs(this,qa,Vc).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Be(this,Ks).canRun(this)}));const s=this.state.status==="pending",i=!Be(this,vd).canStart();try{if(s)n();else{Bs(this,qa,Vc).call(this,{type:"pending",variables:e,isPaused:i}),await((a=(o=Be(this,Ks).config).onMutate)==null?void 0:a.call(o,e,this,r));const O=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e,r));O!==this.state.context&&Bs(this,qa,Vc).call(this,{type:"pending",context:O,variables:e,isPaused:i})}const k=await Be(this,vd).start();return await((A=(u=Be(this,Ks).config).onSuccess)==null?void 0:A.call(u,k,e,this.state.context,this,r)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,k,e,this.state.context,r)),await((m=(h=Be(this,Ks).config).onSettled)==null?void 0:m.call(h,k,null,this.state.variables,this.state.context,this,r)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,k,null,e,this.state.context,r)),Bs(this,qa,Vc).call(this,{type:"success",data:k}),k}catch(k){try{throw await((v=(x=Be(this,Ks).config).onError)==null?void 0:v.call(x,k,e,this.state.context,this,r)),await((w=(b=this.options).onError)==null?void 0:w.call(b,k,e,this.state.context,r)),await((B=(C=Be(this,Ks).config).onSettled)==null?void 0:B.call(C,void 0,k,this.state.variables,this.state.context,this,r)),await((N=(S=this.options).onSettled)==null?void 0:N.call(S,void 0,k,e,this.state.context,r)),k}finally{Bs(this,qa,Vc).call(this,{type:"error",error:k})}}finally{Be(this,Ks).runNext(this)}}},K0=new WeakMap,Xa=new WeakMap,Ks=new WeakMap,vd=new WeakMap,qa=new WeakSet,Vc=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Zs.batch(()=>{Be(this,Xa).forEach(r=>{r.onMutationUpdate(e)}),Be(this,Ks).notify({mutation:this,type:"updated",action:e})})},s9);function vce(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Wl,la,X0,i9,bce=(i9=class extends XC{constructor(e={}){super();Mt(this,Wl);Mt(this,la);Mt(this,X0);this.config=e,gt(this,Wl,new Set),gt(this,la,new Map),gt(this,X0,0)}build(e,n,r){const s=new xce({client:e,mutationCache:this,mutationId:++n1(this,X0)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){Be(this,Wl).add(e);const n=v1(e);if(typeof n=="string"){const r=Be(this,la).get(n);r?r.push(e):Be(this,la).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Be(this,Wl).delete(e)){const n=v1(e);if(typeof n=="string"){const r=Be(this,la).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&Be(this,la).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=v1(e);if(typeof n=="string"){const r=Be(this,la).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=v1(e);if(typeof n=="string"){const s=(r=Be(this,la).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Zs.batch(()=>{Be(this,Wl).forEach(e=>{this.notify({type:"removed",mutation:e})}),Be(this,Wl).clear(),Be(this,la).clear()})}getAll(){return Array.from(Be(this,Wl))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Aj(n,r))}findAll(e={}){return this.getAll().filter(n=>Aj(e,n))}notify(e){Zs.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Zs.batch(()=>Promise.all(e.map(n=>n.continue().catch(oa))))}},Wl=new WeakMap,la=new WeakMap,X0=new WeakMap,i9);function v1(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Ya,o9,wce=(o9=class extends XC{constructor(e={}){super();Mt(this,Ya);this.config=e,gt(this,Ya,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??z$(s,n);let o=this.get(i);return o||(o=new mce({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){Be(this,Ya).has(e.queryHash)||(Be(this,Ya).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Be(this,Ya).get(e.queryHash);n&&(e.destroy(),n===e&&Be(this,Ya).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Zs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Be(this,Ya).get(e)}getAll(){return[...Be(this,Ya).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>uj(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>uj(e,r)):n}notify(e){Zs.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Zs.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Zs.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ya=new WeakMap,o9),er,ou,au,Qh,Hh,lu,zh,Vh,a9,Cce=(a9=class{constructor(t={}){Mt(this,er);Mt(this,ou);Mt(this,au);Mt(this,Qh);Mt(this,Hh);Mt(this,lu);Mt(this,zh);Mt(this,Vh);gt(this,er,t.queryCache||new wce),gt(this,ou,t.mutationCache||new bce),gt(this,au,t.defaultOptions||{}),gt(this,Qh,new Map),gt(this,Hh,new Map),gt(this,lu,0)}mount(){n1(this,lu)._++,Be(this,lu)===1&&(gt(this,zh,_V.subscribe(async t=>{t&&(await this.resumePausedMutations(),Be(this,er).onFocus())})),gt(this,Vh,_w.subscribe(async t=>{t&&(await this.resumePausedMutations(),Be(this,er).onOnline())})))}unmount(){var t,e;n1(this,lu)._--,Be(this,lu)===0&&((t=Be(this,zh))==null||t.call(this),gt(this,zh,void 0),(e=Be(this,Vh))==null||e.call(this),gt(this,Vh,void 0))}isFetching(t){return Be(this,er).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Be(this,ou).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Be(this,er).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Be(this,er).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(TI(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Be(this,er).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Be(this,er).get(r.queryHash),i=s==null?void 0:s.state.data,o=tce(e,i);if(o!==void 0)return Be(this,er).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Zs.batch(()=>Be(this,er).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Be(this,er).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Be(this,er);Zs.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Be(this,er);return Zs.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Zs.batch(()=>Be(this,er).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(oa).catch(oa)}invalidateQueries(t,e={}){return Zs.batch(()=>(Be(this,er).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Zs.batch(()=>Be(this,er).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(oa)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(oa)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Be(this,er).build(this,e);return n.isStaleByTime(TI(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(oa).catch(oa)}fetchInfiniteQuery(t){return t.behavior=pj(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(oa).catch(oa)}ensureInfiniteQueryData(t){return t.behavior=pj(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return _w.isOnline()?Be(this,ou).resumePausedMutations():Promise.resolve()}getQueryCache(){return Be(this,er)}getMutationCache(){return Be(this,ou)}getDefaultOptions(){return Be(this,au)}setDefaultOptions(t){gt(this,au,t)}setQueryDefaults(t,e){Be(this,Qh).set(Ry(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Be(this,Qh).values()],n={};return e.forEach(r=>{Py(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Be(this,Hh).set(Ry(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Be(this,Hh).values()],n={};return e.forEach(r=>{Py(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Be(this,au).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=z$(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===V$&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Be(this,au).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Be(this,er).clear(),Be(this,ou).clear()}},er=new WeakMap,ou=new WeakMap,au=new WeakMap,Qh=new WeakMap,Hh=new WeakMap,lu=new WeakMap,zh=new WeakMap,Vh=new WeakMap,a9),Sce=Q.createContext(void 0),Bce=({client:t,children:e})=>(Q.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(Sce.Provider,{value:t,children:e}));const Nce={},gj=t=>{let e;const n=new Set,r=(u,A)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const f=e;e=A??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(h=>h(e,f))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(Nce?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,s,l);return l},Ece=t=>t?gj(t):gj;var PV={exports:{}},UV={},jV={exports:{}},LV={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zh=Q;function Ice(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kce=typeof Object.is=="function"?Object.is:Ice,Tce=Zh.useState,Fce=Zh.useEffect,$ce=Zh.useLayoutEffect,_ce=Zh.useDebugValue;function Oce(t,e){var n=e(),r=Tce({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return $ce(function(){s.value=n,s.getSnapshot=e,zN(s)&&i({inst:s})},[t,n,e]),Fce(function(){return zN(s)&&i({inst:s}),t(function(){zN(s)&&i({inst:s})})},[t]),_ce(n),n}function zN(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!kce(t,n)}catch{return!0}}function Dce(t,e){return e()}var Rce=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Dce:Oce;LV.useSyncExternalStore=Zh.useSyncExternalStore!==void 0?Zh.useSyncExternalStore:Rce;jV.exports=LV;var Pce=jV.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YC=Q,Uce=Pce;function jce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Lce=typeof Object.is=="function"?Object.is:jce,Mce=Uce.useSyncExternalStore,Qce=YC.useRef,Hce=YC.useEffect,zce=YC.useMemo,Vce=YC.useDebugValue;UV.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=Qce(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=zce(function(){function l(f){if(!c){if(c=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var h=o.value;if(s(h,f))return A=h}return A=f}if(h=A,Lce(u,f))return h;var m=r(f);return s!==void 0&&s(h,m)?(u=f,h):(u=f,A=m)}var c=!1,u,A,d=n===void 0?null:n;return[function(){return l(e())},d===null?void 0:function(){return l(d())}]},[e,n,r,s]);var a=Mce(t,i[0],i[1]);return Hce(function(){o.hasValue=!0,o.value=a},[a]),Vce(a),a};PV.exports=UV;var Wce=PV.exports;const Gce=Gt(Wce),MV={},{useDebugValue:Kce}=ie,{useSyncExternalStoreWithSelector:Xce}=Gce;let yj=!1;const qce=t=>t;function Yce(t,e=qce,n){(MV?"production":void 0)!=="production"&&n&&!yj&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),yj=!0);const r=Xce(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Kce(r),r}const Jce=t=>{(MV?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Ece(t):t,n=(r,s)=>Yce(e,r,s);return Object.assign(n,e),n},Zce=t=>Jce,eue={};function tue(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=l=>l===null?null:JSON.parse(l,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Uy=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Uy(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Uy(r)(n)}}}},nue=(t,e)=>(n,r,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=i.getStorage()}catch{}if(!c)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=Uy(i.serialize),A=()=>{const g=i.partialize({...r()});let y;const x=u({state:g,version:i.version}).then(v=>c.setItem(i.name,v)).catch(v=>{y=v});if(y)throw y;return x},d=s.setState;s.setState=(g,y)=>{d(g,y),A()};const f=t((...g)=>{n(...g),A()},r,s);let h;const m=()=>{var g;if(!c)return;o=!1,a.forEach(x=>x(r()));const y=((g=i.onRehydrateStorage)==null?void 0:g.call(i,r()))||void 0;return Uy(c.getItem.bind(c))(i.name).then(x=>{if(x)return i.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var v;return h=i.merge(x,(v=r())!=null?v:f),n(h,!0),A()}).then(()=>{y==null||y(h,void 0),o=!0,l.forEach(x=>x(h))}).catch(x=>{y==null||y(void 0,x)})};return s.persist={setOptions:g=>{i={...i,...g},g.getStorage&&(c=g.getStorage())},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(l.add(g),()=>{l.delete(g)})},m(),h||f},rue=(t,e)=>(n,r,s)=>{let i={storage:tue(()=>localStorage),partialize:m=>m,version:0,merge:(m,g)=>({...g,...m}),...e},o=!1;const a=new Set,l=new Set;let c=i.storage;if(!c)return t((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...m)},r,s);const u=()=>{const m=i.partialize({...r()});return c.setItem(i.name,{state:m,version:i.version})},A=s.setState;s.setState=(m,g)=>{A(m,g),u()};const d=t((...m)=>{n(...m),u()},r,s);s.getInitialState=()=>d;let f;const h=()=>{var m,g;if(!c)return;o=!1,a.forEach(x=>{var v;return x((v=r())!=null?v:d)});const y=((g=i.onRehydrateStorage)==null?void 0:g.call(i,(m=r())!=null?m:d))||void 0;return Uy(c.getItem.bind(c))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return[!0,i.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var v;const[b,w]=x;if(f=i.merge(w,(v=r())!=null?v:d),n(f,!0),b)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,l.forEach(x=>x(f))}).catch(x=>{y==null||y(void 0,x)})};return s.persist={setOptions:m=>{i={...i,...m},m.storage&&(c=m.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>h(),hasHydrated:()=>o,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(l.add(m),()=>{l.delete(m)})},i.skipHydration||h(),f||d},sue=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((eue?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),nue(t,e)):rue(t,e),iue=sue,Ko=Zce()(iue(t=>({user:null,token:null,isAuthenticated:!1,login:(e,n)=>t({user:e,token:n,isAuthenticated:!0}),logout:()=>t({user:null,token:null,isAuthenticated:!1}),updateUser:e=>t(n=>({user:n.user?{...n.user,...e}:null}))}),{name:"auth-storage"}));function Or({children:t,allowedRoles:e,redirectTo:n}){const{isAuthenticated:r,user:s}=Ko();if(!r||!s)return p.jsx(Yi,{to:"/login",replace:!0});if(e&&!e.includes(s.role)){if(n)return p.jsx(Yi,{to:n,replace:!0});switch(s.role){case"student":return p.jsx(Yi,{to:"/dashboard",replace:!0});case"parent":return p.jsx(Yi,{to:"/parent/dashboard",replace:!0});case"admin":return p.jsx(Yi,{to:"/admin/dashboard",replace:!0});case"teacher":return p.jsx(Yi,{to:"/teacher/dashboard",replace:!0});default:return p.jsx(Yi,{to:"/unauthorized",replace:!0})}}return p.jsx(p.Fragment,{children:t})}function xj(){const{isAuthenticated:t,user:e}=Ko();if(!t||!e)return p.jsx(Yi,{to:"/login",replace:!0});switch(e.role){case"student":return p.jsx(Yi,{to:"/dashboard",replace:!0});case"parent":return p.jsx(Yi,{to:"/parent/dashboard",replace:!0});case"admin":return p.jsx(Yi,{to:"/admin/dashboard",replace:!0});case"teacher":return p.jsx(Yi,{to:"/teacher/dashboard",replace:!0});default:return p.jsx(Yi,{to:"/login",replace:!0})}}function QV(t,e){return function(){return t.apply(e,arguments)}}const{toString:oue}=Object.prototype,{getPrototypeOf:W$}=Object,{iterator:JC,toStringTag:HV}=Symbol,ZC=(t=>e=>{const n=oue.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Fa=t=>(t=t.toLowerCase(),e=>ZC(e)===t),eS=t=>e=>typeof e===t,{isArray:Kp}=Array,ep=eS("undefined");function nx(t){return t!==null&&!ep(t)&&t.constructor!==null&&!ep(t.constructor)&&$i(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const zV=Fa("ArrayBuffer");function aue(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&zV(t.buffer),e}const lue=eS("string"),$i=eS("function"),VV=eS("number"),rx=t=>t!==null&&typeof t=="object",cue=t=>t===!0||t===!1,Gb=t=>{if(ZC(t)!=="object")return!1;const e=W$(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(HV in t)&&!(JC in t)},uue=t=>{if(!rx(t)||nx(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Aue=Fa("Date"),due=Fa("File"),fue=Fa("Blob"),hue=Fa("FileList"),pue=t=>rx(t)&&$i(t.pipe),mue=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||$i(t.append)&&((e=ZC(t))==="formdata"||e==="object"&&$i(t.toString)&&t.toString()==="[object FormData]"))},gue=Fa("URLSearchParams"),[yue,xue,vue,bue]=["ReadableStream","Request","Response","Headers"].map(Fa),wue=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function sx(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Kp(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(nx(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function WV(t,e){if(nx(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const sd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,GV=t=>!ep(t)&&t!==sd;function _I(){const{caseless:t,skipUndefined:e}=GV(this)&&this||{},n={},r=(s,i)=>{const o=t&&WV(n,i)||i;Gb(n[o])&&Gb(s)?n[o]=_I(n[o],s):Gb(s)?n[o]=_I({},s):Kp(s)?n[o]=s.slice():(!e||!ep(s))&&(n[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&sx(arguments[s],r);return n}const Cue=(t,e,n,{allOwnKeys:r}={})=>(sx(e,(s,i)=>{n&&$i(s)?t[i]=QV(s,n):t[i]=s},{allOwnKeys:r}),t),Sue=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Bue=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Nue=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&W$(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Eue=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Iue=t=>{if(!t)return null;if(Kp(t))return t;let e=t.length;if(!VV(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},kue=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&W$(Uint8Array)),Tue=(t,e)=>{const r=(t&&t[JC]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},Fue=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},$ue=Fa("HTMLFormElement"),_ue=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),vj=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Oue=Fa("RegExp"),KV=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};sx(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},Due=t=>{KV(t,(e,n)=>{if($i(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if($i(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Rue=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Kp(t)?r(t):r(String(t).split(e)),n},Pue=()=>{},Uue=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function jue(t){return!!(t&&$i(t.append)&&t[HV]==="FormData"&&t[JC])}const Lue=t=>{const e=new Array(10),n=(r,s)=>{if(rx(r)){if(e.indexOf(r)>=0)return;if(nx(r))return r;if(!("toJSON"in r)){e[s]=r;const i=Kp(r)?[]:{};return sx(r,(o,a)=>{const l=n(o,s+1);!ep(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},Mue=Fa("AsyncFunction"),Que=t=>t&&(rx(t)||$i(t))&&$i(t.then)&&$i(t.catch),XV=((t,e)=>t?setImmediate:e?((n,r)=>(sd.addEventListener("message",({source:s,data:i})=>{s===sd&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),sd.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",$i(sd.postMessage)),Hue=typeof queueMicrotask<"u"?queueMicrotask.bind(sd):typeof process<"u"&&process.nextTick||XV,zue=t=>t!=null&&$i(t[JC]),xe={isArray:Kp,isArrayBuffer:zV,isBuffer:nx,isFormData:mue,isArrayBufferView:aue,isString:lue,isNumber:VV,isBoolean:cue,isObject:rx,isPlainObject:Gb,isEmptyObject:uue,isReadableStream:yue,isRequest:xue,isResponse:vue,isHeaders:bue,isUndefined:ep,isDate:Aue,isFile:due,isBlob:fue,isRegExp:Oue,isFunction:$i,isStream:pue,isURLSearchParams:gue,isTypedArray:kue,isFileList:hue,forEach:sx,merge:_I,extend:Cue,trim:wue,stripBOM:Sue,inherits:Bue,toFlatObject:Nue,kindOf:ZC,kindOfTest:Fa,endsWith:Eue,toArray:Iue,forEachEntry:Tue,matchAll:Fue,isHTMLForm:$ue,hasOwnProperty:vj,hasOwnProp:vj,reduceDescriptors:KV,freezeMethods:Due,toObjectSet:Rue,toCamelCase:_ue,noop:Pue,toFiniteNumber:Uue,findKey:WV,global:sd,isContextDefined:GV,isSpecCompliantForm:jue,toJSONObject:Lue,isAsyncFn:Mue,isThenable:Que,setImmediate:XV,asap:Hue,isIterable:zue};function wt(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}xe.inherits(wt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xe.toJSONObject(this.config),code:this.code,status:this.status}}});const qV=wt.prototype,YV={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{YV[t]={value:t}});Object.defineProperties(wt,YV);Object.defineProperty(qV,"isAxiosError",{value:!0});wt.from=(t,e,n,r,s,i)=>{const o=Object.create(qV);xe.toFlatObject(t,o,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return wt.call(o,a,l,n,r,s),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const Vue=null;function OI(t){return xe.isPlainObject(t)||xe.isArray(t)}function JV(t){return xe.endsWith(t,"[]")?t.slice(0,-2):t}function bj(t,e,n){return t?t.concat(e).map(function(s,i){return s=JV(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function Wue(t){return xe.isArray(t)&&!t.some(OI)}const Gue=xe.toFlatObject(xe,{},null,function(e){return/^is[A-Z]/.test(e)});function tS(t,e,n){if(!xe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=xe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!xe.isUndefined(g[m])});const r=n.metaTokens,s=n.visitor||u,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&xe.isSpecCompliantForm(e);if(!xe.isFunction(s))throw new TypeError("visitor must be a function");function c(h){if(h===null)return"";if(xe.isDate(h))return h.toISOString();if(xe.isBoolean(h))return h.toString();if(!l&&xe.isBlob(h))throw new wt("Blob is not supported. Use a Buffer instead.");return xe.isArrayBuffer(h)||xe.isTypedArray(h)?l&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function u(h,m,g){let y=h;if(h&&!g&&typeof h=="object"){if(xe.endsWith(m,"{}"))m=r?m:m.slice(0,-2),h=JSON.stringify(h);else if(xe.isArray(h)&&Wue(h)||(xe.isFileList(h)||xe.endsWith(m,"[]"))&&(y=xe.toArray(h)))return m=JV(m),y.forEach(function(v,b){!(xe.isUndefined(v)||v===null)&&e.append(o===!0?bj([m],b,i):o===null?m:m+"[]",c(v))}),!1}return OI(h)?!0:(e.append(bj(g,m,i),c(h)),!1)}const A=[],d=Object.assign(Gue,{defaultVisitor:u,convertValue:c,isVisitable:OI});function f(h,m){if(!xe.isUndefined(h)){if(A.indexOf(h)!==-1)throw Error("Circular reference detected in "+m.join("."));A.push(h),xe.forEach(h,function(y,x){(!(xe.isUndefined(y)||y===null)&&s.call(e,y,xe.isString(x)?x.trim():x,m,d))===!0&&f(y,m?m.concat(x):[x])}),A.pop()}}if(!xe.isObject(t))throw new TypeError("data must be an object");return f(t),e}function wj(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function G$(t,e){this._pairs=[],t&&tS(t,this,e)}const ZV=G$.prototype;ZV.append=function(e,n){this._pairs.push([e,n])};ZV.toString=function(e){const n=e?function(r){return e.call(this,r,wj)}:wj;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Kue(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function eW(t,e,n){if(!e)return t;const r=n&&n.encode||Kue;xe.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=xe.isURLSearchParams(e)?e.toString():new G$(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Cj{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){xe.forEach(this.handlers,function(r){r!==null&&e(r)})}}const tW={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xue=typeof URLSearchParams<"u"?URLSearchParams:G$,que=typeof FormData<"u"?FormData:null,Yue=typeof Blob<"u"?Blob:null,Jue={isBrowser:!0,classes:{URLSearchParams:Xue,FormData:que,Blob:Yue},protocols:["http","https","file","blob","url","data"]},K$=typeof window<"u"&&typeof document<"u",DI=typeof navigator=="object"&&navigator||void 0,Zue=K$&&(!DI||["ReactNative","NativeScript","NS"].indexOf(DI.product)<0),eAe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",tAe=K$&&window.location.href||"http://localhost",nAe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:K$,hasStandardBrowserEnv:Zue,hasStandardBrowserWebWorkerEnv:eAe,navigator:DI,origin:tAe},Symbol.toStringTag,{value:"Module"})),Ps={...nAe,...Jue};function rAe(t,e){return tS(t,new Ps.classes.URLSearchParams,{visitor:function(n,r,s,i){return Ps.isNode&&xe.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function sAe(t){return xe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function iAe(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function nW(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&xe.isArray(s)?s.length:o,l?(xe.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!xe.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&xe.isArray(s[o])&&(s[o]=iAe(s[o])),!a)}if(xe.isFormData(t)&&xe.isFunction(t.entries)){const n={};return xe.forEachEntry(t,(r,s)=>{e(sAe(r),s,n,0)}),n}return null}function oAe(t,e,n){if(xe.isString(t))try{return(e||JSON.parse)(t),xe.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const ix={transitional:tW,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=xe.isObject(e);if(i&&xe.isHTMLForm(e)&&(e=new FormData(e)),xe.isFormData(e))return s?JSON.stringify(nW(e)):e;if(xe.isArrayBuffer(e)||xe.isBuffer(e)||xe.isStream(e)||xe.isFile(e)||xe.isBlob(e)||xe.isReadableStream(e))return e;if(xe.isArrayBufferView(e))return e.buffer;if(xe.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return rAe(e,this.formSerializer).toString();if((a=xe.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return tS(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),oAe(e)):e}],transformResponse:[function(e){const n=this.transitional||ix.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(xe.isResponse(e)||xe.isReadableStream(e))return e;if(e&&xe.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?wt.from(a,wt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ps.classes.FormData,Blob:Ps.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xe.forEach(["delete","get","head","post","put","patch"],t=>{ix.headers[t]={}});const aAe=xe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lAe=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&aAe[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Sj=Symbol("internals");function Ym(t){return t&&String(t).trim().toLowerCase()}function Kb(t){return t===!1||t==null?t:xe.isArray(t)?t.map(Kb):String(t)}function cAe(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const uAe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function VN(t,e,n,r,s){if(xe.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!xe.isString(e)){if(xe.isString(r))return e.indexOf(r)!==-1;if(xe.isRegExp(r))return r.test(e)}}function AAe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function dAe(t,e){const n=xe.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let _i=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const u=Ym(l);if(!u)throw new Error("header name must be a non-empty string");const A=xe.findKey(s,u);(!A||s[A]===void 0||c===!0||c===void 0&&s[A]!==!1)&&(s[A||l]=Kb(a))}const o=(a,l)=>xe.forEach(a,(c,u)=>i(c,u,l));if(xe.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(xe.isString(e)&&(e=e.trim())&&!uAe(e))o(lAe(e),n);else if(xe.isObject(e)&&xe.isIterable(e)){let a={},l,c;for(const u of e){if(!xe.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?xe.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=Ym(e),e){const r=xe.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return cAe(s);if(xe.isFunction(n))return n.call(this,s,r);if(xe.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ym(e),e){const r=xe.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||VN(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Ym(o),o){const a=xe.findKey(r,o);a&&(!n||VN(r,r[a],a,n))&&(delete r[a],s=!0)}}return xe.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||VN(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return xe.forEach(this,(s,i)=>{const o=xe.findKey(r,i);if(o){n[o]=Kb(s),delete n[i];return}const a=e?AAe(i):String(i).trim();a!==i&&delete n[i],n[a]=Kb(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return xe.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&xe.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[Sj]=this[Sj]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=Ym(o);r[a]||(dAe(s,o),r[a]=!0)}return xe.isArray(e)?e.forEach(i):i(e),this}};_i.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);xe.reduceDescriptors(_i.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});xe.freezeMethods(_i);function WN(t,e){const n=this||ix,r=e||n,s=_i.from(r.headers);let i=r.data;return xe.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function rW(t){return!!(t&&t.__CANCEL__)}function Xp(t,e,n){wt.call(this,t??"canceled",wt.ERR_CANCELED,e,n),this.name="CanceledError"}xe.inherits(Xp,wt,{__CANCEL__:!0});function sW(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new wt("Request failed with status code "+n.status,[wt.ERR_BAD_REQUEST,wt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function fAe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function hAe(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[i];o||(o=c),n[s]=l,r[s]=c;let A=i,d=0;for(;A!==s;)d+=n[A++],A=A%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const f=u&&c-u;return f?Math.round(d*1e3/f):void 0}}function pAe(t,e){let n=0,r=1e3/e,s,i;const o=(c,u=Date.now())=>{n=u,s=null,i&&(clearTimeout(i),i=null),t(...c)};return[(...c)=>{const u=Date.now(),A=u-n;A>=r?o(c,u):(s=c,i||(i=setTimeout(()=>{i=null,o(s)},r-A)))},()=>s&&o(s)]}const Ow=(t,e,n=3)=>{let r=0;const s=hAe(50,250);return pAe(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-r,c=s(l),u=o<=a;r=o;const A={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(A)},n)},Bj=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Nj=t=>(...e)=>xe.asap(()=>t(...e)),mAe=Ps.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ps.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ps.origin),Ps.navigator&&/(msie|trident)/i.test(Ps.navigator.userAgent)):()=>!0,gAe=Ps.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const o=[t+"="+encodeURIComponent(e)];xe.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),xe.isString(r)&&o.push("path="+r),xe.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function yAe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function xAe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function iW(t,e,n){let r=!yAe(e);return t&&(r||n==!1)?xAe(t,e):e}const Ej=t=>t instanceof _i?{...t}:t;function Ud(t,e){e=e||{};const n={};function r(c,u,A,d){return xe.isPlainObject(c)&&xe.isPlainObject(u)?xe.merge.call({caseless:d},c,u):xe.isPlainObject(u)?xe.merge({},u):xe.isArray(u)?u.slice():u}function s(c,u,A,d){if(xe.isUndefined(u)){if(!xe.isUndefined(c))return r(void 0,c,A,d)}else return r(c,u,A,d)}function i(c,u){if(!xe.isUndefined(u))return r(void 0,u)}function o(c,u){if(xe.isUndefined(u)){if(!xe.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,A){if(A in e)return r(c,u);if(A in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,A)=>s(Ej(c),Ej(u),A,!0)};return xe.forEach(Object.keys({...t,...e}),function(u){const A=l[u]||s,d=A(t[u],e[u],u);xe.isUndefined(d)&&A!==a||(n[u]=d)}),n}const oW=t=>{const e=Ud({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;if(e.headers=o=_i.from(o),e.url=eW(iW(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),xe.isFormData(n)){if(Ps.hasStandardBrowserEnv||Ps.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(xe.isFunction(n.getHeaders)){const l=n.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,A])=>{c.includes(u.toLowerCase())&&o.set(u,A)})}}if(Ps.hasStandardBrowserEnv&&(r&&xe.isFunction(r)&&(r=r(e)),r||r!==!1&&mAe(e.url))){const l=s&&i&&gAe.read(i);l&&o.set(s,l)}return e},vAe=typeof XMLHttpRequest<"u",bAe=vAe&&function(t){return new Promise(function(n,r){const s=oW(t);let i=s.data;const o=_i.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,u,A,d,f,h;function m(){f&&f(),h&&h(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(s.method.toUpperCase(),s.url,!0),g.timeout=s.timeout;function y(){if(!g)return;const v=_i.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),w={data:!a||a==="text"||a==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:v,config:t,request:g};sW(function(B){n(B),m()},function(B){r(B),m()},w),g=null}"onloadend"in g?g.onloadend=y:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(y)},g.onabort=function(){g&&(r(new wt("Request aborted",wt.ECONNABORTED,t,g)),g=null)},g.onerror=function(b){const w=b&&b.message?b.message:"Network Error",C=new wt(w,wt.ERR_NETWORK,t,g);C.event=b||null,r(C),g=null},g.ontimeout=function(){let b=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const w=s.transitional||tW;s.timeoutErrorMessage&&(b=s.timeoutErrorMessage),r(new wt(b,w.clarifyTimeoutError?wt.ETIMEDOUT:wt.ECONNABORTED,t,g)),g=null},i===void 0&&o.setContentType(null),"setRequestHeader"in g&&xe.forEach(o.toJSON(),function(b,w){g.setRequestHeader(w,b)}),xe.isUndefined(s.withCredentials)||(g.withCredentials=!!s.withCredentials),a&&a!=="json"&&(g.responseType=s.responseType),c&&([d,h]=Ow(c,!0),g.addEventListener("progress",d)),l&&g.upload&&([A,f]=Ow(l),g.upload.addEventListener("progress",A),g.upload.addEventListener("loadend",f)),(s.cancelToken||s.signal)&&(u=v=>{g&&(r(!v||v.type?new Xp(null,t,g):v),g.abort(),g=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const x=fAe(s.url);if(x&&Ps.protocols.indexOf(x)===-1){r(new wt("Unsupported protocol "+x+":",wt.ERR_BAD_REQUEST,t));return}g.send(i||null)})},wAe=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(c){if(!s){s=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof wt?u:new Xp(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,i(new wt(`timeout ${e} of ms exceeded`,wt.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>xe.asap(a),l}},CAe=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},SAe=async function*(t,e){for await(const n of BAe(t))yield*CAe(n,e)},BAe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Ij=(t,e,n,r)=>{const s=SAe(t,e);let i=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await s.next();if(c){a(),l.close();return}let A=u.byteLength;if(n){let d=i+=A;n(d)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},kj=64*1024,{isFunction:b1}=xe,NAe=(({Request:t,Response:e})=>({Request:t,Response:e}))(xe.global),{ReadableStream:Tj,TextEncoder:Fj}=xe.global,$j=(t,...e)=>{try{return!!t(...e)}catch{return!1}},EAe=t=>{t=xe.merge.call({skipUndefined:!0},NAe,t);const{fetch:e,Request:n,Response:r}=t,s=e?b1(e):typeof fetch=="function",i=b1(n),o=b1(r);if(!s)return!1;const a=s&&b1(Tj),l=s&&(typeof Fj=="function"?(h=>m=>h.encode(m))(new Fj):async h=>new Uint8Array(await new n(h).arrayBuffer())),c=i&&a&&$j(()=>{let h=!1;const m=new n(Ps.origin,{body:new Tj,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!m}),u=o&&a&&$j(()=>xe.isReadableStream(new r("").body)),A={stream:u&&(h=>h.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!A[h]&&(A[h]=(m,g)=>{let y=m&&m[h];if(y)return y.call(m);throw new wt(`Response type '${h}' is not supported`,wt.ERR_NOT_SUPPORT,g)})});const d=async h=>{if(h==null)return 0;if(xe.isBlob(h))return h.size;if(xe.isSpecCompliantForm(h))return(await new n(Ps.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(xe.isArrayBufferView(h)||xe.isArrayBuffer(h))return h.byteLength;if(xe.isURLSearchParams(h)&&(h=h+""),xe.isString(h))return(await l(h)).byteLength},f=async(h,m)=>{const g=xe.toFiniteNumber(h.getContentLength());return g??d(m)};return async h=>{let{url:m,method:g,data:y,signal:x,cancelToken:v,timeout:b,onDownloadProgress:w,onUploadProgress:C,responseType:B,headers:S,withCredentials:N="same-origin",fetchOptions:k}=oW(h),O=e||fetch;B=B?(B+"").toLowerCase():"text";let U=wAe([x,v&&v.toAbortSignal()],b),P=null;const V=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let W;try{if(C&&c&&g!=="get"&&g!=="head"&&(W=await f(S,y))!==0){let Y=new n(m,{method:"POST",body:y,duplex:"half"}),J;if(xe.isFormData(y)&&(J=Y.headers.get("content-type"))&&S.setContentType(J),Y.body){const[ae,ue]=Bj(W,Ow(Nj(C)));y=Ij(Y.body,kj,ae,ue)}}xe.isString(N)||(N=N?"include":"omit");const L=i&&"credentials"in n.prototype,G={...k,signal:U,method:g.toUpperCase(),headers:S.normalize().toJSON(),body:y,duplex:"half",credentials:L?N:void 0};P=i&&new n(m,G);let _=await(i?O(P,k):O(m,G));const j=u&&(B==="stream"||B==="response");if(u&&(w||j&&V)){const Y={};["status","statusText","headers"].forEach(le=>{Y[le]=_[le]});const J=xe.toFiniteNumber(_.headers.get("content-length")),[ae,ue]=w&&Bj(J,Ow(Nj(w),!0))||[];_=new r(Ij(_.body,kj,ae,()=>{ue&&ue(),V&&V()}),Y)}B=B||"text";let K=await A[xe.findKey(A,B)||"text"](_,h);return!j&&V&&V(),await new Promise((Y,J)=>{sW(Y,J,{data:K,headers:_i.from(_.headers),status:_.status,statusText:_.statusText,config:h,request:P})})}catch(L){throw V&&V(),L&&L.name==="TypeError"&&/Load failed|fetch/i.test(L.message)?Object.assign(new wt("Network Error",wt.ERR_NETWORK,h,P),{cause:L.cause||L}):wt.from(L,L&&L.code,h,P)}}},IAe=new Map,aW=t=>{let e=t?t.env:{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let o=i.length,a=o,l,c,u=IAe;for(;a--;)l=i[a],c=u.get(l),c===void 0&&u.set(l,c=a?new Map:EAe(e)),u=c;return c};aW();const RI={http:Vue,xhr:bAe,fetch:{get:aW}};xe.forEach(RI,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const _j=t=>`- ${t}`,kAe=t=>xe.isFunction(t)||t===null||t===!1,lW={getAdapter:(t,e)=>{t=xe.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let o=0;o<n;o++){r=t[o];let a;if(s=r,!kAe(r)&&(s=RI[(a=String(r)).toLowerCase()],s===void 0))throw new wt(`Unknown adapter '${a}'`);if(s&&(xe.isFunction(s)||(s=s.get(e))))break;i[a||"#"+o]=s}if(!s){const o=Object.entries(i).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=n?o.length>1?`since :
`+o.map(_j).join(`
`):" "+_j(o[0]):"as no adapter specified";throw new wt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s},adapters:RI};function GN(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Xp(null,t)}function Oj(t){return GN(t),t.headers=_i.from(t.headers),t.data=WN.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),lW.getAdapter(t.adapter||ix.adapter,t)(t).then(function(r){return GN(t),r.data=WN.call(t,t.transformResponse,r),r.headers=_i.from(r.headers),r},function(r){return rW(r)||(GN(t),r&&r.response&&(r.response.data=WN.call(t,t.transformResponse,r.response),r.response.headers=_i.from(r.response.headers))),Promise.reject(r)})}const cW="1.12.2",nS={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{nS[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Dj={};nS.transitional=function(e,n,r){function s(i,o){return"[Axios v"+cW+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new wt(s(o," has been removed"+(n?" in "+n:"")),wt.ERR_DEPRECATED);return n&&!Dj[o]&&(Dj[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};nS.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function TAe(t,e,n){if(typeof t!="object")throw new wt("options must be an object",wt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new wt("option "+i+" must be "+l,wt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new wt("Unknown option "+i,wt.ERR_BAD_OPTION)}}const Xb={assertOptions:TAe,validators:nS},Qa=Xb.validators;let Cd=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Cj,response:new Cj}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ud(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Xb.assertOptions(r,{silentJSONParsing:Qa.transitional(Qa.boolean),forcedJSONParsing:Qa.transitional(Qa.boolean),clarifyTimeoutError:Qa.transitional(Qa.boolean)},!1),s!=null&&(xe.isFunction(s)?n.paramsSerializer={serialize:s}:Xb.assertOptions(s,{encode:Qa.function,serialize:Qa.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Xb.assertOptions(n,{baseUrl:Qa.spelling("baseURL"),withXsrfToken:Qa.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&xe.merge(i.common,i[n.method]);i&&xe.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),n.headers=_i.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,A=0,d;if(!l){const h=[Oj.bind(this),void 0];for(h.unshift(...a),h.push(...c),d=h.length,u=Promise.resolve(n);A<d;)u=u.then(h[A++],h[A++]);return u}d=a.length;let f=n;for(;A<d;){const h=a[A++],m=a[A++];try{f=h(f)}catch(g){m.call(this,g);break}}try{u=Oj.call(this,f)}catch(h){return Promise.reject(h)}for(A=0,d=c.length;A<d;)u=u.then(c[A++],c[A++]);return u}getUri(e){e=Ud(this.defaults,e);const n=iW(e.baseURL,e.url,e.allowAbsoluteUrls);return eW(n,e.params,e.paramsSerializer)}};xe.forEach(["delete","get","head","options"],function(e){Cd.prototype[e]=function(n,r){return this.request(Ud(r||{},{method:e,url:n,data:(r||{}).data}))}});xe.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Ud(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Cd.prototype[e]=n(),Cd.prototype[e+"Form"]=n(!0)});let FAe=class uW{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Xp(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new uW(function(s){e=s}),cancel:e}}};function $Ae(t){return function(n){return t.apply(null,n)}}function _Ae(t){return xe.isObject(t)&&t.isAxiosError===!0}const PI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(PI).forEach(([t,e])=>{PI[e]=t});function AW(t){const e=new Cd(t),n=QV(Cd.prototype.request,e);return xe.extend(n,Cd.prototype,e,{allOwnKeys:!0}),xe.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return AW(Ud(t,s))},n}const ir=AW(ix);ir.Axios=Cd;ir.CanceledError=Xp;ir.CancelToken=FAe;ir.isCancel=rW;ir.VERSION=cW;ir.toFormData=tS;ir.AxiosError=wt;ir.Cancel=ir.CanceledError;ir.all=function(e){return Promise.all(e)};ir.spread=$Ae;ir.isAxiosError=_Ae;ir.mergeConfig=Ud;ir.AxiosHeaders=_i;ir.formToJSON=t=>nW(xe.isHTMLForm(t)?new FormData(t):t);ir.getAdapter=lW.getAdapter;ir.HttpStatusCode=PI;ir.default=ir;const{Axios:jxt,AxiosError:Lxt,CanceledError:Mxt,isCancel:Qxt,CancelToken:Hxt,VERSION:zxt,all:Vxt,Cancel:Wxt,isAxiosError:Gxt,spread:Kxt,toFormData:Xxt,AxiosHeaders:qxt,HttpStatusCode:Yxt,formToJSON:Jxt,getAdapter:Zxt,mergeConfig:evt}=ir,vt=ir.create({baseURL:"https://literacy-backend-mdbn.onrender.com",timeout:18e4,headers:{"Content-Type":"application/json"}});vt.interceptors.request.use(t=>{const e=Ko.getState().token;return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));vt.interceptors.response.use(t=>t,t=>{var e;return((e=t.response)==null?void 0:e.status)===401&&(Ko.getState().logout(),window.location.href="/login"),Promise.reject(t)});function OAe(){const[t,e]=Q.useState(""),[n,r]=Q.useState(""),[s,i]=Q.useState(""),[o,a]=Q.useState(!1),l=is(),{login:c}=Ko(),u=async A=>{var d,f;A.preventDefault(),i(""),a(!0);try{const h=await vt.post("/api/v1/auth/login",{email:t,password:n}),{user:m,token:g}=h.data.data;c(m,g),l("/dashboard")}catch(h){i(((f=(d=h.response)==null?void 0:d.data)==null?void 0:f.message)||"로그인에 실패했습니다.")}finally{a(!1)}};return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:p.jsxs("div",{className:"max-w-md w-full",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-4xl font-bold text-primary mb-2",children:"문해력 진단 평가"}),p.jsx("p",{className:"text-muted-foreground",children:"초등 1학년부터 중등 3학년까지"})]}),p.jsxs("div",{className:"bg-card rounded-lg shadow-lg p-8",children:[p.jsx("h2",{className:"text-2xl font-semibold mb-6 text-card-foreground",children:"로그인"}),s&&p.jsx("div",{className:"mb-4 p-3 bg-destructive/10 border border-destructive/20 rounded-md text-destructive text-sm",children:s}),p.jsxs("form",{onSubmit:u,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-card-foreground mb-1",children:"이메일"}),p.jsx("input",{type:"email",id:"email",value:t,onChange:A=>e(A.target.value),required:!0,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"your@email.com"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-card-foreground mb-1",children:"비밀번호"}),p.jsx("input",{type:"password",id:"password",value:n,onChange:A=>r(A.target.value),required:!0,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"••••••••"})]}),p.jsx("button",{type:"submit",disabled:o,className:"w-full bg-primary text-primary-foreground py-2 px-4 rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:o?"로그인 중...":"로그인"})]}),p.jsx("div",{className:"mt-6 text-center",children:p.jsxs("p",{className:"text-sm text-muted-foreground",children:["계정이 없으신가요?"," ",p.jsx(qc,{to:"/register",className:"text-primary hover:underline font-medium",children:"회원가입"})]})})]}),p.jsx("div",{className:"mt-6 text-center text-xs text-muted-foreground",children:p.jsx("p",{children:"© 2025 문해력 진단 평가 시스템. All rights reserved."})})]})})}function DAe(){const[t,e]=Q.useState({email:"",password:"",confirmPassword:"",name:"",role:"student",grade:1,schoolName:"",parentPhone:""}),[n,r]=Q.useState(""),[s,i]=Q.useState(!1),o=is(),a=c=>{e({...t,[c.target.name]:c.target.value})},l=async c=>{var u,A;if(c.preventDefault(),r(""),t.password!==t.confirmPassword){r("비밀번호가 일치하지 않습니다.");return}i(!0);try{await vt.post("/api/v1/auth/register",{email:t.email,password:t.password,name:t.name,role:t.role,grade:t.role==="student"?t.grade:void 0,schoolName:t.role==="student"?t.schoolName:void 0,parentPhone:t.role==="student"?t.parentPhone:void 0}),alert("회원가입이 완료되었습니다. 로그인해주세요."),o("/login")}catch(d){r(((A=(u=d.response)==null?void 0:u.data)==null?void 0:A.message)||"회원가입에 실패했습니다.")}finally{i(!1)}};return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4 py-12",children:p.jsxs("div",{className:"max-w-md w-full",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-4xl font-bold text-primary mb-2",children:"문해력 진단 평가"}),p.jsx("p",{className:"text-muted-foreground",children:"회원가입"})]}),p.jsxs("div",{className:"bg-card rounded-lg shadow-lg p-8",children:[p.jsx("h2",{className:"text-2xl font-semibold mb-6 text-card-foreground",children:"계정 만들기"}),n&&p.jsx("div",{className:"mb-4 p-3 bg-destructive/10 border border-destructive/20 rounded-md text-destructive text-sm",children:n}),p.jsxs("form",{onSubmit:l,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"이름"}),p.jsx("input",{type:"text",name:"name",value:t.name,onChange:a,required:!0,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"홍길동"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"이메일"}),p.jsx("input",{type:"email",name:"email",value:t.email,onChange:a,required:!0,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"your@email.com"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"역할"}),p.jsxs("select",{name:"role",value:t.role,onChange:a,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",children:[p.jsx("option",{value:"student",children:"학생"}),p.jsx("option",{value:"parent",children:"학부모"}),p.jsx("option",{value:"teacher",children:"교사"})]})]}),t.role==="student"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"학년"}),p.jsxs("select",{name:"grade",value:t.grade,onChange:a,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",children:[[1,2,3,4,5,6].map(c=>p.jsxs("option",{value:c,children:["초등 ",c,"학년"]},c)),[7,8,9].map(c=>p.jsxs("option",{value:c,children:["중등 ",c-6,"학년"]},c))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"학교명"}),p.jsx("input",{type:"text",name:"schoolName",value:t.schoolName,onChange:a,required:!0,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"예: 서울초등학교"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"학부모 휴대폰 번호"}),p.jsx("input",{type:"tel",name:"parentPhone",value:t.parentPhone,onChange:a,required:!0,pattern:"[0-9]{3}-[0-9]{4}-[0-9]{4}",className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"010-1234-5678"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"비밀번호"}),p.jsx("input",{type:"password",name:"password",value:t.password,onChange:a,required:!0,minLength:8,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"8자 이상"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"비밀번호 확인"}),p.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:a,required:!0,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"비밀번호 재입력"})]}),p.jsx("button",{type:"submit",disabled:s,className:"w-full bg-primary text-primary-foreground py-2 px-4 rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:s?"가입 중...":"회원가입"})]}),p.jsx("div",{className:"mt-6 text-center",children:p.jsxs("p",{className:"text-sm text-muted-foreground",children:["이미 계정이 있으신가요?"," ",p.jsx(qc,{to:"/login",className:"text-primary hover:underline font-medium",children:"로그인"})]})})]})]})})}function RAe(){const{logout:t}=Ko(),e=is(),[n,r]=Q.useState([]),[s,i]=Q.useState(null),[o,a]=Q.useState(null),[l,c]=Q.useState(!0);Q.useEffect(()=>{u()},[]);const u=async()=>{var g,y,x;try{c(!0),console.log("Fetching student profile...");const v=await vt.get("/api/v1/students/me/profile");console.log("Profile response:",v.data);const b=v.data.data;i(b);const w=await vt.get("/api/v1/students/me/stats");a(w.data.data);const S=(await vt.get("/api/v1/templates")).data.data.filter(N=>N.grade===b.grade);r(S)}catch(v){console.error("데이터 조회 실패:",v),console.error("Error details:",(g=v.response)==null?void 0:g.data),alert(`데이터 조회 실패: ${((x=(y=v.response)==null?void 0:y.data)==null?void 0:x.message)||v.message}`)}finally{c(!1)}},A=g=>{e(`/test/start/${g}`)},d=()=>{t(),e("/login")},f=async g=>{if(confirm("이 테스트를 삭제하시겠습니까?"))try{await vt.delete(`/api/v1/sessions/${g}`),alert("테스트가 삭제되었습니다."),u()}catch(y){console.error("테스트 삭제 실패:",y),alert("테스트 삭제에 실패했습니다.")}},h=g=>g<=6?`초등 ${g}학년`:`중등 ${g-6}학년`,m=g=>{const y={pending:{text:"대기중",className:"bg-muted text-muted-foreground"},in_progress:{text:"진행중",className:"bg-primary text-primary-foreground"},completed:{text:"완료",className:"bg-accent text-accent-foreground"},scored:{text:"채점완료",className:"bg-chart-1 text-primary-foreground"}},x=y[g]||y.pending;return p.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${x.className}`,children:x.text})};return l?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),p.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})]})}):p.jsxs("div",{className:"min-h-screen bg-background",children:[p.jsx("header",{className:"bg-card shadow-sm border-b border-border",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-primary",children:"문해력 진단 평가"}),p.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["안녕하세요, ",p.jsx("span",{className:"font-medium text-foreground",children:s==null?void 0:s.user.name}),"님",s&&p.jsxs("span",{className:"ml-2",children:["(",h(s.grade),s.schoolName&&`, ${s.schoolName}`,s.className&&` ${s.className}`,")"]})]})]}),p.jsx("div",{className:"flex gap-3",children:p.jsx("button",{onClick:d,className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-card-foreground",children:"로그아웃"})})]})})}),p.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o&&p.jsxs("section",{className:"mb-8",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"내 학습 현황"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"총 테스트"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:o.totalSessions})]}),p.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"📝"})})]})}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"완료한 테스트"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:o.completedSessions})]}),p.jsx("div",{className:"w-12 h-12 bg-chart-1/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"✅"})})]})}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"채점 완료"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:o.scoredSessions})]}),p.jsx("div",{className:"w-12 h-12 bg-chart-2/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"📊"})})]})}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"평균 점수"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:o.averageScore>0?`${o.averageScore}%`:"-"})]}),p.jsx("div",{className:"w-12 h-12 bg-chart-3/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"🎯"})})]})})]})]}),p.jsxs("section",{className:"mb-12",children:[p.jsxs("h2",{className:"text-2xl font-bold mb-6 text-foreground",children:["내 학년 테스트 (",s&&h(s.grade),")"]}),n.length===0?p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:p.jsx("p",{className:"text-muted-foreground",children:"현재 학년에 맞는 테스트가 없습니다."})}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(g=>p.jsxs("div",{className:"bg-card rounded-lg shadow-md hover:shadow-lg transition-shadow p-6 border border-border",children:[p.jsxs("div",{className:"flex justify-between items-start mb-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:h(g.grade)}),p.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:g.title})]}),p.jsx("span",{className:"px-3 py-1 bg-accent text-accent-foreground rounded-full text-xs font-medium",children:g.templateCode})]}),p.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-muted-foreground",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{children:"📝"}),p.jsxs("span",{children:[g.totalQuestions,"문항"]})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{children:"⏱️"}),p.jsxs("span",{children:[g.timeLimit,"분"]})]})]}),p.jsx("button",{onClick:()=>A(g.templateCode),className:"w-full bg-primary text-primary-foreground py-2 px-4 rounded-lg hover:bg-primary/90 transition-colors font-medium",children:"시작하기"})]},g.id))})]}),p.jsxs("section",{children:[p.jsx("h2",{className:"text-2xl font-bold mb-6 text-foreground",children:"최근 테스트 결과"}),!o||o.recentSessions.length===0?p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:p.jsx("p",{className:"text-muted-foreground",children:"아직 진행한 테스트가 없습니다."})}):p.jsx("div",{className:"bg-card rounded-lg shadow-md overflow-hidden border border-border",children:p.jsxs("table",{className:"min-w-full divide-y divide-border",children:[p.jsx("thead",{className:"bg-muted",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"테스트"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"상태"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"점수"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"등급"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"날짜"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"작업"})]})}),p.jsx("tbody",{className:"bg-card divide-y divide-border",children:o.recentSessions.map(g=>p.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[p.jsx("div",{className:"text-sm font-medium text-card-foreground",children:g.template.title}),p.jsx("div",{className:"text-xs text-muted-foreground",children:h(g.template.grade)})]}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m(g.status)}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:g.result?`${g.result.percentage.toFixed(1)}%`:"-"}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:g.result?`${g.result.gradeLevel}등급`:"-"}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:new Date(g.createdAt).toLocaleDateString("ko-KR")}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsxs("div",{className:"flex items-center gap-2",children:[g.status==="in_progress"&&p.jsx("button",{onClick:()=>e(`/test/session/${g.id}`),className:"text-primary hover:underline text-sm font-medium",children:"계속하기"}),(g.status==="scored"||g.status==="completed")&&g.result&&p.jsx("button",{onClick:()=>e(`/test/result/${g.id}`),className:"text-primary hover:underline text-sm font-medium",children:"결과보기"}),p.jsx("button",{onClick:()=>f(g.id),className:"text-destructive hover:underline text-sm font-medium ml-2",children:"삭제"})]})})]},g.id))})]})})]})]})]})}function PAe(){const{templateCode:t}=oA(),e=is(),{user:n}=Ko(),[r,s]=Q.useState(null),[i,o]=Q.useState(!0),[a,l]=Q.useState(!1);Q.useEffect(()=>{c()},[t]);const c=async()=>{try{o(!0);const d=await vt.get(`/api/v1/templates/${t}`);s(d.data.data)}catch(d){console.error("템플릿 조회 실패:",d),alert("테스트 정보를 불러올 수 없습니다."),e("/dashboard")}finally{o(!1)}},u=async()=>{var d,f;if(r)try{l(!0);const m=(await vt.post("/api/v1/sessions/start",{templateId:r.id})).data.data.sessionId;e(`/test/survey/${m}`)}catch(h){console.error("테스트 시작 실패:",h),alert(((f=(d=h.response)==null?void 0:d.data)==null?void 0:f.message)||"테스트를 시작할 수 없습니다.")}finally{l(!1)}},A=d=>d<=6?`초등 ${d}학년`:`중등 ${d-6}학년`;return i?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})}):r?p.jsx("div",{className:"min-h-screen bg-background",children:p.jsx("div",{className:"max-w-4xl mx-auto px-4 py-12",children:p.jsxs("div",{className:"bg-card rounded-lg shadow-lg p-8 border border-border",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-3xl font-bold text-primary mb-2",children:r.title}),p.jsx("p",{className:"text-lg text-muted-foreground",children:A(r.grade)})]}),p.jsxs("div",{className:"bg-muted rounded-lg p-6 mb-8",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4 text-foreground",children:"테스트 정보"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"📝"})}),p.jsxs("div",{children:[p.jsx("div",{className:"text-sm text-muted-foreground",children:"문항 수"}),p.jsxs("div",{className:"text-lg font-semibold text-foreground",children:[r.totalQuestions,"문항"]})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"⏱️"})}),p.jsxs("div",{children:[p.jsx("div",{className:"text-sm text-muted-foreground",children:"제한 시간"}),p.jsxs("div",{className:"text-lg font-semibold text-foreground",children:[r.timeLimit,"분"]})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"📊"})}),p.jsxs("div",{children:[p.jsx("div",{className:"text-sm text-muted-foreground",children:"평가 영역"}),p.jsx("div",{className:"text-lg font-semibold text-foreground",children:"4개 영역"})]})]})]})]}),p.jsxs("div",{className:"bg-accent/50 rounded-lg p-6 mb-8 border border-accent",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4 text-accent-foreground",children:"⚠️ 테스트 전 확인사항"}),p.jsxs("ul",{className:"space-y-3 text-accent-foreground",children:[p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-primary mt-1",children:"•"}),p.jsxs("span",{children:["테스트는 총 ",p.jsxs("strong",{children:[r.timeLimit,"분"]})," 동안 진행됩니다."]})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-primary mt-1",children:"•"}),p.jsxs("span",{children:[p.jsxs("strong",{children:[r.totalQuestions,"개"]}),"의 문항에 답해주세요."]})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-primary mt-1",children:"•"}),p.jsx("span",{children:"테스트는 어휘력, 독해력, 문법, 추론 영역과 독서 습관 설문으로 구성되어 있습니다."})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-primary mt-1",children:"•"}),p.jsxs("span",{children:["한 번 시작하면 ",p.jsx("strong",{children:"중간 저장이 가능"}),"하며, 나중에 이어서 할 수 있습니다."]})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-primary mt-1",children:"•"}),p.jsx("span",{children:"모든 문항에 성실히 답변해주세요. 결과는 즉시 확인할 수 있습니다."})]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[p.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[p.jsx("h3",{className:"font-semibold text-primary mb-2",children:"📚 문해력 평가"}),p.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[p.jsx("li",{children:"• 어휘력 (단어와 한자성어 이해)"}),p.jsx("li",{children:"• 독해력 (글의 내용 파악)"}),p.jsx("li",{children:"• 문법/어법 (언어 규칙 이해)"}),p.jsx("li",{children:"• 추론/사고력 (논리적 사고)"})]})]}),p.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[p.jsx("h3",{className:"font-semibold text-primary mb-2",children:"📖 독서 습관 설문"}),p.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[p.jsx("li",{children:"• 읽기/쓰기 동기"}),p.jsx("li",{children:"• 가정 독서 환경"}),p.jsx("li",{children:"• 평소 독서 습관"}),p.jsx("li",{children:"• 선호 장르 파악"})]})]})]}),p.jsx("div",{className:"bg-muted rounded-lg p-4 mb-8",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-sm text-muted-foreground",children:"응시자"}),p.jsx("div",{className:"font-semibold text-foreground",children:n==null?void 0:n.name})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-sm text-muted-foreground",children:"이메일"}),p.jsx("div",{className:"font-semibold text-foreground",children:n==null?void 0:n.email})]})]})}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{onClick:()=>e("/dashboard"),className:"flex-1 border border-border py-3 px-6 rounded-lg hover:bg-muted transition-colors text-foreground font-medium",children:"취소"}),p.jsx("button",{onClick:u,disabled:a,className:"flex-1 bg-primary text-primary-foreground py-3 px-6 rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-bold",children:a?"시작 준비 중...":"테스트 시작하기"})]})]})})}):null}function UAe(){const{sessionId:t}=oA(),e=is(),[n,r]=Q.useState([]),[s,i]=Q.useState({}),[o,a]=Q.useState(!0),[l,c]=Q.useState(!1);Q.useEffect(()=>{u()},[t]);const u=async()=>{try{a(!0);const v=await vt.get(`/api/v1/sessions/${t}/survey`);r(v.data.data.questions)}catch(v){console.error("설문 조회 실패:",v),alert("설문을 불러올 수 없습니다."),e("/dashboard")}finally{a(!1)}},A=(v,b)=>{i(w=>({...w,[v]:b}))},d=async()=>{const v=n.filter(b=>!s[b.id]);if(v.length>0){alert(`모든 질문에 답해주세요. (남은 문항: ${v.length}개)`);return}try{c(!0);const b=n.map(w=>({questionId:w.id,questionNumber:w.questionNumber,response:s[w.id]}));await vt.post(`/api/v1/sessions/${t}/survey`,{responses:b}),alert("설문이 완료되었습니다. 이제 테스트를 시작합니다."),e(`/test/session/${t}`)}catch(b){console.error("설문 제출 실패:",b),alert("설문 제출에 실패했습니다.")}finally{c(!1)}},f=v=>({reading_motivation:"읽기 동기",reading_environment:"독서 환경",reading_habit:"독서 습관",writing_motivation:"글쓰기 동기",reading_preference:"선호 장르",digital_literacy:"디지털 리터러시",critical_thinking:"비판적 사고",reading_attitude:"독서 태도"})[v]||v,h=v=>({reading_motivation:"from-blue-500 to-blue-600",reading_environment:"from-green-500 to-green-600",reading_habit:"from-purple-500 to-purple-600",writing_motivation:"from-orange-500 to-orange-600",reading_preference:"from-pink-500 to-pink-600",digital_literacy:"from-indigo-500 to-indigo-600",critical_thinking:"from-teal-500 to-teal-600",reading_attitude:"from-cyan-500 to-cyan-600"})[v]||"from-gray-500 to-gray-600";if(o)return p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-600 text-lg",children:"설문 문항을 불러오는 중..."})]})});const m=n.reduce((v,b)=>(v[b.category]||(v[b.category]=[]),v[b.category].push(b),v),{}),g=Object.keys(s).length,y=n.length,x=y>0?g/y*100:0;return p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 py-8",children:p.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[p.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-6",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"📚 독서 습관 및 환경 설문"}),p.jsx("p",{className:"text-gray-600",children:"테스트 시작 전에 여러분의 독서 습관과 환경에 대해 알려주세요."}),p.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["이 설문은 ",p.jsx("strong",{children:"시간 제한이 없으며"}),", 설문 완료 후 실제 테스트가 시작됩니다."]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[p.jsx("span",{children:"진행률"}),p.jsxs("span",{className:"font-semibold",children:[g," / ",y," 문항"]})]}),p.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:p.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-full transition-all duration-300 ease-out",style:{width:`${x}%`}})})]})]}),p.jsx("div",{className:"space-y-6",children:Object.entries(m).map(([v,b])=>p.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[p.jsx("div",{className:`bg-gradient-to-r ${h(v)} text-white px-6 py-4`,children:p.jsxs("h2",{className:"text-xl font-bold flex items-center",children:[p.jsx("span",{className:"text-2xl mr-2",children:v==="reading_motivation"?"📖":v==="reading_environment"?"🏠":v==="reading_habit"?"⏰":v==="writing_motivation"?"✍️":"🎯"}),f(v)]})}),p.jsx("div",{className:"p-6 space-y-6",children:b.map((w,C)=>p.jsxs("div",{className:"pb-6 border-b border-gray-200 last:border-b-0 last:pb-0",children:[p.jsx("div",{className:"mb-4",children:p.jsxs("div",{className:"flex items-start mb-3",children:[p.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-700 rounded-full font-bold text-sm mr-3 flex-shrink-0",children:C+1}),p.jsx("p",{className:"text-gray-800 font-medium text-lg flex-1",children:w.questionText})]})}),w.questionType==="likert_scale"&&p.jsx("div",{className:"grid grid-cols-5 gap-2",children:w.options.map(B=>p.jsxs("button",{onClick:()=>A(w.id,String(B.id)),className:`p-3 rounded-lg border-2 text-center transition-all ${s[w.id]===String(B.id)?"border-blue-600 bg-blue-50 text-blue-700 font-semibold shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-blue-50"}`,children:[p.jsx("div",{className:"text-2xl mb-1",children:B.id===1?"😞":B.id===2?"😐":B.id===3?"🙂":B.id===4?"😊":"😄"}),p.jsx("div",{className:"text-sm",children:B.text})]},B.id))}),w.questionType==="choice"&&p.jsx("div",{className:"space-y-2",children:w.options.map(B=>p.jsx("button",{onClick:()=>A(w.id,String(B.id)),className:`w-full p-4 rounded-lg border-2 text-left transition-all ${s[w.id]===String(B.id)?"border-blue-600 bg-blue-50 text-blue-700 font-semibold shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:`w-6 h-6 rounded-full border-2 mr-3 flex items-center justify-center ${s[w.id]===String(B.id)?"border-blue-600 bg-blue-600":"border-gray-300"}`,children:s[w.id]===String(B.id)&&p.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),p.jsx("span",{children:B.text})]})},B.id))})]},w.id))})]},v))}),p.jsxs("div",{className:"mt-8 bg-white rounded-2xl shadow-xl p-6",children:[p.jsx("button",{onClick:d,disabled:g<y||l,className:`w-full py-4 rounded-xl font-bold text-lg transition-all ${g<y||l?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg transform hover:scale-105"}`,children:l?p.jsxs("span",{className:"flex items-center justify-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"제출 중..."]}):g<y?`모든 질문에 답해주세요 (${g}/${y})`:"설문 완료하고 테스트 시작하기 →"}),p.jsx("p",{className:"text-center text-sm text-gray-500 mt-3",children:"설문 완료 후 즉시 테스트가 시작됩니다. (타이머 작동)"})]})]})})}function jAe({isOpen:t,totalQuestions:e,currentQuestion:n,stage:r,error:s}){const[i,o]=Q.useState("");if(Q.useEffect(()=>{if(r==="error"||r==="complete")return;const u=setInterval(()=>{o(A=>A.length>=3?"":A+".")},500);return()=>clearInterval(u)},[r]),!t)return null;const l=(()=>{switch(r){case"submitting":return{title:"제출 중",message:"답안을 서버에 전송하고 있습니다",icon:"📤",color:"text-blue-600"};case"grading":return{title:"AI 채점 중",message:`${n}/${e} 문제 채점 중`,icon:"🤖",color:"text-purple-600"};case"calculating":return{title:"결과 계산 중",message:"최종 점수와 등급을 계산하고 있습니다",icon:"📊",color:"text-green-600"};case"complete":return{title:"완료!",message:"채점이 완료되었습니다",icon:"✅",color:"text-green-600"};case"error":return{title:"오류 발생",message:s||"채점 중 문제가 발생했습니다",icon:"❌",color:"text-red-600"}}})(),c=r==="grading"?n/e*100:0;return p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:p.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4 animate-in fade-in zoom-in duration-300",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-7xl mb-4 animate-bounce",children:l.icon}),p.jsxs("h2",{className:`text-2xl font-bold mb-2 ${l.color}`,children:[l.title,r!=="error"&&r!=="complete"&&i]}),p.jsx("p",{className:"text-gray-600 mb-6",children:l.message}),r==="grading"&&p.jsxs("div",{className:"mb-6",children:[p.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:p.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-full transition-all duration-500 ease-out",style:{width:`${c}%`}})}),p.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[Math.round(c),"% 완료"]})]}),r!=="grading"&&r!=="error"&&r!=="complete"&&p.jsx("div",{className:"mb-6",children:p.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-purple-600"})}),r!=="error"&&r!=="complete"&&p.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:p.jsxs("p",{className:"text-sm text-blue-800",children:[p.jsx("span",{className:"font-semibold",children:"잠시만 기다려주세요!"}),p.jsx("br",{}),"AI가 답안을 채점하는 데 최대 2분 정도 소요될 수 있습니다."]})}),r==="error"&&s&&p.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mt-4",children:p.jsx("p",{className:"text-sm text-red-800",children:s})})]})})})}function LAe(){const{sessionId:t}=oA(),e=is(),[n,r]=Q.useState([]),[s,i]=Q.useState(0),[o,a]=Q.useState({}),[l,c]=Q.useState(0),[u,A]=Q.useState(!0),[d,f]=Q.useState(!1),[h,m]=Q.useState("submitting"),[g,y]=Q.useState(0),[x,v]=Q.useState("");Q.useEffect(()=>{b()},[t]),Q.useEffect(()=>{if(l===0&&!u&&n.length>0&&!d){N();return}if(l<=0)return;const L=setInterval(()=>{c(G=>G<=1?0:G-1)},1e3);return()=>clearInterval(L)},[l,u,n.length,d]);const b=async()=>{var L,G;try{A(!0);let j=(await vt.get(`/api/v1/sessions/${t}`)).data.data;if(!j.surveyCompletedAt){alert("먼저 설문을 완료해주세요."),e(`/test/survey/${t}`);return}if(!((L=j.template)!=null&&L.questions)||j.template.questions.length===0)throw new Error("테스트 문제를 찾을 수 없습니다.");const K=j.template.questions.filter(fe=>!["reading_motivation","reading_environment","reading_habit","writing_motivation","reading_preference","digital_literacy","critical_thinking","reading_attitude"].includes(fe.category));r(K);const Y={};(G=j.answers)==null||G.forEach(fe=>{Y[fe.questionId]=fe.studentAnswer||""}),a(Y),(!j.startedAt||j.status==="pending")&&(j=(await vt.patch(`/api/v1/sessions/${t}/status`,{status:"in_progress"})).data.data);const J=new Date(j.startedAt),ue=(new Date().getTime()-J.getTime())/1e3/60,le=Math.max(0,j.template.timeLimit-ue);c(Math.floor(le*60))}catch(_){console.error("세션 조회 실패:",_),alert("테스트 정보를 불러올 수 없습니다."),e("/dashboard")}finally{A(!1)}},w=(L,G)=>{a(_=>({..._,[L]:G}))},C=async()=>{var L,G,_;try{const j=Object.entries(o).filter(([Y,J])=>J&&J.trim()!=="").map(([Y,J])=>({questionId:Y,answer:J}));if(console.log("Attempting to save answers:",j),console.log("Session ID:",t),j.length===0){alert("저장할 답안이 없습니다.");return}const K=await vt.post(`/api/v1/sessions/${t}/answers`,{answers:j},{timeout:15e4});console.log("Save response:",K.data),alert(`✅ ${j.length}개의 답안이 저장되었습니다.`)}catch(j){console.error("저장 실패:",j),console.error("Error response:",j.response),console.error("Error message:",j.message),console.error("Error details:",(L=j.response)==null?void 0:L.data);let K="답안 저장에 실패했습니다.";j.code==="ECONNABORTED"?K+=`

⏱️ 시간 초과: 네트워크 연결을 확인해주세요.`:(_=(G=j.response)==null?void 0:G.data)!=null&&_.message?K+=`

${j.response.data.message}`:j.message&&(K+=`

${j.message}`),alert(K)}},B=async()=>{confirm("테스트를 제출하시겠습니까? 제출 후에는 수정할 수 없습니다.")&&await k()},S=()=>{confirm(`테스트를 종료하시겠습니까?

⚠️ 경고: 모든 문제 풀이 내용이 삭제되며 복구할 수 없습니다.

임시저장 버튼을 눌러 답안을 저장한 후 나가는 것을 권장합니다.`)&&e("/dashboard")},N=async()=>{alert("시간이 종료되었습니다. 테스트가 자동 제출됩니다."),await k()},k=async()=>{var L,G,_;try{f(!0),m("submitting"),v("");const j=n.map(Y=>({questionId:Y.id,answer:o[Y.id]||""}));await new Promise(Y=>setTimeout(Y,500)),m("grading");const K=setInterval(()=>{y(Y=>Y>=n.length?(clearInterval(K),n.length):Y+1)},12e4/n.length);await vt.post(`/api/v1/sessions/${t}/submit`,{answers:j},{timeout:15e4}),clearInterval(K),y(n.length),m("calculating"),await new Promise(Y=>setTimeout(Y,1500)),m("complete"),await new Promise(Y=>setTimeout(Y,1e3)),e(`/test/result/${t}`)}catch(j){console.error("제출 실패:",j),console.error("Error response:",j.response),console.error("Error message:",j.message),console.error("Error details:",(L=j.response)==null?void 0:L.data),m("error"),v(((_=(G=j.response)==null?void 0:G.data)==null?void 0:_.message)||j.message||"알 수 없는 오류가 발생했습니다"),setTimeout(()=>{f(!1)},3e3)}},O=L=>{const G=Math.floor(L/60),_=L%60;return`${G}:${_.toString().padStart(2,"0")}`},U=L=>({vocabulary:"어휘력",reading:"독해력",grammar:"문법/어법",reasoning:"추론/사고력",reading_motivation:"읽기 동기",writing_motivation:"글쓰기 동기",reading_environment:"독서 환경",reading_habit:"독서 습관",reading_preference:"선호 장르"})[L]||L;if(u)return p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})});if(!n||n.length===0)return p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsx("div",{className:"text-xl text-muted-foreground",children:"문제를 불러올 수 없습니다."})});const P=n[s];if(!P)return null;const V=(s+1)/n.length*100,W=Object.keys(o).length;return p.jsxs(p.Fragment,{children:[p.jsx(jAe,{isOpen:d,totalQuestions:n.length,currentQuestion:g,stage:h,error:x}),p.jsxs("div",{className:"min-h-screen bg-background",children:[p.jsx("header",{className:"bg-card shadow-sm border-b border-border sticky top-0 z-10",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("h1",{className:"text-xl font-bold text-primary",children:"문해력 진단 평가"}),p.jsxs("span",{className:"text-sm text-muted-foreground",children:[s+1," / ",n.length]})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"text-sm text-muted-foreground",children:["답변: ",W," / ",n.length]}),p.jsxs("div",{className:`text-lg font-bold ${l<300?"text-destructive":"text-primary"}`,children:["⏱️ ",O(l)]}),p.jsx("button",{onClick:C,disabled:d,className:"px-4 py-2 border border-border rounded-md hover:bg-muted transition-colors text-sm disabled:opacity-50",children:"💾 임시저장"}),p.jsx("button",{onClick:S,disabled:d,className:"px-4 py-2 border border-destructive text-destructive rounded-md hover:bg-destructive hover:text-destructive-foreground transition-colors text-sm disabled:opacity-50",children:"🚪 나가기"})]})]}),p.jsx("div",{className:"mt-3",children:p.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:p.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${V}%`}})})})]})}),p.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[p.jsxs("div",{className:"bg-card rounded-lg shadow-lg p-8 border border-border",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-sm font-medium",children:U(P.category)}),p.jsxs("span",{className:"text-sm text-muted-foreground",children:[P.points,"점"]})]}),p.jsxs("div",{className:"text-2xl font-bold text-primary",children:["문제 ",P.questionNumber]})]}),P.passage&&p.jsxs("div",{className:"bg-muted rounded-lg p-6 mb-6",children:[p.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"지문"}),p.jsx("div",{className:"text-foreground whitespace-pre-wrap leading-relaxed",children:P.passage})]}),P.imageUrl&&p.jsx("div",{className:"mb-6",children:p.jsx("img",{src:P.imageUrl.startsWith("http")?P.imageUrl:`https://literacy-backend-mdbn.onrender.com${P.imageUrl}`,alt:"문제 이미지",className:"max-w-full h-auto rounded-lg border border-border",onError:L=>{console.error("Image failed to load:",P.imageUrl),L.target.style.display="none";const G=L.target.parentElement;if(G&&!G.querySelector(".image-error-message")){const _=document.createElement("div");_.className="image-error-message p-4 bg-muted rounded-lg text-muted-foreground text-sm",_.textContent="📷 이미지를 불러올 수 없습니다.",G.appendChild(_)}}})}),p.jsxs("div",{className:"mb-8",children:[p.jsx("div",{className:"text-lg font-semibold text-foreground mb-6",children:P.questionText}),(P.questionType==="choice"||P.questionType==="likert_scale")&&P.options&&p.jsx("div",{className:"space-y-3",children:P.options.map(L=>p.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${o[P.id]===L.id.toString()?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[p.jsx("input",{type:"radio",name:P.id,value:L.id,checked:o[P.id]===L.id.toString(),onChange:G=>w(P.id,G.target.value),className:"mt-1 accent-primary"}),p.jsx("span",{className:"text-foreground",children:L.text})]},L.id))}),P.questionType==="short_answer"&&p.jsx("input",{type:"text",value:o[P.id]||"",onChange:L=>w(P.id,L.target.value),placeholder:"답을 입력하세요",className:"w-full px-4 py-3 border-2 border-border rounded-lg focus:outline-none focus:border-primary bg-input text-foreground"}),P.questionType==="essay"&&p.jsx("textarea",{value:o[P.id]||"",onChange:L=>w(P.id,L.target.value),placeholder:"답을 입력하세요",rows:6,className:"w-full px-4 py-3 border-2 border-border rounded-lg focus:outline-none focus:border-primary bg-input text-foreground resize-none"})]}),p.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-border",children:[p.jsx("button",{onClick:()=>i(L=>Math.max(0,L-1)),disabled:s===0||d,className:"px-6 py-2 border border-border rounded-md hover:bg-muted transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"← 이전"}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("label",{htmlFor:"question-select",className:"text-sm text-muted-foreground",children:"문제 이동:"}),p.jsx("select",{id:"question-select",value:s,onChange:L=>i(Number(L.target.value)),disabled:d,className:"px-4 py-2 border border-border rounded-md bg-card text-foreground focus:outline-none focus:border-primary disabled:opacity-50",children:n.map((L,G)=>p.jsxs("option",{value:G,children:["문제 ",G+1," ",o[L.id]?"✓":""]},L.id))})]}),s===n.length-1?p.jsx("button",{onClick:B,disabled:d,className:"px-6 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-bold",children:d?"제출 중...":"제출하기"}):p.jsx("button",{onClick:()=>i(L=>Math.min(n.length-1,L+1)),disabled:d,className:"px-6 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50",children:"다음 →"})]})]}),p.jsxs("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:[p.jsx("p",{children:"모든 문항에 답변한 후 '제출하기' 버튼을 눌러주세요."}),p.jsx("p",{className:"mt-1",children:"임시저장을 하면 나중에 이어서 풀 수 있습니다."}),l<300&&p.jsx("p",{className:"mt-2 text-destructive font-bold",children:"⚠️ 남은 시간이 5분 미만입니다!"})]})]})]})]})}const Qc={BALANCED:{code:"BALANCED",name:"종합 균형형",emoji:"⚖️",description:"네 가지 영역이 고르게 발달한 이상적인 문해력 유형입니다. 다양한 텍스트를 효과적으로 이해하고 표현할 수 있습니다.",strengths:["다양한 장르의 글을 자유롭게 읽고 이해","복잡한 개념도 쉽게 설명 가능","논리적 사고와 창의적 표현의 조화","문맥 파악과 세부 내용 이해 동시 가능"],weaknesses:["특정 분야의 심화 학습 필요","속도보다 정확성 우선 시 시간 소요"],recommendations:["전문 분야 서적으로 깊이 있는 독서","토론과 글쓰기로 사고력 확장","다양한 장르의 비평적 읽기","프로젝트 기반 통합 학습"],careers:["저널리스트","작가","교육자","연구원","기획자"],color:"from-purple-500 to-pink-500"},LINGUISTIC:{code:"LINGUISTIC",name:"언어 감각형",emoji:"📚",description:"풍부한 어휘력과 뛰어난 독해력으로 언어를 자유자재로 다룹니다. 문학적 감수성이 뛰어나고 표현이 풍부합니다.",strengths:["다양한 어휘를 정확하게 구사","문학 작품의 깊이 있는 이해","은유와 상징의 해석 능력","창의적이고 감성적인 표현"],weaknesses:["논리적 구조화에 어려움","문법 규칙 체계화 필요","분석적 사고 훈련 필요"],recommendations:["문학 작품 깊이 있게 감상하기","어휘 노트 작성으로 표현력 확장","논리적 글쓰기 연습 (논설문, 보고서)","문법 규칙 체계적으로 정리"],careers:["작가","시인","문학평론가","카피라이터","번역가"],color:"from-blue-500 to-cyan-500"},ANALYTICAL:{code:"ANALYTICAL",name:"논리 분석형",emoji:"🧮",description:"정확한 문법 지식과 뛰어난 추론 능력으로 복잡한 정보를 논리적으로 분석합니다. 비판적 사고가 뛰어납니다.",strengths:["논리적 구조와 인과관계 파악","정확한 문법으로 명확한 표현","비판적 분석과 평가 능력","복잡한 개념의 체계적 이해"],weaknesses:["어휘의 다양성 부족","문학적 감수성 개발 필요","창의적 표현력 향상 필요"],recommendations:["다양한 어휘 학습으로 표현력 확장","시와 소설로 문학적 감수성 기르기","토론과 논쟁으로 논리력 강화","비판적 독서와 글쓰기"],careers:["과학자","엔지니어","변호사","분석가","프로그래머"],color:"from-green-500 to-teal-500"},READER:{code:"READER",name:"독해 집중형",emoji:"📖",description:"뛰어난 독해력으로 복잡한 텍스트의 핵심을 빠르게 파악합니다. 정보 처리 능력이 탁월합니다.",strengths:["긴 글의 핵심 내용 빠른 파악","문맥을 통한 의미 추론","다양한 관점 이해와 통합","정보의 구조화와 요약"],weaknesses:["어휘력 확장 필요","문법적 정확성 향상 필요","논리적 추론 훈련 필요"],recommendations:["어휘 학습으로 이해의 폭 넓히기","문법 규칙으로 정확성 높이기","논리적 사고 퍼즐과 게임","속독과 정독의 균형 잡기"],careers:["편집자","리서처","정보분석가","사서","큐레이터"],color:"from-indigo-500 to-purple-500"},WORDSMITH:{code:"WORDSMITH",name:"어휘 전문형",emoji:"✍️",description:"풍부한 어휘로 정교하고 세련된 표현을 구사합니다. 언어의 뉘앙스를 정확히 파악하고 활용합니다.",strengths:["다양하고 정확한 어휘 사용","세밀한 뉘앙스 표현","창의적 언어 활용","풍부한 표현력"],weaknesses:["전체 맥락 파악 훈련 필요","논리적 구조화 능력 향상 필요","추론 능력 개발 필요"],recommendations:["긴 글 읽기로 독해력 향상","논리적 글쓰기 연습","추론 문제 풀이","문법 체계 학습"],careers:["카피라이터","시인","번역가","언어학자","콘텐츠 크리에이터"],color:"from-yellow-500 to-orange-500"},THINKER:{code:"THINKER",name:"추론 사고형",emoji:"🤔",description:"뛰어난 추론 능력으로 숨겨진 의미와 논리를 찾아냅니다. 비판적 사고와 문제 해결 능력이 탁월합니다.",strengths:["논리적 추론과 분석","숨은 의미와 의도 파악","비판적 평가 능력","창의적 문제 해결"],weaknesses:["어휘력 확장 필요","독해 속도 향상 필요","문법 정확성 개선 필요"],recommendations:["다양한 어휘 학습","다독으로 독해력 향상","문법 규칙 체계적 학습","논리 퍼즐과 게임"],careers:["철학자","과학자","전략 기획자","컨설턴트","발명가"],color:"from-red-500 to-pink-500"},GRAMMARIAN:{code:"GRAMMARIAN",name:"문법 정밀형",emoji:"📝",description:"정확한 문법 지식으로 오류 없는 문장을 구사합니다. 체계적이고 정밀한 표현이 강점입니다.",strengths:["문법적으로 완벽한 문장","명확하고 정확한 표현","체계적 문장 구조","편집과 교정 능력"],weaknesses:["어휘의 다양성 부족","독해 속도 향상 필요","추론 능력 개발 필요"],recommendations:["다양한 어휘 학습","다양한 장르 독서","추론 문제 연습","창의적 글쓰기"],careers:["편집자","교정자","언어 교사","기술 작가","법률 문서 작성자"],color:"from-emerald-500 to-green-500"},EXPLORER:{code:"EXPLORER",name:"발전 탐색형",emoji:"🌱",description:"아직 특정 강점이 뚜렷하지 않지만, 모든 영역에서 성장 가능성이 큰 유형입니다. 꾸준한 학습으로 발전할 수 있습니다.",strengths:["다양한 분야 학습 의욕","성장 가능성","열린 태도","노력하는 자세"],weaknesses:["전반적인 기초 실력 향상 필요","학습 전략 수립 필요","꾸준한 연습 필요"],recommendations:["매일 조금씩 독서 습관 들이기","기초 어휘와 문법 체계적 학습","쉬운 책부터 시작해 난이도 높이기","학습 멘토나 선생님의 도움 받기","독서 일기로 이해도 확인","꾸준한 연습과 복습"],careers:["모든 분야에 가능성 열려있음","자신만의 강점 발견 중"],color:"from-pink-500 to-rose-500"}};function MAe(t){const{vocabulary:e,reading:n,grammar:r,reasoning:s}=t,i=Math.max(e,n,r,s,1),o=e/i*100,a=n/i*100,l=r/i*100,c=s/i*100,u=o>=70&&a>=70&&l>=70&&c>=70,A=Math.max(o,a,l,c)-Math.min(o,a,l,c);return u&&A<=15?Qc.BALANCED:o>=70&&a>=70?Qc.LINGUISTIC:l>=70&&c>=70?Qc.ANALYTICAL:a===Math.max(o,a,l,c)&&a>=65?Qc.READER:o===Math.max(o,a,l,c)&&o>=65?Qc.WORDSMITH:c===Math.max(o,a,l,c)&&c>=65?Qc.THINKER:l===Math.max(o,a,l,c)&&l>=65?Qc.GRAMMARIAN:Qc.EXPLORER}const QAe=[{level:1,label:"최우수",percentage:4,color:"#8b5cf6",description:"상위 4% - 탁월한 문해력"},{level:2,label:"우수",percentage:7,color:"#a78bfa",description:"상위 11% - 매우 뛰어난 수준"},{level:3,label:"양호",percentage:12,color:"#c4b5fd",description:"상위 23% - 우수한 수준"},{level:4,label:"보통 상",percentage:17,color:"#ddd6fe",description:"상위 40% - 평균 이상"},{level:5,label:"보통",percentage:20,color:"#e9d5ff",description:"중위 50% - 평균 수준"},{level:6,label:"보통 하",percentage:17,color:"#f3e8ff",description:"하위 40% - 평균 이하"},{level:7,label:"노력 요함",percentage:12,color:"#fae8ff",description:"하위 23% - 개선 필요"},{level:8,label:"많은 노력",percentage:7,color:"#fdf4ff",description:"하위 11% - 집중 학습"},{level:9,label:"특별 지도",percentage:4,color:"#fdf2f8",description:"하위 4% - 맞춤 지도"}];function HAe({currentGrade:t,className:e=""}){const n=[{grade:1,percentage:5,label:"최상위"},{grade:2,percentage:10,label:"상위"},{grade:3,percentage:20,label:"중상"},{grade:4,percentage:30,label:"중위"},{grade:5,percentage:20,label:"중하"},{grade:6,percentage:10,label:"하위"},{grade:7,percentage:5,label:"최하위"}];return p.jsxs("div",{className:`${e}`,children:[p.jsx("style",{children:`
        @media print {
          .distribution-bar {
            print-color-adjust: exact !important;
            -webkit-print-color-adjust: exact !important;
          }
        }
      `}),p.jsx("div",{className:"space-y-2",children:n.map(r=>{const s=r.grade===t,i=QAe[r.grade-1];return p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:`w-16 text-right text-sm font-semibold ${s?"text-violet-800":"text-gray-700"}`,children:[r.grade,"등급"]}),p.jsx("div",{className:"flex-1 relative",children:p.jsx("div",{className:"h-8 bg-gray-100 rounded-lg overflow-hidden relative",children:p.jsx("div",{className:`distribution-bar h-full transition-all duration-500 ${s?"ring-2 ring-violet-800":""}`,style:{width:`${r.percentage*3}%`,backgroundColor:(i==null?void 0:i.color)||"#9333EA"},children:s&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsx("span",{className:"text-white text-xs font-bold",children:"내 등급"})})})})}),p.jsxs("div",{className:`w-12 text-right text-xs ${s?"font-bold text-violet-800":"text-gray-600"}`,children:[r.percentage,"%"]})]},r.grade)})}),p.jsx("div",{className:"mt-4 text-center",children:p.jsxs("p",{className:"text-xs text-gray-600",children:["전체 응시자 중 상위 ",p.jsxs("span",{className:"font-bold text-violet-800",children:[n.slice(0,t-1).reduce((r,s)=>r+s.percentage,0)+n[t-1].percentage/2,"%"]})]})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ox(t){return t+.5|0}const du=(t,e,n)=>Math.max(Math.min(t,n),e);function Ng(t){return du(ox(t*2.55),0,255)}function Tu(t){return du(ox(t*255),0,255)}function Ql(t){return du(ox(t/2.55)/100,0,1)}function Rj(t){return du(ox(t*100),0,100)}const Ao={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},UI=[..."0123456789ABCDEF"],zAe=t=>UI[t&15],VAe=t=>UI[(t&240)>>4]+UI[t&15],w1=t=>(t&240)>>4===(t&15),WAe=t=>w1(t.r)&&w1(t.g)&&w1(t.b)&&w1(t.a);function GAe(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Ao[t[1]]*17,g:255&Ao[t[2]]*17,b:255&Ao[t[3]]*17,a:e===5?Ao[t[4]]*17:255}:(e===7||e===9)&&(n={r:Ao[t[1]]<<4|Ao[t[2]],g:Ao[t[3]]<<4|Ao[t[4]],b:Ao[t[5]]<<4|Ao[t[6]],a:e===9?Ao[t[7]]<<4|Ao[t[8]]:255})),n}const KAe=(t,e)=>t<255?e(t):"";function XAe(t){var e=WAe(t)?zAe:VAe;return t?"#"+e(t.r)+e(t.g)+e(t.b)+KAe(t.a,e):void 0}const qAe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function dW(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function YAe(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function JAe(t,e,n){const r=dW(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function ZAe(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function X$(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=ZAe(n,r,s,u,i),l=l*60+.5),[l|0,c||0,a]}function q$(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Tu)}function Y$(t,e,n){return q$(dW,t,e,n)}function ede(t,e,n){return q$(JAe,t,e,n)}function tde(t,e,n){return q$(YAe,t,e,n)}function fW(t){return(t%360+360)%360}function nde(t){const e=qAe.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Ng(+e[5]):Tu(+e[5]));const s=fW(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=ede(s,i,o):e[1]==="hsv"?r=tde(s,i,o):r=Y$(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function rde(t,e){var n=X$(t);n[0]=fW(n[0]+e),n=Y$(n),t.r=n[0],t.g=n[1],t.b=n[2]}function sde(t){if(!t)return;const e=X$(t),n=e[0],r=Rj(e[1]),s=Rj(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Ql(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const Pj={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Uj={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function ide(){const t={},e=Object.keys(Uj),n=Object.keys(Pj);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,Pj[i]);i=parseInt(Uj[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let C1;function ode(t){C1||(C1=ide(),C1.transparent=[0,0,0,0]);const e=C1[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const ade=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function lde(t){const e=ade.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Ng(o):du(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Ng(r):du(r,0,255)),s=255&(e[4]?Ng(s):du(s,0,255)),i=255&(e[6]?Ng(i):du(i,0,255)),{r,g:s,b:i,a:n}}}function cde(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ql(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const KN=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,_f=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function ude(t,e,n){const r=_f(Ql(t.r)),s=_f(Ql(t.g)),i=_f(Ql(t.b));return{r:Tu(KN(r+n*(_f(Ql(e.r))-r))),g:Tu(KN(s+n*(_f(Ql(e.g))-s))),b:Tu(KN(i+n*(_f(Ql(e.b))-i))),a:t.a+n*(e.a-t.a)}}function S1(t,e,n){if(t){let r=X$(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Y$(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function hW(t,e){return t&&Object.assign(e||{},t)}function jj(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Tu(t[3]))):(e=hW(t,{r:0,g:0,b:0,a:1}),e.a=Tu(e.a)),e}function Ade(t){return t.charAt(0)==="r"?lde(t):nde(t)}let pW=class jI{constructor(e){if(e instanceof jI)return e;const n=typeof e;let r;n==="object"?r=jj(e):n==="string"&&(r=GAe(e)||ode(e)||Ade(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=hW(this._rgb);return e&&(e.a=Ql(e.a)),e}set rgb(e){this._rgb=jj(e)}rgbString(){return this._valid?cde(this._rgb):void 0}hexString(){return this._valid?XAe(this._rgb):void 0}hslString(){return this._valid?sde(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=ude(this._rgb,e._rgb,n)),this}clone(){return new jI(this.rgb)}alpha(e){return this._rgb.a=Tu(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=ox(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return S1(this._rgb,2,e),this}darken(e){return S1(this._rgb,2,-e),this}saturate(e){return S1(this._rgb,1,e),this}desaturate(e){return S1(this._rgb,1,-e),this}rotate(e){return rde(this._rgb,e),this}};/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function $l(){}const dde=(()=>{let t=0;return()=>t++})();function tn(t){return t==null}function Mn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Pt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ns(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ha(t,e){return ns(t)?t:e}function Nt(t,e){return typeof t>"u"?e:t}const fde=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,mW=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function wn(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function sn(t,e,n,r){let s,i,o;if(Mn(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(Pt(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function Dw(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Rw(t){if(Mn(t))return t.map(Rw);if(Pt(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=Rw(t[n[s]]);return e}return t}function gW(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function hde(t,e,n,r){if(!gW(t))return;const s=e[t],i=n[t];Pt(s)&&Pt(i)?jy(s,i,r):e[t]=Rw(i)}function jy(t,e,n){const r=Mn(e)?e:[e],s=r.length;if(!Pt(t))return t;n=n||{};const i=n.merger||hde;let o;for(let a=0;a<s;++a){if(o=r[a],!Pt(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function ty(t,e){return jy(t,e,{merger:pde})}function pde(t,e,n){if(!gW(t))return;const r=e[t],s=n[t];Pt(r)&&Pt(s)?ty(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Rw(s))}const Lj={"":t=>t,x:t=>t.x,y:t=>t.y};function mde(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function gde(t){const e=mde(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Qu(t,e){return(Lj[e]||(Lj[e]=gde(e)))(t)}function J$(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ly=t=>typeof t<"u",Hu=t=>typeof t=="function",Mj=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function yde(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Xt=Math.PI,On=2*Xt,xde=On+Xt,Pw=Number.POSITIVE_INFINITY,vde=Xt/180,pr=Xt/2,TA=Xt/4,Qj=Xt*2/3,yW=Math.log10,cl=Math.sign;function ny(t,e,n){return Math.abs(t-e)<n}function Hj(t){const e=Math.round(t);t=ny(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(yW(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function bde(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function wde(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Uw(t){return!wde(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Cde(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Sde(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function rl(t){return t*(Xt/180)}function Z$(t){return t*(180/Xt)}function zj(t){if(!ns(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function xW(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Xt&&(i+=On),{angle:i,distance:s}}function LI(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Bde(t,e){return(t-e+xde)%On-Xt}function Fs(t){return(t%On+On)%On}function My(t,e,n,r){const s=Fs(t),i=Fs(e),o=Fs(n),a=Fs(i-s),l=Fs(o-s),c=Fs(s-i),u=Fs(s-o);return s===i||s===o||r&&i===o||a>l&&c<u}function Bi(t,e,n){return Math.max(e,Math.min(n,t))}function Nde(t){return Bi(t,-32768,32767)}function Yl(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function e_(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const MI=(t,e,n,r)=>e_(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),Ede=(t,e,n)=>e_(t,n,r=>t[r][e]>=n);function Ide(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const vW=["push","pop","shift","splice","unshift"];function kde(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),vW.forEach(n=>{const r="_onData"+J$(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function Vj(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(vW.forEach(i=>{delete t[i]}),delete t._chartjs)}function bW(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const wW=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function CW(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,wW.call(window,()=>{r=!1,t.apply(e,n)}))}}function Tde(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const t_=t=>t==="start"?"left":t==="end"?"right":"center",ks=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Fde=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e,B1=t=>t===0||t===1,Wj=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*On/n)),Gj=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*On/n)+1,ry={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*pr)+1,easeOutSine:t=>Math.sin(t*pr),easeInOutSine:t=>-.5*(Math.cos(Xt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>B1(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>B1(t)?t:Wj(t,.075,.3),easeOutElastic:t=>B1(t)?t:Gj(t,.075,.3),easeInOutElastic(t){return B1(t)?t:t<.5?.5*Wj(t*2,.1125,.45):.5+.5*Gj(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ry.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ry.easeInBounce(t*2)*.5:ry.easeOutBounce(t*2-1)*.5+.5};function n_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Kj(t){return n_(t)?t:new pW(t)}function XN(t){return n_(t)?t:new pW(t).saturate(.5).darken(.1).hexString()}const $de=["x","y","borderWidth","radius","tension"],_de=["color","borderColor","backgroundColor"];function Ode(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:_de},numbers:{type:"number",properties:$de}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Dde(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Xj=new Map;function Rde(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Xj.get(n);return r||(r=new Intl.NumberFormat(t,e),Xj.set(n,r)),r}function r_(t,e,n){return Rde(e,n).format(t)}const Pde={values(t){return Mn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=Ude(t,n)}const o=yW(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),r_(t,r,l)}};function Ude(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var s_={formatters:Pde};function jde(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:s_.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const jd=Object.create(null),QI=Object.create(null);function sy(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function qN(t,e,n){return typeof e=="string"?jy(sy(t,e),n):jy(sy(t,""),e)}class Lde{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>XN(s.backgroundColor),this.hoverBorderColor=(r,s)=>XN(s.borderColor),this.hoverColor=(r,s)=>XN(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return qN(this,e,n)}get(e){return sy(this,e)}describe(e,n){return qN(QI,e,n)}override(e,n){return qN(jd,e,n)}route(e,n,r,s){const i=sy(this,e),o=sy(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return Pt(l)?Object.assign({},c,l):Nt(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var rr=new Lde({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Ode,Dde,jde]);function Mde(t){return!t||tn(t.size)||tn(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function jw(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Qde(t,e,n,r){r=r||{};let s=r.data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(s=r.data={},i=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,A,d;for(l=0;l<a;l++)if(A=n[l],A!=null&&!Mn(A))o=jw(t,s,i,o,A);else if(Mn(A))for(c=0,u=A.length;c<u;c++)d=A[c],d!=null&&!Mn(d)&&(o=jw(t,s,i,o,d));t.restore();const f=i.length/2;if(f>n.length){for(l=0;l<f;l++)delete s[i[l]];i.splice(0,f)}return o}function FA(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function qj(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function HI(t,e,n,r){SW(t,e,n,r,null)}function SW(t,e,n,r,s){let i,o,a,l,c,u,A,d;const f=e.pointStyle,h=e.rotation,m=e.radius;let g=(h||0)*vde;if(f&&typeof f=="object"&&(i=f.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(g),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(m)||m<=0)){switch(t.beginPath(),f){default:s?t.ellipse(n,r,s/2,m,0,0,On):t.arc(n,r,m,0,On),t.closePath();break;case"triangle":u=s?s/2:m,t.moveTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=Qj,t.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=Qj,t.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),t.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(g+TA)*l,A=Math.cos(g+TA)*(s?s/2-c:l),a=Math.sin(g+TA)*l,d=Math.sin(g+TA)*(s?s/2-c:l),t.arc(n-A,r-a,c,g-Xt,g-pr),t.arc(n+d,r-o,c,g-pr,g),t.arc(n+A,r+a,c,g,g+pr),t.arc(n-d,r+o,c,g+pr,g+Xt),t.closePath();break;case"rect":if(!h){l=Math.SQRT1_2*m,u=s?s/2:l,t.rect(n-u,r-l,2*u,2*l);break}g+=TA;case"rectRot":A=Math.cos(g)*(s?s/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,d=Math.sin(g)*(s?s/2:m),t.moveTo(n-A,r-a),t.lineTo(n+d,r-o),t.lineTo(n+A,r+a),t.lineTo(n-d,r+o),t.closePath();break;case"crossRot":g+=TA;case"cross":A=Math.cos(g)*(s?s/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,d=Math.sin(g)*(s?s/2:m),t.moveTo(n-A,r-a),t.lineTo(n+A,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o);break;case"star":A=Math.cos(g)*(s?s/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,d=Math.sin(g)*(s?s/2:m),t.moveTo(n-A,r-a),t.lineTo(n+A,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o),g+=TA,A=Math.cos(g)*(s?s/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,d=Math.sin(g)*(s?s/2:m),t.moveTo(n-A,r-a),t.lineTo(n+A,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o);break;case"line":o=s?s/2:Math.cos(g)*m,a=Math.sin(g)*m,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(g)*(s?s/2:m),r+Math.sin(g)*m);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Jl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function rS(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function sS(t){t.restore()}function Hde(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function zde(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Vde(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),tn(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Wde(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Gde(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ld(t,e,n,r,s,i={}){const o=Mn(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,Vde(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&Gde(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),tn(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),Wde(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function Qy(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Xt,Xt,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,Xt,pr,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,pr,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-pr,!0),t.lineTo(n+o.topLeft,r)}const Kde=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Xde=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function qde(t,e){const n=(""+t).match(Kde);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Yde=t=>+t||0;function i_(t,e){const n={},r=Pt(e),s=r?Object.keys(e):e,i=Pt(t)?r?o=>Nt(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=Yde(i(o));return n}function BW(t){return i_(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Sd(t){return i_(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ls(t){const e=BW(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Mr(t,e){t=t||{},e=e||rr.font;let n=Nt(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Nt(t.style,e.style);r&&!(""+r).match(Xde)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:Nt(t.family,e.family),lineHeight:qde(Nt(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Nt(t.weight,e.weight),string:""};return s.string=Mde(s),s}function N1(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function Jde(t,e,n){const{min:r,max:s}=t,i=mW(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function aA(t,e){return Object.assign(Object.create(t),e)}function o_(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=kW("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>o_([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return EW(a,l,()=>ofe(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Jj(a).includes(l)},ownKeys(a){return Jj(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function tp(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:NW(t,r),setContext:i=>tp(t,i,n,r),override:i=>tp(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return EW(i,o,()=>efe(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function NW(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Hu(n)?n:()=>n,isIndexable:Hu(r)?r:()=>r}}const Zde=(t,e)=>t?t+J$(e):e,a_=(t,e)=>Pt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function EW(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function efe(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return Hu(a)&&o.isScriptable(e)&&(a=tfe(e,a,t,n)),Mn(a)&&a.length&&(a=nfe(e,a,t,o.isIndexable)),a_(e,a)&&(a=tp(a,s,i&&i[e],o)),a}function tfe(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),a_(t,l)&&(l=l_(s._scopes,s,t,l)),l}function nfe(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(Pt(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const A=l_(c,s,t,u);e.push(tp(A,i,o&&o[t],a))}}return e}function IW(t,e,n){return Hu(t)?t(e,n):t}const rfe=(t,e)=>t===!0?e:typeof t=="string"?Qu(e,t):void 0;function sfe(t,e,n,r,s){for(const i of e){const o=rfe(n,i);if(o){t.add(o);const a=IW(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function l_(t,e,n,r){const s=e._rootScopes,i=IW(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=Yj(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=Yj(a,o,i,l,r),l===null)?!1:o_(Array.from(a),[""],s,i,()=>ife(e,n,r))}function Yj(t,e,n,r,s){for(;n;)n=sfe(t,e,n,r,s);return n}function ife(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return Mn(s)&&Pt(n)?n:s||{}}function ofe(t,e,n,r){let s;for(const i of e)if(s=kW(Zde(i,t),n),typeof s<"u")return a_(t,s)?l_(n,r,t,s):s}function kW(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Jj(t){let e=t._keys;return e||(e=t._keys=afe(t._scopes)),e}function afe(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}function lfe(t,e,n,r){const{iScale:s}=t,{key:i="r"}=this._parsing,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],o[a]={r:s.parse(Qu(u,i),c)};return o}const cfe=Number.EPSILON||1e-14,np=(t,e)=>e<t.length&&!t[e].skip&&t[e],TW=t=>t==="x"?"y":"x";function ufe(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=LI(i,s),l=LI(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const A=r*c,d=r*u;return{previous:{x:i.x-A*(o.x-s.x),y:i.y-A*(o.y-s.y)},next:{x:i.x+d*(o.x-s.x),y:i.y+d*(o.y-s.y)}}}function Afe(t,e,n){const r=t.length;let s,i,o,a,l,c=np(t,0);for(let u=0;u<r-1;++u)if(l=c,c=np(t,u+1),!(!l||!c)){if(ny(e[u],0,cfe)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=i*o*e[u])}}function dfe(t,e,n="x"){const r=TW(n),s=t.length;let i,o,a,l=np(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=np(t,c+1),!a)continue;const u=a[n],A=a[r];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${r}`]=A-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${r}`]=A+i*e[c])}}function ffe(t,e="x"){const n=TW(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=np(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=np(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?cl(s[o-1])!==cl(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}Afe(t,s,i),dfe(t,i,e)}function E1(t,e,n){return Math.max(Math.min(t,n),e)}function hfe(t,e){let n,r,s,i,o,a=Jl(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&Jl(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=E1(s.cp1x,e.left,e.right),s.cp1y=E1(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=E1(s.cp2x,e.left,e.right),s.cp2y=E1(s.cp2y,e.top,e.bottom)))}function pfe(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")ffe(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=ufe(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&hfe(t,n)}function c_(){return typeof window<"u"&&typeof document<"u"}function u_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Lw(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const iS=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function mfe(t,e){return iS(t).getPropertyValue(e)}const gfe=["top","right","bottom","left"];function Bd(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=gfe[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const yfe=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function xfe(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(yfe(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function HA(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=iS(n),i=s.boxSizing==="border-box",o=Bd(s,"padding"),a=Bd(s,"border","width"),{x:l,y:c,box:u}=xfe(t,n),A=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:h}=e;return i&&(f-=o.width+a.width,h-=o.height+a.height),{x:Math.round((l-A)/f*n.width/r),y:Math.round((c-d)/h*n.height/r)}}function vfe(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&u_(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=iS(i),l=Bd(a,"border","width"),c=Bd(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Lw(a.maxWidth,i,"clientWidth"),s=Lw(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||Pw,maxHeight:s||Pw}}const I1=t=>Math.round(t*10)/10;function bfe(t,e,n,r){const s=iS(t),i=Bd(s,"margin"),o=Lw(s.maxWidth,t,"clientWidth")||Pw,a=Lw(s.maxHeight,t,"clientHeight")||Pw,l=vfe(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const d=Bd(s,"border","width"),f=Bd(s,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=I1(Math.min(c,o,l.maxWidth)),u=I1(Math.min(u,a,l.maxHeight)),c&&!u&&(u=I1(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=I1(Math.floor(u*r))),{width:c,height:u}}function Zj(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const wfe=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};c_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function eL(t,e){const n=mfe(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function zA(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Cfe(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function Sfe(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=zA(t,s,n),a=zA(s,i,n),l=zA(i,e,n),c=zA(o,a,n),u=zA(a,l,n);return zA(c,u,n)}const Bfe=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},Nfe=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Sh(t,e,n){return t?Bfe(e,n):Nfe()}function FW(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function $W(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function _W(t){return t==="angle"?{between:My,compare:Bde,normalize:Fs}:{between:Yl,compare:(e,n)=>e-n,normalize:e=>e}}function tL({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function Efe(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=_W(r),l=e.length;let{start:c,end:u,loop:A}=t,d,f;if(A){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(e[c%l][r]),s,i);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:A,style:t.style}}function OW(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=_W(r),{start:u,end:A,loop:d,style:f}=Efe(t,e,n),h=[];let m=!1,g=null,y,x,v;const b=()=>l(s,v,y)&&a(s,v)!==0,w=()=>a(i,y)===0||l(i,v,y),C=()=>m||b(),B=()=>!m||w();for(let S=u,N=u;S<=A;++S)x=e[S%o],!x.skip&&(y=c(x[r]),y!==v&&(m=l(y,s,i),g===null&&C()&&(g=a(y,s)===0?S:N),g!==null&&B()&&(h.push(tL({start:g,end:S,loop:d,count:o,style:f})),g=null),N=S,v=y));return g!==null&&h.push(tL({start:g,end:A,loop:d,count:o,style:f})),h}function DW(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=OW(r[s],t.points,e);i.length&&n.push(...i)}return n}function Ife(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function kfe(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function Tfe(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=Ife(n,s,i,r);if(r===!0)return nL(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return nL(t,kfe(n,o,l,c),n,e)}function nL(t,e,n,r){return!r||!r.setContext||!n?e:Ffe(t,e,n,r)}function Ffe(t,e,n,r){const s=t._chart.getContext(),i=rL(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,A=e[0].start,d=A;function f(h,m,g,y){const x=a?-1:1;if(h!==m){for(h+=l;n[h%l].skip;)h-=x;for(;n[m%l].skip;)m+=x;h%l!==m%l&&(c.push({start:h%l,end:m%l,loop:g,style:y}),u=y,A=m%l)}}for(const h of e){A=a?A:h.start;let m=n[A%l],g;for(d=A+1;d<=h.end;d++){const y=n[d%l];g=rL(r.setContext(aA(s,{type:"segment",p0:m,p1:y,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),$fe(g,u)&&f(A,d-1,h.loop,u),m=y,u=g}A<d-1&&f(A,d-1,h.loop,u)}return c}function rL(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function $fe(t,e){if(!e)return!1;const n=[],r=function(s,i){return n_(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function k1(t,e,n){return t.options.clip?t[n]:e[n]}function _fe(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:k1(n,e,"left"),right:k1(n,e,"right"),top:k1(r,e,"top"),bottom:k1(r,e,"bottom")}:e}function RW(t,e){const n=e._clip;if(n.disabled)return!1;const r=_fe(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Ofe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=wW.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Pl=new Ofe;const sL="transparent",Dfe={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Kj(t||sL),s=r.valid&&Kj(e||sL);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Rfe{constructor(e,n,r,s){const i=n[r];s=N1([e.to,s,i,e.from]);const o=N1([e.from,i,s]);this._active=!0,this._fn=e.fn||Dfe[e.type||typeof o],this._easing=ry[e.easing]||ry.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=N1([e.to,n,s,e.from]),this._from=N1([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class PW{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Pt(e))return;const n=Object.keys(rr.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!Pt(i))return;const o={};for(const a of n)o[a]=i[a];(Mn(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=Ufe(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&Pfe(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let A=i[c];const d=r.get(c);if(A)if(d&&A.active()){A.update(d,u,a);continue}else A.cancel();if(!d||!d.duration){e[c]=u;continue}i[c]=A=new Rfe(d,e,c,u),s.push(A)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Pl.add(this._chart,r),!0}}function Pfe(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function Ufe(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function iL(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function jfe(t,e,n){if(n===!1)return!1;const r=iL(t,n),s=iL(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function Lfe(t){let e,n,r,s;return Pt(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function UW(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function oL(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],ns(c)&&(i||e===0||cl(e)===cl(c))&&(e+=c)}return!u&&!r.all?0:e}function Mfe(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[i]:t[u]};return a}function YN(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Qfe(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Hfe(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function zfe(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function aL(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function lL(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,u=Qfe(i,o,r),A=e.length;let d;for(let f=0;f<A;++f){const h=e[f],{[l]:m,[c]:g}=h,y=h._stacks||(h._stacks={});d=y[c]=zfe(s,u,m),d[a]=g,d._top=aL(d,o,!0,r.type),d._bottom=aL(d,o,!1,r.type);const x=d._visualValues||(d._visualValues={});x[a]=g}}function JN(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function Vfe(t,e){return aA(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Wfe(t,e,n){return aA(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Jm(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const ZN=t=>t==="reset"||t==="none",cL=(t,e)=>e?t:Object.assign({},t),Gfe=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:UW(n,!0),values:null};class Nd{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=YN(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Jm(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(A,d,f,h)=>A==="x"?d:A==="r"?h:f,i=n.xAxisID=Nt(r.xAxisID,JN(e,"x")),o=n.yAxisID=Nt(r.yAxisID,JN(e,"y")),a=n.rAxisID=Nt(r.rAxisID,JN(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),u=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Vj(this._data,this),e._stacked&&Jm(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Pt(n)){const s=this._cachedMeta;this._data=Mfe(n,s)}else if(r!==n){if(r){Vj(r,this);const s=this._cachedMeta;Jm(s),s._parsed=[]}n&&Object.isExtensible(n)&&kde(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=YN(n.vScale,n),n.stack!==r.stack&&(s=!0,Jm(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(lL(this,n._parsed),n._stacked=YN(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,A,d;if(this._parsing===!1)r._parsed=s,r._sorted=!0,d=s;else{Mn(s[e])?d=this.parseArrayData(r,s,e,n):Pt(s[e])?d=this.parseObjectData(r,s,e,n):d=this.parsePrimitiveData(r,s,e,n);const f=()=>A[a]===null||c&&A[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=A=d[u],l&&(f()&&(l=!1),c=A);r._sorted=l}o&&lL(this,d)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,A=new Array(s);let d,f,h;for(d=0,f=s;d<f;++d)h=d+r,A[d]={[a]:u||i.parse(c[h],h),[l]:o.parse(n[h],h)};return A}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,u,A;for(l=0,c=s;l<c;++l)u=l+r,A=n[u],a[l]={x:i.parse(A[0],u),y:o.parse(A[1],u)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,A,d,f;for(u=0,A=s;u<A;++u)d=u+r,f=n[d],c[u]={x:i.parse(Qu(f,a),d),y:o.parse(Qu(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:UW(s,!0),values:n._stacks[e.axis]._visualValues};return oL(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=oL(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=Gfe(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:A}=Hfe(a);let d,f;function h(){f=s[d];const m=f[a.axis];return!ns(f[e.axis])||u>m||A<m}for(d=0;d<o&&!(!h()&&(this.updateRangeFromParsed(c,e,f,l),i));++d);if(i){for(d=o-1;d>=0;--d)if(!h()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],ns(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Lfe(Nt(this.options.clip,jfe(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const A=s[u];A.hidden||(A.active&&c?o.push(A):A.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=Wfe(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Vfe(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&Ly(r);if(a)return cL(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),A=s?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(rr.elements[e]),h=()=>this.getContext(r,s,n),m=c.resolveNamedOptions(d,f,h,A);return m.$shared&&(m.$shared=l,i[o]=Object.freeze(cL(m,l))),m}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,A=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),A);l=u.createResolver(d,this.getContext(e,r,n))}const c=new PW(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||ZN(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){ZN(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!ZN(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Jm(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ye(Nd,"defaults",{}),Ye(Nd,"datasetElementType",null),Ye(Nd,"dataElementType",null);function Kfe(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let s=0,i=n.length;s<i;s++)r=r.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=bW(r.sort((s,i)=>s-i))}return t._cache.$bar}function Xfe(t){const e=t.iScale,n=Kfe(e,t.type);let r=e._length,s,i,o,a;const l=()=>{o===32767||o===-32768||(Ly(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(s=0,i=n.length;s<i;++s)o=e.getPixelForValue(n[s]),l();for(a=void 0,s=0,i=e.ticks.length;s<i;++s)o=e.getPixelForTick(s),l();return r}function qfe(t,e,n,r){const s=n.barThickness;let i,o;return tn(s)?(i=e.min*n.categoryPercentage,o=n.barPercentage):(i=s*r,o=1),{chunk:i/r,ratio:o,start:e.pixels[t]-i/2}}function Yfe(t,e,n,r){const s=e.pixels,i=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;o===null&&(o=i-(a===null?e.end-e.start:a-i)),a===null&&(a=i+i-o);const c=i-(i-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function Jfe(t,e,n,r){const s=n.parse(t[0],r),i=n.parse(t[1],r),o=Math.min(s,i),a=Math.max(s,i);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:i,min:o,max:a}}function jW(t,e,n,r){return Mn(t)?Jfe(t,e,n,r):e[n.axis]=n.parse(t,r),e}function uL(t,e,n,r){const s=t.iScale,i=t.vScale,o=s.getLabels(),a=s===i,l=[];let c,u,A,d;for(c=n,u=n+r;c<u;++c)d=e[c],A={},A[s.axis]=a||s.parse(o[c],c),l.push(jW(d,A,i,c));return l}function e4(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Zfe(t,e,n){return t!==0?cl(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function ehe(t){let e,n,r,s,i;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:e,top:s,bottom:i}}function the(t,e,n,r){let s=e.borderSkipped;const i={};if(!s){t.borderSkipped=i;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=ehe(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?s=c:(n._bottom||0)===r?s=u:(i[AL(u,o,a,l)]=!0,s=c)),i[AL(s,o,a,l)]=!0,t.borderSkipped=i}function AL(t,e,n,r){return r?(t=nhe(t,e,n),t=dL(t,n,e)):t=dL(t,e,n),t}function nhe(t,e,n){return t===e?n:t===n?e:t}function dL(t,e,n){return t==="start"?e:t==="end"?n:t}function rhe(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class qb extends Nd{parsePrimitiveData(e,n,r,s){return uL(e,n,r,s)}parseArrayData(e,n,r,s){return uL(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:i,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=i.axis==="x"?a:l,u=o.axis==="x"?a:l,A=[];let d,f,h,m;for(d=r,f=r+s;d<f;++d)m=n[d],h={},h[i.axis]=i.parse(Qu(m,c),d),A.push(jW(Qu(m,u),h,o,d));return A}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const i=r._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,i=this.getParsed(e),o=i._custom,a=e4(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const i=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:A,includeOptions:d}=this._getSharedOptions(n,s);for(let f=n;f<n+r;f++){const h=this.getParsed(f),m=i||tn(h[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),g=this._calculateBarIndexPixels(f,u),y=(h._stacks||{})[a.axis],x={horizontal:c,base:m.base,enableBorderRadius:!y||e4(h._custom)||o===y._top||o===y._bottom,x:c?m.head:g.center,y:c?g.center:m.head,height:c?g.size:Math.abs(m.size),width:c?Math.abs(m.size):g.size};d&&(x.options=A||this.resolveDataElementOptions(f,e[f].active?"active":s));const v=x.options||e[f].options;the(x,v,y,o),rhe(x,v,u.ratio),this.updateElement(e[f],f,x,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const A=u._parsed.find(f=>f[r.axis]===l),d=A&&A[u.vScale.axis];if(tn(d)||isNaN(d))return!0};for(const u of s)if(!(n!==void 0&&c(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[Nt(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const s=this._getStacks(e,r),i=n!==void 0?s.indexOf(n):-1;return i===-1?s.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let i,o;for(i=0,o=n.data.length;i<o;++i)s.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const a=e.barThickness;return{min:a||Xfe(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:i,minBarLength:o}}=this,a=i||0,l=this.getParsed(e),c=l._custom,u=e4(c);let A=l[n.axis],d=0,f=r?this.applyStack(n,l,r):A,h,m;f!==A&&(d=f-A,f=A),u&&(A=c.barStart,f=c.barEnd-c.barStart,A!==0&&cl(A)!==cl(c.barEnd)&&(d=0),d+=A);const g=!tn(i)&&!u?i:d;let y=n.getPixelForValue(g);if(this.chart.getDataVisibility(e)?h=n.getPixelForValue(d+f):h=y,m=h-y,Math.abs(m)<o){m=Zfe(m,n,a)*o,A===a&&(y-=m/2);const x=n.getPixelForDecimal(0),v=n.getPixelForDecimal(1),b=Math.min(x,v),w=Math.max(x,v);y=Math.max(Math.min(y,w),b),h=y+m,r&&!u&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(h)-n.getValueForPixel(y))}if(y===n.getPixelForValue(a)){const x=cl(m)*n.getLineWidthForValue(a)/2;y+=x,m-=x}return{size:m,base:y,head:h,center:h+m/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,i=s.skipNull,o=Nt(s.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const u=i?this._getStackCount(e):n.stackCount,A=s.barThickness==="flex"?Yfe(e,n,s,u*c):qfe(e,n,s,u*c),d=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(Nt(d,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+f;a=A.start+A.chunk*h+A.chunk/2,l=Math.min(o,A.chunk*A.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let i=0;for(;i<s;++i)this.getParsed(i)[n.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}Ye(qb,"id","bar"),Ye(qb,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ye(qb,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function she(t,e,n){let r=1,s=1,i=0,o=0;if(e<On){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),A=Math.cos(l),d=Math.sin(l),f=(v,b,w)=>My(v,a,l,!0)?1:Math.max(b,b*n,w,w*n),h=(v,b,w)=>My(v,a,l,!0)?-1:Math.min(b,b*n,w,w*n),m=f(0,c,A),g=f(pr,u,d),y=h(Xt,c,A),x=h(Xt+pr,u,d);r=(m-y)/2,s=(g-x)/2,i=-(m+y)/2,o=-(g+x)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:o}}class Eg extends Nd{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=l=>+r[l];if(Pt(r[e])){const{key:l="value"}=this._parsing;i=c=>+Qu(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)s._parsed[o]=i(o)}}_getRotation(){return rl(this.options.rotation-90)}_getCircumference(){return rl(this.options.circumference)}_getRotationExtents(){let e=On,n=-On;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),o=s._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(fde(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:A}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:h,offsetY:m}=she(A,u,l),g=(r.width-o)/d,y=(r.height-o)/f,x=Math.max(Math.min(g,y)/2,0),v=mW(this.options.radius,x),b=Math.max(v*l,0),w=(v-b)/this._getVisibleDatasetWeightTotal();this.offsetX=h*v,this.offsetY=m*v,s.total=this.calculateTotal(),this.outerRadius=v-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/On)}updateElements(e,n,r,s){const i=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,A=(a.top+a.bottom)/2,d=i&&c.animateScale,f=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:m,includeOptions:g}=this._getSharedOptions(n,s);let y=this._getRotation(),x;for(x=0;x<n;++x)y+=this._circumference(x,i);for(x=n;x<n+r;++x){const v=this._circumference(x,i),b=e[x],w={x:u+this.offsetX,y:A+this.offsetY,startAngle:y,endAngle:y+v,circumference:v,outerRadius:h,innerRadius:f};g&&(w.options=m||this.resolveDataElementOptions(x,b.active?"active":s)),y+=v,this.updateElement(b,x,w,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,s;for(s=0;s<n.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?On*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=r_(n._parsed[e],r.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,i,o,a,l;if(!e){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){o=r.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Nt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ye(Eg,"id","doughnut"),Ye(Eg,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ye(Eg,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ye(Eg,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:s}}=e.legend.options;return n.labels.map((i,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class Yb extends Nd{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,s){return lfe.bind(this)(e,n,r,s)}update(e){const n=this._cachedMeta,r=n.dataset,s=n.data||[],i=n.iScale.getLabels();if(r.points=s,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:i.length===s.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(s,0,s.length,e)}updateElements(e,n,r,s){const i=this._cachedMeta.rScale,o=s==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":s),u=i.getPointPositionForValue(a,this.getParsed(a).r),A=o?i.xCenter:u.x,d=o?i.yCenter:u.y,f={x:A,y:d,angle:u.angle,skip:isNaN(A)||isNaN(d),options:c};this.updateElement(l,a,f,s)}}}Ye(Yb,"id","radar"),Ye(Yb,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Ye(Yb,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});function $A(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class A_{constructor(e){Ye(this,"options");this.options=e||{}}static override(e){Object.assign(A_.prototype,e)}init(){}formats(){return $A()}parse(){return $A()}format(){return $A()}add(){return $A()}diff(){return $A()}startOf(){return $A()}endOf(){return $A()}}var ihe={_date:A_};function ohe(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?Ede:MI;if(r){if(s._sharedOptions){const u=i[0],A=typeof u.getRange=="function"&&u.getRange(e);if(A){const d=c(i,e,n-A),f=c(i,e,n+A);return{lo:d.lo,hi:f.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:A}=s._cachedMeta,{_parsed:d}=t,f=d.slice(0,u.lo+1).reverse().findIndex(m=>!tn(m[A.axis]));u.lo-=Math.max(0,f);const h=d.slice(u.hi).findIndex(m=>!tn(m[A.axis]));u.hi+=Math.max(0,h)}return u}}return{lo:0,hi:i.length-1}}function oS(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:A,hi:d}=ohe(i[a],e,o,s);for(let f=A;f<=d;++f){const h=u[f];h.skip||r(h,c,f)}}}function ahe(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function t4(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||oS(t,n,e,function(a,l,c){!s&&!Jl(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function lhe(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:A}=xW(o,{x:e.x,y:e.y});My(A,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return oS(t,n,e,i),s}function che(t,e,n,r,s,i){let o=[];const a=ahe(n);let l=Number.POSITIVE_INFINITY;function c(u,A,d){const f=u.inRange(e.x,e.y,s);if(r&&!f)return;const h=u.getCenterPoint(s);if(!(!!i||t.isPointInArea(h))&&!f)return;const g=a(e,h);g<l?(o=[{element:u,datasetIndex:A,index:d}],l=g):g===l&&o.push({element:u,datasetIndex:A,index:d})}return oS(t,n,e,c),o}function n4(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?lhe(t,e,n,s):che(t,e,n,r,s,i)}function fL(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return oS(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var uhe={modes:{index(t,e,n,r){const s=HA(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?t4(t,s,i,r,o):n4(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,A=c.data[u];A&&!A.skip&&l.push({element:A,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const s=HA(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?t4(t,s,i,r,o):n4(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const s=HA(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return t4(t,s,i,r,o)},nearest(t,e,n,r){const s=HA(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return n4(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=HA(e,t);return fL(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=HA(e,t);return fL(t,s,"y",n.intersect,r)}}};const LW=["left","top","right","bottom"];function Zm(t,e){return t.filter(n=>n.pos===e)}function hL(t,e){return t.filter(n=>LW.indexOf(n.pos)===-1&&n.box.axis===e)}function eg(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function Ahe(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function dhe(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!LW.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function fhe(t,e){const n=dhe(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=u?u*s:l&&e.availableHeight)}return n}function hhe(t){const e=Ahe(t),n=eg(e.filter(c=>c.box.fullSize),!0),r=eg(Zm(e,"left"),!0),s=eg(Zm(e,"right")),i=eg(Zm(e,"top"),!0),o=eg(Zm(e,"bottom")),a=hL(e,"x"),l=hL(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Zm(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function pL(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function MW(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function phe(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!Pt(s)){n.size&&(t[s]-=n.size);const A=r[n.stack]||{size:0,count:1};A.size=Math.max(A.size,n.horizontal?i.height:i.width),n.size=A.size/A.count,t[s]+=n.size}i.getPadding&&MW(o,i.getPadding());const a=Math.max(0,e.outerWidth-pL(o,t,"left","right")),l=Math.max(0,e.outerHeight-pL(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function mhe(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function ghe(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function Ig(t,e,n,r){const s=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,ghe(a.horizontal,e));const{same:A,other:d}=phe(e,n,a,r);c|=A&&s.length,u=u||d,l.fullSize||s.push(a)}return c&&Ig(s,e,n,r)||u}function T1(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function mL(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const A=e.w*u,d=c.size||l.height;Ly(c.start)&&(o=c.start),l.fullSize?T1(l,s.left,o,n.outerWidth-s.right-s.left,d):T1(l,e.left+c.placed,o,A,d),c.start=o,c.placed+=A,o=l.bottom}else{const A=e.h*u,d=c.size||l.width;Ly(c.start)&&(i=c.start),l.fullSize?T1(l,i,s.top,d,n.outerHeight-s.bottom-s.top):T1(l,i,e.top+c.placed,d,A),c.start=i,c.placed+=A,i=l.right}}e.x=i,e.y=o}var Eo={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=Ls(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=hhe(t.boxes),l=a.vertical,c=a.horizontal;sn(t.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,g)=>g.box.options&&g.box.options.display===!1?m:m+1,0)||1,A=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},s);MW(d,Ls(r));const f=Object.assign({maxPadding:d,w:i,h:o,x:s.left,y:s.top},s),h=fhe(l.concat(c),A);Ig(a.fullSize,f,A,h),Ig(l,f,A,h),Ig(c,f,A,h)&&Ig(l,f,A,h),mhe(f),mL(a.leftAndTop,f,A,h),f.x+=f.w,f.y+=f.h,mL(a.rightAndBottom,f,A,h),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},sn(a.chartArea,m=>{const g=m.box;Object.assign(g,t.chartArea),g.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class QW{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class yhe extends QW{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Jb="$chartjs",xhe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},gL=t=>t===null||t==="";function vhe(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[Jb]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",gL(s)){const i=eL(t,"width");i!==void 0&&(t.width=i)}if(gL(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=eL(t,"height");i!==void 0&&(t.height=i)}return t}const HW=wfe?{passive:!0}:!1;function bhe(t,e,n){t&&t.addEventListener(e,n,HW)}function whe(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,HW)}function Che(t,e){const n=xhe[t.type]||t.type,{x:r,y:s}=HA(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function Mw(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function She(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Mw(a.addedNodes,r),o=o&&!Mw(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function Bhe(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Mw(a.removedNodes,r),o=o&&!Mw(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Hy=new Map;let yL=0;function zW(){const t=window.devicePixelRatio;t!==yL&&(yL=t,Hy.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Nhe(t,e){Hy.size||window.addEventListener("resize",zW),Hy.set(t,e)}function Ehe(t){Hy.delete(t),Hy.size||window.removeEventListener("resize",zW)}function Ihe(t,e,n){const r=t.canvas,s=r&&u_(r);if(!s)return;const i=CW((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(s),Nhe(t,i),o}function r4(t,e,n){n&&n.disconnect(),e==="resize"&&Ehe(t)}function khe(t,e,n){const r=t.canvas,s=CW(i=>{t.ctx!==null&&n(Che(i,t))},t);return bhe(r,e,s),s}class The extends QW{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(vhe(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Jb])return!1;const r=n[Jb].initial;["height","width"].forEach(i=>{const o=r[i];tn(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Jb],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:She,detach:Bhe,resize:Ihe}[n]||khe;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:r4,detach:r4,resize:r4}[n]||whe)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return bfe(e,n,r,s)}isAttached(e){const n=e&&u_(e);return!!(n&&n.isConnected)}}function Fhe(t){return!c_()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?yhe:The}class Na{constructor(){Ye(this,"x");Ye(this,"y");Ye(this,"active",!1);Ye(this,"options");Ye(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Uw(this.x)&&Uw(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}Ye(Na,"defaults",{}),Ye(Na,"defaultRoutes");function $he(t,e){const n=t.options.ticks,r=_he(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?Dhe(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return Rhe(e,c,i,o/s),c;const u=Ohe(i,e,s);if(o>0){let A,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(F1(e,c,u,tn(f)?0:a-f,a),A=0,d=o-1;A<d;A++)F1(e,c,u,i[A],i[A+1]);return F1(e,c,u,l,tn(f)?e.length:l+f),c}return F1(e,c,u),c}function _he(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function Ohe(t,e,n){const r=Phe(t),s=e.length/n;if(!r)return Math.max(s,1);const i=bde(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function Dhe(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function Rhe(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function F1(t,e,n,r,s){const i=Nt(r,0),o=Math.min(Nt(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function Phe(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const Uhe=t=>t==="left"?"right":t==="right"?"left":t,xL=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,vL=(t,e)=>Math.min(e||t,t);function bL(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function jhe(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function Lhe(t,e){sn(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function tg(t){return t.drawTicks?t.tickLength:0}function wL(t,e){if(!t.display)return 0;const n=Mr(t.font,e),r=Ls(t.padding);return(Mn(t.text)?t.text.length:1)*n.lineHeight+r.height}function Mhe(t,e){return aA(t,{scale:e,type:"scale"})}function Qhe(t,e,n){return aA(t,{tick:n,index:e,type:"tick"})}function Hhe(t,e,n){let r=t_(t);return(n&&e!=="right"||!n&&e==="right")&&(r=Uhe(r)),r}function zhe(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let A=0,d,f,h;const m=o-s,g=a-i;if(t.isHorizontal()){if(f=ks(r,i,a),Pt(n)){const y=Object.keys(n)[0],x=n[y];h=u[y].getPixelForValue(x)+m-e}else n==="center"?h=(c.bottom+c.top)/2+m-e:h=xL(t,n,e);d=a-i}else{if(Pt(n)){const y=Object.keys(n)[0],x=n[y];f=u[y].getPixelForValue(x)-g+e}else n==="center"?f=(c.left+c.right)/2-g+e:f=xL(t,n,e);h=ks(r,o,s),A=n==="left"?-pr:pr}return{titleX:f,titleY:h,maxWidth:d,rotation:A}}class qp extends Na{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Ha(e,Number.POSITIVE_INFINITY),n=Ha(n,Number.NEGATIVE_INFINITY),r=Ha(r,Number.POSITIVE_INFINITY),s=Ha(s,Number.NEGATIVE_INFINITY),{min:Ha(e,r),max:Ha(n,s),minDefined:ns(e),maxDefined:ns(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Ha(n,Ha(r,n)),max:Ha(r,Ha(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){wn(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Jde(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?bL(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=$he(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){wn(this.options.afterUpdate,[this])}beforeSetDimensions(){wn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){wn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),wn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){wn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=wn(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){wn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){wn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=vL(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),A=u.widest.width,d=u.highest.height,f=Bi(this.chart.width-A,0,this.maxWidth);a=e.offset?this.maxWidth/r:f/(r-1),A+6>a&&(a=f/(r-(e.offset?.5:1)),l=this.maxHeight-tg(e.grid)-n.padding-wL(e.title,this.chart.options.font),c=Math.sqrt(A*A+d*d),o=Z$(Math.min(Math.asin(Bi((u.highest.height+6)/a,-1,1)),Math.asin(Bi(l/c,-1,1))-Math.asin(Bi(d/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){wn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){wn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=wL(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=tg(i)+l):(e.height=this.maxHeight,e.width=tg(i)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:A,highest:d}=this._getLabelSizes(),f=r.padding*2,h=rl(this.labelRotation),m=Math.cos(h),g=Math.sin(h);if(a){const y=r.mirror?0:g*A.width+m*d.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{const y=r.mirror?0:m*A.width+g*d.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(c,u,g,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,A=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=s*e.width,f=r*n.height):(d=r*e.height,f=s*n.width):i==="start"?f=n.width:i==="end"?d=e.width:i!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-A+o)*this.width/(this.width-A),0)}else{let u=n.height/2,A=e.height/2;i==="start"?(u=0,A=e.height):i==="end"&&(u=n.height,A=0),this.paddingTop=u+o,this.paddingBottom=A+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){wn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)tn(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=bL(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/vL(n,r));let c=0,u=0,A,d,f,h,m,g,y,x,v,b,w;for(A=0;A<n;A+=l){if(h=e[A].label,m=this._resolveTickFontOptions(A),s.font=g=m.string,y=i[g]=i[g]||{data:{},gc:[]},x=m.lineHeight,v=b=0,!tn(h)&&!Mn(h))v=jw(s,y.data,y.gc,v,h),b=x;else if(Mn(h))for(d=0,f=h.length;d<f;++d)w=h[d],!tn(w)&&!Mn(w)&&(v=jw(s,y.data,y.gc,v,w),b+=x);o.push(v),a.push(b),c=Math.max(v,c),u=Math.max(b,u)}Lhe(i,n);const C=o.indexOf(c),B=a.indexOf(u),S=N=>({width:o[N]||0,height:a[N]||0});return{first:S(0),last:S(n-1),widest:S(C),highest:S(B),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Nde(this._alignToPixels?FA(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=Qhe(this.getContext(),e,r))}return this.$context||(this.$context=Mhe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=rl(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),A=this.ticks.length+(l?1:0),d=tg(i),f=[],h=a.setContext(this.getContext()),m=h.display?h.width:0,g=m/2,y=function(L){return FA(r,L,m)};let x,v,b,w,C,B,S,N,k,O,U,P;if(o==="top")x=y(this.bottom),B=this.bottom-d,N=x-g,O=y(e.top)+g,P=e.bottom;else if(o==="bottom")x=y(this.top),O=e.top,P=y(e.bottom)-g,B=x+g,N=this.top+d;else if(o==="left")x=y(this.right),C=this.right-d,S=x-g,k=y(e.left)+g,U=e.right;else if(o==="right")x=y(this.left),k=e.left,U=y(e.right)-g,C=x+g,S=this.left+d;else if(n==="x"){if(o==="center")x=y((e.top+e.bottom)/2+.5);else if(Pt(o)){const L=Object.keys(o)[0],G=o[L];x=y(this.chart.scales[L].getPixelForValue(G))}O=e.top,P=e.bottom,B=x+g,N=B+d}else if(n==="y"){if(o==="center")x=y((e.left+e.right)/2);else if(Pt(o)){const L=Object.keys(o)[0],G=o[L];x=y(this.chart.scales[L].getPixelForValue(G))}C=x-g,S=C-d,k=e.left,U=e.right}const V=Nt(s.ticks.maxTicksLimit,A),W=Math.max(1,Math.ceil(A/V));for(v=0;v<A;v+=W){const L=this.getContext(v),G=i.setContext(L),_=a.setContext(L),j=G.lineWidth,K=G.color,Y=_.dash||[],J=_.dashOffset,ae=G.tickWidth,ue=G.tickColor,le=G.tickBorderDash||[],fe=G.tickBorderDashOffset;b=jhe(this,v,l),b!==void 0&&(w=FA(r,b,j),c?C=S=k=U=w:B=N=O=P=w,f.push({tx1:C,ty1:B,tx2:S,ty2:N,x1:k,y1:O,x2:U,y2:P,width:j,color:K,borderDash:Y,borderDashOffset:J,tickWidth:ae,tickColor:ue,tickBorderDash:le,tickBorderDashOffset:fe}))}return this._ticksLength=A,this._borderValue=x,f}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:A}=i,d=tg(r.grid),f=d+u,h=A?-u:f,m=-rl(this.labelRotation),g=[];let y,x,v,b,w,C,B,S,N,k,O,U,P="middle";if(s==="top")C=this.bottom-h,B=this._getXAxisLabelAlignment();else if(s==="bottom")C=this.top+h,B=this._getXAxisLabelAlignment();else if(s==="left"){const W=this._getYAxisLabelAlignment(d);B=W.textAlign,w=W.x}else if(s==="right"){const W=this._getYAxisLabelAlignment(d);B=W.textAlign,w=W.x}else if(n==="x"){if(s==="center")C=(e.top+e.bottom)/2+f;else if(Pt(s)){const W=Object.keys(s)[0],L=s[W];C=this.chart.scales[W].getPixelForValue(L)+f}B=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")w=(e.left+e.right)/2-f;else if(Pt(s)){const W=Object.keys(s)[0],L=s[W];w=this.chart.scales[W].getPixelForValue(L)}B=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?P="top":l==="end"&&(P="bottom"));const V=this._getLabelSizes();for(y=0,x=a.length;y<x;++y){v=a[y],b=v.label;const W=i.setContext(this.getContext(y));S=this.getPixelForTick(y)+i.labelOffset,N=this._resolveTickFontOptions(y),k=N.lineHeight,O=Mn(b)?b.length:1;const L=O/2,G=W.color,_=W.textStrokeColor,j=W.textStrokeWidth;let K=B;o?(w=S,B==="inner"&&(y===x-1?K=this.options.reverse?"left":"right":y===0?K=this.options.reverse?"right":"left":K="center"),s==="top"?c==="near"||m!==0?U=-O*k+k/2:c==="center"?U=-V.highest.height/2-L*k+k:U=-V.highest.height+k/2:c==="near"||m!==0?U=k/2:c==="center"?U=V.highest.height/2-L*k:U=V.highest.height-O*k,A&&(U*=-1),m!==0&&!W.showLabelBackdrop&&(w+=k/2*Math.sin(m))):(C=S,U=(1-O)*k/2);let Y;if(W.showLabelBackdrop){const J=Ls(W.backdropPadding),ae=V.heights[y],ue=V.widths[y];let le=U-J.top,fe=0-J.left;switch(P){case"middle":le-=ae/2;break;case"bottom":le-=ae;break}switch(B){case"center":fe-=ue/2;break;case"right":fe-=ue;break;case"inner":y===x-1?fe-=ue:y>0&&(fe-=ue/2);break}Y={left:fe,top:le,width:ue+J.width,height:ae+J.height,color:W.backdropColor}}g.push({label:b,font:N,textOffset:U,options:{rotation:m,color:G,strokeColor:_,strokeWidth:j,textAlign:K,textBaseline:P,translation:[w,C],backdrop:Y}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-rl(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+i,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+i,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,A,d;this.isHorizontal()?(c=FA(e,this.left,o)-o/2,u=FA(e,this.right,a)+a/2,A=d=l):(A=FA(e,this.top,o)-o/2,d=FA(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,A),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&rS(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Ld(r,c,0,u,l,a)}s&&sS(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=Mr(r.font),o=Ls(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Pt(n)?(l+=o.bottom,Mn(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:A,rotation:d}=zhe(this,l,n,a);Ld(e,r.text,0,0,i,{color:r.color,maxWidth:A,rotation:d,textAlign:Hhe(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Nt(e.grid&&e.grid.z,-1),s=Nt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==qp.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Mr(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class $1{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;Ghe(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,Vhe(e,o,r),this.override&&rr.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in rr[s]&&(delete rr[s][r],this.override&&delete jd[r])}}function Vhe(t,e,n){const r=jy(Object.create(null),[n?rr.get(n):{},rr.get(e),t.defaults]);rr.set(e,r),t.defaultRoutes&&Whe(e,t.defaultRoutes),t.descriptors&&rr.describe(e,t.descriptors)}function Whe(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");rr.route(i,s,l,a)})}function Ghe(t){return"id"in t&&"defaults"in t}class Khe{constructor(){this.controllers=new $1(Nd,"datasets",!0),this.elements=new $1(Na,"elements"),this.plugins=new $1(Object,"plugins"),this.scales=new $1(qp,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):sn(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=J$(e);wn(r["before"+s],[],r),n[e](r),wn(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var Ga=new Khe;class Xhe{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(wn(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){tn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=Nt(r.options&&r.options.plugins,{}),i=qhe(r);return s===!1&&!n?[]:Jhe(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function qhe(t){const e={},n=[],r=Object.keys(Ga.plugins.items);for(let i=0;i<r.length;i++)n.push(Ga.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function Yhe(t,e){return!e&&t===!1?null:t===!0?{}:t}function Jhe(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=Yhe(r[l],s);c!==null&&i.push({plugin:a,options:Zhe(t.config,{plugin:a,local:n[l]},c,o)})}return i}function Zhe(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function zI(t,e){const n=rr.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function epe(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function tpe(t,e){return t===e?"_index_":"_value_"}function CL(t){if(t==="x"||t==="y"||t==="r")return t}function npe(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function VI(t,...e){if(CL(t))return t;for(const n of e){const r=n.axis||npe(n.position)||t.length>1&&CL(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function SL(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function rpe(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return SL(t,"x",n[0])||SL(t,"y",n[0])}return{}}function spe(t,e){const n=jd[t.type]||{scales:{}},r=e.scales||{},s=zI(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Pt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=VI(o,a,rpe(o,t),rr.scales[a.type]),c=tpe(l,s),u=n.scales||{};i[o]=ty(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||zI(a,e),u=(jd[a]||{}).scales||{};Object.keys(u).forEach(A=>{const d=epe(A,l),f=o[d+"AxisID"]||d;i[f]=i[f]||Object.create(null),ty(i[f],[{axis:d},r[f],u[A]])})}),Object.keys(i).forEach(o=>{const a=i[o];ty(a,[rr.scales[a.type],rr.scale])}),i}function VW(t){const e=t.options||(t.options={});e.plugins=Nt(e.plugins,{}),e.scales=spe(t,e)}function WW(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function ipe(t){return t=t||{},t.data=WW(t.data),VW(t),t}const BL=new Map,GW=new Set;function _1(t,e){let n=BL.get(t);return n||(n=e(),BL.set(t,n),GW.add(n)),n}const ng=(t,e,n)=>{const r=Qu(e,n);r!==void 0&&t.add(r)};class ope{constructor(e){this._config=ipe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=WW(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),VW(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return _1(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return _1(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return _1(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return _1(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(A=>ng(l,e,A))),u.forEach(A=>ng(l,s,A)),u.forEach(A=>ng(l,jd[i]||{},A)),u.forEach(A=>ng(l,rr,A)),u.forEach(A=>ng(l,QI,A))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),GW.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,jd[n]||{},rr.datasets[n]||{},{type:n},rr,QI]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=NL(this._resolverCache,e,s);let l=o;if(lpe(o,n)){i.$shared=!1,r=Hu(r)?r():r;const c=this.createResolver(e,r,a);l=tp(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=NL(this._resolverCache,e,r);return Pt(n)?tp(i,n,void 0,s):i}}function NL(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:o_(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const ape=t=>Pt(t)&&Object.getOwnPropertyNames(t).some(e=>Hu(t[e]));function lpe(t,e){const{isScriptable:n,isIndexable:r}=NW(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(Hu(a)||ape(a))||o&&Mn(a))return!0}return!1}var cpe="4.5.0";const upe=["top","bottom","left","right","chartArea"];function EL(t,e){return t==="top"||t==="bottom"||upe.indexOf(t)===-1&&e==="x"}function IL(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function kL(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),wn(n&&n.onComplete,[t],e)}function Ape(t){const e=t.chart,n=e.options.animation;wn(n&&n.onProgress,[t],e)}function KW(t){return c_()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Zb={},TL=t=>{const e=KW(t);return Object.values(Zb).filter(n=>n.canvas===e).pop()};function dpe(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function fpe(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var zc;let Yp=(zc=class{static register(...e){Ga.add(...e),FL()}static unregister(...e){Ga.remove(...e),FL()}constructor(e,n){const r=this.config=new ope(n),s=KW(e),i=TL(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Fhe(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=dde(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Xhe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Tde(A=>this.update(A),o.resizeDelay||0),this._dataChanges=[],Zb[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Pl.listen(this,"complete",kL),Pl.listen(this,"progress",Ape),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return tn(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ga}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Zj(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return qj(this.canvas,this.ctx),this}stop(){return Pl.stop(this),this}resize(e,n){Pl.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Zj(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),wn(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};sn(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=VI(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),sn(i,o=>{const a=o.options,l=a.id,c=VI(l,a),u=Nt(a.type,o.dtype);(a.position===void 0||EL(a.position,c)!==EL(o.dposition))&&(a.position=o.dposition),s[l]=!0;let A=null;if(l in r&&r[l].type===u)A=r[l];else{const d=Ga.getScale(u);A=new d({id:l,type:u,ctx:this.ctx,chart:this}),r[A.id]=A}A.init(a,e)}),sn(s,(o,a)=>{o||delete r[a]}),sn(r,o=>{Eo.configure(this,o,o.options),Eo.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(IL("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||zI(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Ga.getController(a),{datasetElementType:c,dataElementType:u}=rr.datasets[a];Object.assign(l,{dataElementType:Ga.getElement(u),datasetElementType:c&&Ga.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){sn(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:A}=this.getDatasetMeta(c),d=!s&&i.indexOf(A)===-1;A.buildOrUpdateElements(d),o=Math.max(+A.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||sn(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(IL("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){sn(this.scales,e=>{Eo.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Mj(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;dpe(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!Mj(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Eo.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],sn(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Hu(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Pl.has(this)?this.attached&&!Pl.running(this)&&Pl.start(this):(this.draw(),kL({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=RW(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&rS(n,s),e.controller.draw(),s&&sS(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Jl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=uhe.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=aA(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);Ly(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Pl.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),qj(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Zb[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};sn(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){sn(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},sn(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Dw(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(A=>u.datasetIndex===A.datasetIndex&&u.index===A.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=yde(e),c=fpe(e,this._lastEvent,r,l);r&&(this._lastEvent=null,wn(i.onHover,[e,a,this],this),l&&wn(i.onClick,[e,a,this],this));const u=!Dw(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},Ye(zc,"defaults",rr),Ye(zc,"instances",Zb),Ye(zc,"overrides",jd),Ye(zc,"registry",Ga),Ye(zc,"version",cpe),Ye(zc,"getChart",TL),zc);function FL(){return sn(Yp.instances,t=>t._plugins.invalidate())}function hpe(t,e,n){const{startAngle:r,x:s,y:i,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,A=Math.min(c/o,Fs(r-n));if(t.beginPath(),t.arc(s,i,o-c/2,r+A/2,n-A/2),a>0){const d=Math.min(c/a,Fs(r-n));t.arc(s,i,a+c/2,n-d/2,r+d/2,!0)}else{const d=Math.min(c/2,o*Fs(r-n));if(u==="round")t.arc(s,i,d,n-Xt/2,r+Xt/2,!0);else if(u==="bevel"){const f=2*d*d,h=-f*Math.cos(n+Xt/2)+s,m=-f*Math.sin(n+Xt/2)+i,g=f*Math.cos(r+Xt/2)+s,y=f*Math.sin(r+Xt/2)+i;t.lineTo(h,m),t.lineTo(g,y)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function ppe(t,e,n){const{startAngle:r,pixelMargin:s,x:i,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;t.beginPath(),t.arc(i,o,a,r-c,n+c),l>s?(c=s/l,t.arc(i,o,l,n+c,r-c,!0)):t.arc(i,o,s,n+pr,r-pr),t.closePath(),t.clip()}function mpe(t){return i_(t,["outerStart","outerEnd","innerStart","innerEnd"])}function gpe(t,e,n,r){const s=mpe(t.options.borderRadius),i=(n-e)/2,o=Math.min(i,r*e/2),a=l=>{const c=(n-Math.min(i,l))*r/2;return Bi(l,0,Math.min(i,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Bi(s.innerStart,0,o),innerEnd:Bi(s.innerEnd,0,o)}}function Of(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Qw(t,e,n,r,s,i){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,A=Math.max(e.outerRadius+r+n-c,0),d=u>0?u+r+n+c:0;let f=0;const h=s-l;if(r){const W=u>0?u-r:0,L=A>0?A-r:0,G=(W+L)/2,_=G!==0?h*G/(G+r):h;f=(h-_)/2}const m=Math.max(.001,h*A-n/Xt)/A,g=(h-m)/2,y=l+g+f,x=s-g-f,{outerStart:v,outerEnd:b,innerStart:w,innerEnd:C}=gpe(e,d,A,x-y),B=A-v,S=A-b,N=y+v/B,k=x-b/S,O=d+w,U=d+C,P=y+w/O,V=x-C/U;if(t.beginPath(),i){const W=(N+k)/2;if(t.arc(o,a,A,N,W),t.arc(o,a,A,W,k),b>0){const j=Of(S,k,o,a);t.arc(j.x,j.y,b,k,x+pr)}const L=Of(U,x,o,a);if(t.lineTo(L.x,L.y),C>0){const j=Of(U,V,o,a);t.arc(j.x,j.y,C,x+pr,V+Math.PI)}const G=(x-C/d+(y+w/d))/2;if(t.arc(o,a,d,x-C/d,G,!0),t.arc(o,a,d,G,y+w/d,!0),w>0){const j=Of(O,P,o,a);t.arc(j.x,j.y,w,P+Math.PI,y-pr)}const _=Of(B,y,o,a);if(t.lineTo(_.x,_.y),v>0){const j=Of(B,N,o,a);t.arc(j.x,j.y,v,y-pr,N)}}else{t.moveTo(o,a);const W=Math.cos(N)*A+o,L=Math.sin(N)*A+a;t.lineTo(W,L);const G=Math.cos(k)*A+o,_=Math.sin(k)*A+a;t.lineTo(G,_)}t.closePath()}function ype(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a}=e;let l=e.endAngle;if(i){Qw(t,e,n,r,l,s);for(let c=0;c<i;++c)t.fill();isNaN(a)||(l=o+(a%On||On))}return Qw(t,e,n,r,l,s),t.fill(),l}function xpe(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:A,borderDashOffset:d,borderRadius:f}=l,h=l.borderAlign==="inner";if(!c)return;t.setLineDash(A||[]),t.lineDashOffset=d,h?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let m=e.endAngle;if(i){Qw(t,e,n,r,m,s);for(let g=0;g<i;++g)t.stroke();isNaN(a)||(m=o+(a%On||On))}h&&ppe(t,e,m),l.selfJoin&&m-o>=Xt&&f===0&&u!=="miter"&&hpe(t,e,m),i||(Qw(t,e,n,r,m,s),t.stroke())}class kg extends Na{constructor(n){super();Ye(this,"circumference");Ye(this,"endAngle");Ye(this,"fullCircles");Ye(this,"innerRadius");Ye(this,"outerRadius");Ye(this,"pixelMargin");Ye(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.getProps(["x","y"],s),{angle:o,distance:a}=xW(i,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:A,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=(this.options.spacing+this.options.borderWidth)/2,h=Nt(d,c-l),m=My(o,l,c)&&l!==c,g=h>=On||m,y=Yl(a,u+f,A+f);return g&&y}getCenterPoint(n){const{x:r,y:s,startAngle:i,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,A=(i+o)/2,d=(a+l+u+c)/2;return{x:r+Math.cos(A)*d,y:s+Math.sin(A)*d}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:s}=this,i=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=s>On?Math.floor(s/On):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const c=1-Math.sin(Math.min(Xt,s||0)),u=i*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,ype(n,this,u,o,a),xpe(n,this,u,o,a),n.restore()}}Ye(kg,"id","arc"),Ye(kg,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Ye(kg,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ye(kg,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function XW(t,e,n=e){t.lineCap=Nt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Nt(n.borderDash,e.borderDash)),t.lineDashOffset=Nt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Nt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Nt(n.borderWidth,e.borderWidth),t.strokeStyle=Nt(n.borderColor,e.borderColor)}function vpe(t,e,n){t.lineTo(n.x,n.y)}function bpe(t){return t.stepped?Hde:t.tension||t.cubicInterpolationMode==="monotone"?zde:vpe}function qW(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),u=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function wpe(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=qW(s,n,r),u=bpe(i);let{move:A=!0,reverse:d}=r||{},f,h,m;for(f=0;f<=c;++f)h=s[(a+(d?c-f:f))%o],!h.skip&&(A?(t.moveTo(h.x,h.y),A=!1):u(t,m,h,d,i.stepped),m=h);return l&&(h=s[(a+(d?c:0))%o],u(t,m,h,d,i.stepped)),!!l}function Cpe(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=qW(s,n,r),{move:l=!0,reverse:c}=r||{};let u=0,A=0,d,f,h,m,g,y;const x=b=>(o+(c?a-b:b))%i,v=()=>{m!==g&&(t.lineTo(u,g),t.lineTo(u,m),t.lineTo(u,y))};for(l&&(f=s[x(0)],t.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=s[x(d)],f.skip)continue;const b=f.x,w=f.y,C=b|0;C===h?(w<m?m=w:w>g&&(g=w),u=(A*u+b)/++A):(v(),t.lineTo(b,w),h=C,A=0,m=g=w),y=w}v()}function WI(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Cpe:wpe}function Spe(t){return t.stepped?Cfe:t.tension||t.cubicInterpolationMode==="monotone"?Sfe:zA}function Bpe(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),XW(t,e.options),t.stroke(s)}function Npe(t,e,n,r){const{segments:s,options:i}=e,o=WI(e);for(const a of s)XW(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const Epe=typeof Path2D=="function";function Ipe(t,e,n,r){Epe&&!e.options.segment?Bpe(t,e,n,r):Npe(t,e,n,r)}class sl extends Na{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;pfe(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Tfe(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=DW(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=Spe(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:A,end:d}=o[c],f=i[A],h=i[d];if(f===h){a.push(f);continue}const m=Math.abs((s-f[n])/(h[n]-f[n])),g=l(f,h,m,r.stepped);g[n]=e[n],a.push(g)}return a.length===1?a[0]:a}pathSegment(e,n,r){return WI(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=WI(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),Ipe(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ye(sl,"id","line"),Ye(sl,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ye(sl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ye(sl,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function $L(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class Bh extends Na{constructor(n){super();Ye(this,"parsed");Ye(this,"skip");Ye(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return $L(this,n,"x",r)}inYRange(n,r){return $L(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!Jl(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,HI(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Ye(Bh,"id","point"),Ye(Bh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ye(Bh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function YW(t,e){const{x:n,y:r,base:s,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,A;return t.horizontal?(A=o/2,a=Math.min(n,s),l=Math.max(n,s),c=r-A,u=r+A):(A=i/2,a=n-A,l=n+A,c=Math.min(r,s),u=Math.max(r,s)),{left:a,top:c,right:l,bottom:u}}function fu(t,e,n,r){return t?0:Bi(e,n,r)}function kpe(t,e,n){const r=t.options.borderWidth,s=t.borderSkipped,i=BW(r);return{t:fu(s.top,i.top,0,n),r:fu(s.right,i.right,0,e),b:fu(s.bottom,i.bottom,0,n),l:fu(s.left,i.left,0,e)}}function Tpe(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,i=Sd(s),o=Math.min(e,n),a=t.borderSkipped,l=r||Pt(s);return{topLeft:fu(!l||a.top||a.left,i.topLeft,0,o),topRight:fu(!l||a.top||a.right,i.topRight,0,o),bottomLeft:fu(!l||a.bottom||a.left,i.bottomLeft,0,o),bottomRight:fu(!l||a.bottom||a.right,i.bottomRight,0,o)}}function Fpe(t){const e=YW(t),n=e.right-e.left,r=e.bottom-e.top,s=kpe(t,n/2,r/2),i=Tpe(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:i},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function s4(t,e,n,r){const s=e===null,i=n===null,a=t&&!(s&&i)&&YW(t,r);return a&&(s||Yl(e,a.left,a.right))&&(i||Yl(n,a.top,a.bottom))}function $pe(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function _pe(t,e){t.rect(e.x,e.y,e.w,e.h)}function i4(t,e,n={}){const r=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+i,h:t.h+o,radius:t.radius}}class Nh extends Na{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:i,outer:o}=Fpe(this),a=$pe(o.radius)?Qy:_pe;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),a(e,i4(o,n,i)),e.clip(),a(e,i4(i,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,i4(i,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,r){return s4(this,e,n,r)}inXRange(e,n){return s4(this,e,null,n)}inYRange(e,n){return s4(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:s,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+s)/2:n,y:i?r:(r+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Ye(Nh,"id","bar"),Ye(Nh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ye(Nh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Ope(t,e,n){const r=t.segments,s=t.points,i=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=aS(l,c,s);const u=GI(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const A=DW(e,u);for(const d of A){const f=GI(n,i[d.start],i[d.end],d.loop),h=OW(a,s,f);for(const m of h)o.push({source:m,target:d,start:{[n]:_L(u,f,"start",Math.max)},end:{[n]:_L(u,f,"end",Math.min)}})}}return o}function GI(t,e,n,r){if(r)return;let s=e[t],i=n[t];return t==="angle"&&(s=Fs(s),i=Fs(i)),{property:t,start:s,end:i}}function Dpe(t,e){const{x:n=null,y:r=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=aS(o,a,s);const l=s[o],c=s[a];r!==null?(i.push({x:l.x,y:r}),i.push({x:c.x,y:r})):n!==null&&(i.push({x:n,y:l.y}),i.push({x:n,y:c.y}))}),i}function aS(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function _L(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function JW(t,e){let n=[],r=!1;return Mn(t)?(r=!0,n=t):n=Dpe(t,e),n.length?new sl({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function OL(t){return t&&t.fill!==!1}function Rpe(t,e,n){let s=t[e].fill;const i=[e];let o;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!ns(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function Ppe(t,e,n){const r=Mpe(t);if(Pt(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return ns(s)&&Math.floor(s)===s?Upe(r[0],e,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Upe(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function jpe(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Pt(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function Lpe(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Pt(t)?r=t.value:r=e.getBaseValue(),r}function Mpe(t){const e=t.options,n=e.fill;let r=Nt(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Qpe(t){const{scale:e,index:n,line:r}=t,s=[],i=r.segments,o=r.points,a=Hpe(e,n);a.push(JW({x:null,y:e.bottom},r));for(let l=0;l<i.length;l++){const c=i[l];for(let u=c.start;u<=c.end;u++)zpe(s,o[u],a)}return new sl({points:s,options:{}})}function Hpe(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function zpe(t,e,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:o,last:a,point:l}=Vpe(i,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function Vpe(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const s=r[n],i=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<i.length;c++){const u=i[c],A=o[u.start][n],d=o[u.end][n];if(Yl(s,A,d)){a=s===A,l=s===d;break}}return{first:a,last:l,point:r}}class ZW{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:s,y:i,radius:o}=this;return n=n||{start:0,end:On},e.arc(s,i,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:s}=this,i=e.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function Wpe(t){const{chart:e,fill:n,line:r}=t;if(ns(n))return Gpe(e,n);if(n==="stack")return Qpe(t);if(n==="shape")return!0;const s=Kpe(t);return s instanceof ZW?s:JW(s,r)}function Gpe(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function Kpe(t){return(t.scale||{}).getPointPositionForValue?qpe(t):Xpe(t)}function Xpe(t){const{scale:e={},fill:n}=t,r=jpe(n,e);if(ns(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function qpe(t){const{scale:e,fill:n}=t,r=e.options,s=e.getLabels().length,i=r.reverse?e.max:e.min,o=Lpe(n,e,i),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,i);return new ZW({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function o4(t,e,n){const r=Wpe(e),{chart:s,index:i,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,A=c.backgroundColor,{above:d=A,below:f=A}=u||{},h=s.getDatasetMeta(i),m=RW(s,h);r&&o.points.length&&(rS(t,n),Ype(t,{line:o,target:r,above:d,below:f,area:n,scale:a,axis:l,clip:m}),sS(t))}function Ype(t,e){const{line:n,target:r,above:s,below:i,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=i;i!==s&&(c==="x"?(DL(t,r,o.top),a4(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),DL(t,r,o.bottom)):c==="y"&&(RL(t,r,o.left),a4(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),RL(t,r,o.right),u=s)),a4(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}function DL(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],A=s[aS(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(A.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function RL(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],A=s[aS(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,A.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function a4(t,e){const{line:n,target:r,property:s,color:i,scale:o,clip:a}=e,l=Ope(n,r,s);for(const{source:c,target:u,start:A,end:d}of l){const{style:{backgroundColor:f=i}={}}=c,h=r!==!0;t.save(),t.fillStyle=f,Jpe(t,o,a,h&&GI(s,A,d)),t.beginPath();const m=!!n.pathSegment(t,c);let g;if(h){m?t.closePath():PL(t,r,d,s);const y=!!r.pathSegment(t,u,{move:m,reverse:!0});g=m&&y,g||PL(t,r,A,s)}t.closePath(),t.fill(g?"evenodd":"nonzero"),t.restore()}}function Jpe(t,e,n,r){const s=e.chart.chartArea,{property:i,start:o,end:a}=r||{};if(i==="x"||i==="y"){let l,c,u,A;i==="x"?(l=o,c=s.top,u=a,A=s.bottom):(l=s.left,c=o,u=s.right,A=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),A=Math.min(A,n.bottom)),t.rect(l,c,u-l,A-c),t.clip()}}function PL(t,e,n,r){const s=e.interpolate(n,r);s&&t.lineTo(s.x,s.y)}var eG={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,s=[];let i,o,a,l;for(o=0;o<r;++o)i=t.getDatasetMeta(o),a=i.dataset,l=null,a&&a.options&&a instanceof sl&&(l={visible:t.isDatasetVisible(o),index:o,fill:Ppe(a,o,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=l,s.push(l);for(o=0;o<r;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=Rpe(s,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),r&&a.fill&&o4(t.ctx,a,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;OL(i)&&o4(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!OL(r)||n.drawTime!=="beforeDatasetDraw"||o4(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const UL=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Zpe=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;let jL=class extends Na{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=wn(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=Mr(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=UL(r,i);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let A=e;i.textAlign="left",i.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((h,m)=>{const g=r+n/2+i.measureText(h.text).width;(m===0||c[c.length-1]+g+2*a>o)&&(A+=u,c[c.length-(m>0?0:1)]=0,f+=u,d++),l[m]={left:0,top:f,row:d,width:g,height:s},c[c.length-1]+=g+a}),A}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let A=a,d=0,f=0,h=0,m=0;return this.legendItems.forEach((g,y)=>{const{itemWidth:x,itemHeight:v}=eme(r,n,i,g,s);y>0&&f+v+2*a>u&&(A+=d+a,c.push({width:d,height:f}),h+=d+a,m++,d=f=0),l[y]={left:h,top:f,col:m,width:x,height:v},d=Math.max(d,x),f+=v+a}),A+=d,c.push({width:d,height:f}),A}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=Sh(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=ks(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=ks(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=ks(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=ks(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;rS(e,this),this._draw(),sS(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=rr.color,l=Sh(e.rtl,this.left,this.width),c=Mr(o.font),{padding:u}=o,A=c.size,d=A/2;let f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:h,boxHeight:m,itemHeight:g}=UL(o,A),y=function(C,B,S){if(isNaN(h)||h<=0||isNaN(m)||m<0)return;s.save();const N=Nt(S.lineWidth,1);if(s.fillStyle=Nt(S.fillStyle,a),s.lineCap=Nt(S.lineCap,"butt"),s.lineDashOffset=Nt(S.lineDashOffset,0),s.lineJoin=Nt(S.lineJoin,"miter"),s.lineWidth=N,s.strokeStyle=Nt(S.strokeStyle,a),s.setLineDash(Nt(S.lineDash,[])),o.usePointStyle){const k={radius:m*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:N},O=l.xPlus(C,h/2),U=B+d;SW(s,k,O,U,o.pointStyleWidth&&h)}else{const k=B+Math.max((A-m)/2,0),O=l.leftForLtr(C,h),U=Sd(S.borderRadius);s.beginPath(),Object.values(U).some(P=>P!==0)?Qy(s,{x:O,y:k,w:h,h:m,radius:U}):s.rect(O,k,h,m),s.fill(),N!==0&&s.stroke()}s.restore()},x=function(C,B,S){Ld(s,S.text,C,B+g/2,c,{strikethrough:S.hidden,textAlign:l.textAlign(S.textAlign)})},v=this.isHorizontal(),b=this._computeTitleHeight();v?f={x:ks(i,this.left+u,this.right-r[0]),y:this.top+u+b,line:0}:f={x:this.left+u,y:ks(i,this.top+b+u,this.bottom-n[0].height),line:0},FW(this.ctx,e.textDirection);const w=g+u;this.legendItems.forEach((C,B)=>{s.strokeStyle=C.fontColor,s.fillStyle=C.fontColor;const S=s.measureText(C.text).width,N=l.textAlign(C.textAlign||(C.textAlign=o.textAlign)),k=h+d+S;let O=f.x,U=f.y;l.setWidth(this.width),v?B>0&&O+k+u>this.right&&(U=f.y+=w,f.line++,O=f.x=ks(i,this.left+u,this.right-r[f.line])):B>0&&U+w>this.bottom&&(O=f.x=O+n[f.line].width+u,f.line++,U=f.y=ks(i,this.top+b+u,this.bottom-n[f.line].height));const P=l.x(O);if(y(P,U,C),O=Fde(N,O+h+d,v?O+k:this.right,e.rtl),x(l.x(O),U,C),v)f.x+=k+u;else if(typeof C.text!="string"){const V=c.lineHeight;f.y+=tG(C,V)+u}else f.y+=w}),$W(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Mr(n.font),s=Ls(n.padding);if(!n.display)return;const i=Sh(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let u,A=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,A=ks(e.align,A,this.right-d);else{const h=this.columnSizes.reduce((m,g)=>Math.max(m,g.height),0);u=c+ks(e.align,this.top,this.bottom-h-e.labels.padding-this._computeTitleHeight())}const f=ks(a,A,A+d);o.textAlign=i.textAlign(t_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Ld(o,n.text,f,u,r)}_computeTitleHeight(){const e=this.options.title,n=Mr(e.font),r=Ls(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(Yl(e,this.left,this.right)&&Yl(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],Yl(e,s.left,s.left+s.width)&&Yl(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!rme(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=Zpe(s,r);s&&!i&&wn(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&wn(n.onHover,[e,r,this],this)}else r&&wn(n.onClick,[e,r,this],this)}};function eme(t,e,n,r,s){const i=tme(r,t,e,n),o=nme(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function tme(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function nme(t,e,n){let r=t;return typeof e.text!="string"&&(r=tG(e,n)),r}function tG(t,e){const n=t.text?t.text.length:0;return e*n}function rme(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var d_={id:"legend",_element:jL,start(t,e,n){const r=t.legend=new jL({ctx:t.ctx,options:n,chart:t});Eo.configure(t,r,n),Eo.addBox(t,r)},stop(t){Eo.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Eo.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Ls(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class nG extends Na{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=Mn(r.text)?r.text.length:1;this._padding=Ls(r.padding);const i=s*Mr(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let l=0,c,u,A;return this.isHorizontal()?(u=ks(a,r,i),A=n+e,c=i-r):(o.position==="left"?(u=r+e,A=ks(a,s,n),l=Xt*-.5):(u=i-e,A=ks(a,n,s),l=Xt*.5),c=s-n),{titleX:u,titleY:A,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Mr(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);Ld(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:t_(n.align),textBaseline:"middle",translation:[o,a]})}}function sme(t,e){const n=new nG({ctx:t.ctx,options:e,chart:t});Eo.configure(t,n,e),Eo.addBox(t,n),t.titleBlock=n}var f_={id:"title",_element:nG,start(t,e,n){sme(t,n)},stop(t){const e=t.titleBlock;Eo.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Eo.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Tg={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=LI(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Va(t,e){return e&&(Mn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ul(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function ime(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function LL(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Mr(e.bodyFont),c=Mr(e.titleFont),u=Mr(e.footerFont),A=i.length,d=s.length,f=r.length,h=Ls(e.padding);let m=h.height,g=0,y=r.reduce((b,w)=>b+w.before.length+w.lines.length+w.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,A&&(m+=A*c.lineHeight+(A-1)*e.titleSpacing+e.titleMarginBottom),y){const b=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=f*b+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}d&&(m+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let x=0;const v=function(b){g=Math.max(g,n.measureText(b).width+x)};return n.save(),n.font=c.string,sn(t.title,v),n.font=l.string,sn(t.beforeBody.concat(t.afterBody),v),x=e.displayColors?o+2+e.boxPadding:0,sn(r,b=>{sn(b.before,v),sn(b.lines,v),sn(b.after,v)}),x=0,n.font=u.string,sn(t.footer,v),n.restore(),g+=h.width,{width:g,height:m}}function ome(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function ame(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function lme(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),ame(c,t,e,n)&&(c="center"),c}function ML(t,e,n){const r=n.yAlign||e.yAlign||ome(t,n);return{xAlign:n.xAlign||e.xAlign||lme(t,e,n,r),yAlign:r}}function cme(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function ume(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function QL(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:u,topRight:A,bottomLeft:d,bottomRight:f}=Sd(o);let h=cme(e,a);const m=ume(e,l,c);return l==="center"?a==="left"?h+=c:a==="right"&&(h-=c):a==="left"?h-=Math.max(u,d)+s:a==="right"&&(h+=Math.max(A,f)+s),{x:Bi(h,0,r.width-e.width),y:Bi(m,0,r.height-e.height)}}function O1(t,e,n){const r=Ls(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function HL(t){return Va([],Ul(t))}function Ame(t,e,n){return aA(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function zL(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const rG={beforeTitle:$l,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:$l,beforeBody:$l,beforeLabel:$l,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return tn(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:$l,afterBody:$l,beforeFooter:$l,footer:$l,afterFooter:$l};function di(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?rG[e].call(n,r):s}var $E;let VL=($E=class extends Na{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new PW(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Ame(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=di(r,"beforeTitle",this,e),i=di(r,"title",this,e),o=di(r,"afterTitle",this,e);let a=[];return a=Va(a,Ul(s)),a=Va(a,Ul(i)),a=Va(a,Ul(o)),a}getBeforeBody(e,n){return HL(di(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return sn(e,i=>{const o={before:[],lines:[],after:[]},a=zL(r,i);Va(o.before,Ul(di(a,"beforeLabel",this,i))),Va(o.lines,di(a,"label",this,i)),Va(o.after,Ul(di(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return HL(di(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=di(r,"beforeFooter",this,e),i=di(r,"footer",this,e),o=di(r,"afterFooter",this,e);let a=[];return a=Va(a,Ul(s)),a=Va(a,Ul(i)),a=Va(a,Ul(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(ime(this.chart,n[l]));return e.filter&&(a=a.filter((u,A,d)=>e.filter(u,A,d,r))),e.itemSort&&(a=a.sort((u,A)=>e.itemSort(u,A,r))),sn(a,u=>{const A=zL(e.callbacks,u);s.push(di(A,"labelColor",this,u)),i.push(di(A,"labelPointStyle",this,u)),o.push(di(A,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=Tg[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=LL(this,r),c=Object.assign({},a,l),u=ML(this.chart,r,c),A=QL(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:A.x,y:A.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:A}=Sd(a),{x:d,y:f}=e,{width:h,height:m}=n;let g,y,x,v,b,w;return i==="center"?(b=f+m/2,s==="left"?(g=d,y=g-o,v=b+o,w=b-o):(g=d+h,y=g+o,v=b-o,w=b+o),x=g):(s==="left"?y=d+Math.max(l,u)+o:s==="right"?y=d+h-Math.max(c,A)-o:y=this.caretX,i==="top"?(v=f,b=v-o,g=y-o,x=y+o):(v=f+m,b=v+o,g=y+o,x=y-o),w=v),{x1:g,x2:y,x3:x,y1:v,y2:b,y3:w}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=Sh(r.rtl,this.x,this.width);for(e.x=O1(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Mr(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,u=Mr(i.bodyFont),A=O1(this,"left",i),d=s.x(A),f=l<u.lineHeight?(u.lineHeight-l)/2:0,h=n.y+f;if(i.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},g=s.leftForLtr(d,c)+c/2,y=h+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,HI(e,m,g,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,HI(e,m,g,y)}else{e.lineWidth=Pt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const m=s.leftForLtr(d,c),g=s.leftForLtr(s.xPlus(d,1),c-2),y=Sd(o.borderRadius);Object.values(y).some(x=>x!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Qy(e,{x:m,y:h,w:c,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Qy(e,{x:g,y:h+1,w:c-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(m,h,c,l),e.strokeRect(m,h,c,l),e.fillStyle=o.backgroundColor,e.fillRect(g,h+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,A=Mr(r.bodyFont);let d=A.lineHeight,f=0;const h=Sh(r.rtl,this.x,this.width),m=function(S){n.fillText(S,h.x(e.x+f),e.y+d/2),e.y+=d+i},g=h.textAlign(o);let y,x,v,b,w,C,B;for(n.textAlign=o,n.textBaseline="middle",n.font=A.string,e.x=O1(this,g,r),n.fillStyle=r.bodyColor,sn(this.beforeBody,m),f=a&&g!=="right"?o==="center"?c/2+u:c+2+u:0,b=0,C=s.length;b<C;++b){for(y=s[b],x=this.labelTextColors[b],n.fillStyle=x,sn(y.before,m),v=y.lines,a&&v.length&&(this._drawColorBox(n,e,b,h,r),d=Math.max(A.lineHeight,l)),w=0,B=v.length;w<B;++w)m(v[w]),d=A.lineHeight;sn(y.after,m)}f=0,d=A.lineHeight,sn(this.afterBody,m),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=Sh(r.rtl,this.x,this.width);for(e.x=O1(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Mr(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:A,topRight:d,bottomLeft:f,bottomRight:h}=Sd(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+A,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+u-h),n.quadraticCurveTo(a+c,l+u,a+c-h,l+u),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+A),n.quadraticCurveTo(a,l,a+A,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Tg[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=LL(this,e),l=Object.assign({},o,this._size),c=ML(n,e,l),u=QL(e,l,c,n);(s._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Ls(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),FW(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),$W(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Dw(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!Dw(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Tg[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}},Ye($E,"positioners",Tg),$E);var h_={id:"tooltip",_element:VL,positioners:Tg,afterInit(t,e,n){n&&(t.tooltip=new VL({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:rG},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const dme=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function fme(t,e,n,r){const s=t.indexOf(e);if(s===-1)return dme(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const hme=(t,e)=>t===null?null:Bi(Math.round(t),0,e);function WL(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class zy extends qp{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(tn(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:fme(r,e,Nt(n,e),this._addedLabels),hme(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return WL.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ye(zy,"id","category"),Ye(zy,"defaults",{ticks:{callback:WL}});function pme(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:A,includeBounds:d}=t,f=i||1,h=u-1,{min:m,max:g}=e,y=!tn(o),x=!tn(a),v=!tn(c),b=(g-m)/(A+1);let w=Hj((g-m)/h/f)*f,C,B,S,N;if(w<1e-14&&!y&&!x)return[{value:m},{value:g}];N=Math.ceil(g/w)-Math.floor(m/w),N>h&&(w=Hj(N*w/h/f)*f),tn(l)||(C=Math.pow(10,l),w=Math.ceil(w*C)/C),s==="ticks"?(B=Math.floor(m/w)*w,S=Math.ceil(g/w)*w):(B=m,S=g),y&&x&&i&&Cde((a-o)/i,w/1e3)?(N=Math.round(Math.min((a-o)/w,u)),w=(a-o)/N,B=o,S=a):v?(B=y?o:B,S=x?a:S,N=c-1,w=(S-B)/N):(N=(S-B)/w,ny(N,Math.round(N),w/1e3)?N=Math.round(N):N=Math.ceil(N));const k=Math.max(zj(w),zj(B));C=Math.pow(10,tn(l)?k:l),B=Math.round(B*C)/C,S=Math.round(S*C)/C;let O=0;for(y&&(d&&B!==o?(n.push({value:o}),B<o&&O++,ny(Math.round((B+O*w)*C)/C,o,GL(o,b,t))&&O++):B<o&&O++);O<N;++O){const U=Math.round((B+O*w)*C)/C;if(x&&U>a)break;n.push({value:U})}return x&&d&&S!==a?n.length&&ny(n[n.length-1].value,a,GL(a,b,t))?n[n.length-1].value=a:n.push({value:a}):(!x||S===a)&&n.push({value:S}),n}function GL(t,e,{horizontal:n,minRotation:r}){const s=rl(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class KI extends qp{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return tn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=cl(s),c=cl(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=pme(s,i);return e.bounds==="ticks"&&Sde(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return r_(e,this.chart.options.locale,this.options.ticks.format)}}class Vy extends KI{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ns(e)?e:0,this.max=ns(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=rl(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ye(Vy,"id","linear"),Ye(Vy,"defaults",{ticks:{callback:s_.formatters.numeric}});function XI(t){const e=t.ticks;if(e.display&&t.display){const n=Ls(e.backdropPadding);return Nt(e.font&&e.font.size,rr.font.size)+n.height}return 0}function mme(t,e,n){return n=Mn(n)?n:[n],{w:Qde(t,e.string,n),h:n.length*e.lineHeight}}function KL(t,e,n,r,s){return t===r||t===s?{start:e-n/2,end:e+n/2}:t<r||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function gme(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],s=[],i=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Xt/i:0;for(let l=0;l<i;l++){const c=o.setContext(t.getPointLabelContext(l));s[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+s[l],a),A=Mr(c.font),d=mme(t.ctx,A,t._pointLabels[l]);r[l]=d;const f=Fs(t.getIndexAngle(l)+a),h=Math.round(Z$(f)),m=KL(h,u.x,d.w,0,180),g=KL(h,u.y,d.h,90,270);yme(n,e,f,m,g)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=bme(t,r,s)}function yme(t,e,n,r,s){const i=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/i,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/i,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function xme(t,e,n){const r=t.drawingArea,{extra:s,additionalAngle:i,padding:o,size:a}=n,l=t.getPointPosition(e,r+s+o,i),c=Math.round(Z$(Fs(l.angle+pr))),u=Sme(l.y,a.h,c),A=wme(c),d=Cme(l.x,a.w,A);return{visible:!0,x:l.x,y:u,textAlign:A,left:d,top:u,right:d+a.w,bottom:u+a.h}}function vme(t,e){if(!e)return!0;const{left:n,top:r,right:s,bottom:i}=t;return!(Jl({x:n,y:r},e)||Jl({x:n,y:i},e)||Jl({x:s,y:r},e)||Jl({x:s,y:i},e))}function bme(t,e,n){const r=[],s=t._pointLabels.length,i=t.options,{centerPointLabels:o,display:a}=i.pointLabels,l={extra:XI(i)/2,additionalAngle:o?Xt/s:0};let c;for(let u=0;u<s;u++){l.padding=n[u],l.size=e[u];const A=xme(t,u,l);r.push(A),a==="auto"&&(A.visible=vme(A,c),A.visible&&(c=A))}return r}function wme(t){return t===0||t===180?"center":t<180?"left":"right"}function Cme(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function Sme(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function Bme(t,e,n){const{left:r,top:s,right:i,bottom:o}=n,{backdropColor:a}=e;if(!tn(a)){const l=Sd(e.borderRadius),c=Ls(e.backdropPadding);t.fillStyle=a;const u=r-c.left,A=s-c.top,d=i-r+c.width,f=o-s+c.height;Object.values(l).some(h=>h!==0)?(t.beginPath(),Qy(t,{x:u,y:A,w:d,h:f,radius:l}),t.fill()):t.fillRect(u,A,d,f)}}function Nme(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let s=e-1;s>=0;s--){const i=t._pointLabelItems[s];if(!i.visible)continue;const o=r.setContext(t.getPointLabelContext(s));Bme(n,o,i);const a=Mr(o.font),{x:l,y:c,textAlign:u}=i;Ld(n,t._pointLabels[s],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function sG(t,e,n,r){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,On);else{let i=t.getPointPosition(0,e);s.moveTo(i.x,i.y);for(let o=1;o<r;o++)i=t.getPointPosition(o,e),s.lineTo(i.x,i.y)}}function Eme(t,e,n,r,s){const i=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(i.save(),i.strokeStyle=a,i.lineWidth=l,i.setLineDash(s.dash||[]),i.lineDashOffset=s.dashOffset,i.beginPath(),sG(t,n,o,r),i.closePath(),i.stroke(),i.restore())}function Ime(t,e,n){return aA(t,{label:n,index:e,type:"pointLabel"})}class Ah extends KI{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ls(XI(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=ns(e)&&!isNaN(e)?e:0,this.max=ns(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/XI(this.options))}generateTickLabels(e){KI.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const s=wn(this.options.pointLabels.callback,[n,r],this);return s||s===0?s:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?gme(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,s){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,s))}getIndexAngle(e){const n=On/(this._pointLabels.length||1),r=this.options.startAngle||0;return Fs(e*n+rl(r))}getDistanceFromCenterForValue(e){if(tn(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(tn(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return Ime(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const s=this.getIndexAngle(e)-pr+r;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:s,bottom:i}=this._pointLabelItems[e];return{left:n,top:r,right:s,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),sG(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:s,border:i}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&Nme(this,o),s.display&&this.ticks.forEach((u,A)=>{if(A!==0||A===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(A),f=s.setContext(d),h=i.setContext(d);Eme(this,f,l,o,h)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const u=r.setContext(this.getPointLabelContext(a)),{color:A,lineWidth:d}=u;!d||!A||(e.lineWidth=d,e.strokeStyle=A,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const s=this.getIndexAngle(0);let i,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),u=Mr(c.font);if(i=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const A=Ls(c.backdropPadding);e.fillRect(-o/2-A.left,-i-u.size/2-A.top,o+A.width,u.size+A.height)}Ld(e,a.label,0,-i,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Ye(Ah,"id","radialLinear"),Ye(Ah,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:s_.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Ye(Ah,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ye(Ah,"descriptors",{angleLines:{_fallback:"grid"}});const lS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},bi=Object.keys(lS);function XL(t,e){return t-e}function qL(t,e){if(tn(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),ns(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Uw(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function YL(t,e,n,r){const s=bi.length;for(let i=bi.indexOf(t);i<s-1;++i){const o=lS[bi[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return bi[i]}return bi[s-1]}function kme(t,e,n,r,s){for(let i=bi.length-1;i>=bi.indexOf(n);i--){const o=bi[i];if(lS[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return bi[n?bi.indexOf(n):0]}function Tme(t){for(let e=bi.indexOf(t)+1,n=bi.length;e<n;++e)if(lS[bi[e]].common)return bi[e]}function JL(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=e_(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function Fme(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function ZL(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:Fme(t,r,s,n)}class Hw extends qp{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new ihe._date(e.adapters.date);s.init(n),ty(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:qL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=ns(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=ns(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=Ide(s,i,o);return this._unit=n.unit||(r.autoSkip?YL(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):kme(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Tme(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),ZL(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Bi(n,0,o),r=Bi(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||YL(i.minUnit,n,r,this._getLabelCapacity(n)),a=Nt(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=Uw(l)||l===!0,u={};let A=n,d,f;if(c&&(A=+e.startOf(A,"isoWeek",l)),A=+e.startOf(A,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const h=s.ticks.source==="data"&&this.getDataTimestamps();for(d=A,f=0;d<r;d=+e.add(d,a,o),f++)JL(u,d,h);return(d===r||s.bounds==="ticks"||f===1)&&JL(u,d,h),Object.keys(u).sort(XL).map(m=>+m)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return wn(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],A=c&&a[c],d=r[n],f=c&&A&&d&&d.major;return this._adapter.format(e,s||(f?A:u))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=rl(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,ZL(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(qL(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return bW(e.sort(XL))}}Ye(Hw,"id","time"),Ye(Hw,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function D1(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=MI(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=MI(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class eM extends Hw{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=D1(n,this.min),this._tableRange=D1(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(D1(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return D1(this._table,r*this._tableRange+this._minPos,!0)}}Ye(eM,"id","timeseries"),Ye(eM,"defaults",Hw.defaults);const iG="label";function tM(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function $me(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function oG(t,e){t.labels=e}function aG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:iG;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function _me(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:iG;const n={labels:[],datasets:[]};return oG(n,t.labels),aG(n,t.datasets,e),n}function Ome(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:A,...d}=t,f=Q.useRef(null),h=Q.useRef(null),m=()=>{f.current&&(h.current=new Yp(f.current,{type:o,data:_me(a,i),options:l&&{...l},plugins:c}),tM(e,h.current))},g=()=>{tM(e,null),h.current&&(h.current.destroy(),h.current=null)};return Q.useEffect(()=>{!s&&h.current&&l&&$me(h.current,l)},[s,l]),Q.useEffect(()=>{!s&&h.current&&oG(h.current.config.data,a.labels)},[s,a.labels]),Q.useEffect(()=>{!s&&h.current&&a.datasets&&aG(h.current.config.data,a.datasets,i)},[s,a.datasets]),Q.useEffect(()=>{h.current&&(s?(g(),setTimeout(m)):h.current.update(A))},[s,l,a.labels,a.datasets,A]),Q.useEffect(()=>{h.current&&(g(),setTimeout(m))},[o]),Q.useEffect(()=>(m(),()=>g()),[]),ie.createElement("canvas",{ref:f,role:"img",height:n,width:r,...d},u)}const Dme=Q.forwardRef(Ome);function p_(t,e){return Yp.register(e),Q.forwardRef((n,r)=>ie.createElement(Dme,{...n,ref:r,type:t}))}const zw=p_("bar",qb),lG=p_("radar",Yb),Rme=p_("doughnut",Eg);Yp.register(zy,Vy,Bh,sl,Nh,f_,h_,d_,eG,Ah);const Pme=()=>{var V,W,L,G;const{sessionId:t}=oA(),e=is(),[n,r]=Q.useState(null),[s,i]=Q.useState(!0),[o,a]=Q.useState(null),[l,c]=Q.useState(!1);Q.useEffect(()=>{t&&(async()=>{var j,K;try{const Y=await vt.get(`/api/v1/sessions/${t}/result`);Y.data.success&&r(Y.data.data)}catch(Y){console.error("Fetch error:",Y),a(((K=(j=Y.response)==null?void 0:j.data)==null?void 0:K.message)||"결과를 불러오는 데 실패했습니다.")}finally{i(!1)}})()},[t]);const u=()=>{const _=window.location.href;navigator.clipboard.writeText(_).then(()=>{c(!0),setTimeout(()=>c(!1),3e3)})};if(s)return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-violet-800 mb-4"}),p.jsx("p",{className:"text-lg font-medium text-gray-700",children:"결과를 불러오는 중..."})]})});if(o||!n)return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:p.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full border border-gray-200",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-6xl mb-4",children:"❌"}),p.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"오류 발생"}),p.jsx("p",{className:"text-gray-600 mb-6",children:o||"결과를 찾을 수 없습니다."}),p.jsx("button",{onClick:()=>e("/dashboard"),className:"px-6 py-3 bg-violet-800 text-white rounded-lg hover:bg-violet-800 transition-colors",children:"대시보드로 돌아가기"})]})})});const A=n.result.categoryScores||[],d=((V=A.find(_=>_.category==="vocabulary"))==null?void 0:V.percentage)||0,f=((W=A.find(_=>_.category==="reading"))==null?void 0:W.percentage)||0,h=((L=A.find(_=>_.category==="grammar"))==null?void 0:L.percentage)||0,m=((G=A.find(_=>_.category==="reasoning"))==null?void 0:G.percentage)||0,y=MAe({vocabulary:d,reading:f,grammar:h,reasoning:m}),x={labels:["어휘력","독해력","문법/어법","추론/사고력"],datasets:[{label:"내 점수",data:[d,f,h,m],backgroundColor:"rgba(91, 33, 182, 0.2)",borderColor:"rgb(91, 33, 182)",borderWidth:2,pointBackgroundColor:"rgb(91, 33, 182)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(91, 33, 182)",pointRadius:4,pointHoverRadius:6}]},v={responsive:!0,maintainAspectRatio:!0,animation:{duration:1e3},scales:{r:{beginAtZero:!0,max:100,min:0,ticks:{stepSize:20,font:{size:11},color:"#6b7280",backdropColor:"transparent"},grid:{color:"#e5e7eb",circular:!0},angleLines:{color:"#e5e7eb"},pointLabels:{font:{size:13,weight:"bold"},color:"#374151"}}},plugins:{legend:{display:!1},tooltip:{enabled:!0,callbacks:{label:_=>{var j;return`${((j=_.parsed.r)==null?void 0:j.toFixed(1))||0}%`}}}}},b={labels:["어휘력","독해력","문법/어법","추론/사고력"],datasets:[{label:"점수 (%)",data:[d,f,h,m],backgroundColor:"rgba(91, 33, 182, 0.8)",borderColor:"rgb(91, 33, 182)",borderWidth:1,borderRadius:6}]},w={responsive:!0,maintainAspectRatio:!0,indexAxis:"y",animation:{duration:1e3},scales:{x:{beginAtZero:!0,max:100,min:0,ticks:{callback:_=>`${_}%`,font:{size:11},color:"#6b7280"},grid:{color:"#f3f4f6"}},y:{ticks:{font:{size:12,weight:"bold"},color:"#374151"},grid:{display:!1}}},plugins:{legend:{display:!1},tooltip:{enabled:!0,callbacks:{label:_=>{var j;return`${((j=_.parsed.x)==null?void 0:j.toFixed(1))||0}%`}}}}},C=_=>({vocabulary:"어휘력",reading:"독해력",grammar:"문법/어법",reasoning:"추론/사고력"})[_]||_,B=_=>({1:"최우수 (상위 4%)",2:"우수 (상위 11%)",3:"양호 (상위 23%)",4:"보통 상 (상위 40%)",5:"보통 (중위 50%)",6:"보통 하 (하위 40%)",7:"노력 요함 (하위 23%)",8:"많은 노력 (하위 11%)",9:"특별 지도 (하위 4%)"})[_]||`${_}등급`,S=()=>{const _=[];return d<60&&_.push({title:"어휘 이해의 어려움",description:"새로운 단어를 만났을 때 의미를 파악하기 어렵고, 문장 속 낯선 어휘 때문에 전체 내용을 이해하는 데 막힘을 느낍니다. 이는 학습 자료 이해와 시험 문제 해석에 직접적인 영향을 줍니다."}),f<60&&_.push({title:"긴 글 이해의 어려움",description:"여러 문단으로 이루어진 긴 지문을 읽을 때 앞부분 내용을 잊어버리거나, 글의 전체 흐름을 파악하기 어렵습니다. 교과서나 참고서를 읽을 때 쉽게 지치고 집중력이 떨어질 수 있습니다."}),h<60&&_.push({title:"문장 구조 파악의 어려움",description:"복잡한 문장 구조를 만났을 때 주어와 서술어, 수식 관계를 정확히 파악하기 어렵습니다. 이로 인해 글쓰기에서도 문법적 오류가 자주 발생하고, 자신의 생각을 명확하게 표현하는 데 어려움을 겪을 수 있습니다."}),m<60&&_.push({title:"논리적 사고의 어려움",description:"글에서 직접적으로 드러나지 않은 내용을 추론하거나, 원인과 결과를 연결하여 이해하기 어렵습니다. 수학 문장제나 과학 실험 결과 해석 등에서 어려움을 겪으며, 비판적으로 글을 읽고 판단하는 능력이 부족할 수 있습니다."}),_.length===0&&_.push({title:"균형 잡힌 문해력",description:"전반적으로 양호한 문해력을 보이고 있습니다. 현재 수준을 유지하면서 더 다양한 글을 접하고 깊이 있는 사고를 연습한다면 더욱 향상될 수 있습니다."}),_},N=_=>({reading_motivation:"읽기 동기",writing_motivation:"글쓰기 동기",reading_environment:"독서 환경",reading_habit:"독서 습관",reading_preference:"읽기 선호도",digital_literacy:"디지털 문해력",critical_thinking:"비판적 사고",reading_attitude:"독서 태도"})[_]||_,k=()=>{if(!(n!=null&&n.surveyResponses)||n.surveyResponses.length===0)return null;const _={};return n.surveyResponses.forEach(j=>{const K=parseFloat(j.response);!isNaN(K)&&K>=1&&K<=5&&(_[j.category]||(_[j.category]={sum:0,count:0,average:0}),_[j.category].sum+=K,_[j.category].count+=1)}),Object.keys(_).forEach(j=>{const K=_[j];K.average=K.sum/K.count}),_},O=_=>{const j=[];return Object.entries(_).forEach(([K,Y])=>{const J=Y.average,ae=N(K);let ue="",le="";K==="reading_motivation"?J>=4?(ue="읽기에 대한 흥미와 동기가 매우 높습니다. 스스로 책을 찾아 읽으며 독서를 즐기는 습관이 잘 형성되어 있습니다.",le="다양한 장르의 책을 접하며 읽기 범위를 넓히고, 독후감이나 독서 토론을 통해 깊이 있는 독서를 시도해보세요."):J>=3?(ue="읽기에 대한 기본적인 흥미는 있으나 일관성이 부족합니다. 특정 주제나 상황에서만 읽기 동기가 발생합니다.",le="자신이 좋아하는 주제의 책부터 시작하여 성공 경험을 쌓고, 짧은 시간이라도 매일 읽는 습관을 만들어보세요."):(ue="읽기에 대한 흥미가 낮고 독서를 회피하는 경향이 있습니다. 읽기를 부담스러운 과제로 느끼고 있을 가능성이 높습니다.",le="흥미로운 만화나 그림책부터 시작하여 읽기에 대한 부담을 줄이고, 부모님과 함께 책을 읽으며 즐거운 경험을 만들어보세요."):K==="writing_motivation"?J>=4?(ue="글쓰기에 대한 동기와 자신감이 높습니다. 자신의 생각을 글로 표현하는 것을 즐기며 적극적으로 글쓰기에 참여합니다.",le="다양한 형식의 글쓰기(수필, 논설문, 창작)를 시도하고, 글쓰기 대회나 독후감 공모전 참가를 고려해보세요."):J>=3?(ue="글쓰기에 대한 기본적인 동기는 있으나 어려움을 느끼거나 자신감이 부족합니다.",le="짧은 일기나 메모부터 시작하여 글쓰기 부담을 줄이고, 선생님이나 부모님께 피드백을 받으며 성취감을 쌓아보세요."):(ue="글쓰기에 대한 동기가 매우 낮고 글쓰기를 어렵고 부담스러운 과제로 인식합니다.",le="생각을 그림이나 마인드맵으로 표현하는 것부터 시작하고, 짧은 문장으로 일상을 기록하며 글쓰기에 익숙해지도록 해보세요."):K==="reading_environment"?J>=4?(ue="독서하기에 좋은 환경이 잘 갖춰져 있습니다. 집에 다양한 책이 있고 독서할 시간과 공간이 충분합니다.",le="현재의 독서 환경을 잘 활용하여 정기적인 독서 시간을 만들고, 가족과 함께 독서하는 문화를 만들어보세요."):J>=3?(ue="기본적인 독서 환경은 갖춰져 있으나 개선의 여지가 있습니다.",le="집에 작은 독서 공간을 마련하고, 도서관을 정기적으로 방문하여 다양한 책을 접할 기회를 늘려보세요."):(ue="독서 환경이 부족합니다. 집에 책이 적고 독서할 시간이나 공간이 충분하지 않습니다.",le="학교나 지역 도서관을 적극 활용하고, 전자책이나 오디오북을 통해 독서 접근성을 높여보세요."):K==="reading_habit"?J>=4?(ue="규칙적이고 지속적인 독서 습관이 잘 형성되어 있습니다. 매일 일정한 시간 독서하는 루틴이 있습니다.",le="현재의 독서 습관을 유지하면서, 독서록을 작성하거나 독서 목표를 세워 더욱 체계적으로 독서를 관리해보세요."):J>=3?(ue="간헐적으로 독서하지만 규칙적인 습관이 부족합니다.",le="매일 10-15분씩 짧은 독서 시간을 정하고, 취침 전이나 등교 전 등 특정 시간에 독서하는 습관을 만들어보세요."):(ue="독서 습관이 거의 형성되어 있지 않습니다. 독서를 거의 하지 않거나 매우 불규칙적입니다.",le="하루 5분부터 시작하여 점진적으로 독서 시간을 늘리고, 흥미로운 책을 선택하여 독서에 대한 긍정적 경험을 쌓아보세요."):K==="reading_preference"&&(J>=4?(ue="다양한 장르의 책을 폭넓게 읽으며 독서 취향이 발달되어 있습니다.",le="좋아하는 장르를 더 깊이 파고들거나, 새로운 장르에도 도전하여 독서 폭을 넓혀보세요."):J>=3?(ue="특정 장르나 주제의 책만 선호하는 경향이 있습니다.",le="친구나 선생님의 추천을 받아 다양한 장르의 책을 접해보고, 독서 모임에 참여하여 새로운 책을 발견해보세요."):(ue="읽기 선호도가 매우 제한적이거나 거의 없습니다.",le="만화나 그림책, 잡지 등 부담 없는 읽을거리부터 시작하여 점차 다양한 형태의 글을 접해보세요.")),j.push({category:K,name:ae,score:Math.round(J*10)/10,analysis:ue,recommendation:le})}),j},U=k(),P=U?O(U):null;return p.jsxs("div",{className:"min-h-screen bg-white py-8 px-4",children:[p.jsx("style",{children:`
        @media print {
          /* === 기본 설정 === */
          * {
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
            color-adjust: exact !important;
            box-sizing: border-box !important;
          }

          @page {
            size: A4;
            margin: 15mm;
          }

          html, body {
            margin: 0 !important;
            padding: 0 !important;
            width: 210mm;
            background: white !important;
          }

          body {
            font-size: 10pt;
          }

          /* === 화면 전용 요소 숨김 === */
          .no-print,
          button,
          .fixed,
          nav,
          header:not(.print-header),
          footer:not(.print-footer) {
            display: none !important;
          }

          /* === 페이지 구조 === */
          .print-page-1,
          .print-page-2,
          .print-page-3 {
            width: 100%;
            margin: 0;
            padding: 0;
            page-break-inside: avoid;
            break-inside: avoid;
          }

          .print-page-1,
          .print-page-2 {
            page-break-after: always;
            break-after: page;
          }

          .print-page-3 {
            page-break-after: avoid;
            break-after: avoid;
          }

          /* === 컨테이너 === */
          .max-w-6xl,
          .container {
            max-width: 100% !important;
            width: 100% !important;
            margin: 0 !important;
            padding: 0 !important;
          }

          .space-y-6 {
            gap: 0 !important;
          }

          .space-y-6 > * + * {
            margin-top: 0 !important;
          }

          /* === 카드 스타일 === */
          .bg-white,
          .bg-violet-50,
          .bg-gradient-to-r {
            page-break-inside: avoid;
            break-inside: avoid;
            margin-bottom: 6pt !important;
            padding: 8pt !important;
            border: 0.5pt solid #e5e7eb !important;
            border-radius: 2pt !important;
            box-shadow: none !important;
            background: white !important;
          }

          .bg-violet-50 {
            background: #f5f3ff !important;
            border-color: #c4b5fd !important;
          }

          .rounded-xl,
          .rounded-lg {
            border-radius: 2pt !important;
          }

          .shadow-sm,
          .shadow,
          .shadow-lg {
            box-shadow: none !important;
          }

          /* === 타이포그래피 === */
          h1 {
            font-size: 14pt !important;
            margin-bottom: 6pt !important;
            margin-top: 0 !important;
            page-break-after: avoid;
          }

          h2 {
            font-size: 11pt !important;
            margin-bottom: 4pt !important;
            margin-top: 6pt !important;
            page-break-after: avoid;
          }

          h3 {
            font-size: 9pt !important;
            margin-bottom: 3pt !important;
            margin-top: 4pt !important;
            page-break-after: avoid;
          }

          p, li, span, div {
            font-size: 8.5pt !important;
            line-height: 1.3 !important;
          }

          /* === 레이아웃 === */
          .grid {
            display: grid !important;
            gap: 4pt !important;
            page-break-inside: avoid;
            break-inside: avoid;
            max-width: 100% !important;
          }

          .grid-cols-2 {
            grid-template-columns: 1fr 1fr !important;
          }

          .grid-cols-3 {
            grid-template-columns: 1fr 1fr 1fr !important;
          }

          .grid > * {
            min-width: 0 !important;
            min-height: 0 !important;
            overflow: hidden !important;
          }

          /* === 간격 조정 === */
          .space-y-2 > * + * {
            margin-top: 2pt !important;
          }

          .space-y-3 > * + * {
            margin-top: 3pt !important;
          }

          .space-y-4 > * + * {
            margin-top: 4pt !important;
          }

          .mb-2 {
            margin-bottom: 2pt !important;
          }

          .mb-3 {
            margin-bottom: 3pt !important;
          }

          .mb-4 {
            margin-bottom: 4pt !important;
          }

          .mb-6 {
            margin-bottom: 6pt !important;
          }

          .p-4 {
            padding: 6pt !important;
          }

          .p-6 {
            padding: 8pt !important;
          }

          /* === 차트 최적화 === */
          .chart-container {
            page-break-inside: avoid;
            break-inside: avoid;
          }

          .h-32 {
            height: 100pt !important;
          }

          .h-64 {
            height: 140pt !important;
          }

          canvas {
            max-width: 100% !important;
            max-height: 140pt !important;
            width: auto !important;
            height: auto !important;
            object-fit: contain;
          }

          svg {
            max-width: 100% !important;
            max-height: 120pt !important;
            width: auto !important;
            height: auto !important;
          }

          /* 영역별 분석 차트 높이 증가 */
          .area-analysis-section .h-64 {
            height: 180pt !important;
          }

          .area-analysis-section canvas {
            max-height: 180pt !important;
          }

          /* Pyramid 높이 최적화 */
          .print-page-1 svg {
            max-height: 140pt !important;
          }

          /* === 이모지 크기 === */
          .text-5xl {
            font-size: 24pt !important;
          }

          .text-3xl {
            font-size: 18pt !important;
          }

          .text-2xl {
            font-size: 14pt !important;
          }

          .text-xl {
            font-size: 12pt !important;
          }

          /* === Page 3 최적화 === */
          .print-page-3 .bg-white,
          .print-page-3 .bg-violet-50,
          .print-page-3 .bg-gradient-to-r {
            padding: 4pt !important;
            margin-bottom: 2pt !important;
          }

          .print-page-3 .grid.lg\\:grid-cols-2 {
            grid-template-columns: 1fr 1fr !important;
            gap: 4pt !important;
          }

          /* 독서 태도 섹션 최적화 */
          .print-page-3 h2 {
            font-size: 10pt !important;
            margin-bottom: 3pt !important;
          }

          .print-page-3 h3 {
            font-size: 8pt !important;
            margin-bottom: 2pt !important;
          }

          .print-page-3 p,
          .print-page-3 div {
            font-size: 7.5pt !important;
            line-height: 1.2 !important;
          }

          /* 막대 그래프 최적화 */
          .print-page-3 .h-2 {
            height: 1pt !important;
          }

          /* 분석 카드 간격 축소 */
          .print-page-3 .space-y-3 > * + * {
            margin-top: 2pt !important;
          }

          .print-page-3 .gap-4 {
            gap: 2pt !important;
          }

          /* === 리스트 === */
          ul, ol {
            margin: 2pt 0 !important;
            padding-left: 12pt !important;
          }

          li {
            margin: 1pt 0 !important;
          }

          /* === 색상 보존 === */
          .bg-green-50,
          .bg-red-50,
          .bg-blue-50,
          .bg-yellow-50,
          .bg-purple-50 {
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
        }
      `}),p.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[l&&p.jsx("div",{className:"fixed top-4 right-4 bg-violet-800 text-white px-6 py-3 rounded-lg shadow-lg z-50 no-print",children:"✅ URL이 클립보드에 복사되었습니다!"}),p.jsxs("div",{className:"print-page-1",children:[p.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 personal-info",children:[p.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"문해력 진단 결과"}),p.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"학생 이름"}),p.jsx("div",{className:"student-name text-lg font-semibold text-gray-900",children:n.student.name})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"학년"}),p.jsx("div",{className:"grade-info text-base font-medium text-gray-900",children:n.student.grade?n.student.grade<=6?`초등 ${n.student.grade}학년`:`중등 ${n.student.grade-6}학년`:"미등록"})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"제출 일시"}),p.jsx("div",{className:"text-base font-medium text-gray-900",children:new Date(n.result.completedAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})}),p.jsx("div",{className:"text-sm text-gray-600 mt-1",children:new Date(n.result.completedAt).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!0})})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[p.jsxs("div",{className:"bg-violet-50 rounded-lg p-3 border border-violet-200",children:[p.jsx("div",{className:"text-xs font-medium text-violet-800 mb-1",children:"종합 점수"}),p.jsxs("div",{className:"text-2xl font-bold text-violet-900",children:[n.result.totalScore,"점 ",p.jsxs("span",{className:"text-sm font-normal",children:["/ ",n.result.categoryScores.reduce((_,j)=>_+j.maxScore,0),"점"]})]})]}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[p.jsx("div",{className:"text-xs font-medium text-gray-700 mb-1",children:"종합 등급"}),p.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[n.result.grade,"등급 ",p.jsxs("span",{className:"text-sm font-normal text-gray-600",children:["(",B(n.result.grade),")"]})]})]})]}),p.jsxs("div",{className:"ai-summary",children:[p.jsx("div",{className:"text-sm font-semibold text-gray-800 mb-2",children:"📊 전반적인 결과 요약"}),p.jsx("p",{className:"text-gray-700",children:n.result.aiSummary||"AI 요약 생성 중..."})]})]}),p.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 border border-gray-200",children:[p.jsx("h2",{className:"text-base font-bold text-gray-900 mb-3",children:"등급 분포도"}),p.jsx(HAe,{currentGrade:n.result.grade})]}),p.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 border border-gray-200 area-analysis-section",children:[p.jsx("h2",{className:"text-base font-bold text-gray-900 mb-3",children:"영역별 분석"}),A.length>0?p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-xs font-semibold text-gray-700 mb-2 text-center",children:"종합 분석"}),p.jsx("div",{className:"h-64 flex items-center justify-center",children:x.datasets[0].data.some(_=>_>0)?p.jsx(lG,{data:x,options:{...v,maintainAspectRatio:!0}}):p.jsx("p",{className:"text-gray-500 text-xs",children:"데이터 없음"})})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-xs font-semibold text-gray-700 mb-2 text-center",children:"점수 비교"}),p.jsx("div",{className:"h-64 flex items-center justify-center",children:b.datasets[0].data.some(_=>_>0)?p.jsx(zw,{data:b,options:{...w,maintainAspectRatio:!0}}):p.jsx("p",{className:"text-gray-500 text-xs",children:"데이터 없음"})})]})]}):p.jsx("div",{className:"text-center py-8",children:p.jsx("p",{className:"text-gray-500 text-xs",children:"영역별 데이터가 없습니다."})})]})]}),p.jsxs("div",{className:"print-page-2",children:[p.jsxs("div",{className:"bg-violet-50 rounded-xl shadow-sm p-6 border border-violet-200",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx("span",{className:"text-5xl",children:y.emoji}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl font-bold text-gray-900",children:y.name}),p.jsx("p",{className:"text-sm text-gray-600",children:"내 문해력 유형"})]})]}),p.jsx("p",{className:"text-sm text-gray-700 leading-relaxed mb-4",children:y.description}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[p.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[p.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"💪 강점"}),p.jsx("ul",{className:"space-y-2",children:y.strengths.map((_,j)=>p.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[p.jsx("span",{className:"text-violet-800 mt-0.5",children:"✓"}),p.jsx("span",{children:_})]},j))})]}),p.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[p.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"🎯 개선 영역"}),p.jsx("ul",{className:"space-y-2",children:y.weaknesses.map((_,j)=>p.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[p.jsx("span",{className:"text-gray-500 mt-0.5",children:"•"}),p.jsx("span",{children:_})]},j))})]})]}),p.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[p.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"📚 맞춤 학습 전략"}),p.jsx("div",{className:"space-y-2",children:y.recommendations.map((_,j)=>p.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-700",children:[p.jsxs("span",{className:"text-violet-800 font-semibold",children:[j+1,"."]}),p.jsx("span",{children:_})]},j))})]})]}),p.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[p.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"⚠️ 약점으로 인한 어려움"}),p.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"현재 문해력 수준에서 겪을 수 있는 구체적인 어려움입니다."}),p.jsx("div",{className:"space-y-3",children:S().map((_,j)=>p.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[p.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-2",children:_.title}),p.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:_.description})]},j))})]})]}),p.jsxs("div",{className:"print-page-3",children:[P&&P.length>0&&p.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 page-break",children:[p.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"📝 독서 태도 및 환경 분석"}),p.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"설문 조사 결과를 바탕으로 독서 동기, 습관, 환경을 분석했습니다."}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"영역별 점수 (5점 만점)"}),p.jsx("div",{className:"space-y-3",children:P.map((_,j)=>p.jsxs("div",{children:[p.jsxs("div",{className:"flex justify-between items-center mb-1",children:[p.jsx("span",{className:"text-sm font-medium text-gray-900",children:_.name}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"text-xs text-gray-600",children:[_.score," / 5.0"]}),p.jsx("div",{className:`text-sm font-bold min-w-[50px] text-right ${_.score>=4?"text-green-700":_.score>=3?"text-blue-700":"text-orange-700"}`,children:_.score>=4?"우수":_.score>=3?"양호":"노력"})]})]}),p.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:p.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${_.score>=3?"bg-violet-600":"bg-red-800"}`,style:{width:`${_.score/5*100}%`}})})]},j))})]}),p.jsx("div",{className:"grid grid-cols-1 gap-4",children:P.map((_,j)=>p.jsx("div",{className:"bg-gradient-to-r from-violet-50 to-blue-50 rounded-lg p-4 border border-violet-200",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("span",{className:"text-2xl",children:_.score>=4?"🌟":_.score>=3?"📚":"💪"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-2",children:_.name}),p.jsxs("div",{className:"bg-white rounded p-3 mb-2 border border-gray-200",children:[p.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-1",children:"📊 분석"}),p.jsx("div",{className:"text-xs text-gray-700 leading-relaxed",children:_.analysis})]}),p.jsxs("div",{className:"bg-white rounded p-3 border border-violet-300",children:[p.jsx("div",{className:"text-xs font-semibold text-violet-900 mb-1",children:"💡 맞춤 조언"}),p.jsx("div",{className:"text-xs text-gray-700 leading-relaxed",children:_.recommendation})]})]})]})},j))})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.result.weaknesses.length>0&&p.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[p.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"📈 개선 포인트"}),p.jsx("ul",{className:"space-y-3",children:n.result.weaknesses.map((_,j)=>p.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[p.jsx("span",{className:"text-gray-500 mt-0.5",children:"→"}),p.jsx("span",{children:_})]},j))})]}),n.result.recommendations.length>0&&p.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[p.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"💡 학습 가이드"}),p.jsx("div",{className:"space-y-3",children:n.result.recommendations.map((_,j)=>p.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-700",children:[p.jsx("span",{className:"text-violet-800 font-semibold",children:j+1}),p.jsx("span",{children:_})]},j))})]})]}),n.answers&&n.answers.length>0&&p.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[p.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"✍️ 서술형 피드백"}),p.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"틀린 서술형 문제에 대한 분석입니다."}),p.jsx("div",{className:"space-y-4",children:n.answers.map((_,j)=>p.jsx("div",{className:"bg-violet-50 rounded-lg p-4 border border-violet-200",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("span",{className:"text-2xl",children:"💡"}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"text-sm font-semibold text-gray-900 mb-2",children:["문제 ",_.questionNumber,"번 - ",C(_.question.category)]}),_.question.passage&&p.jsxs("div",{className:"text-xs text-gray-700 mb-2 bg-white rounded p-2 border border-gray-200",children:[p.jsx("span",{className:"font-semibold",children:"지문:"}),p.jsx("p",{className:"mt-1 whitespace-pre-wrap",children:_.question.passage})]}),p.jsxs("div",{className:"text-xs text-gray-700 mb-2 bg-white rounded p-2 border border-gray-200",children:[p.jsx("span",{className:"font-semibold",children:"질문:"})," ",_.question.questionText]}),p.jsxs("div",{className:"text-xs text-gray-700 mb-1",children:[p.jsxs("span",{className:"font-semibold",children:[n.student.name," 학생 답변:"]})," ",_.studentAnswer||"(미응답)"]}),p.jsxs("div",{className:"text-xs text-gray-700 mb-2",children:[p.jsx("span",{className:"font-semibold",children:"정답 예시:"})," ",_.question.correctAnswer]}),_.feedback&&p.jsxs("div",{className:"bg-white rounded p-3 border border-violet-300",children:[p.jsx("div",{className:"text-xs font-semibold text-violet-900 mb-1",children:"선생님 피드백"}),p.jsx("div",{className:"text-xs text-gray-700 leading-relaxed",children:_.feedback.replace(/학생/g,`${n.student.name} 학생`)})]})]})]})},j))})]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4 no-print",children:[p.jsx("button",{onClick:u,className:"px-8 py-3 bg-white text-violet-800 rounded-lg font-semibold hover:bg-violet-50 transition-colors shadow-sm border-2 border-violet-800",children:"🔗 학부모에게 URL 공유"}),p.jsx("button",{onClick:()=>window.print(),className:"px-8 py-3 bg-white text-violet-800 rounded-lg font-semibold hover:bg-violet-50 transition-colors shadow-sm border-2 border-violet-800",children:"📄 인쇄하기"}),p.jsx("button",{onClick:()=>e("/dashboard"),className:"px-8 py-3 bg-violet-800 text-white rounded-lg font-semibold hover:bg-violet-800 transition-colors shadow-sm",children:"대시보드로 돌아가기"})]})]})]})},Ume=()=>{const[t,e]=Q.useState([]),[n,r]=Q.useState(null),[s,i]=Q.useState(!1),[o,a]=Q.useState(!1),[l,c]=Q.useState(!1),[u,A]=Q.useState(!1),[d,f]=Q.useState(""),[h,m]=Q.useState(""),[g,y]=Q.useState({templateCode:"",questionNumber:1,category:"vocabulary",questionType:"choice",questionText:"",passage:"",imageUrl:"",options:["","","",""],correctAnswer:"",points:10,difficulty:"medium",explanation:""});Q.useEffect(()=>{x()},[d,h]);const x=async()=>{try{c(!0);const S={};if(d){const k=parseInt(d);k<=6?S.templateCode=`ELEM${d}-V1`:S.templateCode=`MIDDLE${k-6}-V1`}h&&(S.category=h);const N=await vt.get("/api/v1/admin/questions",{params:{...S,limit:1e3}});e(N.data.data.questions)}catch(S){console.error("문항 조회 실패:",S),alert("문항을 불러오는데 실패했습니다.")}finally{c(!1)}},v=S=>{r(S),i(!0)},b=async()=>{if(n)try{await vt.put(`/api/v1/admin/questions/${n.id}`,n),alert("문항이 수정되었습니다."),i(!1),r(null),x()}catch(S){console.error("문항 수정 실패:",S),alert("문항 수정에 실패했습니다.")}},w=async S=>{var N,k;if(confirm("정말 이 문항을 삭제하시겠습니까?"))try{await vt.delete(`/api/v1/admin/questions/${S}`),alert("문항이 삭제되었습니다."),x()}catch(O){console.error("문항 삭제 실패:",O),alert(((k=(N=O.response)==null?void 0:N.data)==null?void 0:k.message)||"문항 삭제에 실패했습니다.")}},C=async(S,N=!1)=>{var k,O;if(console.log("=== Frontend Image Upload ==="),console.log("File info:",{name:S.name,type:S.type,size:S.size,isEdit:N}),!S.type.match(/^image\/(png|jpeg|jpg)$/)){alert("PNG 또는 JPEG 형식의 이미지만 업로드 가능합니다.");return}if(S.size>5*1024*1024){alert("이미지 크기는 5MB 이하여야 합니다.");return}try{A(!0);const U=new FormData;U.append("image",S),console.log("Sending FormData to /api/v1/admin/questions/upload-image");const P=await vt.post("/api/v1/admin/questions/upload-image",U,{headers:{"Content-Type":"multipart/form-data"}});console.log("Upload response:",P.data);const V=P.data.data.imageUrl;console.log("Image URL received:",V),N&&n?(console.log("Updating selectedQuestion with imageUrl"),r({...n,imageUrl:V})):(console.log("Updating newQuestion with imageUrl"),y({...g,imageUrl:V})),alert(`✅ 이미지가 업로드되었습니다.

이미지 URL: `+V)}catch(U){console.error("이미지 업로드 실패:",U),console.error("Error response:",U.response),alert(((O=(k=U.response)==null?void 0:k.data)==null?void 0:O.message)||"이미지 업로드에 실패했습니다.")}finally{A(!1)}},B=async()=>{var S,N;if(!g.templateCode||!g.questionText){alert("템플릿과 문제 텍스트는 필수 항목입니다.");return}if(g.questionType==="choice"&&g.options&&g.options.filter(O=>O.trim()).length<2){alert("객관식은 최소 2개의 선택지가 필요합니다.");return}try{await vt.post("/api/v1/admin/questions",g),alert("새 문항이 생성되었습니다."),a(!1),y({templateCode:"",questionNumber:1,category:"vocabulary",questionType:"choice",questionText:"",passage:"",imageUrl:"",options:["","","",""],correctAnswer:"",points:10,difficulty:"medium",explanation:""}),x()}catch(k){console.error("문항 생성 실패:",k),alert(((N=(S=k.response)==null?void 0:S.data)==null?void 0:N.message)||"문항 생성에 실패했습니다.")}};return p.jsx("div",{className:"min-h-screen bg-background",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"문항 관리"}),p.jsx("button",{onClick:()=>a(!0),className:"px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium shadow-sm",children:"➕ 새 문항 추가"})]}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 mb-6 border border-border",children:p.jsxs("div",{className:"flex gap-4",children:[p.jsxs("select",{value:d,onChange:S=>f(S.target.value),className:"border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[p.jsx("option",{value:"",children:"전체 학년"}),[1,2,3,4,5,6].map(S=>p.jsxs("option",{value:S,children:["초등 ",S,"학년"]},S)),[7,8,9].map(S=>p.jsxs("option",{value:S,children:["중등 ",S-6,"학년"]},S))]}),p.jsxs("select",{value:h,onChange:S=>m(S.target.value),className:"border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[p.jsx("option",{value:"",children:"전체 영역"}),p.jsx("option",{value:"vocabulary",children:"어휘력"}),p.jsx("option",{value:"reading",children:"독해력"}),p.jsx("option",{value:"grammar",children:"문법/어법"}),p.jsx("option",{value:"reasoning",children:"추론/사고력"})]})]})}),l?p.jsxs("div",{className:"text-center py-12",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),p.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})]}):p.jsxs("div",{className:"bg-card rounded-lg shadow-md border border-border",children:[p.jsx("div",{className:"px-6 py-3 bg-muted/50 border-b border-border",children:p.jsxs("p",{className:"text-sm text-muted-foreground",children:["전체 ",p.jsx("span",{className:"font-bold text-primary",children:t.length}),"개의 문항"]})}),p.jsx("div",{className:"overflow-auto max-h-[calc(100vh-350px)]",children:p.jsxs("table",{className:"min-w-full divide-y divide-border",children:[p.jsx("thead",{className:"bg-muted sticky top-0 z-10",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"학년"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"문항번호"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"영역"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"문제"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"난이도"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"작업"})]})}),p.jsx("tbody",{className:"bg-card divide-y divide-border",children:t.map(S=>p.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:[S.template.grade,"학년"]}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:S.questionNumber}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:S.category}),p.jsx("td",{className:"px-6 py-4",children:p.jsx("div",{className:"max-w-md truncate text-sm text-card-foreground",children:S.questionText})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${S.difficulty==="easy"?"bg-chart-1/20 text-chart-1":S.difficulty==="medium"?"bg-chart-3/20 text-chart-3":"bg-destructive/20 text-destructive"}`,children:S.difficulty==="easy"?"쉬움":S.difficulty==="medium"?"보통":"어려움"})}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[p.jsx("button",{onClick:()=>v(S),className:"text-primary hover:text-primary/80 font-medium mr-4 transition-colors",children:"수정"}),p.jsx("button",{onClick:()=>w(S.id),className:"text-destructive hover:text-destructive/80 font-medium transition-colors",children:"삭제"})]})]},S.id))})]})})]}),s&&n&&p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-card rounded-lg p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-xl border border-border",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6 text-foreground",children:"문항 수정"}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"문제 번호"}),p.jsx("input",{type:"number",value:n.questionNumber,onChange:S=>r({...n,questionNumber:parseInt(S.target.value)}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"문제 텍스트"}),p.jsx("textarea",{value:n.questionText,onChange:S=>r({...n,questionText:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-3 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",rows:3})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"지문 (선택)"}),p.jsx("textarea",{value:n.passage||"",onChange:S=>r({...n,passage:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-3 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",rows:3})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"이미지 (선택)"}),p.jsxs("div",{className:"space-y-3",children:[n.imageUrl&&p.jsxs("div",{className:"relative inline-block",children:[p.jsx("img",{src:n.imageUrl.startsWith("http")?n.imageUrl:`https://literacy-backend-mdbn.onrender.com${n.imageUrl}`,alt:"문제 이미지",className:"max-w-md max-h-64 rounded-lg border border-border",onError:S=>{console.error("이미지 로드 실패:",n.imageUrl),S.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect fill="%23eee" width="200" height="200"/><text x="50%" y="50%" text-anchor="middle" dy=".3em" fill="%23999">이미지 없음</text></svg>'}}),p.jsx("button",{onClick:()=>r({...n,imageUrl:""}),className:"absolute top-2 right-2 bg-destructive text-destructive-foreground rounded-full p-2 hover:bg-destructive/90 transition-colors shadow-md",children:"✕"})]}),p.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:S=>{var k;const N=(k=S.target.files)==null?void 0:k[0];N&&C(N,!0)},disabled:u,className:"block w-full text-sm text-muted-foreground file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-primary file:text-primary-foreground hover:file:bg-primary/90 file:cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),u&&p.jsx("p",{className:"text-sm text-muted-foreground",children:"이미지 업로드 중..."}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG 또는 JPEG 형식, 최대 5MB"})]})]}),n.questionType==="choice"&&n.options&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-3",children:"선택지"}),p.jsx("div",{className:"space-y-3",children:Array.isArray(n.options)&&n.options.map((S,N)=>p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("span",{className:"font-medium text-muted-foreground w-8",children:[N+1,"."]}),p.jsx("input",{type:"text",value:typeof S=="object"?S.text:S,onChange:k=>{const O=[...n.options];typeof O[N]=="object"?O[N]={...O[N],text:k.target.value}:O[N]=k.target.value,r({...n,options:O})},className:"flex-1 border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:`선택지 ${N+1}`})]},N))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"정답"}),p.jsx("input",{type:"text",value:n.correctAnswer,onChange:S=>r({...n,correctAnswer:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),p.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"카테고리"}),p.jsxs("select",{value:n.category,onChange:S=>r({...n,category:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[p.jsx("option",{value:"vocabulary",children:"어휘력"}),p.jsx("option",{value:"reading",children:"독해력"}),p.jsx("option",{value:"grammar",children:"문법/어법"}),p.jsx("option",{value:"reasoning",children:"추론/사고력"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"난이도"}),p.jsxs("select",{value:n.difficulty,onChange:S=>r({...n,difficulty:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[p.jsx("option",{value:"easy",children:"쉬움"}),p.jsx("option",{value:"medium",children:"보통"}),p.jsx("option",{value:"hard",children:"어려움"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"배점"}),p.jsx("input",{type:"number",value:n.points,onChange:S=>r({...n,points:parseInt(S.target.value)}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"해설"}),p.jsx("textarea",{value:n.explanation||"",onChange:S=>r({...n,explanation:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-3 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",rows:3})]})]}),p.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[p.jsx("button",{onClick:()=>{i(!1),r(null)},className:"px-6 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-foreground font-medium",children:"취소"}),p.jsx("button",{onClick:b,className:"px-6 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium shadow-sm",children:"저장"})]})]})}),o&&p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-card rounded-lg p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-xl border border-border",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6 text-foreground",children:"새 문항 추가"}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"템플릿 코드 *"}),p.jsxs("select",{value:g.templateCode,onChange:S=>y({...g,templateCode:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[p.jsx("option",{value:"",children:"템플릿 선택"}),[1,2,3,4,5,6].map(S=>p.jsxs("option",{value:`ELEM${S}-V1`,children:["초등 ",S,"학년 (ELEM",S,"-V1)"]},`elem-${S}`)),[7,8,9].map(S=>p.jsxs("option",{value:`MIDDLE${S-6}-V1`,children:["중등 ",S-6,"학년 (MIDDLE",S-6,"-V1)"]},`middle-${S}`))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"문제 번호 *"}),p.jsx("input",{type:"number",value:g.questionNumber,onChange:S=>y({...g,questionNumber:parseInt(S.target.value)}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"영역 *"}),p.jsxs("select",{value:g.category,onChange:S=>y({...g,category:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[p.jsx("option",{value:"vocabulary",children:"어휘력"}),p.jsx("option",{value:"reading",children:"독해력"}),p.jsx("option",{value:"grammar",children:"문법/어법"}),p.jsx("option",{value:"reasoning",children:"추론/사고력"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"문제 유형 *"}),p.jsxs("select",{value:g.questionType,onChange:S=>y({...g,questionType:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[p.jsx("option",{value:"choice",children:"객관식"}),p.jsx("option",{value:"short_answer",children:"주관식"}),p.jsx("option",{value:"essay",children:"서술형"}),p.jsx("option",{value:"likert_scale",children:"리커트 척도"})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"문제 텍스트 *"}),p.jsx("textarea",{value:g.questionText,onChange:S=>y({...g,questionText:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-3 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",rows:3})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"지문 (선택)"}),p.jsx("textarea",{value:g.passage||"",onChange:S=>y({...g,passage:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-3 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",rows:3})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"이미지 (선택)"}),p.jsxs("div",{className:"space-y-3",children:[g.imageUrl&&p.jsxs("div",{className:"relative inline-block",children:[p.jsx("img",{src:g.imageUrl.startsWith("http")?g.imageUrl:`https://literacy-backend-mdbn.onrender.com${g.imageUrl}`,alt:"문제 이미지",className:"max-w-md max-h-64 rounded-lg border border-border",onError:S=>{console.error("이미지 로드 실패:",g.imageUrl),S.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect fill="%23eee" width="200" height="200"/><text x="50%" y="50%" text-anchor="middle" dy=".3em" fill="%23999">이미지 없음</text></svg>'}}),p.jsx("button",{onClick:()=>y({...g,imageUrl:""}),className:"absolute top-2 right-2 bg-destructive text-destructive-foreground rounded-full p-2 hover:bg-destructive/90 transition-colors shadow-md",children:"✕"})]}),p.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:S=>{var k;const N=(k=S.target.files)==null?void 0:k[0];N&&C(N,!1)},disabled:u,className:"block w-full text-sm text-muted-foreground file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-primary file:text-primary-foreground hover:file:bg-primary/90 file:cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),u&&p.jsx("p",{className:"text-sm text-muted-foreground",children:"이미지 업로드 중..."}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG 또는 JPEG 형식, 최대 5MB"})]})]}),g.questionType==="choice"&&g.options&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-3",children:"선택지 *"}),p.jsx("div",{className:"space-y-3",children:g.options.map((S,N)=>p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("span",{className:"font-medium text-muted-foreground w-8",children:[N+1,"."]}),p.jsx("input",{type:"text",value:S,onChange:k=>{const O=[...g.options||[]];O[N]=k.target.value,y({...g,options:O})},className:"flex-1 border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:`선택지 ${N+1}`})]},N))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"정답 *"}),p.jsx("input",{type:"text",value:g.correctAnswer,onChange:S=>y({...g,correctAnswer:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"객관식은 선택지 번호 (1, 2, 3...), 주관식/서술형은 모범답안"})]}),p.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"난이도 *"}),p.jsxs("select",{value:g.difficulty,onChange:S=>y({...g,difficulty:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[p.jsx("option",{value:"easy",children:"쉬움"}),p.jsx("option",{value:"medium",children:"보통"}),p.jsx("option",{value:"hard",children:"어려움"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"배점 *"}),p.jsx("input",{type:"number",value:g.points,onChange:S=>y({...g,points:parseInt(S.target.value)}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),p.jsx("div",{})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"해설 (선택)"}),p.jsx("textarea",{value:g.explanation||"",onChange:S=>y({...g,explanation:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-3 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",rows:3})]})]}),p.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[p.jsx("button",{onClick:()=>{a(!1),y({templateCode:"",questionNumber:1,category:"vocabulary",questionType:"choice",questionText:"",passage:"",imageUrl:"",options:["","","",""],correctAnswer:"",points:10,difficulty:"medium",explanation:""})},className:"px-6 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-foreground font-medium",children:"취소"}),p.jsx("button",{onClick:B,className:"px-6 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium shadow-sm",children:"생성"})]})]})})]})})};Yp.register(zy,Vy,Nh,sl,Bh,f_,h_,d_);const jme=()=>{const[t,e]=Q.useState([]),[n,r]=Q.useState([]),[s,i]=Q.useState(!0),[o,a]=Q.useState("all"),[l,c]=Q.useState("all"),[u,A]=Q.useState("correctRate"),[d,f]=Q.useState("asc"),[h,m]=Q.useState(null),[g,y]=Q.useState(!1);Q.useEffect(()=>{x()},[]);const x=async()=>{var S,N;try{i(!0);const[k,O]=await Promise.all([vt.get("/api/v1/admin/question-analytics"),vt.get("/api/v1/admin/question-analytics/templates")]);console.log("Questions response:",k.data),console.log("Templates response:",O.data),e(k.data.data||[]),r(O.data.data||[])}catch(k){console.error("Failed to fetch analytics:",k),console.error("Error details:",(S=k.response)==null?void 0:S.data),console.error("Error status:",(N=k.response)==null?void 0:N.status),e([]),r([]),alert("데이터를 불러오는데 실패했습니다. 콘솔을 확인해주세요.")}finally{i(!1)}},v=S=>{const N={excellent:{bg:"bg-green-100",text:"text-green-800",label:"우수"},good:{bg:"bg-blue-100",text:"text-blue-800",label:"양호"},review:{bg:"bg-yellow-100",text:"text-yellow-800",label:"검토"},revise:{bg:"bg-red-100",text:"text-red-800",label:"수정필요"},insufficient:{bg:"bg-gray-100",text:"text-gray-800",label:"응시수 부족"}},k=N[S]||N.good;return p.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k.bg} ${k.text}`,children:k.label})},b=S=>({vocabulary:"어휘력",reading:"독해력",grammar:"문법/어법",reasoning:"추론/사고력"})[S]||S,w=t.filter(S=>o==="all"||S.templateCode===o).filter(S=>l==="all"||S.qualityFlag===l).sort((S,N)=>{let k,O;return u==="attempts"?(k=S.totalAttempts,O=N.totalAttempts):u==="correctRate"?(k=S.correctRate,O=N.correctRate):(k=S.discrimination,O=N.discrimination),d==="asc"?k-O:O-k}),C={excellent:0,good:0,review:0,revise:0,insufficient:0};t.forEach(S=>{C[S.qualityFlag]++});const B={labels:["우수","양호","검토","수정필요","응시수 부족"],datasets:[{label:"문항 수",data:[C.excellent,C.good,C.review,C.revise,C.insufficient],backgroundColor:["#10b981","#3b82f6","#f59e0b","#ef4444","#9ca3af"]}]};return s?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),p.jsx("div",{className:"text-xl text-muted-foreground",children:"데이터 로딩 중..."})]})}):p.jsxs("div",{className:"min-h-screen bg-background",children:[p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p.jsxs("div",{className:"mb-8",children:[p.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"📊 문항 품질 분석"}),p.jsx("p",{className:"text-muted-foreground",children:"문항별 통계 데이터를 기반으로 품질을 분석하고 개선점을 확인하세요."})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[p.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:[p.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"전체 문항 수"}),p.jsx("div",{className:"text-3xl font-bold text-foreground",children:t.length})]}),p.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:[p.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"평균 정답률"}),p.jsxs("div",{className:"text-3xl font-bold text-chart-1",children:[t.length>0?(t.reduce((S,N)=>S+N.correctRate,0)/t.length).toFixed(1):0,"%"]})]}),p.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:[p.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"평균 변별도"}),p.jsx("div",{className:"text-3xl font-bold text-chart-2",children:t.length>0?(t.reduce((S,N)=>S+N.discrimination,0)/t.length).toFixed(2):0})]}),p.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:[p.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"수정 필요"}),p.jsx("div",{className:"text-3xl font-bold text-destructive",children:t.filter(S=>S.qualityFlag==="revise").length})]})]}),p.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border mb-8",children:[p.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"품질 분포"}),p.jsx("div",{className:"h-64",children:p.jsx(zw,{data:B,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})})]}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-4 sm:p-6 border border-border mb-6",children:p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"테스트 템플릿"}),p.jsxs("select",{value:o,onChange:S=>a(S.target.value),className:"w-full border border-border rounded-lg px-3 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[p.jsx("option",{value:"all",children:"전체"}),n.map(S=>p.jsx("option",{value:S.templateCode,children:S.title},S.templateCode))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"품질 필터"}),p.jsxs("select",{value:l,onChange:S=>c(S.target.value),className:"w-full border border-border rounded-lg px-3 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[p.jsx("option",{value:"all",children:"전체"}),p.jsx("option",{value:"excellent",children:"우수"}),p.jsx("option",{value:"good",children:"양호"}),p.jsx("option",{value:"review",children:"검토"}),p.jsx("option",{value:"revise",children:"수정필요"}),p.jsx("option",{value:"insufficient",children:"응시수 부족"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"정렬 기준"}),p.jsxs("select",{value:u,onChange:S=>A(S.target.value),className:"w-full border border-border rounded-lg px-3 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[p.jsx("option",{value:"correctRate",children:"정답률"}),p.jsx("option",{value:"discrimination",children:"변별도"}),p.jsx("option",{value:"attempts",children:"응시 횟수"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"정렬 순서"}),p.jsxs("select",{value:d,onChange:S=>f(S.target.value),className:"w-full border border-border rounded-lg px-3 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[p.jsx("option",{value:"asc",children:"오름차순"}),p.jsx("option",{value:"desc",children:"내림차순"})]})]})]})}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm border border-border overflow-hidden",children:p.jsx("div",{className:"overflow-x-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:p.jsxs("table",{className:"min-w-full divide-y divide-border",style:{minWidth:"800px"},children:[p.jsx("thead",{className:"bg-muted",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"문항"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"내용"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"영역"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"응시수"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"정답률"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"변별도"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"품질"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"액션"})]})}),p.jsx("tbody",{className:"bg-card divide-y divide-border",children:w.map(S=>p.jsxs("tr",{className:"hover:bg-muted/50",children:[p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-foreground",children:["#",S.questionNumber]}),p.jsx("td",{className:"px-6 py-4 text-sm text-foreground max-w-md truncate",children:S.questionText}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-foreground",children:b(S.category)}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-foreground",children:[S.totalAttempts,"회"]}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-foreground",children:p.jsx("div",{className:"flex items-center gap-2",children:p.jsxs("span",{className:`font-semibold ${S.correctRate>=70?"text-green-600":S.correctRate>=40?"text-yellow-600":"text-red-600"}`,children:[S.correctRate.toFixed(1),"%"]})})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-foreground",children:S.totalAttempts<30?p.jsx("span",{className:"text-gray-500 text-xs",children:"(응시수 부족)"}):p.jsx("span",{className:`font-semibold ${S.discrimination>=.4?"text-green-600":S.discrimination>=.2?"text-yellow-600":"text-red-600"}`,children:S.discrimination.toFixed(2)})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v(S.qualityFlag)}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:p.jsx("button",{onClick:()=>{m(S),y(!0)},className:"text-primary hover:text-primary/80 font-medium",children:"상세보기"})})]},S.id))})]})})}),p.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"📖 품질 지표 설명"}),p.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[p.jsxs("div",{children:[p.jsx("strong",{children:"정답률:"})," 해당 문항을 맞춘 학생의 비율. 90% 이상이면 너무 쉽고, 10% 이하면 너무 어렵습니다."]}),p.jsxs("div",{children:[p.jsx("strong",{children:"변별도:"})," 상위권과 하위권 학생의 정답률 차이. 0.4 이상이면 우수, 0.2 미만이면 변별력이 낮습니다."]}),p.jsxs("div",{children:[p.jsx("strong",{children:"품질 플래그:"}),p.jsxs("ul",{className:"ml-6 mt-1 space-y-1",children:[p.jsx("li",{children:"• 우수: 정답률 40-80%, 변별도 0.4 이상"}),p.jsx("li",{children:"• 양호: 정답률 30-90%, 변별도 0.2 이상"}),p.jsx("li",{children:"• 검토: 정답률이 너무 높거나(90% 이상) 낮음(30% 이하)"}),p.jsx("li",{children:"• 수정필요: 변별도 0.2 미만 또는 극단적 정답률(10% 이하, 95% 이상)"})]})]})]})]})]}),g&&h&&p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:p.jsxs("div",{className:"bg-card rounded-lg shadow-xl max-w-4xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"sticky top-0 bg-card border-b border-border px-4 sm:px-6 py-3 sm:py-4 flex items-center justify-between",children:[p.jsxs("h2",{className:"text-lg sm:text-2xl font-bold text-foreground",children:["문항 #",h.questionNumber," 상세"]}),p.jsx("button",{onClick:()=>y(!1),className:"text-muted-foreground hover:text-foreground text-2xl",children:"×"})]}),p.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[p.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[p.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"문항 내용"}),p.jsx("p",{className:"text-foreground",children:h.questionText}),p.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm text-muted-foreground",children:[p.jsxs("span",{children:["영역: ",b(h.category)]}),p.jsxs("span",{children:["난이도: ",h.difficulty]}),p.jsxs("span",{children:["템플릿: ",h.templateTitle]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[p.jsx("div",{className:"text-sm text-blue-600 mb-1",children:"총 응시 횟수"}),p.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[h.totalAttempts,"회"]})]}),p.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[p.jsx("div",{className:"text-sm text-green-600 mb-1",children:"정답률"}),p.jsxs("div",{className:"text-2xl font-bold text-green-900",children:[h.correctRate.toFixed(1),"%"]}),p.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[h.correctAttempts,"/",h.totalAttempts," 정답"]})]}),p.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[p.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"변별도"}),p.jsx("div",{className:"text-2xl font-bold text-purple-900",children:h.discrimination.toFixed(2)})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-sm font-medium text-foreground",children:"품질 평가:"}),v(h.qualityFlag)]}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"집단별 성취도"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[p.jsx("div",{className:"text-sm text-green-600 mb-1",children:"상위 27% 학생"}),p.jsxs("div",{className:"text-xl font-bold text-green-900",children:[h.topStudentsCorrectRate.toFixed(1),"%"]})]}),p.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[p.jsx("div",{className:"text-sm text-orange-600 mb-1",children:"하위 27% 학생"}),p.jsxs("div",{className:"text-xl font-bold text-orange-900",children:[h.bottomStudentsCorrectRate.toFixed(1),"%"]})]})]}),p.jsxs("div",{className:"mt-3 text-sm text-muted-foreground",children:["💡 변별도 = (상위집단 정답률 - 하위집단 정답률) = ",h.discrimination.toFixed(2)]})]}),h.commonWrongAnswers.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"많이 틀린 오답 (Top 5)"}),p.jsx("div",{className:"space-y-2",children:h.commonWrongAnswers.map((S,N)=>p.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("span",{className:"font-medium text-red-900",children:S.answer}),p.jsxs("span",{className:"text-sm text-red-600 ml-2",children:["(",S.count,"명)"]})]}),p.jsxs("div",{className:"text-sm font-semibold text-red-700",children:[S.percentage.toFixed(1),"%"]})]},N))})]}),h.lastUsed&&p.jsxs("div",{className:"text-sm text-muted-foreground",children:["최근 사용: ",new Date(h.lastUsed).toLocaleDateString("ko-KR")]})]}),p.jsx("div",{className:"sticky bottom-0 bg-card border-t border-border px-6 py-4",children:p.jsx("button",{onClick:()=>y(!1),className:"w-full bg-primary text-primary-foreground py-2 px-4 rounded-lg hover:bg-primary/90 font-medium",children:"닫기"})})]})})]})};function Lme(){const{user:t,logout:e}=Ko(),n=is(),[r,s]=Q.useState(null),[i,o]=Q.useState([]),[a,l]=Q.useState([]),[c,u]=Q.useState(!0);Q.useEffect(()=>{A()},[]);const A=async()=>{try{u(!0);const[m,g,y]=await Promise.all([vt.get("/api/v1/admin/dashboard/stats"),vt.get("/api/v1/admin/users/recent?limit=5"),vt.get("/api/v1/admin/stats/by-grade")]);s(m.data.data),o(g.data.data),l(y.data.data)}catch(m){console.error("데이터 조회 실패:",m)}finally{u(!1)}},d=()=>{e(),n("/login")},f=m=>m<=6?`초등 ${m}학년`:`중등 ${m-6}학년`,h=m=>{const g={student:{text:"학생",className:"bg-primary text-primary-foreground"},parent:{text:"학부모",className:"bg-chart-2 text-primary-foreground"},teacher:{text:"교사",className:"bg-chart-3 text-primary-foreground"},admin:{text:"관리자",className:"bg-destructive text-destructive-foreground"}},y=g[m]||g.student;return p.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${y.className}`,children:y.text})};return c?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),p.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})]})}):p.jsxs("div",{className:"min-h-screen bg-background",children:[p.jsx("header",{className:"bg-card shadow-sm border-b border-border",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 sm:py-4",children:p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-primary",children:"관리자 대시보드"}),p.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:["안녕하세요, ",p.jsx("span",{className:"font-medium text-foreground",children:t==null?void 0:t.name}),"님"]})]}),p.jsx("button",{onClick:d,className:"px-3 sm:px-4 py-1.5 sm:py-2 border border-border rounded-lg hover:bg-muted transition-colors text-card-foreground text-sm",children:"로그아웃"})]})})}),p.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r&&p.jsxs("section",{className:"mb-8",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"시스템 현황"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"전체 사용자"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.users.total}),p.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["최근 7일: +",r.users.recentRegistrations]})]}),p.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"👥"})})]})}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"학생"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.users.students}),p.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["학부모: ",r.users.parents]})]}),p.jsx("div",{className:"w-12 h-12 bg-chart-1/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"🎓"})})]})}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"테스트 템플릿"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.templates.total})]}),p.jsx("div",{className:"w-12 h-12 bg-chart-2/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"📝"})})]})}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"총 테스트 세션"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.sessions.total}),p.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["최근 7일: ",r.sessions.recentSessions]})]}),p.jsx("div",{className:"w-12 h-12 bg-chart-3/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"📊"})})]})})]})]}),r&&p.jsxs("section",{className:"mb-8",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"테스트 통계"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"완료된 테스트"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.sessions.completed})]}),p.jsx("div",{className:"w-12 h-12 bg-chart-1/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"✅"})})]})}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"채점 완료"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.sessions.scored})]}),p.jsx("div",{className:"w-12 h-12 bg-chart-2/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"💯"})})]})}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"평균 점수"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.sessions.averageScore>0?`${r.sessions.averageScore}%`:"-"})]}),p.jsx("div",{className:"w-12 h-12 bg-chart-3/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"🎯"})})]})})]})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[p.jsxs("section",{children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"최근 가입 사용자"}),i.length===0?p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:p.jsx("p",{className:"text-muted-foreground",children:"최근 가입한 사용자가 없습니다."})}):p.jsx("div",{className:"bg-card rounded-lg shadow-md overflow-hidden border border-border",children:p.jsx("div",{className:"max-h-96 overflow-y-auto",children:p.jsxs("table",{className:"min-w-full divide-y divide-border",children:[p.jsx("thead",{className:"bg-muted sticky top-0",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"이름"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"역할"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"가입일"})]})}),p.jsx("tbody",{className:"bg-card divide-y divide-border",children:i.map(m=>p.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[p.jsx("div",{className:"text-sm font-medium text-card-foreground",children:m.name}),p.jsx("div",{className:"text-xs text-muted-foreground",children:m.email})]}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h(m.role)}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:new Date(m.createdAt).toLocaleDateString("ko-KR")})]},m.id))})]})})})]}),p.jsxs("section",{children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"학년별 통계"}),a.length===0?p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:p.jsx("p",{className:"text-muted-foreground",children:"학년별 통계 데이터가 없습니다."})}):p.jsx("div",{className:"bg-card rounded-lg shadow-md overflow-hidden border border-border",children:p.jsxs("table",{className:"min-w-full divide-y divide-border",children:[p.jsx("thead",{className:"bg-muted",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"학년"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"학생 수"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"완료 테스트"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"평균 점수"})]})}),p.jsx("tbody",{className:"bg-card divide-y divide-border",children:a.map(m=>p.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("div",{className:"text-sm font-medium text-card-foreground",children:f(m.grade)})}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:[m.studentCount,"명"]}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:[m.completedSessions," / ",m.totalSessions]}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:m.averageScore>0?`${m.averageScore}%`:"-"})]},m.grade))})]})})]})]}),p.jsxs("section",{className:"mt-8",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"빠른 작업"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[p.jsx(qc,{to:"/admin/questions",className:"bg-card rounded-lg shadow-sm p-6 border border-border hover:border-primary transition-colors",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"📚"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-foreground",children:"문항 관리"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"문항 추가 및 수정"})]})]})}),p.jsx(qc,{to:"/admin/question-analytics",className:"bg-card rounded-lg shadow-sm p-6 border border-border hover:border-primary transition-colors",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-violet-100 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"📊"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-foreground",children:"문항 품질 분석"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"정답률 및 변별도 분석"})]})]})}),p.jsx(qc,{to:"/admin/grading",className:"bg-card rounded-lg shadow-sm p-6 border border-border hover:border-primary transition-colors",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-chart-1/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"✅"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-foreground",children:"채점 관리"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"자동 채점 및 관리"})]})]})}),p.jsx(qc,{to:"/admin/bulk-upload",className:"bg-card rounded-lg shadow-sm p-6 border border-border hover:border-primary transition-colors",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-chart-2/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"📤"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-foreground",children:"대량 업로드"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"엑셀로 학생 데이터 일괄 등록"})]})]})}),p.jsx(qc,{to:"/admin/reports",className:"bg-card rounded-lg shadow-sm p-6 border border-border hover:border-primary transition-colors",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-chart-3/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"📊"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-foreground",children:"학생 리포트"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"학생별 상세 리포트 조회"})]})]})}),p.jsx(qc,{to:"/admin/users",className:"bg-card rounded-lg shadow-sm p-6 border border-border hover:border-primary transition-colors",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"👥"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-foreground",children:"전체 회원 관리"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"사용자 정보 조회 및 수정"})]})]})}),p.jsx("button",{onClick:A,className:"bg-card rounded-lg shadow-sm p-6 border border-border hover:border-primary transition-colors text-left",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-chart-4/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"🔄"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-foreground",children:"통계 새로고침"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"최신 데이터 불러오기"})]})]})})]})]})]})]})}function Mme(){const{user:t,logout:e}=Ko(),n=is(),[r,s]=Q.useState([]),[i,o]=Q.useState(null),[a,l]=Q.useState(!0),[c,u]=Q.useState(!1);Q.useEffect(()=>{A()},[]);const A=async()=>{try{l(!0);const m=await vt.get("/api/v1/admin/grading/sessions/pending");s(m.data.data)}catch(m){console.error("채점 대기 세션 조회 실패:",m)}finally{l(!1)}},d=async m=>{var g,y;if(confirm("자동 채점을 진행하시겠습니까? AI가 서술형 문제를 채점합니다."))try{u(!0);const x=await vt.post(`/api/v1/admin/grading/sessions/${m}/auto-grade`);alert(`채점 완료!
총점: ${x.data.data.totalScore}점
정답률: ${x.data.data.percentage.toFixed(1)}%`),A(),o(null)}catch(x){console.error("자동 채점 실패:",x),alert(((y=(g=x.response)==null?void 0:g.data)==null?void 0:y.message)||"자동 채점에 실패했습니다.")}finally{u(!1)}},f=m=>m<=6?`초등 ${m}학년`:`중등 ${m-6}학년`,h=()=>{e(),n("/login")};return a?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),p.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})]})}):p.jsxs("div",{className:"min-h-screen bg-background",children:[p.jsx("header",{className:"bg-card shadow-sm border-b border-border",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-primary",children:"채점 관리"}),p.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["완료된 테스트를 채점하세요 - ",p.jsx("span",{className:"font-medium text-foreground",children:t==null?void 0:t.name}),"님"]})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:()=>n("/admin/dashboard"),className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-card-foreground",children:"대시보드"}),p.jsx("button",{onClick:h,className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-card-foreground",children:"로그아웃"})]})]})})}),p.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.length===0?p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:p.jsx("p",{className:"text-muted-foreground",children:"채점 대기 중인 테스트가 없습니다."})}):p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[p.jsxs("section",{children:[p.jsxs("h2",{className:"text-xl font-bold mb-4 text-foreground",children:["채점 대기 목록 (",r.length,")"]}),p.jsx("div",{className:"space-y-4",children:r.map(m=>p.jsxs("div",{onClick:()=>o(m),className:`bg-card rounded-lg shadow-sm p-6 border cursor-pointer transition-all ${(i==null?void 0:i.id)===m.id?"border-primary ring-2 ring-primary/20":"border-border hover:border-primary/50"}`,children:[p.jsxs("div",{className:"flex items-start justify-between mb-3",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-foreground",children:m.student.user.name}),p.jsx("p",{className:"text-xs text-muted-foreground",children:m.student.user.email})]}),p.jsx("span",{className:"px-3 py-1 bg-accent text-accent-foreground rounded-full text-xs font-medium",children:f(m.template.grade)})]}),p.jsxs("div",{className:"space-y-1 text-sm",children:[p.jsxs("p",{className:"text-muted-foreground",children:[p.jsx("span",{className:"font-medium",children:"테스트:"})," ",m.template.title]}),p.jsxs("p",{className:"text-muted-foreground",children:[p.jsx("span",{className:"font-medium",children:"완료 시간:"})," ",new Date(m.completedAt).toLocaleString("ko-KR")]}),p.jsxs("p",{className:"text-muted-foreground",children:[p.jsx("span",{className:"font-medium",children:"문항 수:"})," ",m.answers.length,"문제"]})]})]},m.id))})]}),i&&p.jsx("section",{children:p.jsxs("div",{className:"sticky top-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h2",{className:"text-xl font-bold text-foreground",children:"답안 상세"}),p.jsx("button",{onClick:()=>d(i.id),disabled:c,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"채점 중...":"🤖 자동 채점"})]}),p.jsxs("div",{className:"bg-card rounded-lg shadow-sm border border-border max-h-[calc(100vh-12rem)] overflow-y-auto",children:[p.jsxs("div",{className:"p-6 border-b border-border bg-muted/50",children:[p.jsx("h3",{className:"font-semibold text-foreground mb-2",children:i.template.title}),p.jsxs("p",{className:"text-sm text-muted-foreground",children:["학생: ",i.student.user.name," (",f(i.template.grade),")"]})]}),p.jsx("div",{className:"divide-y divide-border",children:i.answers.map(m=>p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-start justify-between mb-3",children:[p.jsxs("h4",{className:"font-medium text-foreground",children:["문제 ",m.questionNumber,"번",p.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:["(",m.question.points,"점)"]})]}),p.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${m.question.questionType==="multiple-choice"?"bg-chart-1/10 text-chart-1":"bg-chart-2/10 text-chart-2"}`,children:m.question.questionType==="multiple-choice"?"객관식":"주관식"})]}),p.jsxs("div",{className:"space-y-3 text-sm",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-muted-foreground font-medium mb-1",children:"문제:"}),p.jsx("p",{className:"text-foreground",children:m.question.questionText})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-muted-foreground font-medium mb-1",children:"모범 답안:"}),p.jsx("p",{className:"text-foreground bg-muted/50 p-2 rounded",children:m.question.correctAnswer})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-muted-foreground font-medium mb-1",children:"학생 답안:"}),p.jsx("p",{className:"text-foreground bg-primary/5 p-2 rounded border border-primary/20",children:m.studentAnswer})]})]})]},m.id))})]})]})})]})})]})}const Qme=()=>{const[t,e]=Q.useState(null),[n,r]=Q.useState(!1),[s,i]=Q.useState(!1),[o,a]=Q.useState([]),[l,c]=Q.useState(""),u=async()=>{var f,h;try{i(!0);const m=await vt.get("/api/v1/admin/bulk-upload/template",{responseType:"blob"}),g=window.URL.createObjectURL(new Blob([m.data])),y=document.createElement("a");y.href=g,y.setAttribute("download","literacy_test_universal_template.xlsx"),document.body.appendChild(y),y.click(),y.remove(),window.URL.revokeObjectURL(g)}catch(m){console.error("템플릿 다운로드 실패:",m),alert(((h=(f=m.response)==null?void 0:f.data)==null?void 0:h.message)||"템플릿 다운로드에 실패했습니다.")}finally{i(!1)}},A=f=>{f.target.files&&f.target.files[0]&&(e(f.target.files[0]),c(""))},d=async()=>{var f,h;if(!t){c("파일을 선택하세요.");return}try{r(!0),c(""),a([]);const m=new FormData;m.append("file",t);const g=await vt.post("/api/v1/admin/bulk-upload/upload",m,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5});a(g.data.results),alert(`업로드 성공! ${g.data.results.length}명의 학생 데이터가 생성되었습니다.`),e(null)}catch(m){console.error("업로드 실패:",m),c(((h=(f=m.response)==null?void 0:f.data)==null?void 0:h.message)||"업로드에 실패했습니다.")}finally{r(!1)}};return p.jsx("div",{className:"min-h-screen bg-background",children:p.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p.jsx("h1",{className:"text-3xl font-bold mb-6 text-foreground",children:"학생 데이터 대량 업로드"}),p.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 mb-6 border border-border",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4 text-foreground",children:"1. 통합 엑셀 템플릿 다운로드"}),p.jsx("div",{className:"mb-4",children:p.jsx("button",{onClick:u,disabled:s,className:"w-full px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:s?"다운로드 중...":"📥 통합 템플릿 다운로드"})}),p.jsxs("div",{className:"bg-muted/30 rounded-lg p-4 space-y-2",children:[p.jsx("p",{className:"text-sm text-foreground font-medium",children:"✨ 통합 템플릿 특징:"}),p.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4",children:[p.jsx("li",{children:"• 한 파일로 모든 학년 학생 데이터 입력 가능"}),p.jsx("li",{children:"• 각 행에 학년과 템플릿코드를 입력하여 여러 학년을 한번에 처리"}),p.jsx("li",{children:"• 최대 50개 문항까지 지원 (Q1~Q50)"}),p.jsx("li",{children:"• 사용 안내 시트 포함"})]}),p.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"템플릿 코드: ELEM1-V1 ~ ELEM6-V1 (초등 1~6학년), MIDDLE1-V1 ~ MIDDLE3-V1 (중등 1~3학년)"})]})]}),p.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 mb-6 border border-border",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4 text-foreground",children:"2. 작성한 엑셀 파일 업로드"}),p.jsxs("div",{className:"mb-4",children:[p.jsx("input",{type:"file",accept:".xlsx, .xls",onChange:A,className:"block w-full text-sm text-foreground file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-primary file:text-primary-foreground hover:file:bg-primary/90 file:cursor-pointer border border-border rounded-lg"}),t&&p.jsxs("p",{className:"mt-2 text-sm text-muted-foreground",children:["선택된 파일: ",t.name]})]}),l&&p.jsx("div",{className:"mb-4 p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:p.jsx("p",{className:"text-destructive text-sm",children:l})}),p.jsx("button",{onClick:d,disabled:!t||n,className:"w-full px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:n?"업로드 중...":"📤 업로드 및 자동 채점 시작"}),p.jsx("p",{className:"mt-2 text-xs text-muted-foreground text-center",children:"* 주관식/서술형은 AI(GPT-4o-mini)가 자동 채점합니다"})]}),o.length>0&&p.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4 text-foreground",children:"업로드 결과"}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"min-w-full divide-y divide-border",children:[p.jsx("thead",{className:"bg-muted",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase",children:"행"}),p.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase",children:"학생명"}),p.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase",children:"이메일"}),p.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase",children:"점수"}),p.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase",children:"상태"})]})}),p.jsx("tbody",{className:"bg-card divide-y divide-border",children:o.map((f,h)=>p.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[p.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-card-foreground",children:f.row}),p.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-card-foreground",children:f.studentName}),p.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-card-foreground",children:f.studentEmail}),p.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-card-foreground",children:f.score}),p.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:p.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${f.status==="success"?"bg-chart-1/20 text-chart-1":"bg-destructive/20 text-destructive"}`,children:f.status==="success"?"성공":"실패"})})]},h))})]})})]})]})})},Hme=()=>{const[t,e]=Q.useState([]),[n,r]=Q.useState(null),[s,i]=Q.useState(!1),[o,a]=Q.useState(!1);Q.useEffect(()=>{l()},[]);const l=async()=>{try{i(!0);const d=await vt.get("/api/v1/admin/reports/sessions");e(d.data.data)}catch(d){console.error("세션 목록 조회 실패:",d),alert("세션 목록을 불러오는데 실패했습니다.")}finally{i(!1)}},c=async d=>{try{a(!0);const f=await vt.get(`/api/v1/admin/reports/sessions/${d}`);r(f.data.data)}catch(f){console.error("리포트 조회 실패:",f),alert("리포트를 불러오는데 실패했습니다.")}finally{a(!1)}},u=d=>({vocabulary:"어휘력",reading:"독해력",grammar:"문법/어법",reasoning:"추론/사고력",reading_motivation:"독서 동기",writing_motivation:"쓰기 동기",reading_environment:"독서 환경",reading_habit:"독서 습관",reading_preference:"독서 선호도"})[d]||d,A=d=>`${d}등급`;return p.jsx("div",{className:"min-h-screen bg-background",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p.jsx("h1",{className:"text-3xl font-bold mb-6 text-foreground",children:"학생 리포트"}),s?p.jsxs("div",{className:"text-center py-12",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),p.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})]}):p.jsx("div",{className:"bg-card rounded-lg shadow-md overflow-hidden border border-border mb-6",children:p.jsx("div",{className:"overflow-x-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:p.jsxs("table",{className:"w-full divide-y divide-border",children:[p.jsx("thead",{className:"bg-muted",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"학생명"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"이메일"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"학년"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"템플릿"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"점수"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"등급"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"응시 일시"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"작업"})]})}),p.jsx("tbody",{className:"bg-card divide-y divide-border",children:t.map(d=>{var f;return p.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:d.studentName}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:d.studentEmail}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:[d.grade,"학년"]}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:d.templateCode}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:[d.score," (",(f=d.percentage)==null?void 0:f.toFixed(1),"%)"]}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${d.gradeLevel<=3?"bg-chart-1/20 text-chart-1":d.gradeLevel<=6?"bg-chart-3/20 text-chart-3":"bg-destructive/20 text-destructive"}`,children:A(d.gradeLevel)})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:d.completedAt?p.jsxs(p.Fragment,{children:[p.jsx("div",{children:new Date(d.completedAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})}),p.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(d.completedAt).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!0})})]}):p.jsx("span",{className:"text-muted-foreground text-xs",children:"일정 데이터 없음"})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:p.jsx("button",{onClick:()=>c(d.id),className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"상세보기"})})]},d.id)})})]})})}),n&&p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:p.jsx("div",{className:"bg-card rounded-lg p-8 max-w-6xl w-full max-h-[90vh] overflow-y-auto shadow-xl border border-border",children:o?p.jsxs("div",{className:"text-center py-12",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),p.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex justify-between items-start mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"학생 리포트 상세"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>{n!=null&&n.sessionId&&window.open(`/test/result/${n.sessionId}`,"_blank")},className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium",children:"📄 학생 레포트 보기"}),p.jsx("button",{onClick:()=>{r(null)},className:"text-muted-foreground hover:text-foreground text-2xl font-bold",children:"×"})]})]}),p.jsxs("div",{className:"bg-muted/30 rounded-lg p-6 mb-6",children:[p.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"학생 정보"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-muted-foreground text-sm",children:"이름:"}),p.jsx("span",{className:"ml-2 text-foreground font-medium",children:n.student.name})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-muted-foreground text-sm",children:"이메일:"}),p.jsx("span",{className:"ml-2 text-foreground font-medium",children:n.student.email})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-muted-foreground text-sm",children:"학년:"}),p.jsxs("span",{className:"ml-2 text-foreground font-medium",children:[n.student.grade,"학년"]})]}),n.student.schoolName&&p.jsxs("div",{children:[p.jsx("span",{className:"text-muted-foreground text-sm",children:"학교:"}),p.jsx("span",{className:"ml-2 text-foreground font-medium",children:n.student.schoolName})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-muted-foreground text-sm",children:"제출 일시:"}),p.jsxs("span",{className:"ml-2 text-foreground font-medium",children:[new Date(n.test.completedAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})," ",new Date(n.test.completedAt).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!0})]})]})]})]}),p.jsxs("div",{className:"bg-muted/30 rounded-lg p-6 mb-6",children:[p.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"종합 점수"}),p.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[p.jsxs("div",{className:"text-center",children:[p.jsxs("div",{className:"text-3xl font-bold text-primary",children:[n.overall.totalScore,"/",n.overall.totalPossible]}),p.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"총점"})]}),p.jsxs("div",{className:"text-center",children:[p.jsxs("div",{className:"text-3xl font-bold text-chart-3",children:[n.overall.percentage.toFixed(1),"%"]}),p.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"정답률"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-3xl font-bold text-chart-1",children:A(n.overall.gradeLevel)}),p.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"등급"})]})]})]}),p.jsxs("div",{className:"bg-muted/30 rounded-lg p-6 mb-6",children:[p.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"영역별 점수"}),p.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(n.categoryScores).map(([d,f])=>p.jsxs("div",{className:"flex justify-between items-center p-3 bg-card rounded-lg",children:[p.jsx("span",{className:"font-medium text-foreground",children:u(d)}),p.jsxs("span",{className:"text-muted-foreground",children:[f.earned,"/",f.total," (",(f.earned/f.total*100).toFixed(1),"%)"]})]},d))})]}),p.jsxs("div",{className:"bg-muted/30 rounded-lg p-6",children:[p.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"문항별 상세"}),p.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:n.answers.map(d=>p.jsxs("div",{className:`p-4 rounded-lg border ${d.isCorrect?"border-chart-1/30 bg-chart-1/5":"border-destructive/30 bg-destructive/5"}`,children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsxs("span",{className:"font-semibold text-foreground",children:[d.questionNumber,". ",u(d.category)]}),p.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.isCorrect?"bg-chart-1/20 text-chart-1":"bg-destructive/20 text-destructive"}`,children:[d.isCorrect?"정답":"오답"," (",d.isCorrect?d.totalPoints:d.pointsEarned,"/",d.totalPoints,"점)"]})]}),p.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:d.questionText}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-muted-foreground",children:"학생 답변:"}),p.jsx("span",{className:"ml-2 text-foreground",children:d.studentAnswer||"(미제출)"})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-muted-foreground",children:"정답:"}),p.jsx("span",{className:"ml-2 text-chart-1",children:d.correctAnswer})]})]}),d.feedback&&p.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:[p.jsx("span",{className:"font-medium",children:"피드백:"})," ",d.feedback]})]},d.questionNumber))})]}),n.surveyResponses&&n.surveyResponses.length>0&&p.jsxs("div",{className:"bg-muted/30 rounded-lg p-6",children:[p.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"설문 응답"}),p.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:n.surveyResponses.map(d=>p.jsxs("div",{className:"p-4 rounded-lg border border-muted bg-background",children:[p.jsx("div",{className:"flex justify-between items-start mb-2",children:p.jsxs("span",{className:"font-semibold text-foreground",children:[d.questionNumber,". ",u(d.category)]})}),p.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:d.questionText}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"응답:"}),p.jsx("span",{className:"ml-2 text-foreground font-medium",children:d.response||"(미응답)"})]})]},d.questionNumber))})]})]})})})]})})};function zme(){const[t,e]=Q.useState([]),[n,r]=Q.useState(!0),[s,i]=Q.useState(null),[o,a]=Q.useState({name:"",email:"",phone:""}),[l,c]=Q.useState("all"),[u,A]=Q.useState(""),[d,f]=Q.useState(new Set),[h,m]=Q.useState(!1);Q.useEffect(()=>{g()},[]);const g=async()=>{try{r(!0);const N=await vt.get("/api/v1/admin/users");e(N.data.data||[])}catch(N){console.error("사용자 목록 조회 실패:",N),alert("사용자 목록을 불러오는데 실패했습니다.")}finally{r(!1)}},y=N=>{var k,O,U;i(N),a({name:N.name,email:N.email,phone:N.phone||"",grade:(k=N.student)==null?void 0:k.grade,schoolName:((O=N.student)==null?void 0:O.schoolName)||"",parentPhone:((U=N.student)==null?void 0:U.parentPhone)||""})},x=async()=>{var N,k;if(s)try{await vt.put(`/api/v1/admin/users/${s.id}`,o),alert("사용자 정보가 수정되었습니다."),i(null),g()}catch(O){console.error("사용자 정보 수정 실패:",O),alert(((k=(N=O.response)==null?void 0:N.data)==null?void 0:k.message)||"사용자 정보 수정에 실패했습니다.")}},v=async N=>{var k,O;if(confirm("정말로 이 사용자를 삭제하시겠습니까?"))try{await vt.delete(`/api/v1/admin/users/${N}`),alert("사용자가 삭제되었습니다."),g()}catch(U){console.error("사용자 삭제 실패:",U),alert(((O=(k=U.response)==null?void 0:k.data)==null?void 0:O.message)||"사용자 삭제에 실패했습니다.")}},b=()=>{if(h)f(new Set);else{const N=new Set(S.map(k=>k.id));f(N)}m(!h)},w=N=>{const k=new Set(d);k.has(N)?k.delete(N):k.add(N),f(k),m(k.size===S.length)},C=async()=>{if(d.size===0){alert("삭제할 사용자를 선택해주세요.");return}if(confirm(`선택한 ${d.size}명의 사용자를 삭제하시겠습니까?`))try{const N=Array.from(d).map(k=>vt.delete(`/api/v1/admin/users/${k}`));await Promise.all(N),alert(`${d.size}명의 사용자가 삭제되었습니다.`),f(new Set),m(!1),g()}catch(N){console.error("일괄 삭제 실패:",N),alert("일부 사용자 삭제에 실패했습니다."),g()}},B=N=>({student:"학생",teacher:"교사",parent:"학부모",admin:"관리자"})[N]||N,S=t.filter(N=>{const k=l==="all"||N.role===l,O=N.name.toLowerCase().includes(u.toLowerCase())||N.email.toLowerCase().includes(u.toLowerCase());return k&&O});return n?p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):p.jsx("div",{className:"min-h-screen bg-background p-4 sm:p-6 lg:p-8",children:p.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:"전체 회원 관리"}),p.jsx("p",{className:"text-muted-foreground mt-2",children:"모든 사용자의 정보를 조회하고 관리합니다."})]}),p.jsx("div",{className:"bg-card rounded-lg shadow p-4 border border-border",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-2",children:"역할 필터"}),p.jsxs("select",{value:l,onChange:N=>c(N.target.value),className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",children:[p.jsx("option",{value:"all",children:"전체"}),p.jsx("option",{value:"student",children:"학생"}),p.jsx("option",{value:"teacher",children:"교사"}),p.jsx("option",{value:"parent",children:"학부모"}),p.jsx("option",{value:"admin",children:"관리자"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-2",children:"검색"}),p.jsx("input",{type:"text",value:u,onChange:N=>A(N.target.value),placeholder:"이름 또는 이메일로 검색",className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground"})]})]})}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{className:"text-sm text-muted-foreground",children:["총 ",S.length,"명의 사용자",d.size>0&&p.jsxs("span",{className:"ml-2 text-primary font-medium",children:["(",d.size,"명 선택됨)"]})]}),d.size>0&&p.jsxs("button",{onClick:C,className:"px-4 py-2 bg-destructive text-destructive-foreground rounded-lg hover:bg-destructive/90 transition-colors font-medium",children:["선택한 회원 삭제 (",d.size,")"]})]}),p.jsx("div",{className:"bg-card rounded-lg shadow overflow-hidden border border-border",children:p.jsx("div",{className:"overflow-x-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:p.jsxs("table",{className:"w-full divide-y divide-border",children:[p.jsx("thead",{className:"bg-muted",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left",children:p.jsx("input",{type:"checkbox",checked:h,onChange:b,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary"})}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"이름"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"이메일"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"역할"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"전화번호"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"추가 정보"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"가입일"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"작업"})]})}),p.jsx("tbody",{className:"bg-card divide-y divide-border",children:S.map(N=>p.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("input",{type:"checkbox",checked:d.has(N.id),onChange:()=>w(N.id),className:"w-4 h-4 text-primary border-border rounded focus:ring-primary"})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("div",{className:"text-sm font-medium text-foreground",children:N.name})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("div",{className:"text-sm text-muted-foreground",children:N.email})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-primary/10 text-primary",children:B(N.role)})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:N.phone||"-"}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:N.student?p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{children:["학년: ",N.student.grade]}),N.student.schoolName&&p.jsxs("div",{children:["학교: ",N.student.schoolName]}),N.student.parentPhone&&p.jsxs("div",{children:["학부모: ",N.student.parentPhone]})]}):"-"}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:new Date(N.createdAt).toLocaleDateString("ko-KR")}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[p.jsx("button",{onClick:()=>y(N),className:"text-primary hover:text-primary/80 transition-colors",children:"수정"}),p.jsx("button",{onClick:()=>v(N.id),className:"text-destructive hover:text-destructive/80 transition-colors",children:"삭제"})]})]},N.id))})]})})}),s&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-card rounded-lg shadow-xl p-6 max-w-md w-full border border-border",children:[p.jsx("h2",{className:"text-xl font-bold text-card-foreground mb-4",children:"사용자 정보 수정"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"이름"}),p.jsx("input",{type:"text",value:o.name,onChange:N=>a({...o,name:N.target.value}),className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"이메일"}),p.jsx("input",{type:"email",value:o.email,onChange:N=>a({...o,email:N.target.value}),className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"전화번호"}),p.jsx("input",{type:"tel",value:o.phone,onChange:N=>a({...o,phone:N.target.value}),className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"010-1234-5678"})]}),s.role==="student"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"학년"}),p.jsxs("select",{value:o.grade,onChange:N=>a({...o,grade:parseInt(N.target.value)}),className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",children:[[1,2,3,4,5,6].map(N=>p.jsxs("option",{value:N,children:["초등 ",N,"학년"]},N)),[7,8,9].map(N=>p.jsxs("option",{value:N,children:["중등 ",N-6,"학년"]},N))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"학교명"}),p.jsx("input",{type:"text",value:o.schoolName,onChange:N=>a({...o,schoolName:N.target.value}),className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"예: 서울초등학교"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"학부모 휴대폰 번호"}),p.jsx("input",{type:"tel",value:o.parentPhone,onChange:N=>a({...o,parentPhone:N.target.value}),className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"010-1234-5678"})]})]})]}),p.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[p.jsx("button",{onClick:()=>i(null),className:"px-4 py-2 border border-border rounded-md hover:bg-muted transition-colors text-foreground",children:"취소"}),p.jsx("button",{onClick:x,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:"저장"})]})]})})]})})}function Vme(){const{user:t,logout:e}=Ko(),n=is(),[r,s]=Q.useState([]),[i,o]=Q.useState(null),[a,l]=Q.useState(null),[c,u]=Q.useState(!0),[A,d]=Q.useState(!1);Q.useEffect(()=>{f()},[]),Q.useEffect(()=>{i&&h(i)},[i]);const f=async()=>{try{u(!0);const b=(await vt.get("/api/v1/parents/me/children")).data.data;s(b),b.length>0&&!i&&o(b[0].id)}catch(v){console.error("자녀 목록 조회 실패:",v)}finally{u(!1)}},h=async v=>{try{d(!0);const b=await vt.get(`/api/v1/parents/children/${v}/stats`);l(b.data.data)}catch(b){console.error("자녀 통계 조회 실패:",b)}finally{d(!1)}},m=()=>{e(),n("/login")},g=v=>v<=6?`초등 ${v}학년`:`중등 ${v-6}학년`,y=v=>{const b={pending:{text:"대기중",className:"bg-muted text-muted-foreground"},in_progress:{text:"진행중",className:"bg-primary text-primary-foreground"},completed:{text:"완료",className:"bg-accent text-accent-foreground"},scored:{text:"채점완료",className:"bg-chart-1 text-primary-foreground"}},w=b[v]||b.pending;return p.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${w.className}`,children:w.text})};if(c)return p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),p.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})]})});if(r.length===0)return p.jsxs("div",{className:"min-h-screen bg-background",children:[p.jsx("header",{className:"bg-card shadow-sm border-b border-border",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-primary",children:"학부모 대시보드"}),p.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["안녕하세요, ",p.jsx("span",{className:"font-medium text-foreground",children:t==null?void 0:t.name}),"님"]})]}),p.jsx("button",{onClick:m,className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-card-foreground",children:"로그아웃"})]})})}),p.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:p.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:[p.jsx("p",{className:"text-muted-foreground",children:"등록된 자녀가 없습니다."}),p.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"관리자에게 문의하여 자녀를 등록해 주세요."})]})})]});const x=r.find(v=>v.id===i);return p.jsxs("div",{className:"min-h-screen bg-background",children:[p.jsx("header",{className:"bg-card shadow-sm border-b border-border",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-primary",children:"학부모 대시보드"}),p.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["안녕하세요, ",p.jsx("span",{className:"font-medium text-foreground",children:t==null?void 0:t.name}),"님"]})]}),p.jsx("button",{onClick:m,className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-card-foreground",children:"로그아웃"})]})})}),p.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p.jsxs("section",{className:"mb-8",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"자녀 선택"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(v=>p.jsxs("button",{onClick:()=>o(v.id),className:`text-left p-6 rounded-lg border-2 transition-all ${i===v.id?"border-primary bg-primary/5":"border-border bg-card hover:border-primary/50"}`,children:[p.jsxs("div",{className:"flex items-start justify-between mb-2",children:[p.jsx("h3",{className:"text-lg font-semibold text-foreground",children:v.user.name}),p.jsx("span",{className:"px-3 py-1 bg-accent text-accent-foreground rounded-full text-xs font-medium",children:g(v.grade)})]}),v.schoolName&&p.jsxs("p",{className:"text-sm text-muted-foreground",children:[v.schoolName,v.className&&` ${v.className}`]})]},v.id))})]}),x&&p.jsx(p.Fragment,{children:A?p.jsxs("div",{className:"text-center py-12",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),p.jsx("div",{className:"text-xl text-muted-foreground",children:"통계 로딩 중..."})]}):a?p.jsxs(p.Fragment,{children:[p.jsxs("section",{className:"mb-8",children:[p.jsxs("h2",{className:"text-xl font-bold mb-4 text-foreground",children:[a.student.name,"님의 학습 현황"]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"총 테스트"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.statistics.totalSessions})]}),p.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"📝"})})]})}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"완료한 테스트"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.statistics.completedSessions})]}),p.jsx("div",{className:"w-12 h-12 bg-chart-1/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"✅"})})]})}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"채점 완료"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.statistics.scoredSessions})]}),p.jsx("div",{className:"w-12 h-12 bg-chart-2/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"📊"})})]})}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"평균 점수"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.statistics.averageScore>0?`${a.statistics.averageScore}%`:"-"})]}),p.jsx("div",{className:"w-12 h-12 bg-chart-3/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"🎯"})})]})})]})]}),a.scoreTrend.length>0&&p.jsxs("section",{className:"mb-8",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"점수 추이"}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsx("div",{className:"space-y-4",children:a.scoreTrend.map((v,b)=>p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-32 text-sm text-muted-foreground",children:new Date(v.date).toLocaleDateString("ko-KR")}),p.jsx("div",{className:"flex-1",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"flex-1 bg-muted rounded-full h-8 relative overflow-hidden",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 bg-primary rounded-full transition-all",style:{width:`${v.score}%`}}),p.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-sm font-medium text-foreground",children:[v.score.toFixed(1),"%"]})]}),p.jsx("div",{className:"w-48 text-sm text-muted-foreground truncate",children:v.templateTitle})]})})]},b))})})]}),p.jsxs("section",{children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"최근 테스트 결과"}),a.recentSessions.length===0?p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:p.jsx("p",{className:"text-muted-foreground",children:"아직 진행한 테스트가 없습니다."})}):p.jsx("div",{className:"bg-card rounded-lg shadow-md overflow-hidden border border-border",children:p.jsxs("table",{className:"min-w-full divide-y divide-border",children:[p.jsx("thead",{className:"bg-muted",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"테스트"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"상태"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"점수"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"등급"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"날짜"})]})}),p.jsx("tbody",{className:"bg-card divide-y divide-border",children:a.recentSessions.map(v=>p.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[p.jsx("div",{className:"text-sm font-medium text-card-foreground",children:v.template.title}),p.jsx("div",{className:"text-xs text-muted-foreground",children:g(v.template.grade)})]}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y(v.status)}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:v.result?`${v.result.percentage.toFixed(1)}%`:"-"}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:v.result?`${v.result.gradeLevel}등급`:"-"}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:new Date(v.createdAt).toLocaleDateString("ko-KR")})]},v.id))})]})})]})]}):null})]})]})}function Wme(){const{user:t,logout:e}=Ko(),n=is(),[r,s]=Q.useState([]),[i,o]=Q.useState(null),[a,l]=Q.useState(!0),[c,u]=Q.useState(null);Q.useEffect(()=>{A()},[]);const A=async()=>{try{l(!0);const[g,y]=await Promise.all([vt.get("/api/v1/teachers/me/students"),vt.get("/api/v1/teachers/me/class-stats")]);s(g.data.data),o(y.data.data)}catch(g){console.error("데이터 조회 실패:",g)}finally{l(!1)}},d=()=>{e(),n("/login")},f=g=>g<=6?`초등 ${g}학년`:`중등 ${g-6}학년`,h=c?r.filter(g=>g.grade===c):r,m=Array.from(new Set(r.map(g=>g.grade))).sort((g,y)=>g-y);return a?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),p.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})]})}):r.length===0?p.jsxs("div",{className:"min-h-screen bg-background",children:[p.jsx("header",{className:"bg-card shadow-sm border-b border-border",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-primary",children:"선생님 대시보드"}),p.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["안녕하세요, ",p.jsx("span",{className:"font-medium text-foreground",children:t==null?void 0:t.name}),"님"]})]}),p.jsx("button",{onClick:d,className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-card-foreground",children:"로그아웃"})]})})}),p.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:p.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:[p.jsx("p",{className:"text-muted-foreground",children:"담당하는 학생이 없습니다."}),p.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"관리자에게 문의하여 학생을 배정받으세요."})]})})]}):p.jsxs("div",{className:"min-h-screen bg-background",children:[p.jsx("header",{className:"bg-card shadow-sm border-b border-border",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-primary",children:"선생님 대시보드"}),p.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["안녕하세요, ",p.jsx("span",{className:"font-medium text-foreground",children:t==null?void 0:t.name}),"님"]})]}),p.jsx("button",{onClick:d,className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-card-foreground",children:"로그아웃"})]})})}),p.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i&&p.jsxs("section",{className:"mb-8",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"전체 학급 현황"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"담당 학생"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:i.overall.totalStudents})]}),p.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"👥"})})]})}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"총 테스트"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:i.overall.totalSessions})]}),p.jsx("div",{className:"w-12 h-12 bg-chart-1/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"📝"})})]})}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"완료 테스트"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:i.overall.completedSessions})]}),p.jsx("div",{className:"w-12 h-12 bg-chart-2/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"✅"})})]})}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"채점 완료"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:i.overall.scoredSessions})]}),p.jsx("div",{className:"w-12 h-12 bg-chart-3/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"💯"})})]})}),p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"학급 평균"}),p.jsx("p",{className:"text-3xl font-bold text-foreground",children:i.overall.averageScore>0?`${i.overall.averageScore}%`:"-"})]}),p.jsx("div",{className:"w-12 h-12 bg-chart-4/10 rounded-lg flex items-center justify-center",children:p.jsx("span",{className:"text-2xl",children:"🎯"})})]})})]})]}),i&&i.byGrade.length>0&&p.jsxs("section",{className:"mb-8",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"학년별 통계"}),p.jsx("div",{className:"bg-card rounded-lg shadow-md overflow-hidden border border-border",children:p.jsxs("table",{className:"min-w-full divide-y divide-border",children:[p.jsx("thead",{className:"bg-muted",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"학년"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"학생 수"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"총 테스트"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"평균 점수"})]})}),p.jsx("tbody",{className:"bg-card divide-y divide-border",children:i.byGrade.map(g=>p.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("div",{className:"text-sm font-medium text-card-foreground",children:f(g.grade)})}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:[g.studentCount,"명"]}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:g.totalSessions}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:g.averageScore>0?`${g.averageScore}%`:"-"})]},g.grade))})]})})]}),p.jsxs("section",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h2",{className:"text-xl font-bold text-foreground",children:"담당 학생 목록"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>u(null),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c===null?"bg-primary text-primary-foreground":"bg-card border border-border text-card-foreground hover:bg-muted"}`,children:"전체"}),m.map(g=>p.jsx("button",{onClick:()=>u(g),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c===g?"bg-primary text-primary-foreground":"bg-card border border-border text-card-foreground hover:bg-muted"}`,children:f(g)},g))]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(g=>p.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border hover:border-primary transition-colors",children:[p.jsxs("div",{className:"flex items-start justify-between mb-3",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-foreground",children:g.user.name}),p.jsx("p",{className:"text-xs text-muted-foreground",children:g.user.email})]}),p.jsx("span",{className:"px-3 py-1 bg-accent text-accent-foreground rounded-full text-xs font-medium",children:f(g.grade)})]}),g.schoolName&&p.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:[g.schoolName,g.className&&` ${g.className}`]}),p.jsxs("div",{className:"border-t border-border pt-3 space-y-2",children:[p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"총 테스트"}),p.jsx("span",{className:"font-medium text-foreground",children:g.stats.totalSessions})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"완료 테스트"}),p.jsx("span",{className:"font-medium text-foreground",children:g.stats.completedSessions})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"평균 점수"}),p.jsx("span",{className:"font-medium text-foreground",children:g.stats.averageScore>0?`${g.stats.averageScore}%`:"-"})]})]})]},g.id))}),h.length===0&&p.jsx("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:p.jsx("p",{className:"text-muted-foreground",children:c?`${f(c)} 학생이 없습니다.`:"학생이 없습니다."})})]})]})]})}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qI=function(t,e){return qI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},qI(t,e)};function $a(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");qI(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var YI=function(){return YI=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},YI.apply(this,arguments)};function Xs(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(A){o(A)}}function l(u){try{c(r.throw(u))}catch(A){o(A)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,[])).next())})}function Is(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function R1(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||e)}var pc=function(){function t(e,n,r,s){this.left=e,this.top=n,this.width=r,this.height=s}return t.prototype.add=function(e,n,r,s){return new t(this.left+e,this.top+n,this.width+r,this.height+s)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),cS=function(t,e){return pc.fromClientRect(t,e.getBoundingClientRect())},Gme=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),s=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new pc(0,0,r,s)},uS=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=t.charCodeAt(n++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},fr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var o=t[s];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},nM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Kme=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var P1=0;P1<nM.length;P1++)Kme[nM.charCodeAt(P1)]=P1;var rM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var U1=0;U1<rM.length;U1++)Fg[rM.charCodeAt(U1)]=U1;var Xme=function(t){var e=t.length*.75,n=t.length,r,s=0,i,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)i=Fg[t.charCodeAt(r)],o=Fg[t.charCodeAt(r+1)],a=Fg[t.charCodeAt(r+2)],l=Fg[t.charCodeAt(r+3)],u[s++]=i<<2|o>>4,u[s++]=(o&15)<<4|a>>2,u[s++]=(a&3)<<6|l&63;return c},qme=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},Yme=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Ed=5,m_=11,l4=2,Jme=m_-Ed,cG=65536>>Ed,Zme=1<<Ed,c4=Zme-1,ege=1024>>Ed,tge=cG+ege,nge=tge,rge=32,sge=nge+rge,ige=65536>>m_,oge=1<<Jme,age=oge-1,sM=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},lge=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},cge=function(t,e){var n=Xme(t),r=Array.isArray(n)?Yme(n):new Uint32Array(n),s=Array.isArray(n)?qme(n):new Uint16Array(n),i=24,o=sM(s,i/2,r[4]/2),a=r[5]===2?sM(s,(i+r[4])/2):lge(r,Math.ceil((i+r[4])/4));return new uge(r[0],r[1],r[2],r[3],o,a)},uge=function(){function t(e,n,r,s,i,o){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=i,this.data=o}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Ed],n=(n<<l4)+(e&c4),this.data[n];if(e<=65535)return n=this.index[cG+(e-55296>>Ed)],n=(n<<l4)+(e&c4),this.data[n];if(e<this.highStart)return n=sge-ige+(e>>m_),n=this.index[n],n+=e>>Ed&age,n=this.index[n],n=(n<<l4)+(e&c4),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),iM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Age=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var j1=0;j1<iM.length;j1++)Age[iM.charCodeAt(j1)]=j1;var dge="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",oM=50,fge=1,uG=2,AG=3,hge=4,pge=5,aM=7,dG=8,lM=9,hu=10,JI=11,cM=12,ZI=13,mge=14,$g=15,ek=16,L1=17,rg=18,gge=19,uM=20,tk=21,sg=22,u4=23,Df=24,Gi=25,_g=26,Og=27,Rf=28,yge=29,XA=30,xge=31,M1=32,Q1=33,nk=34,rk=35,sk=36,Wy=37,ik=38,ew=39,tw=40,A4=41,fG=42,vge=43,bge=[9001,65288],hG="!",Rt="×",H1="÷",ok=cge(dge),_l=[XA,sk],ak=[fge,uG,AG,pge],pG=[hu,dG],AM=[Og,_g],wge=ak.concat(pG),dM=[ik,ew,tw,nk,rk],Cge=[$g,ZI],Sge=function(t,e){e===void 0&&(e="strict");var n=[],r=[],s=[];return t.forEach(function(i,o){var a=ok.get(i);if(a>oM?(s.push(!0),a-=oM):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return r.push(o),n.push(ek);if(a===hge||a===JI){if(o===0)return r.push(o),n.push(XA);var l=n[o-1];return wge.indexOf(l)===-1?(r.push(r[o-1]),n.push(l)):(r.push(o),n.push(XA))}if(r.push(o),a===xge)return n.push(e==="strict"?tk:Wy);if(a===fG||a===yge)return n.push(XA);if(a===vge)return i>=131072&&i<=196605||i>=196608&&i<=262141?n.push(Wy):n.push(XA);n.push(a)}),[r,n,s]},d4=function(t,e,n,r){var s=r[n];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var i=n;i<=r.length;){i++;var o=r[i];if(o===e)return!0;if(o!==hu)break}if(s===hu)for(var i=n;i>0;){i--;var a=r[i];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var l=n;l<=r.length;){l++;var o=r[l];if(o===e)return!0;if(o!==hu)break}if(a!==hu)break}return!1},fM=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===hu)n--;else return r}return 0},Bge=function(t,e,n,r,s){if(n[r]===0)return Rt;var i=r-1;if(Array.isArray(s)&&s[i]===!0)return Rt;var o=i-1,a=i+1,l=e[i],c=o>=0?e[o]:0,u=e[a];if(l===uG&&u===AG)return Rt;if(ak.indexOf(l)!==-1)return hG;if(ak.indexOf(u)!==-1||pG.indexOf(u)!==-1)return Rt;if(fM(i,e)===dG)return H1;if(ok.get(t[i])===JI||(l===M1||l===Q1)&&ok.get(t[a])===JI||l===aM||u===aM||l===lM||[hu,ZI,$g].indexOf(l)===-1&&u===lM||[L1,rg,gge,Df,Rf].indexOf(u)!==-1||fM(i,e)===sg||d4(u4,sg,i,e)||d4([L1,rg],tk,i,e)||d4(cM,cM,i,e))return Rt;if(l===hu)return H1;if(l===u4||u===u4)return Rt;if(u===ek||l===ek)return H1;if([ZI,$g,tk].indexOf(u)!==-1||l===mge||c===sk&&Cge.indexOf(l)!==-1||l===Rf&&u===sk||u===uM||_l.indexOf(u)!==-1&&l===Gi||_l.indexOf(l)!==-1&&u===Gi||l===Og&&[Wy,M1,Q1].indexOf(u)!==-1||[Wy,M1,Q1].indexOf(l)!==-1&&u===_g||_l.indexOf(l)!==-1&&AM.indexOf(u)!==-1||AM.indexOf(l)!==-1&&_l.indexOf(u)!==-1||[Og,_g].indexOf(l)!==-1&&(u===Gi||[sg,$g].indexOf(u)!==-1&&e[a+1]===Gi)||[sg,$g].indexOf(l)!==-1&&u===Gi||l===Gi&&[Gi,Rf,Df].indexOf(u)!==-1)return Rt;if([Gi,Rf,Df,L1,rg].indexOf(u)!==-1)for(var A=i;A>=0;){var d=e[A];if(d===Gi)return Rt;if([Rf,Df].indexOf(d)!==-1)A--;else break}if([Og,_g].indexOf(u)!==-1)for(var A=[L1,rg].indexOf(l)!==-1?o:i;A>=0;){var d=e[A];if(d===Gi)return Rt;if([Rf,Df].indexOf(d)!==-1)A--;else break}if(ik===l&&[ik,ew,nk,rk].indexOf(u)!==-1||[ew,nk].indexOf(l)!==-1&&[ew,tw].indexOf(u)!==-1||[tw,rk].indexOf(l)!==-1&&u===tw||dM.indexOf(l)!==-1&&[uM,_g].indexOf(u)!==-1||dM.indexOf(u)!==-1&&l===Og||_l.indexOf(l)!==-1&&_l.indexOf(u)!==-1||l===Df&&_l.indexOf(u)!==-1||_l.concat(Gi).indexOf(l)!==-1&&u===sg&&bge.indexOf(t[a])===-1||_l.concat(Gi).indexOf(u)!==-1&&l===rg)return Rt;if(l===A4&&u===A4){for(var f=n[i],h=1;f>0&&(f--,e[f]===A4);)h++;if(h%2!==0)return Rt}return l===M1&&u===Q1?Rt:H1},Nge=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=Sge(t,e.lineBreak),r=n[0],s=n[1],i=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(a){return[Gi,XA,fG].indexOf(a)!==-1?Wy:a}));var o=e.wordBreak==="keep-all"?i.map(function(a,l){return a&&t[l]>=19968&&t[l]<=40959}):void 0;return[r,s,o]},Ege=function(){function t(e,n,r,s){this.codePoints=e,this.required=n===hG,this.start=r,this.end=s}return t.prototype.slice=function(){return fr.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),Ige=function(t,e){var n=uS(t),r=Nge(n,e),s=r[0],i=r[1],o=r[2],a=n.length,l=0,c=0;return{next:function(){if(c>=a)return{done:!0,value:null};for(var u=Rt;c<a&&(u=Bge(n,i,s,++c,o))===Rt;);if(u!==Rt||c===a){var A=new Ege(n,u,l,c);return l=c,{value:A,done:!1}}return{done:!0,value:null}}}},kge=1,Tge=2,ax=4,hM=8,Vw=10,pM=47,iy=92,Fge=9,$ge=32,z1=34,ig=61,_ge=35,Oge=36,Dge=37,V1=39,W1=40,og=41,Rge=95,yi=45,Pge=33,Uge=60,jge=62,Lge=64,Mge=91,Qge=93,Hge=61,zge=123,G1=63,Vge=125,mM=124,Wge=126,Gge=128,gM=65533,f4=42,id=43,Kge=44,Xge=58,qge=59,Gy=46,Yge=0,Jge=8,Zge=11,eye=14,tye=31,nye=127,za=-1,mG=48,gG=97,yG=101,rye=102,sye=117,iye=122,xG=65,vG=69,bG=70,oye=85,aye=90,$s=function(t){return t>=mG&&t<=57},lye=function(t){return t>=55296&&t<=57343},Pf=function(t){return $s(t)||t>=xG&&t<=bG||t>=gG&&t<=rye},cye=function(t){return t>=gG&&t<=iye},uye=function(t){return t>=xG&&t<=aye},Aye=function(t){return cye(t)||uye(t)},dye=function(t){return t>=Gge},K1=function(t){return t===Vw||t===Fge||t===$ge},Ww=function(t){return Aye(t)||dye(t)||t===Rge},yM=function(t){return Ww(t)||$s(t)||t===yi},fye=function(t){return t>=Yge&&t<=Jge||t===Zge||t>=eye&&t<=tye||t===nye},Yc=function(t,e){return t!==iy?!1:e!==Vw},X1=function(t,e,n){return t===yi?Ww(e)||Yc(e,n):Ww(t)?!0:!!(t===iy&&Yc(t,e))},h4=function(t,e,n){return t===id||t===yi?$s(e)?!0:e===Gy&&$s(n):$s(t===Gy?e:t)},hye=function(t){var e=0,n=1;(t[e]===id||t[e]===yi)&&(t[e]===yi&&(n=-1),e++);for(var r=[];$s(t[e]);)r.push(t[e++]);var s=r.length?parseInt(fr.apply(void 0,r),10):0;t[e]===Gy&&e++;for(var i=[];$s(t[e]);)i.push(t[e++]);var o=i.length,a=o?parseInt(fr.apply(void 0,i),10):0;(t[e]===vG||t[e]===yG)&&e++;var l=1;(t[e]===id||t[e]===yi)&&(t[e]===yi&&(l=-1),e++);for(var c=[];$s(t[e]);)c.push(t[e++]);var u=c.length?parseInt(fr.apply(void 0,c),10):0;return n*(s+a*Math.pow(10,-o))*Math.pow(10,l*u)},pye={type:2},mye={type:3},gye={type:4},yye={type:13},xye={type:8},vye={type:21},bye={type:9},wye={type:10},Cye={type:11},Sye={type:12},Bye={type:14},q1={type:23},Nye={type:1},Eye={type:25},Iye={type:24},kye={type:26},Tye={type:27},Fye={type:28},$ye={type:29},_ye={type:31},lk={type:32},wG=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(uS(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==lk;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case z1:return this.consumeStringToken(z1);case _ge:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(yM(n)||Yc(r,s)){var i=X1(n,r,s)?Tge:kge,o=this.consumeName();return{type:5,value:o,flags:i}}break;case Oge:if(this.peekCodePoint(0)===ig)return this.consumeCodePoint(),yye;break;case V1:return this.consumeStringToken(V1);case W1:return pye;case og:return mye;case f4:if(this.peekCodePoint(0)===ig)return this.consumeCodePoint(),Bye;break;case id:if(h4(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Kge:return gye;case yi:var a=e,l=this.peekCodePoint(0),c=this.peekCodePoint(1);if(h4(a,l,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(X1(a,l,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===yi&&c===jge)return this.consumeCodePoint(),this.consumeCodePoint(),Iye;break;case Gy:if(h4(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case pM:if(this.peekCodePoint(0)===f4)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===f4&&(u=this.consumeCodePoint(),u===pM))return this.consumeToken();if(u===za)return this.consumeToken()}break;case Xge:return kye;case qge:return Tye;case Uge:if(this.peekCodePoint(0)===Pge&&this.peekCodePoint(1)===yi&&this.peekCodePoint(2)===yi)return this.consumeCodePoint(),this.consumeCodePoint(),Eye;break;case Lge:var A=this.peekCodePoint(0),d=this.peekCodePoint(1),f=this.peekCodePoint(2);if(X1(A,d,f)){var o=this.consumeName();return{type:7,value:o}}break;case Mge:return Fye;case iy:if(Yc(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Qge:return $ye;case Hge:if(this.peekCodePoint(0)===ig)return this.consumeCodePoint(),xye;break;case zge:return Cye;case Vge:return Sye;case sye:case oye:var h=this.peekCodePoint(0),m=this.peekCodePoint(1);return h===id&&(Pf(m)||m===G1)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case mM:if(this.peekCodePoint(0)===ig)return this.consumeCodePoint(),bye;if(this.peekCodePoint(0)===mM)return this.consumeCodePoint(),vye;break;case Wge:if(this.peekCodePoint(0)===ig)return this.consumeCodePoint(),wye;break;case za:return lk}return K1(e)?(this.consumeWhiteSpace(),_ye):$s(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Ww(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:fr(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();Pf(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===G1&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(fr.apply(void 0,e.map(function(l){return l===G1?mG:l})),16),i=parseInt(fr.apply(void 0,e.map(function(l){return l===G1?bG:l})),16);return{type:30,start:s,end:i}}var o=parseInt(fr.apply(void 0,e),16);if(this.peekCodePoint(0)===yi&&Pf(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var a=[];Pf(n)&&a.length<6;)a.push(n),n=this.consumeCodePoint();var i=parseInt(fr.apply(void 0,a),16);return{type:30,start:o,end:i}}else return{type:30,start:o,end:o}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===W1?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===W1?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===za)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===V1||n===z1){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===za||this.peekCodePoint(0)===og)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),q1)}for(;;){var s=this.consumeCodePoint();if(s===za||s===og)return{type:22,value:fr.apply(void 0,e)};if(K1(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===za||this.peekCodePoint(0)===og?(this.consumeCodePoint(),{type:22,value:fr.apply(void 0,e)}):(this.consumeBadUrlRemnants(),q1);if(s===z1||s===V1||s===W1||fye(s))return this.consumeBadUrlRemnants(),q1;if(s===iy)if(Yc(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),q1;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;K1(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===og||e===za)return;Yc(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var s=Math.min(n,e);r+=fr.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var s=this._value[r];if(s===za||s===void 0||s===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===Vw)return this._value.splice(0,r),Nye;if(s===iy){var i=this._value[r+1];i!==za&&i!==void 0&&(i===Vw?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):Yc(s,i)&&(n+=this.consumeStringSlice(r),n+=fr(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=ax,r=this.peekCodePoint(0);for((r===id||r===yi)&&e.push(this.consumeCodePoint());$s(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===Gy&&$s(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=hM;$s(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((r===vG||r===yG)&&((s===id||s===yi)&&$s(i)||$s(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=hM;$s(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[hye(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],s=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if(X1(s,i,o)){var a=this.consumeName();return{type:15,number:n,flags:r,unit:a}}return s===Dge?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Pf(e)){for(var n=fr(e);Pf(this.peekCodePoint(0))&&n.length<6;)n+=fr(this.consumeCodePoint());K1(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||lye(r)||r>1114111?gM:r}return e===za?gM:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(yM(n))e+=fr(n);else if(Yc(n,this.peekCodePoint(0)))e+=fr(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),CG=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new wG;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||Dye(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?lk:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),lx=function(t){return t.type===15},Jp=function(t){return t.type===17},dn=function(t){return t.type===20},Oye=function(t){return t.type===0},ck=function(t,e){return dn(t)&&t.value===e},SG=function(t){return t.type!==31},rp=function(t){return t.type!==31&&t.type!==4},vl=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},Dye=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},zu=function(t){return t.type===17||t.type===15},br=function(t){return t.type===16||zu(t)},BG=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},gs={type:17,number:0,flags:ax},g_={type:16,number:50,flags:ax},pu={type:16,number:100,flags:ax},Dg=function(t,e,n){var r=t[0],s=t[1];return[Sn(r,e),Sn(typeof s<"u"?s:r,n)]},Sn=function(t,e){if(t.type===16)return t.number/100*e;if(lx(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},NG="deg",EG="grad",IG="rad",kG="turn",AS={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case NG:return Math.PI*e.number/180;case EG:return Math.PI/200*e.number;case IG:return e.number;case kG:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},TG=function(t){return t.type===15&&(t.unit===NG||t.unit===EG||t.unit===IG||t.unit===kG)},FG=function(t){var e=t.filter(dn).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[gs,gs];case"to top":case"bottom":return Io(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[gs,pu];case"to right":case"left":return Io(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[pu,pu];case"to bottom":case"top":return Io(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[pu,gs];case"to left":case"right":return Io(270)}return 0},Io=function(t){return Math.PI*t/180},Fu={name:"color",parse:function(t,e){if(e.type===18){var n=Rye[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3);return mu(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3),o=e.value.substring(3,4);return mu(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6);return mu(parseInt(r,16),parseInt(s,16),parseInt(i,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6),o=e.value.substring(6,8);return mu(parseInt(r,16),parseInt(s,16),parseInt(i,16),parseInt(o,16)/255)}}if(e.type===20){var a=ic[e.value.toUpperCase()];if(typeof a<"u")return a}return ic.TRANSPARENT}},$u=function(t){return(255&t)===0},Xr=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+r+","+n+","+e/255+")":"rgb("+s+","+r+","+n+")"},mu=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},xM=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},vM=function(t,e){var n=e.filter(rp);if(n.length===3){var r=n.map(xM),s=r[0],i=r[1],o=r[2];return mu(s,i,o,1)}if(n.length===4){var a=n.map(xM),s=a[0],i=a[1],o=a[2],l=a[3];return mu(s,i,o,l)}return 0};function p4(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var bM=function(t,e){var n=e.filter(rp),r=n[0],s=n[1],i=n[2],o=n[3],a=(r.type===17?Io(r.number):AS.parse(t,r))/(Math.PI*2),l=br(s)?s.number/100:0,c=br(i)?i.number/100:0,u=typeof o<"u"&&br(o)?Sn(o,1):1;if(l===0)return mu(c*255,c*255,c*255,1);var A=c<=.5?c*(l+1):c+l-c*l,d=c*2-A,f=p4(d,A,a+1/3),h=p4(d,A,a),m=p4(d,A,a-1/3);return mu(f*255,h*255,m*255,u)},Rye={hsl:bM,hsla:bM,rgb:vM,rgba:vM},oy=function(t,e){return Fu.parse(t,CG.create(e).parseComponentValue())},ic={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Pye={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(dn(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Uye={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},dS=function(t,e){var n=Fu.parse(t,e[0]),r=e[1];return r&&br(r)?{color:n,stop:r}:{color:n,stop:null}},wM=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=gs),r.stop===null&&(r.stop=pu);for(var s=[],i=0,o=0;o<t.length;o++){var a=t[o].stop;if(a!==null){var l=Sn(a,e);l>i?s.push(l):s.push(i),i=l}else s.push(null)}for(var c=null,o=0;o<s.length;o++){var u=s[o];if(u===null)c===null&&(c=o);else if(c!==null){for(var A=o-c,d=s[c-1],f=(u-d)/(A+1),h=1;h<=A;h++)s[c+h-1]=f*h;c=null}}return t.map(function(m,g){var y=m.color;return{color:y,stop:Math.max(Math.min(1,s[g]/e),0)}})},jye=function(t,e,n){var r=e/2,s=n/2,i=Sn(t[0],e)-r,o=s-Sn(t[1],n);return(Math.atan2(o,i)+Math.PI*2)%(Math.PI*2)},Lye=function(t,e,n){var r=typeof t=="number"?t:jye(t,e,n),s=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),i=e/2,o=n/2,a=s/2,l=Math.sin(r-Math.PI/2)*a,c=Math.cos(r-Math.PI/2)*a;return[s,i-c,i+c,o-l,o+l]},ra=function(t,e){return Math.sqrt(t*t+e*e)},CM=function(t,e,n,r,s){var i=[[0,0],[0,e],[t,0],[t,e]];return i.reduce(function(o,a){var l=a[0],c=a[1],u=ra(n-l,r-c);return(s?u<o.optimumDistance:u>o.optimumDistance)?{optimumCorner:a,optimumDistance:u}:o},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},Mye=function(t,e,n,r,s){var i=0,o=0;switch(t.size){case 0:t.shape===0?i=o=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-r)),o=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(t.shape===0)i=o=Math.min(ra(e,n),ra(e,n-s),ra(e-r,n),ra(e-r,n-s));else if(t.shape===1){var a=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(e),Math.abs(e-r)),l=CM(r,s,e,n,!0),c=l[0],u=l[1];i=ra(c-e,(u-n)/a),o=a*i}break;case 1:t.shape===0?i=o=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-r)),o=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(t.shape===0)i=o=Math.max(ra(e,n),ra(e,n-s),ra(e-r,n),ra(e-r,n-s));else if(t.shape===1){var a=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(e),Math.abs(e-r)),A=CM(r,s,e,n,!1),c=A[0],u=A[1];i=ra(c-e,(u-n)/a),o=a*i}break}return Array.isArray(t.size)&&(i=Sn(t.size[0],r),o=t.size.length===2?Sn(t.size[1],s):i),[i,o]},Qye=function(t,e){var n=Io(180),r=[];return vl(e).forEach(function(s,i){if(i===0){var o=s[0];if(o.type===20&&o.value==="to"){n=FG(s);return}else if(TG(o)){n=AS.parse(t,o);return}}var a=dS(t,s);r.push(a)}),{angle:n,stops:r,type:1}},Y1=function(t,e){var n=Io(180),r=[];return vl(e).forEach(function(s,i){if(i===0){var o=s[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){n=FG(s);return}else if(TG(o)){n=(AS.parse(t,o)+Io(270))%Io(360);return}}var a=dS(t,s);r.push(a)}),{angle:n,stops:r,type:1}},Hye=function(t,e){var n=Io(180),r=[],s=1,i=0,o=3,a=[];return vl(e).forEach(function(l,c){var u=l[0];if(c===0){if(dn(u)&&u.value==="linear"){s=1;return}else if(dn(u)&&u.value==="radial"){s=2;return}}if(u.type===18){if(u.name==="from"){var A=Fu.parse(t,u.values[0]);r.push({stop:gs,color:A})}else if(u.name==="to"){var A=Fu.parse(t,u.values[0]);r.push({stop:pu,color:A})}else if(u.name==="color-stop"){var d=u.values.filter(rp);if(d.length===2){var A=Fu.parse(t,d[1]),f=d[0];Jp(f)&&r.push({stop:{type:16,number:f.number*100,flags:f.flags},color:A})}}}}),s===1?{angle:(n+Io(180))%Io(360),stops:r,type:s}:{size:o,shape:i,stops:r,position:a,type:s}},$G="closest-side",_G="farthest-side",OG="closest-corner",DG="farthest-corner",RG="circle",PG="ellipse",UG="cover",jG="contain",zye=function(t,e){var n=0,r=3,s=[],i=[];return vl(e).forEach(function(o,a){var l=!0;if(a===0){var c=!1;l=o.reduce(function(A,d){if(c)if(dn(d))switch(d.value){case"center":return i.push(g_),A;case"top":case"left":return i.push(gs),A;case"right":case"bottom":return i.push(pu),A}else(br(d)||zu(d))&&i.push(d);else if(dn(d))switch(d.value){case RG:return n=0,!1;case PG:return n=1,!1;case"at":return c=!0,!1;case $G:return r=0,!1;case UG:case _G:return r=1,!1;case jG:case OG:return r=2,!1;case DG:return r=3,!1}else if(zu(d)||br(d))return Array.isArray(r)||(r=[]),r.push(d),!1;return A},l)}if(l){var u=dS(t,o);s.push(u)}}),{size:r,shape:n,stops:s,position:i,type:2}},J1=function(t,e){var n=0,r=3,s=[],i=[];return vl(e).forEach(function(o,a){var l=!0;if(a===0?l=o.reduce(function(u,A){if(dn(A))switch(A.value){case"center":return i.push(g_),!1;case"top":case"left":return i.push(gs),!1;case"right":case"bottom":return i.push(pu),!1}else if(br(A)||zu(A))return i.push(A),!1;return u},l):a===1&&(l=o.reduce(function(u,A){if(dn(A))switch(A.value){case RG:return n=0,!1;case PG:return n=1,!1;case jG:case $G:return r=0,!1;case _G:return r=1,!1;case OG:return r=2,!1;case UG:case DG:return r=3,!1}else if(zu(A)||br(A))return Array.isArray(r)||(r=[]),r.push(A),!1;return u},l)),l){var c=dS(t,o);s.push(c)}}),{size:r,shape:n,stops:s,position:i,type:2}},Vye=function(t){return t.type===1},Wye=function(t){return t.type===2},y_={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=LG[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function Gye(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!LG[t.name])}var LG={"linear-gradient":Qye,"-moz-linear-gradient":Y1,"-ms-linear-gradient":Y1,"-o-linear-gradient":Y1,"-webkit-linear-gradient":Y1,"radial-gradient":zye,"-moz-radial-gradient":J1,"-ms-radial-gradient":J1,"-o-radial-gradient":J1,"-webkit-radial-gradient":J1,"-webkit-gradient":Hye},Kye={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return rp(r)&&Gye(r)}).map(function(r){return y_.parse(t,r)})}},Xye={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(dn(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},qye={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return vl(e).map(function(n){return n.filter(br)}).map(BG)}},Yye={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return vl(e).map(function(n){return n.filter(dn).map(function(r){return r.value}).join(" ")}).map(Jye)}},Jye=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Eh;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Eh||(Eh={}));var Zye={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return vl(e).map(function(n){return n.filter(e0e)})}},e0e=function(t){return dn(t)||br(t)},fS=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},t0e=fS("top"),n0e=fS("right"),r0e=fS("bottom"),s0e=fS("left"),hS=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return BG(n.filter(br))}}},i0e=hS("top-left"),o0e=hS("top-right"),a0e=hS("bottom-right"),l0e=hS("bottom-left"),pS=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},c0e=pS("top"),u0e=pS("right"),A0e=pS("bottom"),d0e=pS("left"),mS=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return lx(n)?n.number:0}}},f0e=mS("top"),h0e=mS("right"),p0e=mS("bottom"),m0e=mS("left"),g0e={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},y0e={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},x0e={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(dn).reduce(function(n,r){return n|v0e(r.value)},0)}},v0e=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},b0e={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},w0e={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Gw;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Gw||(Gw={}));var C0e={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Gw.STRICT;case"normal":default:return Gw.NORMAL}}},S0e={name:"line-height",initialValue:"normal",prefix:!1,type:4},SM=function(t,e){return dn(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:br(t)?Sn(t,e):e},B0e={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:y_.parse(t,e)}},N0e={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},uk={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},gS=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},E0e=gS("top"),I0e=gS("right"),k0e=gS("bottom"),T0e=gS("left"),F0e={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(dn).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},$0e={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},yS=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},_0e=yS("top"),O0e=yS("right"),D0e=yS("bottom"),R0e=yS("left"),P0e={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},U0e={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},j0e={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&ck(e[0],"none")?[]:vl(e).map(function(n){for(var r={color:ic.TRANSPARENT,offsetX:gs,offsetY:gs,blur:gs},s=0,i=0;i<n.length;i++){var o=n[i];zu(o)?(s===0?r.offsetX=o:s===1?r.offsetY=o:r.blur=o,s++):r.color=Fu.parse(t,o)}return r})}},L0e={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},M0e={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=z0e[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},Q0e=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},H0e=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),n=e[0],r=e[1];e[2],e[3];var s=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],a=e[13];return e[14],e[15],e.length===16?[n,r,s,i,o,a]:null},z0e={matrix:Q0e,matrix3d:H0e},BM={type:16,number:50,flags:ax},V0e=[BM,BM],W0e={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(br);return n.length!==2?V0e:[n[0],n[1]]}},G0e={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},ay;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(ay||(ay={}));var K0e={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return ay.BREAK_ALL;case"keep-all":return ay.KEEP_ALL;case"normal":default:return ay.NORMAL}}},X0e={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Jp(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},MG={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},q0e={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Jp(e)?e.number:1}},Y0e={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},J0e={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(dn).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},Z0e={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},exe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},txe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Jp(e))return e.number;if(dn(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},nxe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(dn).map(function(n){return n.value})}},rxe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ur=function(t,e){return(t&e)!==0},sxe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},ixe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=e.filter(SG),i=0;i<s.length;i++){var o=s[i],a=s[i+1];if(o.type===20){var l=a&&Jp(a)?a.number:1;r.push({counter:o.value,increment:l})}}return r}},oxe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(SG),s=0;s<r.length;s++){var i=r[s],o=r[s+1];if(dn(i)&&i.value!=="none"){var a=o&&Jp(o)?o.number:0;n.push({counter:i.value,reset:a})}}return n}},axe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(lx).map(function(n){return MG.parse(t,n)})}},lxe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],s=e.filter(Oye);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var o=s[i].value,a=s[i+1].value;r.push({open:o,close:a})}return r}},NM=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},cxe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&ck(e[0],"none")?[]:vl(e).map(function(n){for(var r={color:255,offsetX:gs,offsetY:gs,blur:gs,spread:gs,inset:!1},s=0,i=0;i<n.length;i++){var o=n[i];ck(o,"inset")?r.inset=!0:zu(o)?(s===0?r.offsetX=o:s===1?r.offsetY=o:s===2?r.blur=o:r.spread=o,s++):r.color=Fu.parse(t,o)}return r})}},uxe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(dn).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},Axe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},dxe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return lx(e)?e.number:0}},fxe=function(){function t(e,n){var r,s;this.animationDuration=Ke(e,axe,n.animationDuration),this.backgroundClip=Ke(e,Pye,n.backgroundClip),this.backgroundColor=Ke(e,Uye,n.backgroundColor),this.backgroundImage=Ke(e,Kye,n.backgroundImage),this.backgroundOrigin=Ke(e,Xye,n.backgroundOrigin),this.backgroundPosition=Ke(e,qye,n.backgroundPosition),this.backgroundRepeat=Ke(e,Yye,n.backgroundRepeat),this.backgroundSize=Ke(e,Zye,n.backgroundSize),this.borderTopColor=Ke(e,t0e,n.borderTopColor),this.borderRightColor=Ke(e,n0e,n.borderRightColor),this.borderBottomColor=Ke(e,r0e,n.borderBottomColor),this.borderLeftColor=Ke(e,s0e,n.borderLeftColor),this.borderTopLeftRadius=Ke(e,i0e,n.borderTopLeftRadius),this.borderTopRightRadius=Ke(e,o0e,n.borderTopRightRadius),this.borderBottomRightRadius=Ke(e,a0e,n.borderBottomRightRadius),this.borderBottomLeftRadius=Ke(e,l0e,n.borderBottomLeftRadius),this.borderTopStyle=Ke(e,c0e,n.borderTopStyle),this.borderRightStyle=Ke(e,u0e,n.borderRightStyle),this.borderBottomStyle=Ke(e,A0e,n.borderBottomStyle),this.borderLeftStyle=Ke(e,d0e,n.borderLeftStyle),this.borderTopWidth=Ke(e,f0e,n.borderTopWidth),this.borderRightWidth=Ke(e,h0e,n.borderRightWidth),this.borderBottomWidth=Ke(e,p0e,n.borderBottomWidth),this.borderLeftWidth=Ke(e,m0e,n.borderLeftWidth),this.boxShadow=Ke(e,cxe,n.boxShadow),this.color=Ke(e,g0e,n.color),this.direction=Ke(e,y0e,n.direction),this.display=Ke(e,x0e,n.display),this.float=Ke(e,b0e,n.cssFloat),this.fontFamily=Ke(e,Z0e,n.fontFamily),this.fontSize=Ke(e,exe,n.fontSize),this.fontStyle=Ke(e,rxe,n.fontStyle),this.fontVariant=Ke(e,nxe,n.fontVariant),this.fontWeight=Ke(e,txe,n.fontWeight),this.letterSpacing=Ke(e,w0e,n.letterSpacing),this.lineBreak=Ke(e,C0e,n.lineBreak),this.lineHeight=Ke(e,S0e,n.lineHeight),this.listStyleImage=Ke(e,B0e,n.listStyleImage),this.listStylePosition=Ke(e,N0e,n.listStylePosition),this.listStyleType=Ke(e,uk,n.listStyleType),this.marginTop=Ke(e,E0e,n.marginTop),this.marginRight=Ke(e,I0e,n.marginRight),this.marginBottom=Ke(e,k0e,n.marginBottom),this.marginLeft=Ke(e,T0e,n.marginLeft),this.opacity=Ke(e,q0e,n.opacity);var i=Ke(e,F0e,n.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=Ke(e,$0e,n.overflowWrap),this.paddingTop=Ke(e,_0e,n.paddingTop),this.paddingRight=Ke(e,O0e,n.paddingRight),this.paddingBottom=Ke(e,D0e,n.paddingBottom),this.paddingLeft=Ke(e,R0e,n.paddingLeft),this.paintOrder=Ke(e,uxe,n.paintOrder),this.position=Ke(e,U0e,n.position),this.textAlign=Ke(e,P0e,n.textAlign),this.textDecorationColor=Ke(e,Y0e,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=Ke(e,J0e,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=Ke(e,j0e,n.textShadow),this.textTransform=Ke(e,L0e,n.textTransform),this.transform=Ke(e,M0e,n.transform),this.transformOrigin=Ke(e,W0e,n.transformOrigin),this.visibility=Ke(e,G0e,n.visibility),this.webkitTextStrokeColor=Ke(e,Axe,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ke(e,dxe,n.webkitTextStrokeWidth),this.wordBreak=Ke(e,K0e,n.wordBreak),this.zIndex=Ke(e,X0e,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return $u(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Ur(this.display,4)||Ur(this.display,33554432)||Ur(this.display,268435456)||Ur(this.display,536870912)||Ur(this.display,67108864)||Ur(this.display,134217728)},t}(),hxe=function(){function t(e,n){this.content=Ke(e,sxe,n.content),this.quotes=Ke(e,lxe,n.quotes)}return t}(),EM=function(){function t(e,n){this.counterIncrement=Ke(e,ixe,n.counterIncrement),this.counterReset=Ke(e,oxe,n.counterReset)}return t}(),Ke=function(t,e,n){var r=new wG,s=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(s);var i=new CG(r.read());switch(e.type){case 2:var o=i.parseComponentValue();return e.parse(t,dn(o)?o.value:e.initialValue);case 0:return e.parse(t,i.parseComponentValue());case 1:return e.parse(t,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return AS.parse(t,i.parseComponentValue());case"color":return Fu.parse(t,i.parseComponentValue());case"image":return y_.parse(t,i.parseComponentValue());case"length":var a=i.parseComponentValue();return zu(a)?a:gs;case"length-percentage":var l=i.parseComponentValue();return br(l)?l:gs;case"time":return MG.parse(t,i.parseComponentValue())}break}},pxe="data-html2canvas-debug",mxe=function(t){var e=t.getAttribute(pxe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Ak=function(t,e){var n=mxe(t);return n===1||e===n},bl=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Ak(n,3))debugger;this.styles=new fxe(e,window.getComputedStyle(n,null)),hk(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=cS(this.context,n),Ak(n,4)&&(this.flags|=16)}return t}(),gxe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",IM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Z1=0;Z1<IM.length;Z1++)Rg[IM.charCodeAt(Z1)]=Z1;var yxe=function(t){var e=t.length*.75,n=t.length,r,s=0,i,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)i=Rg[t.charCodeAt(r)],o=Rg[t.charCodeAt(r+1)],a=Rg[t.charCodeAt(r+2)],l=Rg[t.charCodeAt(r+3)],u[s++]=i<<2|o>>4,u[s++]=(o&15)<<4|a>>2,u[s++]=(a&3)<<6|l&63;return c},xxe=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},vxe=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Id=5,x_=11,m4=2,bxe=x_-Id,QG=65536>>Id,wxe=1<<Id,g4=wxe-1,Cxe=1024>>Id,Sxe=QG+Cxe,Bxe=Sxe,Nxe=32,Exe=Bxe+Nxe,Ixe=65536>>x_,kxe=1<<bxe,Txe=kxe-1,kM=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},Fxe=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},$xe=function(t,e){var n=yxe(t),r=Array.isArray(n)?vxe(n):new Uint32Array(n),s=Array.isArray(n)?xxe(n):new Uint16Array(n),i=24,o=kM(s,i/2,r[4]/2),a=r[5]===2?kM(s,(i+r[4])/2):Fxe(r,Math.ceil((i+r[4])/4));return new _xe(r[0],r[1],r[2],r[3],o,a)},_xe=function(){function t(e,n,r,s,i,o){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=i,this.data=o}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Id],n=(n<<m4)+(e&g4),this.data[n];if(e<=65535)return n=this.index[QG+(e-55296>>Id)],n=(n<<m4)+(e&g4),this.data[n];if(e<this.highStart)return n=Exe-Ixe+(e>>x_),n=this.index[n],n+=e>>Id&Txe,n=this.index[n],n=(n<<m4)+(e&g4),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),TM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Oxe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var eb=0;eb<TM.length;eb++)Oxe[TM.charCodeAt(eb)]=eb;var Dxe=1,y4=2,x4=3,FM=4,$M=5,Rxe=7,_M=8,v4=9,b4=10,OM=11,DM=12,RM=13,PM=14,w4=15,Pxe=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=t.charCodeAt(n++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},Uxe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var o=t[s];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},jxe=$xe(gxe),yo="×",C4="÷",Lxe=function(t){return jxe.get(t)},Mxe=function(t,e,n){var r=n-2,s=e[r],i=e[n-1],o=e[n];if(i===y4&&o===x4)return yo;if(i===y4||i===x4||i===FM||o===y4||o===x4||o===FM)return C4;if(i===_M&&[_M,v4,OM,DM].indexOf(o)!==-1||(i===OM||i===v4)&&(o===v4||o===b4)||(i===DM||i===b4)&&o===b4||o===RM||o===$M||o===Rxe||i===Dxe)return yo;if(i===RM&&o===PM){for(;s===$M;)s=e[--r];if(s===PM)return yo}if(i===w4&&o===w4){for(var a=0;s===w4;)a++,s=e[--r];if(a%2===0)return yo}return C4},Qxe=function(t){var e=Pxe(t),n=e.length,r=0,s=0,i=e.map(Lxe);return{next:function(){if(r>=n)return{done:!0,value:null};for(var o=yo;r<n&&(o=Mxe(e,i,++r))===yo;);if(o!==yo||r===n){var a=Uxe.apply(null,e.slice(s,r));return s=r,{value:a,done:!1}}return{done:!0,value:null}}}},Hxe=function(t){for(var e=Qxe(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},zxe=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),i=Math.round(s.height);if(t.body.removeChild(r),i===e)return!0}}return!1},Vxe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,s=uS(r.data).map(function(l){return fr(l)}),i=0,o={},a=s.every(function(l,c){n.setStart(r,i),n.setEnd(r,i+l.length);var u=n.getBoundingClientRect();i+=l.length;var A=u.x>o.x||u.y>o.y;return o=u,c===0?!0:A});return t.body.removeChild(e),a},Wxe=function(){return typeof new Image().crossOrigin<"u"},Gxe=function(){return typeof new XMLHttpRequest().responseType=="string"},Kxe=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},UM=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},Xxe=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,i=e.toDataURL();s.src=i;var o=dk(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),jM(o).then(function(a){r.drawImage(a,0,0);var l=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var c=t.createElement("div");return c.style.backgroundImage="url("+i+")",c.style.height=n+"px",UM(l)?jM(dk(n,n,0,0,c)):Promise.reject(!1)}).then(function(a){return r.drawImage(a,0,0),UM(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},dk=function(t,e,n,r,s){var i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",n.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(a),a.appendChild(s),o},jM=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ps={get SUPPORT_RANGE_BOUNDS(){var t=zxe(document);return Object.defineProperty(ps,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ps.SUPPORT_RANGE_BOUNDS&&Vxe(document);return Object.defineProperty(ps,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Kxe(document);return Object.defineProperty(ps,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?Xxe(document):Promise.resolve(!1);return Object.defineProperty(ps,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Wxe();return Object.defineProperty(ps,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Gxe();return Object.defineProperty(ps,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ps,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ps,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},ly=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),qxe=function(t,e,n,r){var s=Zxe(e,n),i=[],o=0;return s.forEach(function(a){if(n.textDecorationLine.length||a.trim().length>0)if(ps.SUPPORT_RANGE_BOUNDS){var l=LM(r,o,a.length).getClientRects();if(l.length>1){var c=v_(a),u=0;c.forEach(function(d){i.push(new ly(d,pc.fromDOMRectList(t,LM(r,u+o,d.length).getClientRects()))),u+=d.length})}else i.push(new ly(a,pc.fromDOMRectList(t,l)))}else{var A=r.splitText(a.length);i.push(new ly(a,Yxe(t,r))),r=A}else ps.SUPPORT_RANGE_BOUNDS||(r=r.splitText(a.length));o+=a.length}),i},Yxe=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(r,e);var i=cS(t,r);return r.firstChild&&s.replaceChild(r.firstChild,r),i}}return pc.EMPTY},LM=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(t,e),s.setEnd(t,e+n),s},v_=function(t){if(ps.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return Hxe(t)},Jxe=function(t,e){if(ps.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return tve(t,e)},Zxe=function(t,e){return e.letterSpacing!==0?v_(t):Jxe(t,e)},eve=[32,160,4961,65792,65793,4153,4241],tve=function(t,e){for(var n=Ige(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],s,i=function(){if(s.value){var o=s.value.slice(),a=uS(o),l="";a.forEach(function(c){eve.indexOf(c)===-1?l+=fr(c):(l.length&&r.push(l),r.push(fr(c)),l="")}),l.length&&r.push(l)}};!(s=n.next()).done;)i();return r},nve=function(){function t(e,n,r){this.text=rve(n.data,r.textTransform),this.textBounds=qxe(e,this.text,r,n)}return t}(),rve=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(sve,ive);case 2:return t.toUpperCase();default:return t}},sve=/(^|\s|:|-|\(|\))([a-z])/g,ive=function(t,e,n){return t.length>0?e+n.toUpperCase():t},HG=function(t){$a(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return e}(bl),zG=function(t){$a(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return e}(bl),VG=function(t){$a(e,t);function e(n,r){var s=t.call(this,n,r)||this,i=new XMLSerializer,o=cS(n,r);return r.setAttribute("width",o.width+"px"),r.setAttribute("height",o.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(bl),WG=function(t){$a(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(bl),fk=function(t){$a(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return e}(bl),ove=[{type:15,flags:0,unit:"px",number:3}],ave=[{type:16,flags:0,number:50}],lve=function(t){return t.width>t.height?new pc(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new pc(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},cve=function(t){var e=t.type===uve?new Array(t.value.length+1).join("•"):t.value;return e.length===0?t.placeholder||"":e},Kw="checkbox",Xw="radio",uve="password",MM=707406591,b_=function(t){$a(e,t);function e(n,r){var s=t.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=cve(r),(s.type===Kw||s.type===Xw)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=lve(s.bounds)),s.type){case Kw:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=ove;break;case Xw:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=ave;break}return s}return e}(bl),GG=function(t){$a(e,t);function e(n,r){var s=t.call(this,n,r)||this,i=r.options[r.selectedIndex||0];return s.value=i&&i.text||"",s}return e}(bl),KG=function(t){$a(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(bl),XG=function(t){$a(e,t);function e(n,r){var s=t.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=YG(n,r.contentWindow.document.documentElement);var i=r.contentWindow.document.documentElement?oy(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):ic.TRANSPARENT,o=r.contentWindow.document.body?oy(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):ic.TRANSPARENT;s.backgroundColor=$u(i)?$u(o)?s.styles.backgroundColor:o:i}}catch{}return s}return e}(bl),Ave=["OL","UL","MENU"],nw=function(t,e,n,r){for(var s=e.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,JG(s)&&s.data.trim().length>0)n.textNodes.push(new nve(t,s,n.styles));else if(dh(s))if(nK(s)&&s.assignedNodes)s.assignedNodes().forEach(function(a){return nw(t,a,n,r)});else{var o=qG(t,s);o.styles.isVisible()&&(dve(s,o,r)?o.flags|=4:fve(o.styles)&&(o.flags|=2),Ave.indexOf(s.tagName)!==-1&&(o.flags|=8),n.elements.push(o),s.slot,s.shadowRoot?nw(t,s.shadowRoot,o,r):!qw(s)&&!ZG(s)&&!Yw(s)&&nw(t,s,o,r))}},qG=function(t,e){return pk(e)?new HG(t,e):eK(e)?new zG(t,e):ZG(e)?new VG(t,e):hve(e)?new WG(t,e):pve(e)?new fk(t,e):mve(e)?new b_(t,e):Yw(e)?new GG(t,e):qw(e)?new KG(t,e):tK(e)?new XG(t,e):new bl(t,e)},YG=function(t,e){var n=qG(t,e);return n.flags|=4,nw(t,e,n,n),n},dve=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||w_(t)&&n.styles.isTransparent()},fve=function(t){return t.isPositioned()||t.isFloating()},JG=function(t){return t.nodeType===Node.TEXT_NODE},dh=function(t){return t.nodeType===Node.ELEMENT_NODE},hk=function(t){return dh(t)&&typeof t.style<"u"&&!rw(t)},rw=function(t){return typeof t.className=="object"},hve=function(t){return t.tagName==="LI"},pve=function(t){return t.tagName==="OL"},mve=function(t){return t.tagName==="INPUT"},gve=function(t){return t.tagName==="HTML"},ZG=function(t){return t.tagName==="svg"},w_=function(t){return t.tagName==="BODY"},eK=function(t){return t.tagName==="CANVAS"},QM=function(t){return t.tagName==="VIDEO"},pk=function(t){return t.tagName==="IMG"},tK=function(t){return t.tagName==="IFRAME"},HM=function(t){return t.tagName==="STYLE"},yve=function(t){return t.tagName==="SCRIPT"},qw=function(t){return t.tagName==="TEXTAREA"},Yw=function(t){return t.tagName==="SELECT"},nK=function(t){return t.tagName==="SLOT"},zM=function(t){return t.tagName.indexOf("-")>0},xve=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,s=e.counterReset,i=!0;r!==null&&r.forEach(function(a){var l=n.counters[a.counter];l&&a.increment!==0&&(i=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=a.increment)});var o=[];return i&&s.forEach(function(a){var l=n.counters[a.counter];o.push(a.counter),l||(l=n.counters[a.counter]=[]),l.push(a.reset)}),o},t}(),VM={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},WM={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},vve={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},bve={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Uf=function(t,e,n,r,s,i){return t<e||t>n?Ky(t,s,i.length>0):r.integers.reduce(function(o,a,l){for(;t>=a;)t-=a,o+=r.values[l];return o},"")+i},rK=function(t,e,n,r){var s="";do n||t--,s=r(t)+s,t/=e;while(t*e>=e);return s},dr=function(t,e,n,r,s){var i=n-e+1;return(t<0?"-":"")+(rK(Math.abs(t),i,r,function(o){return fr(Math.floor(o%i)+e)})+s)},_A=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return rK(Math.abs(t),r,!1,function(s){return e[Math.floor(s%r)]})+n},Gf=1,Wc=2,Gc=4,Pg=8,Ol=function(t,e,n,r,s,i){if(t<-9999||t>9999)return Ky(t,4,s.length>0);var o=Math.abs(t),a=s;if(o===0)return e[0]+a;for(var l=0;o>0&&l<=4;l++){var c=o%10;c===0&&Ur(i,Gf)&&a!==""?a=e[c]+a:c>1||c===1&&l===0||c===1&&l===1&&Ur(i,Wc)||c===1&&l===1&&Ur(i,Gc)&&t>100||c===1&&l>1&&Ur(i,Pg)?a=e[c]+(l>0?n[l-1]:"")+a:c===1&&l>0&&(a=n[l-1]+a),o=Math.floor(o/10)}return(t<0?r:"")+a},GM="十百千萬",KM="拾佰仟萬",XM="マイナス",S4="마이너스",Ky=function(t,e,n){var r=n?". ":"",s=n?"、":"",i=n?", ":"",o=n?" ":"";switch(e){case 0:return"•"+o;case 1:return"◦"+o;case 2:return"◾"+o;case 5:var a=dr(t,48,57,!0,r);return a.length<4?"0"+a:a;case 4:return _A(t,"〇一二三四五六七八九",s);case 6:return Uf(t,1,3999,VM,3,r).toLowerCase();case 7:return Uf(t,1,3999,VM,3,r);case 8:return dr(t,945,969,!1,r);case 9:return dr(t,97,122,!1,r);case 10:return dr(t,65,90,!1,r);case 11:return dr(t,1632,1641,!0,r);case 12:case 49:return Uf(t,1,9999,WM,3,r);case 35:return Uf(t,1,9999,WM,3,r).toLowerCase();case 13:return dr(t,2534,2543,!0,r);case 14:case 30:return dr(t,6112,6121,!0,r);case 15:return _A(t,"子丑寅卯辰巳午未申酉戌亥",s);case 16:return _A(t,"甲乙丙丁戊己庚辛壬癸",s);case 17:case 48:return Ol(t,"零一二三四五六七八九",GM,"負",s,Wc|Gc|Pg);case 47:return Ol(t,"零壹貳參肆伍陸柒捌玖",KM,"負",s,Gf|Wc|Gc|Pg);case 42:return Ol(t,"零一二三四五六七八九",GM,"负",s,Wc|Gc|Pg);case 41:return Ol(t,"零壹贰叁肆伍陆柒捌玖",KM,"负",s,Gf|Wc|Gc|Pg);case 26:return Ol(t,"〇一二三四五六七八九","十百千万",XM,s,0);case 25:return Ol(t,"零壱弐参四伍六七八九","拾百千万",XM,s,Gf|Wc|Gc);case 31:return Ol(t,"영일이삼사오육칠팔구","십백천만",S4,i,Gf|Wc|Gc);case 33:return Ol(t,"零一二三四五六七八九","十百千萬",S4,i,0);case 32:return Ol(t,"零壹貳參四五六七八九","拾百千",S4,i,Gf|Wc|Gc);case 18:return dr(t,2406,2415,!0,r);case 20:return Uf(t,1,19999,bve,3,r);case 21:return dr(t,2790,2799,!0,r);case 22:return dr(t,2662,2671,!0,r);case 22:return Uf(t,1,10999,vve,3,r);case 23:return _A(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return _A(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return dr(t,3302,3311,!0,r);case 28:return _A(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",s);case 29:return _A(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",s);case 34:return dr(t,3792,3801,!0,r);case 37:return dr(t,6160,6169,!0,r);case 38:return dr(t,4160,4169,!0,r);case 39:return dr(t,2918,2927,!0,r);case 40:return dr(t,1776,1785,!0,r);case 43:return dr(t,3046,3055,!0,r);case 44:return dr(t,3174,3183,!0,r);case 45:return dr(t,3664,3673,!0,r);case 46:return dr(t,3872,3881,!0,r);case 3:default:return dr(t,48,57,!0,r)}},sK="data-html2canvas-ignore",qM=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new xve,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,s=wve(e,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,a=s.contentWindow,l=a.document,c=Bve(s).then(function(){return Xs(r,void 0,void 0,function(){var u,A;return Is(this,function(d){switch(d.label){case 0:return this.scrolledElements.forEach(kve),a&&(a.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==n.top||a.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-n.left,a.scrollY-n.top,0,0))),u=this.options.onclone,A=this.clonedReferenceElement,typeof A>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:d.sent(),d.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Sve(l)]:[3,4];case 3:d.sent(),d.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(l,A)}).then(function(){return s})]:[2,s]}})})});return l.open(),l.write(Eve(document.doctype)+"<html></html>"),Ive(this.referenceElement.ownerDocument,i,o),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),c},t.prototype.createElementClone=function(e){if(Ak(e,2))debugger;if(eK(e))return this.createCanvasClone(e);if(QM(e))return this.createVideoClone(e);if(HM(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return pk(n)&&(pk(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),zM(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return B4(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(i,o){return o&&typeof o.cssText=="string"?i+o.cssText:i},""),s=e.cloneNode(!1);return s.textContent=r,s}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var i=e.getContext("2d"),o=s.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var a=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(a){var l=a.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,n,r){(!dh(n)||!yve(n)&&!n.hasAttribute(sK)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!dh(n)||!HM(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var s=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(dh(i)&&nK(i)&&typeof i.assignedNodes=="function"){var o=i.assignedNodes();o.length&&o.forEach(function(a){return s.appendChildNode(n,a,r)})}else this.appendChildNode(n,i,r)},t.prototype.cloneNode=function(e,n){if(JG(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&dh(e)&&(hk(e)||rw(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var i=r.getComputedStyle(e),o=r.getComputedStyle(e,":before"),a=r.getComputedStyle(e,":after");this.referenceElement===e&&hk(s)&&(this.clonedReferenceElement=s),w_(s)&&$ve(s);var l=this.counters.parse(new EM(this.context,i)),c=this.resolvePseudoContent(e,s,o,cy.BEFORE);zM(e)&&(n=!0),QM(e)||this.cloneChildNodes(e,s,n),c&&s.insertBefore(c,s.firstChild);var u=this.resolvePseudoContent(e,s,a,cy.AFTER);return u&&s.appendChild(u),this.counters.pop(l),(i&&(this.options.copyStyles||rw(e))&&!tK(e)||n)&&B4(i,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(qw(e)||Yw(e))&&(qw(s)||Yw(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,s){var i=this;if(r){var o=r.content,a=n.ownerDocument;if(!(!a||!o||o==="none"||o==="-moz-alt-content"||r.display==="none")){this.counters.parse(new EM(this.context,r));var l=new hxe(this.context,r),c=a.createElement("html2canvaspseudoelement");B4(r,c),l.content.forEach(function(A){if(A.type===0)c.appendChild(a.createTextNode(A.value));else if(A.type===22){var d=a.createElement("img");d.src=A.value,d.style.opacity="1",c.appendChild(d)}else if(A.type===18){if(A.name==="attr"){var f=A.values.filter(dn);f.length&&c.appendChild(a.createTextNode(e.getAttribute(f[0].value)||""))}else if(A.name==="counter"){var h=A.values.filter(rp),m=h[0],g=h[1];if(m&&dn(m)){var y=i.counters.getCounterValue(m.value),x=g&&dn(g)?uk.parse(i.context,g.value):3;c.appendChild(a.createTextNode(Ky(y,x,!1)))}}else if(A.name==="counters"){var v=A.values.filter(rp),m=v[0],b=v[1],g=v[2];if(m&&dn(m)){var w=i.counters.getCounterValues(m.value),C=g&&dn(g)?uk.parse(i.context,g.value):3,B=b&&b.type===0?b.value:"",S=w.map(function(O){return Ky(O,C,!1)}).join(B);c.appendChild(a.createTextNode(S))}}}else if(A.type===20)switch(A.value){case"open-quote":c.appendChild(a.createTextNode(NM(l.quotes,i.quoteDepth++,!0)));break;case"close-quote":c.appendChild(a.createTextNode(NM(l.quotes,--i.quoteDepth,!1)));break;default:c.appendChild(a.createTextNode(A.value))}}),c.className=mk+" "+gk;var u=s===cy.BEFORE?" "+mk:" "+gk;return rw(n)?n.className.baseValue+=u:n.className+=u,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),cy;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(cy||(cy={}));var wve=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(sK,"true"),t.body.appendChild(n),n},Cve=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},Sve=function(t){return Promise.all([].slice.call(t.images,0).map(Cve))},Bve=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var i=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(i),e(t))},50)}})},Nve=["all","d","content"],B4=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);Nve.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},Eve=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},Ive=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},kve=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},Tve=":before",Fve=":after",mk="___html2canvas___pseudoelement_before",gk="___html2canvas___pseudoelement_after",YM=`{
    content: "" !important;
    display: none !important;
}`,$ve=function(t){_ve(t,"."+mk+Tve+YM+`
         .`+gk+Fve+YM)},_ve=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},iK=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),Ove=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(E4(e)||Uve(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Xs(this,void 0,void 0,function(){var n,r,s,i,o=this;return Is(this,function(a){switch(a.label){case 0:return n=iK.isSameOrigin(e),r=!N4(e)&&this._options.useCORS===!0&&ps.SUPPORT_CORS_IMAGES&&!n,s=!N4(e)&&!n&&!E4(e)&&typeof this._options.proxy=="string"&&ps.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!N4(e)&&!E4(e)&&!s&&!r?[2]:(i=e,s?[4,this.proxy(i)]:[3,2]);case 1:i=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,c){var u=new Image;u.onload=function(){return l(u)},u.onerror=c,(jve(i)||r)&&(u.crossOrigin="anonymous"),u.src=i,u.complete===!0&&setTimeout(function(){return l(u)},500),o._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(i,o){var a=ps.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(a==="text")i(l.response);else{var A=new FileReader;A.addEventListener("load",function(){return i(A.result)},!1),A.addEventListener("error",function(d){return o(d)},!1),A.readAsDataURL(l.response)}else o("Failed to proxy resource "+s+" with status code "+l.status)},l.onerror=o;var c=r.indexOf("?")>-1?"&":"?";if(l.open("GET",""+r+c+"url="+encodeURIComponent(e)+"&responseType="+a),a!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=a),n._options.imageTimeout){var u=n._options.imageTimeout;l.timeout=u,l.ontimeout=function(){return o("Timed out ("+u+"ms) proxying "+s)}}l.send()})},t}(),Dve=/^data:image\/svg\+xml/i,Rve=/^data:image\/.*;base64,/i,Pve=/^data:image\/.*/i,Uve=function(t){return ps.SUPPORT_SVG_DRAWING||!Lve(t)},N4=function(t){return Pve.test(t)},jve=function(t){return Rve.test(t)},E4=function(t){return t.substr(0,4)==="blob"},Lve=function(t){return t.substr(-3).toLowerCase()==="svg"||Dve.test(t)},Ve=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),jf=function(t,e,n){return new Ve(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},tb=function(){function t(e,n,r,s){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=s}return t.prototype.subdivide=function(e,n){var r=jf(this.start,this.startControl,e),s=jf(this.startControl,this.endControl,e),i=jf(this.endControl,this.end,e),o=jf(r,s,e),a=jf(s,i,e),l=jf(o,a,e);return n?new t(this.start,r,o,l):new t(l,a,i,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),So=function(t){return t.type===1},Mve=function(){function t(e){var n=e.styles,r=e.bounds,s=Dg(n.borderTopLeftRadius,r.width,r.height),i=s[0],o=s[1],a=Dg(n.borderTopRightRadius,r.width,r.height),l=a[0],c=a[1],u=Dg(n.borderBottomRightRadius,r.width,r.height),A=u[0],d=u[1],f=Dg(n.borderBottomLeftRadius,r.width,r.height),h=f[0],m=f[1],g=[];g.push((i+l)/r.width),g.push((h+A)/r.width),g.push((o+m)/r.height),g.push((c+d)/r.height);var y=Math.max.apply(Math,g);y>1&&(i/=y,o/=y,l/=y,c/=y,A/=y,d/=y,h/=y,m/=y);var x=r.width-l,v=r.height-d,b=r.width-A,w=r.height-m,C=n.borderTopWidth,B=n.borderRightWidth,S=n.borderBottomWidth,N=n.borderLeftWidth,k=Sn(n.paddingTop,e.bounds.width),O=Sn(n.paddingRight,e.bounds.width),U=Sn(n.paddingBottom,e.bounds.width),P=Sn(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?Un(r.left+N/3,r.top+C/3,i-N/3,o-C/3,Zt.TOP_LEFT):new Ve(r.left+N/3,r.top+C/3),this.topRightBorderDoubleOuterBox=i>0||o>0?Un(r.left+x,r.top+C/3,l-B/3,c-C/3,Zt.TOP_RIGHT):new Ve(r.left+r.width-B/3,r.top+C/3),this.bottomRightBorderDoubleOuterBox=A>0||d>0?Un(r.left+b,r.top+v,A-B/3,d-S/3,Zt.BOTTOM_RIGHT):new Ve(r.left+r.width-B/3,r.top+r.height-S/3),this.bottomLeftBorderDoubleOuterBox=h>0||m>0?Un(r.left+N/3,r.top+w,h-N/3,m-S/3,Zt.BOTTOM_LEFT):new Ve(r.left+N/3,r.top+r.height-S/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?Un(r.left+N*2/3,r.top+C*2/3,i-N*2/3,o-C*2/3,Zt.TOP_LEFT):new Ve(r.left+N*2/3,r.top+C*2/3),this.topRightBorderDoubleInnerBox=i>0||o>0?Un(r.left+x,r.top+C*2/3,l-B*2/3,c-C*2/3,Zt.TOP_RIGHT):new Ve(r.left+r.width-B*2/3,r.top+C*2/3),this.bottomRightBorderDoubleInnerBox=A>0||d>0?Un(r.left+b,r.top+v,A-B*2/3,d-S*2/3,Zt.BOTTOM_RIGHT):new Ve(r.left+r.width-B*2/3,r.top+r.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=h>0||m>0?Un(r.left+N*2/3,r.top+w,h-N*2/3,m-S*2/3,Zt.BOTTOM_LEFT):new Ve(r.left+N*2/3,r.top+r.height-S*2/3),this.topLeftBorderStroke=i>0||o>0?Un(r.left+N/2,r.top+C/2,i-N/2,o-C/2,Zt.TOP_LEFT):new Ve(r.left+N/2,r.top+C/2),this.topRightBorderStroke=i>0||o>0?Un(r.left+x,r.top+C/2,l-B/2,c-C/2,Zt.TOP_RIGHT):new Ve(r.left+r.width-B/2,r.top+C/2),this.bottomRightBorderStroke=A>0||d>0?Un(r.left+b,r.top+v,A-B/2,d-S/2,Zt.BOTTOM_RIGHT):new Ve(r.left+r.width-B/2,r.top+r.height-S/2),this.bottomLeftBorderStroke=h>0||m>0?Un(r.left+N/2,r.top+w,h-N/2,m-S/2,Zt.BOTTOM_LEFT):new Ve(r.left+N/2,r.top+r.height-S/2),this.topLeftBorderBox=i>0||o>0?Un(r.left,r.top,i,o,Zt.TOP_LEFT):new Ve(r.left,r.top),this.topRightBorderBox=l>0||c>0?Un(r.left+x,r.top,l,c,Zt.TOP_RIGHT):new Ve(r.left+r.width,r.top),this.bottomRightBorderBox=A>0||d>0?Un(r.left+b,r.top+v,A,d,Zt.BOTTOM_RIGHT):new Ve(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=h>0||m>0?Un(r.left,r.top+w,h,m,Zt.BOTTOM_LEFT):new Ve(r.left,r.top+r.height),this.topLeftPaddingBox=i>0||o>0?Un(r.left+N,r.top+C,Math.max(0,i-N),Math.max(0,o-C),Zt.TOP_LEFT):new Ve(r.left+N,r.top+C),this.topRightPaddingBox=l>0||c>0?Un(r.left+Math.min(x,r.width-B),r.top+C,x>r.width+B?0:Math.max(0,l-B),Math.max(0,c-C),Zt.TOP_RIGHT):new Ve(r.left+r.width-B,r.top+C),this.bottomRightPaddingBox=A>0||d>0?Un(r.left+Math.min(b,r.width-N),r.top+Math.min(v,r.height-S),Math.max(0,A-B),Math.max(0,d-S),Zt.BOTTOM_RIGHT):new Ve(r.left+r.width-B,r.top+r.height-S),this.bottomLeftPaddingBox=h>0||m>0?Un(r.left+N,r.top+Math.min(w,r.height-S),Math.max(0,h-N),Math.max(0,m-S),Zt.BOTTOM_LEFT):new Ve(r.left+N,r.top+r.height-S),this.topLeftContentBox=i>0||o>0?Un(r.left+N+P,r.top+C+k,Math.max(0,i-(N+P)),Math.max(0,o-(C+k)),Zt.TOP_LEFT):new Ve(r.left+N+P,r.top+C+k),this.topRightContentBox=l>0||c>0?Un(r.left+Math.min(x,r.width+N+P),r.top+C+k,x>r.width+N+P?0:l-N+P,c-(C+k),Zt.TOP_RIGHT):new Ve(r.left+r.width-(B+O),r.top+C+k),this.bottomRightContentBox=A>0||d>0?Un(r.left+Math.min(b,r.width-(N+P)),r.top+Math.min(v,r.height+C+k),Math.max(0,A-(B+O)),d-(S+U),Zt.BOTTOM_RIGHT):new Ve(r.left+r.width-(B+O),r.top+r.height-(S+U)),this.bottomLeftContentBox=h>0||m>0?Un(r.left+N+P,r.top+w,Math.max(0,h-(N+P)),m-(S+U),Zt.BOTTOM_LEFT):new Ve(r.left+N+P,r.top+r.height-(S+U))}return t}(),Zt;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Zt||(Zt={}));var Un=function(t,e,n,r,s){var i=4*((Math.sqrt(2)-1)/3),o=n*i,a=r*i,l=t+n,c=e+r;switch(s){case Zt.TOP_LEFT:return new tb(new Ve(t,c),new Ve(t,c-a),new Ve(l-o,e),new Ve(l,e));case Zt.TOP_RIGHT:return new tb(new Ve(t,e),new Ve(t+o,e),new Ve(l,c-a),new Ve(l,c));case Zt.BOTTOM_RIGHT:return new tb(new Ve(l,e),new Ve(l,e+a),new Ve(t+o,c),new Ve(t,c));case Zt.BOTTOM_LEFT:default:return new tb(new Ve(l,c),new Ve(l-o,c),new Ve(t,e+a),new Ve(t,e))}},Jw=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},Qve=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Zw=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},Hve=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),nb=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),zve=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),Vve=function(t){return t.type===0},oK=function(t){return t.type===1},Wve=function(t){return t.type===2},JM=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},Gve=function(t,e,n,r,s){return t.map(function(i,o){switch(o){case 0:return i.add(e,n);case 1:return i.add(e+r,n);case 2:return i.add(e+r,n+s);case 3:return i.add(e,n+s)}return i})},aK=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),lK=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new Mve(this.container),this.container.styles.opacity<1&&this.effects.push(new zve(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new Hve(r,s,i))}if(this.container.styles.overflowX!==0){var o=Jw(this.curves),a=Zw(this.curves);JM(o,a)?this.effects.push(new nb(o,6)):(this.effects.push(new nb(o,2)),this.effects.push(new nb(a,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var i=r.effects.filter(function(l){return!oK(l)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,i),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var o=Jw(r.curves),a=Zw(r.curves);JM(o,a)||s.unshift(new nb(a,6))}}else s.unshift.apply(s,i);r=r.parent}return s.filter(function(l){return Ur(l.target,e)})},t}(),yk=function(t,e,n,r){t.container.elements.forEach(function(s){var i=Ur(s.flags,4),o=Ur(s.flags,2),a=new lK(s,t);Ur(s.styles.display,2048)&&r.push(a);var l=Ur(s.flags,8)?[]:r;if(i||o){var c=i||s.styles.isPositioned()?n:e,u=new aK(a);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var A=s.styles.zIndex.order;if(A<0){var d=0;c.negativeZIndex.some(function(h,m){return A>h.element.container.styles.zIndex.order?(d=m,!1):d>0}),c.negativeZIndex.splice(d,0,u)}else if(A>0){var f=0;c.positiveZIndex.some(function(h,m){return A>=h.element.container.styles.zIndex.order?(f=m+1,!1):f>0}),c.positiveZIndex.splice(f,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else s.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);yk(a,u,i?u:n,l)}else s.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),yk(a,e,n,l);Ur(s.flags,8)&&cK(s,l)})},cK=function(t,e){for(var n=t instanceof fk?t.start:1,r=t instanceof fk?t.reversed:!1,s=0;s<e.length;s++){var i=e[s];i.container instanceof WG&&typeof i.container.value=="number"&&i.container.value!==0&&(n=i.container.value),i.listValue=Ky(n,i.container.styles.listStyleType,!0),n+=r?-1:1}},Kve=function(t){var e=new lK(t,null),n=new aK(e),r=[];return yk(e,n,n,r),cK(e.container,r),n},ZM=function(t,e){switch(e){case 0:return ko(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return ko(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return ko(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return ko(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},Xve=function(t,e){switch(e){case 0:return ko(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return ko(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return ko(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return ko(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},qve=function(t,e){switch(e){case 0:return ko(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return ko(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return ko(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return ko(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},Yve=function(t,e){switch(e){case 0:return rb(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return rb(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return rb(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return rb(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},rb=function(t,e){var n=[];return So(t)?n.push(t.subdivide(.5,!1)):n.push(t),So(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},ko=function(t,e,n,r){var s=[];return So(t)?s.push(t.subdivide(.5,!1)):s.push(t),So(n)?s.push(n.subdivide(.5,!0)):s.push(n),So(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),So(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},uK=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},e2=function(t){var e=t.styles,n=t.bounds,r=Sn(e.paddingLeft,n.width),s=Sn(e.paddingRight,n.width),i=Sn(e.paddingTop,n.width),o=Sn(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+s),-(e.borderTopWidth+e.borderBottomWidth+i+o))},Jve=function(t,e){return t===0?e.bounds:t===2?e2(e):uK(e)},Zve=function(t,e){return t===0?e.bounds:t===2?e2(e):uK(e)},I4=function(t,e,n){var r=Jve(Kf(t.styles.backgroundOrigin,e),t),s=Zve(Kf(t.styles.backgroundClip,e),t),i=e1e(Kf(t.styles.backgroundSize,e),n,r),o=i[0],a=i[1],l=Dg(Kf(t.styles.backgroundPosition,e),r.width-o,r.height-a),c=t1e(Kf(t.styles.backgroundRepeat,e),l,i,r,s),u=Math.round(r.left+l[0]),A=Math.round(r.top+l[1]);return[c,u,A,o,a]},Lf=function(t){return dn(t)&&t.value===Eh.AUTO},sb=function(t){return typeof t=="number"},e1e=function(t,e,n){var r=e[0],s=e[1],i=e[2],o=t[0],a=t[1];if(!o)return[0,0];if(br(o)&&a&&br(a))return[Sn(o,n.width),Sn(a,n.height)];var l=sb(i);if(dn(o)&&(o.value===Eh.CONTAIN||o.value===Eh.COVER)){if(sb(i)){var c=n.width/n.height;return c<i!=(o.value===Eh.COVER)?[n.width,n.width/i]:[n.height*i,n.height]}return[n.width,n.height]}var u=sb(r),A=sb(s),d=u||A;if(Lf(o)&&(!a||Lf(a))){if(u&&A)return[r,s];if(!l&&!d)return[n.width,n.height];if(d&&l){var f=u?r:s*i,h=A?s:r/i;return[f,h]}var m=u?r:n.width,g=A?s:n.height;return[m,g]}if(l){var y=0,x=0;return br(o)?y=Sn(o,n.width):br(a)&&(x=Sn(a,n.height)),Lf(o)?y=x*i:(!a||Lf(a))&&(x=y/i),[y,x]}var v=null,b=null;if(br(o)?v=Sn(o,n.width):a&&br(a)&&(b=Sn(a,n.height)),v!==null&&(!a||Lf(a))&&(b=u&&A?v/r*s:n.height),b!==null&&Lf(o)&&(v=u&&A?b/s*r:n.width),v!==null&&b!==null)return[v,b];throw new Error("Unable to calculate background-size for element")},Kf=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},t1e=function(t,e,n,r,s){var i=e[0],o=e[1],a=n[0],l=n[1];switch(t){case 2:return[new Ve(Math.round(r.left),Math.round(r.top+o)),new Ve(Math.round(r.left+r.width),Math.round(r.top+o)),new Ve(Math.round(r.left+r.width),Math.round(l+r.top+o)),new Ve(Math.round(r.left),Math.round(l+r.top+o))];case 3:return[new Ve(Math.round(r.left+i),Math.round(r.top)),new Ve(Math.round(r.left+i+a),Math.round(r.top)),new Ve(Math.round(r.left+i+a),Math.round(r.height+r.top)),new Ve(Math.round(r.left+i),Math.round(r.height+r.top))];case 1:return[new Ve(Math.round(r.left+i),Math.round(r.top+o)),new Ve(Math.round(r.left+i+a),Math.round(r.top+o)),new Ve(Math.round(r.left+i+a),Math.round(r.top+o+l)),new Ve(Math.round(r.left+i),Math.round(r.top+o+l))];default:return[new Ve(Math.round(s.left),Math.round(s.top)),new Ve(Math.round(s.left+s.width),Math.round(s.top)),new Ve(Math.round(s.left+s.width),Math.round(s.height+s.top)),new Ve(Math.round(s.left),Math.round(s.height+s.top))]}},n1e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e6="Hidden Text",r1e=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",o.appendChild(r),s.src=n1e,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=n,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(e6)),r.appendChild(i),r.appendChild(s);var a=s.offsetTop-i.offsetTop+2;r.removeChild(i),r.appendChild(this._document.createTextNode(e6)),r.style.lineHeight="normal",s.style.verticalAlign="super";var l=s.offsetTop-r.offsetTop+2;return o.removeChild(r),{baseline:a,middle:l}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),AK=function(){function t(e,n){this.context=e,this.options=n}return t}(),s1e=1e4,i1e=function(t){$a(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new r1e(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},e.prototype.applyEffect=function(n){this.ctx.save(),Wve(n)&&(this.ctx.globalAlpha=n.opacity),Vve(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),oK(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Xs(this,void 0,void 0,function(){var r;return Is(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Xs(this,void 0,void 0,function(){return Is(this,function(r){switch(r.label){case 0:if(Ur(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,s){var i=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var o=v_(n.text);o.reduce(function(a,l){return i.ctx.fillText(l,a,n.bounds.top+s),a+i.ctx.measureText(l).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),s=u1e(n.fontFamily).join(", "),i=lx(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,i,s].join(" "),s,i]},e.prototype.renderTextNode=function(n,r){return Xs(this,void 0,void 0,function(){var s,i,o,a,l,c,u,A,d=this;return Is(this,function(f){return s=this.createFontStyle(r),i=s[0],o=s[1],a=s[2],this.ctx.font=i,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(o,a),c=l.baseline,u=l.middle,A=r.paintOrder,n.textBounds.forEach(function(h){A.forEach(function(m){switch(m){case 0:d.ctx.fillStyle=Xr(r.color),d.renderTextWithLetterSpacing(h,r.letterSpacing,c);var g=r.textShadow;g.length&&h.text.trim().length&&(g.slice(0).reverse().forEach(function(y){d.ctx.shadowColor=Xr(y.color),d.ctx.shadowOffsetX=y.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=y.offsetY.number*d.options.scale,d.ctx.shadowBlur=y.blur.number,d.renderTextWithLetterSpacing(h,r.letterSpacing,c)}),d.ctx.shadowColor="",d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),r.textDecorationLine.length&&(d.ctx.fillStyle=Xr(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(y){switch(y){case 1:d.ctx.fillRect(h.bounds.left,Math.round(h.bounds.top+c),h.bounds.width,1);break;case 2:d.ctx.fillRect(h.bounds.left,Math.round(h.bounds.top),h.bounds.width,1);break;case 3:d.ctx.fillRect(h.bounds.left,Math.ceil(h.bounds.top+u),h.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&h.text.trim().length&&(d.ctx.strokeStyle=Xr(r.webkitTextStrokeColor),d.ctx.lineWidth=r.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?"miter":"round",d.ctx.strokeText(h.text,h.bounds.left,h.bounds.top+c)),d.ctx.strokeStyle="",d.ctx.lineWidth=0,d.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var i=e2(n),o=Zw(r);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Xs(this,void 0,void 0,function(){var r,s,i,o,a,l,x,x,c,u,A,d,b,f,h,w,m,g,y,x,v,b,w;return Is(this,function(C){switch(C.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,i=r.styles,o=0,a=r.textNodes,C.label=1;case 1:return o<a.length?(l=a[o],[4,this.renderTextNode(l,i)]):[3,4];case 2:C.sent(),C.label=3;case 3:return o++,[3,1];case 4:if(!(r instanceof HG))return[3,8];C.label=5;case 5:return C.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return x=C.sent(),this.renderReplacedElement(r,s,x),[3,8];case 7:return C.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof zG&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof VG))return[3,12];C.label=9;case 9:return C.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return x=C.sent(),this.renderReplacedElement(r,s,x),[3,12];case 11:return C.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof XG&&r.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,c.render(r.tree)]):[3,14];case 13:u=C.sent(),r.width&&r.height&&this.ctx.drawImage(u,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),C.label=14;case 14:if(r instanceof b_&&(A=Math.min(r.bounds.width,r.bounds.height),r.type===Kw?r.checked&&(this.ctx.save(),this.path([new Ve(r.bounds.left+A*.39363,r.bounds.top+A*.79),new Ve(r.bounds.left+A*.16,r.bounds.top+A*.5549),new Ve(r.bounds.left+A*.27347,r.bounds.top+A*.44071),new Ve(r.bounds.left+A*.39694,r.bounds.top+A*.5649),new Ve(r.bounds.left+A*.72983,r.bounds.top+A*.23),new Ve(r.bounds.left+A*.84,r.bounds.top+A*.34085),new Ve(r.bounds.left+A*.39363,r.bounds.top+A*.79)]),this.ctx.fillStyle=Xr(MM),this.ctx.fill(),this.ctx.restore()):r.type===Xw&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+A/2,r.bounds.top+A/2,A/4,0,Math.PI*2,!0),this.ctx.fillStyle=Xr(MM),this.ctx.fill(),this.ctx.restore())),o1e(r)&&r.value.length){switch(d=this.createFontStyle(i),b=d[0],f=d[1],h=this.fontMetrics.getMetrics(b,f).baseline,this.ctx.font=b,this.ctx.fillStyle=Xr(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=l1e(r.styles.textAlign),w=e2(r),m=0,r.styles.textAlign){case 1:m+=w.width/2;break;case 2:m+=w.width;break}g=w.add(m,0,0,-w.height/2+1),this.ctx.save(),this.path([new Ve(w.left,w.top),new Ve(w.left+w.width,w.top),new Ve(w.left+w.width,w.top+w.height),new Ve(w.left,w.top+w.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new ly(r.value,g),i.letterSpacing,h),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ur(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(y=r.styles.listStyleImage,y.type!==0)return[3,18];x=void 0,v=y.url,C.label=15;case 15:return C.trys.push([15,17,,18]),[4,this.context.cache.match(v)];case 16:return x=C.sent(),this.ctx.drawImage(x,r.bounds.left-(x.width+10),r.bounds.top),[3,18];case 17:return C.sent(),this.context.logger.error("Error loading list-style-image "+v),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(b=this.createFontStyle(i)[0],this.ctx.font=b,this.ctx.fillStyle=Xr(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",w=new pc(r.bounds.left,r.bounds.top+Sn(r.styles.paddingTop,r.bounds.width),r.bounds.width,SM(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new ly(n.listValue,w),i.letterSpacing,SM(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),C.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Xs(this,void 0,void 0,function(){var r,s,y,i,o,y,a,l,y,c,u,y,A,d,y,f,h,y,m,g,y;return Is(this,function(x){switch(x.label){case 0:if(Ur(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:x.sent(),r=0,s=n.negativeZIndex,x.label=2;case 2:return r<s.length?(y=s[r],[4,this.renderStack(y)]):[3,5];case 3:x.sent(),x.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:x.sent(),i=0,o=n.nonInlineLevel,x.label=7;case 7:return i<o.length?(y=o[i],[4,this.renderNode(y)]):[3,10];case 8:x.sent(),x.label=9;case 9:return i++,[3,7];case 10:a=0,l=n.nonPositionedFloats,x.label=11;case 11:return a<l.length?(y=l[a],[4,this.renderStack(y)]):[3,14];case 12:x.sent(),x.label=13;case 13:return a++,[3,11];case 14:c=0,u=n.nonPositionedInlineLevel,x.label=15;case 15:return c<u.length?(y=u[c],[4,this.renderStack(y)]):[3,18];case 16:x.sent(),x.label=17;case 17:return c++,[3,15];case 18:A=0,d=n.inlineLevel,x.label=19;case 19:return A<d.length?(y=d[A],[4,this.renderNode(y)]):[3,22];case 20:x.sent(),x.label=21;case 21:return A++,[3,19];case 22:f=0,h=n.zeroOrAutoZIndexOrTransformedOrOpacity,x.label=23;case 23:return f<h.length?(y=h[f],[4,this.renderStack(y)]):[3,26];case 24:x.sent(),x.label=25;case 25:return f++,[3,23];case 26:m=0,g=n.positiveZIndex,x.label=27;case 27:return m<g.length?(y=g[m],[4,this.renderStack(y)]):[3,30];case 28:x.sent(),x.label=29;case 29:return m++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(s,i){var o=So(s)?s.start:s;i===0?r.ctx.moveTo(o.x,o.y):r.ctx.lineTo(o.x,o.y),So(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(n,r,s,i){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},e.prototype.resizeImage=function(n,r,s){var i;if(n.width===r&&n.height===s)return n;var o=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,a=o.createElement("canvas");a.width=Math.max(1,r),a.height=Math.max(1,s);var l=a.getContext("2d");return l.drawImage(n,0,0,n.width,n.height,0,0,r,s),a},e.prototype.renderBackgroundImage=function(n){return Xs(this,void 0,void 0,function(){var r,s,i,o,a,l;return Is(this,function(c){switch(c.label){case 0:r=n.styles.backgroundImage.length-1,s=function(u){var A,d,f,k,L,G,P,V,S,h,k,L,G,P,V,m,g,y,x,v,b,w,C,B,S,N,k,O,U,P,V,W,L,G,_,j,K,Y,J,ae,ue,le;return Is(this,function(fe){switch(fe.label){case 0:if(u.type!==0)return[3,5];A=void 0,d=u.url,fe.label=1;case 1:return fe.trys.push([1,3,,4]),[4,i.context.cache.match(d)];case 2:return A=fe.sent(),[3,4];case 3:return fe.sent(),i.context.logger.error("Error loading background-image "+d),[3,4];case 4:return A&&(f=I4(n,r,[A.width,A.height,A.width/A.height]),k=f[0],L=f[1],G=f[2],P=f[3],V=f[4],S=i.ctx.createPattern(i.resizeImage(A,P,V),"repeat"),i.renderRepeat(k,S,L,G)),[3,6];case 5:Vye(u)?(h=I4(n,r,[null,null,null]),k=h[0],L=h[1],G=h[2],P=h[3],V=h[4],m=Lye(u.angle,P,V),g=m[0],y=m[1],x=m[2],v=m[3],b=m[4],w=document.createElement("canvas"),w.width=P,w.height=V,C=w.getContext("2d"),B=C.createLinearGradient(y,v,x,b),wM(u.stops,g).forEach(function(Ie){return B.addColorStop(Ie.stop,Xr(Ie.color))}),C.fillStyle=B,C.fillRect(0,0,P,V),P>0&&V>0&&(S=i.ctx.createPattern(w,"repeat"),i.renderRepeat(k,S,L,G))):Wye(u)&&(N=I4(n,r,[null,null,null]),k=N[0],O=N[1],U=N[2],P=N[3],V=N[4],W=u.position.length===0?[g_]:u.position,L=Sn(W[0],P),G=Sn(W[W.length-1],V),_=Mye(u,L,G,P,V),j=_[0],K=_[1],j>0&&K>0&&(Y=i.ctx.createRadialGradient(O+L,U+G,0,O+L,U+G,j),wM(u.stops,j*2).forEach(function(Ie){return Y.addColorStop(Ie.stop,Xr(Ie.color))}),i.path(k),i.ctx.fillStyle=Y,j!==K?(J=n.bounds.left+.5*n.bounds.width,ae=n.bounds.top+.5*n.bounds.height,ue=K/j,le=1/ue,i.ctx.save(),i.ctx.translate(J,ae),i.ctx.transform(1,0,0,ue,0,0),i.ctx.translate(-J,-ae),i.ctx.fillRect(O,le*(U-ae)+ae,P,V*le),i.ctx.restore()):i.ctx.fill())),fe.label=6;case 6:return r--,[2]}})},i=this,o=0,a=n.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return o<a.length?(l=a[o],[5,s(l)]):[3,4];case 2:c.sent(),c.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,s){return Xs(this,void 0,void 0,function(){return Is(this,function(i){return this.path(ZM(s,r)),this.ctx.fillStyle=Xr(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,s,i){return Xs(this,void 0,void 0,function(){var o,a;return Is(this,function(l){switch(l.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,i)]:[3,2];case 1:return l.sent(),[2];case 2:return o=Xve(i,s),this.path(o),this.ctx.fillStyle=Xr(n),this.ctx.fill(),a=qve(i,s),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Xs(this,void 0,void 0,function(){var r,s,i,o,a,l,c,u,A=this;return Is(this,function(d){switch(d.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!$u(r.backgroundColor)||r.backgroundImage.length,i=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],o=a1e(Kf(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),$u(r.backgroundColor)||(this.ctx.fillStyle=Xr(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:d.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(f){A.ctx.save();var h=Jw(n.curves),m=f.inset?0:s1e,g=Gve(h,-m+(f.inset?1:-1)*f.spread.number,(f.inset?1:-1)*f.spread.number,f.spread.number*(f.inset?-2:2),f.spread.number*(f.inset?-2:2));f.inset?(A.path(h),A.ctx.clip(),A.mask(g)):(A.mask(h),A.ctx.clip(),A.path(g)),A.ctx.shadowOffsetX=f.offsetX.number+m,A.ctx.shadowOffsetY=f.offsetY.number,A.ctx.shadowColor=Xr(f.color),A.ctx.shadowBlur=f.blur.number,A.ctx.fillStyle=f.inset?Xr(f.color):"rgba(0,0,0,1)",A.ctx.fill(),A.ctx.restore()}),d.label=2;case 2:a=0,l=0,c=i,d.label=3;case 3:return l<c.length?(u=c[l],u.style!==0&&!$u(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,a,n.curves,2)]:[3,11]):[3,13];case 4:return d.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,a,n.curves,3)];case 6:return d.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,a,n.curves)];case 8:return d.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,a,n.curves)];case 10:d.sent(),d.label=11;case 11:a++,d.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,s,i,o){return Xs(this,void 0,void 0,function(){var a,l,c,u,A,d,f,h,m,g,y,x,v,b,w,C,w,C;return Is(this,function(B){return this.ctx.save(),a=Yve(i,s),l=ZM(i,s),o===2&&(this.path(l),this.ctx.clip()),So(l[0])?(c=l[0].start.x,u=l[0].start.y):(c=l[0].x,u=l[0].y),So(l[1])?(A=l[1].end.x,d=l[1].end.y):(A=l[1].x,d=l[1].y),s===0||s===2?f=Math.abs(c-A):f=Math.abs(u-d),this.ctx.beginPath(),o===3?this.formatPath(a):this.formatPath(l.slice(0,2)),h=r<3?r*3:r*2,m=r<3?r*2:r,o===3&&(h=r,m=r),g=!0,f<=h*2?g=!1:f<=h*2+m?(y=f/(2*h+m),h*=y,m*=y):(x=Math.floor((f+m)/(h+m)),v=(f-x*h)/(x-1),b=(f-(x+1)*h)/x,m=b<=0||Math.abs(m-v)<Math.abs(m-b)?v:b),g&&(o===3?this.ctx.setLineDash([0,h+m]):this.ctx.setLineDash([h,m])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Xr(n),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(So(l[0])&&(w=l[3],C=l[0],this.ctx.beginPath(),this.formatPath([new Ve(w.end.x,w.end.y),new Ve(C.start.x,C.start.y)]),this.ctx.stroke()),So(l[1])&&(w=l[1],C=l[2],this.ctx.beginPath(),this.formatPath([new Ve(w.end.x,w.end.y),new Ve(C.start.x,C.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Xs(this,void 0,void 0,function(){var r;return Is(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Xr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=Kve(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(AK),o1e=function(t){return t instanceof KG||t instanceof GG?!0:t instanceof b_&&t.type!==Xw&&t.type!==Kw},a1e=function(t,e){switch(t){case 0:return Jw(e);case 2:return Qve(e);case 1:default:return Zw(e)}},l1e=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},c1e=["-apple-system","system-ui"],u1e=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return c1e.indexOf(e)===-1}):t},A1e=function(t){$a(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return e.prototype.render=function(n){return Xs(this,void 0,void 0,function(){var r,s;return Is(this,function(i){switch(i.label){case 0:return r=dk(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,d1e(r)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Xr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(AK),d1e=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},f1e=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,R1([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,R1([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,R1([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,R1([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),h1e=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new f1e({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new Ove(this,e)}return t.instanceCount=1,t}(),p1e=function(t,e){return e===void 0&&(e={}),m1e(t,e)};typeof window<"u"&&iK.setContext(window);var m1e=function(t,e){return Xs(void 0,void 0,void 0,function(){var n,r,s,i,o,a,l,c,u,A,d,f,h,m,g,y,x,v,b,w,B,C,B,S,N,k,O,U,P,V,W,L,G,_,j,K,Y,J,ae,ue;return Is(this,function(le){switch(le.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(S=e.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(N=e.imageTimeout)!==null&&N!==void 0?N:15e3,proxy:e.proxy,useCORS:(k=e.useCORS)!==null&&k!==void 0?k:!1},i=YI({logging:(O=e.logging)!==null&&O!==void 0?O:!0,cache:e.cache},s),o={windowWidth:(U=e.windowWidth)!==null&&U!==void 0?U:r.innerWidth,windowHeight:(P=e.windowHeight)!==null&&P!==void 0?P:r.innerHeight,scrollX:(V=e.scrollX)!==null&&V!==void 0?V:r.pageXOffset,scrollY:(W=e.scrollY)!==null&&W!==void 0?W:r.pageYOffset},a=new pc(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),l=new h1e(i,a),c=(L=e.foreignObjectRendering)!==null&&L!==void 0?L:!1,u={allowTaint:(G=e.allowTaint)!==null&&G!==void 0?G:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},l.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),A=new qM(l,t,u),d=A.clonedReferenceElement,d?[4,A.toIFrame(n,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return f=le.sent(),h=w_(d)||gve(d)?Gme(d.ownerDocument):cS(l,d),m=h.width,g=h.height,y=h.left,x=h.top,v=g1e(l,d,e.backgroundColor),b={canvas:e.canvas,backgroundColor:v,scale:(j=(_=e.scale)!==null&&_!==void 0?_:r.devicePixelRatio)!==null&&j!==void 0?j:1,x:((K=e.x)!==null&&K!==void 0?K:0)+y,y:((Y=e.y)!==null&&Y!==void 0?Y:0)+x,width:(J=e.width)!==null&&J!==void 0?J:Math.ceil(m),height:(ae=e.height)!==null&&ae!==void 0?ae:Math.ceil(g)},c?(l.logger.debug("Document cloned, using foreign object rendering"),B=new A1e(l,b),[4,B.render(d)]):[3,3];case 2:return w=le.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+y+","+x+" with size "+m+"x"+g+" using computed rendering"),l.logger.debug("Starting DOM parsing"),C=YG(l,d),v===C.styles.backgroundColor&&(C.styles.backgroundColor=ic.TRANSPARENT),l.logger.debug("Starting renderer for element at "+b.x+","+b.y+" with size "+b.width+"x"+b.height),B=new i1e(l,b),[4,B.render(C)];case 4:w=le.sent(),le.label=5;case 5:return(!((ue=e.removeContainer)!==null&&ue!==void 0)||ue)&&(qM.destroy(f)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,w]}})})},g1e=function(t,e,n){var r=e.ownerDocument,s=r.documentElement?oy(t,getComputedStyle(r.documentElement).backgroundColor):ic.TRANSPARENT,i=r.body?oy(t,getComputedStyle(r.body).backgroundColor):ic.TRANSPARENT,o=typeof n=="string"?oy(t,n):n===null?ic.TRANSPARENT:4294967295;return e===r.documentElement?$u(s)?$u(i)?o:i:s:o};const k4=({children:t,pageNumber:e,totalPages:n,title:r,onExportImage:s})=>{const i=Q.useRef(null),o=async()=>{if(i.current)try{const l=(await p1e(i.current,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff"})).toDataURL("image/png");if(s)s(l,e);else{const c=document.createElement("a");c.download=`${r}-page-${e}.png`,c.href=l,c.click()}}catch(a){console.error("이미지 내보내기 실패:",a),alert("이미지 내보내기에 실패했습니다.")}};return p.jsxs("div",{className:"relative",children:[p.jsxs("div",{ref:i,className:"bg-white mx-auto shadow-lg",style:{width:"210mm",height:"297mm",padding:"20mm",boxSizing:"border-box",position:"relative",overflow:"hidden"},children:[p.jsxs("div",{className:"border-b-2 border-gray-300 pb-3 mb-6",children:[p.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:r}),p.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Page ",e," of ",n]})]}),p.jsx("div",{className:"report-content",children:t}),p.jsxs("div",{className:"absolute bottom-5 left-5 right-5 text-center text-xs text-gray-400 border-t border-gray-200 pt-2",children:["문해력 평가 시스템 | 생성일: ",new Date().toLocaleDateString("ko-KR")]})]}),p.jsx("div",{className:"flex justify-center mt-4 gap-2 print:hidden",children:p.jsxs("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:["📸 이미지로 저장 (Page ",e,")"]})})]})};Yp.register(Ah,Bh,sl,eG,h_,d_,kg,zy,Vy,Nh,f_);function y1e(){const{resultId:t}=oA(),[e,n]=Q.useState(null),[r,s]=Q.useState(!0);Q.useEffect(()=>{i()},[t]);const i=async()=>{try{s(!0);const m=await vt.get(`/api/v1/reports/results/${t}/detailed`);n(m.data.data)}catch(m){console.error("레포트 조회 실패:",m),alert("레포트를 불러오는데 실패했습니다.")}finally{s(!1)}};if(r)return p.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"레포트 생성 중..."})]})});if(!e)return p.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-red-50 to-orange-50",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-6xl mb-4",children:"📋"}),p.jsx("p",{className:"text-red-600 text-xl font-semibold",children:"레포트를 찾을 수 없습니다."})]})});const o=e.categoryScores.slice(0,4),a={labels:o.map(m=>m.categoryName),datasets:[{label:"학생",data:o.map(m=>m.percentage),backgroundColor:"rgba(59, 130, 246, 0.3)",borderColor:"rgb(59, 130, 246)",borderWidth:3,pointBackgroundColor:"rgb(59, 130, 246)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(59, 130, 246)",pointRadius:5,pointHoverRadius:7},{label:"또래평균",data:o.map(m=>m.peerAverage),backgroundColor:"rgba(239, 68, 68, 0.2)",borderColor:"rgb(239, 68, 68)",borderWidth:2,borderDash:[5,5],pointBackgroundColor:"rgb(239, 68, 68)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(239, 68, 68)",pointRadius:4,pointHoverRadius:6}]},l={responsive:!0,maintainAspectRatio:!0,scales:{r:{beginAtZero:!0,max:100,ticks:{stepSize:20,font:{size:12}},pointLabels:{font:{size:14,weight:"bold"}},grid:{color:"rgba(0, 0, 0, 0.1)"}}},plugins:{legend:{display:!0,position:"top",labels:{font:{size:14,weight:"bold"},padding:15}},tooltip:{callbacks:{label:function(m){return`${m.dataset.label}: ${m.parsed.r.toFixed(1)}%`}}}}},c={labels:o.map(m=>m.categoryName),datasets:[{label:"백분위 (상위 %)",data:o.map(m=>100-m.percentile),backgroundColor:o.map(m=>{const g=100-m.percentile;return g<=25?"rgba(34, 197, 94, 0.8)":g<=50?"rgba(59, 130, 246, 0.8)":g<=75?"rgba(251, 146, 60, 0.8)":"rgba(239, 68, 68, 0.8)"}),borderColor:o.map(m=>{const g=100-m.percentile;return g<=25?"rgb(34, 197, 94)":g<=50?"rgb(59, 130, 246)":g<=75?"rgb(251, 146, 60)":"rgb(239, 68, 68)"}),borderWidth:2,borderRadius:8}]},u={indexAxis:"y",responsive:!0,maintainAspectRatio:!0,scales:{x:{beginAtZero:!0,max:100,ticks:{callback:function(m){return`상위 ${m}%`},font:{size:11}},grid:{color:"rgba(0, 0, 0, 0.05)"}},y:{ticks:{font:{size:12,weight:"bold"}}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(m){return`상위 ${m.parsed.x.toFixed(1)}%`}}}}},A={labels:["정답","오답"],datasets:[{data:[e.overall.correctAnswers,e.overall.incorrectAnswers],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(239, 68, 68, 0.4)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)"],borderWidth:2,hoverOffset:10}]},d={responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"bottom",labels:{font:{size:13,weight:"bold"},padding:15}},tooltip:{callbacks:{label:function(m){const g=m.dataset.data.reduce((x,v)=>x+v,0),y=(m.parsed/g*100).toFixed(1);return`${m.label}: ${m.parsed}개 (${y}%)`}}}}},f={labels:e.categoryScores.map(m=>m.categoryName),datasets:[{label:"학생",data:e.categoryScores.map(m=>m.percentage),backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgb(59, 130, 246)",borderWidth:2,borderRadius:6},{label:"또래평균",data:e.categoryScores.map(m=>m.peerAverage),backgroundColor:"rgba(156, 163, 175, 0.6)",borderColor:"rgb(156, 163, 175)",borderWidth:2,borderRadius:6}]},h={responsive:!0,maintainAspectRatio:!0,scales:{y:{beginAtZero:!0,max:100,ticks:{callback:function(m){return`${m}%`},font:{size:11}},grid:{color:"rgba(0, 0, 0, 0.05)"}},x:{ticks:{font:{size:11,weight:"bold"}}}},plugins:{legend:{position:"top",labels:{font:{size:13,weight:"bold"},padding:12}},tooltip:{callbacks:{label:function(m){return`${m.dataset.label}: ${m.parsed.y.toFixed(1)}%`}}}}};return p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 py-8",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[p.jsxs(k4,{pageNumber:1,totalPages:3,title:"문해력 평가 상세 레포트",children:[p.jsxs("div",{className:"mb-8 bg-gradient-to-r from-blue-100 to-purple-100 p-6 rounded-xl shadow-md border border-blue-200",children:[p.jsxs("h2",{className:"text-xl font-bold mb-3 text-blue-900 flex items-center",children:[p.jsx("span",{className:"text-2xl mr-2",children:"👤"})," 수험자 정보"]}),p.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[p.jsxs("div",{className:"bg-white bg-opacity-70 p-3 rounded-lg",children:[p.jsx("span",{className:"font-semibold text-gray-700",children:"이름:"})," ",p.jsx("span",{className:"text-blue-900 font-bold",children:e.student.name})]}),p.jsxs("div",{className:"bg-white bg-opacity-70 p-3 rounded-lg",children:[p.jsx("span",{className:"font-semibold text-gray-700",children:"학년:"})," ",p.jsxs("span",{className:"text-blue-900 font-bold",children:[e.student.grade,"학년"]})]}),p.jsxs("div",{className:"bg-white bg-opacity-70 p-3 rounded-lg",children:[p.jsx("span",{className:"font-semibold text-gray-700",children:"반:"})," ",p.jsx("span",{className:"text-blue-900 font-bold",children:e.student.className||"-"})]})]}),p.jsxs("div",{className:"mt-3 text-sm bg-white bg-opacity-70 p-3 rounded-lg",children:[p.jsx("span",{className:"font-semibold text-gray-700",children:"평가명:"})," ",p.jsx("span",{className:"text-blue-900 font-bold",children:e.test.title})]}),p.jsxs("div",{className:"mt-2 text-sm bg-white bg-opacity-70 p-3 rounded-lg",children:[p.jsx("span",{className:"font-semibold text-gray-700",children:"평가일:"})," ",p.jsxs("span",{className:"text-blue-900 font-bold",children:[new Date(e.test.date).toLocaleDateString("ko-KR"),e.test.duration&&` (소요시간: ${e.test.duration}분)`]})]})]}),p.jsxs("div",{className:"mb-8",children:[p.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center text-gray-800",children:[p.jsx("span",{className:"text-2xl mr-2",children:"📊"})," 종합 성적"]}),p.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[p.jsxs("div",{className:"col-span-1 bg-gradient-to-br from-blue-500 to-blue-700 text-white p-8 rounded-2xl shadow-xl text-center transform hover:scale-105 transition-transform",children:[p.jsxs("div",{className:"text-6xl font-extrabold mb-2",children:[e.overall.percentage.toFixed(1),"%"]}),p.jsx("div",{className:"text-lg font-medium",children:"정답률"}),p.jsxs("div",{className:"text-sm mt-3 opacity-90",children:[e.overall.totalScore," / ",e.overall.totalPossible,"점"]})]}),p.jsxs("div",{className:"col-span-1 bg-gradient-to-br from-purple-500 to-purple-700 text-white p-8 rounded-2xl shadow-xl text-center transform hover:scale-105 transition-transform",children:[p.jsx("div",{className:"text-6xl font-extrabold mb-2",children:e.overall.gradeLevel}),p.jsx("div",{className:"text-lg font-medium",children:"등급"}),p.jsx("div",{className:"text-sm mt-3 opacity-90",children:"9등급 체계"})]}),p.jsx("div",{className:"col-span-1",children:p.jsx("div",{className:"h-full",children:p.jsx(Rme,{data:A,options:d})})})]})]}),p.jsxs("div",{children:[p.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center text-gray-800",children:[p.jsx("span",{className:"text-2xl mr-2",children:"📈"})," 영역별 또래 비교"]}),p.jsx("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:p.jsx("div",{style:{height:"350px"},children:p.jsx(lG,{data:a,options:l})})})]})]}),p.jsx("div",{className:"h-8 print:hidden"}),p.jsxs(k4,{pageNumber:2,totalPages:3,title:"문해력 평가 상세 레포트",children:[p.jsxs("div",{className:"mb-8",children:[p.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center text-gray-800",children:[p.jsx("span",{className:"text-2xl mr-2",children:"📊"})," 영역별 상세 분석"]}),p.jsx("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:p.jsx("div",{style:{height:"280px"},children:p.jsx(zw,{data:f,options:h})})})]}),p.jsxs("div",{className:"mb-8",children:[p.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center text-gray-800",children:[p.jsx("span",{className:"text-2xl mr-2",children:"🎯"})," 백분위 순위"]}),p.jsx("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:p.jsx("div",{style:{height:"220px"},children:p.jsx(zw,{data:c,options:u})})})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-5 rounded-xl shadow-md border-2 border-green-200",children:[p.jsxs("h3",{className:"font-bold text-lg mb-3 text-green-800 flex items-center",children:[p.jsx("span",{className:"text-2xl mr-2",children:"💪"})," 강점"]}),p.jsx("ul",{className:"text-sm space-y-2",children:e.analysis.strengths.length>0?e.analysis.strengths.map((m,g)=>p.jsxs("li",{className:"flex items-start",children:[p.jsx("span",{className:"text-green-600 mr-2 font-bold",children:"✓"}),p.jsx("span",{className:"text-green-700",children:m})]},g)):p.jsx("li",{className:"text-gray-400 italic",children:"분석 데이터 없음"})})]}),p.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 p-5 rounded-xl shadow-md border-2 border-orange-200",children:[p.jsxs("h3",{className:"font-bold text-lg mb-3 text-orange-800 flex items-center",children:[p.jsx("span",{className:"text-2xl mr-2",children:"📚"})," 보완 영역"]}),p.jsx("ul",{className:"text-sm space-y-2",children:e.analysis.weaknesses.length>0?e.analysis.weaknesses.map((m,g)=>p.jsxs("li",{className:"flex items-start",children:[p.jsx("span",{className:"text-orange-600 mr-2 font-bold",children:"→"}),p.jsx("span",{className:"text-orange-700",children:m})]},g)):p.jsx("li",{className:"text-gray-400 italic",children:"분석 데이터 없음"})})]})]})]}),p.jsx("div",{className:"h-8 print:hidden"}),p.jsxs(k4,{pageNumber:3,totalPages:3,title:"문해력 평가 상세 레포트",children:[p.jsxs("div",{className:"mb-8",children:[p.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center text-gray-800",children:[p.jsx("span",{className:"text-2xl mr-2",children:"💡"})," 맞춤형 학습 제안"]}),p.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 p-6 rounded-xl shadow-md border-2 border-yellow-200",children:p.jsx("ul",{className:"space-y-3",children:e.recommendations.map((m,g)=>p.jsxs("li",{className:"flex items-start bg-white bg-opacity-60 p-3 rounded-lg",children:[p.jsx("span",{className:"inline-flex items-center justify-center w-7 h-7 bg-yellow-500 text-white rounded-full font-bold mr-3 flex-shrink-0 text-sm",children:g+1}),p.jsx("span",{className:"text-gray-700 font-medium",children:m})]},g))})})]}),p.jsxs("div",{children:[p.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center text-gray-800",children:[p.jsx("span",{className:"text-2xl mr-2",children:"❌"})," 오답 분석 (주요 문항)"]}),p.jsxs("div",{className:"space-y-3",children:[e.incorrectAnswers.slice(0,5).map((m,g)=>p.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 p-4 rounded-xl border-l-4 border-red-500 shadow-md",children:[p.jsxs("div",{className:"flex items-center mb-2",children:[p.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-red-500 text-white rounded-full font-bold mr-3 text-sm",children:m.questionNumber}),p.jsx("span",{className:"text-sm font-bold text-red-700",children:m.categoryName})]}),p.jsxs("div",{className:"text-sm text-gray-700 ml-11",children:[p.jsx("span",{className:"font-semibold",children:"학생 답변:"})," ",m.studentAnswer||"(미응답)"]}),p.jsxs("div",{className:"text-sm text-gray-700 ml-11 mt-1",children:[p.jsx("span",{className:"font-semibold",children:"정답:"})," ",m.correctAnswer]}),m.feedback&&p.jsx("div",{className:"text-sm text-blue-700 mt-2 ml-11 bg-blue-50 p-3 rounded-lg border-l-4 border-blue-400",children:p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-lg",children:"🤖"}),p.jsxs("div",{children:[p.jsx("div",{className:"font-bold mb-1",children:"AI 피드백"}),p.jsx("div",{children:m.feedback})]})]})}),m.explanation&&p.jsxs("div",{className:"text-sm text-gray-600 mt-2 ml-11 bg-white bg-opacity-70 p-2 rounded",children:["💬 ",m.explanation]})]},g)),e.incorrectAnswers.length===0&&p.jsxs("div",{className:"text-center bg-gradient-to-r from-green-50 to-emerald-50 py-8 rounded-xl border-2 border-green-200",children:[p.jsx("div",{className:"text-6xl mb-3",children:"🎉"}),p.jsx("p",{className:"text-green-700 font-bold text-lg",children:"모든 문제를 정답으로 맞췄습니다!"}),p.jsx("p",{className:"text-green-600 text-sm mt-2",children:"완벽한 성과입니다"})]})]})]})]}),p.jsx("div",{className:"text-center mt-8 print:hidden",children:p.jsx("button",{onClick:()=>window.print(),className:"px-8 py-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all font-bold text-lg shadow-xl transform hover:scale-105",children:"🖨️ 전체 레포트 인쇄"})})]})})}function x1e(){const t=is(),{user:e,logout:n}=Ko(),r=()=>{switch(e==null?void 0:e.role){case"student":t("/dashboard");break;case"parent":t("/parent/dashboard");break;case"admin":t("/admin/dashboard");break;case"teacher":t("/teacher/dashboard");break;default:t("/login")}},s=()=>{n(),t("/login")};return p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:p.jsxs("div",{className:"max-w-md w-full bg-card rounded-lg shadow-lg p-8 border border-border text-center",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("div",{className:"mx-auto w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center mb-4",children:p.jsx("svg",{className:"w-8 h-8 text-destructive",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),p.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"접근 권한이 없습니다"}),p.jsx("p",{className:"text-muted-foreground",children:"이 페이지에 접근할 수 있는 권한이 없습니다."}),e&&p.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["현재 로그인: ",p.jsx("span",{className:"font-medium",children:e.name})," (",e.role,")"]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("button",{onClick:r,className:"w-full bg-primary text-primary-foreground py-2 px-4 rounded-lg hover:bg-primary/90 transition-colors font-medium",children:"홈으로 돌아가기"}),p.jsx("button",{onClick:s,className:"w-full border border-border py-2 px-4 rounded-lg hover:bg-muted transition-colors text-foreground font-medium",children:"로그아웃"})]})]})})}var v1e={};(function(){var t;function e(I){var F=0;return function(){return F<I.length?{done:!1,value:I[F++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(I,F,D){return I==Array.prototype||I==Object.prototype||(I[F]=D.value),I};function r(I){I=[typeof globalThis=="object"&&globalThis,I,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ci=="object"&&Ci];for(var F=0;F<I.length;++F){var D=I[F];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var s=r(this);function i(I,F){if(F)e:{var D=s;I=I.split(".");for(var Z=0;Z<I.length-1;Z++){var de=I[Z];if(!(de in D))break e;D=D[de]}I=I[I.length-1],Z=D[I],F=F(Z),F!=Z&&F!=null&&n(D,I,{configurable:!0,writable:!0,value:F})}}i("Symbol",function(I){function F(Ce){if(this instanceof F)throw new TypeError("Symbol is not a constructor");return new D(Z+(Ce||"")+"_"+de++,Ce)}function D(Ce,pe){this.g=Ce,n(this,"description",{configurable:!0,writable:!0,value:pe})}if(I)return I;D.prototype.toString=function(){return this.g};var Z="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",de=0;return F}),i("Symbol.iterator",function(I){if(I)return I;I=Symbol("Symbol.iterator");for(var F="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),D=0;D<F.length;D++){var Z=s[F[D]];typeof Z=="function"&&typeof Z.prototype[I]!="function"&&n(Z.prototype,I,{configurable:!0,writable:!0,value:function(){return o(e(this))}})}return I});function o(I){return I={next:I},I[Symbol.iterator]=function(){return this},I}function a(I){var F=typeof Symbol<"u"&&Symbol.iterator&&I[Symbol.iterator];return F?F.call(I):{next:e(I)}}function l(I){if(!(I instanceof Array)){I=a(I);for(var F,D=[];!(F=I.next()).done;)D.push(F.value);I=D}return I}var c=typeof Object.create=="function"?Object.create:function(I){function F(){}return F.prototype=I,new F},u;if(typeof Object.setPrototypeOf=="function")u=Object.setPrototypeOf;else{var A;e:{var d={a:!0},f={};try{f.__proto__=d,A=f.a;break e}catch{}A=!1}u=A?function(I,F){if(I.__proto__=F,I.__proto__!==F)throw new TypeError(I+" is not extensible");return I}:null}var h=u;function m(I,F){if(I.prototype=c(F.prototype),I.prototype.constructor=I,h)h(I,F);else for(var D in F)if(D!="prototype")if(Object.defineProperties){var Z=Object.getOwnPropertyDescriptor(F,D);Z&&Object.defineProperty(I,D,Z)}else I[D]=F[D];I.ea=F.prototype}function g(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function y(I){if(I.l)throw new TypeError("Generator is already running");I.l=!0}g.prototype.o=function(I){this.h=I};function x(I,F){I.j={U:F,V:!0},I.g=I.m||I.s}g.prototype.return=function(I){this.j={return:I},this.g=this.s};function v(I,F,D){return I.g=D,{value:F}}function b(I){this.g=new g,this.h=I}function w(I,F){y(I.g);var D=I.g.i;return D?C(I,"return"in D?D.return:function(Z){return{value:Z,done:!0}},F,I.g.return):(I.g.return(F),B(I))}function C(I,F,D,Z){try{var de=F.call(I.g.i,D);if(!(de instanceof Object))throw new TypeError("Iterator result "+de+" is not an object");if(!de.done)return I.g.l=!1,de;var Ce=de.value}catch(pe){return I.g.i=null,x(I.g,pe),B(I)}return I.g.i=null,Z.call(I.g,Ce),B(I)}function B(I){for(;I.g.g;)try{var F=I.h(I.g);if(F)return I.g.l=!1,{value:F.value,done:!1}}catch(D){I.g.h=void 0,x(I.g,D)}if(I.g.l=!1,I.g.j){if(F=I.g.j,I.g.j=null,F.V)throw F.U;return{value:F.return,done:!0}}return{value:void 0,done:!0}}function S(I){this.next=function(F){return y(I.g),I.g.i?F=C(I,I.g.i.next,F,I.g.o):(I.g.o(F),F=B(I)),F},this.throw=function(F){return y(I.g),I.g.i?F=C(I,I.g.i.throw,F,I.g.o):(x(I.g,F),F=B(I)),F},this.return=function(F){return w(I,F)},this[Symbol.iterator]=function(){return this}}function N(I,F){return F=new S(new b(F)),h&&I.prototype&&h(F,I.prototype),F}function k(I,F){I instanceof String&&(I+="");var D=0,Z=!1,de={next:function(){if(!Z&&D<I.length){var Ce=D++;return{value:F(Ce,I[Ce]),done:!1}}return Z=!0,{done:!0,value:void 0}}};return de[Symbol.iterator]=function(){return de},de}var O=typeof Object.assign=="function"?Object.assign:function(I,F){for(var D=1;D<arguments.length;D++){var Z=arguments[D];if(Z)for(var de in Z)Object.prototype.hasOwnProperty.call(Z,de)&&(I[de]=Z[de])}return I};i("Object.assign",function(I){return I||O}),i("Promise",function(I){function F(pe){this.h=0,this.i=void 0,this.g=[],this.o=!1;var Ne=this.j();try{pe(Ne.resolve,Ne.reject)}catch(Oe){Ne.reject(Oe)}}function D(){this.g=null}function Z(pe){return pe instanceof F?pe:new F(function(Ne){Ne(pe)})}if(I)return I;D.prototype.h=function(pe){if(this.g==null){this.g=[];var Ne=this;this.i(function(){Ne.l()})}this.g.push(pe)};var de=s.setTimeout;D.prototype.i=function(pe){de(pe,0)},D.prototype.l=function(){for(;this.g&&this.g.length;){var pe=this.g;this.g=[];for(var Ne=0;Ne<pe.length;++Ne){var Oe=pe[Ne];pe[Ne]=null;try{Oe()}catch(Ge){this.j(Ge)}}}this.g=null},D.prototype.j=function(pe){this.i(function(){throw pe})},F.prototype.j=function(){function pe(Ge){return function(pt){Oe||(Oe=!0,Ge.call(Ne,pt))}}var Ne=this,Oe=!1;return{resolve:pe(this.C),reject:pe(this.l)}},F.prototype.C=function(pe){if(pe===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(pe instanceof F)this.F(pe);else{e:switch(typeof pe){case"object":var Ne=pe!=null;break e;case"function":Ne=!0;break e;default:Ne=!1}Ne?this.u(pe):this.m(pe)}},F.prototype.u=function(pe){var Ne=void 0;try{Ne=pe.then}catch(Oe){this.l(Oe);return}typeof Ne=="function"?this.G(Ne,pe):this.m(pe)},F.prototype.l=function(pe){this.s(2,pe)},F.prototype.m=function(pe){this.s(1,pe)},F.prototype.s=function(pe,Ne){if(this.h!=0)throw Error("Cannot settle("+pe+", "+Ne+"): Promise already settled in state"+this.h);this.h=pe,this.i=Ne,this.h===2&&this.D(),this.A()},F.prototype.D=function(){var pe=this;de(function(){if(pe.B()){var Ne=s.console;typeof Ne<"u"&&Ne.error(pe.i)}},1)},F.prototype.B=function(){if(this.o)return!1;var pe=s.CustomEvent,Ne=s.Event,Oe=s.dispatchEvent;return typeof Oe>"u"?!0:(typeof pe=="function"?pe=new pe("unhandledrejection",{cancelable:!0}):typeof Ne=="function"?pe=new Ne("unhandledrejection",{cancelable:!0}):(pe=s.document.createEvent("CustomEvent"),pe.initCustomEvent("unhandledrejection",!1,!0,pe)),pe.promise=this,pe.reason=this.i,Oe(pe))},F.prototype.A=function(){if(this.g!=null){for(var pe=0;pe<this.g.length;++pe)Ce.h(this.g[pe]);this.g=null}};var Ce=new D;return F.prototype.F=function(pe){var Ne=this.j();pe.J(Ne.resolve,Ne.reject)},F.prototype.G=function(pe,Ne){var Oe=this.j();try{pe.call(Ne,Oe.resolve,Oe.reject)}catch(Ge){Oe.reject(Ge)}},F.prototype.then=function(pe,Ne){function Oe(Et,yt){return typeof Et=="function"?function(nt){try{Ge(Et(nt))}catch(E){pt(E)}}:yt}var Ge,pt,Lt=new F(function(Et,yt){Ge=Et,pt=yt});return this.J(Oe(pe,Ge),Oe(Ne,pt)),Lt},F.prototype.catch=function(pe){return this.then(void 0,pe)},F.prototype.J=function(pe,Ne){function Oe(){switch(Ge.h){case 1:pe(Ge.i);break;case 2:Ne(Ge.i);break;default:throw Error("Unexpected state: "+Ge.h)}}var Ge=this;this.g==null?Ce.h(Oe):this.g.push(Oe),this.o=!0},F.resolve=Z,F.reject=function(pe){return new F(function(Ne,Oe){Oe(pe)})},F.race=function(pe){return new F(function(Ne,Oe){for(var Ge=a(pe),pt=Ge.next();!pt.done;pt=Ge.next())Z(pt.value).J(Ne,Oe)})},F.all=function(pe){var Ne=a(pe),Oe=Ne.next();return Oe.done?Z([]):new F(function(Ge,pt){function Lt(nt){return function(E){Et[nt]=E,yt--,yt==0&&Ge(Et)}}var Et=[],yt=0;do Et.push(void 0),yt++,Z(Oe.value).J(Lt(Et.length-1),pt),Oe=Ne.next();while(!Oe.done)})},F}),i("Object.is",function(I){return I||function(F,D){return F===D?F!==0||1/F===1/D:F!==F&&D!==D}}),i("Array.prototype.includes",function(I){return I||function(F,D){var Z=this;Z instanceof String&&(Z=String(Z));var de=Z.length;for(D=D||0,0>D&&(D=Math.max(D+de,0));D<de;D++){var Ce=Z[D];if(Ce===F||Object.is(Ce,F))return!0}return!1}}),i("String.prototype.includes",function(I){return I||function(F,D){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(F instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(F,D||0)!==-1}}),i("Array.prototype.keys",function(I){return I||function(){return k(this,function(F){return F})}});var U=this||self;function P(I,F){I=I.split(".");var D=U;I[0]in D||typeof D.execScript>"u"||D.execScript("var "+I[0]);for(var Z;I.length&&(Z=I.shift());)I.length||F===void 0?D[Z]&&D[Z]!==Object.prototype[Z]?D=D[Z]:D=D[Z]={}:D[Z]=F}function V(I,F){return F=String.fromCharCode.apply(null,F),I==null?F:I+F}var W,L=typeof TextDecoder<"u",G,_=typeof TextEncoder<"u";function j(I){if(_)I=(G||(G=new TextEncoder)).encode(I);else{var F=void 0;F=F===void 0?!1:F;for(var D=0,Z=new Uint8Array(3*I.length),de=0;de<I.length;de++){var Ce=I.charCodeAt(de);if(128>Ce)Z[D++]=Ce;else{if(2048>Ce)Z[D++]=Ce>>6|192;else{if(55296<=Ce&&57343>=Ce){if(56319>=Ce&&de<I.length){var pe=I.charCodeAt(++de);if(56320<=pe&&57343>=pe){Ce=1024*(Ce-55296)+pe-56320+65536,Z[D++]=Ce>>18|240,Z[D++]=Ce>>12&63|128,Z[D++]=Ce>>6&63|128,Z[D++]=Ce&63|128;continue}else de--}if(F)throw Error("Found an unpaired surrogate");Ce=65533}Z[D++]=Ce>>12|224,Z[D++]=Ce>>6&63|128}Z[D++]=Ce&63|128}}I=Z.subarray(0,D)}return I}var K={},Y=null;function J(I,F){F===void 0&&(F=0),le(),F=K[F];for(var D=Array(Math.floor(I.length/3)),Z=F[64]||"",de=0,Ce=0;de<I.length-2;de+=3){var pe=I[de],Ne=I[de+1],Oe=I[de+2],Ge=F[pe>>2];pe=F[(pe&3)<<4|Ne>>4],Ne=F[(Ne&15)<<2|Oe>>6],Oe=F[Oe&63],D[Ce++]=Ge+pe+Ne+Oe}switch(Ge=0,Oe=Z,I.length-de){case 2:Ge=I[de+1],Oe=F[(Ge&15)<<2]||Z;case 1:I=I[de],D[Ce]=F[I>>2]+F[(I&3)<<4|Ge>>4]+Oe+Z}return D.join("")}function ae(I){var F=I.length,D=3*F/4;D%3?D=Math.floor(D):"=.".indexOf(I[F-1])!=-1&&(D="=.".indexOf(I[F-2])!=-1?D-2:D-1);var Z=new Uint8Array(D),de=0;return ue(I,function(Ce){Z[de++]=Ce}),Z.subarray(0,de)}function ue(I,F){function D(Oe){for(;Z<I.length;){var Ge=I.charAt(Z++),pt=Y[Ge];if(pt!=null)return pt;if(!/^[\s\xa0]*$/.test(Ge))throw Error("Unknown base64 encoding at char: "+Ge)}return Oe}le();for(var Z=0;;){var de=D(-1),Ce=D(0),pe=D(64),Ne=D(64);if(Ne===64&&de===-1)break;F(de<<2|Ce>>4),pe!=64&&(F(Ce<<4&240|pe>>2),Ne!=64&&F(pe<<6&192|Ne))}}function le(){if(!Y){Y={};for(var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),F=["+/=","+/","-_=","-_.","-_"],D=0;5>D;D++){var Z=I.concat(F[D].split(""));K[D]=Z;for(var de=0;de<Z.length;de++){var Ce=Z[de];Y[Ce]===void 0&&(Y[Ce]=de)}}}}var fe=typeof Uint8Array.prototype.slice=="function",Ie;function Re(I,F,D){return F===D?Ie||(Ie=new Uint8Array(0)):fe?I.slice(F,D):new Uint8Array(I.subarray(F,D))}var ge=0,$e=0;function Te(I,F){F=F===void 0?{}:F,F=F.v===void 0?!1:F.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=F,I&&be(this,I)}function be(I,F){F=F.constructor===Uint8Array?F:F.constructor===ArrayBuffer?new Uint8Array(F):F.constructor===Array?new Uint8Array(F):F.constructor===String?ae(F):F instanceof Uint8Array?new Uint8Array(F.buffer,F.byteOffset,F.byteLength):new Uint8Array(0),I.h=F,I.l=0,I.j=I.h.length,I.g=I.l}Te.prototype.reset=function(){this.g=this.l};function it(I){for(var F=128,D=0,Z=0,de=0;4>de&&128<=F;de++)F=I.h[I.g++],D|=(F&127)<<7*de;if(128<=F&&(F=I.h[I.g++],D|=(F&127)<<28,Z|=(F&127)>>4),128<=F)for(de=0;5>de&&128<=F;de++)F=I.h[I.g++],Z|=(F&127)<<7*de+3;if(128>F)return I=D>>>0,F=Z>>>0,(Z=F&2147483648)&&(I=~I+1>>>0,F=~F>>>0,I==0&&(F=F+1>>>0)),I=4294967296*F+(I>>>0),Z?-I:I;I.m=!0}Te.prototype.i=function(){var I=this.h,F=I[this.g],D=F&127;return 128>F?(this.g+=1,D):(F=I[this.g+1],D|=(F&127)<<7,128>F?(this.g+=2,D):(F=I[this.g+2],D|=(F&127)<<14,128>F?(this.g+=3,D):(F=I[this.g+3],D|=(F&127)<<21,128>F?(this.g+=4,D):(F=I[this.g+4],D|=(F&15)<<28,128>F?(this.g+=5,D>>>0):(this.g+=5,128<=I[this.g++]&&128<=I[this.g++]&&128<=I[this.g++]&&128<=I[this.g++]&&this.g++,D)))))},Te.prototype.o=function(){var I=this.h[this.g],F=this.h[this.g+1],D=this.h[this.g+2],Z=this.h[this.g+3];return this.g+=4,D=(I<<0|F<<8|D<<16|Z<<24)>>>0,I=2*(D>>31)+1,F=D>>>23&255,D&=8388607,F==255?D?NaN:1/0*I:F==0?I*Math.pow(2,-149)*D:I*Math.pow(2,F-150)*(D+Math.pow(2,23))};var et=[];function st(){this.g=new Uint8Array(64),this.h=0}st.prototype.push=function(I){if(!(this.h+1<this.g.length)){var F=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(F)}this.g[this.h++]=I},st.prototype.length=function(){return this.h},st.prototype.end=function(){var I=this.g,F=this.h;return this.h=0,Re(I,0,F)};function rt(I,F){for(;127<F;)I.push(F&127|128),F>>>=7;I.push(F)}function ht(I){var F={},D=F.N===void 0?!1:F.N;this.o={v:F.v===void 0?!1:F.v},this.N=D,F=this.o,et.length?(D=et.pop(),F&&(D.v=F.v),I&&be(D,I),I=D):I=new Te(I,F),this.g=I,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}ht.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function dt(I){var F=I.g;if((F=F.g==F.j)||(F=I.j)||(F=I.g,F=F.m||0>F.g||F.g>F.j),F)return!1;I.m=I.g.g,F=I.g.i();var D=F&7;return D!=0&&D!=5&&D!=1&&D!=2&&D!=3&&D!=4?(I.j=!0,!1):(I.i=F,I.l=F>>>3,I.h=D,!0)}function cn(I){switch(I.h){case 0:if(I.h!=0)cn(I);else{for(I=I.g;I.h[I.g]&128;)I.g++;I.g++}break;case 1:I.h!=1?cn(I):(I=I.g,I.g+=8);break;case 2:if(I.h!=2)cn(I);else{var F=I.g.i();I=I.g,I.g+=F}break;case 5:I.h!=5?cn(I):(I=I.g,I.g+=4);break;case 3:F=I.l;do{if(!dt(I)){I.j=!0;break}if(I.h==4){I.l!=F&&(I.j=!0);break}cn(I)}while(!0);break;default:I.j=!0}}function Yt(I,F,D){var Z=I.g.j,de=I.g.i(),Ce=I.g.g+de;if(I.g.j=Ce,D(F,I),D=Ce-I.g.g,D!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+de+" bytes, instead read "+(de-D)+" bytes, either the data ended unexpectedly or the message misreported its own length");return I.g.g=Ce,I.g.j=Z,F}function Dt(I){return I.g.o()}function rn(I){var F=I.g.i();I=I.g;var D=I.g;I.g+=F,I=I.h;var Z;if(L)(Z=W)||(Z=W=new TextDecoder("utf-8",{fatal:!1})),Z=Z.decode(I.subarray(D,D+F));else{F=D+F;for(var de=[],Ce=null,pe,Ne,Oe;D<F;)pe=I[D++],128>pe?de.push(pe):224>pe?D>=F?de.push(65533):(Ne=I[D++],194>pe||(Ne&192)!==128?(D--,de.push(65533)):de.push((pe&31)<<6|Ne&63)):240>pe?D>=F-1?de.push(65533):(Ne=I[D++],(Ne&192)!==128||pe===224&&160>Ne||pe===237&&160<=Ne||((Z=I[D++])&192)!==128?(D--,de.push(65533)):de.push((pe&15)<<12|(Ne&63)<<6|Z&63)):244>=pe?D>=F-2?de.push(65533):(Ne=I[D++],(Ne&192)!==128||(pe<<28)+(Ne-144)>>30||((Z=I[D++])&192)!==128||((Oe=I[D++])&192)!==128?(D--,de.push(65533)):(pe=(pe&7)<<18|(Ne&63)<<12|(Z&63)<<6|Oe&63,pe-=65536,de.push((pe>>10&1023)+55296,(pe&1023)+56320))):de.push(65533),8192<=de.length&&(Ce=V(Ce,de),de.length=0);Z=V(Ce,de)}return Z}function As(I,F,D){var Z=I.g.i();for(Z=I.g.g+Z;I.g.g<Z;)D.push(F.call(I.g))}function yr(I,F){I.h==2?As(I,Te.prototype.o,F):F.push(Dt(I))}function Zn(){this.h=[],this.i=0,this.g=new st}function ur(I,F){F.length!==0&&(I.h.push(F),I.i+=F.length)}function Ss(I){var F=I.i+I.g.length();if(F===0)return new Uint8Array(0);F=new Uint8Array(F);for(var D=I.h,Z=D.length,de=0,Ce=0;Ce<Z;Ce++){var pe=D[Ce];pe.length!==0&&(F.set(pe,de),de+=pe.length)}return D=I.g,Z=D.h,Z!==0&&(F.set(D.g.subarray(0,Z),de),D.h=0),I.h=[F],F}function Vn(I,F,D){if(D!=null){rt(I.g,8*F+5),I=I.g;var Z=D;Z=(D=0>Z?1:0)?-Z:Z,Z===0?0<1/Z?ge=$e=0:($e=0,ge=2147483648):isNaN(Z)?($e=0,ge=2147483647):34028234663852886e22<Z?($e=0,ge=(D<<31|2139095040)>>>0):11754943508222875e-54>Z?(Z=Math.round(Z/Math.pow(2,-149)),$e=0,ge=(D<<31|Z)>>>0):(F=Math.floor(Math.log(Z)/Math.LN2),Z*=Math.pow(2,-F),Z=Math.round(8388608*Z),16777216<=Z&&++F,$e=0,ge=(D<<31|F+127<<23|Z&8388607)>>>0),D=ge,I.push(D>>>0&255),I.push(D>>>8&255),I.push(D>>>16&255),I.push(D>>>24&255)}}var Hi=typeof Uint8Array=="function";function El(I,F,D){if(I!=null)return typeof I=="object"?Hi&&I instanceof Uint8Array?D(I):Il(I,F,D):F(I)}function Il(I,F,D){if(Array.isArray(I)){for(var Z=Array(I.length),de=0;de<I.length;de++)Z[de]=El(I[de],F,D);return Array.isArray(I)&&I.W&&_r(Z),Z}Z={};for(de in I)Z[de]=El(I[de],F,D);return Z}function Bf(I){return typeof I=="number"?isFinite(I)?I:String(I):I}var kl={W:{value:!0,configurable:!0}};function _r(I){return Array.isArray(I)&&!Object.isFrozen(I)&&Object.defineProperties(I,kl),I}var Pn;function Ar(I,F,D){var Z=Pn;Pn=null,I||(I=Z),Z=this.constructor.ca,I||(I=Z?[Z]:[]),this.j=Z?0:-1,this.m=this.g=null,this.h=I;e:{if(Z=this.h.length,I=Z-1,Z&&(Z=this.h[I],!(Z===null||typeof Z!="object"||Array.isArray(Z)||Hi&&Z instanceof Uint8Array))){this.l=I-this.j,this.i=Z;break e}F!==void 0&&-1<F?(this.l=Math.max(F,I+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(D)for(F=0;F<D.length;F++)I=D[F],I<this.l?(I+=this.j,(Z=this.h[I])?_r(Z):this.h[I]=Vs):(SA(this),(Z=this.i[I])?_r(Z):this.i[I]=Vs)}var Vs=Object.freeze(_r([]));function SA(I){var F=I.l+I.j;I.h[F]||(I.i=I.h[F]={})}function mn(I,F,D){return F===-1?null:D!==void 0&&D||F>=I.l?I.i?I.i[F]:void 0:I.h[F+I.j]}function BA(I,F){var D=D===void 0?!1:D,Z=mn(I,F,D);return Z==null&&(Z=Vs),Z===Vs&&(Z=_r([]),Ft(I,F,Z,D)),Z}function Tm(I){var F=BA(I,3);if(I.m||(I.m={}),!I.m[3]){for(var D=0;D<F.length;D++)F[D]=+F[D];I.m[3]=!0}return F}function Pa(I,F,D){return I=mn(I,F),I??D}function zi(I,F,D){return I=mn(I,F),I=I==null?I:+I,I??(D===void 0?0:D)}function Ft(I,F,D,Z){Z!==void 0&&Z||F>=I.l?(SA(I),I.i[F]=D):I.h[F+I.j]=D}function Lv(I,F,D){if(D===-1)return null;if(I.g||(I.g={}),!I.g[D]){var Z=mn(I,D,!1);Z&&(I.g[D]=new F(Z))}return I.g[D]}function Nf(I,F){I.g||(I.g={});var D=I.g[1];if(!D){var Z=BA(I,1);D=[];for(var de=0;de<Z.length;de++)D[de]=new F(Z[de]);I.g[1]=D}return D}function NA(I,F,D){var Z=Z===void 0?!1:Z;I.g||(I.g={});var de=D&&Ua(D);I.g[F]=D,Ft(I,F,de,Z)}function EA(I,F,D,Z){var de=Nf(I,D);F=F||new D,I=BA(I,1),Z!=null?(de.splice(Z,0,F),I.splice(Z,0,Ua(F))):(de.push(F),I.push(Ua(F)))}Ar.prototype.toJSON=function(){var I=Ua(this);return Il(I,Bf,J)};function Ua(I,F){if(I.g)for(var D in I.g){var Z=I.g[D];if(Array.isArray(Z))for(var de=0;de<Z.length;de++)Z[de]&&Ua(Z[de]);else Z&&Ua(Z)}return I.h}Ar.prototype.toString=function(){return Ua(this).toString()};function Ef(I,F){if(I=I.o){ur(F,F.g.end());for(var D=0;D<I.length;D++)ur(F,I[D])}}function Vi(I,F){if(F.h==4)return!1;var D=F.m;return cn(F),F.N||(F=Re(F.g.h,D,F.g.g),(D=I.o)?D.push(F):I.o=[F]),!0}function ja(I){Ar.call(this,I,-1,iN)}m(ja,Ar),ja.prototype.getRows=function(){return mn(this,1)},ja.prototype.getCols=function(){return mn(this,2)},ja.prototype.getPackedDataList=function(){return Tm(this)},ja.prototype.getLayout=function(){return Pa(this,4,0)};function Mv(I,F){for(;dt(F);)switch(F.i){case 8:var D=F.g.i();Ft(I,1,D);break;case 16:D=F.g.i(),Ft(I,2,D);break;case 29:case 26:yr(F,I.getPackedDataList());break;case 32:D=it(F.g),Ft(I,4,D);break;default:if(!Vi(I,F))return I}return I}var iN=[3];function Kr(I,F){var D=void 0;return new(D||(D=Promise))(function(Z,de){function Ce(Oe){try{Ne(F.next(Oe))}catch(Ge){de(Ge)}}function pe(Oe){try{Ne(F.throw(Oe))}catch(Ge){de(Ge)}}function Ne(Oe){Oe.done?Z(Oe.value):new D(function(Ge){Ge(Oe.value)}).then(Ce,pe)}Ne((F=F.apply(I,void 0)).next())})}function La(I){Ar.call(this,I)}m(La,Ar);function Qv(I,F){for(;dt(F);)switch(F.i){case 8:var D=F.g.i();Ft(I,1,D);break;case 21:D=Dt(F),Ft(I,2,D);break;case 26:D=rn(F),Ft(I,3,D);break;case 34:D=rn(F),Ft(I,4,D);break;default:if(!Vi(I,F))return I}return I}function If(I){Ar.call(this,I,-1,Hv)}m(If,Ar),If.prototype.addClassification=function(I,F){return EA(this,I,La,F),this};var Hv=[1];function Pc(I){Ar.call(this,I)}m(Pc,Ar);function oN(I,F){for(;dt(F);)switch(F.i){case 13:var D=Dt(F);Ft(I,1,D);break;case 21:D=Dt(F),Ft(I,2,D);break;case 29:D=Dt(F),Ft(I,3,D);break;case 37:D=Dt(F),Ft(I,4,D);break;case 45:D=Dt(F),Ft(I,5,D);break;default:if(!Vi(I,F))return I}return I}function zv(I){Ar.call(this,I,-1,Wv)}m(zv,Ar);function Vv(I){e:{var F=new zv;for(I=new ht(I);dt(I);)switch(I.i){case 10:var D=Yt(I,new Pc,oN);EA(F,D,Pc,void 0);break;default:if(!Vi(F,I))break e}}return F}var Wv=[1];function kf(I){Ar.call(this,I)}m(kf,Ar);function Tl(I){Ar.call(this,I,-1,lN)}m(Tl,Ar),Tl.prototype.getVertexType=function(){return Pa(this,1,0)},Tl.prototype.getPrimitiveType=function(){return Pa(this,2,0)},Tl.prototype.getVertexBufferList=function(){return Tm(this)},Tl.prototype.getIndexBufferList=function(){return BA(this,4)};function aN(I,F){for(;dt(F);)switch(F.i){case 8:var D=it(F.g);Ft(I,1,D);break;case 16:D=it(F.g),Ft(I,2,D);break;case 29:case 26:yr(F,I.getVertexBufferList());break;case 32:case 34:D=F;var Z=I.getIndexBufferList();D.h==2?As(D,Te.prototype.i,Z):Z.push(D.g.i());break;default:if(!Vi(I,F))return I}return I}var lN=[3,4];function Tf(I){Ar.call(this,I)}m(Tf,Ar),Tf.prototype.getMesh=function(){return Lv(this,Tl,1)},Tf.prototype.getPoseTransformMatrix=function(){return Lv(this,ja,2)};function Gv(I){e:{var F=new Tf;for(I=new ht(I);dt(I);)switch(I.i){case 10:var D=Yt(I,new Tl,aN);NA(F,1,D);break;case 18:D=Yt(I,new ja,Mv),NA(F,2,D);break;default:if(!Vi(F,I))break e}}return F}function Fm(I,F,D){if(D=I.createShader(D===0?I.VERTEX_SHADER:I.FRAGMENT_SHADER),I.shaderSource(D,F),I.compileShader(D),!I.getShaderParameter(D,I.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+I.getShaderInfoLog(D));return D}function $m(I){return Nf(I,La).map(function(F){return{index:Pa(F,1,0),Y:zi(F,2),label:mn(F,3)!=null?Pa(F,3,""):void 0,displayName:mn(F,4)!=null?Pa(F,4,""):void 0}})}function _m(I){return{x:zi(I,1),y:zi(I,2),z:zi(I,3),visibility:mn(I,4)!=null?zi(I,4):void 0}}function IA(I,F){this.h=I,this.g=F,this.l=0}function Uc(I,F,D){return Wi(I,F),typeof I.g.canvas.transferToImageBitmap=="function"?Promise.resolve(I.g.canvas.transferToImageBitmap()):D?Promise.resolve(I.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(I.g.canvas):(I.i===void 0&&(I.i=document.createElement("canvas")),new Promise(function(Z){I.i.height=I.g.canvas.height,I.i.width=I.g.canvas.width,I.i.getContext("2d",{}).drawImage(I.g.canvas,0,0,I.g.canvas.width,I.g.canvas.height),Z(I.i)}))}function Wi(I,F){var D=I.g;if(I.m===void 0){var Z=Fm(D,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),de=Fm(D,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Ce=D.createProgram();if(D.attachShader(Ce,Z),D.attachShader(Ce,de),D.linkProgram(Ce),!D.getProgramParameter(Ce,D.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+D.getProgramInfoLog(Ce));Z=I.m=Ce,D.useProgram(Z),de=D.getUniformLocation(Z,"sampler0"),I.j={I:D.getAttribLocation(Z,"aVertex"),H:D.getAttribLocation(Z,"aTex"),da:de},I.s=D.createBuffer(),D.bindBuffer(D.ARRAY_BUFFER,I.s),D.enableVertexAttribArray(I.j.I),D.vertexAttribPointer(I.j.I,2,D.FLOAT,!1,0,0),D.bufferData(D.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),D.STATIC_DRAW),D.bindBuffer(D.ARRAY_BUFFER,null),I.o=D.createBuffer(),D.bindBuffer(D.ARRAY_BUFFER,I.o),D.enableVertexAttribArray(I.j.H),D.vertexAttribPointer(I.j.H,2,D.FLOAT,!1,0,0),D.bufferData(D.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),D.STATIC_DRAW),D.bindBuffer(D.ARRAY_BUFFER,null),D.uniform1i(de,0)}Z=I.j,D.useProgram(I.m),D.canvas.width=F.width,D.canvas.height=F.height,D.viewport(0,0,F.width,F.height),D.activeTexture(D.TEXTURE0),I.h.bindTexture2d(F.glName),D.enableVertexAttribArray(Z.I),D.bindBuffer(D.ARRAY_BUFFER,I.s),D.vertexAttribPointer(Z.I,2,D.FLOAT,!1,0,0),D.enableVertexAttribArray(Z.H),D.bindBuffer(D.ARRAY_BUFFER,I.o),D.vertexAttribPointer(Z.H,2,D.FLOAT,!1,0,0),D.bindFramebuffer(D.DRAW_FRAMEBUFFER?D.DRAW_FRAMEBUFFER:D.FRAMEBUFFER,null),D.clearColor(0,0,0,0),D.clear(D.COLOR_BUFFER_BIT),D.colorMask(!0,!0,!0,!0),D.drawArrays(D.TRIANGLE_FAN,0,4),D.disableVertexAttribArray(Z.I),D.disableVertexAttribArray(Z.H),D.bindBuffer(D.ARRAY_BUFFER,null),I.h.bindTexture2d(0)}function cN(I){this.g=I}var uN=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Kv(I,F){return F+I}function Om(I,F){window[I]=F}function ui(I){var F=document.createElement("script");return F.setAttribute("src",I),F.setAttribute("crossorigin","anonymous"),new Promise(function(D){F.addEventListener("load",function(){D()},!1),F.addEventListener("error",function(){D()},!1),document.body.appendChild(F)})}function Xv(){return Kr(this,function I(){return N(I,function(F){switch(F.g){case 1:return F.m=2,v(F,WebAssembly.instantiate(uN),4);case 4:F.g=3,F.m=0;break;case 2:return F.m=0,F.j=null,F.return(!1);case 3:return F.return(!0)}})})}function Fl(I){if(this.g=I,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=I&&I.locateFile||Kv,typeof window=="object")var F=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")F=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=F,I.options){F=a(Object.keys(I.options));for(var D=F.next();!D.done;D=F.next()){D=D.value;var Z=I.options[D].default;Z!==void 0&&(this.j[D]=typeof Z=="function"?Z():Z)}}}t=Fl.prototype,t.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function qv(I,F){return I.g.files===void 0?[]:typeof I.g.files=="function"?I.g.files(F):I.g.files}function Dm(I){return Kr(I,function F(){var D=this,Z,de,Ce,pe,Ne,Oe,Ge,pt,Lt,Et,yt;return N(F,function(nt){switch(nt.g){case 1:return Z=D,D.R?(de=qv(D,D.j),v(nt,Xv(),2)):nt.return();case 2:if(Ce=nt.h,typeof window=="object")return Om("createMediapipeSolutionsWasm",{locateFile:D.locateFile}),Om("createMediapipeSolutionsPackedAssets",{locateFile:D.locateFile}),Oe=de.filter(function(E){return E.data!==void 0}),Ge=de.filter(function(E){return E.data===void 0}),pt=Promise.all(Oe.map(function(E){var $=jc(Z,E.url);if(E.path!==void 0){var R=E.path;$=$.then(function(z){return Z.overrideFile(R,z),Promise.resolve(z)})}return $})),Lt=Promise.all(Ge.map(function(E){return E.simd===void 0||E.simd&&Ce||!E.simd&&!Ce?ui(Z.locateFile(E.url,Z.S)):Promise.resolve()})).then(function(){return Kr(Z,function E(){var $,R,z=this;return N(E,function(q){if(q.g==1)return $=window.createMediapipeSolutionsWasm,R=window.createMediapipeSolutionsPackedAssets,v(q,$(R),2);z.h=q.h,q.g=0})})}),Et=function(){return Kr(Z,function E(){var $=this;return N(E,function(R){return $.g.graph&&$.g.graph.url?R=v(R,jc($,$.g.graph.url),0):(R.g=0,R=void 0),R})})}(),v(nt,Promise.all([Lt,pt,Et]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return pe=de.filter(function(E){return E.simd===void 0||E.simd&&Ce||!E.simd&&!Ce}).map(function(E){return Z.locateFile(E.url,Z.S)}),importScripts.apply(null,l(pe)),v(nt,createMediapipeSolutionsWasm(Module),6);case 6:D.h=nt.h,D.l=new OffscreenCanvas(1,1),D.h.canvas=D.l,Ne=D.h.GL.createContext(D.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),D.h.GL.makeContextCurrent(Ne),nt.g=4;break;case 7:if(D.l=document.createElement("canvas"),yt=D.l.getContext("webgl2",{}),!yt&&(yt=D.l.getContext("webgl",{}),!yt))return alert("Failed to create WebGL canvas context when passing video frame."),nt.return();D.D=yt,D.h.canvas=D.l,D.h.createContext(D.l,!0,!0,{});case 4:D.i=new D.h.SolutionWasm,D.R=!1,nt.g=0}})})}function AN(I){return Kr(I,function F(){var D=this,Z,de,Ce,pe,Ne,Oe,Ge,pt;return N(F,function(Lt){if(Lt.g==1){if(D.g.graph&&D.g.graph.url&&D.P===D.g.graph.url)return Lt.return();if(D.o=!0,!D.g.graph||!D.g.graph.url){Lt.g=2;return}return D.P=D.g.graph.url,v(Lt,jc(D,D.g.graph.url),3)}for(Lt.g!=2&&(Z=Lt.h,D.i.loadGraph(Z)),de=a(Object.keys(D.B)),Ce=de.next();!Ce.done;Ce=de.next())pe=Ce.value,D.i.overrideFile(pe,D.B[pe]);if(D.B={},D.g.listeners)for(Ne=a(D.g.listeners),Oe=Ne.next();!Oe.done;Oe=Ne.next())Ge=Oe.value,fN(D,Ge);pt=D.j,D.j={},D.setOptions(pt),Lt.g=0})})}t.reset=function(){return Kr(this,function I(){var F=this;return N(I,function(D){F.i&&(F.i.reset(),F.m={},F.s={}),D.g=0})})},t.setOptions=function(I,F){var D=this;if(F=F||this.g.options){for(var Z=[],de=[],Ce={},pe=a(Object.keys(I)),Ne=pe.next();!Ne.done;Ce={K:Ce.K,L:Ce.L},Ne=pe.next()){var Oe=Ne.value;Oe in this.j&&this.j[Oe]===I[Oe]||(this.j[Oe]=I[Oe],Ne=F[Oe],Ne!==void 0&&(Ne.onChange&&(Ce.K=Ne.onChange,Ce.L=I[Oe],Z.push(function(Ge){return function(){return Kr(D,function pt(){var Lt,Et=this;return N(pt,function(yt){if(yt.g==1)return v(yt,Ge.K(Ge.L),2);Lt=yt.h,Lt===!0&&(Et.o=!0),yt.g=0})})}}(Ce))),Ne.graphOptionXref&&(Oe={valueNumber:Ne.type===1?I[Oe]:0,valueBoolean:Ne.type===0?I[Oe]:!1,valueString:Ne.type===2?I[Oe]:""},Ne=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),Ne.graphOptionXref),Oe),de.push(Ne))))}(Z.length!==0||de.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(de),this.u=(this.u===void 0?[]:this.u).concat(Z))}};function dN(I){return Kr(I,function F(){var D=this,Z,de,Ce,pe,Ne,Oe,Ge;return N(F,function(pt){switch(pt.g){case 1:if(!D.o)return pt.return();if(!D.u){pt.g=2;break}Z=a(D.u),de=Z.next();case 3:if(de.done){pt.g=5;break}return Ce=de.value,v(pt,Ce(),4);case 4:de=Z.next(),pt.g=3;break;case 5:D.u=void 0;case 2:if(D.A){for(pe=new D.h.GraphOptionChangeRequestList,Ne=a(D.A),Oe=Ne.next();!Oe.done;Oe=Ne.next())Ge=Oe.value,pe.push_back(Ge);D.i.changeOptions(pe),pe.delete(),D.A=void 0}D.o=!1,pt.g=0}})})}t.initialize=function(){return Kr(this,function I(){var F=this;return N(I,function(D){return D.g==1?v(D,Dm(F),2):D.g!=3?v(D,AN(F),3):v(D,dN(F),0)})})};function jc(I,F){return Kr(I,function D(){var Z=this,de,Ce;return N(D,function(pe){return F in Z.F?pe.return(Z.F[F]):(de=Z.locateFile(F,""),Ce=fetch(de).then(function(Ne){return Ne.arrayBuffer()}),Z.F[F]=Ce,pe.return(Ce))})})}t.overrideFile=function(I,F){this.i?this.i.overrideFile(I,F):this.B[I]=F},t.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},t.send=function(I,F){return Kr(this,function D(){var Z=this,de,Ce,pe,Ne,Oe,Ge,pt,Lt,Et;return N(D,function(yt){switch(yt.g){case 1:return Z.g.inputs?(de=1e3*(F??performance.now()),v(yt,Z.C,2)):yt.return();case 2:return v(yt,Z.initialize(),3);case 3:for(Ce=new Z.h.PacketDataList,pe=a(Object.keys(I)),Ne=pe.next();!Ne.done;Ne=pe.next())if(Oe=Ne.value,Ge=Z.g.inputs[Oe]){e:{var nt=Z,E=I[Oe];switch(Ge.type){case"video":var $=nt.m[Ge.stream];if($||($=new IA(nt.h,nt.D),nt.m[Ge.stream]=$),nt=$,nt.l===0&&(nt.l=nt.h.createTexture()),typeof HTMLVideoElement<"u"&&E instanceof HTMLVideoElement){var R=E.videoWidth;$=E.videoHeight}else typeof HTMLImageElement<"u"&&E instanceof HTMLImageElement?(R=E.naturalWidth,$=E.naturalHeight):(R=E.width,$=E.height);$={glName:nt.l,width:R,height:$},R=nt.g,R.canvas.width=$.width,R.canvas.height=$.height,R.activeTexture(R.TEXTURE0),nt.h.bindTexture2d(nt.l),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,E),nt.h.bindTexture2d(0),nt=$;break e;case"detections":for($=nt.m[Ge.stream],$||($=new cN(nt.h),nt.m[Ge.stream]=$),nt=$,nt.data||(nt.data=new nt.g.DetectionListData),nt.data.reset(E.length),$=0;$<E.length;++$){R=E[$];var z=nt.data,q=z.setBoundingBox,X=$,ee=R.T,se=new kf;Ft(se,1,ee.Z),Ft(se,2,ee.$),Ft(se,3,ee.height),Ft(se,4,ee.width),Ft(se,5,ee.rotation),Ft(se,6,ee.X);var me=ee=new Zn;Vn(me,1,mn(se,1)),Vn(me,2,mn(se,2)),Vn(me,3,mn(se,3)),Vn(me,4,mn(se,4)),Vn(me,5,mn(se,5));var Se=mn(se,6);if(Se!=null&&Se!=null){rt(me.g,48);var ke=me.g,De=Se;Se=0>De,De=Math.abs(De);var Pe=De>>>0;for(De=Math.floor((De-Pe)/4294967296),De>>>=0,Se&&(De=~De>>>0,Pe=(~Pe>>>0)+1,4294967295<Pe&&(Pe=0,De++,4294967295<De&&(De=0))),ge=Pe,$e=De,Se=ge,Pe=$e;0<Pe||127<Se;)ke.push(Se&127|128),Se=(Se>>>7|Pe<<25)>>>0,Pe>>>=7;ke.push(Se)}if(Ef(se,me),ee=Ss(ee),q.call(z,X,ee),R.O)for(z=0;z<R.O.length;++z)se=R.O[z],me=!!se.visibility,q=nt.data,X=q.addNormalizedLandmark,ee=$,se=Object.assign(Object.assign({},se),{visibility:me?se.visibility:0}),me=new Pc,Ft(me,1,se.x),Ft(me,2,se.y),Ft(me,3,se.z),se.visibility&&Ft(me,4,se.visibility),ke=se=new Zn,Vn(ke,1,mn(me,1)),Vn(ke,2,mn(me,2)),Vn(ke,3,mn(me,3)),Vn(ke,4,mn(me,4)),Vn(ke,5,mn(me,5)),Ef(me,ke),se=Ss(se),X.call(q,ee,se);if(R.M)for(z=0;z<R.M.length;++z){if(q=nt.data,X=q.addClassification,ee=$,se=R.M[z],me=new La,Ft(me,2,se.Y),se.index&&Ft(me,1,se.index),se.label&&Ft(me,3,se.label),se.displayName&&Ft(me,4,se.displayName),ke=se=new Zn,Pe=mn(me,1),Pe!=null&&Pe!=null)if(rt(ke.g,8),Se=ke.g,0<=Pe)rt(Se,Pe);else{for(De=0;9>De;De++)Se.push(Pe&127|128),Pe>>=7;Se.push(1)}Vn(ke,2,mn(me,2)),Se=mn(me,3),Se!=null&&(Se=j(Se),rt(ke.g,26),rt(ke.g,Se.length),ur(ke,ke.g.end()),ur(ke,Se)),Se=mn(me,4),Se!=null&&(Se=j(Se),rt(ke.g,34),rt(ke.g,Se.length),ur(ke,ke.g.end()),ur(ke,Se)),Ef(me,ke),se=Ss(se),X.call(q,ee,se)}}nt=nt.data;break e;default:nt={}}}switch(pt=nt,Lt=Ge.stream,Ge.type){case"video":Ce.pushTexture2d(Object.assign(Object.assign({},pt),{stream:Lt,timestamp:de}));break;case"detections":Et=pt,Et.stream=Lt,Et.timestamp=de,Ce.pushDetectionList(Et);break;default:throw Error("Unknown input config type: '"+Ge.type+"'")}}return Z.i.send(Ce),v(yt,Z.C,4);case 4:Ce.delete(),yt.g=0}})})};function Yv(I,F,D){return Kr(I,function Z(){var de,Ce,pe,Ne,Oe,Ge,pt=this,Lt,Et,yt,nt,E,$,R,z;return N(Z,function(q){switch(q.g){case 1:if(!D)return q.return(F);for(de={},Ce=0,pe=a(Object.keys(D)),Ne=pe.next();!Ne.done;Ne=pe.next())Oe=Ne.value,Ge=D[Oe],typeof Ge!="string"&&Ge.type==="texture"&&F[Ge.stream]!==void 0&&++Ce;1<Ce&&(pt.G=!1),Lt=a(Object.keys(D)),Ne=Lt.next();case 2:if(Ne.done){q.g=4;break}if(Et=Ne.value,yt=D[Et],typeof yt=="string")return R=de,z=Et,v(q,Jv(pt,Et,F[yt]),14);if(nt=F[yt.stream],yt.type==="detection_list"){if(nt){for(var X=nt.getRectList(),ee=nt.getLandmarksList(),se=nt.getClassificationsList(),me=[],Se=0;Se<X.size();++Se){var ke=X.get(Se);e:{var De=new kf;for(ke=new ht(ke);dt(ke);)switch(ke.i){case 13:var Pe=Dt(ke);Ft(De,1,Pe);break;case 21:Pe=Dt(ke),Ft(De,2,Pe);break;case 29:Pe=Dt(ke),Ft(De,3,Pe);break;case 37:Pe=Dt(ke),Ft(De,4,Pe);break;case 45:Pe=Dt(ke),Ft(De,5,Pe);break;case 48:Pe=it(ke.g),Ft(De,6,Pe);break;default:if(!Vi(De,ke))break e}}De={Z:zi(De,1),$:zi(De,2),height:zi(De,3),width:zi(De,4),rotation:zi(De,5,0),X:Pa(De,6,0)},ke=Nf(Vv(ee.get(Se)),Pc).map(_m);var Qe=se.get(Se);e:for(Pe=new If,Qe=new ht(Qe);dt(Qe);)switch(Qe.i){case 10:Pe.addClassification(Yt(Qe,new La,Qv));break;default:if(!Vi(Pe,Qe))break e}De={T:De,O:ke,M:$m(Pe)},me.push(De)}X=me}else X=[];de[Et]=X,q.g=7;break}if(yt.type==="proto_list"){if(nt){for(X=Array(nt.size()),ee=0;ee<nt.size();ee++)X[ee]=nt.get(ee);nt.delete()}else X=[];de[Et]=X,q.g=7;break}if(nt===void 0){q.g=3;break}if(yt.type==="float_list"){de[Et]=nt,q.g=7;break}if(yt.type==="proto"){de[Et]=nt,q.g=7;break}if(yt.type!=="texture")throw Error("Unknown output config type: '"+yt.type+"'");return E=pt.s[Et],E||(E=new IA(pt.h,pt.D),pt.s[Et]=E),v(q,Uc(E,nt,pt.G),13);case 13:$=q.h,de[Et]=$;case 7:yt.transform&&de[Et]&&(de[Et]=yt.transform(de[Et])),q.g=3;break;case 14:R[z]=q.h;case 3:Ne=Lt.next(),q.g=2;break;case 4:return q.return(de)}})})}function Jv(I,F,D){return Kr(I,function Z(){var de=this,Ce;return N(Z,function(pe){return typeof D=="number"||D instanceof Uint8Array||D instanceof de.h.Uint8BlobList?pe.return(D):D instanceof de.h.Texture2dDataOut?(Ce=de.s[F],Ce||(Ce=new IA(de.h,de.D),de.s[F]=Ce),pe.return(Uc(Ce,D,de.G))):pe.return(void 0)})})}function fN(I,F){for(var D=F.name||"$",Z=[].concat(l(F.wants)),de=new I.h.StringList,Ce=a(F.wants),pe=Ce.next();!pe.done;pe=Ce.next())de.push_back(pe.value);Ce=I.h.PacketListener.implement({onResults:function(Ne){for(var Oe={},Ge=0;Ge<F.wants.length;++Ge)Oe[Z[Ge]]=Ne.get(Ge);var pt=I.listeners[D];pt&&(I.C=Yv(I,Oe,F.outs).then(function(Lt){Lt=pt(Lt);for(var Et=0;Et<F.wants.length;++Et){var yt=Oe[Z[Et]];typeof yt=="object"&&yt.hasOwnProperty&&yt.hasOwnProperty("delete")&&yt.delete()}Lt&&(I.C=Lt)}))}}),I.i.attachMultiListener(de,Ce),de.delete()}t.onResults=function(I,F){this.listeners[F||"$"]=I},P("Solution",Fl),P("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function hN(I){I=Gv(I);var F=I.getMesh();if(!F)return I;var D=new Float32Array(F.getVertexBufferList());F.getVertexBufferList=function(){return D};var Z=new Uint32Array(F.getIndexBufferList());return F.getIndexBufferList=function(){return Z},I}var Rm={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(I){return I.map(hN)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(I){return I.map(function(F){return Nf(Vv(F),Pc).map(_m)})}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},Pm=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],Um=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],jm=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Lm=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Mm=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],Qm=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],Zv=[].concat(l(Pm),l(Um),l(jm),l(Lm),l(Mm),l(Qm));function e1(I){I=I||{},I=Object.assign(Object.assign({},Rm),I),this.g=new Fl(I)}t=e1.prototype,t.close=function(){return this.g.close(),Promise.resolve()},t.onResults=function(I){this.g.onResults(I)},t.initialize=function(){return Kr(this,function I(){var F=this;return N(I,function(D){return v(D,F.g.initialize(),0)})})},t.reset=function(){this.g.reset()},t.send=function(I){return Kr(this,function F(){var D=this;return N(F,function(Z){return v(Z,D.g.send(I),0)})})},t.setOptions=function(I){this.g.setOptions(I)},P("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),P("FaceMesh",e1),P("FACEMESH_LIPS",Pm),P("FACEMESH_LEFT_EYE",Um),P("FACEMESH_LEFT_EYEBROW",jm),P("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),P("FACEMESH_RIGHT_EYE",Lm),P("FACEMESH_RIGHT_EYEBROW",Mm),P("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),P("FACEMESH_FACE_OVAL",Qm),P("FACEMESH_CONTOURS",Zv),P("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),P("matrixDataToMatrix",function(I){for(var F=I.getCols(),D=I.getRows(),Z=I.getPackedDataList(),de=[],Ce=0;Ce<D;Ce++)de.push(Array(F));for(Ce=0;Ce<D;Ce++)for(var pe=0;pe<F;pe++){var Ne=I.getLayout()===1?Ce*F+pe:pe*D+Ce;de[Ce][pe]=Z[Ne]}return de}),P("VERSION","0.4.1633559619")}).call(Ci);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b1e=1e-7,w1e=1e-4;class dK{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class C_{refCount(e){return fi("refCount")}incRef(e){return fi("incRef")}timerAvailable(){return!0}time(e){return fi("time")}read(e){return fi("read")}readSync(e){return fi("readSync")}readToGPU(e,n){return fi("readToGPU")}numDataIds(){return fi("numDataIds")}disposeData(e,n){return fi("disposeData")}write(e,n,r){return fi("write")}move(e,n,r,s,i){return fi("move")}createTensorFromGPUData(e,n,r){return fi("createTensorFromGPUData")}memory(){return fi("memory")}floatPrecision(){return fi("floatPrecision")}epsilon(){return this.floatPrecision()===32?b1e:w1e}dispose(){return fi("dispose")}}function fi(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C1e(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Xf(t,e,n)}function Md(t,e,n){return Math.max(t,Math.min(e,n))}function S_(t){return t%2===0?t:t+1}function Xf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function S1e(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function M(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function ji(t,e,n=""){M(_t(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Zp(t){M(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ye(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function B1e(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function _t(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function sp(t){return t%1===0}function xk(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Ih(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function t6(t,e=s=>0,n,r){return new Promise((s,i)=>{let o=0;const a=()=>{if(t()){s();return}o++;const l=e(o);if(n!=null&&o>=n){i();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function fK(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function kt(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),M(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),M(t.every(r=>sp(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function lA(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||s?null:kt(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(i!=null){if(i[o]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(i[o]==null||i[o]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),i[o]<=a&&o++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function rs(t,e){return sr(t,e)}function sr(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function N1e(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function E1e(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function hK(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function t2(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function I1e(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function cx(t){return typeof t=="string"||t instanceof String}function k1e(t){return typeof t=="boolean"}function vk(t){return typeof t=="number"}function em(t){return Array.isArray(t)?em(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":vk(t)?"float32":cx(t)?"string":k1e(t)?"bool":"float32"}function bk(t){return!!(t&&t.constructor&&t.call&&t.apply)}function wk(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function ot(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function pK(t,e,n,r=!1){const s=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let o=0;o<i;o++)s[o]=n[t+o]}else{const i=e[0],o=e.slice(1),a=o.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<i;l++)s[l]=pK(t+l*a,o,n,r)}return s}function Uo(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,i)=>s*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return pK(0,t,e,n)}function T1e(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function B_(t,e){const n=bs(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function bs(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function mK(t,e){const n=t.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return Uo(t,new Float32Array(n));if(e==="int32")return Uo(t,new Int32Array(n));if(e==="bool")return Uo(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function lo(t){t.forEach(e=>{M(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function ul(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function tm(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function Qd(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n6="tfjsflags";class F1e{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=$1e,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(he().getBool("IS_TEST")||he().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];he().getBool("IS_TEST")||he().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Qd(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);n6 in e&&e[n6].split(",").forEach(r=>{const[s,i]=r.split(":");this.urlFlags[s]=O1e(s,i)})}}function $1e(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(_1e(e,r[0],r[1]),r.join("="))),e}function _1e(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function O1e(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function he(){return gK}let gK=null;function D1e(t){gK=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let T4;function yK(){if(T4==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");T4=t}return T4}function R1e(){const t=yK();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function N_(t,e){const n=R1e();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const xS="Abs",ux="Acos",Ax="Acosh",nm="Add",vS="AddN",E_="All",I_="Any",bS="ArgMax",wS="ArgMin",dx="Asin",fx="Asinh",hx="Atan",px="Atanh",mx="Atan2",CS="AvgPool",k_="AvgPoolGrad",SS="AvgPool3D",T_="AvgPool3DGrad",BS="BatchMatMul",NS="BatchToSpaceND",F_="Bincount",ES="BitwiseAnd",P1e="BroadcastTo",$_="BroadcastArgs",gx="Cast",yx="Ceil",xx="ClipByValue",__="Complex",IS="ComplexAbs",kS="Concat",TS="Conv2D",O_="Conv2DBackpropFilter",FS="Conv2DBackpropInput",$S="Conv3D",D_="Conv3DBackpropFilterV2",R_="Conv3DBackpropInputV2",vx="Cos",bx="Cosh",P_="Cumprod",_S="Cumsum",U_="CropAndResize",j_="DenseBincount",L_="DepthToSpace",OS="DepthwiseConv2dNative",M_="DepthwiseConv2dNativeBackpropFilter",Q_="DepthwiseConv2dNativeBackpropInput",H_="Diag",DS="Dilation2D",Ck="Dilation2DBackpropInput",Sk="Dilation2DBackpropFilter",U1e="Draw",wx="RealDiv",z_="Einsum",Cx="Elu",V_="EluGrad",Sx="Erf",RS="Equal",Bx="Exp",PS="ExpandDims",Nx="Expm1",W_="FFT",G_="Fill",K_="FlipLeftRight",Ex="Floor",Ix="FloorDiv",US="FusedBatchNorm",jS="GatherV2",X_="GatherNd",LS="Greater",kx="GreaterEqual",Tx="Identity",q_="IFFT",Y_="Imag",Fx="IsFinite",$x="IsInf",_x="IsNan",MS="LeakyRelu",QS="Less",HS="LessEqual",J_="LinSpace",Ox="Log",Dx="Log1p",zS="LogicalAnd",VS="LogicalNot",WS="LogicalOr",j1e="LogSoftmax",GS="LRN",Z_="LRNGrad",KS="Max",Rx="Maximum",XS="MaxPool",eO="MaxPoolGrad",qS="MaxPool3D",tO="MaxPool3DGrad",nO="MaxPoolWithArgmax",YS="Mean",JS="Min",Px="Minimum",ZS="MirrorPad",Ux="Mod",rO="Multinomial",jx="Multiply",eB="Neg",tB="NotEqual",sO="NonMaxSuppressionV3",iO="NonMaxSuppressionV4",oO="NonMaxSuppressionV5",nB="OnesLike",rB="OneHot",sB="Pack",iB="PadV2",Lx="Pow",oB="Prelu",aB="Prod",aO="RaggedGather",lO="RaggedRange",cO="RaggedTensorToTensor",uO="Range",AO="Real",Mx="Reciprocal",Qx="Relu",lB="Reshape",cB="ResizeNearestNeighbor",dO="ResizeNearestNeighborGrad",uB="ResizeBilinear",fO="ResizeBilinearGrad",Hx="Relu6",AB="Reverse",zx="Round",Vx="Rsqrt",hO="ScatterNd",pO="TensorScatterUpdate",mO="SearchSorted",dB="Select",Wx="Selu",fB="Slice",Gx="Sin",Kx="Sinh",Xx="Sign",qx="Sigmoid",Yx="Softplus",Jx="Sqrt",hB="Sum",pB="SpaceToBatchND",mB="SplitV",gB="Softmax",gO="SparseFillEmptyRows",yO="SparseReshape",xO="SparseSegmentMean",vO="SparseSegmentSum",bO="SparseToDense",Zx="SquaredDifference",wO="Square",yB="StaticRegexReplace",CO="StridedSlice",SO="StringNGrams",BO="StringSplit",NO="StringToHashBucketFast",ev="Sub",tv="Tan",nv="Tanh",rv="Tile",EO="TopK",IO="Transform",kh="Transpose",kO="Unique",xB="Unpack",vB="UnsortedSegmentSum",bB="ZerosLike",sv="Step",Bk="FromPixels",TO="RotateWithOffset",n2="_FusedMatMul",r2="FusedConv2D",s2="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ji(...t){he().getBool("IS_TEST")||he().getBool("PROD")||console.warn(...t)}function L1e(...t){he().getBool("IS_TEST")||he().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i2=N_("kernelRegistry",()=>new Map),Nk=N_("gradRegistry",()=>new Map);function Ek(t,e){const n=vK(t,e);return i2.get(n)}function r6(t){return Nk.get(t)}function s6(t){const e=i2.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[i,o]=s,[a]=i.split("_");a===t&&n.push(o)}return n}function xK(t){const{kernelName:e,backendName:n}=t,r=vK(e,n);i2.has(r)&&Ji(`The kernel '${e}' for backend '${n}' is already registered`),i2.set(r,t)}function M1e(t){const{kernelName:e}=t;Nk.has(e)&&he().getBool("DEBUG")&&Ji(`Overriding the gradient for '${e}'`),Nk.set(e,t)}function vK(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bK(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var wK=Nn,To=null;try{To=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Nn(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Nn.prototype.__isLong__;Object.defineProperty(Nn.prototype,"__isLong__",{value:!0});function Li(t){return(t&&t.__isLong__)===!0}Nn.isLong=Li;var i6={},o6={};function cf(t,e){var n,r,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(r=o6[t],r)?r:(n=En(t,(t|0)<0?-1:0,!0),s&&(o6[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(r=i6[t],r)?r:(n=En(t,t<0?-1:0,!1),s&&(i6[t]=n),n))}Nn.fromInt=cf;function Fo(t,e){if(isNaN(t))return e?od:$o;if(e){if(t<0)return od;if(t>=CK)return NK}else{if(t<=-l6)return Ni;if(t+1>=l6)return BK}return t<0?Fo(-t,e).neg():En(t%ip|0,t/ip|0,e)}Nn.fromNumber=Fo;function En(t,e,n){return new Nn(t,e,n)}Nn.fromBits=En;var o2=Math.pow;function FO(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return $o;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return FO(t.substring(1),e,n).neg();for(var s=Fo(o2(n,8)),i=$o,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var c=Fo(o2(n,a));i=i.mul(c).add(Fo(l))}else i=i.mul(s),i=i.add(Fo(l))}return i.unsigned=e,i}Nn.fromString=FO;function _a(t,e){return typeof t=="number"?Fo(t,e):typeof t=="string"?FO(t,e):En(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Nn.fromValue=_a;var a6=65536,Q1e=1<<24,ip=a6*a6,CK=ip*ip,l6=CK/2,c6=cf(Q1e),$o=cf(0);Nn.ZERO=$o;var od=cf(0,!0);Nn.UZERO=od;var fh=cf(1);Nn.ONE=fh;var SK=cf(1,!0);Nn.UONE=SK;var Ik=cf(-1);Nn.NEG_ONE=Ik;var BK=En(-1,2147483647,!1);Nn.MAX_VALUE=BK;var NK=En(-1,-1,!0);Nn.MAX_UNSIGNED_VALUE=NK;var Ni=En(0,-2147483648,!1);Nn.MIN_VALUE=Ni;var Me=Nn.prototype;Me.toInt=function(){return this.unsigned?this.low>>>0:this.low};Me.toNumber=function(){return this.unsigned?(this.high>>>0)*ip+(this.low>>>0):this.high*ip+(this.low>>>0)};Me.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Ni)){var n=Fo(e),r=this.div(n),s=r.mul(n).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=Fo(o2(e,6),this.unsigned),o=this,a="";;){var l=o.div(i),c=o.sub(l.mul(i)).toInt()>>>0,u=c.toString(e);if(o=l,o.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};Me.getHighBits=function(){return this.high};Me.getHighBitsUnsigned=function(){return this.high>>>0};Me.getLowBits=function(){return this.low};Me.getLowBitsUnsigned=function(){return this.low>>>0};Me.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ni)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};Me.isZero=function(){return this.high===0&&this.low===0};Me.eqz=Me.isZero;Me.isNegative=function(){return!this.unsigned&&this.high<0};Me.isPositive=function(){return this.unsigned||this.high>=0};Me.isOdd=function(){return(this.low&1)===1};Me.isEven=function(){return(this.low&1)===0};Me.equals=function(e){return Li(e)||(e=_a(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Me.eq=Me.equals;Me.notEquals=function(e){return!this.eq(e)};Me.neq=Me.notEquals;Me.ne=Me.notEquals;Me.lessThan=function(e){return this.comp(e)<0};Me.lt=Me.lessThan;Me.lessThanOrEqual=function(e){return this.comp(e)<=0};Me.lte=Me.lessThanOrEqual;Me.le=Me.lessThanOrEqual;Me.greaterThan=function(e){return this.comp(e)>0};Me.gt=Me.greaterThan;Me.greaterThanOrEqual=function(e){return this.comp(e)>=0};Me.gte=Me.greaterThanOrEqual;Me.ge=Me.greaterThanOrEqual;Me.compare=function(e){if(Li(e)||(e=_a(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Me.comp=Me.compare;Me.negate=function(){return!this.unsigned&&this.eq(Ni)?Ni:this.not().add(fh)};Me.neg=Me.negate;Me.add=function(e){Li(e)||(e=_a(e));var n=this.high>>>16,r=this.high&65535,s=this.low>>>16,i=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,A=0,d=0,f=0;return f+=i+c,d+=f>>>16,f&=65535,d+=s+l,A+=d>>>16,d&=65535,A+=r+a,u+=A>>>16,A&=65535,u+=n+o,u&=65535,En(d<<16|f,u<<16|A,this.unsigned)};Me.subtract=function(e){return Li(e)||(e=_a(e)),this.add(e.neg())};Me.sub=Me.subtract;Me.multiply=function(e){if(this.isZero())return $o;if(Li(e)||(e=_a(e)),To){var n=To.mul(this.low,this.high,e.low,e.high);return En(n,To.get_high(),this.unsigned)}if(e.isZero())return $o;if(this.eq(Ni))return e.isOdd()?Ni:$o;if(e.eq(Ni))return this.isOdd()?Ni:$o;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(c6)&&e.lt(c6))return Fo(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,i=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,A=0,d=0,f=0,h=0;return h+=o*u,f+=h>>>16,h&=65535,f+=i*u,d+=f>>>16,f&=65535,f+=o*c,d+=f>>>16,f&=65535,d+=s*u,A+=d>>>16,d&=65535,d+=i*c,A+=d>>>16,d&=65535,d+=o*l,A+=d>>>16,d&=65535,A+=r*u+s*c+i*l+o*a,A&=65535,En(f<<16|h,A<<16|d,this.unsigned)};Me.mul=Me.multiply;Me.divide=function(e){if(Li(e)||(e=_a(e)),e.isZero())throw Error("division by zero");if(To){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?To.div_u:To.div_s)(this.low,this.high,e.low,e.high);return En(n,To.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?od:$o;var r,s,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return od;if(e.gt(this.shru(1)))return SK;i=od}else{if(this.eq(Ni)){if(e.eq(fh)||e.eq(Ik))return Ni;if(e.eq(Ni))return fh;var o=this.shr(1);return r=o.div(e).shl(1),r.eq($o)?e.isNegative()?fh:Ik:(s=this.sub(e.mul(r)),i=r.add(s.div(e)),i)}else if(e.eq(Ni))return this.unsigned?od:$o;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=$o}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:o2(2,a-48),c=Fo(r),u=c.mul(e);u.isNegative()||u.gt(s);)r-=l,c=Fo(r,this.unsigned),u=c.mul(e);c.isZero()&&(c=fh),i=i.add(c),s=s.sub(u)}return i};Me.div=Me.divide;Me.modulo=function(e){if(Li(e)||(e=_a(e)),To){var n=(this.unsigned?To.rem_u:To.rem_s)(this.low,this.high,e.low,e.high);return En(n,To.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Me.mod=Me.modulo;Me.rem=Me.modulo;Me.not=function(){return En(~this.low,~this.high,this.unsigned)};Me.and=function(e){return Li(e)||(e=_a(e)),En(this.low&e.low,this.high&e.high,this.unsigned)};Me.or=function(e){return Li(e)||(e=_a(e)),En(this.low|e.low,this.high|e.high,this.unsigned)};Me.xor=function(e){return Li(e)||(e=_a(e)),En(this.low^e.low,this.high^e.high,this.unsigned)};Me.shiftLeft=function(e){return Li(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?En(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):En(0,this.low<<e-32,this.unsigned)};Me.shl=Me.shiftLeft;Me.shiftRight=function(e){return Li(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?En(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):En(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Me.shr=Me.shiftRight;Me.shiftRightUnsigned=function(e){if(Li(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return En(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?En(n,0,this.unsigned):En(n>>>e-32,0,this.unsigned)};Me.shru=Me.shiftRightUnsigned;Me.shr_u=Me.shiftRightUnsigned;Me.toSigned=function(){return this.unsigned?En(this.low,this.high,!1):this};Me.toUnsigned=function(){return this.unsigned?this:En(this.low,this.high,!0)};Me.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Me.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Me.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Nn.fromBytes=function(e,n,r){return r?Nn.fromBytesLE(e,n):Nn.fromBytesBE(e,n)};Nn.fromBytesLE=function(e,n){return new Nn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Nn.fromBytesBE=function(e,n){return new Nn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const EK=Gt(wK),H1e=l9({__proto__:null,default:EK},[wK]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qA=EK||H1e;function wB(t){return qA.fromString(t,!0,16)}const IK=wB("c3a5c85c97cb3127"),VA=wB("b492b66fbe98f273"),Ds=wB("9ae16a3b2f90404f");function kk(t){return t.xor(t.shru(47))}function kK(t,e,n){const r=t.slice(e,e+n);return qA.fromBytes(Array.from(r),!0,!0)}function gn(t,e){return kK(t,e,8)}function u6(t,e){return kK(t,e,4)}function jr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function _u(t,e,n=wB("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function z1e(t,e,n,r,s,i){s=s.add(t),i=jr(i.add(s).add(r),21);const o=s;return s=s.add(e),s=s.add(n),i=i.add(jr(s,44)),[s.add(r),i.add(o)]}function ib(t,e,n,r){return z1e(gn(t,e),gn(t,e+8),gn(t,e+16),gn(t,e+24),n,r)}function V1e(t,e=t.length){if(e>=8){const n=Ds.add(e*2),r=gn(t,0).add(Ds),s=gn(t,e-8),i=jr(s,37).mul(n).add(r),o=jr(r,25).add(s).mul(n);return _u(i,o,n)}if(e>=4){const n=Ds.add(e*2),r=u6(t,0);return _u(r.shl(3).add(e),u6(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],i=n+(r<<8),o=e+(s<<2);return kk(Ds.mul(i).xor(IK.mul(o))).mul(Ds)}return Ds}function W1e(t,e=t.length){const n=Ds.add(e*2),r=gn(t,0).mul(VA),s=gn(t,8),i=gn(t,e-8).mul(n),o=gn(t,e-16).mul(Ds);return _u(jr(r.add(s),43).add(jr(i,30)).add(o),r.add(jr(s.add(Ds),18)).add(i),n)}function G1e(t,e=t.length){const n=Ds.add(e*2),r=gn(t,0).mul(Ds),s=gn(t,8),i=gn(t,e-8).mul(n),o=gn(t,e-16).mul(Ds),a=jr(r.add(s),43).add(jr(i,30)).add(o),l=_u(a,r.add(jr(s.add(Ds),18)).add(i),n),c=gn(t,16).mul(n),u=gn(t,24),A=a.add(gn(t,e-32)).mul(n),d=l.add(gn(t,e-24)).mul(n);return _u(jr(c.add(u),43).add(jr(A,30)).add(d),c.add(jr(u.add(r),18)).add(A),n)}function K1e(t,e=t.length){const n=qA.fromNumber(81,!0);if(e<=32)return e<=16?V1e(t,e):W1e(t,e);if(e<=64)return G1e(t,e);let r=n,s=n.mul(VA).add(113),i=kk(s.mul(Ds).add(113)).mul(Ds),o=[qA.UZERO,qA.UZERO],a=[qA.UZERO,qA.UZERO];r=r.mul(Ds).add(gn(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=jr(r.add(s).add(o[0]).add(gn(t,l+8)),37).mul(VA),s=jr(s.add(o[1]).add(gn(t,l+48)),42).mul(VA),r=r.xor(a[1]),s=s.add(o[0]).add(gn(t,l+40)),i=jr(i.add(a[0]),33).mul(VA),o=ib(t,l,o[1].mul(VA),r.add(a[0])),a=ib(t,l+32,i.add(a[1]),s.add(gn(t,l+16))),[i,r]=[r,i],l+=64;while(l!==c);const A=VA.add(i.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=jr(r.add(s).add(o[0]).add(gn(t,l+8)),37).mul(A),s=jr(s.add(o[1]).add(gn(t,l+48)),42).mul(A),r=r.xor(a[1].mul(9)),s=s.add(o[0].mul(9).add(gn(t,l+40))),i=jr(i.add(a[0]),33).mul(A),o=ib(t,l,o[1].mul(A),r.add(a[0])),a=ib(t,l+32,i.add(a[1]),s.add(gn(t,l+16))),[i,r]=[r,i],_u(_u(o[0],a[0],A).add(kk(s).mul(IK)).add(i),_u(o[1],a[1],A).add(r),A)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cA(t,e){return e==="string"?Ou(t):uf([t],e)}function X1e(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function uf(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Hd(t)),he().getBool("DEBUG")&&N1e(t,e),X1e(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Js(){return he().platform.now()}function Ou(t,e="utf-8"){return e=e||"utf-8",he().platform.encode(t,e)}function Vu(t,e="utf-8"){return e=e||"utf-8",he().platform.decode(t,e)}function Ho(t){return he().platform.isTypedArray!=null?he().platform.isTypedArray(t):bK(t)}function Hd(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||Qd(t)||t==null||Ho(t)&&n)e.push(t);else if(Array.isArray(t)||Ho(t))for(let r=0;r<t.length;++r)Hd(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)Hd(t[s],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q1e{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new J1e)}profileKernel(e,n,r){let s;const i=()=>{s=r()};let o;const a=Js();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const c of s)c.dataSync();o=Promise.resolve({kernelMs:Js()-a})}if(he().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const u=s[c];u.data().then(A=>{Y1e(A,u.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:o.then(c=>c.kernelMs),extraInfo:o.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:i,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),s,o]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],i,l[2])})})}}function Y1e(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class J1e{logKernelProfile(e,n,r,s,i,o){const a=typeof s=="number"?Ih(`${s}ms`,9):s.error,l=Ih(e,25),c=n.rank,u=n.size,A=Ih(n.shape.toString(),14);let d="";for(const f in i){const h=i[f];if(h!=null){const m=h.shape||n.shape,g=m.length;d+=`${f}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${A}	%c${u}	%c${d}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z1e(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const A in u){const d=u[A];let f=!1;for(let h=0;h<e.length;h++)if(r[d.id]){c.outputs.forEach(m=>r[m.id]=!0),f=!0,s[c.id]=!0;break}if(f)break}}const i={};i[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let A=0;A<c.outputs.length;A++)if(i[c.outputs[A].id]){for(const d in u)i[u[d].id]=!0,o[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(s[c.id]&&o[c.id]){const u={};for(const d in c.inputs){const f=c.inputs[d];r[f.id]&&(u[d]=f)}const A=Object.assign({},c);A.inputs=u,A.outputs=c.outputs,a.push(A)}}return a}function ebe(t,e,n,r){for(let s=e.length-1;s>=0;s--){const i=e[s],o=[];if(i.outputs.forEach(l=>{const c=t[l.id];c!=null?o.push(c):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const a=i.gradient(o);for(const l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=i.inputs[l];if(!_t(c.shape,u.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const A=t[u.id];t[u.id]=r(A,c),A.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A6=20,ag=3,F4=7;function tbe(t,e,n,r){const s=ot(e),i=nbe(t,e,n,s),o=e.length,a=sw(t,e,n,s,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function nbe(t,e,n,r){const s=ye(e),i=r[r.length-1],o=new Array(i).fill(0),a=e.length,l=n==="complex64"?jg(t):t;if(a>1)for(let c=0;c<s/i;c++){const u=c*i;for(let A=0;A<i;A++)o[A]=Math.max(o[A],Ug(l[u+A],0,n).length)}return o}function Ug(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(F4))} + ${parseFloat(t[1].toFixed(F4))}j`:cx(t)?r=`'${t}'`:n==="bool"?r=TK(t):r=parseFloat(t.toFixed(F4)).toString(),Ih(r,e)}function TK(t){return t===0?"false":"true"}function sw(t,e,n,r,s,i=!0){const o=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const m=jg(t);return[Ug(m[0],0,n)]}return n==="bool"?[TK(t[0])]:[t[0].toString()]}if(l===1){if(a>A6){const g=ag*o;let y=Array.from(t.slice(0,g)),x=Array.from(t.slice((a-ag)*o,a*o));return n==="complex64"&&(y=jg(y),x=jg(x)),["["+y.map((v,b)=>Ug(v,s[b],n)).join(", ")+", ..., "+x.map((v,b)=>Ug(v,s[a-ag+b],n)).join(", ")+"]"]}return["["+(n==="complex64"?jg(t):Array.from(t)).map((g,y)=>Ug(g,s[y],n)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),A=r[0]*o,d=[];if(a>A6){for(let m=0;m<ag;m++){const g=m*A,y=g+A;d.push(...sw(t.slice(g,y),c,n,u,s,!1))}d.push("...");for(let m=a-ag;m<a;m++){const g=m*A,y=g+A;d.push(...sw(t.slice(g,y),c,n,u,s,m===a-1))}}else for(let m=0;m<a;m++){const g=m*A,y=g+A;d.push(...sw(t.slice(g,y),c,n,u,s,m===a-1))}const f=l===2?",":"";d[0]="["+(a>0?d[0]+f:"");for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+f;let h=`,
`;for(let m=2;m<l;m++)h+=`
`;return d[d.length-1]=" "+d[d.length-1]+"]"+(i?"":h),d}function jg(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Er{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=ye(e),r!=null){const s=r.length;M(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||sr(n,this.size),this.strides=ot(e)}set(e,...n){n.length===0&&(n=[0]),M(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return da().makeTensor(this.values,this.shape,this.dtype)}}let da=null,qf=null;function rbe(t){da=t}function sbe(t){qf=t}class qt{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=ye(e),this.strides=ot(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return qf.buffer(this.shape,this.dtype,e)}bufferSync(){return qf.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Uo(this.shape,e,this.dtype==="complex64")}arraySync(){return Uo(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=da().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Vu(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),da().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=da().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Vu(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await da().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),da().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return qf.print(this,e)}clone(){return this.throwIfDisposed(),qf.clone(this)}toString(e=!1){const n=this.dataSync();return tbe(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),qf.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),da().makeVariable(this,e,n,r)}}Object.defineProperty(qt,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function ve(){return N_("Tensor",()=>qt)}ve();class a2 extends qt{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!_t(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);da().disposeTensor(this),this.dataId=e.dataId,da().incRef(this,null)}dispose(){da().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(a2,Symbol.hasInstance,{value:t=>t instanceof qt&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var d6;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(d6||(d6={}));var Tk;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(Tk||(Tk={}));var Fk;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(Fk||(Fk={}));var $k;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})($k||($k={}));var _k;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(_k||(_k={}));const ibe={float32:$k,int32:Tk,bool:Fk,complex64:_k};function Di(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return ibe[t][e]}function $O(t){return Di(t,"int32")}function FK(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function $K(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jn(t,e){if(t.dtype===e.dtype)return[t,e];const n=Di(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function obe(t,e){M(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function _K(t){const e=[];return OK(t,e,new Set),e}function OK(t,e,n){if(t==null)return;if(t instanceof qt){e.push(t);return}if(!abe(t))return;const r=t;for(const s in r){const i=r[s];n.has(i)||(n.add(i),OK(i,e,n))}}function abe(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $4(t){return t.kernelName!=null}class f6{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class op{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new f6}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Ji(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new q1e(this.backendInstance),!0}setupRegisteredKernels(){s6(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){s6(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof C_)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,i=r.then(o=>s<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,Ji(`Initialization of backend ${e} failed`),Ji(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Ji(`Initialization of backend ${e} failed`),Ji(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:i}=this.initializeBackend(r);if(i||s)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,i=this.readSync(n),o=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return op.nextTensorId++}nextVariableId(){return op.nextVariableId++}clone(e){const n=re.runKernel(Tx,{x:e}),r={x:e},s=o=>({x:()=>{const a="float32",l={x:o},c={dtype:a};return re.runKernel(gx,l,c)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(Ek(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=s-n-i-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const c=$4(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if($4(e)){const{kernelName:h,inputs:m,attrs:g}=e;this.backendName==null&&this.backend;const y=Ek(h,this.backendName);M(y!=null,()=>`Cannot find registered kernel '${h}' for backend '${this.backendName}'`),a=()=>{const x=this.backend.numDataIds();l=y.kernelFunc({inputs:m,attrs:g,backend:this.backend});const v=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(h,x,v);const b=v.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(s){const w=this.getTensorsForGradient(h,m,b);r=this.saveTensorsForBackwardMode(w)}return b}}else{const{forwardFunc:h}=e,m=g=>{s&&(r=g.map(y=>this.keep(this.clone(y))))};a=()=>{const g=this.backend.numDataIds();l=this.tidy(()=>h(this.backend,m));const y=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,g,y),y}}const{inputs:u,attrs:A}=e,d=$4(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(f=this.profiler.profileKernel(c,u,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),s&&this.addTapeNode(c,u,n,d,r,A),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(h=>u[h]!=null?u[h].shape:null),outputShapes:n.map(h=>h.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=r6(e);if(s!=null){const i=s.inputsToSave||[],o=s.outputsToSave||[];let a;s.saveAllInputs?(M(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(c=>n[c])):a=i.map(c=>n[c]);const l=r.filter((c,u)=>o[u]);return a.concat(l)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let i=e;r==="string"&&cx(e[0])&&(i=e.map(l=>Ou(l)));const o=s.write(i,n,r),a=new qt(n,r,o,this.nextTensorId());if(this.trackTensor(a,s),r==="string"){const l=this.state.tensorInfo.get(o),c=I1e(i);this.state.numBytes+=c-l.bytes,l.bytes=c}return a}makeTensorFromDataId(e,n,r,s){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:i}=e,o=new qt(s,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const i=new a2(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*t2(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof a2||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*t2(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,i,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=r6(e);l!=null&&(s=l.gradFunc),s!=null&&(a.gradient=c=>(c=c.map((u,A)=>{if(u==null){const d=r[A],f=bs(d.size,d.dtype);return this.makeTensor(f,d.shape,d.dtype)}return u}),s(c.length>1?c:c[0],i,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=_K(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(e,n,r,s=!1){if(M(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));M(i instanceof qt,()=>"The result y returned by f() must be a tensor.");const o=Z1e(this.state.activeTape,n,i);if(!s&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[i.id]=r??lbe(i.shape),ebe(a,o,c=>this.tidy(c),cbe);const l=n.map(c=>a[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return M(bk(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{M(n.every(a=>a instanceof qt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((a,l)=>{s[l]=a});const i=(a,l)=>(r=e(...n,l),M(r.value instanceof qt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),M(bk(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,l)=>{const c=r.gradFunc(a,l),u=Array.isArray(c)?c:[c];M(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),M(u.every(d=>d instanceof qt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const A={};return u.forEach((d,f)=>{A[f]=()=>d}),A};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Js(),r=await this.backend.time(e);return r.wallMs=Js()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new f6;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}op.nextTensorId=0;op.nextVariableId=0;function lbe(t){const e=B_(ye(t),"float32");return re.makeTensor(e,t,"float32")}function DK(){const t=yK();if(t._tfengine==null){const e=new F1e(t);t._tfengine=new op(e)}return D1e(t._tfengine.ENV),rbe(()=>t._tfengine),t._tfengine}const re=DK();function cbe(t,e){const n={a:t,b:e};return re.runKernel(nm,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ube(){return typeof navigator<"u"&&navigator!=null}function RK(t){if(t||ube()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function PK(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ii=he();ii.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ii.registerFlag("IS_BROWSER",()=>PK());ii.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");ii.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ii.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));ii.registerFlag("PROD",()=>!1);ii.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ii.getBool("DEBUG"));ii.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ii.registerFlag("IS_TEST",()=>!1);ii.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>ii.getBool("DEBUG"));ii.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);ii.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);ii.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uA(t,e){let n=t;if(Ho(t))return e==="string"?[]:[t.length];if(FK(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if($K(t))return[t.buffer.size/(e==null?4:t2(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Ho(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&he().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&UK(t,r,[]),r}function UK(t,e,n){if(n=n||[],!Array.isArray(t)&&!Ho(t)){M(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}M(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),M(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)UK(t[s],r,n.concat(s))}function h6(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function H(t,e,n,r="numeric"){if(t instanceof ve())return h6(r,t.dtype,e,n),t;let s=em(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),h6(r,s,e,n),t==null||!Ho(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const i=uA(t,s);!Ho(t)&&!Array.isArray(t)&&(t=[t]);const a=s!=="string"?uf(t,s):Hd(t,[],!0);return re.makeTensor(a,i,s)}function l2(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,o)=>H(i,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jK="__op";function te(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+jK;const s=(...i)=>{re.startScope(n);try{const o=r(...i);return Qd(o)&&console.error("Cannot return a Promise inside of tidy."),re.endScope(o),o}catch(o){throw re.endScope(null),o}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Abe(t,e){const n=H(t,"real","complex"),r=H(e,"imag","complex");ji(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return re.runKernel(__,s)}const Wu=te({complex_:Abe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AA(t,e,n,r){if(r==null)r=em(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if($K(t)||FK(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return re.backend.createTensorFromGPUData(t,e||n,r)}if(!Ho(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){lo(e);const s=ye(e),i=ye(n);M(s===i,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${i}`);for(let o=0;o<n.length;++o){const a=n[o],l=o===n.length-1?a!==ye(e.slice(o)):!0;M(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Ho(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?uf(t,r):Hd(t,[],!0),re.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function va(t,e,n){const r=uA(t,n);return AA(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zd={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Oa{static join(e){return new Oa(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Ho(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+s.byteLength;this.shards.push({buffer:s,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,i=new ArrayBuffer(s),o=new Uint8Array(i);let a=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],A=e+a-c.start,d=a,h=Math.min(n,c.end)-c.start,m=new Uint8Array(c.buffer,A,h-A);if(o.set(m,d),a+=m.length,n<c.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=dbe(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function dbe(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,i=e(t[s]);if(i===0)return s;i<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ka(){return re}function p6(){return re.memory()}function Ae(t,e){return re.tidy(t,e)}function ft(t){_K(t).forEach(n=>n.dispose())}function Qr(t){return re.keep(t)}function fbe(){return re.ready()}function hbe(){return re.backendName}function LK(t,e,n=1){return re.registerBackend(t,e,n)}function MK(){return re.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gu=4;async function Ok(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<s.length;++o){const a=s[o],l=Array.isArray(t)?t[o].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async A=>{const d=await l.bytes(),f=d.reduce((g,y)=>g+y.length,0)+Gu*d.length,h=new Uint8Array(f);let m=0;for(let g=0;g<d.length;g++){const y=d[g],x=new Uint8Array(new Uint32Array([y.length]).buffer);h.set(x,m),m+=Gu,h.set(y,m),m+=y.length}A(h)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const i=await Promise.all(r);return{data:gbe(i),specs:n}}function QK(t,e){const n=new Oa(t),r={};let s=0;for(const i of e){const o=pbe(i,(a,l)=>n.slice(s+a,s+l));r[i.name]=HK(i,n.slice(s,s+o)),s+=o}return r}function pbe(t,e){const n=ye(t.shape);let r;if("quantization"in t){const s=t.quantization;r=zd[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=Gu+new Uint32Array(e(s,s+Gu))[0];return s}else r=zd[t.dtype];return n*r}async function mbe(t,e){const n=ye(t.shape);let r;if("quantization"in t){const s=t.quantization;r=zd[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=Gu+new Uint32Array(await e(s,s+Gu))[0];return s}else r=zd[t.dtype];return n*r}function HK(t,e){const n=t.name,r=t.dtype,s=t.shape,i=ye(s);let o,a=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=zd[l.dtype],u=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){o=new Float32Array(u.length);for(let A=0;A<u.length;A++){const d=u[A];o[A]=d*l.scale+l.min}}else if(l.dtype==="float16")o=Cbe()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);o=new Int32Array(u.length);for(let A=0;A<u.length;A++){const d=u[A];o[A]=Math.round(d*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*c}else if(r==="string"){const l=ye(t.shape);o=[];for(let c=0;c<l;c++){const u=new Uint32Array(e.slice(a,a+Gu))[0];a+=Gu;const A=new Uint8Array(e.slice(a,a+u));o.push(A),a+=u}}else{const l=zd[r];if(r==="float32")o=new Float32Array(e);else if(r==="int32")o=new Int32Array(e);else if(r==="bool")o=new Uint8Array(e);else if(r==="complex64"){o=new Float32Array(e);const c=new Float32Array(o.length/2),u=new Float32Array(o.length/2);for(let h=0;h<c.length;h++)c[h]=o[h*2],u[h]=o[h*2+1];const A=va(c,s,"float32"),d=va(u,s,"float32"),f=Wu(A,d);return A.dispose(),d.dispose(),f}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*l}return va(o,s,r)}async function m6(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:s,value:i}=await t.read();if(s&&i==null){const a=n-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}const o=new Uint8Array(r.length+i.byteLength);o.set(r,0),o.set(new Uint8Array(i),r.length),r=o}return r.buffer}async function zK(t,e){const n={},r=t.getReader();let s=new ArrayBuffer(0);for(const i of e){const o=await mbe(i,async(c,u)=>(s=await m6(r,s,u),s.slice(c,u)));s=await m6(r,s,o);const a=s.slice(0,o);s=s.slice(o);const l=HK(i,a);if(n[i.name]=l,hbe()==="webgpu"){const c=MK();"uploadToGPU"in c&&ye(l.shape)>=he().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return n}function gbe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),r.buffer}const _O=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function g6(t){return _O?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function ybe(t){if(_O)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function xbe(t){if(_O){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function VK(t){return Oa.join(t)}function y6(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function WK(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function GK(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function OO(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),GK(t,n,r)}function iv(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:g6(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:g6(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Oa(t.weightData).byteLength}}function Dk(t){const e=[];for(const n of t)e.push(...n.weights);return e}function vbe(){const t=n=>{let r=n<<13,s=0;for(;!(r&8388608);)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function bbe(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function wbe(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function Cbe(){const t=vbe(),e=bbe(),n=wbe();return r=>{const s=new ArrayBuffer(4*r.length),i=new Uint32Array(s);for(let o=0;o<r.length;o++){const a=r[o],l=t[n[a>>10]+(a&1023)]+e[a>>10];i[o]=l}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return jn.instance==null&&(jn.instance=new jn),jn.instance}static registerSaveRouter(e){jn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){jn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return jn.getHandlers(e,"save")}static getLoadHandlers(e,n){return jn.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?jn.getInstance().loadRouters:jn.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&s.push(a)}),s}}const Sbe=t=>jn.registerSaveRouter(t),Bbe=t=>jn.registerLoadRouter(t),KK=t=>jn.getSaveHandlers(t),Nbe=(t,e)=>jn.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rk="tensorflowjs",Pk=1,ad="models_store",gu="model_info_store";function XK(){if(!he().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Uk(t){const e=t.result;e.createObjectStore(ad,{keyPath:"modelPath"}),e.createObjectStore(gu,{keyPath:"modelPath"})}class Vd{constructor(e){if(this.indexedDB=XK(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const i=this.indexedDB.open(Rk,Pk);i.onupgradeneeded=()=>Uk(i),i.onsuccess=()=>{const o=i.result;if(n==null){const a=o.transaction(ad,"readonly"),c=a.objectStore(ad).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return o.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(o.close(),s(c.error)),a.oncomplete=()=>o.close()}else{n.weightData=Oa.join(n.weightData);const a=iv(n),l=o.transaction(gu,"readwrite");let c=l.objectStore(gu),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(d){return s(d)}let A;u.onsuccess=()=>{A=o.transaction(ad,"readwrite");const d=A.objectStore(ad);let f;try{f=d.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(h){return s(h)}f.onsuccess=()=>r({modelArtifactsInfo:a}),f.onerror=h=>{c=l.objectStore(gu);const m=c.delete(this.modelPath);m.onsuccess=()=>(o.close(),s(f.error)),m.onerror=g=>(o.close(),s(f.error))}},u.onerror=d=>(o.close(),s(u.error)),l.oncomplete=()=>{A==null?o.close():A.oncomplete=()=>o.close()}}},i.onerror=o=>s(i.error)})}}Vd.URL_SCHEME="indexeddb://";const qK=t=>he().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Vd.URL_SCHEME)?Ebe(t.slice(Vd.URL_SCHEME.length)):null;jn.registerSaveRouter(qK);jn.registerLoadRouter(qK);function Ebe(t){return new Vd(t)}function Ibe(t){return t.startsWith(Vd.URL_SCHEME)?t.slice(Vd.URL_SCHEME.length):t}class kbe{constructor(){this.indexedDB=XK()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(Rk,Pk);r.onupgradeneeded=()=>Uk(r),r.onsuccess=()=>{const s=r.result,i=s.transaction(gu,"readonly"),a=i.objectStore(gu).getAll();a.onsuccess=()=>{const l={};for(const c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(s.close(),n(a.error)),i.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=Ibe(e),new Promise((n,r)=>{const s=this.indexedDB.open(Rk,Pk);s.onupgradeneeded=()=>Uk(s),s.onsuccess=()=>{const i=s.result,o=i.transaction(gu,"readwrite"),a=o.objectStore(gu),l=a.get(e);let c;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=a.delete(e),A=()=>{c=i.transaction(ad,"readwrite");const f=c.objectStore(ad).delete(e);f.onsuccess=()=>n(l.result.modelArtifactsInfo),f.onerror=h=>r(l.error)};u.onsuccess=A,u.onerror=d=>(A(),i.close(),r(l.error))}},l.onerror=u=>(i.close(),r(l.error)),o.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},s.onerror=i=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gl="/",Yf="tensorflowjs_models",YK="info",Tbe="model_topology",Fbe="weight_specs",$be="weight_data",_be="model_metadata";function JK(t){return{info:[Yf,t,YK].join(Gl),topology:[Yf,t,Tbe].join(Gl),weightSpecs:[Yf,t,Fbe].join(Gl),weightData:[Yf,t,$be].join(Gl),modelMetadata:[Yf,t,_be].join(Gl)}}function ZK(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function Obe(t){const e=t.split(Gl);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Gl)}function Dbe(t){return t.startsWith(Wd.URL_SCHEME)?t.slice(Wd.URL_SCHEME.length):t}class Wd{constructor(e){if(!he().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=JK(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=iv(e),i=Oa.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,ybe(i));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:s}}catch{throw ZK(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const a=JSON.parse(i);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=xbe(o),n}}Wd.URL_SCHEME="localstorage://";const eX=t=>he().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Wd.URL_SCHEME)?Rbe(t.slice(Wd.URL_SCHEME.length)):null;jn.registerSaveRouter(eX);jn.registerLoadRouter(eX);function Rbe(t){return new Wd(t)}class Pbe{constructor(){M(he().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),M(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Yf+Gl,r=Gl+YK;for(let s=0;s<this.LS.length;++s){const i=this.LS.key(s);if(i.startsWith(n)&&i.endsWith(r)){const o=Obe(i);e[o]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=Dbe(e);const n=JK(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return ZK(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Th="://";class _s{constructor(){this.managers={}}static getInstance(){return _s.instance==null&&(_s.instance=new _s),_s.instance}static registerManager(e,n){M(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Th)&&(e=e.slice(0,e.indexOf(Th))),M(e.length>0,()=>"scheme must not be an empty string.");const r=_s.getInstance();M(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=_s.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(_s.getInstance().managers)}}function iw(t){if(t.indexOf(Th)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${_s.getSchemes().join(",")}`);return{scheme:t.split(Th)[0],path:t.split(Th)[1]}}async function tX(t,e,n=!1){M(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=jn.getLoadHandlers(t);M(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),M(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const s=r[0],i=jn.getSaveHandlers(e);M(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),M(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=i[0],a=iw(t).scheme,l=iw(t).path,c=a===iw(t).scheme,u=await s.load();n&&c&&await _s.getManager(a).removeModel(l);const A=await o.save(u);return n&&!c&&await _s.getManager(a).removeModel(l),A.modelArtifactsInfo}async function Ube(){const t=_s.getSchemes(),e={};for(const n of t){const r=await _s.getManager(n).listModels();for(const s in r){const i=n+Th+s;e[i]=r[s]}}return e}async function jbe(t){const e=iw(t);return _s.getManager(e.scheme).removeModel(e.path)}async function Lbe(t,e){return tX(t,e,!1)}async function Mbe(t,e){return tX(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qbe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!he().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return bK(e)}}if(he().get("IS_BROWSER")){he().setPlatform("browser",new Qbe);try{_s.registerManager(Wd.URL_SCHEME,new Pbe)}catch{}try{_s.registerManager(Vd.URL_SCHEME,new kbe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hbe={importFetch:()=>require("node-fetch")};let _4;class zbe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return he().global.fetch!=null?he().global.fetch(e,n):(_4==null&&(_4=Hbe.importFetch()),_4(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}he().get("IS_NODE")&&!he().get("IS_BROWSER")&&he().setPlatform("node",new zbe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function St(t,e="float32",n){return e=e||"float32",lo(t),new Er(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vbe(t,e){const n=H(t,"x","cast");if(!E1e(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return re.runKernel(gx,r,s)}const Ue=te({cast_:Vbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wbe(t){const n={x:H(t,"x","clone","string_or_numeric")};return re.runKernel(Tx,n)}const oc=te({clone_:Wbe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nX(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */DK();const Gbe={buffer:St,cast:Ue,clone:oc,print:nX};sbe(Gbe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kbe(t,e){let n=H(t,"a","add"),r=H(e,"b","add");[n,r]=Jn(n,r);const s={a:n,b:r};return re.runKernel(nm,s)}const Ee=te({add_:Kbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xbe(t,e){let n=H(t,"a","floorDiv"),r=H(e,"b","floorDiv");[n,r]=Jn(n,r);const s={a:n,b:r};return re.runKernel(Ix,s)}const DO=te({floorDiv_:Xbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qbe(t,e){let n=H(t,"a","div"),r=H(e,"b","div");if([n,r]=Jn(n,r),n.dtype==="int32"&&r.dtype==="int32")return DO(n,r);const s={a:n,b:r},i={};return re.runKernel(wx,s,i)}const ze=te({div_:qbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ybe(t,e){let n=H(t,"a","mul"),r=H(e,"b","mul");[n,r]=Jn(n,r);const s={a:n,b:r};return re.runKernel(jx,s)}const ne=te({mul_:Ybe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jbe(t){const e=H(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return re.runKernel(IS,n)}else{const n={x:e};return re.runKernel(xS,n)}}const vr=te({abs_:Jbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zbe(t){const n={x:H(t,"x","acos")};return re.runKernel(ux,n)}const rX=te({acos_:Zbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ewe(t){const n={x:H(t,"x","acosh")};return re.runKernel(Ax,n)}const sX=te({acosh_:ewe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function twe(t){M(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),M(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((s,i)=>H(s,`tensors${i}`,"addN")),n=e[0];e.forEach(s=>{if(s.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(s=>{if(!_t(s.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return re.runKernel(vS,r)}const nwe=te({addN_:twe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rwe(t,e=null,n=!1){const s={x:H(t,"x","all","bool")},i={axis:e,keepDims:n};return re.runKernel(E_,s,i)}const RO=te({all_:rwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function swe(t,e=null,n=!1){const s={x:H(t,"x","any","bool")},i={axis:e,keepDims:n};return re.runKernel(I_,s,i)}const c2=te({any_:swe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iwe(t,e=0){const r={x:H(t,"x","argMax")},s={axis:e};return re.runKernel(bS,r,s)}const ap=te({argMax_:iwe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function owe(t,e=0){const r={x:H(t,"x","argMin")},s={axis:e};return re.runKernel(wS,r,s)}const iX=te({argMin_:owe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function awe(t){const n={x:H(t,"x","asin")};return re.runKernel(dx,n)}const oX=te({asin_:awe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lwe(t){const n={x:H(t,"x","asinh")};return re.runKernel(fx,n)}const aX=te({asinh_:lwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cwe(t){const n={x:H(t,"x","atan")};return re.runKernel(hx,n)}const lX=te({atan_:cwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uwe(t,e){let n=H(t,"a","atan2"),r=H(e,"b","atan2");[n,r]=Jn(n,r);const s={a:n,b:r};return re.runKernel(mx,s)}const cX=te({atan2_:uwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Awe(t){const n={x:H(t,"x","atanh")};return re.runKernel(px,n)}const uX=te({atanh_:Awe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ov(t,e,n,r,s="NHWC",i){const o=t[3],a=[...e,o],l=Tc(s);return Vr(t,a,n,i,r,null,null,l)}function Xo(t,e,n,r,s,i,o="channelsLast"){const[a,l]=Xy(e);let c;if(o==="channelsLast")c=[a,l,t[3],t[3]];else if(o==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Vr(t,c,n,r,s,i,!1,o)}function kc(t,e,n,r,s,i,o="NDHWC"){const[a,l,c]=jk(e);let u,A;if(o==="NDHWC")A="channelsLast",u=[a,l,c,t[4],t[4]];else if(o==="NCDHW")A="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return dA(t,u,n,r,s,!1,A,i)}function Vr(t,e,n,r,s,i,o=!1,a="channelsLast"){let[l,c,u,A]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,A]=t;else if(a==="channelsFirst")[l,A,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);const[d,f,,h]=e,[m,g]=Xy(n),[y,x]=Xy(r),v=Fh(d,y),b=Fh(f,x),{padInfo:w,outHeight:C,outWidth:B}=hwe(s,c,u,m,g,v,b,i,a),S=o?h*A:h;let N;return a==="channelsFirst"?N=[l,S,C,B]:a==="channelsLast"&&(N=[l,C,B,S]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:A,outHeight:C,outWidth:B,outChannels:S,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:f,effectiveFilterHeight:v,effectiveFilterWidth:b,dilationHeight:y,dilationWidth:x,inShape:t,outShape:N,filterShape:e}}function dA(t,e,n,r,s,i=!1,o="channelsLast",a){let[l,c,u,A,d]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,A,d]=t;else if(o==="channelsFirst")[l,d,c,u,A]=t;else throw new Error(`Unknown dataFormat ${o}`);const[f,h,m,,g]=e,[y,x,v]=jk(n),[b,w,C]=jk(r),B=Fh(f,b),S=Fh(h,w),N=Fh(m,C),{padInfo:k,outDepth:O,outHeight:U,outWidth:P}=pwe(s,c,u,A,y,x,v,B,S,N,a),V=i?g*d:g;let W;return o==="channelsFirst"?W=[l,V,O,U,P]:o==="channelsLast"&&(W=[l,O,U,P,V]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:u,inWidth:A,inChannels:d,outDepth:O,outHeight:U,outWidth:P,outChannels:V,padInfo:k,strideDepth:y,strideHeight:x,strideWidth:v,filterDepth:f,filterHeight:h,filterWidth:m,effectiveFilterDepth:B,effectiveFilterHeight:S,effectiveFilterWidth:N,dilationDepth:b,dilationHeight:w,dilationWidth:C,inShape:t,outShape:W,filterShape:e}}function dwe(t,e,n,r,s){r==null&&(r=PO(t,e,n));const i=t[0],o=t[1],a=qy((i-e+2*r)/n+1,s),l=qy((o-e+2*r)/n+1,s);return[a,l]}function fwe(t,e,n,r,s,i){s==null&&(s=PO(t,e[0],r[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*s>=e[a]&&(o[a]=qy((t[a]-e[a]+2*s)/r[a]+1,i));return o}function PO(t,e,n,r=1){const s=Fh(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function Xy(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function jk(t){return typeof t=="number"?[t,t,t]:t}function Fh(t,e){return e<=1?t:t+(t-1)*(e-1)}function hwe(t,e,n,r,s,i,o,a,l){let c,u,A;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const f=dwe([e,n],i,r,t,a);u=f[0],A=f[1]}else if(t==="same"){u=Math.ceil(e/r),A=Math.ceil(n/s);const d=Math.max(0,(u-1)*r+i-e),f=Math.max(0,(A-1)*s+o-n),h=Math.floor(d/2),m=d-h,g=Math.floor(f/2),y=f-g;c={top:h,bottom:m,left:g,right:y,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-i+1)/r),A=Math.ceil((n-o+1)/s);else if(typeof t=="object"){const d=l==="channelsLast"?t[1][0]:t[2][0],f=l==="channelsLast"?t[1][1]:t[2][1],h=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];c={top:d,bottom:f,left:h,right:m,type:d===0&&f===0&&h===0&&m===0?"VALID":"EXPLICIT"},u=qy((e-i+d+f)/r+1,a),A=qy((n-o+h+m)/s+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:A}}function pwe(t,e,n,r,s,i,o,a,l,c,u){let A,d,f,h;if(t==="valid"&&(t=0),typeof t=="number"){A={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const g=fwe([e,n,r,1],[a,l,c],1,[s,i,o],t,u);d=g[0],f=g[1],h=g[2]}else if(t==="same"){d=Math.ceil(e/s),f=Math.ceil(n/i),h=Math.ceil(r/o);const m=(d-1)*s+a-e,g=(f-1)*i+l-n,y=(h-1)*o+c-r,x=Math.floor(m/2),v=m-x,b=Math.floor(g/2),w=g-b,C=Math.floor(y/2),B=y-C;A={top:b,bottom:w,left:C,right:B,front:x,back:v,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:A,outDepth:d,outHeight:f,outWidth:h}}function qy(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Ku(t){const[e,n,r]=Xy(t);return e===1&&n===1&&r===1}function os(t,e){return Ku(t)||Ku(e)}function Gd(t){return Xy(t).every(e=>e>0)}function Tc(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Hs(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")M(sp(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{M(sp(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mwe(t,e){const r={x:H(t,"x","reshape","string_or_numeric")},s={shape:e};return re.runKernel(lB,r,s)}const oe=te({reshape_:mwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gwe(t,e,n,r,s){const i=H(t,"x","avgPool","float32"),o=1;M(os(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=i,l=!1;i.rank===3&&(l=!0,a=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),M(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Hs("avgPool",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let A=re.runKernel(CS,c,u);return A=Ue(A,i.dtype),l?oe(A,[A.shape[1],A.shape[2],A.shape[3]]):A}const CB=te({avgPool_:gwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ywe(t,e,n,r,s,i="NDHWC"){const o=H(t,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),M(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),M(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),M(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Hs("avgPool3d",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i};let A=re.runKernel(SS,c,u);return A=Ue(A,a.dtype),l?oe(A,[A.shape[1],A.shape[2],A.shape[3],A.shape[4]]):A}const AX=te({avgPool3d_:ywe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xwe(t,e=0){M(t.length>=1,()=>"Pass at least one tensor to concat");const n=l2(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return oc(n[0]);const r=n,s={axis:e};return re.runKernel(kS,r,s)}const qn=te({concat_:xwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vwe(t,e,n=!1,r=!1){let s=H(t,"a","matMul"),i=H(e,"b","matMul");[s,i]=Jn(s,i);const o={a:s,b:i},a={transposeA:n,transposeB:r};return re.runKernel(BS,o,a)}const $t=te({matMul_:vwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bwe(t){const n={x:H(t,"x","sigmoid","float32")};return re.runKernel(qx,n)}const ba=te({sigmoid_:bwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wwe(t,e,n){const r=H(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},i={begin:e,size:n};return re.runKernel(fB,s,i)}const ct=te({slice_:wwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cwe(t){const n={x:H(t,"x","tanh","float32")};return re.runKernel(nv,n)}const Kd=te({tanh_:Cwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Swe(t,e,n,r,s,i){const o=H(t,"forgetBias","basicLSTMCell"),a=H(e,"lstmKernel","basicLSTMCell"),l=H(n,"lstmBias","basicLSTMCell"),c=H(r,"data","basicLSTMCell"),u=H(s,"c","basicLSTMCell"),A=H(i,"h","basicLSTMCell"),d=qn([c,A],1),f=$t(d,a),h=Ee(f,l),m=h.shape[0],g=h.shape[1]/4,y=[m,g],x=ct(h,[0,0],y),v=ct(h,[0,g],y),b=ct(h,[0,g*2],y),w=ct(h,[0,g*3],y),C=Ee(ne(ba(x),Kd(v)),ne(u,ba(Ee(o,b)))),B=ne(Kd(C),ba(w));return[C,B]}const Bwe=te({basicLSTMCell_:Swe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nwe(t,e,n){const r=H(t,"x","batchToSpaceND"),s=e.reduce((a,l)=>a*l);M(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),M(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),M(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const i={x:r},o={blockShape:e,crops:n};return re.runKernel(NS,i,o)}const SB=te({batchToSpaceND_:Nwe});function Ewe(t){let e;return t.rank===0||t.rank===1?e=oe(t,[1,1,1,t.size]):t.rank===2?e=oe(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iwe(t,e,n,r,s,i){i==null&&(i=.001);const o=H(t,"x","batchNorm"),a=H(e,"mean","batchNorm"),l=H(n,"variance","batchNorm");let c;s!=null&&(c=H(s,"scale","batchNorm"));let u;r!=null&&(u=H(r,"offset","batchNorm")),M(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),M(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),M(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:Ewe(o),scale:c,offset:u,mean:a,variance:l},f={varianceEpsilon:i},h=re.runKernel(US,d,f);return oe(h,o.shape)}const av=te({batchNorm_:Iwe});function kwe(t,e,n,r,s,i){const o=H(t,"x","batchNorm"),a=H(e,"mean","batchNorm"),l=H(n,"variance","batchNorm");let c;s!=null&&(c=H(s,"scale","batchNorm"));let u;return r!=null&&(u=H(r,"offset","batchNorm")),M(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),M(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),M(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&M(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&M(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),av(o,a,l,u,c,i)}const dX=te({batchNorm2d_:kwe});function Twe(t,e,n,r,s,i){const o=H(t,"x","batchNorm"),a=H(e,"mean","batchNorm"),l=H(n,"variance","batchNorm");let c;s!=null&&(c=H(s,"scale","batchNorm"));let u;return r!=null&&(u=H(r,"offset","batchNorm")),M(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),M(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),M(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&M(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&M(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),av(o,a,l,u,c,i)}const fX=te({batchNorm3d_:Twe});function Fwe(t,e,n,r,s,i){const o=H(t,"x","batchNorm"),a=H(e,"mean","batchNorm"),l=H(n,"variance","batchNorm");let c;s!=null&&(c=H(s,"scale","batchNorm"));let u;return r!=null&&(u=H(r,"offset","batchNorm")),M(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),M(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),M(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&M(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&M(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),av(o,a,l,u,c,i)}const hX=te({batchNorm4d_:Fwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $we(t,e,n){const r=H(t,"x","bincount"),s=H(e,"weights","bincount");M(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),M(n>=0,()=>`size must be non-negative, but got ${n}.`),M(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const i={x:r,weights:s},o={size:n};return re.runKernel(F_,i,o)}const pX=te({bincount_:$we});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _we(t,e){const n=H(t,"x","bitwiseAnd"),r=H(e,"y","bitwiseAnd");if(!_t(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const s={a:n,b:r};return re.runKernel(ES,s)}const Owe=te({bitwiseAnd_:_we});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dwe(t,e){const n=H(t,"s0","broadcastArgs","int32"),r=H(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:n,s1:r};return re.runKernel($_,s)}const Rwe=te({broadcastArgs_:Dwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pwe(t,e){let n=H(t,"broadcastTo","x");const r=n.shape;if(lo(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=oe(n,c)}const s=n.shape,i=Array.from(e);for(let c=e.length-1;c>=0;c--)if(s[c]===e[c])i[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return oc(n);const a={x:n},l={reps:i};return re.runKernel(rv,a,l)}const $h=te({broadcastTo_:Pwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uwe(t){const n={x:H(t,"x","ceil","float32")};return re.runKernel(yx,n)}const mX=te({ceil_:Uwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rm(t,e,n){lo(t),n=n||em(e);const r={shape:t,value:e,dtype:n};return re.runKernel(G_,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jwe(t,e,n){const r=H(t,"x","clipByValue");if(M(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return rm(r.shape,e,r.dtype);const s={x:r},i={clipValueMin:e,clipValueMax:n};return re.runKernel(xx,s,i)}const oi=te({clipByValue_:jwe});function Lwe(t){return qn(t,0)}const gX=te({concat1d_:Lwe});function Mwe(t,e){return qn(t,e)}const yX=te({concat2d_:Mwe});function Qwe(t,e){return qn(t,e)}const xX=te({concat3d_:Qwe});function Hwe(t,e){return qn(t,e)}const vX=te({concat4d_:Hwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zwe(t,e,n,r,s="NHWC",i=[1,1],o){const a=H(t,"x","conv2d","float32"),l=H(e,"filter","conv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),M(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),M(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Hs("conv2d",r,o);const A=s==="NHWC"?c.shape[3]:c.shape[1];M(A===l.shape[2],()=>`Error in conv2d: depth of input (${A}) must match input depth for filter ${l.shape[2]}.`),M(os(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),M(Gd(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),M(Gd(n),()=>"Error in conv2D: Strides should be larger than 0.");const d={x:c,filter:l},f={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},h=re.runKernel(TS,d,f);return u?oe(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const Xu=te({conv2d_:zwe});function Vwe(t,e,n,r,s="NWC",i=1,o){const a=H(t,"x","conv1d"),l=H(e,"filter","conv1d");let c=a,u=!1;a.rank===2&&(u=!0,c=oe(a,[1,a.shape[0],a.shape[1]])),M(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),M(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Hs("conv1d",r,o),M(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),M(os(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),M(Gd(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),M(Gd(n),()=>"Error in conv1D: Stride should be larger than 0."),M(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const A=oe(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=oe(c,[c.shape[0],1,c.shape[1],c.shape[2]]),g=Xu(d,A,[1,n],r,"NHWC",[1,i],o);return u?oe(g,[g.shape[2],g.shape[3]]):oe(g,[g.shape[0],g.shape[2],g.shape[3]])}const UO=te({conv1d_:Vwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wwe(t,e,n,r,s,i="NHWC",o){M(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),M(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),M(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),M(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=i==="NHWC"?a[3]:a[1],A=i==="NHWC"?l.shape[3]:l.shape[1];M(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),M(A===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${A}) must match output depth for filter ${n.shape[3]}.`),Hs("conv2dDerInput",s,o);const d={dy:l,filter:n},f={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,inputShape:a},h=re.runKernel(FS,d,f);return c?oe(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const jO=te({conv2DBackpropInput_:Wwe});function Gwe(t,e,n,r,s,i){const o=H(t,"x","conv2dTranspose"),a=H(e,"filter","conv2dTranspose");return jO(n,o,a,r,s,"NHWC",i)}const LO=te({conv2dTranspose_:Gwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kwe(t,e,n,r,s="NDHWC",i=[1,1,1]){const o=H(t,"x","conv3d"),a=H(e,"filter","conv3d");let l=o,c=!1;o.rank===4&&(c=!0,l=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),M(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),M(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),M(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),M(os(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),M(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),M(Gd(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),M(Gd(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:a},A={strides:n,pad:r,dataFormat:s,dilations:i},d=re.runKernel($S,u,A);return c?oe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const bX=te({conv3d_:Kwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xwe(t,e,n,r,s){M(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,o=e,a=!1;e.rank===4&&(a=!0,o=oe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],c=o.shape[4];M(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),M(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),M(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),M(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),M(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:o,filter:n},A={pad:s,strides:r,inputShape:i},d=re.runKernel(R_,u,A);return a?oe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const wX=te({conv3DBackpropInput_:Xwe});function qwe(t,e,n,r,s){const i=H(t,"x","conv3dTranspose"),o=H(e,"filter","conv3dTranspose");return wX(n,i,o,r,s)}const CX=te({conv3dTranspose_:qwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ywe(t){const n={x:H(t,"x","cos","float32")};return re.runKernel(vx,n)}const BB=te({cos_:Ywe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jwe(t){const n={x:H(t,"x","cosh","float32")};return re.runKernel(bx,n)}const MO=te({cosh_:Jwe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zwe(t,e=0,n=!1,r=!1){const i={x:H(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return re.runKernel(P_,i,o)}const u2=te({cumprod_:Zwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e2e(t,e=0,n=!1,r=!1){const i={x:H(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return re.runKernel(_S,i,o)}const QO=te({cumsum_:e2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t2e(t,e,n,r=!1){const s=H(t,"x","denseBincount"),i=H(e,"weights","denseBincount");M(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),M(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),M(n>=0,()=>`size must be non-negative, but got ${n}.`),M(i.size===s.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${i.shape}.`);const o={x:s,weights:i},a={size:n,binaryOutput:r};return re.runKernel(j_,o,a)}const Lk=te({denseBincount_:t2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n2e(t,e,n="NHWC"){const r=H(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];M(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),M(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),M(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),M(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return re.runKernel(L_,a,l)}const SX=te({depthToSpace_:n2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r2e(t,e,n,r,s="NHWC",i=[1,1],o){const a=H(t,"x","depthwiseConv2d","float32"),l=H(e,"filter","depthwiseConv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),M(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),M(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const A=s==="NHWC"?c.shape[3]:c.shape[1];M(A===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${A}) must match the inChannels dimension in filter ${l.shape[2]}.`),Hs("depthwiseConv2d",r,o);const d={x:c,filter:l},f={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},h=re.runKernel(OS,d,f);return u?oe(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const lv=te({depthwiseConv2d_:r2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s2e(t){const n={x:H(t,"x","diag")};return re.runKernel(H_,n)}const i2e=te({diag_:s2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o2e(t,e,n,r,s=[1,1],i="NHWC"){const o=H(t,"x","dilation2d"),a=H(e,"filter","dilation2d");M(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),M(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),M(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=o,c=!1;o.rank===3&&(l=oe(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),M(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const u={x:l,filter:a},A={strides:n,pad:r,dilations:s},d=re.runKernel(DS,u,A);return c?oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const BX=te({dilation2d_:o2e});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lp(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const i=n-1-s,o=t[i]||1;(e[e.length-1-s]||1)>1&&o===1&&r.unshift(i)}return r}function Fr(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],i=e.length-r-1,o=e[i];(s==null||s===1&&o>1)&&n.unshift(i)}return n}function bt(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let i=t[t.length-s-1];i==null&&(i=1);let o=e[e.length-s-1];if(o==null&&(o=1),i===1)r[n-s-1]=o;else if(o===1)r[n-s-1]=i;else if(i!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-s-1]=i}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a2e(t,e){let n=H(t,"a","equal","string_or_numeric"),r=H(e,"b","equal","string_or_numeric");[n,r]=Jn(n,r),bt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(RS,s)}const Ea=te({equal_:a2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l2e(t,e,n){const r=H(e,"a","where"),s=H(n,"b","where"),i=H(t,"condition","where","bool"),o=bt(bt(i.shape,r.shape),s.shape),a=$h(i,o),l=$h(r,o),c=$h(s,o),u={condition:a,t:l,e:c};return re.runKernel(dB,u)}const xs=te({where_:l2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c2e(t){const n={x:H(t,"x","zerosLike")};return re.runKernel(bB,n)}const jt=te({zerosLike_:c2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u2e(t,e){let n=H(t,"a","div"),r=H(e,"b","div");[n,r]=Jn(n,r);const s=ze(n,r),i=jt(s),o=Ea(r,i);return xs(o,i,s)}const NX=te({divNoNan_:u2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2e(t,e){const n=H(t,"t1","dot"),r=H(e,"t2","dot");M((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(M(s===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${i}.`),n.rank===1&&r.rank===1){const o=oe(n,[1,-1]),a=oe(r,[-1,1]),l=$t(o,a);return oe(l,[])}else if(n.rank===1&&r.rank===2){const o=oe(n,[1,-1]),a=oe(r,[r.shape[0],r.shape[1]]),l=$t(o,a);return oe(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=oe(r,[-1,1]),a=$t(n,o);return oe(a,[a.size])}else{const o=oe(r,[r.shape[0],r.shape[1]]);return $t(n,o)}}const EX=te({dot_:A2e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d2e(t,...e){const n=e.map((s,i)=>H(s,`tensors${i}`,"einsum")),r={equation:t};return re.runKernel(z_,n,r)}const Jf=te({einsum_:d2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f2e(t){const n={x:H(t,"x","elu","float32")};return re.runKernel(Cx,n)}const cv=te({elu_:f2e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h2e(t,e){const n=H(t,"x","ensureShape","string_or_numeric");if(!B1e(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const p2e=te({ensureShape_:h2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m2e(t){let e=H(t,"x","erf");M(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Ue(e,"float32"));const n={x:e};return re.runKernel(Sx,n)}const HO=te({erf_:m2e});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zO(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function IX(t,e,n){const r=t.length+e.length,s=[];let i=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?s.push(t[i++]):s.push(e[o++]);return s}function Wr(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const s=e.map(i=>t[i]);return[n,s]}function or(t,e){const n=e.map(r=>1);return IX(t,n,e)}function as(t,e,n){M(zO(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function zn(t,e){if(zO(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function fA(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function ar(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g2e(t,e=null,n=!1){const s={x:H(t,"x","max")},i={reductionIndices:e,keepDims:n};return re.runKernel(KS,s,i)}const jo=te({max_:g2e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y2e(t,e=null,n=!1){const s={x:H(t,"x","min")},i={axis:e,keepDims:n};return re.runKernel(JS,s,i)}const Yy=te({min_:y2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x2e(t,e){let n=H(t,"base","pow"),r=H(e,"exp","pow");[n,r]=Jn(n,r);const s={a:n,b:r};return re.runKernel(Lx,s)}const mc=te({pow_:x2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function at(t,e){if((Ho(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Ho(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return AA(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2e(t){const n={x:H(t,"x","sqrt","float32")};return re.runKernel(Jx,n)}const ss=te({sqrt_:v2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2e(t){const e=H(t,"x","square"),n={};return re.runKernel("Square",{x:e},n)}const fn=te({square_:b2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w2e(t,e=null,n=!1){let r=H(t,"x","sum");r.dtype==="bool"&&(r=Ue(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return re.runKernel(hB,s,i)}const Je=te({sum_:w2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2e(t,e="euclidean",n=null,r=!1){t=H(t,"x","norm");const s=kX(t,e,n);let i=s.shape;if(r){const o=kt(n,t.shape);i=or(s.shape,o)}return oe(s,i)}function kX(t,e,n=null){if(t.rank===0)return vr(t);if(t.rank!==1&&n===null)return kX(oe(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Je(vr(t),n);if(e===1/0)return jo(vr(t),n);if(e===-1/0)return Yy(vr(t),n);if(e==="euclidean"||e===2)return ss(Je(mc(vr(t),at(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return jo(Je(vr(t),n[0]),n[1]-1);if(e===1/0)return jo(Je(vr(t),n[1]),n[0]);if(e===-1/0)return Yy(Je(vr(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return ss(Je(fn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const uv=te({norm_:C2e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2e(t,e=null,n=!1){return uv(t,"euclidean",e,n)}const TX=te({euclideanNorm_:S2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B2e(t){const n={x:H(t,"x","exp")};return re.runKernel(Bx,n)}const Ms=te({exp_:B2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N2e(t,e=0){const n=H(t,"x","expandDims","string_or_numeric");M(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return re.runKernel(PS,r,s)}const wr=te({expandDims_:N2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E2e(t){const n={x:H(t,"x","expm1")};return re.runKernel(Nx,n)}const FX=te({expm1_:E2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I2e(t,e){const n=H(t,"x","tile","string_or_numeric");M(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return re.runKernel(rv,r,s)}const _o=te({tile_:I2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2e(t,e,n,r="float32"){e==null&&(e=t);const s=St([t,e],r),i=t<=e?t:e;for(let a=0;a<i;++a)s.set(1,a,a);const o=oe(s.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return _o(wr(o,0),[n[0],1,1]);if(n.length===2)return _o(wr(wr(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return _o(wr(wr(wr(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const VO=te({eye_:k2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T2e(t){const n={x:H(t,"x","floor","float32")};return re.runKernel(Ex,n)}const Av=te({floor_:T2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F2e(t,e,n=0,r=0){const s=H(t,"x","gather"),i=H(e,"indices","gather","int32"),o={x:s,indices:i},a={axis:n,batchDims:r};return re.runKernel(jS,o,a)}const dv=te({gather_:F2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $2e(t,e){let n=H(t,"a","greater","string_or_numeric"),r=H(e,"b","greater","string_or_numeric");[n,r]=Jn(n,r),bt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(LS,s)}const Mi=te({greater_:$2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _2e(t,e){let n=H(t,"a","greaterEqual","string_or_numeric"),r=H(e,"b","greaterEqual","string_or_numeric");[n,r]=Jn(n,r),bt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(kx,s)}const hA=te({greaterEqual_:_2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O2e(t){const n={input:H(t,"input","imag")};return re.runKernel(Y_,n)}const NB=te({imag_:O2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2e(t){const n={x:H(t,"x","isFinite")};return re.runKernel(Fx,n)}const $X=te({isFinite_:D2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R2e(t){const n={x:H(t,"x","isInf")};return re.runKernel($x,n)}const _X=te({isInf_:R2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P2e(t){const n={x:H(t,"x","isNaN")};return re.runKernel(_x,n)}const OX=te({isNaN_:P2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U2e(t,e=.2){const r={x:H(t,"x","leakyRelu")},s={alpha:e};return re.runKernel(MS,r,s)}const EB=te({leakyRelu_:U2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j2e(t,e){let n=H(t,"a","less","string_or_numeric"),r=H(e,"b","less","string_or_numeric");[n,r]=Jn(n,r),bt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(QS,s)}const Jy=te({less_:j2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L2e(t,e){let n=H(t,"a","lessEqual","string_or_numeric"),r=H(e,"b","lessEqual","string_or_numeric");[n,r]=Jn(n,r),bt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(HS,s)}const Af=te({lessEqual_:L2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M2e(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return re.runKernel(J_,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q2e(t,e=5,n=1,r=1,s=.5){const i=H(t,"x","localResponseNormalization");M(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),M(sp(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=i,a=!1;i.rank===3&&(a=!0,o=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:o},c={depthRadius:e,bias:n,alpha:r,beta:s},u=re.runKernel(GS,l,c);return a?oe(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const DX=te({localResponseNormalization_:Q2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H2e(t){const n={x:H(t,"x","log","float32")};return re.runKernel(Ox,n)}const so=te({log_:H2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z2e(t){const n={x:H(t,"x","log1p")};return re.runKernel(Dx,n)}const IB=te({log1p_:z2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V2e(t,e){M(bk(t),()=>"The f passed in variableGrads(f) must be a function"),M(e==null||Array.isArray(e)&&e.every(c=>c instanceof a2),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in re.registeredVariables)e.push(re.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,s=e.length;e=e.filter(c=>c.trainable),M(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const i=!0,{value:o,grads:a}=re.gradients(t,e,null,i);M(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),M(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:o,grads:l}}function gc(t){return re.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W2e(t){const n={x:H(t,"x","neg")};return re.runKernel(eB,n)}const In=te({neg_:W2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G2e(t){const n={x:H(t,"x","softplus")};return re.runKernel(Yx,n)}const sm=te({softplus_:G2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K2e(t){const e=H(t,"x","logSigmoid");return gc(r=>({value:In(sm(In(r))),gradFunc:o=>ne(o,ba(In(r)))}))(e)}const RX=te({logSigmoid_:K2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X2e(t,e){let n=H(t,"a","sub"),r=H(e,"b","sub");[n,r]=Jn(n,r);const s={a:n,b:r};return re.runKernel(ev,s)}const We=te({sub_:X2e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q2e(t,e=-1){const n=H(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return gc((s,i)=>{const a=jo(s,e,!0),l=We(s,a),c=We(Ue(l,"float32"),so(Je(Ms(l),e,!0)));return i([c]),{value:c,gradFunc:(A,d)=>{const[f]=d,h=!0,m=Ms(f);return We(A,ne(Je(A,e,h),m))}}})(n)}const WO=te({logSoftmax_:q2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y2e(t,e=null,n=!1){const r=H(t,"x","logSumExp"),s=kt(e,r.shape),i=jo(r,s,!0),o=We(r,i),a=Ms(o),l=Je(a,s),c=so(l),u=Ee(oe(i,c.shape),c);if(n){const A=or(u.shape,s);return oe(u,A)}return u}const kB=te({logSumExp_:Y2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J2e(t,e){const n=H(t,"a","logicalAnd","bool"),r=H(e,"b","logicalAnd","bool");bt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(zS,s)}const ml=te({logicalAnd_:J2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z2e(t){const n={x:H(t,"x","logicalNot","bool")};return re.runKernel(VS,n)}const TB=te({logicalNot_:Z2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eCe(t,e){const n=H(t,"a","logicalOr","bool"),r=H(e,"b","logicalOr","bool");bt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(WS,s)}const GO=te({logicalOr_:eCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tCe(t,e){const n=H(t,"a","logicalXor","bool"),r=H(e,"b","logicalXor","bool");return bt(n.shape,r.shape),ml(GO(t,e),TB(ml(t,e)))}const PX=te({logicalXor_:tCe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ob=2147483648;function nCe(t,e,n="left"){const r=H(t,"sortedSequence","searchSorted"),s=H(e,"values","searchSorted"),i=r.shape[r.shape.length-1],o=s.shape[s.shape.length-1],a=oe(r,[-1,i]),l=oe(s,[-1,o]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(ye(l.shape)>=ob)throw new Error(`values tensor size must less than ${ob}`);if(a.shape[1]>=ob)throw new Error(`trailing dim_size must less than ${ob} for int32 output type, was ${a.shape[1]}`);const c={sortedSequence:a,values:l},u={side:n};return re.runKernel(mO,c,u)}const KO=te({searchSorted_:nCe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rCe(t,e){return KO(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sCe(t,e,n,r,s){const i=H(t,"x","maxPool"),o=1;let a=i,l=!1;i.rank===3&&(l=!0,a=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),M(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),M(os(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Hs("maxPool",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s},A=re.runKernel(XS,c,u);return l?oe(A,[A.shape[1],A.shape[2],A.shape[3]]):A}const FB=te({maxPool_:sCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iCe(t,e=[1,1,1],n,r,s,i="NDHWC"){const o=H(t,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),M(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),M(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Hs("maxPool3d",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i},A=re.runKernel(qS,c,u);return l?oe(A,[A.shape[1],A.shape[2],A.shape[3],A.shape[4]]):A}const UX=te({maxPool3d_:iCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oCe(t,e,n,r,s=!1){const o={x:H(t,"x","maxPoolWithArgmax")},a={filterSize:e,strides:n,pad:r,includeBatchInIndex:s},l=re.runKernel(nO,o,a);return{result:l[0],indexes:l[1]}}const aCe=te({maxPoolWithArgmax_:oCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lCe(t,e){let n=H(t,"a","maximum"),r=H(e,"b","maximum");[n,r]=Jn(n,r),n.dtype==="bool"&&(n=Ue(n,"int32"),r=Ue(r,"int32")),bt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(Rx,s)}const Fc=te({maximum_:lCe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cCe(t,e=null,n=!1){const s={x:H(t,"x","mean")},i={axis:e,keepDims:n};return re.runKernel(YS,s,i)}const Kn=te({mean_:cCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sr(t,e="float32"){if(lo(t),e==="complex64"){const r=Sr(t,"float32"),s=Sr(t,"float32");return Wu(r,s)}const n=bs(ye(t),e);return re.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ei(t,e="float32"){if(lo(t),e==="complex64"){const r=Ei(t,"float32"),s=Sr(t,"float32");return Wu(r,s)}const n=B_(ye(t),e);return re.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uCe(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=H(t,"x","meshgrid",t instanceof qt?t.dtype:"float32");if(e===void 0)return[r];let s=H(e,"y","meshgrid",e instanceof qt?e.dtype:"float32");const i=ye(r.shape),o=ye(s.shape);return n==="xy"?(r=oe(r,[1,-1]),s=oe(s,[-1,1]),[$t(Ei([o,1],r.dtype),r),$t(s,Ei([1,i],s.dtype))]):(r=oe(r,[-1,1]),s=oe(s,[1,-1]),[$t(r,Ei([1,o],r.dtype)),$t(Ei([i,1],s.dtype),s)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ACe(t,e){let n=H(t,"a","minimum"),r=H(e,"b","minimum");[n,r]=Jn(n,r),n.dtype==="bool"&&(n=Ue(n,"int32"),r=Ue(r,"int32")),bt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(Px,s)}const Xd=te({minimum_:ACe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dCe(t,e,n){M(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=H(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");M(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)M(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),M(e[a][0]>=0&&e[a][0]<=r.shape[a]-s&&e[a][1]>=0&&e[a][1]<=r.shape[a]-s,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-s} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},o={x:r};return re.runKernel(ZS,o,i)}const jX=te({mirrorPad_:dCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fCe(t,e){let n=H(t,"a","mod"),r=H(e,"b","mod");[n,r]=Jn(n,r);const s={a:n,b:r};return re.runKernel(Ux,s)}const LX=te({mod_:fCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hCe(t,e=null,n=!1){t=H(t,"x","moments");const r=kt(e,t.shape),s=Kn(t,r,n);let i=s.shape;n||(i=or(s.shape,r));const o=fn(We(Ue(t,"float32"),oe(s,i))),a=Kn(o,r,n);return{mean:s,variance:a}}const $B=te({moments_:hCe});function pCe(t,e,n,r){const s=H(e,"data","multiRNNCell"),i=l2(n,"c","multiRNNCell"),o=l2(r,"h","multiRNNCell");let a=s;const l=[];for(let A=0;A<t.length;A++){const d=t[A](a,i[A],o[A]);l.push(d[0]),l.push(d[1]),a=d[1]}const c=[],u=[];for(let A=0;A<l.length;A+=2)c.push(l[A]),u.push(l[A+1]);return[c,u]}const mCe=te({multiRNNCell_:pCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gCe(t,e,n,r=!1){const s=H(t,"logits","multinomial"),i=s.size,o=s.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const l={logits:o===1?oe(s,[1,-1]):s},c={numSamples:e,seed:n,normalized:r},u=re.runKernel(rO,l,c);return o===1?oe(u,[u.size]):u}const yCe=te({multinomial_:gCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xCe(t,e){let n=H(t,"a","notEqual","string_or_numeric"),r=H(e,"b","notEqual","string_or_numeric");[n,r]=Jn(n,r),bt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(tB,s)}const cp=te({notEqual_:xCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vCe(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:H(t,"indices","oneHot","int32")},a={dtype:s,depth:e,onValue:n,offValue:r};return re.runKernel(rB,o,a)}const XO=te({oneHot_:vCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bCe(t){const n={x:H(t,"x","onesLike")};return re.runKernel(nB,n)}const io=te({onesLike_:bCe});function wCe(t,e){const n=H(t,"v1","outerProduct"),r=H(e,"v2","outerProduct");M(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const s=oe(n,[-1,1]),i=oe(r,[1,-1]);return $t(s,i)}const CCe=te({outerProduct_:wCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SCe(t,e,n=0){const r=H(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},i={x:r};return re.runKernel(iB,i,s)}const pA=te({pad_:SCe});function BCe(t,e,n=0){return M(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),pA(t,[e],n)}const NCe=te({pad1d_:BCe});function ECe(t,e,n=0){return M(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),pA(t,e,n)}const ICe=te({pad2d_:ECe});function kCe(t,e,n=0){return M(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),pA(t,e,n)}const TCe=te({pad3d_:kCe});function FCe(t,e,n=0){return M(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),pA(t,e,n)}const $Ce=te({pad4d_:FCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ce(t,e,n){const r=H(t,"x","spaceToBatchND");M(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),M(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),M(r.shape.reduce((o,a,l)=>l>0&&l<=e.length?o&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},i={blockShape:e,paddings:n};return re.runKernel(pB,s,i)}const _B=te({spaceToBatchND_:_Ce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OCe(t,e,n,r,s,i,o){s==null&&(s=[1,1]),i==null&&(i=1),r===0&&(r="valid");const a=H(t,"x","maxPool");let l=a,c=!1;a.rank===3&&(c=!0,l=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),M(os(i,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${s}'`);const u=Xo(l.shape,e,i,s,r),A=[u.dilationHeight,u.dilationWidth];let d;r==="same"?d=RCe([u.filterHeight,u.filterWidth],A):d=[[0,0],[0,0]];const f=A[0]===1&&A[1]===1,[h,m]=DCe([u.inHeight,u.inWidth],A,d),g=f?r:"valid",y=f?l:_B(l,A,h),v=(n==="avg"?()=>CB(y,e,i,g,o):()=>FB(y,e,i,g,o))(),b=f?v:SB(v,A,m);return c?oe(b,[b.shape[1],b.shape[2],b.shape[3]]):b}function DCe(t,e,n){const r=n.map(u=>u[0]),s=n.map(u=>u[1]),i=t.concat(r,s),o=e.map((u,A)=>(u-i[A]%u)%u),a=s.map((u,A)=>u+o[A]),l=e.map((u,A)=>[r[A],a[A]]),c=e.map((u,A)=>[0,o[A]]);return[l,c]}function RCe(t,e){const r=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),s=r.map(o=>Math.floor(o/2)),i=r.map((o,a)=>o-s[a]);return r.map((o,a)=>[s[a],i[a]])}const MX=te({pool_:OCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PCe(t,e){const n=H(t,"x","prelu"),r=H(e,"alpha","prelu"),s={x:n,alpha:r};return re.runKernel(oB,s)}const OB=te({prelu_:PCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UCe(t,e=null,n=!1){let r=H(t,"x","prod");r.dtype==="bool"&&(r=Ue(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return re.runKernel(aB,s,i)}const QX=te({prod_:UCe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jCe(t,e,n,r){const s=t.map((u,A)=>H(u,`tensors${A}`,"raggedGather","int32")),i=H(e,"paramsDenseValues","raggedGather"),o=H(n,"indices","raggedGather","int32"),a={paramsNestedSplits:s,paramsDenseValues:i,indices:o},l={outputRaggedRank:r},c=re.runKernel(aO,a,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}const LCe=te({raggedGather_:jCe});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MCe(t,e,n){const r=H(t,"starts","raggedRange"),s=H(e,"limits","raggedRange",r.dtype),i=H(n,"deltas","raggedRange",r.dtype),o={starts:r,limits:s,deltas:i},a=re.runKernel(lO,o);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}const QCe=te({raggedRange_:MCe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HCe(t,e,n,r,s){const i=H(t,"shape","raggedTensorToTensor","int32"),o=H(e,"values","raggedTensorToTensor"),a=H(n,"defaultValue","raggedTensorToTensor",o.dtype),l=r.map((A,d)=>H(A,`tensors${d}`,"raggedTensorToTensor","int32")),c={shape:i,values:o,defaultValue:a,rowPartitionTensors:l},u={rowPartitionTypes:s};return re.runKernel(cO,c,u)}const zCe=te({raggedTensorToTensor_:HCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VCe(t,e,n){lo(t);const r=ye(t);let s=null;if(n==null||n==="float32")s=new Float32Array(r);else if(n==="int32")s=new Int32Array(r);else if(n==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)s[i]=e();return re.makeTensor(s,t,n)}const WCe=te({rand_:VCe});var qO={exports:{}};qO.exports;(function(t){(function(e,n,r){function s(l){var c=this,u=a();c.next=function(){var A=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=A-(c.c=A|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function i(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new s(l),A=c&&c.state,d=u.next;return d.int32=function(){return u.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,A&&(typeof A=="object"&&i(A,u),d.state=function(){return i(u,{})}),d}function a(){var l=4022871197,c=function(u){u=String(u);for(var A=0;A<u.length;A++){l+=u.charCodeAt(A);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=o:this.alea=o})(Ci,t)})(qO);var GCe=qO.exports,YO={exports:{}};YO.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var A=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^A^A>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var c=new s(a),u=l&&l.state,A=function(){return(c.next()>>>0)/4294967296};return A.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},A.int32=c.next,A.quick=A,u&&(typeof u=="object"&&i(u,c),A.state=function(){return i(c,{})}),A}n&&n.exports?n.exports=o:this.xor128=o})(Ci,t)})(YO);var KCe=YO.exports,JO={exports:{}};JO.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var A=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(A^A<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var c=new s(a),u=l&&l.state,A=function(){return(c.next()>>>0)/4294967296};return A.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},A.int32=c.next,A.quick=A,u&&(typeof u=="object"&&i(u,c),A.state=function(){return i(c,{})}),A}n&&n.exports?n.exports=o:this.xorwow=o})(Ci,t)})(JO);var XCe=JO.exports,ZO={exports:{}};ZO.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var u=l.x,A=l.i,d,f;return d=u[A],d^=d>>>7,f=d^d<<24,d=u[A+1&7],f^=d^d>>>10,d=u[A+3&7],f^=d^d>>>3,d=u[A+4&7],f^=d^d<<7,d=u[A+7&7],d=d^d<<13,f^=d^d<<9,u[A]=f,l.i=A+1&7,f};function c(u,A){var d,f=[];if(A===(A|0))f[0]=A;else for(A=""+A,d=0;d<A.length;++d)f[d&7]=f[d&7]<<15^A.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],u.x=f,u.i=0,d=256;d>0;--d)u.next()}c(l,a)}function i(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,A=function(){return(c.next()>>>0)/4294967296};return A.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},A.int32=c.next,A.quick=A,u&&(u.x&&i(u,c),A.state=function(){return i(c,{})}),A}n&&n.exports?n.exports=o:this.xorshift7=o})(Ci,t)})(ZO);var qCe=ZO.exports,eD={exports:{}};eD.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var u=l.w,A=l.X,d=l.i,f,h;return l.w=u=u+1640531527|0,h=A[d+34&127],f=A[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,h=A[d]=h^f,l.i=d,h+(u^u>>>16)|0};function c(u,A){var d,f,h,m,g,y=[],x=128;for(A===(A|0)?(f=A,A=null):(A=A+"\0",f=0,x=Math.max(x,A.length)),h=0,m=-32;m<x;++m)A&&(f^=A.charCodeAt((m+32)%A.length)),m===0&&(g=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,m>=0&&(g=g+1640531527|0,d=y[m&127]^=f+g,h=d==0?h+1:0);for(h>=128&&(y[(A&&A.length||0)&127]=-1),h=127,m=4*128;m>0;--m)f=y[h+34&127],d=y[h=h+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,y[h]=f^d;u.w=g,u.X=y,u.i=h}c(l,a)}function i(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,A=function(){return(c.next()>>>0)/4294967296};return A.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},A.int32=c.next,A.quick=A,u&&(u.X&&i(u,c),A.state=function(){return i(c,{})}),A}n&&n.exports?n.exports=o:this.xor4096=o})(Ci,t)})(eD);var YCe=eD.exports,tD={exports:{}};tD.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var A=l.b,d=l.c,f=l.d,h=l.a;return A=A<<25^A>>>7^d,d=d-f|0,f=f<<24^f>>>8^h,h=h-A|0,l.b=A=A<<20^A>>>12^d,l.c=d=d-f|0,l.d=f<<16^d>>>16^h,l.a=h-A|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function i(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var c=new s(a),u=l&&l.state,A=function(){return(c.next()>>>0)/4294967296};return A.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},A.int32=c.next,A.quick=A,u&&(typeof u=="object"&&i(u,c),A.state=function(){return i(c,{})}),A}n&&n.exports?n.exports=o:this.tychei=o})(Ci,t)})(tD);var JCe=tD.exports,HX={exports:{}};const ZCe={},eSe=Object.freeze(Object.defineProperty({__proto__:null,default:ZCe},Symbol.toStringTag,{value:"Module"})),tSe=Cie(eSe);(function(t){(function(e,n,r){var s=256,i=6,o=52,a="random",l=r.pow(s,i),c=r.pow(2,o),u=c*2,A=s-1,d;function f(b,w,C){var B=[];w=w==!0?{entropy:!0}:w||{};var S=y(g(w.entropy?[b,v(n)]:b??x(),3),B),N=new h(B),k=function(){for(var O=N.g(i),U=l,P=0;O<c;)O=(O+P)*s,U*=s,P=N.g(1);for(;O>=u;)O/=2,U/=2,P>>>=1;return(O+P)/U};return k.int32=function(){return N.g(4)|0},k.quick=function(){return N.g(4)/4294967296},k.double=k,y(v(N.S),n),(w.pass||C||function(O,U,P,V){return V&&(V.S&&m(V,N),O.state=function(){return m(N,{})}),P?(r[a]=O,U):O})(k,S,"global"in w?w.global:this==r,w.state)}function h(b){var w,C=b.length,B=this,S=0,N=B.i=B.j=0,k=B.S=[];for(C||(b=[C++]);S<s;)k[S]=S++;for(S=0;S<s;S++)k[S]=k[N=A&N+b[S%C]+(w=k[S])],k[N]=w;(B.g=function(O){for(var U,P=0,V=B.i,W=B.j,L=B.S;O--;)U=L[V=A&V+1],P=P*s+L[A&(L[V]=L[W=A&W+U])+(L[W]=U)];return B.i=V,B.j=W,P})(s)}function m(b,w){return w.i=b.i,w.j=b.j,w.S=b.S.slice(),w}function g(b,w){var C=[],B=typeof b,S;if(w&&B=="object")for(S in b)try{C.push(g(b[S],w-1))}catch{}return C.length?C:B=="string"?b:b+"\0"}function y(b,w){for(var C=b+"",B,S=0;S<C.length;)w[A&S]=A&(B^=w[A&S]*19)+C.charCodeAt(S++);return v(w)}function x(){try{var b;return d&&(b=d.randomBytes)?b=b(s):(b=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(b)),v(b)}catch{var w=e.navigator,C=w&&w.plugins;return[+new Date,e,C,e.screen,v(n)]}}function v(b){return String.fromCharCode.apply(0,b)}if(y(r.random(),n),t.exports){t.exports=f;try{d=tSe}catch{}}else r["seed"+a]=f})(typeof self<"u"?self:Ci,[],Math)})(HX);var nSe=HX.exports,rSe=GCe,sSe=KCe,iSe=XCe,oSe=qCe,aSe=YCe,lSe=JCe,df=nSe;df.alea=rSe;df.xor128=sSe;df.xorwow=iSe;df.xorshift7=oSe;df.xor4096=aSe;df.tychei=lSe;var DB=df;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nD{constructor(e,n,r,s,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=i||Math.random();this.random=DB.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,i,o;do s=2*this.random()-1,i=2*this.random()-1,o=s*s+i*i;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*s*a,n=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class cSe{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const i=s||Math.random();this.randu=DB.alea(i.toString()),this.randn=new nD(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,s,i,o;for(;;){do s=this.randn.nextValue(),o=1+this.c*s;while(o<=0);if(o*=o*o,e=s*s,n=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),i=this.randu(),i<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class uSe{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=DB.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ASe(t,e,n=1,r="float32",s){if(lo(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new cSe(e,n,r,s),o=St(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const dSe=te({randomGamma_:ASe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fSe(t,e=0,n=1,r,s){if(lo(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new nD(e,n,r,!1,s),o=St(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const rD=te({randomNormal_:fSe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hSe(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return rD(t,0,1,e,n)}const pSe=te({randomStandardNormal_:hSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mSe(t,e=0,n=1,r="float32",s){lo(t);const i=St(t,r),o=new uSe(e,n,null,s);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const ff=te({randomUniform_:mSe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gSe(t,e,n,r){return ff(t,e,n,"int32",r)}const ySe=te({randomUniformInt_:gSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function up(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return re.runKernel(uO,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xSe(t){const n={input:H(t,"input","real")};return re.runKernel(AO,n)}const Zy=te({real_:xSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vSe(t){const n={x:H(t,"x","reciprocal")};return re.runKernel(Mx,n)}const zX=te({reciprocal_:vSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bSe(t){const n={x:H(t,"x","relu")};return re.runKernel(Qx,n)}const wl=te({relu_:bSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wSe(t){const n={x:H(t,"x","relu6")};return re.runKernel(Hx,n)}const sD=te({relu6_:wSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CSe(t,e){const r={x:H(t,"x","reverse")},s={dims:e};return re.runKernel(AB,r,s)}const zo=te({reverse_:CSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SSe(t){const e=H(t,"x","reverse");return M(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),zo(e,0)}const BSe=te({reverse1d_:SSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NSe(t,e){const n=H(t,"x","reverse");return M(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),zo(n,e)}const ESe=te({reverse2d_:NSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ISe(t,e){const n=H(t,"x","reverse");return M(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),zo(n,e)}const kSe=te({reverse3d_:ISe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TSe(t,e){const n=H(t,"x","reverse");return M(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),zo(n,e)}const FSe=te({reverse4d_:TSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Se(t){const n={x:H(t,"x","round")};return re.runKernel(zx,n)}const iD=te({round_:$Se});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Se(t){const n={x:H(t,"x","rsqrt","float32")};return re.runKernel(Vx,n)}const oD=te({rsqrt_:_Se});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OSe(t){const n={x:H(t,"x","selu")};return re.runKernel(Wx,n)}const aD=te({selu_:OSe});function DSe(t,e,n,r,s,i=[1,1],o="NHWC"){const a=H(t,"x","separableConv2d"),l=H(e,"depthwiseFilter","separableConv2d"),c=H(n,"pointwiseFilter","separableConv2d");let u=a,A=!1;if(a.rank===3&&(A=!0,u=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");M(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),M(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),M(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),M(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),M(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const d=l.shape[2],f=l.shape[3];M(c.shape[2]===d*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*f}, but got ${c.shape[2]}.`);const h=lv(u,l,r,s,o,i),g=Xu(h,c,1,"valid",o);return A?oe(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const lD=te({separableConv2d_:DSe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function RSe(t,e){const n=H(t,"x","setdiff1d"),r=H(e,"y","setdiff1d");M(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),M(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),M(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await n.data(),i=await r.data(),o=new Set(i);let a=0;for(let u=0;u<s.length;u++)o.has(s[u])||a++;const l=new Er([a],n.dtype),c=new Er([a],"int32");for(let u=0,A=0;u<s.length;u++)o.has(s[u])||(l.values[A]=s[u],c.values[A]=u,A++);return[l.toTensor(),c.toTensor()]}const PSe=RSe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function USe(t){const n={x:H(t,"x","sign")};return re.runKernel(Xx,n)}const VX=te({sign_:USe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jSe(t){const n={x:H(t,"x","sin","float32")};return re.runKernel(Gx,n)}const cD=te({sin_:jSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LSe(t){const n={x:H(t,"x","sinh")};return re.runKernel(Kx,n)}const uD=te({sinh_:LSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MSe(t,e,n){const r=H(t,"x","slice1d");return M(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),ct(r,[e],[n])}const RB=te({slice1d_:MSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QSe(t,e,n){const r=H(t,"x","slice2d");return M(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),ct(r,e,n)}const AD=te({slice2d_:QSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HSe(t,e,n){const r=H(t,"x","slice3d");return M(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),ct(r,e,n)}const PB=te({slice3d_:HSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zSe(t,e,n){const r=H(t,"x","slice4d");return M(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),ct(r,e,n)}const e0=te({slice4d_:zSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VSe(t,e=-1){const n=H(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return re.runKernel(gB,r,s)}const UB=te({softmax_:VSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WSe(t){M(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return re.runKernel(W_,e)}const jB=te({fft_:WSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GSe(t){M(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return re.runKernel(q_,e)}const t0=te({ifft_:GSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KSe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=oe(t,[n,e]);r=t0(s)}else{const s=[n,2*(e-1)],i=oe(Zy(t),[n,e]),o=oe(NB(t),[n,e]),a=zo(ct(i,[0,1],[n,e-2]),1),l=ne(zo(ct(o,[0,1],[n,e-2]),1),at(-1)),c=qn([i,a],1),u=qn([o,l],1),A=oe(Wu(c,u),[s[0],s[1]]);r=t0(A)}if(r=Zy(r),t.rank===3&&t.shape[0]!==0){const s=r,i=t.shape[0];r=oe(r,[i,r.shape[0]/i,r.shape[1]]),s.dispose()}return r}const dD=te({irfft_:KSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XSe(t,e,n=0){const s={x:H(t,"x","split")},i={numOrSizeSplits:e,axis:n};return re.runKernel(mB,s,i)}const Oi=te({split_:XSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qSe(t,e){M(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const h=t.shape.map(g=>0),m=t.shape.map(g=>g);m[t.shape.length-1]=e,s=ct(t,h,m),n=e}else if(e!=null&&e>n){const h=t.shape.map(m=>m);h[t.shape.length-1]=e-n,s=qn([t,Sr(h)],t.shape.length-1),n=e}else s=t;const i=jt(s),o=oe(Wu(s,i),[r,n]),a=jB(o),l=Math.floor(n/2)+1,c=Zy(a),u=NB(a),A=Oi(c,[l,n-l],c.shape.length-1),d=Oi(u,[l,n-l],u.shape.length-1),f=s.shape.slice();return f[s.shape.length-1]=l,oe(Wu(A[0],d[0]),f)}const LB=te({rfft_:qSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YSe(t,e){let n=H(t,"a","squaredDifference"),r=H(e,"b","squaredDifference");[n,r]=Jn(n,r),bt(n.shape,r.shape);const s={a:n,b:r},i={};return re.runKernel(Zx,s,i)}const fD=te({squaredDifference_:YSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JSe(t,e){const n=H(t,"x","squeeze","string_or_numeric");return oe(n,lA(n.shape,e).newShape)}const Wn=te({squeeze_:JSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZSe(t,e=0){const n=l2(t,"tensors","stack","string_or_numeric");M(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&M(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return re.runKernel(sB,r,s)}const Ri=te({stack_:ZSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eBe(t,e=0){const r={x:H(t,"x","step")},s={alpha:e};return re.runKernel(sv,r,s)}const im=te({step_:eBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tBe(t,e,n,r,s=0,i=0,o=0,a=0,l=0){const u={x:H(t,"x","stridedSlice","string_or_numeric")},A={begin:e,end:n,strides:r,beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return re.runKernel(CO,u,A)}const WX=te({stridedSlice_:tBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nBe(t){const n={x:H(t,"x","tan","float32")};return re.runKernel(tv,n)}const GX=te({tan_:nBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mr(t,e){Zp(t);const n=uA(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return AA(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Du(t,e,n){if(Zp(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=uA(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return AA(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KX(t,e,n){if(Zp(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=uA(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return AA(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rBe(t,e,n){if(Zp(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=uA(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return AA(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sBe(t,e,n){if(Zp(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=uA(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return AA(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iBe(t,e,n){if(Zp(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=uA(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,AA(t,e,r,n)}function XX(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(i+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(i+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(i+` update.rank != ${s+t.length-r}`);for(let o=0;o<s;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-s;++o)if(n.shape[o+s]!==t[o+r])throw new Error(i+` updates.shape[${o+s}] (${n.shape[o+s]}) != shape[${o+s}] (${t[o+s]})`)}function hD(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}XX(n,e,t)}function hf(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let A=s;A<i;++A)o*=n[A];const a=s<1?1:s,l=ye(e.shape)/a,c=[...ot(n.slice(0,s)),1],u=ye(n);return{sliceRank:s,numUpdates:l,sliceSize:o,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oBe(t,e,n){const r=H(t,"tensor","tensorScatterupdate"),s=H(e,"indices","tensorScatterupdate","int32"),i=H(n,"updates","tensorScatterupdate");if(hD(i,s,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);const o={tensor:r,indices:s,updates:i},a={};return re.runKernel(pO,o,a)}const aBe=te({tensorScatterUpdate_:oBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lBe(t,e=1,n=!0){const r=H(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const i={x:r},o={k:e,sorted:n},[a,l]=re.runKernel(EO,i,o);return{values:a,indices:l}}const qX=te({topk_:lBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cBe(t,e=0,n=1,r,s){if(lo(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new nD(e,n,r,!0,s),o=St(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const pD=te({truncatedNormal_:cBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uBe(t,e=0){const n=H(t,"x","unique","string_or_numeric");M(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[i,o]=re.runKernel(kO,r,s);return{values:i,indices:o}}const YX=te({unique_:uBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ABe(t,e,n){const r=H(t,"x","unsortedSegmentSum"),s=H(e,"segmentIds","unsortedSegmentSum","int32");M(sp(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:s},o={numSegments:n};return re.runKernel(vB,i,o)}const mD=te({unsortedSegmentSum_:ABe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dBe(t,e=0){const n=H(t,"x","unstack","string_or_numeric");M(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return re.runKernel(xB,r,s)}const Vo=te({unstack_:dBe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fBe(t,e){return KO(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JX(t,e=!0,n,r){return re.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gD(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=St(t,"int32"),s=St([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const o=r.indexToLoc(n[i]),a=i*t.length;s.values.set(o,a)}return s.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function hBe(t){const e=H(t,"condition","whereAsync","bool"),n=await e.data(),r=gD(e.shape,n);return t!==e&&e.dispose(),r}const ZX=hBe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function pBe(t,e,n){const r=H(t,"tensor","boolMask"),s=H(e,"mask","boolMask","bool"),i=n??0,o=s.rank,a=r.shape;M(o>0,()=>"mask cannot be scalar"),ji(a.slice(i,i+o),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=i;m<i+o;m++)l*=a[m];const c=a.slice(0,i).concat([l],a.slice(i+o)),u=oe(r,c),A=oe(s,[-1]),d=await ZX(A),f=Wn(d,[1]),h=dv(u,f,i);return t!==r&&r.dispose(),e!==s&&s.dispose(),f.dispose(),u.dispose(),A.dispose(),d.dispose(),h}const mBe=pBe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gBe(t,e,n){const r=H(t,"x","transpose");if(e==null&&(e=r.shape.map((o,a)=>a).reverse()),M(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{M(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},i={perm:e};return r.dtype==="complex64"?Ae(()=>{let o=Zy(r),a=NB(r);return o=re.runKernel(kh,{x:o},i),a=re.runKernel(kh,{x:a},i),n&&(a=In(a)),Wu(o,a)}):re.runKernel(kh,s,i)}const Ut=te({transpose_:gBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yBe(t,e,n,r,s=!0){const i=H(t,"v","movingAverage"),o=H(e,"x","movingAverage"),a=H(n,"decay","movingAverage");obe(i,o),M(_t(i.shape,o.shape),()=>"Shape mismatch in v and x");const l=at(1),c=We(l,a);let u=ne(We(o,i),c);if(s){M(r!=null,()=>"When using zeroDebias: true, step is required.");const A=H(r,"step","movingAverage");u=ze(u,We(l,mc(a,A)))}return Ee(i,u)}const xBe=te({movingAverage_:yBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vBe(t,e,n){lo(n);const r=H(t,"indices","scatterND","int32"),s=H(e,"updates","scatterND");hD(s,r,n);const i={indices:r,updates:s},o={shape:n};return re.runKernel(hO,i,o)}const bBe=te({scatterND_:vBe});function wBe(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const s=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CBe(t,e,n,r=0){lo(n);const s=H(t,"sparseIndices","sparseToDense","int32"),i=H(e,"sparseValues","sparseToDense","string_or_numeric"),o=H(r,"defaultValue","sparseToDense",i.dtype);wBe(s,i,n,o);const a={sparseIndices:s,sparseValues:i,defaultValue:o},l={outputShape:n};return re.runKernel(bO,a,l)}const SBe=te({sparseToDense_:CBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BBe(t,e){const n=H(e,"indices","gatherND","int32"),s={params:H(t,"x","gatherND","string_or_numeric"),indices:n};return re.runKernel(X_,s)}const NBe=te({gatherND_:BBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EBe(t,e){if(e==null)return t.shape.slice();if(_t(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IBe(t,e,n,r){const s=H(t,"x","dropout");if(M(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),M(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof qt?s.clone():s;const i=EBe(s,n),o=1-e,a=ze(Av(Ee(ff(i,0,1,"float32",r),o)),o);return ne(s,a)}const eq=te({dropout_:IBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tq(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function yD(t,e,n){const r=1-t%2,s=new Float32Array(t);for(let i=0;i<t;++i){const o=2*Math.PI*i/(t+r-1);s[i]=e-n*Math.cos(o)}return mr(s,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function kBe(t,e,n=1){const r=H(t,"predictions","inTopK"),s=H(e,"targets","inTopK");M(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),M(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),ji(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];M(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const o=await r.data(),a=await s.data(),[l,c]=[o.length/i,i],u=rs("bool",l);for(let A=0;A<l;A++){const d=A*c,f=o.subarray(d,d+c),h=[];for(let m=0;m<f.length;m++)h.push({value:f[m],index:m});h.sort((m,g)=>g.value-m.value),u[A]=0;for(let m=0;m<n;m++)if(h[m].index===a[A]){u[A]=1;break}}return t!==r&&r.dispose(),e!==s&&s.dispose(),va(u,s.shape,"bool")}const TBe=kBe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FBe(t,e,n,r,s,i="NHWC",o){let a=t;t.rank===3&&(a=oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]])),M(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),M(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),M(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=i==="NHWC"?a.shape[3]:a.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];M(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),M(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Hs("conv2dDerFilter",s,o);const A={x:a,dy:l},d={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,filterShape:n};return re.runKernel(O_,A,d)}const xD=te({conv2DBackpropFilter_:FBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MB(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return ne(t,im(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function QB(t,e){let n=e;const r=Fr(t.shape,e.shape);return r.length>0&&(n=Je(n,r)),oe(n,t.shape)}function HB(t,e,n,r){if(e==="linear")return t;if(e==="relu")return wl(t);if(e==="elu")return cv(t);if(e==="relu6")return sD(t);if(e==="prelu")return OB(t,n);if(e==="leakyrelu")return EB(t,r);if(e==="sigmoid")return ba(t);throw new Error(`Unknown fused activation ${e}.`)}const zB=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Be({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",zB(re.state.gradientDepth,l)===!1){M(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=Xu(t,e,n,r,s,i,o);return a!=null&&(C=Ee(C,a)),HB(C,l,c,u)}const A=H(t,"x","conv2d","float32"),d=H(e,"filter","conv2d","float32");let f=A,h=!1;A.rank===3&&(h=!0,f=oe(A,[1,A.shape[0],A.shape[1],A.shape[2]])),M(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),M(d.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),Hs("fused conv2d",r,o);const m=s==="NHWC"?f.shape[3]:f.shape[1];M(d.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${d.shape[2]}.`),M(os(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const g=Vr(f.shape,d.shape,n,i,r,o);let y;a!=null&&(y=H(a,"bias","fused conv2d"),[y]=Jn(y,A),s==="NHWC"?bt(g.outShape,y.shape):(M(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),M(y.shape.length===0||y.shape[0]===g.outChannels||y.shape[0]===1,()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let x;if(c!=null){const C=c.shape;if(M(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)M(C[0]===1||C[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${g.outChannels}).`);else if(C.length===3)try{bt(C,g.outShape)}catch{const S=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(S)}x=H(c,"prelu weights","fused conv2d")}const v=(C,B)=>{M(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[S,N,k,O]=B,U=MB(C,k,l);M(Ku(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const P=jO(N.shape,U,S,n,r),V=xD(N,U,S.shape,n,r),W=[P,V];if(O!=null){const L=QB(O,U);W.push(L)}return W},b={x:f,filter:d,bias:y,preluActivationWeights:x},w={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return a==null?gc((B,S,N)=>{let k=re.runKernel(r2,b,w);return N([S,B,k]),h&&(k=oe(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:v}})(f,d):gc((B,S,N,k)=>{let O=re.runKernel(r2,b,w);return k([S,B,O,N]),h&&(O=oe(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:v}})(f,d,y)}const nq=te({fusedConv2d_:$Be});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Be(t,e,n,r,s,i=[1,1],o){let a=t;t.rank===3&&(a=oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:a,dy:l},u={strides:r,pad:s,dimRoundingMode:o,dilations:i,filterShape:n};return re.runKernel(M_,c,u)}const rq=te({depthwiseConv2dNativeBackpropFilter_:_Be});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OBe(t,e,n,r,s,i=[1,1],o){let a=e,l=!1;e.rank===3&&(l=!0,a=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:a,filter:n},u={strides:r,pad:s,dimRoundingMode:o,dilations:i,inputShape:t},A=re.runKernel(Q_,c,u);return l?oe(A,[A.shape[1],A.shape[2],A.shape[3]]):A}const sq=te({depthwiseConv2dNativeBackpropInput_:OBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DBe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(zB(re.state.gradientDepth,l)===!1){let w=lv(t,e,n,r,s,i,o);return a!=null&&(w=Ee(w,a)),HB(w,l,c,u)}const A=H(t,"x","depthwiseConv2d","float32"),d=H(e,"filter","depthwiseConv2d","float32");let f=A,h=!1;A.rank===3&&(h=!0,f=oe(A,[1,A.shape[0],A.shape[1],A.shape[2]])),M(f.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),M(d.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),M(f.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),i==null&&(i=[1,1]),M(os(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Hs("fused depthwiseConv2d",r,o);const m=Vr(f.shape,d.shape,n,i,r,o,!0);let g;a!=null&&(g=H(a,"bias","fused conv2d"),[g]=Jn(g,A),bt(m.outShape,g.shape));let y;c!=null&&(y=H(c,"prelu weights","fused depthwiseConv2d"));const x=(w,C)=>{M(Ku(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[B,S,N,k]=C,O=MB(w,N,l),U=sq(S.shape,O,B,n,r,i,o),P=rq(S,O,B.shape,n,r,i,o);if(k!=null){const V=QB(g,O);return[U,P,V]}return[U,P]},v={x:f,filter:d,bias:g,preluActivationWeights:y},b={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return a==null?gc((C,B,S)=>{let N=re.runKernel(s2,v,b);return S([B,C,N]),h&&(N=oe(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:x}})(f,d):gc((C,B,S,N)=>{let k=re.runKernel(s2,v,b);return N([B,C,k,S]),h&&(k=oe(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:x}})(f,d,g)}const RBe=te({fusedDepthwiseConv2d_:DBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PBe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(zB(re.state.gradientDepth,i)===!1){let O=$t(t,e,n,r);return s!=null&&(O=Ee(O,s)),HB(O,i,o,a)}let l=H(t,"a","fused matMul"),c=H(e,"b","fused matMul");[l,c]=Jn(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],A=r?c.shape[c.rank-1]:c.shape[c.rank-2],d=n?l.shape[l.rank-1]:l.shape[l.rank-2],f=r?c.shape[c.rank-2]:c.shape[c.rank-1],h=l.shape.slice(0,-2),m=c.shape.slice(0,-2),g=ye(h),y=ye(m);M(u===A,()=>`Error in fused matMul: inner shapes (${u}) and (${A}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const v=bt(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([d,f]),b=n?oe(l,[g,u,d]):oe(l,[g,d,u]),w=r?oe(c,[y,f,A]):oe(c,[y,A,f]);let C;s!=null&&(C=H(s,"bias","fused matMul"),[C]=Jn(C,l),bt(v,C.shape));let B;o!=null&&(B=H(o,"prelu weights","fused matMul"));const S=(O,U)=>{const[P,V,W,L]=U,G=MB(oe(O,W.shape),W,i);let _,j;if(!n&&!r?(_=$t(G,V,!1,!0),j=$t(P,G,!0,!1)):!n&&r?(_=$t(G,V,!1,!1),j=$t(G,P,!0,!1)):n&&!r?(_=$t(V,G,!1,!0),j=$t(P,G,!1,!1)):(_=$t(V,G,!0,!0),j=$t(G,P,!0,!0)),s!=null){const K=QB(L,G);return[_,j,K]}else return[_,j]},N={a:b,b:w,bias:C,preluActivationWeights:B},k={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return s==null?gc((U,P,V)=>{const W=re.runKernel(n2,N,k);return V([U,P,W]),{value:oe(W,v),gradFunc:S}})(b,w):gc((U,P,V,W)=>{const L=re.runKernel(n2,N,k);return W([U,P,L,V]),{value:oe(L,v),gradFunc:S}})(b,w,C)}const Mk=te({fusedMatMul_:PBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UBe=Object.freeze(Object.defineProperty({__proto__:null,conv2d:nq,depthwiseConv2d:RBe,matMul:Mk},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jBe(t){return yD(t,.54,.46)}const LBe=te({hammingWindow_:jBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MBe(t){return yD(t,.5,.5)}const iq=te({hannWindow_:MBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QBe(t,e,n,r=!1,s=0){let i=0;const o=[];for(;i+e<=t.size;)o.push(ct(t,i,e)),i+=n;if(r)for(;i<t.size;){const a=i+e-t.size,l=qn([ct(t,i,e-a),rm([a],s)]);o.push(l),i+=n}return o.length===0?Du([],[0,e]):oe(qn(o),[o.length,e])}const oq=te({frame_:QBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HBe(t,e,n,r,s=iq){r==null&&(r=tq(e));const i=oq(t,e,n),o=ne(i,s(e));return LB(o,r)}const zBe=te({stft_:HBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VBe(t,e,n,r,s="bilinear",i=0){const o=H(t,"image","cropAndResize"),a=H(e,"boxes","cropAndResize","float32"),l=H(n,"boxInd","cropAndResize","int32"),c=a.shape[0];M(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),M(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),M(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),M(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),M(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),M(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const u={image:o,boxes:a,boxInd:l},A={method:s,extrapolationValue:i,cropSize:r};return re.runKernel(U_,u,A)}const WBe=te({cropAndResize_:VBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GBe(t){const e=H(t,"image","flipLeftRight","float32");M(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return re.runKernel(K_,n,{})}const KBe=te({flipLeftRight_:GBe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XBe(t){const e=H(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];M(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),M(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,_o(e,s)}const qBe=te({grayscaleToRGB_:XBe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YBe(t){const e=H(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];M(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),M(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,i=Ue(e,"float32"),o=mr([.2989,.587,.114]);let a;switch(e.rank){case 2:a=Jf("ij,j->i",i,o);break;case 3:a=Jf("ijk,k->ij",i,o);break;case 4:a=Jf("ijkl,l->ijk",i,o);break;case 5:a=Jf("ijklm,m->ijkl",i,o);break;case 6:a=Jf("ijklmn,n->ijklm",i,o);break;default:throw new Error("Not a valid tensor rank.")}return a=wr(a,-1),Ue(a,s)}const JBe=te({rgbToGrayscale_:YBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZBe(t,e,n=0,r=.5){const s=H(t,"image","rotateWithOffset","float32");M(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const i={image:s},o={radians:e,fillValue:n,center:r};return re.runKernel(TO,i,o)}const e3e=te({rotateWithOffset_:ZBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function om(t,e,n,r,s,i){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);const o=t.shape[0];return n=Math.min(n,o),M(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),M(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),M(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),M(e.rank===1,()=>"scores must be a 1D tensor"),M(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),M(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3e(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=H(t,"boxes","nonMaxSuppression","float32"),o=H(e,"scores","nonMaxSuppression","float32"),a=om(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return re.runKernel(sO,{boxes:i,scores:o},l)}const n3e=te({nonMaxSuppression_:t3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r3e(t,e,n){const r=s3e(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function s3e(t,e,n){return o3e(t,e,n||i3e)}function i3e(t,e){return t>e?1:t<e?-1:0}function o3e(t,e,n){let r=0,s=t.length,i=0,o=!1;for(;r<s;){i=r+(s-r>>>1);const a=n(e,t[i]);a>0?r=i+1:(s=i,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vD(t,e,n,r,s){return CD(t,e,n,r,s,0)}function bD(t,e,n,r,s,i){return CD(t,e,n,r,s,0,!1,i,!0)}function wD(t,e,n,r,s,i){return CD(t,e,n,r,s,i,!0)}function CD(t,e,n,r,s,i,o=!1,a=!1,l=!1){const c=[];for(let g=0;g<e.length;g++)e[g]>s&&c.push({score:e[g],boxIndex:g,suppressBeginIndex:0});c.sort(x6);const u=i>0?-.5/i:0,A=[],d=[];for(;A.length<n&&c.length>0;){const g=c.pop(),{score:y,boxIndex:x,suppressBeginIndex:v}=g;if(y<s)break;let b=!1;for(let w=A.length-1;w>=v;--w){const C=a3e(t,x,A[w]);if(C>=r){b=!0;break}if(g.score=g.score*l3e(r,u,C),g.score<=s)break}g.suppressBeginIndex=A.length,b||(g.score===y?(A.push(x),d.push(g.score)):g.score>s&&r3e(c,g,x6))}const f=A.length,h=n-f;a&&h>0&&(A.push(...new Array(h).fill(0)),d.push(...new Array(h).fill(0)));const m={selectedIndices:A};return o&&(m.selectedScores=d),l&&(m.validOutputs=f),m}function a3e(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),A=Math.max(s[0],s[2]),d=Math.max(s[1],s[3]),f=(a-i)*(l-o),h=(A-c)*(d-u);if(f<=0||h<=0)return 0;const m=Math.max(i,c),g=Math.max(o,u),y=Math.min(a,A),x=Math.min(l,d),v=Math.max(y-m,0)*Math.max(x-g,0);return v/(f+h-v)}function l3e(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function x6(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function c3e(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=H(t,"boxes","nonMaxSuppressionAsync"),o=H(e,"scores","nonMaxSuppressionAsync"),a=om(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l=await Promise.all([i.data(),o.data()]),c=l[0],u=l[1],{selectedIndices:A}=vD(c,u,n,r,s);return i!==t&&i.dispose(),o!==e&&o.dispose(),mr(A,"int32")}const u3e=c3e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A3e(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=H(t,"boxes","nonMaxSuppression"),a=H(e,"scores","nonMaxSuppression"),l=om(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c={boxes:o,scores:a},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i},A=re.runKernel(oO,c,u);return{selectedIndices:A[0],selectedScores:A[1]}}const d3e=te({nonMaxSuppressionWithScore_:A3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function f3e(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=H(t,"boxes","nonMaxSuppressionAsync"),a=H(e,"scores","nonMaxSuppressionAsync"),l=om(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c=await Promise.all([o.data(),a.data()]),u=c[0],A=c[1],{selectedIndices:d,selectedScores:f}=wD(u,A,n,r,s,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:mr(d,"int32"),selectedScores:mr(f)}}const h3e=f3e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p3e(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=H(t,"boxes","nonMaxSuppression"),a=H(e,"scores","nonMaxSuppression"),l=om(o,a,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,A=l.scoreThreshold,d={boxes:o,scores:a},f={maxOutputSize:c,iouThreshold:u,scoreThreshold:A,padToMaxOutputSize:i},h=re.runKernel(iO,d,f);return{selectedIndices:h[0],validOutputs:h[1]}}const m3e=te({nonMaxSuppressionPadded_:p3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function g3e(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=H(t,"boxes","nonMaxSuppressionAsync"),a=H(e,"scores","nonMaxSuppressionAsync"),l=om(o,a,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,A=l.scoreThreshold,[d,f]=await Promise.all([o.data(),a.data()]),{selectedIndices:h,validOutputs:m}=bD(d,f,c,u,A,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:mr(h,"int32"),validOutputs:at(m,"int32")}}const y3e=g3e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x3e(t,e,n=!1,r=!1){const s=H(t,"images","resizeBilinear");M(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),M(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),M(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=oe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=re.runKernel(uB,a,l);return o?oe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const aq=te({resizeBilinear_:x3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v3e(t,e,n=!1,r=!1){const s=H(t,"images","resizeNearestNeighbor");M(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),M(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),M(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),M(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=oe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=re.runKernel(cB,a,l);return o?oe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const lq=te({resizeNearestNeighbor_:v3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b3e(t,e="binary",n=!1,r=.5){const s=H(t,"image","threshold"),i=.2989,o=.587,a=.114,l=s.shape[0]*s.shape[1];let c=ne(mr([r]),255),u,A,d,f;if(M(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),M(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),M(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),M(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[u,A,d]=Oi(s,[1,1,1],-1);const g=ne(u,i),y=ne(A,o),x=ne(d,a);f=Ee(Ee(g,y),x)}else f=t;if(e==="otsu"){const g=pX(Ue(iD(f),"int32"),va([]),256);c=w3e(g,l)}const h=n?Af(f,c):Mi(f,c);return Ue(ne(h,255),"int32")}function w3e(t,e){let n=mr([-1]),r=mr([0]),s=mr([0]),i,o,a,l,c,u;for(let A=0;A<t.size-1;A++){i=ct(t,0,A+1),o=ct(t,A+1),c=ze(Je(i),e),u=ze(Je(o),e);const d=Je(ne(i,up(0,i.size)));a=ze(d,Je(i));const f=rm(o.shape,i.size),h=Ee(up(0,o.size),f),m=ne(o,h);l=ze(Je(m),Je(o));const g=We(a,l),y=We(a,l),x=ne(c,u);s=ne(ne(x,g),y);const v=Mi(s,r);r=xs(v,s,r),n=xs(v,mr([A]),n)}return n}const C3e=te({threshold_:b3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S3e(t,e,n="nearest",r="constant",s=0,i){const o=H(t,"image","transform","float32"),a=H(e,"transforms","transform","float32");M(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),M(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),M(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:o,transforms:a},c={interpolation:n,fillMode:r,fillValue:s,outputShape:i};return re.runKernel(IO,l,c)}const B3e=te({transform_:S3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N3e(t,e,n){const r=H(t,"a","bandPart");M(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[i,o]=r.shape.slice(-2);let a,l;typeof e=="number"?(M(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),M(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),a=H(e<0?i:e,"numLower","bandPart")):(M(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=xs(Jy(e,0),i,Xd(e,i))),typeof n=="number"?(M(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),M(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=H(n<0?o:n,"numUpper","bandPart")):(M(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=xs(Jy(n,0),o,Xd(n,o)));const c=oe(up(0,i,1,"int32"),[-1,1]),u=up(0,o,1,"int32"),A=We(c,u),d=ml(Af(A,a),hA(A,In(l))),f=Sr([i,o],r.dtype);return oe(Ri(Vo(oe(r,[-1,i,o])).map(h=>xs(d,h,f))),s)}const E3e=te({bandPart_:N3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3e(t){let e;if(Array.isArray(t)){e=!1,M(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let i=1;i<t.length;++i)M(t[i].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${s})`)}else e=!0,t=Oi(t,t.shape[0],0).map(s=>Wn(s,[0]));M(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(re.tidy(()=>{let i=r[s];if(s>0)for(let o=0;o<s;++o){const a=ne(Je(ne(n[o],i)),n[o]);i=We(i,a)}return ze(i,uv(i,"euclidean"))}));return e?Ri(n,0):n}const k3e=te({gramSchmidt_:I3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T3e(t,e=!1){if(M(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return v6(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=Vo(oe(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],i=[];r.forEach(l=>{const[c,u]=v6(l,e);s.push(c),i.push(u)});const o=oe(Ri(s,0),t.shape),a=oe(Ri(i,0),t.shape);return[o,a]}}function v6(t,e=!1){return re.tidy(()=>{M(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=VO(n),i=oc(t);const o=Du([[1]],[1,1]);let a=oc(o);const l=n>=r?r:n;for(let c=0;c<l;++c){const u=i,A=a,d=s;[a,i,s]=re.tidy(()=>{const f=ct(i,[c,c],[n-c,1]),h=uv(f),m=ct(i,[c,c],[1,1]),g=xs(Mi(m,0),Du([[-1]]),Du([[1]])),y=We(m,ne(g,h)),x=ze(f,y);x.shape[0]===1?a=oc(o):a=qn([o,ct(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);const v=In(ze($t(g,y),h)),b=ct(i,[c,0],[n-c,r]),w=ne(v,a),C=Ut(a);if(c===0)i=We(b,$t(w,$t(C,b)));else{const N=We(b,$t(w,$t(C,b)));i=qn([ct(i,[0,0],[c,r]),N],0)}const B=Ut(w),S=ct(s,[0,c],[n,s.shape[1]-c]);if(c===0)s=We(S,$t($t(S,a),B));else{const N=We(S,$t($t(S,a),B));s=qn([ct(s,[0,0],[n,c]),N],1)}return[a,i,s]}),ft([u,A,d])}return!e&&n>r&&(s=ct(s,[0,0],[n,r]),i=ct(i,[0,0],[r,r])),[s,i]})}const F3e=te({qr_:T3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ti;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(ti||(ti={}));function $3e(t,e,n=ti.SUM_BY_NONZERO_WEIGHTS){const r=H(t,"losses","computeWeightedLoss");let s=null;e!=null&&(s=H(e,"weights","computeWeightedLoss"));const i=s==null?r:ne(r,s);if(n===ti.NONE)return i;if(n===ti.SUM)return Je(i);if(n===ti.MEAN){if(s==null)return Kn(i);{const o=r.size/s.size,a=ze(Je(i),Je(s));return o>1?ze(a,at(o)):a}}if(n===ti.SUM_BY_NONZERO_WEIGHTS){if(s==null)return ze(Je(i),at(r.size));{const o=ne(s,Ei(r.shape)),a=Ue(Je(cp(o,at(0))),"float32");return ze(Je(i),a)}}throw Error(`Unknown reduction: ${n}`)}const $c=te({computeWeightedLoss_:$3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _3e(t,e,n,r=ti.SUM_BY_NONZERO_WEIGHTS){const s=H(t,"labels","absoluteDifference"),i=H(e,"predictions","absoluteDifference");let o=null;n!=null&&(o=H(n,"weights","absoluteDifference")),ji(s.shape,i.shape,"Error in absoluteDifference: ");const a=vr(We(s,i));return $c(a,o,r)}const O3e=te({absoluteDifference_:_3e});function D3e(t,e,n,r,s=ti.SUM_BY_NONZERO_WEIGHTS){const i=H(t,"labels","cosineDistance"),o=H(e,"predictions","cosineDistance");let a=null;r!=null&&(a=H(r,"weights","cosineDistance")),ji(i.shape,o.shape,"Error in cosineDistance: ");const l=at(1),c=We(l,Je(ne(i,o),n,!0));return $c(c,a,s)}const R3e=te({cosineDistance_:D3e});function P3e(t,e,n,r=ti.SUM_BY_NONZERO_WEIGHTS){let s=H(t,"labels","hingeLoss");const i=H(e,"predictions","hingeLoss");let o=null;n!=null&&(o=H(n,"weights","hingeLoss")),ji(s.shape,i.shape,"Error in hingeLoss: ");const a=at(1);s=We(ne(at(2),s),a);const l=wl(We(a,ne(s,i)));return $c(l,o,r)}const U3e=te({hingeLoss_:P3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j3e(t,e,n,r=1,s=ti.SUM_BY_NONZERO_WEIGHTS){const i=H(t,"labels","huberLoss"),o=H(e,"predictions","huberLoss");let a=null;n!=null&&(a=H(n,"weights","huberLoss")),ji(i.shape,o.shape,"Error in huberLoss: ");const l=at(r),c=vr(We(o,i)),u=Xd(c,l),A=We(c,u),d=Ee(ne(at(.5),fn(u)),ne(l,A));return $c(d,a,s)}const L3e=te({huberLoss_:j3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M3e(t,e,n,r=1e-7,s=ti.SUM_BY_NONZERO_WEIGHTS){const i=H(t,"labels","logLoss"),o=H(e,"predictions","logLoss");let a=null;n!=null&&(a=H(n,"weights","logLoss")),ji(i.shape,o.shape,"Error in logLoss: ");const l=at(1),c=at(r),u=In(ne(i,so(Ee(o,c)))),A=ne(We(l,i),so(Ee(We(l,o),c))),d=We(u,A);return $c(d,a,s)}const Q3e=te({logLoss_:M3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H3e(t,e,n,r=ti.SUM_BY_NONZERO_WEIGHTS){const s=H(t,"labels","meanSquaredError"),i=H(e,"predictions","meanSquaredError");let o=null;n!=null&&(o=H(n,"weights","meanSquaredError")),ji(s.shape,i.shape,"Error in meanSquaredError: ");const a=fD(s,i);return $c(a,o,r)}const z3e=te({meanSquaredError_:H3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V3e(t,e){const n=H(t,"labels","sigmoidCrossEntropyWithLogits"),r=H(e,"logits","sigmoidCrossEntropyWithLogits");ji(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=wl(r),i=ne(r,n),o=IB(Ms(In(vr(r))));return Ee(We(s,i),o)}function W3e(t,e,n,r=0,s=ti.SUM_BY_NONZERO_WEIGHTS){let i=H(t,"multiClassLabels","sigmoidCrossEntropy");const o=H(e,"logits","sigmoidCrossEntropy");let a=null;if(n!=null&&(a=H(n,"weights","sigmoidCrossEntropy")),ji(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const c=at(r),u=at(1),A=at(.5);i=Ee(ne(i,We(u,c)),ne(A,c))}const l=V3e(i,o);return $c(l,a,s)}const G3e=te({sigmoidCrossEntropy_:W3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K3e(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return gc((s,i,o)=>{const l=kB(i,[n],!0),c=We(Ue(i,"float32"),l);o([s,c]);const u=In(ne(c,s));return{value:Je(u,[n]),gradFunc:(f,h)=>{const[m,g]=h,y=or(f.shape,[n]);return[ne(oe(f,y),We(Ue(m,"float32"),Ms(g))),ne(oe(f,y),We(Ms(g),Ue(m,"float32")))]}}})(t,e)}function X3e(t,e,n,r=0,s=ti.SUM_BY_NONZERO_WEIGHTS){let i=H(t,"onehotLabels","softmaxCrossEntropy");const o=H(e,"logits","softmaxCrossEntropy");let a=null;if(n!=null&&(a=H(n,"weights","softmaxCrossEntropy")),ji(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const c=at(r),u=at(1),A=at(i.shape[1]);i=Ee(ne(i,We(u,c)),ze(c,A))}const l=K3e(i,o);return $c(l,a,s)}const q3e=te({softmaxCrossEntropy_:X3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y3e(t,e,n,r){const s=H(t,"indices","sparseFillEmptyRows","int32"),i=H(e,"values","sparseFillEmptyRows"),o=H(n,"denseShape","sparseFillEmptyRows","int32"),a=H(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const l={indices:s,values:i,denseShape:o,defaultValue:a},c=re.runKernel(gO,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}const J3e=te({sparseFillEmptyRows_:Y3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z3e(t,e,n){const r=H(t,"inputIndices","sparseReshape","int32"),s=H(e,"inputShape","sparseReshape","int32"),i=H(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const o={inputIndices:r,inputShape:s,newShape:i},a=re.runKernel(yO,o);return{outputIndices:a[0],outputShape:a[1]}}const eNe=te({sparseReshape_:Z3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tNe(t,e,n){const r=H(t,"data","sparseSegmentMean"),s=H(e,"indices","sparseSegmentMean","int32"),i=H(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const o={data:r,indices:s,segmentIds:i};return re.runKernel(xO,o)}const nNe=te({sparseSegmentMean_:tNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rNe(t,e,n){const r=H(t,"data","sparseSegmentSum"),s=H(e,"indices","sparseSegmentSum","int32"),i=H(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const o={data:r,indices:s,segmentIds:i};return re.runKernel(vO,o)}const sNe=te({sparseSegmentSum_:rNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iNe(t,e,n,r,s,i,o,a){const l=H(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const c=H(e,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const u={separator:n,nGramWidths:r,leftPad:s,rightPad:i,padWidth:o,preserveShortSequences:a},A={data:l,dataSplits:c},d=re.runKernel(SO,A,u);return{nGrams:d[0],nGramsSplits:d[1]}}const oNe=te({stringNGrams_:iNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aNe(t,e,n=!0){const r=H(t,"input","stringSplit","string"),s=H(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const i={skipEmpty:n},o={input:r,delimiter:s},a=re.runKernel(BO,o,i);return{indices:a[0],values:a[1],shape:a[2]}}const lNe=te({stringSplit_:aNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cNe(t,e){const n=H(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const s={input:n};return re.runKernel(NO,s,r)}const uNe=te({stringToHashBucketFast_:cNe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ANe(t,e,n,r=!0){const s=H(t,"input","staticRegexReplace","string"),i={pattern:e,rewrite:n,replaceGlobal:r};return re.runKernel(yB,{x:s},i)}const dNe=te({staticRegexReplace_:ANe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fNe={fft:jB,ifft:t0,rfft:LB,irfft:dD},hNe={hammingWindow:LBe,hannWindow:iq,frame:oq,stft:zBe},ni={flipLeftRight:KBe,grayscaleToRGB:qBe,resizeNearestNeighbor:lq,resizeBilinear:aq,rgbToGrayscale:JBe,rotateWithOffset:e3e,cropAndResize:WBe,nonMaxSuppression:n3e,nonMaxSuppressionAsync:u3e,nonMaxSuppressionWithScore:d3e,nonMaxSuppressionWithScoreAsync:h3e,nonMaxSuppressionPadded:m3e,nonMaxSuppressionPaddedAsync:y3e,threshold:C3e,transform:B3e},cq={bandPart:E3e,gramSchmidt:k3e,qr:F3e},pNe={absoluteDifference:O3e,computeWeightedLoss:$c,cosineDistance:R3e,hingeLoss:U3e,huberLoss:L3e,logLoss:Q3e,meanSquaredError:z3e,sigmoidCrossEntropy:G3e,softmaxCrossEntropy:q3e},mNe={sparseFillEmptyRows:J3e,sparseReshape:eNe,sparseSegmentMean:nNe,sparseSegmentSum:sNe},gNe={stringNGrams:oNe,stringSplit:lNe,stringToHashBucketFast:uNe,staticRegexReplace:dNe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yNe=new Map,xNe=new Map;class am{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Bo{constructor(){this.classNameMap={}}static getMap(){return Bo.instance==null&&(Bo.instance=new Bo),Bo.instance}static register(e){Bo.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Fe(t,e,n){M(t.className!=null,()=>"Class being registered does not have the static className property defined."),M(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),M(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return Bo.register(t),yNe.set(s,t),xNe.set(t,s),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mA extends am{minimize(e,n=!1,r){const{value:s,grads:i}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(o)}else this.applyGradients(i);return ft(i),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return V2e(e,n)}dispose(){this.iterations_!=null&&ft(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:at(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(mA,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uq extends mA{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=re.registeredVariables[r],o=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:Ae(()=>jt(i).variable(o))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:Ae(()=>jt(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;Ae(()=>{const u=Ee(ne(l,this.rho),ne(fn(a),1-this.rho)),A=ne(ze(ss(Ee(c,this.epsilon)),ss(Ee(l,this.epsilon))),a),d=Ee(ne(c,this.rho),ne(fn(A),1-this.rho));l.assign(u),c.assign(d);const f=Ee(ne(A,-this.learningRate),i);i.assign(f)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(ft(this.accumulatedGrads.map(e=>e.variable)),ft(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Aq extends mA{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=re.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:Ae(()=>rm(i.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[s].variable;Ae(()=>{const l=Ee(a,fn(o));a.assign(l);const c=Ee(ne(ze(o,ss(Ee(l,re.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&ft(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dq extends mA{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Ae(()=>{this.accBeta1=at(n).variable(),this.accBeta2=at(r).variable()}),s==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Ae(()=>{const r=We(1,this.accBeta1),s=We(1,this.accBeta2);n.forEach((i,o)=>{const a=re.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:Ae(()=>jt(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${i}/v`,variable:Ae(()=>jt(a).variable(l))});const c=Array.isArray(e)?e[o].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,A=this.accumulatedSecondMoment[o].variable,d=Ee(ne(u,this.beta1),ne(c,1-this.beta1)),f=Ee(ne(A,this.beta2),ne(fn(c),1-this.beta2)),h=ze(d,r),m=ze(f,s);u.assign(d),A.assign(f);const g=Ee(ne(ze(h,Ee(ss(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(ne(this.accBeta1,this.beta1)),this.accBeta2.assign(ne(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&ft(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&ft(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Ae(()=>{this.accBeta1.assign(mc(this.beta1,this.iterations_+1)),this.accBeta2.assign(mc(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fq extends mA{static get className(){return"Adamax"}constructor(e,n,r,s=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Ae(()=>{this.iteration=at(0).variable(),this.accBeta1=at(n).variable()}),s==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Ae(()=>{const r=We(1,this.accBeta1),s=ze(-this.learningRate,Ee(ne(this.iteration,this.decay),1));n.forEach((i,o)=>{const a=re.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:jt(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${i}/v`,variable:jt(a).variable(l)});const c=Array.isArray(e)?e[o].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,A=this.accumulatedWeightedInfNorm[o].variable,d=Ee(ne(u,this.beta1),ne(c,1-this.beta1)),f=ne(A,this.beta2),h=vr(c),m=Fc(f,h);u.assign(d),A.assign(m);const g=Ee(ne(ze(s,r),ze(d,Ee(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(Ee(this.iteration,1)),this.accBeta1.assign(ne(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&ft(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&ft(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SD extends mA{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const o=re.registeredVariables[r];Ae(()=>{const a=Ee(ne(this.c,i),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Qr(at(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hq extends SD{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=at(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=re.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:Ae(()=>jt(i).variable(!1))});const o=this.accumulations[s].variable,a=Array.isArray(e)?e[s].tensor:e[r];a!=null&&Ae(()=>{let l;const c=Ee(ne(this.m,o),a);this.useNesterov?l=Ee(ne(this.c,Ee(a,ne(c,this.m))),i):l=Ee(ne(this.c,c),i),o.assign(c),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&ft(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pq extends mA{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,s==null&&(this.epsilon=re.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=re.registeredVariables[r],o=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:Ae(()=>jt(i).variable(o))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:Ae(()=>jt(i).variable(o))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:Ae(()=>jt(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;Ae(()=>{const u=Ee(ne(l,this.decay),ne(fn(a),1-this.decay));if(this.centered){const A=this.accumulatedMeanGrads[s].variable,d=Ee(ne(A,this.decay),ne(a,1-this.decay)),f=ze(ne(a,this.learningRate),ss(We(u,Ee(fn(d),this.epsilon)))),h=Ee(ne(c,this.momentum),f);l.assign(u),A.assign(d),c.assign(h);const m=We(i,h);i.assign(m)}else{const A=Ee(ne(l,this.decay),ne(fn(a),1-this.decay)),d=Ee(ne(c,this.momentum),ze(ne(a,this.learningRate),ss(Ee(A,this.epsilon))));l.assign(A),c.assign(d);const f=We(i,d);i.assign(f)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&ft(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&ft(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&ft(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vNe=[uq,Aq,dq,fq,hq,pq,SD];function bNe(){for(const t of vNe)Fe(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wNe="model",CNe=".json",SNe=".weights.bin";function b6(t){return new Promise(e=>setTimeout(e)).then(t)}class qd{constructor(e){if(!he().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(qd.URL_SCHEME)&&(e=e.slice(qd.URL_SCHEME.length)),(e==null||e.length===0)&&(e=wNe),this.modelJsonFileName=e+CNe,this.weightDataFileName=e+SNe}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=Oa.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=WK(e,s),o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),a=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=o,await b6(()=>a.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await b6(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:iv(e)}}}}qd.URL_SCHEME="downloads://";class BNe{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{const i=JSON.parse(s.target.result),o=i.modelTopology;if(o==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const l=OO(i,c=>this.loadWeights(c));e(l)},r.onerror=s=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const o of e)n.push(...o.weights),r.push(...o.paths);const s=this.checkManifestAndWeightFiles(e),i=r.map(o=>this.loadWeightsFile(o,s[o]));return Promise.all(i).then(o=>[n,o])}loadWeightsFile(e,n){return new Promise((r,s)=>{const i=new FileReader;i.onload=o=>{const a=o.target.result;r(a)},i.onerror=o=>s(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>y6(i.name)),s={};for(const i of e)i.paths.forEach(o=>{const a=y6(o);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);s[o]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const NNe=t=>he().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(qd.URL_SCHEME)?ENe(t.slice(qd.URL_SCHEME.length)):null;jn.registerSaveRouter(NNe);function ENe(t="model"){return new qd(t)}function INe(t){return new BNe(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w6(t,e,n,r){o(t),n=n??0,r=r??1,a(n,r);let s=0;const i=l=>(l.then(c=>{const u=n+ ++s/t.length*(r-n);return e(u),c}),l);function o(l){M(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){M(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),M(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),M(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function mq(t,e){e==null&&(e={});const n=e.fetchFunc==null?he().platform.fetch:e.fetchFunc,r=t.map(A=>n(A,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?await Promise.all(r):await w6(r,e.onProgress,0,.5)).map(A=>A.arrayBuffer());return e.onProgress==null?await Promise.all(a):await w6(a,e.onProgress,.5,1)}function kNe(t,e){var n;const r=e.fetchFunc==null?he().platform.fetch:e.fetchFunc;let s=0,i;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async o=>{for(var a;s<t.length;){i||(i=(await r(t[s],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:c}=await i.read();if(l){s++,i=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,s/t.length);continue}o.enqueue(c);return}o.close()}})}async function TNe(t,e="",n,r){return gq(o=>mq(o,{requestInit:r}))(t,e,n)}function gq(t){return async(e,n="",r)=>{const s=e.map(()=>!1),i={},o=r!=null?r.map(()=>!1):[],a=[];if(e.forEach((f,h)=>{let m=0;f.weights.forEach(g=>{const y="quantization"in g?g.quantization.dtype:g.dtype,x=zd[y]*ye(g.shape),v=()=>{s[h]=!0,i[h]==null&&(i[h]=[]),i[h].push({manifestEntry:g,groupOffset:m,sizeBytes:x})};r!=null?r.forEach((b,w)=>{b===g.name&&(v(),o[w]=!0)}):v(),a.push(g.name),m+=x})}),!o.every(f=>f)){const f=r.filter((h,m)=>!o[m]);throw new Error(`Could not find weights in manifest with names: ${f.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}const l=s.reduce((f,h,m)=>(h&&f.push(m),f),[]),c=[];l.forEach(f=>{e[f].paths.forEach(h=>{const m=n+(n.endsWith("/")?"":"/")+h;c.push(m)})});const u=await t(c),A={};let d=0;return l.forEach(f=>{const h=e[f].paths.length,m=new Oa(u.slice(d,d+h));i[f].forEach(y=>{const x=m.slice(y.groupOffset,y.groupOffset+y.sizeBytes),v=QK(x,[y.manifestEntry]);for(const b in v)A[b]=v[b]}),d+=h}),A}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FNe="application/octet-stream",$Ne="application/json";class BD{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(M(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=he().platform.fetch,M(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&M(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=WK(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:$Ne}),"model.json"),e.weightData!=null){const o=Oa.join(e.weightData);n.body.append("model.weights.bin",new Blob([o],{type:FNe}),"model.weights.bin")}const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:iv(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return OO(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=Dk(e.weightsManifest),s=()=>kNe(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=_Ne(n),i=this.weightPathPrefix||r,o=[],a=[];for(const l of e)for(const c of l.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(c)):o.push(i+c+s);return this.weightUrlConverter&&o.push(...await Promise.all(a)),o}async loadWeights(e){const n=await this.getWeightUrls(e),r=Dk(e),s=await mq(n,this.loadOptions);return[r,s]}}BD.URL_SCHEME_REGEX=/^https?:\/\//;function _Ne(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),s=n>e?t.substring(n):"";return[r+"/",s]}function Qk(t){return t.match(BD.URL_SCHEME_REGEX)!=null}const yq=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>Qk(r)):n=Qk(t),n)return ND(t,e)}return null};jn.registerSaveRouter(yq);jn.registerLoadRouter(yq);function ND(t,e){return new BD(t,e)}function ONe(t,e){return ND(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O4{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class xq{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class DNe{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function RNe(t,e,n,r){const s=arguments;return new DNe(vq(...s))}function vq(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new O4(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new O4({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new O4({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function PNe(t){return new xq(t)}function UNe(t){return new xq(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bq=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:Oa,browserFiles:INe,browserHTTPRequest:ONe,concatenateArrayBuffers:VK,copyModel:Lbe,decodeWeights:QK,decodeWeightsStream:zK,encodeWeights:Ok,fromMemory:RNe,fromMemorySync:vq,getLoadHandlers:Nbe,getModelArtifactsForJSON:OO,getModelArtifactsForJSONSync:GK,getModelArtifactsInfoForJSON:iv,getSaveHandlers:KK,getWeightSpecs:Dk,http:ND,isHTTPScheme:Qk,listModels:Ube,loadWeights:TNe,moveModel:Mbe,registerLoadRouter:Bbe,registerSaveRouter:Sbe,removeModel:jbe,weightsLoaderFactory:gq,withSaveHandler:PNe,withSaveHandlerSync:UNe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let OA;function jNe(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,i=!1,o=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(Ek(Bk,re.backendName)!=null){const h={pixels:t},m={numChannels:e};return re.runKernel(Bk,h,m)}const[c,u]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let A;if(o)A=t.getContext("2d").getImageData(0,0,c,u).data;else if(r||n)A=t.data;else if(i||s||a){if(OA==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")OA=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else OA=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});OA.canvas.width=c,OA.canvas.height=u,OA.drawImage(t,0,0,c,u),A=OA.getImageData(0,0,c,u).data}let d;if(e===4)d=new Int32Array(A);else{const h=c*u;d=new Int32Array(h*e);for(let m=0;m<h;m++)for(let g=0;g<e;++g)d[m*e+g]=A[m*4+g]}return KX(d,[u,c,e],"int32")}function LNe(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);const e=t.rank===2?1:t.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}async function wq(t,e){let n=H(t,"img","toPixels");if(!(t instanceof qt)){const c=n;n=Ue(c,"int32"),c.dispose()}LNe(n);const[r,s]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2],o=await n.data(),a=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(s*r*4);for(let c=0;c<r*s;++c){const u=[0,0,0,255];for(let d=0;d<i;d++){const f=o[c*i+d];if(n.dtype==="float32"){if(f<0||f>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${f}.`)}else if(n.dtype==="int32"&&(f<0||f>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${f}.`);i===1?(u[0]=f*a,u[1]=f*a,u[2]=f*a):u[d]=f*a}const A=c*4;l[A+0]=Math.round(u[0]),l[A+1]=Math.round(u[1]),l[A+2]=Math.round(u[2]),l[A+3]=Math.round(u[3])}return n!==t&&n.dispose(),l}const Cq=te({fromPixels_:jNe});function ED(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(ye(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,i=s[s.length-1];let o=1;for(let A=0;A<s.length-1;++A)o*=s[A];const a=t.shape,l=s.slice();l.pop();let c=1;for(let A=i;A<n;++A)c*=a[A],l.push(a[A]);const u=[...ot(t.shape).map(A=>A/c),1].slice(0,i);return[l,o,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hk=-2,MNe=-1;function ID(t,e,n){const r=t.shape.length;M(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),M(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)M(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function QNe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function kD(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function Sq(t,e,n,r){const s=[...t];for(let i=s.length;i<r.length;i++)s.push(1);for(let i=0;i<n;i++)i===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function Bq(t,e,n){return n<=t?n:n-(e-1)}function Nq(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function HNe(t,e,n,r,s,i,o,a,l){const c=t.length;let u=new Array(c),A=new Array(c),d=new Array(c);if(e.length&&n>0){const f=e[0],h=n+1;u=Eq(o,f,h,r,t),A=Iq(a,f,h,s,t),d=Sq(i,f,h,t)}else for(let f=0;f<c;f++)u[f]=Tq(o,r,i,t,f,l),A[f]=Fq(a,s,i,t,f,l),d[f]=kq(i,f,l);return{begin:u,end:A,strides:d}}function Eq(t,e,n,r,s){const i=[...s],o=Nq(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=0;else{const l=Bq(e,n,a);let c=r[l];t&1<<l&&(c=0),i[a]=c}return i}function Iq(t,e,n,r,s){const i=[...s],o=Nq(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{const l=Bq(e,n,a);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),i[a]=c}for(let a=0;a<i.length;a++){const l=s[a];i[a]<0&&(i[a]+=l),i[a]=Md(0,i[a],s[a])}return i}function kq(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function Tq(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),o=Md(0,o,l-1),o}function Fq(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),a>0?o=Md(0,o,l):o=Md(-1,o,l-1),o}function TD(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function FD(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function VB(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(o=>{M(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(s).fill(-1):typeof n=="number"?i=[n,...new Array(s-1).fill(-1)]:n.length<s?i=n.concat(new Array(s-n.length).fill(-1)):i=n,i=i.map((o,a)=>o>=0?o:(M(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function $D(t,e,n,r,s,i,o,a,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const A={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let v=0;v<A.dims;v++)u&&1<<v&a&&A.numAddAxisAfterEllipsis++,1<<v&o&&(u=!0);u||(A.ellipsisMask|=1<<A.dims,A.dims++);const d={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};zNe(A,d);let f=!0,h=!0,m=!0;const g=[],y=[];for(let v=0;v<t.length;++v){if(d.strides[v]===0)throw Error(`strides[${v}] must be non-zero`);const b=!!(d.shrinkAxisMask&1<<v),w=t[v];if(w===-1){g.push(b?1:-1);continue}const C=[d.beginMask&1<<v,d.endMask&1<<v],B=[d.strides[v]>0?0:-1,d.strides[v]>0?w:w-1];if(b&&d.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&d.strides[v]===1;const S=!!(d.beginMask&1<<v&&d.endMask&1<<v);if(d.beginValid&&d.endValid){if(b){const U=d.begin[v]<0?w+d.begin[v]:d.begin[v];if(d.begin[v]=U,d.end[v]=d.begin[v]+1,U<0||U>=w)throw Error(`slice index ${d.begin[v]} of dimension ${v} out of bounds.`)}else d.begin[v]=C6(d.begin[v],0,d.strides[v],w,C,B),d.end[v]=C6(d.end[v],1,d.strides[v],w,C,B);const O=d.strides[v]===1&&d.begin[v]===0&&d.end[v]===w;f=f&&O,h=h&&(v===0&&d.strides[v]===1||O)}else f=f&&d.strides[v]===1&&S,h=h&&(v===0&&d.strides[v]===1||S);let N,k=!1;if(d.beginValid&&d.endValid?(N=d.end[v]-d.begin[v],k=!0):b?(N=1,k=!0):S&&w>=0&&(d.strides[v]<0?N=-w:N=w,k=!0),k){let O;N===0||N<0!=d.strides[v]<0?O=0:O=Math.trunc(N/d.strides[v])+(N%d.strides[v]!==0?1:0),g.push(O)}else g.push(-1)}for(let v=0;v<d.finalShapeGatherIndices.length;++v){const b=d.finalShapeGatherIndices[v];b>=0?y.push(g[b]):b===Hk&&y.push(1)}return{finalShapeSparse:y.filter((v,b)=>d.finalShapeGatherIndices[b]!==Hk),finalShape:y,isIdentity:f,sliceDim0:h,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function zNe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(Hk),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(MNe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function C6(t,e,n,r,s,i){if(s[e])return n>0?i[e]:i[e+1&1];{const o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}}const VNe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:ID,computeFlatOffset:FD,computeOutShape:kD,getNormalizedAxes:HNe,isSliceContinous:TD,maskToAxes:QNe,parseSliceParams:VB,sliceInfo:$D,startForAxis:Tq,startIndicesWithElidedDims:Eq,stopForAxis:Fq,stopIndicesWithElidedDims:Iq,stridesForAxis:kq,stridesWithElidedDims:Sq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WNe{static sgd(e){return new SD(e)}static momentum(e,n,r=!1){return new hq(e,n,r)}static rmsprop(e,n=.9,r=0,s=null,i=!1){return new pq(e,n,r,s,i)}static adam(e=.001,n=.9,r=.999,s=null){return new dq(e,n,r,s)}static adadelta(e=.001,n=.95,r=null){return new uq(e,n,r)}static adamax(e=.002,n=.9,r=.999,s=null,i=0){return new fq(e,n,r,s,i)}static adagrad(e,n=.1){return new Aq(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mf=WNe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GNe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function $q(){return new Promise(t=>GNe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _D(t,e){const n=t[0].length;t.forEach((s,i)=>{M(s.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),M(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,i)=>{for(let o=0;o<n;o++)M(o===e||s[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function Al(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var fa;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(fa||(fa={}));function _q(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const i=n[s],o=r[r.length-n.length+s],a=r[o];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${i} but shape[${s+t}] = ${a}`)}else r[o]=i}return r}function Oq(t){const e={FIRST_DIM_SIZE:fa.FIRST_DIM_SIZE,VALUE_ROWIDS:fa.VALUE_ROWIDS,ROW_LENGTHS:fa.ROW_LENGTHS,ROW_SPLITS:fa.ROW_SPLITS,ROW_LIMITS:fa.ROW_LIMITS,ROW_STARTS:fa.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function Dq(t){return t.length===0?0:t[0]===fa.FIRST_DIM_SIZE?t.length-1:t.length}function Rq(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const i=t[s],o=e[s+1];if(i>=0&&o>=0&&i!==1&&i!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${i} but ragged tensor input.flatValues.shape[${s-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OD=30;function WB(t){return t<=OD?t:wk(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DD(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fv(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const i=e.length;for(let o=0;o<i;++o)s=s.concat([t[o+1]/e[o],e[o]]);s=s.concat(t.slice(i+1))}return s}function hv(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],i=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?i.push(o):s.push(o);r.push(...s),r.push(0),r.push(...i)}return r}function pv(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?s.push(e[i-1]*t[i]):s.push(t[i]/e[i-1]):s.push(t[i]);return s}function RD(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function PD(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GB=1.7580993408473768,KB=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UD=.3275911,jD=.254829592,LD=-.284496736,MD=1.421413741,QD=-1.453152027,HD=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yc(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function Pq(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function Uq(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function jq(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function zD(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function Lq(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function Mq(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const i=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:n,imag:r}}function Qq(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),i=Math.sin(r);return{real:s,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D4="->",KNe=/->/g,S6=",",B6="...";function VD(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(KNe,"").length)/D4.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${D4}").`);const[r,s]=t.split(D4);M(r.indexOf(B6)===-1,()=>`The ellipsis notation ("${B6}") is not supported yet.`);const i=r.split(S6),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let d=0;d<s.length;++d){const f=s[d];if(!i.some(h=>h.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);a.indexOf(f)===-1&&a.push(f)}for(let d=0;d<r.length;++d){const f=r[d];a.indexOf(f)===-1&&f!==S6&&a.push(f)}const l=new Array(i.length);for(let d=0;d<o;++d){if(new Set(i[d].split("")).size!==i[d].length)throw new Error(`Found duplicate axes in input component ${i[d]}. Support for duplicate axes in input is not implemented yet.`);l[d]=[];for(let f=0;f<i[d].length;++f)l[d].push(a.indexOf(i[d][f]))}const c=a.length,u=s.length,A=[];for(let d=u;d<c;++d)A.push(d);return{allDims:a,summedDims:A,idDims:l}}function WD(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function GD(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const i=n[s].shape;for(let o=0;o<e[s].length;++o)r[e[s][o]]===void 0?r[e[s][o]]=i[o]:M(r[e[s][o]]===i[o],()=>`Expected dimension ${r[e[s][o]]} at axis ${o} of input shaped ${JSON.stringify(i)}, but got dimension ${i[o]}`)}}function KD(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let o=0;o<s;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const a=n[o],l=XNe(e,a);for(const c of l)i.indexOf(c)===-1&&(r[o].push(c),i.push(c))}return{path:n,steps:r}}function XD(t){return t.every((e,n)=>e===n)}function XNe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function qD(t,e,n=0){let r=[];if(typeof e=="number")M(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);M(s<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[i]=t.shape[n]-o}M(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hq(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function zq(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function Vq(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wq(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function Gq(t,e){return`size ${t} must be non-negative, not ${e}`}function Kq(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Xq(t,e){const n=ye(t),r=ye(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function qq(t,e){const n=ye(t),r=ye(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zk(){return"segment ids must be >= 0"}function Yq(){return"segment ids are not increasing"}function Jq(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function Zq(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eY(t,e){let n=!1,r;for(t<=OD?(r=t,n=!0):r=wk(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=wk(t,r+1);return r}function tY(t,e,n){const r=[],s=t.length;for(let i=0;i<s;i++)i!==e?r.push(t[i]):r.push(n);return r}function YD(t,e,n,r){const s=e.shape.length,i=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let A=0;A<r;++A)if(t.shape[A]!==e.shape[A])throw new Error(`x.shape[${A}]: ${t.shape[A]} should be equal to indices.shape[${A}]: ${e.shape[A]}.`);const o=t.shape[n],a=[];let l=1,c=1,u=1;for(let A=0;A<r;++A)a.push(t.shape[A]),l*=t.shape[A];for(let A=r;A<n;A++)a.push(t.shape[A]),c*=t.shape[A];for(let A=r;A<s;A++)a.push(e.shape[A]);for(let A=n+1;A<i;A++)a.push(t.shape[A]),u*=t.shape[A];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:o,outputShape:a}}const qNe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:YD,computeOutShape:tY,segOpComputeOptimalWindowSize:eY},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xc(t){try{return t.map(e=>Vu(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function nY(t){return t.map(e=>Ou(e))}const YNe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:jD,ERF_A2:LD,ERF_A3:MD,ERF_A4:QD,ERF_A5:HD,ERF_P:UD,PARALLELIZE_THRESHOLD:OD,get RowPartitionType(){return fa},SELU_SCALE:KB,SELU_SCALEALPHA:GB,applyActivation:HB,assertAndGetBroadcastShape:bt,assertAxesAreInnerMostDims:as,assertParamsConsistent:_D,assignToTypedArray:Lq,axesAreInnerMostDims:zO,calculateShapes:hf,checkEinsumDimSizes:GD,checkPadOnDimRoundingMode:Hs,combineLocations:IX,combineRaggedTensorToTensorShapes:_q,complexWithEvenIndex:Uq,complexWithOddIndex:jq,computeConv2DInfo:Vr,computeConv3DInfo:dA,computeDefaultPad:PO,computeDilation2DInfo:ov,computeOptimalWindowSize:WB,computeOutAndReduceShapes:Wr,computeOutShape:Al,computePool2DInfo:Xo,computePool3DInfo:kc,convertConv2DDataFormat:Tc,decodeEinsumEquation:VD,eitherStridesOrDilationsAreOne:os,expandShapeToKeepDim:or,exponent:Qq,exponents:Mq,fromStringArrayToUint8:nY,fromUint8ToStringArray:xc,getAxesPermutation:zn,getBroadcastDims:lp,getComplexWithIndex:zD,getEinsumComputePath:KD,getEinsumPermutation:WD,getFusedBiasGradient:QB,getFusedDyActivation:MB,getImageCenter:DD,getInnerMostAxes:ar,getPermuted:hv,getRaggedRank:Dq,getReductionAxes:Fr,getReshaped:fv,getReshapedPermuted:pv,getRowPartitionTypesHelper:Oq,getSliceBeginCoords:RD,getSliceSize:PD,getSparseFillEmptyRowsIndicesDenseShapeMismatch:Hq,getSparseFillEmptyRowsNegativeIndexErrorMessage:zq,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:Vq,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:Kq,getSparseReshapeInputOutputMismatchErrorMessage:qq,getSparseReshapeInputOutputMultipleErrorMessage:Xq,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:Wq,getSparseReshapeNegativeOutputDimErrorMessage:Gq,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:Zq,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:zk,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:Yq,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:Jq,getUndoAxesPermutation:fA,isIdentityPermutation:XD,log:L1e,mergeRealAndImagArrays:yc,prepareAndValidate:ED,prepareSplitSize:qD,segment_util:qNe,shouldFuse:zB,slice_util:VNe,splitRealAndImagArrays:Pq,stridesOrDilationsArePositive:Gd,tupleValuesAreOne:Ku,upcastType:Di,validateDefaultValueShape:Rq,validateInput:hD,validateUpdateShape:XX,warn:Ji},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */bNe();/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JNe=he();JNe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var hi;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(hi||(hi={}));var N6;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(N6||(N6={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZNe={};function rY(t){return ZNe[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T(t,e,n,r,s){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const a=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd,c=a<0?e.inputNames.length+a:a;if(i.type==="tensor")return Zr(e.inputNames[c],n,r,s);if(i.type==="tensors"){const d=e.inputs.slice(a,l);return e.inputNames.slice(a,l).filter((h,m)=>{var g;return((g=d[m])===null||g===void 0?void 0:g.op)!=="NoOp"}).map(h=>Zr(h,n,r,s))}const u=Zr(e.inputNames[c],n,r,s),A=u.dataSync();return i.type==="number"?A[0]:Uo(u.shape,A)}const o=e.attrParams[t];return o&&o.value}function Zr(t,e,n,r){const[s,i]=pi(t,n);if(r!=null){const a=r.getHashTableHandleByName(s);if(a!=null)return a}const o=n.currentContextIds.find(a=>!!e[A2(s,a)]);return o!==void 0?e[A2(s,o)][i]:void 0}function E6(t,e,n){return e[A2(t,n.currentContextId)]}function Hl(t,e){const[n,r,s]=pi(t,e);return[A2(n,e&&e.currentContextId),r,s]}function A2(t,e){return e?`${t}-${e}`:t}function pi(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const i=e.parseNodeNameCache.get(t);if(i!=null)return i}const r=t.split(":");let s;if(r.length===1)s=[t,0,void 0];else{const i=r[0],o=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);s=[i,a,o]}return n&&e.parseNodeNameCache.set(t,s),s}function ow(t,e,n){let r=T("pad",t,e,n);if(r==="explicit"){r=T("explicitPaddings",t,e,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)s[i][0]=r[i*2],s[i][1]=r[i*2+1];return s}return r}function zl(t){return t.kept?t:oc(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e4e=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],t4e=Object.freeze(Object.defineProperty({__proto__:null,json:e4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n4e=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],r4e=Object.freeze(Object.defineProperty({__proto__:null,json:n4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s4e=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],i4e=Object.freeze(Object.defineProperty({__proto__:null,json:s4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o4e=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],a4e=Object.freeze(Object.defineProperty({__proto__:null,json:o4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l4e=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],c4e=Object.freeze(Object.defineProperty({__proto__:null,json:l4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u4e=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],A4e=Object.freeze(Object.defineProperty({__proto__:null,json:u4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d4e=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],f4e=Object.freeze(Object.defineProperty({__proto__:null,json:d4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h4e=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],p4e=Object.freeze(Object.defineProperty({__proto__:null,json:h4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m4e=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],g4e=Object.freeze(Object.defineProperty({__proto__:null,json:m4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y4e=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],x4e=Object.freeze(Object.defineProperty({__proto__:null,json:y4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v4e=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],b4e=Object.freeze(Object.defineProperty({__proto__:null,json:v4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w4e=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],C4e=Object.freeze(Object.defineProperty({__proto__:null,json:w4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S4e=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],B4e=Object.freeze(Object.defineProperty({__proto__:null,json:S4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N4e=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],E4e=Object.freeze(Object.defineProperty({__proto__:null,json:N4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I4e=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],k4e=Object.freeze(Object.defineProperty({__proto__:null,json:I4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T4e=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],F4e=Object.freeze(Object.defineProperty({__proto__:null,json:T4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $4e=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],_4e=Object.freeze(Object.defineProperty({__proto__:null,json:$4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O4e=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],D4e=Object.freeze(Object.defineProperty({__proto__:null,json:O4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R4e=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],P4e=Object.freeze(Object.defineProperty({__proto__:null,json:R4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I6{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[t4e,r4e,i4e,a4e,c4e,A4e,f4e,p4e,g4e,x4e,b4e,C4e,B4e,E4e,k4e,F4e,_4e,D4e,P4e],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(e,n={}){const r=e.node,s=[],i=[],o=[],a=r.reduce((m,g)=>(m[g.name]=this.mapNode(g),g.op.startsWith("Placeholder")?s.push(m[g.name]):g.op==="Const"?i.push(m[g.name]):(g.input==null||g.input.length===0)&&o.push(m[g.name]),m),{});let l=[];const c=[];let u={},A={};n!=null&&(u=this.mapSignatureEntries(n.inputs),A=this.mapSignatureEntries(n.outputs));const d=Object.keys(a);d.forEach(m=>{const g=a[m];g.inputNames.forEach((y,x)=>{const[v,,b]=Hl(y),w=a[v];if(w.outputs!=null){const C=w.outputs.indexOf(b);if(C!==-1){const B=`${v}:${C}`;g.inputNames[x]=B}}g.inputs.push(w),w.children.push(g)})}),Object.keys(A).length===0?d.forEach(m=>{const g=a[m];g.children.length===0&&c.push(g)}):Object.keys(A).forEach(m=>{const[g]=Hl(m),y=a[g];y!=null&&(y.signatureKey=A[m],c.push(y))}),Object.keys(u).length>0?Object.keys(u).forEach(m=>{const[g]=Hl(m),y=a[g];y&&(y.signatureKey=u[m],l.push(y))}):l=s;let f={};e.library!=null&&e.library.function!=null&&(f=e.library.function.reduce((m,g)=>(m[g.signature.name]=this.mapFunction(g),m),{}));const h={nodes:a,inputs:l,outputs:c,weights:i,placeholders:s,signature:n,functions:f};return o.length>0&&(h.initNodes=o),h}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=rY(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((s,i)=>(s[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},s),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((s,i)=>{const o=i.type;let a;switch(i.type){case"string":a=Vk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Vk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=Jk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Jk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=Gk(e.attr,i.tfName,i.defaultValue||0),a===void 0&&i.tfDeprecatedName&&(a=Gk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=Yk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Yk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=Wk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Wk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=eT(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=eT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=qk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=qk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=Zk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Zk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=Kk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Kk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=Xk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Xk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=k6(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=k6(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return s[i.name]={value:a,type:o},s},{})),r}mapFunction(e){const n=e.nodeDef,r=[],s=[];let i={};n!=null&&(i=n.reduce((A,d)=>(A[d.name]=this.mapNode(d),d.op==="Const"&&s.push(A[d.name]),A),{}));const o=[],a=[];e.signature.inputArg.forEach(A=>{const[d]=Hl(A.name),f={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:JD(A.type),type:"dtype"}},children:[]};f.signatureKey=A.name,o.push(f),i[d]=f}),Object.keys(i).forEach(A=>{const d=i[A];d.inputNames.forEach((f,h)=>{const[m,,g]=Hl(f),y=i[m];if(y.outputs!=null){const x=y.outputs.indexOf(g);if(x!==-1){const v=`${m}:${x}`;d.inputNames[h]=v}}d.inputs.push(y),y.children.push(d)})});const c=e.ret;e.signature.outputArg.forEach(A=>{const[d,f]=Hl(c[A.name]),h=i[d];h!=null&&(h.defaultOutput=f,a.push(h))});const u=this.mapArgsToSignature(e);return{nodes:i,inputs:o,outputs:a,weights:s,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function U4e(t){const e=he().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function sY(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):U4e(t);return e?n:n.toLowerCase()}function Vk(t,e,n,r=!1){const s=t[e];return s!=null?sY(s.s,r):n}function Wk(t,e,n){const r=t[e];return r?r.b:n}function Gk(t,e,n){const r=t[e]||{},s=r.i!=null?r.i:r.f!=null?r.f:n;return typeof s=="number"?s:parseInt(s,10)}function JD(t){switch(typeof t=="string"&&(t=hi[t]),t){case hi.DT_FLOAT:case hi.DT_HALF:return"float32";case hi.DT_INT32:case hi.DT_INT64:case hi.DT_INT8:case hi.DT_UINT8:return"int32";case hi.DT_BOOL:return"bool";case hi.DT_DOUBLE:return"float32";case hi.DT_STRING:return"string";case hi.DT_COMPLEX64:case hi.DT_COMPLEX128:return"complex64";default:return null}}function k6(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function Kk(t,e,n){const r=t[e];return r&&r.type?JD(r.type):n}function Xk(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(s=>JD(s)):n}function iY(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function qk(t,e,n){const r=t[e];return r&&r.shape?iY(r.shape):n}function Yk(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):n}function Jk(t,e,n,r=!1){const s=t[e];return s&&s.list&&s.list.s?s.list.s.map(i=>sY(i,r)):n}function Zk(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(s=>iY(s)):n}function eT(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j4e{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(s=>this.getInput(s)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((s,i)=>(s[i]=this.getAttr(i),s),{}))}getInput(e){return Zr(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return Zr(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return Gk(this.node.rawAttrs,e,n);if(r.s!=null)return Vk(this.node.rawAttrs,e,n);if(r.b!=null)return Wk(this.node.rawAttrs,e,n);if(r.shape!=null)return qk(this.node.rawAttrs,e,n);if(r.type!=null)return Kk(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return Yk(this.node.rawAttrs,e,n);if(r.list.s!=null)return Jk(this.node.rawAttrs,e,n);if(r.list.shape!=null)return Zk(this.node.rawAttrs,e,n);if(r.list.b!=null)return eT(this.node.rawAttrs,e,n);if(r.list.type!=null)return Xk(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ls=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:jK,abs:vr,acos:rX,acosh:sX,add:Ee,addN:nwe,all:RO,any:c2,argMax:ap,argMin:iX,asin:oX,asinh:aX,atan:lX,atan2:cX,atanh:uX,avgPool:CB,avgPool3d:AX,basicLSTMCell:Bwe,batchNorm:av,batchNorm2d:dX,batchNorm3d:fX,batchNorm4d:hX,batchToSpaceND:SB,bincount:pX,bitwiseAnd:Owe,booleanMaskAsync:mBe,broadcastArgs:Rwe,broadcastTo:$h,buffer:St,cast:Ue,ceil:mX,clipByValue:oi,clone:oc,complex:Wu,concat:qn,concat1d:gX,concat2d:yX,concat3d:xX,concat4d:vX,conv1d:UO,conv2d:Xu,conv2dTranspose:LO,conv3d:bX,conv3dTranspose:CX,cos:BB,cosh:MO,cosineWindow:yD,cumprod:u2,cumsum:QO,denseBincount:Lk,depthToSpace:SX,depthwiseConv2d:lv,diag:i2e,dilation2d:BX,div:ze,divNoNan:NX,dot:EX,dropout:eq,einsum:Jf,elu:cv,enclosingPowerOfTwo:tq,ensureShape:p2e,equal:Ea,erf:HO,euclideanNorm:TX,exp:Ms,expandDims:wr,expm1:FX,eye:VO,fft:jB,fill:rm,floor:Av,floorDiv:DO,fused:UBe,gather:dv,gatherND:NBe,greater:Mi,greaterEqual:hA,ifft:t0,imag:NB,image:ni,inTopKAsync:TBe,irfft:dD,isFinite:$X,isInf:_X,isNaN:OX,leakyRelu:EB,less:Jy,lessEqual:Af,linalg:cq,linspace:M2e,localResponseNormalization:DX,log:so,log1p:IB,logSigmoid:RX,logSoftmax:WO,logSumExp:kB,logicalAnd:ml,logicalNot:TB,logicalOr:GO,logicalXor:PX,losses:pNe,lowerBound:rCe,matMul:$t,max:jo,maxPool:FB,maxPool3d:UX,maxPoolWithArgmax:aCe,maximum:Fc,mean:Kn,meshgrid:uCe,min:Yy,minimum:Xd,mirrorPad:jX,mod:LX,moments:$B,movingAverage:xBe,mul:ne,multiRNNCell:mCe,multinomial:yCe,neg:In,norm:uv,notEqual:cp,oneHot:XO,ones:Ei,onesLike:io,op:te,outerProduct:CCe,pad:pA,pad1d:NCe,pad2d:ICe,pad3d:TCe,pad4d:$Ce,pool:MX,pow:mc,prelu:OB,print:nX,prod:QX,raggedGather:LCe,raggedRange:QCe,raggedTensorToTensor:zCe,rand:WCe,randomGamma:dSe,randomNormal:rD,randomStandardNormal:pSe,randomUniform:ff,randomUniformInt:ySe,range:up,real:Zy,reciprocal:zX,relu:wl,relu6:sD,reshape:oe,reverse:zo,reverse1d:BSe,reverse2d:ESe,reverse3d:kSe,reverse4d:FSe,rfft:LB,round:iD,rsqrt:oD,scalar:at,scatterND:bBe,searchSorted:KO,selu:aD,separableConv2d:lD,setdiff1dAsync:PSe,sigmoid:ba,sign:VX,signal:hNe,sin:cD,sinh:uD,slice:ct,slice1d:RB,slice2d:AD,slice3d:PB,slice4d:e0,softmax:UB,softplus:sm,spaceToBatchND:_B,sparse:mNe,sparseToDense:SBe,spectral:fNe,split:Oi,sqrt:ss,square:fn,squaredDifference:fD,squeeze:Wn,stack:Ri,step:im,stridedSlice:WX,string:gNe,sub:We,sum:Je,tan:GX,tanh:Kd,tensor:va,tensor1d:mr,tensor2d:Du,tensor3d:KX,tensor4d:rBe,tensor5d:sBe,tensor6d:iBe,tensorScatterUpdate:aBe,tile:_o,topk:qX,transpose:Ut,truncatedNormal:pD,unique:YX,unsortedSegmentSum:mD,unstack:Vo,upperBound:fBe,variable:JX,where:xs,whereAsync:ZX,zeros:Sr,zerosLike:jt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L4e=(t,e,n,r=ls)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(T("a",t,e,n),T("b",t,e,n))];case"AddN":return[r.addN(T("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(T("a",t,e,n),T("b",t,e,n))];case"Mul":return[r.mul(T("a",t,e,n),T("b",t,e,n))];case"RealDiv":case"Div":return[r.div(T("a",t,e,n),T("b",t,e,n))];case"DivNoNan":return[r.divNoNan(T("a",t,e,n),T("b",t,e,n))];case"FloorDiv":return[r.floorDiv(T("a",t,e,n),T("b",t,e,n))];case"Sub":return[r.sub(T("a",t,e,n),T("b",t,e,n))];case"Minimum":return[r.minimum(T("a",t,e,n),T("b",t,e,n))];case"Maximum":return[r.maximum(T("a",t,e,n),T("b",t,e,n))];case"Pow":return[r.pow(T("a",t,e,n),T("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(T("a",t,e,n),T("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M4e=(t,e,n,r=ls)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(T("x",t,e,n))];case"Acos":return[r.acos(T("x",t,e,n))];case"Acosh":return[r.acosh(T("x",t,e,n))];case"Asin":return[r.asin(T("x",t,e,n))];case"Asinh":return[r.asinh(T("x",t,e,n))];case"Atan":return[r.atan(T("x",t,e,n))];case"Atan2":return[r.atan2(T("x",t,e,n),T("y",t,e,n))];case"Atanh":return[r.atanh(T("x",t,e,n))];case"Ceil":return[r.ceil(T("x",t,e,n))];case"Complex":return[r.complex(T("real",t,e,n),T("imag",t,e,n))];case"Cos":return[r.cos(T("x",t,e,n))];case"Cosh":return[r.cosh(T("x",t,e,n))];case"Elu":return[r.elu(T("x",t,e,n))];case"Erf":return[r.erf(T("x",t,e,n))];case"Exp":return[r.exp(T("x",t,e,n))];case"Expm1":return[r.expm1(T("x",t,e,n))];case"Floor":return[r.floor(T("x",t,e,n))];case"Log":return[r.log(T("x",t,e,n))];case"Log1p":return[r.log1p(T("x",t,e,n))];case"Imag":return[r.imag(T("x",t,e,n))];case"Neg":return[r.neg(T("x",t,e,n))];case"Reciprocal":return[r.reciprocal(T("x",t,e,n))];case"Real":return[r.real(T("x",t,e,n))];case"Relu":return[r.relu(T("x",t,e,n))];case"Round":return[r.round(T("x",t,e,n))];case"Selu":return[r.selu(T("x",t,e,n))];case"Sigmoid":return[r.sigmoid(T("x",t,e,n))];case"Sin":return[r.sin(T("x",t,e,n))];case"Sign":return[r.sign(T("x",t,e,n))];case"Sinh":return[r.sinh(T("x",t,e,n))];case"Softplus":return[r.softplus(T("x",t,e,n))];case"Sqrt":return[r.sqrt(T("x",t,e,n))];case"Square":return[r.square(T("x",t,e,n))];case"Tanh":return[r.tanh(T("x",t,e,n))];case"Tan":return[r.tan(T("x",t,e,n))];case"ClipByValue":return[r.clipByValue(T("x",t,e,n),T("clipValueMin",t,e,n),T("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(T("x",t,e,n))];case"Rsqrt":return[r.rsqrt(Zr(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(T("x",t,e,n),T("alpha",t,e,n))];case"Prelu":return[r.prelu(T("x",t,e,n),T("alpha",t,e,n))];case"IsNan":return[r.isNaN(Zr(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(Zr(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(Zr(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bo(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){M(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const s=t[r],i=e[r];M(s<0||i<0||s===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function T6(t){return!(typeof t=="number"||t.some(e=>e<0))}function lg(t,e,n){let r=tT(t,n);const s=!T6(r);if(s&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&e.forEach(i=>{r=tT(i.shape,r)}),!T6(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function tT(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const s=t[r],i=e[r];if(s>=0&&i>=0&&s!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=s>=0?s:i}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q4e{constructor(e,n,r,s,i,o,a){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=at(0),Qr(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),bo(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,Qr(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,s)=>this.write(r,n[s]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let s=0;s<this.size();s++)e.push(s)}if(e.length===0)return va([],[0].concat(this.elementShape));const r=this.readMany(e);return bo(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Ri(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return va([],[0].concat(this.elementShape));const n=[];for(let s=0;s<this.size();s++)n.push(s);const r=this.readMany(n);return bo(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),qn(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Vo(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const s=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,o=[];Ae(()=>{n=oe(n,[1,r,i]);for(let l=0;l<e.length;++l){const u=[0,l===0?0:s[l-1],0],A=[1,e[l],i];o[l]=oe(ct(n,u,A),this.elementShape)}return o});const a=[];for(let l=0;l<e.length;l++)a[l]=l;this.writeMany(a,o)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yd{get id(){return this.idTensor.id}constructor(e,n,r,s=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);bo(n,i.shape,"TensorList shape mismatch: "),Qr(i)}),this.idTensor=at(0),this.maxNumElements=s,Qr(this.idTensor)}copy(){return new Yd([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);bo(e,this.elementShape,"TensorList shape mismatch: ");const s=lg(this.elementShape,this.tensors,e);return Ae(()=>{const i=this.tensors.map(o=>oe(o,s));return Ri(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=lg(this.elementShape,this.tensors,e),s=this.tensors.pop();return s.kept=!1,bo(s.shape,e,"TensorList shape mismatch: "),oe(s,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(bo(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Qr(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new Yd([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);bo(this.tensors[e].shape,n,"TensorList shape mismatch: ");const s=lg(this.elementShape,this.tensors,n);return oe(this.tensors[e],s)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);bo(this.elementShape,n.shape,"TensorList shape mismatch: "),Qr(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);bo(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const s=lg(this.elementShape,this.tensors,r);return e.length===0?va([],[0].concat(s)):Ae(()=>{const i=e.map(o=>oe(this.tensors[o],s));return Ri(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);bo(this.elementShape,n,"TensorList shape mismatch: ");const r=lg(this.elementShape,this.tensors,n);return this.size()===0?va([],[0].concat(r)):Ae(()=>{const s=this.tensors.map(i=>oe(i,r));return qn(s,0)})}}function H4e(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const s=t.shape.slice(1);bo(s,e,"TensorList shape mismatch: ");const i=Vo(t);return new Yd(i,e,r)}function z4e(t,e,n,r){return new Yd([],t,e,r)}function V4e(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const s=Math.max(...e);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const i=new Yd([],n,t.dtype,r),o=Vo(t,0);return e.forEach((a,l)=>{i.setItem(a,o[l])}),i}function W4e(t,e,n){let r=0;const s=e.map(u=>(r+=u,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),o=tT(i,n),a=r===0?0:t.size/r,l=Ae(()=>{const u=[];t=oe(t,[1,r,a]);for(let A=0;A<e.length;++A){const f=[0,A===0?0:s[A-1],0],h=[1,e[A],a];u[A]=oe(ct(t,f,h),o)}return t.dispose(),u}),c=new Yd([],n,t.dtype,e.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G4e=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=T("thenBranch",t,e,n),s=T("elseBranch",t,e,n),i=T("cond",t,e,n),o=T("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[s].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=T("body",t,e,n),s=T("cond",t,e,n),i=T("args",t,e,n),o=await n.functionMap[s].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),a=i.map(u=>u.id);let l=await o[0].data();o.forEach(u=>{!u.kept&&a.indexOf(u.id)===-1&&u.dispose()});let c=i;for(;l[0];){const u=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const A=c.map(f=>f.id);u.forEach(f=>{!f.kept&&a.indexOf(f.id)===-1&&A.indexOf(f.id)===-1&&f.dispose()});const d=await n.functionMap[s].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await d[0].data(),d.forEach(f=>{!f.kept&&a.indexOf(f.id)===-1&&A.indexOf(f.id)===-1&&f.dispose()})}return c}case"LoopCond":{const r=T("pred",t,e,n);return[zl(r)]}case"Switch":{const r=T("pred",t,e,n);let s=T("data",t,e,n);return s.kept||(s=zl(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=t.inputNames.find(s=>Zr(s,e,n)!==void 0);if(r){const s=Zr(r,e,n);return[zl(s)]}return}case"Enter":{const r=T("frameName",t,e,n),s=T("tensor",t,e,n);return n.enterFrame(r),[zl(s)]}case"Exit":{const r=T("tensor",t,e,n);return n.exitFrame(),[zl(r)]}case"NextIteration":{const r=T("tensor",t,e,n);return n.nextIteration(),[zl(r)]}case"TensorArrayV3":{const r=T("size",t,e,n),s=T("dtype",t,e,n),i=T("elementShape",t,e,n),o=T("dynamicSize",t,e,n),a=T("clearAfterRead",t,e,n),l=T("identicalElementShapes",t,e,n),c=T("name",t,e,n),u=new Q4e(c,s,r,i,l,o,a);return n.addTensorArray(u),[u.idTensor,at(1)]}case"TensorArrayWriteV3":{const r=T("tensorArrayId",t,e,n),s=T("index",t,e,n),i=T("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(s,i),[o.idTensor]}case"TensorArrayReadV3":{const r=T("tensorArrayId",t,e,n),s=T("index",t,e,n);return[n.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=T("tensorArrayId",t,e,n),s=T("indices",t,e,n),i=T("dtype",t,e,n);return[n.getTensorArray(r.id).gather(s,i)]}case"TensorArrayScatterV3":{const r=T("tensorArrayId",t,e,n),s=T("indices",t,e,n),i=T("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(s,i),[o.idTensor]}case"TensorArrayConcatV3":{const r=T("tensorArrayId",t,e,n),s=n.getTensorArray(r.id),i=T("dtype",t,e,n);return[s.concat(i)]}case"TensorArraySplitV3":{const r=T("tensorArrayId",t,e,n),s=T("tensor",t,e,n),i=T("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(i,s),[o.idTensor]}case"TensorArraySizeV3":{const r=T("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return[at(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=T("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=T("tensorListId",t,e,n),s=T("index",t,e,n),i=T("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(s,i),[o.idTensor]}case"TensorListGetItem":{const r=T("tensorListId",t,e,n),s=T("index",t,e,n),i=T("elementShape",t,e,n),o=T("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(s,i,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=T("indices",t,e,n),s=T("tensor",t,e,n),i=T("elementShape",t,e,n),o=T("numElements",t,e,n),a=V4e(s,r,i,o);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=T("elementShape",t,e,n),s=T("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const o=T(i,t,e,n),a=t.op==="TensorListReserve"?-1:o,l=z4e(r,s,o,a);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=T("tensorListId",t,e,n),s=T("indices",t,e,n),i=T("elementShape",t,e,n),o=T("elementDType",t,e,n);return[n.getTensorList(r.id).gather(s,o,i)]}case"TensorListStack":{const r=T("tensorListId",t,e,n),s=T("elementShape",t,e,n),i=T("elementDType",t,e,n),o=T("numElements",t,e,n);return[n.getTensorList(r.id).stack(s,i,o)]}case"TensorListFromTensor":{const r=T("tensor",t,e,n),s=T("elementShape",t,e,n),i=T("elementDType",t,e,n),o=H4e(r,s,i);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=T("tensorListId",t,e,n),s=n.getTensorList(r.id),i=T("dtype",t,e,n),o=T("elementShape",t,e,n);return[s.concat(i,o)]}case"TensorListPushBack":{const r=T("tensorListId",t,e,n),s=T("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(s),[i.idTensor]}case"TensorListPopBack":{const r=T("tensorListId",t,e,n),s=T("elementShape",t,e,n),i=T("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(s,i)]}case"TensorListSplit":{const r=T("tensor",t,e,n),s=T("elementShape",t,e,n),i=T("lengths",t,e,n),o=W4e(r,i,s);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=T("tensorListId",t,e,n),s=n.getTensorList(r.id);return[at(s.size(),"int32")]}case"TensorListResize":{const r=T("tensorListId",t,e,n),s=T("size",t,e,n),o=n.getTensorList(r.id).resize(s);return n.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F6(t,e,n){const[r,s]=T("fusedOps",t,e,n),i=r==="biasadd",o=!i,a=s==="prelu",l=r==="fusedbatchnorm",c=T("numArgs",t,e,n);if(i){if(a&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=T("strides",t,e,n),A=ow(t,e,n),d=T("dataFormat",t,e,n).toUpperCase(),f=T("dilations",t,e,n);let[h,m]=T("args",t,e,n);o&&(m=h,h=void 0);const g=T("leakyreluAlpha",t,e,n);return{stride:u,pad:A,dataFormat:d,dilations:f,biasArg:h,preluArg:m,activationFunc:s,leakyreluAlpha:g}}const K4e=(t,e,n,r=ls)=>{switch(t.op){case"Conv1D":{const s=T("stride",t,e,n),i=T("pad",t,e,n),o=T("dataFormat",t,e,n).toUpperCase(),a=T("dilation",t,e,n);return[r.conv1d(T("x",t,e,n),T("filter",t,e,n),s,i,o,a)]}case"Conv2D":{const s=T("strides",t,e,n),i=ow(t,e,n),o=T("dataFormat",t,e,n).toUpperCase(),a=T("dilations",t,e,n);return[r.conv2d(T("x",t,e,n),T("filter",t,e,n),[s[1],s[2]],i,o,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:s,pad:i,dataFormat:o,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:A}=F6(t,e,n);return[r.fused.conv2d({x:T("x",t,e,n),filter:T("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:A})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:i,dataFormat:o,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:A}=F6(t,e,n);return[r.fused.depthwiseConv2d({x:T("x",t,e,n),filter:T("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:A})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=T("outputShape",t,e,n),i=T("strides",t,e,n),o=ow(t,e,n);return[r.conv2dTranspose(T("x",t,e,n),T("filter",t,e,n),s,[i[1],i[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=T("strides",t,e,n),i=ow(t,e,n),o=T("dilations",t,e,n),a=T("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(T("input",t,e,n),T("filter",t,e,n),[s[1],s[2]],i,a,[o[1],o[2]])]}case"Conv3D":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("dataFormat",t,e,n).toUpperCase(),a=T("dilations",t,e,n);return[r.conv3d(T("x",t,e,n),T("filter",t,e,n),[s[1],s[2],s[3]],i,o,[a[1],a[2],a[3]])]}case"AvgPool":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("kernelSize",t,e,n);return[r.avgPool(T("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i)]}case"MaxPool":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("kernelSize",t,e,n);return[r.maxPool(T("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i)]}case"MaxPoolWithArgmax":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("kernelSize",t,e,n),a=T("includeBatchInIndex",t,e,n),{result:l,indexes:c}=r.maxPoolWithArgmax(T("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i,a);return[l,c]}case"AvgPool3D":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("kernelSize",t,e,n);return[r.avgPool3d(T("x",t,e,n),[o[1],o[2],o[3]],[s[1],s[2],s[3]],i)]}case"MaxPool3D":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("kernelSize",t,e,n);return[r.maxPool3d(T("x",t,e,n),[o[1],o[2],o[3]],[s[1],s[2],s[3]],i)]}case"Dilation2D":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("dilations",t,e,n),a=s[1],l=s[2],c=o[1],u=o[2];return[r.dilation2d(T("x",t,e,n),T("filter",t,e,n),[a,l],i,[c,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X4e=(t,e,n,r=ls)=>{switch(t.op){case"Fill":{const s=T("shape",t,e,n),i=T("dtype",t,e,n),o=T("value",t,e,n);return[r.fill(s,o,i)]}case"LinSpace":{const s=T("start",t,e,n),i=T("stop",t,e,n),o=T("num",t,e,n);return[r.linspace(s,i,o)]}case"Multinomial":{const s=T("logits",t,e,n),i=T("numSamples",t,e,n),o=T("seed",t,e,n);return[r.multinomial(s,i,o)]}case"OneHot":{const s=T("indices",t,e,n),i=T("depth",t,e,n),o=T("onValue",t,e,n),a=T("offValue",t,e,n),l=T("dtype",t,e,n);return[r.oneHot(s,i,o,a,l)]}case"Ones":return[r.ones(T("shape",t,e,n),T("dtype",t,e,n))];case"OnesLike":return[r.onesLike(T("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(T("shape",t,e,n),T("dtype",t,e,n),T("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(T("shape",t,e,n),T("minval",t,e,n),T("maxval",t,e,n),T("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(T("shape",t,e,n),T("minval",t,e,n),T("maxval",t,e,n),T("seed",t,e,n))];case"Range":{const s=T("start",t,e,n),i=T("stop",t,e,n),o=T("step",t,e,n);return[r.range(s,i,o,T("dtype",t,e,n))]}case"TruncatedNormal":{const s=T("shape",t,e,n),i=T("mean",t,e,n),o=T("stdDev",t,e,n),a=T("seed",t,e,n);return[r.truncatedNormal(s,i,o,T("dtype",t,e,n),a)]}case"Zeros":return[r.zeros(T("shape",t,e,n),T("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(T("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R4(t,e,n){const r=T("boxes",t,e,n),s=T("scores",t,e,n),i=T("maxOutputSize",t,e,n),o=T("iouThreshold",t,e,n),a=T("scoreThreshold",t,e,n),l=T("softNmsSigma",t,e,n);return{boxes:r,scores:s,maxOutputSize:i,iouThreshold:o,scoreThreshold:a,softNmsSigma:l}}const q4e=async(t,e,n,r,s=ls)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=R4(t,e,n),A=await s.image.nonMaxSuppressionWithScoreAsync(i,o,a,l,c,u);return[A.selectedIndices,A.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=R4(t,e,n),u=T("padToMaxOutputSize",t,e,n),A=await s.image.nonMaxSuppressionPaddedAsync(i,o,a,l,c,u);return[A.selectedIndices,A.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=R4(t,e,n);return[await s.image.nonMaxSuppressionAsync(i,o,a,l,c)]}case"Where":{const i=s.cast(T("condition",t,e,n),"bool"),o=[await s.whereAsync(i)];return i.dispose(),o}case"ListDiff":return s.setdiff1dAsync(T("x",t,e,n),T("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y4e=(t,e,n,r=ls)=>{switch(t.op){case"LowerBound":{const s=T("sortedSequence",t,e,n),i=T("values",t,e,n);return[r.lowerBound(s,i)]}case"TopKV2":{const s=T("x",t,e,n),i=T("k",t,e,n),o=T("sorted",t,e,n),a=r.topk(s,i,o);return[a.values,a.indices]}case"UpperBound":{const s=T("sortedSequence",t,e,n),i=T("values",t,e,n);return[r.upperBound(s,i)]}case"Unique":{const s=T("x",t,e,n),i=r.unique(s);return[i.values,i.indices]}case"UniqueV2":{const s=T("x",t,e,n),i=T("axis",t,e,n),o=r.unique(s,i);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J4e=(t,e,n,r=ls)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const s=T("default",t,e,n);return[Zr(t.name,e,n)||s];case"Placeholder":return[Zr(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const u=T("x",t,e,n);return[zl(u)]}case"IdentityN":return T("x",t,e,n).map(u=>zl(u));case"Snapshot":const i=T("x",t,e,n);return[zl(i)];case"Shape":return[r.tensor1d(T("x",t,e,n).shape,"int32")];case"ShapeN":return T("x",t,e,n).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(T("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(T("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=T("x",t,e,n),a=T("data",t,e,n),l=T("message",t,e,n),c=T("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<a.length;u++)console.log(Array.prototype.slice.call(a[u].dataSync()).slice(0,c));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z4e{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=at(0),this.tensorMap=new Map,Qr(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return at(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),Ae(()=>{const s=Vo(n),i=r.length,o=s.length;M(i===o,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${o} elements.`);for(let a=0;a<i;a++){const l=r[a],c=s[a];Qr(c),this.tensorMap.set(l,c)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return Ae(()=>{const s=[];for(let i=0;i<r.length;i++){const o=r[i],a=this.findWithDefault(o,n);s.push(a)}return Ri(s)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eEe=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(t.name);if(s!=null)return[s];{const i=T("keyDType",t,e,n),o=T("valueDType",t,e,n),a=new Z4e(i,o);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=T("tableHandle",t,e,n,r),i=T("keys",t,e,n),o=T("values",t,e,n);return[await r.getHashTableById(s.id).import(i,o)]}case"LookupTableFind":case"LookupTableFindV2":{const s=T("tableHandle",t,e,n,r),i=T("keys",t,e,n),o=T("defaultValue",t,e,n);return[await r.getHashTableById(s.id).find(i,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=T("tableHandle",t,e,n,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tEe=(t,e,n,r=ls)=>{switch(t.op){case"ResizeBilinear":{const s=T("images",t,e,n),i=T("size",t,e,n),o=T("alignCorners",t,e,n),a=T("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(s,[i[0],i[1]],o,a)]}case"ResizeNearestNeighbor":{const s=T("images",t,e,n),i=T("size",t,e,n),o=T("alignCorners",t,e,n),a=T("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(s,[i[0],i[1]],o,a)]}case"CropAndResize":{const s=T("image",t,e,n),i=T("boxes",t,e,n),o=T("boxInd",t,e,n),a=T("cropSize",t,e,n),l=T("method",t,e,n),c=T("extrapolationValue",t,e,n);return[r.image.cropAndResize(s,i,o,a,l,c)]}case"ImageProjectiveTransformV3":{const s=T("images",t,e,n),i=T("transforms",t,e,n),o=T("outputShape",t,e,n),a=T("fillValue",t,e,n),l=T("interpolation",t,e,n),c=T("fillMode",t,e,n);return[r.image.transform(s,i,l.toLowerCase(),c.toLowerCase(),a,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nEe=(t,e,n,r=ls)=>{switch(t.op){case"Equal":return[r.equal(T("a",t,e,n),T("b",t,e,n))];case"NotEqual":return[r.notEqual(T("a",t,e,n),T("b",t,e,n))];case"Greater":return[r.greater(T("a",t,e,n),T("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(T("a",t,e,n),T("b",t,e,n))];case"Less":return[r.less(T("a",t,e,n),T("b",t,e,n))];case"LessEqual":return[r.lessEqual(T("a",t,e,n),T("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(T("a",t,e,n),T("b",t,e,n))];case"LogicalNot":return[r.logicalNot(T("a",t,e,n))];case"LogicalOr":return[r.logicalOr(T("a",t,e,n),T("b",t,e,n))];case"Select":case"SelectV2":return[r.where(T("condition",t,e,n),T("a",t,e,n),T("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(T("a",t,e,n),T("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rEe=(t,e,n,r=ls)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(T("a",t,e,n),T("b",t,e,n),T("transposeA",t,e,n),T("transposeB",t,e,n))];case"Einsum":return[r.einsum(T("equation",t,e,n),...T("tensors",t,e,n))];case"Transpose":return[r.transpose(T("x",t,e,n),T("perm",t,e,n))];case"_FusedMatMul":const[s,i]=T("fusedOps",t,e,n),o=s==="biasadd",a=i==="prelu",l=T("numArgs",t,e,n),c=T("leakyreluAlpha",t,e,n);if(o){if(a&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,A]=T("args",t,e,n);return[r.fused.matMul({a:T("a",t,e,n),b:T("b",t,e,n),transposeA:T("transposeA",t,e,n),transposeB:T("transposeB",t,e,n),bias:u,activation:i,preluActivationWeights:A,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(T("a",t,e,n),T("numLower",t,e,n),T("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sEe=(t,e,n,r=ls)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(T("x",t,e,n),T("axis",t,e,n),T("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(T("x",t,e,n),T("mean",t,e,n),T("variance",t,e,n),T("offset",t,e,n),T("scale",t,e,n),T("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(T("x",t,e,n),T("mean",t,e,n),T("variance",t,e,n),T("offset",t,e,n),T("scale",t,e,n),T("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(T("x",t,e,n),T("radius",t,e,n),T("bias",t,e,n),T("alpha",t,e,n),T("beta",t,e,n))];case"Softmax":return[r.softmax(T("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(T("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iEe=(t,e,n,r=ls)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:i}=r.raggedGather(T("paramsNestedSplits",t,e,n),T("paramsDenseValues",t,e,n),T("indices",t,e,n),T("outputRaggedRank",t,e,n));return s.concat(i)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:i}=r.raggedRange(T("starts",t,e,n),T("limits",t,e,n),T("splits",t,e,n));return[s,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(T("shape",t,e,n),T("values",t,e,n),T("defaultValue",t,e,n),T("rowPartitionTensors",t,e,n),T("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oEe=(t,e,n,r=ls)=>{switch(t.op){case"Max":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.max(T("x",t,e,n),a,l)]}case"Mean":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.mean(T("x",t,e,n),a,l)]}case"Min":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.min(T("x",t,e,n),a,l)]}case"Sum":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.sum(T("x",t,e,n),a,l)]}case"All":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.all(T("x",t,e,n),a,l)]}case"Any":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.any(T("x",t,e,n),a,l)]}case"ArgMax":{const a=T("axis",t,e,n);return[r.argMax(T("x",t,e,n),a)]}case"ArgMin":{const a=T("axis",t,e,n);return[r.argMin(T("x",t,e,n),a)]}case"Prod":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.prod(T("x",t,e,n),a,l)]}case"Cumprod":{const a=T("axis",t,e,n),l=T("exclusive",t,e,n),c=T("reverse",t,e,n);return[r.cumprod(T("x",t,e,n),a,l,c)]}case"Cumsum":{const a=T("axis",t,e,n),l=T("exclusive",t,e,n),c=T("reverse",t,e,n);return[r.cumsum(T("x",t,e,n),a,l,c)]}case"Bincount":const s=T("x",t,e,n),i=T("weights",t,e,n),o=T("size",t,e,n);return[r.bincount(s,i,o)];case"DenseBincount":{const a=T("x",t,e,n),l=T("weights",t,e,n),c=T("size",t,e,n),u=T("binaryOutput",t,e,n);return[r.denseBincount(a,l,c,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aEe=(t,e,n,r=ls)=>{switch(t.op){case"ConcatV2":case"Concat":{const s=T("n",t,e,n),i=T("axis",t,e,n);let o=T("tensors",t,e,n);return o=o.slice(0,s),[r.concat(o,i)]}case"Gather":{const s=T("x",t,e,n),i=T("indices",t,e,n);return[r.gather(s,r.cast(i,"int32"),0)]}case"GatherV2":{const s=T("axis",t,e,n),i=T("batchDims",t,e,n),o=T("x",t,e,n),a=T("indices",t,e,n);return[r.gather(o,r.cast(a,"int32"),s,i)]}case"Reverse":{const s=T("dims",t,e,n),i=[];for(let a=0;a<s.length;a++)s[a]&&i.push(a);const o=T("x",t,e,n);return[r.reverse(o,i)]}case"ReverseV2":{const s=T("axis",t,e,n),i=T("x",t,e,n);return[r.reverse(i,s)]}case"Slice":{const s=T("begin",t,e,n),i=T("size",t,e,n);return[r.slice(T("x",t,e,n),s,i)]}case"StridedSlice":{const s=T("begin",t,e,n),i=T("end",t,e,n),o=T("strides",t,e,n),a=T("beginMask",t,e,n),l=T("endMask",t,e,n),c=T("ellipsisMask",t,e,n),u=T("newAxisMask",t,e,n),A=T("shrinkAxisMask",t,e,n),d=T("x",t,e,n);return[r.stridedSlice(d,s,i,o,a,l,c,u,A)]}case"Pack":return Ae(()=>{const s=T("axis",t,e,n),i=T("tensors",t,e,n),o=i[0].shape,a=r.squeeze(i[0]).shape,l=i.map(c=>{const u=_t(c.shape,o);if(!u&&!_t(r.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,o)});return[r.stack(l,s)]});case"Unpack":{const s=T("axis",t,e,n),i=T("tensor",t,e,n);return r.unstack(i,s)}case"Tile":{const s=T("reps",t,e,n);return[r.tile(T("x",t,e,n),s)]}case"Split":case"SplitV":{const s=T("axis",t,e,n),i=T("numOrSizeSplits",t,e,n),o=T("x",t,e,n);return r.split(o,i,s)}case"ScatterNd":{const s=T("indices",t,e,n),i=T("values",t,e,n),o=T("shape",t,e,n);return[r.scatterND(s,i,o)]}case"GatherNd":{const s=T("x",t,e,n),i=T("indices",t,e,n);return[r.gatherND(s,i)]}case"SparseToDense":{const s=T("sparseIndices",t,e,n),i=T("outputShape",t,e,n),o=T("sparseValues",t,e,n),a=T("defaultValue",t,e,n);return[r.sparseToDense(s,o,i,o.dtype===a.dtype?a:r.cast(a,o.dtype))]}case"TensorScatterUpdate":{const s=T("indices",t,e,n),i=T("values",t,e,n),o=T("tensor",t,e,n);return[r.tensorScatterUpdate(o,s,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lEe=(t,e,n,r=ls)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:i,emptyRowIndicator:o,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(T("indices",t,e,n),T("values",t,e,n),T("denseShape",t,e,n),T("defaultValue",t,e,n));return[s,i,o,a]}case"SparseReshape":{const{outputIndices:s,outputShape:i}=r.sparse.sparseReshape(T("inputIndices",t,e,n),T("inputShape",t,e,n),T("newShape",t,e,n));return[s,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(T("data",t,e,n),T("indices",t,e,n),T("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(T("data",t,e,n),T("indices",t,e,n),T("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cEe=(t,e,n,r=ls)=>{switch(t.op){case"FFT":return[r.fft(T("x",t,e,n))];case"IFFT":return[r.ifft(T("x",t,e,n))];case"RFFT":return[r.rfft(T("x",t,e,n))];case"IRFFT":return[r.irfft(T("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uEe=(t,e,n,r=ls)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(T("input",t,e,n),T("pattern",t,e,n),T("rewrite",t,e,n),T("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:s,nGramsSplits:i}=r.string.stringNGrams(T("data",t,e,n),T("dataSplits",t,e,n),T("separator",t,e,n),T("nGramWidths",t,e,n),T("leftPad",t,e,n),T("rightPad",t,e,n),T("padWidth",t,e,n),T("preserveShortSequences",t,e,n));return[s,i]}case"StringSplit":{const{indices:s,values:i,shape:o}=r.string.stringSplit(T("input",t,e,n),T("delimiter",t,e,n),T("skipEmpty",t,e,n));return[s,i,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(T("input",t,e,n),T("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AEe=(t,e,n,r=ls)=>{switch(t.op){case"Cast":return[r.cast(T("x",t,e,n),T("dtype",t,e,n))];case"ExpandDims":{const s=T("axis",t,e,n);return[r.expandDims(T("x",t,e,n),s)]}case"Squeeze":{const s=T("axis",t,e,n);return[r.squeeze(T("x",t,e,n),s)]}case"Reshape":return[r.reshape(T("x",t,e,n),T("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(T("x",t,e,n),T("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(T("x",t,e,n),T("padding",t,e,n),T("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(T("x",t,e,n),T("padding",t,e,n),T("constantValue",t,e,n))];case"SpaceToBatchND":{const s=T("blockShape",t,e,n),i=T("paddings",t,e,n);return[r.spaceToBatchND(T("x",t,e,n),s,i)]}case"BatchToSpaceND":{const s=T("blockShape",t,e,n),i=T("crops",t,e,n);return[r.batchToSpaceND(T("x",t,e,n),s,i)]}case"DepthToSpace":{const s=T("blockSize",t,e,n),i=T("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(T("x",t,e,n),s,i)]}case"BroadcastTo":return[r.broadcastTo(T("x",t,e,n),T("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(T("s0",t,e,n),T("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $6(t,e,n,r,s=Ae){const i=((o,a,l)=>{switch(o.category){case"arithmetic":return s(()=>L4e(o,a,l));case"basic_math":return s(()=>M4e(o,a,l));case"control":return G4e(o,a,l);case"convolution":return s(()=>K4e(o,a,l));case"creation":return s(()=>X4e(o,a,l));case"dynamic":return q4e(o,a,l);case"evaluation":return s(()=>Y4e(o,a,l));case"image":return s(()=>tEe(o,a,l));case"graph":return s(()=>J4e(o,a,l));case"logical":return s(()=>nEe(o,a,l));case"matrices":return s(()=>rEe(o,a,l));case"normalization":return s(()=>sEe(o,a,l));case"ragged":return s(()=>iEe(o,a,l));case"reduction":return s(()=>oEe(o,a,l));case"slice_join":return s(()=>aEe(o,a,l));case"sparse":return s(()=>lEe(o,a,l));case"spectral":return s(()=>cEe(o,a,l));case"string":return s(()=>uEe(o,a,l));case"transformation":return s(()=>AEe(o,a,l));case"hash_table":return eEe(o,a,l,r);case"custom":const c=rY(o.op);if(c&&c.customExecutor)return c.customExecutor(new j4e(o,a,l));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return Qd(i)?i.then(o=>[].concat(o)):[].concat(i)}class _6{constructor(e={},n={},r={},s={},i){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O6(t,e,n,r){const s=new Set,i=[];let o=null,a=null;const l=new Set,c=new Set(Object.keys(t).map(d=>pi(d)[0]));r=r||[];const u=new Set(r.map(d=>pi(d.name)[0])),A=[...e];for(;A.length>0;){const d=A.pop();if((YA(d)||xEe(d)||vEe(d))&&o==null&&(o=d,a=o.children.map(f=>f.name).filter(f=>s.has(f))),s.add(d.name),n[d.name]==null&&!c.has(d.name)&&!u.has(d.name)){if(d.inputs.length===0){i.push(d.name);continue}d.inputs.forEach(f=>{l.has(f.name)||(l.add(f.name),A.push(f))})}}return{inputs:t,outputs:e,usedNodes:s,missingInputs:i,dynamicNode:o,syncInputs:a}}function dEe(t,e){const{usedNodes:n,inputs:r}=e,s=Object.keys(r).map(g=>pi(g)[0]).map(g=>t.nodes[g]),i=t.initNodes||[],o=g=>n.has(typeof g=="string"?g:g.name);function a(g){return[...new Map(g.map(y=>[y.name,y])).values()]}const l=a([...s,...t.weights,...i]).filter(o),c=a([...l,...Object.values(t.nodes)]).filter(o),u=new Map(c.map(g=>[g.name,g])),A={};for(const g of c){A[g.name]=A[g.name]||0;for(const y of g.children)o(y)||(A[y.name]=Number.POSITIVE_INFINITY),A[y.name]=(A[y.name]||0)+1}const d=Object.entries(A).filter(([,g])=>g===0).map(([g])=>g),f=[...d];for(;d.length>0;){const g=d.pop(),y=u.get(g);for(const x of y.children.filter(o))--A[x.name]===0&&(f.push(x.name),d.push(x.name))}const h=f.map(g=>u.get(g)),m=fEe(h,l);return hEe(m,l),m}function fEe(t,e){const n=new Map(t.map(o=>[o.name,o])),r=e.map(o=>o.name),s=new Set(r);for(;r.length>0;){const o=r.pop(),a=n.get(o);for(const l of a.children)!n.has(l.name)||s.has(l.name)||(s.add(l.name),r.push(l.name))}return t.filter(o=>s.has(o.name))}class ab extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function hEe(t,e){const n=new Map(t.map((a,l)=>[a.name,l])),r=new Set(e.map(a=>a.name)),s=a=>r.has(typeof a=="string"?a:a.name),i=new Set(t.map(a=>a.name)),o=a=>i.has(typeof a=="string"?a:a.name);for(const a of t){for(const l of a.children.filter(o)){if(!n.has(l.name))throw new ab(`Child ${l.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(l.name))throw new ab(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!s(a))for(const l of a.inputs){if(!n.has(l.name))throw new ab(`Input ${l.name} of node ${a.name} is unreachable.`);if(n.get(l.name)>n.get(a.name))throw new ab(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}function pEe(t){const e=new Map(t.map((a,l)=>[a.name,l])),n=Number.MAX_SAFE_INTEGER,r=t.map((a,l)=>YA(a)?n:l),s=a=>{const l=r[e.get(a.name)];return l??-1},i=t.map((a,l)=>a.children.map(s).reduce((c,u)=>Math.max(c,u),r[l])),o=new Map;for(let a=0;a<t.length;++a){const l=i[a];if(l===n)continue;const c=t[a],u=t[l];o.has(u.name)||o.set(u.name,[]),o.get(u.name).push(c)}return o}const mEe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),gEe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),yEe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function YA(t){return mEe.has(t.op)}function xEe(t){return gEe.has(t.op)}function vEe(t){return yEe.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d2{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(s=>s.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new d2(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),s=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(e,n){const r=O6(e,n,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:i,syncInputs:o}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(s.length>0){const c=n.map(A=>A.name),u=Object.keys(e);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${s}]`)}const a=dEe(this.graph,r),l=pEe(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return Qr(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const s=r.map(d=>this.graph.nodes[pi(d)[0]]),i=n.map(d=>pi(d)[0]),o=new Set(i);let a=i.map(d=>this.graph.nodes[d]);a.length===0&&(a=this._outputs);const l=this.getCompilationKey(s,a);let c=this.compiledMap.get(l);c==null&&(c=this.compile(e,a),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=he().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const u={},A={};return Ae(()=>{const d=new _6(this.weightMap,u,A,this.functionExecutorMap,this.parseNodeNameCache),f=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(y=>{const[x,v]=pi(y,d),b=[];b[v]=e[y],f[x]=b,this.keepIntermediateTensors&&(this.clonedTensorsMap[x]=this.cloneTensorList(b))});const h=this.getFrozenTensorIds(f),{orderedNodes:m,nodeLiveUntilMap:g}=c;for(const y of m){if(f[y.name])continue;const x=$6(y,f,d,this._resourceManager);if(Qd(x))throw new Error(`The execution of the op '${y.op}' returned a promise. Please use model.executeAsync() instead.`);f[y.name]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[y.name]=this.cloneTensorList(x)),this.checkTensorForDisposalWithNodeLiveUntilInfo(y,f,d,h,o,g.get(y.name))}return this.parent==null&&d.dispose(h),n.map(y=>Zr(y,f,d))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(s=>s.id)));return new Set(n)}checkTensorForDisposal(e,n,r,s,i,o,a){if(!(YA(n)||o.has(e))){for(const l of r[e])l!=null&&(a[l.id]=(a[l.id]||0)+n.children.length);for(const l of n.inputs){if(YA(l))continue;const c=E6(l.name,r,s);if(c!=null)for(const u of c){if(!u||u.kept||i.has(u.id))continue;const A=a[u.id];A===1?(u.dispose(),delete a[u.id]):A!=null&&a[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,s,i,o){function a(l){return YA(l)||i.has(l.name)}if(!(YA(e)||o==null))for(const l of o){if(a(l))continue;const c=E6(l.name,n,r);for(const u of c)!u||u.kept||s.has(u.id)||u.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,s={},i={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=he().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const o=new _6(this.weightMap,s,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const a=await this.executeWithControlFlow(e,o,n,r),l=n.map(d=>Zr(d,a,o)),c=l.map(d=>d.id),u=Object.keys(e).map(d=>e[d].id),A=new Set([...c,...u,...this.weightIds]);return Object.values(a).forEach(d=>{d.forEach(f=>{f&&!f.isDisposed&&!A.has(f.id)&&f.dispose()})}),this.parent==null&&o.dispose(A),l}async executeFunctionAsync(e,n,r){const s=e.reduce((i,o,a)=>(i[this.inputs[a].name]=o,i),{});return this._executeAsync(s,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,s){const i=Object.keys(e),o=i.map(b=>this.graph.nodes[pi(b)[0]]),a=r.map(b=>pi(b)[0]),l=new Set(a);let c=a.map(b=>this.graph.nodes[b]);c.length===0&&(c=this._outputs);const{usedNodes:u,missingInputs:A,dynamicNode:d,syncInputs:f}=O6(e,c,this.weightMap,this._initNodes),h=[...o,...this.graph.weights,...this._initNodes||[]].map(b=>({node:b,contexts:n.currentContext})),m=Object.assign({},this.weightMap);Object.keys(e).forEach(b=>{const[w,C]=pi(b),B=[];B[C]=e[b],m[w]=B});const g={},y=this.getFrozenTensorIds(m),x={};for(;h.length>0;){const b=this.processStack(o,h,n,m,x,y,l,g,u);await Promise.all(b)}d==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const v=c.filter(b=>!YA(b)&&!Zr(b.name,m,n)).map(b=>b.name);if(v.length>0){let b="";throw d!=null&&(b=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${f}]`),new Error(`Cannot compute the outputs [${v}] from the provided inputs [${i}]. Consider providing the following inputs: [${A}]. ${b}`)}return m}processStack(e,n,r,s,i,o,a,l,c){const u=[];for(;n.length>0;){const A=n.pop();r.currentContext=A.contexts;let d="";if(A.node.op==="Enter"&&T("isConstant",A.node,s,r)&&([d]=Hl(A.node.name,r)),s[A.node.name]==null){const f=$6(A.node,s,r,this._resourceManager);d||([d]=Hl(A.node.name,r));const h=r.currentContext;Qd(f)?u.push(f.then(m=>(s[d]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(m)),r.currentContext=h,this.checkTensorForDisposal(d,A.node,s,r,o,a,l),this.processChildNodes(A.node,n,r,s,i,c),m))):(s[d]=f,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(f)),this.checkTensorForDisposal(d,A.node,s,r,o,a,l),this.processChildNodes(A.node,n,r,s,i,c))}else this.processChildNodes(A.node,n,r,s,i,c)}return u}processChildNodes(e,n,r,s,i,o){e.children.forEach(a=>{const[l]=Hl(a.name,r);i[l]||!o.has(a.name)||(a.op==="Merge"?a.inputNames.some(c=>!!Zr(c,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(c=>!!Zr(c,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[s]=pi(n),i=this.graph.nodes[s];if(i.attrParams.shape&&i.attrParams.shape.value){const o=i.attrParams.shape.value,a=o.length===r.shape.length&&r.shape.every((l,c)=>o[c]===-1||o[c]===l);M(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&M(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const s={};for(const i in e){const o=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];o!=null?s[o.name]=e[i]:s[i]=e[i]}return s}checkInputs(e){const n=Object.keys(e).filter(r=>{const[s]=pi(r);return this.graph.nodes[s]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,s;const i=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[n];return i!=null?i.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=pi(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class bEe{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wEe="?tfjs-format=file",CEe="model.json";class SEe{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=bq){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new bEe}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Qd(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await zK(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let s=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(s=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new d2(I6.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=I6.Instance.transformGraph(e.modelInitializer);this.initializer=new d2(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof qt?[e]:e,r={};return n.forEach((s,i)=>r[this.structuredOutputKeys[i]]=s),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof qt)&&!Array.isArray(e)){const i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(const o in i){const a=i[o];a.resourceId!=null&&(e[o]=this.resourceIdToCapturedInput[a.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((i,o)=>{var a,l,c;const u=(c=(l=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||l===void 0?void 0:l[o])===null||c===void 0?void 0:c.resourceId;return u!=null?i[o]=this.resourceIdToCapturedInput[u]:i[o]=e[s++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let s=0;s<r.length;s++){const i=r[s],o=n[i];this.resourceIdToCapturedInput[o.resourceId]=e[s]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&ft(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function oY(t,e={},n=bq){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=BEe(t));const r=new SEe(t,e,n);return await r.load(),r}function BEe(t){return t.endsWith("/")||(t=t+"/"),`${t}${CEe}${wEe}`}/**
    * @license
    * Copyright 2024 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var wa=function(){return wa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},wa.apply(this,arguments)};function Zl(t,e,n,r){return new(n||(n=Promise))(function(s,i){function o(c){try{l(r.next(c))}catch(u){i(u)}}function a(c){try{l(r.throw(c))}catch(u){i(u)}}function l(c){var u;c.done?s(c.value):(u=c.value,u instanceof n?u:new n(function(A){A(u)})).then(o,a)}l((r=r.apply(t,[])).next())})}function ec(t,e){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&u[0]?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(s=o.trys,!((s=s.length>0&&s[s.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(u[0]===6&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(A){u=[6,A],r=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([l,c])}}}function Hc(t){var e=t.map(function(n){return n[0]});return e.push(t[t.length-1][1]),e}var NEe={lips:Hc([[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]]),leftEye:Hc([[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]]),leftEyebrow:Hc([[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]]),leftIris:Hc([[474,475],[475,476],[476,477],[477,474]]),rightEye:Hc([[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]]),rightEyebrow:Hc([[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]]),rightIris:Hc([[469,470],[470,471],[471,472],[472,469]]),faceOval:Hc([[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]])},EEe=Object.entries(NEe).map(function(t){var e=t[0];return t[1].map(function(n){return[n,e]})}).flat(),aY=new Map(EEe);function nT(t){for(var e={locationData:{relativeKeypoints:[]}},n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=0;o<t.length;++o){var a=t[o];n=Math.min(n,a.x),r=Math.max(r,a.x),s=Math.min(s,a.y),i=Math.max(i,a.y),e.locationData.relativeKeypoints.push({x:a.x,y:a.y})}return e.locationData.relativeBoundingBox={xMin:n,yMin:s,xMax:r,yMax:i,width:r-n,height:i-s},e}var P4={runtime:"mediapipe",maxFaces:1,refineLandmarks:!1},IEe=function(){function t(e){var n=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceMeshSolution=new v1e.FaceMesh({locateFile:function(r,s){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+r:s+"/"+r}}),this.faceMeshSolution.setOptions({refineLandmarks:e.refineLandmarks,selfieMode:this.selfieMode,maxNumFaces:e.maxFaces}),this.faceMeshSolution.onResults(function(r){if(n.height=r.image.height,n.width=r.image.width,n.faces=[],r.multiFaceLandmarks!==null)for(var s=r.multiFaceLandmarks,i=0;i<s.length;i++){var o=n.translateOutput(s[i]);n.faces.push({keypoints:o,box:nT(o).locationData.relativeBoundingBox})}})}return t.prototype.translateOutput=function(e){var n=this;return e.map(function(r,s){var i={x:r.x*n.width,y:r.y*n.height,z:r.z*n.width},o=aY.get(s);return o!=null&&(i.name=o),i})},t.prototype.estimateFaces=function(e,n){return Zl(this,void 0,void 0,function(){var r,s;return ec(this,function(i){switch(i.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.faceMeshSolution.setOptions({selfieMode:this.selfieMode})),e instanceof qt?(s=ImageData.bind,[4,wq(e)]):[3,2];case 1:return r=new(s.apply(ImageData,[void 0,i.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:r=e,i.label=3;case 3:return e=r,[4,this.faceMeshSolution.send({image:e})];case 4:return i.sent(),[2,this.faces]}})})},t.prototype.dispose=function(){this.faceMeshSolution.close()},t.prototype.reset=function(){this.faceMeshSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},t.prototype.initialize=function(){return this.faceMeshSolution.initialize()},t}();function kEe(t){return Zl(this,void 0,void 0,function(){var e,n;return ec(this,function(r){switch(r.label){case 0:return e=function(s){if(s==null)return wa({},P4);var i=wa({},s);return i.runtime="mediapipe",i.maxFaces==null&&(i.maxFaces=P4.maxFaces),i.refineLandmarks==null&&(i.refineLandmarks=P4.refineLandmarks),i}(t),[4,(n=new IEe(e)).initialize()];case 1:return r.sent(),[2,n]}})})}var U4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},TEe={};(function(){var t;function e(E){var $=0;return function(){return $<E.length?{done:!1,value:E[$++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(E,$,R){return E==Array.prototype||E==Object.prototype||(E[$]=R.value),E},r=function(E){E=[typeof globalThis=="object"&&globalThis,E,typeof window=="object"&&window,typeof self=="object"&&self,typeof U4=="object"&&U4];for(var $=0;$<E.length;++$){var R=E[$];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}(this);function s(E,$){if($)e:{var R=r;E=E.split(".");for(var z=0;z<E.length-1;z++){var q=E[z];if(!(q in R))break e;R=R[q]}($=$(z=R[E=E[E.length-1]]))!=z&&$!=null&&n(R,E,{configurable:!0,writable:!0,value:$})}}function i(E){return(E={next:E})[Symbol.iterator]=function(){return this},E}function o(E){var $=typeof Symbol<"u"&&Symbol.iterator&&E[Symbol.iterator];return $?$.call(E):{next:e(E)}}function a(E){if(!(E instanceof Array)){E=o(E);for(var $,R=[];!($=E.next()).done;)R.push($.value);E=R}return E}s("Symbol",function(E){function $(q,X){this.g=q,n(this,"description",{configurable:!0,writable:!0,value:X})}if(E)return E;$.prototype.toString=function(){return this.g};var R="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",z=0;return function q(X){if(this instanceof q)throw new TypeError("Symbol is not a constructor");return new $(R+(X||"")+"_"+z++,X)}}),s("Symbol.iterator",function(E){if(E)return E;E=Symbol("Symbol.iterator");for(var $="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),R=0;R<$.length;R++){var z=r[$[R]];typeof z=="function"&&typeof z.prototype[E]!="function"&&n(z.prototype,E,{configurable:!0,writable:!0,value:function(){return i(e(this))}})}return E});var l,c=typeof Object.create=="function"?Object.create:function(E){function $(){}return $.prototype=E,new $};if(typeof Object.setPrototypeOf=="function")l=Object.setPrototypeOf;else{var u;e:{var A={};try{A.__proto__={a:!0},u=A.a;break e}catch{}u=!1}l=u?function(E,$){if(E.__proto__=$,E.__proto__!==$)throw new TypeError(E+" is not extensible");return E}:null}var d=l;function f(E,$){if(E.prototype=c($.prototype),E.prototype.constructor=E,d)d(E,$);else for(var R in $)if(R!="prototype")if(Object.defineProperties){var z=Object.getOwnPropertyDescriptor($,R);z&&Object.defineProperty(E,R,z)}else E[R]=$[R];E.na=$.prototype}function h(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function m(E){if(E.l)throw new TypeError("Generator is already running");E.l=!0}function g(E,$){E.j={da:$,ea:!0},E.g=E.o||E.u}function y(E,$,R){return E.g=R,{value:$}}function x(E){this.g=new h,this.h=E}function v(E,$,R,z){try{var q=$.call(E.g.i,R);if(!(q instanceof Object))throw new TypeError("Iterator result "+q+" is not an object");if(!q.done)return E.g.l=!1,q;var X=q.value}catch(ee){return E.g.i=null,g(E.g,ee),b(E)}return E.g.i=null,z.call(E.g,X),b(E)}function b(E){for(;E.g.g;)try{var $=E.h(E.g);if($)return E.g.l=!1,{value:$.value,done:!1}}catch(R){E.g.h=void 0,g(E.g,R)}if(E.g.l=!1,E.g.j){if($=E.g.j,E.g.j=null,$.ea)throw $.da;return{value:$.return,done:!0}}return{value:void 0,done:!0}}function w(E){this.next=function($){return m(E.g),E.g.i?$=v(E,E.g.i.next,$,E.g.s):(E.g.s($),$=b(E)),$},this.throw=function($){return m(E.g),E.g.i?$=v(E,E.g.i.throw,$,E.g.s):(g(E.g,$),$=b(E)),$},this.return=function($){return function(R,z){m(R.g);var q=R.g.i;return q?v(R,"return"in q?q.return:function(X){return{value:X,done:!0}},z,R.g.return):(R.g.return(z),b(R))}(E,$)},this[Symbol.iterator]=function(){return this}}function C(E){return function($){function R(q){return $.next(q)}function z(q){return $.throw(q)}return new Promise(function(q,X){(function ee(se){se.done?q(se.value):Promise.resolve(se.value).then(R,z).then(ee,X)})($.next())})}(new w(new x(E)))}h.prototype.s=function(E){this.h=E},h.prototype.return=function(E){this.j={return:E},this.g=this.u},s("Promise",function(E){function $(ee){this.h=0,this.i=void 0,this.g=[],this.s=!1;var se=this.j();try{ee(se.resolve,se.reject)}catch(me){se.reject(me)}}function R(){this.g=null}function z(ee){return ee instanceof $?ee:new $(function(se){se(ee)})}if(E)return E;R.prototype.h=function(ee){if(this.g==null){this.g=[];var se=this;this.i(function(){se.l()})}this.g.push(ee)};var q=r.setTimeout;R.prototype.i=function(ee){q(ee,0)},R.prototype.l=function(){for(;this.g&&this.g.length;){var ee=this.g;this.g=[];for(var se=0;se<ee.length;++se){var me=ee[se];ee[se]=null;try{me()}catch(Se){this.j(Se)}}}this.g=null},R.prototype.j=function(ee){this.i(function(){throw ee})},$.prototype.j=function(){function ee(Se){return function(ke){me||(me=!0,Se.call(se,ke))}}var se=this,me=!1;return{resolve:ee(this.D),reject:ee(this.l)}},$.prototype.D=function(ee){if(ee===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(ee instanceof $)this.H(ee);else{e:switch(typeof ee){case"object":var se=ee!=null;break e;case"function":se=!0;break e;default:se=!1}se?this.A(ee):this.o(ee)}},$.prototype.A=function(ee){var se=void 0;try{se=ee.then}catch(me){return void this.l(me)}typeof se=="function"?this.I(se,ee):this.o(ee)},$.prototype.l=function(ee){this.u(2,ee)},$.prototype.o=function(ee){this.u(1,ee)},$.prototype.u=function(ee,se){if(this.h!=0)throw Error("Cannot settle("+ee+", "+se+"): Promise already settled in state"+this.h);this.h=ee,this.i=se,this.h===2&&this.G(),this.B()},$.prototype.G=function(){var ee=this;q(function(){if(ee.C()){var se=r.console;se!==void 0&&se.error(ee.i)}},1)},$.prototype.C=function(){if(this.s)return!1;var ee=r.CustomEvent,se=r.Event,me=r.dispatchEvent;return me===void 0||(typeof ee=="function"?ee=new ee("unhandledrejection",{cancelable:!0}):typeof se=="function"?ee=new se("unhandledrejection",{cancelable:!0}):(ee=r.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,ee),ee.promise=this,ee.reason=this.i,me(ee))},$.prototype.B=function(){if(this.g!=null){for(var ee=0;ee<this.g.length;++ee)X.h(this.g[ee]);this.g=null}};var X=new R;return $.prototype.H=function(ee){var se=this.j();ee.M(se.resolve,se.reject)},$.prototype.I=function(ee,se){var me=this.j();try{ee.call(se,me.resolve,me.reject)}catch(Se){me.reject(Se)}},$.prototype.then=function(ee,se){function me(Pe,Qe){return typeof Pe=="function"?function(mt){try{Se(Pe(mt))}catch(Bt){ke(Bt)}}:Qe}var Se,ke,De=new $(function(Pe,Qe){Se=Pe,ke=Qe});return this.M(me(ee,Se),me(se,ke)),De},$.prototype.catch=function(ee){return this.then(void 0,ee)},$.prototype.M=function(ee,se){function me(){switch(Se.h){case 1:ee(Se.i);break;case 2:se(Se.i);break;default:throw Error("Unexpected state: "+Se.h)}}var Se=this;this.g==null?X.h(me):this.g.push(me),this.s=!0},$.resolve=z,$.reject=function(ee){return new $(function(se,me){me(ee)})},$.race=function(ee){return new $(function(se,me){for(var Se=o(ee),ke=Se.next();!ke.done;ke=Se.next())z(ke.value).M(se,me)})},$.all=function(ee){var se=o(ee),me=se.next();return me.done?z([]):new $(function(Se,ke){function De(mt){return function(Bt){Pe[mt]=Bt,--Qe==0&&Se(Pe)}}var Pe=[],Qe=0;do Pe.push(void 0),Qe++,z(me.value).M(De(Pe.length-1),ke),me=se.next();while(!me.done)})},$});var B=typeof Object.assign=="function"?Object.assign:function(E,$){for(var R=1;R<arguments.length;R++){var z=arguments[R];if(z)for(var q in z)Object.prototype.hasOwnProperty.call(z,q)&&(E[q]=z[q])}return E};s("Object.assign",function(E){return E||B}),s("Object.is",function(E){return E||function($,R){return $===R?$!==0||1/$==1/R:$!=$&&R!=R}}),s("Array.prototype.includes",function(E){return E||function($,R){var z=this;z instanceof String&&(z=String(z));var q=z.length;for(0>(R=R||0)&&(R=Math.max(R+q,0));R<q;R++){var X=z[R];if(X===$||Object.is(X,$))return!0}return!1}}),s("String.prototype.includes",function(E){return E||function($,R){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if($ instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf($,R||0)!==-1}}),s("Array.prototype.keys",function(E){return E||function(){return function($,R){$ instanceof String&&($+="");var z=0,q=!1,X={next:function(){if(!q&&z<$.length){var ee=z++;return{value:R(ee,$[ee]),done:!1}}return q=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}(this,function($){return $})}});var S=this||self;function N(E,$){E=E.split(".");var R,z=S;for((E[0]in z)||z.execScript===void 0||z.execScript("var "+E[0]);E.length&&(R=E.shift());)E.length||$===void 0?z=z[R]&&z[R]!==Object.prototype[R]?z[R]:z[R]={}:z[R]=$}function k(){throw Error("Invalid UTF8")}function O(E,$){return $=String.fromCharCode.apply(null,$),E==null?$:E+$}var U,P,V=typeof TextDecoder<"u",W=typeof TextEncoder<"u",L={},G=null;function _(E){var $;$===void 0&&($=0),K(),$=L[$];for(var R=Array(Math.floor(E.length/3)),z=$[64]||"",q=0,X=0;q<E.length-2;q+=3){var ee=E[q],se=E[q+1],me=E[q+2],Se=$[ee>>2];ee=$[(3&ee)<<4|se>>4],se=$[(15&se)<<2|me>>6],me=$[63&me],R[X++]=Se+ee+se+me}switch(Se=0,me=z,E.length-q){case 2:me=$[(15&(Se=E[q+1]))<<2]||z;case 1:E=E[q],R[X]=$[E>>2]+$[(3&E)<<4|Se>>4]+me+z}return R.join("")}function j(E){var $=E.length,R=3*$/4;R%3?R=Math.floor(R):"=.".indexOf(E[$-1])!=-1&&(R="=.".indexOf(E[$-2])!=-1?R-2:R-1);var z=new Uint8Array(R),q=0;return function(X,ee){function se(Qe){for(;me<X.length;){var mt=X.charAt(me++),Bt=G[mt];if(Bt!=null)return Bt;if(!/^[\s\xa0]*$/.test(mt))throw Error("Unknown base64 encoding at char: "+mt)}return Qe}K();for(var me=0;;){var Se=se(-1),ke=se(0),De=se(64),Pe=se(64);if(Pe===64&&Se===-1)break;ee(Se<<2|ke>>4),De!=64&&(ee(ke<<4&240|De>>2),Pe!=64&&ee(De<<6&192|Pe))}}(E,function(X){z[q++]=X}),q!==R?z.subarray(0,q):z}function K(){if(!G){G={};for(var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),$=["+/=","+/","-_=","-_.","-_"],R=0;5>R;R++){var z=E.concat($[R].split(""));L[R]=z;for(var q=0;q<z.length;q++){var X=z[q];G[X]===void 0&&(G[X]=q)}}}}var Y,J=typeof Uint8Array=="function";function ae(E){return J&&E!=null&&E instanceof Uint8Array}function ue(E){if(this.L=E,E!==null&&E.length===0)throw Error("ByteString should be constructed with non-empty values")}var le=typeof Uint8Array.prototype.slice=="function",fe=0;function Ie(E,$){return Error("Invalid wire type: "+E+" (at position "+$+")")}function Re(){return Error("Failed to read varint, encoding is invalid.")}function ge(E,$){$=($=$===void 0?{}:$).v!==void 0&&$.v,this.h=null,this.g=this.i=this.j=0,this.v=$,E&&$e(this,E)}function $e(E,$){E.h=function(R,z){if(R.constructor===Uint8Array)return R;if(R.constructor===ArrayBuffer)return new Uint8Array(R);if(R.constructor===Array)return new Uint8Array(R);if(R.constructor===String)return j(R);if(R.constructor===ue)return!z&&(z=R.L)&&z.constructor===Uint8Array?z:(z=(z=R.L)==null||ae(z)?z:typeof z=="string"?j(z):null,(R=R.L=z)?new Uint8Array(R):Y||(Y=new Uint8Array(0)));if(R instanceof Uint8Array)return new Uint8Array(R.buffer,R.byteOffset,R.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}($,E.v),E.j=0,E.i=E.h.length,E.g=E.j}function Te(E){if(E.g>E.i)throw Error("Tried to read past the end of the data "+E.g+" > "+E.i)}function be(E){var $=E.h,R=$[E.g],z=127&R;if(128>R)return E.g+=1,Te(E),z;if(z|=(127&(R=$[E.g+1]))<<7,128>R)return E.g+=2,Te(E),z;if(z|=(127&(R=$[E.g+2]))<<14,128>R)return E.g+=3,Te(E),z;if(z|=(127&(R=$[E.g+3]))<<21,128>R)return E.g+=4,Te(E),z;if(R=$[E.g+4],E.g+=5,z|=(15&R)<<28,128>R)return Te(E),z;if(128<=$[E.g++]&&128<=$[E.g++]&&128<=$[E.g++]&&128<=$[E.g++]&&128<=$[E.g++])throw Re();return Te(E),z}ge.prototype.reset=function(){this.g=this.j};var it=[];function et(){this.g=[]}function st(E,$){for(;127<$;)E.g.push(127&$|128),$>>>=7;E.g.push($)}function rt(E){var $={},R=$.W!==void 0&&$.W;this.l={v:$.v!==void 0&&$.v},this.W=R,$=this.l,it.length?(R=it.pop(),$&&(R.v=$.v),E&&$e(R,E),E=R):E=new ge(E,$),this.g=E,this.j=this.g.g,this.h=this.i=-1}function ht(E){var $=E.g;if($.g==$.i)return!1;E.j=E.g.g;var R=be(E.g)>>>0;if($=R>>>3,!(0<=(R&=7)&&5>=R))throw Ie(R,E.j);if(1>$)throw Error("Invalid field number: "+$+" (at position "+E.j+")");return E.i=$,E.h=R,!0}function dt(E){switch(E.h){case 0:if(E.h!=0)dt(E);else e:{for(var $=(E=E.g).g,R=$+10;$<R;)if(!(128&E.h[$++])){E.g=$,Te(E);break e}throw Re()}break;case 1:(E=E.g).g+=8,Te(E);break;case 2:E.h!=2?dt(E):($=be(E.g)>>>0,(E=E.g).g+=$,Te(E));break;case 5:(E=E.g).g+=4,Te(E);break;case 3:for($=E.i;;){if(!ht(E))throw Error("Unmatched start-group tag: stream EOF");if(E.h==4){if(E.i!=$)throw Error("Unmatched end-group tag");break}dt(E)}break;default:throw Ie(E.h,E.j)}}et.prototype.length=function(){return this.g.length},et.prototype.end=function(){var E=this.g;return this.g=[],E},rt.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};var cn=[];function Yt(){this.i=[],this.h=0,this.g=new et}function Dt(E,$){$.length!==0&&(E.i.push($),E.h+=$.length)}var rn=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function As(E,$){Object.isFrozen(E)||(rn?E[rn]|=$:E.N!==void 0?E.N|=$:Object.defineProperties(E,{N:{value:$,configurable:!0,writable:!0,enumerable:!1}}))}function yr(E){var $;return($=rn?E[rn]:E.N)==null?0:$}function Zn(E){return As(E,1),E}function ur(E){return!!Array.isArray(E)&&!!(2&yr(E))}function Ss(E){if(!Array.isArray(E))throw Error("cannot mark non-array as immutable");As(E,2)}function Vn(E){return E!==null&&typeof E=="object"&&!Array.isArray(E)&&E.constructor===Object}var Hi=Object.freeze(Zn([]));function El(E){if(ur(E.m))throw Error("Cannot mutate an immutable Message")}var Il,Bf=typeof Symbol<"u"&&Symbol.hasInstance!==void 0;function kl(E){return{value:E,configurable:!1,writable:!1,enumerable:!1}}function _r(E,$,R){return $===-1?null:$>=E.i?E.g?E.g[$]:void 0:R!==void 0&&R&&E.g&&(R=E.g[$])!=null?R:E.m[$+E.h]}function Pn(E,$,R,z){z=z!==void 0&&z,El(E),$<E.i&&!z?E.m[$+E.h]=R:(E.g||(E.g=E.m[E.i+E.h]={}))[$]=R}function Ar(E,$,R,z){R=R===void 0||R;var q=_r(E,$,z=z!==void 0&&z);return q==null&&(q=Hi),ur(E.m)?R&&(Ss(q),Object.freeze(q)):(q===Hi||ur(q))&&Pn(E,$,q=Zn(q.slice()),z),q}function Vs(E,$,R){return(E=(E=_r(E,$))==null?E:+E)==null?R===void 0?0:R:E}function SA(E,$,R,z){E.j||(E.j={});var q=ur(E.m),X=E.j[R];if(!X){z=Ar(E,R,!0,z!==void 0&&z),X=[],q=q||ur(z);for(var ee=0;ee<z.length;ee++)X[ee]=new $(z[ee]),q&&Ss(X[ee].m);q&&(Ss(X),Object.freeze(X)),E.j[R]=X}return X}function mn(E,$,R,z,q){var X=X!==void 0&&X;return El(E),X=SA(E,R,$,X),R=z||new R,E=Ar(E,$),q!=null?(X.splice(q,0,R),E.splice(q,0,R.m)):(X.push(R),E.push(R.m)),R}function BA(E,$){return(E=_r(E,$))==null?0:E}function Tm(E,$){return(E=_r(E,$))==null?"":E}function Pa(E){var $=Lv;return Ft(E,$=$===void 0?Nf:$)}function zi(E,$){if(E!=null){if(Array.isArray(E))E=Ft(E,$);else if(Vn(E)){var R,z={};for(R in E)z[R]=zi(E[R],$);E=z}else E=$(E);return E}}function Ft(E,$){for(var R=E.slice(),z=0;z<R.length;z++)R[z]=zi(R[z],$);return Array.isArray(E)&&1&yr(E)&&Zn(R),R}function Lv(E){return E&&typeof E=="object"&&E.toJSON?E.toJSON():(E=function($){switch(typeof $){case"number":return isFinite($)?$:String($);case"object":if($&&!Array.isArray($)){if(ae($))return _($);if($ instanceof ue){var R=$.L;return R=R==null||typeof R=="string"?R:J&&R instanceof Uint8Array?_(R):null,($.L=R)||""}}}return $}(E),Array.isArray(E)?Pa(E):E)}function Nf(E){return ae(E)?new Uint8Array(E):E}function NA(E,$,R){E||(E=Il),Il=null;var z=this.constructor.h;if(E||(E=z?[z]:[]),this.h=(z?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=E,E=(z=this.m.length)-1,z&&Vn(z=this.m[E])?(this.i=E-this.h,this.g=z):$!==void 0&&-1<$?(this.i=Math.max($,E+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE,R)for($=0;$<R.length;$++)if((E=R[$])<this.i)E+=this.h,(z=this.m[E])?Array.isArray(z)&&Zn(z):this.m[E]=Hi;else{var q=(z=this.g||(this.g=this.m[this.i+this.h]={}))[E];q?Array.isArray(q)&&Zn(q):z[E]=Hi}}function EA(){NA.apply(this,arguments)}if(NA.prototype.toJSON=function(){return Pa(this.m)},NA.prototype.toString=function(){return this.m.toString()},f(EA,NA),Bf){var Ua={};Object.defineProperties(EA,(Ua[Symbol.hasInstance]=kl(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),Ua))}function Ef(E,$,R){if(R){var z,q={};for(z in R){var X=R[z],ee=X.ha;ee||(q.F=X.la||X.fa.P,X.aa?(q.U=Qv(X.aa),ee=function(se){return function(me,Se,ke){return se.F(me,Se,ke,se.U)}}(q)):X.ca?(q.T=If(X.X.g,X.ca),ee=function(se){return function(me,Se,ke){return se.F(me,Se,ke,se.T)}}(q)):ee=q.F,X.ha=ee),ee($,E,X.X),q={F:q.F,U:q.U,T:q.T}}}(function(se,me){if(me=me.ba){Dt(se,se.g.end());for(var Se=0;Se<me.length;Se++)Dt(se,me[Se])}})($,E)}var Vi=Symbol();function ja(E,$,R){return E[Vi]||(E[Vi]=function(z,q){return $(z,q,R)})}function Mv(E){var $=E[Vi];if(!$){var R=Gv(E);$=function(z,q){return Fm(z,q,R)},E[Vi]=$}return $}function iN(E){var $=function(q){var X=q.aa;return X?Mv(X):(X=q.ka)?ja(q.X.g,X,q.ca):void 0}(E),R=E.X,z=E.fa.O;return $?function(q,X){return z(q,X,R,$)}:function(q,X){return z(q,X,R)}}function Kr(E,$,R,z,q,X){var ee=0;for((E=E()).length&&typeof E[0]!="number"&&(R($,E[0]),ee++);ee<E.length;){R=E[ee++];for(var se=ee+1;se<E.length&&typeof E[se]!="number";)se++;var me=E[ee++];switch(se-=ee){case 0:z($,R,me);break;case 1:z($,R,me,E[ee++]);break;case 2:q($,R,me,E[ee++],E[ee++]);break;case 3:se=E[ee++];var Se=E[ee++],ke=E[ee++];Array.isArray(ke)?q($,R,me,se,Se,ke):X($,R,me,se,Se,ke);break;case 4:X($,R,me,E[ee++],E[ee++],E[ee++],E[ee++]);break;default:throw Error("unexpected number of binary field arguments: "+se)}}return $}var La=Symbol();function Qv(E){var $=E[La];if(!$){var R=Wv(E);$=function(z,q){return _m(z,q,R)},E[La]=$}return $}function If(E,$){var R=E[La];return R||(R=function(z,q){return Ef(z,q,$)},E[La]=R),R}var Hv=Symbol();function Pc(E,$){E.push($)}function oN(E,$,R){E.push($,R.P)}function zv(E,$,R,z,q){var X=Qv(q),ee=R.P;E.push($,function(se,me,Se){return ee(se,me,Se,z,X)})}function Vv(E,$,R,z,q,X){var ee=If(z,X),se=R.P;E.push($,function(me,Se,ke){return se(me,Se,ke,z,ee)})}function Wv(E){var $=E[Hv];return $||Kr(E,E[Hv]=[],Pc,oN,zv,Vv)}var kf=Symbol();function Tl(E,$){E[0]=$}function aN(E,$,R,z){var q=R.O;E[$]=z?function(X,ee,se){return q(X,ee,se,z)}:q}function lN(E,$,R,z,q,X){var ee=R.O,se=Mv(q);E[$]=function(me,Se,ke){return ee(me,Se,ke,z,se,X)}}function Tf(E,$,R,z,q,X,ee){var se=R.O,me=ja(z,q,X);E[$]=function(Se,ke,De){return se(Se,ke,De,z,me,ee)}}function Gv(E){var $=E[kf];return $||Kr(E,E[kf]={},Tl,aN,lN,Tf)}function Fm(E,$,R){for(;ht($)&&$.h!=4;){var z=$.i,q=R[z];if(!q){var X=R[0];X&&(X=X[z])&&(q=R[z]=iN(X))}if(!(q&&q($,E,z)||(q=$,z=E,X=q.j,dt(q),q.W))){var ee=q.g.h;q=X===(q=q.g.g)?Y||(Y=new Uint8Array(0)):le?ee.slice(X,q):new Uint8Array(ee.subarray(X,q)),(X=z.ba)?X.push(q):z.ba=[q]}}return E}function $m(E,$,R){if(cn.length){var z=cn.pop();E&&($e(z.g,E),z.i=-1,z.h=-1),E=z}else E=new rt(E);try{return Fm(new $,E,Gv(R))}finally{($=E.g).h=null,$.j=0,$.i=0,$.g=0,$.v=!1,E.i=-1,E.h=-1,100>cn.length&&cn.push(E)}}function _m(E,$,R){for(var z=R.length,q=z%2==1,X=q?1:0;X<z;X+=2)(0,R[X+1])($,E,R[X]);Ef(E,$,q?R[0]:void 0)}function IA(E,$){var R=new Yt;_m(E,R,Wv($)),Dt(R,R.g.end()),E=new Uint8Array(R.h);for(var z=($=R.i).length,q=0,X=0;X<z;X++){var ee=$[X];E.set(ee,q),q+=ee.length}return R.i=[E],E}function Uc(E,$){return{O:E,P:$}}var Wi=Uc(function(E,$,R){if(E.h!==5)return!1;var z=(E=E.g).h[E.g],q=E.h[E.g+1],X=E.h[E.g+2],ee=E.h[E.g+3];return E.g+=4,Te(E),E=2*((q=(z<<0|q<<8|X<<16|ee<<24)>>>0)>>31)+1,z=q>>>23&255,q&=8388607,Pn($,R,z==255?q?NaN:1/0*E:z==0?E*Math.pow(2,-149)*q:E*Math.pow(2,z-150)*(q+Math.pow(2,23))),!0},function(E,$,R){if(($=_r($,R))!=null){st(E.g,8*R+5),E=E.g;var z=$;(z=(R=0>z?1:0)?-z:z)===0?0<1/z?fe=0:fe=2147483648:isNaN(z)?fe=2147483647:34028234663852886e22<z?fe=(R<<31|2139095040)>>>0:11754943508222875e-54>z?(z=Math.round(z/Math.pow(2,-149)),fe=(R<<31|z)>>>0):($=Math.floor(Math.log(z)/Math.LN2),z*=Math.pow(2,-$),16777216<=(z=Math.round(8388608*z))&&++$,fe=(R<<31|$+127<<23|8388607&z)>>>0),R=fe,E.g.push(R>>>0&255),E.g.push(R>>>8&255),E.g.push(R>>>16&255),E.g.push(R>>>24&255)}}),cN=Uc(function(E,$,R){if(E.h!==0)return!1;for(var z=E.g,q=128,X=0,ee=E=0;4>ee&&128<=q;ee++)q=z.h[z.g++],Te(z),X|=(127&q)<<7*ee;if(128<=q&&(q=z.h[z.g++],Te(z),X|=(127&q)<<28,E|=(127&q)>>4),128<=q)for(ee=0;5>ee&&128<=q;ee++)q=z.h[z.g++],Te(z),E|=(127&q)<<7*ee+3;if(!(128>q))throw Re();return z=X>>>0,(E=2147483648&(q=E>>>0))&&(q=~q>>>0,(z=1+~z>>>0)==0&&(q=q+1>>>0)),z=4294967296*q+(z>>>0),Pn($,R,E?-z:z),!0},function(E,$,R){if(($=_r($,R))!=null&&$!=null){st(E.g,8*R),E=E.g;var z=$;for(R=0>z,$=(z=Math.abs(z))>>>0,z=Math.floor((z-$)/4294967296),z>>>=0,R&&(z=~z>>>0,4294967295<($=1+(~$>>>0))&&($=0,4294967295<++z&&(z=0))),R=fe=$,$=z;0<$||127<R;)E.g.push(127&R|128),R=(R>>>7|$<<25)>>>0,$>>>=7;E.g.push(R)}}),uN=Uc(function(E,$,R){return E.h===0&&(Pn($,R,be(E.g)),!0)},function(E,$,R){if(($=_r($,R))!=null&&$!=null)if(st(E.g,8*R),E=E.g,0<=(R=$))st(E,R);else{for($=0;9>$;$++)E.g.push(127&R|128),R>>=7;E.g.push(1)}}),Kv=Uc(function(E,$,R){if(E.h!==2)return!1;var z,q=be(E.g)>>>0,X=(E=E.g).g;if(E.g+=q,Te(E),E=E.h,V)(z=U)||(z=U=new TextDecoder("utf-8",{fatal:!0})),z=z.decode(E.subarray(X,X+q));else{q=X+q;for(var ee,se,me,Se=[],ke=null;X<q;)128>(ee=E[X++])?Se.push(ee):224>ee?X>=q?k():(se=E[X++],194>ee||(192&se)!=128?(X--,k()):Se.push((31&ee)<<6|63&se)):240>ee?X>=q-1?k():(192&(se=E[X++]))!=128||ee===224&&160>se||ee===237&&160<=se||(192&(z=E[X++]))!=128?(X--,k()):Se.push((15&ee)<<12|(63&se)<<6|63&z):244>=ee?X>=q-2?k():(192&(se=E[X++]))!=128||se-144+(ee<<28)>>30||(192&(z=E[X++]))!=128||(192&(me=E[X++]))!=128?(X--,k()):(ee=(7&ee)<<18|(63&se)<<12|(63&z)<<6|63&me,ee-=65536,Se.push(55296+(ee>>10&1023),56320+(1023&ee))):k(),8192<=Se.length&&(ke=O(ke,Se),Se.length=0);z=O(ke,Se)}return Pn($,R,z),!0},function(E,$,R){if(($=_r($,R))!=null){var z=!1;if(z=z!==void 0&&z,W){if(z&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test($))throw Error("Found an unpaired surrogate");$=(P||(P=new TextEncoder)).encode($)}else{for(var q=0,X=new Uint8Array(3*$.length),ee=0;ee<$.length;ee++){var se=$.charCodeAt(ee);if(128>se)X[q++]=se;else{if(2048>se)X[q++]=se>>6|192;else{if(55296<=se&&57343>=se){if(56319>=se&&ee<$.length){var me=$.charCodeAt(++ee);if(56320<=me&&57343>=me){se=1024*(se-55296)+me-56320+65536,X[q++]=se>>18|240,X[q++]=se>>12&63|128,X[q++]=se>>6&63|128,X[q++]=63&se|128;continue}ee--}if(z)throw Error("Found an unpaired surrogate");se=65533}X[q++]=se>>12|224,X[q++]=se>>6&63|128}X[q++]=63&se|128}}$=X.subarray(0,q)}st(E.g,8*R+2),st(E.g,$.length),Dt(E,E.g.end()),Dt(E,$)}}),Om=Uc(function(E,$,R,z,q){if(E.h!==2)return!1;$=mn($,R,z),R=E.g.i,z=be(E.g)>>>0;var X=E.g.g+z,ee=X-R;if(0>=ee&&(E.g.i=X,q($,E),ee=X-E.g.g),ee)throw Error("Message parsing ended unexpectedly. Expected to read "+z+" bytes, instead read "+(z-ee)+" bytes, either the data ended unexpectedly or the message misreported its own length");return E.g.g=X,E.g.i=R,!0},function(E,$,R,z,q){if(($=SA($,z,R))!=null)for(z=0;z<$.length;z++){var X=E;st(X.g,8*R+2);var ee=X.g.end();Dt(X,ee),ee.push(X.h),X=ee,q($[z],E),ee=E;var se=X.pop();for(se=ee.h+ee.g.length()-se;127<se;)X.push(127&se|128),se>>>=7,ee.h++;X.push(se),ee.h++}});function ui(){EA.apply(this,arguments)}if(f(ui,EA),Bf){var Xv={};Object.defineProperties(ui,(Xv[Symbol.hasInstance]=kl(Object[Symbol.hasInstance]),Xv))}function Fl(E){ui.call(this,E)}function qv(){return[1,uN,2,Wi,3,Kv,4,Kv]}function Dm(E){ui.call(this,E,-1,dN)}function AN(){return[1,Om,Fl,qv]}f(Fl,ui),f(Dm,ui),Dm.prototype.addClassification=function(E,$){return mn(this,1,Fl,E,$),this};var dN=[1];function jc(E){ui.call(this,E)}function Yv(){return[1,Wi,2,Wi,3,Wi,4,Wi,5,Wi]}function Jv(E){ui.call(this,E,-1,hN)}function fN(){return[1,Om,jc,Yv]}f(jc,ui),f(Jv,ui);var hN=[1];function Rm(E){ui.call(this,E)}function Pm(){return[1,Wi,2,Wi,3,Wi,4,Wi,5,Wi,6,cN]}f(Rm,ui);var Um=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],jm=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],Lm=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Mm=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Qm=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],Zv=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],e1=[].concat(a(Um),a(jm),a(Lm),a(Mm),a(Qm),a(Zv));function I(E,$,R){if(R=E.createShader(R===0?E.VERTEX_SHADER:E.FRAGMENT_SHADER),E.shaderSource(R,$),E.compileShader(R),!E.getShaderParameter(R,E.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+E.getShaderInfoLog(R));return R}function F(E){return SA(E,Fl,1).map(function($){return{index:BA($,1),ga:Vs($,2),label:_r($,3)!=null?Tm($,3):void 0,displayName:_r($,4)!=null?Tm($,4):void 0}})}function D(E){return{x:Vs(E,1),y:Vs(E,2),z:Vs(E,3),visibility:_r(E,4)!=null?Vs(E,4):void 0}}function Z(E,$){this.h=E,this.g=$,this.l=0}function de(E,$,R){return function(z,q){var X=z.g;if(z.o===void 0){var ee=I(X,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),se=I(X,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),me=X.createProgram();if(X.attachShader(me,ee),X.attachShader(me,se),X.linkProgram(me),!X.getProgramParameter(me,X.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+X.getProgramInfoLog(me));ee=z.o=me,X.useProgram(ee),se=X.getUniformLocation(ee,"sampler0"),z.j={K:X.getAttribLocation(ee,"aVertex"),J:X.getAttribLocation(ee,"aTex"),ma:se},z.u=X.createBuffer(),X.bindBuffer(X.ARRAY_BUFFER,z.u),X.enableVertexAttribArray(z.j.K),X.vertexAttribPointer(z.j.K,2,X.FLOAT,!1,0,0),X.bufferData(X.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),X.STATIC_DRAW),X.bindBuffer(X.ARRAY_BUFFER,null),z.s=X.createBuffer(),X.bindBuffer(X.ARRAY_BUFFER,z.s),X.enableVertexAttribArray(z.j.J),X.vertexAttribPointer(z.j.J,2,X.FLOAT,!1,0,0),X.bufferData(X.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),X.STATIC_DRAW),X.bindBuffer(X.ARRAY_BUFFER,null),X.uniform1i(se,0)}ee=z.j,X.useProgram(z.o),X.canvas.width=q.width,X.canvas.height=q.height,X.viewport(0,0,q.width,q.height),X.activeTexture(X.TEXTURE0),z.h.bindTexture2d(q.glName),X.enableVertexAttribArray(ee.K),X.bindBuffer(X.ARRAY_BUFFER,z.u),X.vertexAttribPointer(ee.K,2,X.FLOAT,!1,0,0),X.enableVertexAttribArray(ee.J),X.bindBuffer(X.ARRAY_BUFFER,z.s),X.vertexAttribPointer(ee.J,2,X.FLOAT,!1,0,0),X.bindFramebuffer(X.DRAW_FRAMEBUFFER?X.DRAW_FRAMEBUFFER:X.FRAMEBUFFER,null),X.clearColor(0,0,0,0),X.clear(X.COLOR_BUFFER_BIT),X.colorMask(!0,!0,!0,!0),X.drawArrays(X.TRIANGLE_FAN,0,4),X.disableVertexAttribArray(ee.K),X.disableVertexAttribArray(ee.J),X.bindBuffer(X.ARRAY_BUFFER,null),z.h.bindTexture2d(0)}(E,$),typeof E.g.canvas.transferToImageBitmap=="function"?Promise.resolve(E.g.canvas.transferToImageBitmap()):R?Promise.resolve(E.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(E.g.canvas):(E.i===void 0&&(E.i=document.createElement("canvas")),new Promise(function(z){E.i.height=E.g.canvas.height,E.i.width=E.g.canvas.width,E.i.getContext("2d",{}).drawImage(E.g.canvas,0,0,E.g.canvas.width,E.g.canvas.height),z(E.i)}))}function Ce(E){this.g=E}var pe=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Ne(E,$){return $+E}function Oe(E,$){window[E]=$}function Ge(E){if(this.g=E,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=Promise.resolve(),this.Y="",this.C={},this.locateFile=E&&E.locateFile||Ne,typeof window=="object")var $=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if(typeof location>"u")throw Error("solutions can only be loaded on a web page or in a web worker");$=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.$=$,E.options)for(var R=($=o(Object.keys(E.options))).next();!R.done;R=$.next()){R=R.value;var z=E.options[R].default;z!==void 0&&(this.j[R]=typeof z=="function"?z():z)}}function pt(E){var $,R,z,q,X,ee,se,me,Se,ke,De;return C(function(Pe){switch(Pe.g){case 1:return E.Z?($=E.g.files===void 0?[]:typeof E.g.files=="function"?E.g.files(E.j):E.g.files,y(Pe,C(function(Qe){switch(Qe.g){case 1:return Qe.o=2,y(Qe,WebAssembly.instantiate(pe),4);case 4:Qe.g=3,Qe.o=0;break;case 2:return Qe.o=0,Qe.j=null,Qe.return(!1);case 3:return Qe.return(!0)}}),2)):Pe.return();case 2:if(R=Pe.h,typeof window=="object")return Oe("createMediapipeSolutionsWasm",{locateFile:E.locateFile}),Oe("createMediapipeSolutionsPackedAssets",{locateFile:E.locateFile}),ee=$.filter(function(Qe){return Qe.data!==void 0}),se=$.filter(function(Qe){return Qe.data===void 0}),me=Promise.all(ee.map(function(Qe){var mt=Lt(E,Qe.url);if(Qe.path!==void 0){var Bt=Qe.path;mt=mt.then(function(un){return E.overrideFile(Bt,un),Promise.resolve(un)})}return mt})),Se=Promise.all(se.map(function(Qe){return Qe.simd===void 0||Qe.simd&&R||!Qe.simd&&!R?function(mt){var Bt=document.createElement("script");return Bt.setAttribute("src",mt),Bt.setAttribute("crossorigin","anonymous"),new Promise(function(un){Bt.addEventListener("load",function(){un()},!1),Bt.addEventListener("error",function(){un()},!1),document.body.appendChild(Bt)})}(E.locateFile(Qe.url,E.$)):Promise.resolve()})).then(function(){var Qe,mt,Bt;return C(function(un){if(un.g==1)return Qe=window.createMediapipeSolutionsWasm,mt=window.createMediapipeSolutionsPackedAssets,Bt=E,y(un,Qe(mt),2);Bt.h=un.h,un.g=0})}),ke=C(function(Qe){return E.g.graph&&E.g.graph.url?Qe=y(Qe,Lt(E,E.g.graph.url),0):(Qe.g=0,Qe=void 0),Qe}),y(Pe,Promise.all([Se,me,ke]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return z=$.filter(function(Qe){return Qe.simd===void 0||Qe.simd&&R||!Qe.simd&&!R}).map(function(Qe){return E.locateFile(Qe.url,E.$)}),importScripts.apply(null,a(z)),q=E,y(Pe,createMediapipeSolutionsWasm(Module),6);case 6:q.h=Pe.h,E.l=new OffscreenCanvas(1,1),E.h.canvas=E.l,X=E.h.GL.createContext(E.l,{antialias:!1,alpha:!1,ja:typeof WebGL2RenderingContext<"u"?2:1}),E.h.GL.makeContextCurrent(X),Pe.g=4;break;case 7:if(E.l=document.createElement("canvas"),!(De=E.l.getContext("webgl2",{}))&&!(De=E.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),Pe.return();E.G=De,E.h.canvas=E.l,E.h.createContext(E.l,!0,!0,{});case 4:E.i=new E.h.SolutionWasm,E.Z=!1,Pe.g=0}})}function Lt(E,$){var R,z;return C(function(q){return $ in E.H?q.return(E.H[$]):(R=E.locateFile($,""),z=fetch(R).then(function(X){return X.arrayBuffer()}),E.H[$]=z,q.return(z))})}function Et(E,$,R){var z,q,X,ee,se,me,Se,ke,De,Pe,Qe,mt,Bt,un;return C(function(bn){switch(bn.g){case 1:if(!R)return bn.return($);for(z={},q=0,X=o(Object.keys(R)),ee=X.next();!ee.done;ee=X.next())se=ee.value,typeof(me=R[se])!="string"&&me.type==="texture"&&$[me.stream]!==void 0&&++q;1<q&&(E.I=!1),Se=o(Object.keys(R)),ee=Se.next();case 2:if(ee.done){bn.g=4;break}if(ke=ee.value,typeof(De=R[ke])=="string")return Bt=z,un=ke,y(bn,function(kA,VP,Ff){var t1;return C(function(pN){return typeof Ff=="number"||Ff instanceof Uint8Array||Ff instanceof kA.h.Uint8BlobList?pN.return(Ff):Ff instanceof kA.h.Texture2dDataOut?((t1=kA.u[VP])||(t1=new Z(kA.h,kA.G),kA.u[VP]=t1),pN.return(de(t1,Ff,kA.I))):pN.return(void 0)})}(E,ke,$[De]),14);if(Pe=$[De.stream],De.type==="detection_list"){if(Pe){for(var Ws=Pe.getRectList(),uo=Pe.getLandmarksList(),Ai=Pe.getClassificationsList(),Kt=[],ds=0;ds<Ws.size();++ds){var Lc=$m(Ws.get(ds),Rm,Pm);Lc={boundingBox:{xCenter:Vs(Lc,1),yCenter:Vs(Lc,2),height:Vs(Lc,3),width:Vs(Lc,4),rotation:Vs(Lc,5,0),rectId:BA(Lc,6)},landmarks:SA($m(uo.get(ds),Jv,fN),jc,1).map(D),V:F($m(Ai.get(ds),Dm,AN))},Kt.push(Lc)}Ws=Kt}else Ws=[];z[ke]=Ws,bn.g=7;break}if(De.type==="proto_list"){if(Pe){for(Ws=Array(Pe.size()),uo=0;uo<Pe.size();uo++)Ws[uo]=Pe.get(uo);Pe.delete()}else Ws=[];z[ke]=Ws,bn.g=7;break}if(Pe===void 0){bn.g=3;break}if(De.type==="float_list"){z[ke]=Pe,bn.g=7;break}if(De.type==="proto"){z[ke]=Pe,bn.g=7;break}if(De.type!=="texture")throw Error("Unknown output config type: '"+De.type+"'");return(Qe=E.u[ke])||(Qe=new Z(E.h,E.G),E.u[ke]=Qe),y(bn,de(Qe,Pe,E.I),13);case 13:mt=bn.h,z[ke]=mt;case 7:De.transform&&z[ke]&&(z[ke]=De.transform(z[ke])),bn.g=3;break;case 14:Bt[un]=bn.h;case 3:ee=Se.next(),bn.g=2;break;case 4:return bn.return(z)}})}function yt(E,$){for(var R=$.name||"$",z=[].concat(a($.wants)),q=new E.h.StringList,X=o($.wants),ee=X.next();!ee.done;ee=X.next())q.push_back(ee.value);X=E.h.PacketListener.implement({onResults:function(se){for(var me={},Se=0;Se<$.wants.length;++Se)me[z[Se]]=se.get(Se);var ke=E.listeners[R];ke&&(E.D=Et(E,me,$.outs).then(function(De){De=ke(De);for(var Pe=0;Pe<$.wants.length;++Pe){var Qe=me[z[Pe]];typeof Qe=="object"&&Qe.hasOwnProperty&&Qe.hasOwnProperty("delete")&&Qe.delete()}De&&(E.D=De)}))}}),E.i.attachMultiListener(q,X),q.delete()}function nt(E){var $=this;E=E||{};var R={url:"face_detection_short.binarypb"},z={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new Ge({locateFile:E.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:R,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window=="object"&&window.navigator!==void 0&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(q){var X,ee,se,me,Se;return C(function(ke){switch(ke.g){case 1:X=o(q==="short"?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"]),ee=X.next();case 2:if(ee.done){ke.g=4;break}return se=ee.value,me="third_party/mediapipe/modules/face_detection/"+se,y(ke,Lt($.g,se),5);case 5:Se=ke.h,$.g.overrideFile(me,Se),ee=X.next(),ke.g=2;break;case 4:return R.url=q==="short"?"face_detection_short.binarypb":"face_detection_full.binarypb",z.graphOptionXref.calculatorName=q==="short"?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",ke.return(!0)}})}},minDetectionConfidence:z}})}(t=Ge.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},t.reset=function(){var E=this;return C(function($){E.i&&(E.i.reset(),E.o={},E.u={}),$.g=0})},t.setOptions=function(E,$){var R=this;if($=$||this.g.options){for(var z=[],q=[],X={},ee=o(Object.keys(E)),se=ee.next();!se.done;X={R:X.R,S:X.S},se=ee.next()){var me=se.value;me in this.j&&this.j[me]===E[me]||(this.j[me]=E[me],(se=$[me])!==void 0&&(se.onChange&&(X.R=se.onChange,X.S=E[me],z.push(function(Se){return function(){return C(function(ke){if(ke.g==1)return y(ke,Se.R(Se.S),2);ke.h===!0&&(R.s=!0),ke.g=0})}}(X))),se.graphOptionXref&&(me={valueNumber:se.type===1?E[me]:0,valueBoolean:se.type===0&&E[me],valueString:se.type===2?E[me]:""},se=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),se.graphOptionXref),me),q.push(se))))}z.length===0&&q.length===0||(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(q),this.A=(this.A===void 0?[]:this.A).concat(z))}},t.initialize=function(){var E=this;return C(function($){return $.g==1?y($,pt(E),2):$.g!=3?y($,function(R){var z,q,X,ee,se,me,Se,ke;return C(function(De){if(De.g==1)return R.g.graph&&R.g.graph.url&&R.Y===R.g.graph.url?De.return():(R.s=!0,R.g.graph&&R.g.graph.url?(R.Y=R.g.graph.url,y(De,Lt(R,R.g.graph.url),3)):void(De.g=2));for(De.g!=2&&(z=De.h,R.i.loadGraph(z)),q=o(Object.keys(R.C)),X=q.next();!X.done;X=q.next())ee=X.value,R.i.overrideFile(ee,R.C[ee]);if(R.C={},R.g.listeners)for(se=o(R.g.listeners),me=se.next();!me.done;me=se.next())Se=me.value,yt(R,Se);ke=R.j,R.j={},R.setOptions(ke),De.g=0})}(E),3):y($,function(R){var z,q,X,ee,se,me;return C(function(Se){switch(Se.g){case 1:if(!R.s)return Se.return();if(!R.A){Se.g=2;break}z=o(R.A),q=z.next();case 3:if(q.done){Se.g=5;break}return y(Se,(0,q.value)(),4);case 4:q=z.next(),Se.g=3;break;case 5:R.A=void 0;case 2:if(R.B){for(X=new R.h.GraphOptionChangeRequestList,ee=o(R.B),se=ee.next();!se.done;se=ee.next())me=se.value,X.push_back(me);R.i.changeOptions(X),X.delete(),R.B=void 0}R.s=!1,Se.g=0}})}(E),0)})},t.overrideFile=function(E,$){this.i?this.i.overrideFile(E,$):this.C[E]=$},t.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},t.send=function(E,$){var R,z,q,X,ee,se,me,Se,ke,De=this;return C(function(Pe){switch(Pe.g){case 1:return De.g.inputs?(R=1e3*($??performance.now()),y(Pe,De.D,2)):Pe.return();case 2:return y(Pe,De.initialize(),3);case 3:for(z=new De.h.PacketDataList,q=o(Object.keys(E)),X=q.next();!X.done;X=q.next())if(ee=X.value,se=De.g.inputs[ee]){e:{var Qe=E[ee];switch(se.type){case"video":var mt=De.o[se.stream];if(mt||(mt=new Z(De.h,De.G),De.o[se.stream]=mt),mt.l===0&&(mt.l=mt.h.createTexture()),typeof HTMLVideoElement<"u"&&Qe instanceof HTMLVideoElement)var Bt=Qe.videoWidth,un=Qe.videoHeight;else typeof HTMLImageElement<"u"&&Qe instanceof HTMLImageElement?(Bt=Qe.naturalWidth,un=Qe.naturalHeight):(Bt=Qe.width,un=Qe.height);un={glName:mt.l,width:Bt,height:un},(Bt=mt.g).canvas.width=un.width,Bt.canvas.height=un.height,Bt.activeTexture(Bt.TEXTURE0),mt.h.bindTexture2d(mt.l),Bt.texImage2D(Bt.TEXTURE_2D,0,Bt.RGBA,Bt.RGBA,Bt.UNSIGNED_BYTE,Qe),mt.h.bindTexture2d(0),mt=un;break e;case"detections":for((mt=De.o[se.stream])||(mt=new Ce(De.h),De.o[se.stream]=mt),mt.data||(mt.data=new mt.g.DetectionListData),mt.data.reset(Qe.length),un=0;un<Qe.length;++un){Bt=Qe[un];var bn=mt.data,Ws=bn.setBoundingBox,uo=un,Ai=Bt.boundingBox,Kt=new Rm;if(Pn(Kt,1,Ai.xCenter),Pn(Kt,2,Ai.yCenter),Pn(Kt,3,Ai.height),Pn(Kt,4,Ai.width),Pn(Kt,5,Ai.rotation),Pn(Kt,6,Ai.rectId),Ai=IA(Kt,Pm),Ws.call(bn,uo,Ai),Bt.landmarks)for(bn=0;bn<Bt.landmarks.length;++bn){var ds=!!(Kt=Bt.landmarks[bn]).visibility;uo=(Ws=mt.data).addNormalizedLandmark,Ai=un,Kt=Object.assign(Object.assign({},Kt),{visibility:ds?Kt.visibility:0}),Pn(ds=new jc,1,Kt.x),Pn(ds,2,Kt.y),Pn(ds,3,Kt.z),Kt.visibility&&Pn(ds,4,Kt.visibility),Kt=IA(ds,Yv),uo.call(Ws,Ai,Kt)}if(Bt.V)for(bn=0;bn<Bt.V.length;++bn)uo=(Ws=mt.data).addClassification,Ai=un,Kt=Bt.V[bn],Pn(ds=new Fl,2,Kt.ga),Kt.index&&Pn(ds,1,Kt.index),Kt.label&&Pn(ds,3,Kt.label),Kt.displayName&&Pn(ds,4,Kt.displayName),Kt=IA(ds,qv),uo.call(Ws,Ai,Kt)}mt=mt.data;break e;default:mt={}}}switch(me=mt,Se=se.stream,se.type){case"video":z.pushTexture2d(Object.assign(Object.assign({},me),{stream:Se,timestamp:R}));break;case"detections":(ke=me).stream=Se,ke.timestamp=R,z.pushDetectionList(ke);break;default:throw Error("Unknown input config type: '"+se.type+"'")}}return De.i.send(z),y(Pe,De.D,4);case 4:z.delete(),Pe.g=0}})},t.onResults=function(E,$){this.listeners[$||"$"]=E},N("Solution",Ge),N("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(t=nt.prototype).close=function(){return this.g.close(),Promise.resolve()},t.onResults=function(E){this.g.onResults(E)},t.initialize=function(){var E=this;return C(function($){return y($,E.g.initialize(),0)})},t.reset=function(){this.g.reset()},t.send=function(E){var $=this;return C(function(R){return y(R,$.g.send(E),0)})},t.setOptions=function(E){this.g.setOptions(E)},N("FaceDetection",nt),N("FACEDETECTION_LIPS",Um),N("FACEDETECTION_LEFT_EYE",jm),N("FACEDETECTION_LEFT_EYEBROW",Lm),N("FACEDETECTION_RIGHT_EYE",Mm),N("FACEDETECTION_RIGHT_EYEBROW",Qm),N("FACEDETECTION_FACE_OVAL",Zv),N("FACEDETECTION_CONTOURS",e1),N("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),N("VERSION","0.4.1646425229")}).call(U4);var qu=function(){return qu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},qu.apply(this,arguments)};function vc(t,e,n,r){return new(n||(n=Promise))(function(s,i){function o(c){try{l(r.next(c))}catch(u){i(u)}}function a(c){try{l(r.throw(c))}catch(u){i(u)}}function l(c){var u;c.done?s(c.value):(u=c.value,u instanceof n?u:new n(function(A){A(u)})).then(o,a)}l((r=r.apply(t,[])).next())})}function bc(t,e){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&u[0]?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(u[0]===6&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(A){u=[6,A],r=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([l,c])}}}var lY=["rightEye","leftEye","noseTip","mouthCenter","rightEarTragion","leftEarTragion"],j4={modelType:"short",runtime:"mediapipe",maxFaces:1},FEe=function(){function t(e){var n=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceDetectorSolution=new TEe.FaceDetection({locateFile:function(r,s){if(e.solutionPath){var i=e.solutionPath.replace(/\/+$/,"");return"".concat(i,"/").concat(r)}return"".concat(s,"/").concat(r)}}),this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode,model:e.modelType}),this.faceDetectorSolution.onResults(function(r){if(n.height=r.image.height,n.width=r.image.width,n.faces=[],r.detections!==null)for(var s=0,i=r.detections;s<i.length;s++){var o=i[s];n.faces.push(n.normalizedToAbsolute(o.landmarks,{xMin:l=(a=o.boundingBox).xCenter-a.width/2,xMax:l+a.width,yMin:c=a.yCenter-a.height/2,yMax:c+a.height,width:a.width,height:a.height}))}var a,l,c})}return t.prototype.normalizedToAbsolute=function(e,n){var r=this;return{keypoints:e.map(function(s,i){return{x:s.x*r.width,y:s.y*r.height,name:lY[i]}}),box:{xMin:n.xMin*this.width,yMin:n.yMin*this.height,xMax:n.xMax*this.width,yMax:n.yMax*this.height,width:n.width*this.width,height:n.height*this.height}}},t.prototype.estimateFaces=function(e,n){return vc(this,void 0,void 0,function(){var r,s;return bc(this,function(i){switch(i.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode})),e instanceof qt?(s=ImageData.bind,[4,wq(e)]):[3,2];case 1:return r=new(s.apply(ImageData,[void 0,i.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:r=e,i.label=3;case 3:return e=r,[4,this.faceDetectorSolution.send({image:e})];case 4:return i.sent(),[2,this.faces]}})})},t.prototype.dispose=function(){this.faceDetectorSolution.close()},t.prototype.reset=function(){this.faceDetectorSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},t.prototype.initialize=function(){return this.faceDetectorSolution.initialize()},t}();function $Ee(t){return vc(this,void 0,void 0,function(){var e,n;return bc(this,function(r){switch(r.label){case 0:return e=function(s){if(s==null)return qu({},j4);var i=qu({},s);return i.runtime="mediapipe",i.modelType==null&&(i.modelType=j4.modelType),i.maxFaces==null&&(i.maxFaces=j4.maxFaces),i}(t),[4,(n=new FEe(e)).initialize()];case 1:return r.sent(),[2,n]}})})}function cY(t){return t instanceof qt?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function uY(t){return t instanceof qt?t:Cq(t)}function L4(t,e){M(t.width!==0,function(){return"".concat(e," width cannot be 0.")}),M(t.height!==0,function(){return"".concat(e," height cannot be 0.")})}function _Ee(t,e,n){var r=e.outputTensorSize,s=e.keepAspectRatio,i=e.borderMode,o=e.outputTensorFloatRange,a=cY(t),l=function(d,f){return{xCenter:.5*d.width,yCenter:.5*d.height,width:d.width,height:d.height,rotation:0}}(a),c=function(d,f,h){if(h===void 0&&(h=!1),!h)return{top:0,left:0,right:0,bottom:0};var m=f.height,g=f.width;L4(f,"targetSize"),L4(d,"roi");var y,x,v=m/g,b=d.height/d.width,w=0,C=0;return v>b?(y=d.width,x=d.width*v,C=(1-b/v)/2):(y=d.height/v,x=d.height,w=(1-v/b)/2),d.width=y,d.height=x,{top:C,left:w,right:w,bottom:C}}(l,r,s),u=function(d,f,h,m){var g=d.width,y=d.height,x=1,v=Math.cos(d.rotation),b=Math.sin(d.rotation),w=d.xCenter,C=d.yCenter,B=1/f,S=1/h,N=new Array(16);return N[0]=g*v*x*B,N[1]=-y*b*B,N[2]=0,N[3]=(-.5*g*v*x+.5*y*b+w)*B,N[4]=g*b*x*S,N[5]=y*v*S,N[6]=0,N[7]=(-.5*y*v-.5*g*b*x+C)*S,N[8]=0,N[9]=0,N[10]=g*B,N[11]=0,N[12]=0,N[13]=0,N[14]=0,N[15]=1,function(k){if(k.length!==16)throw new Error("Array length must be 16 but got ".concat(k.length));return[[k[0],k[1],k[2],k[3]],[k[4],k[5],k[6],k[7]],[k[8],k[9],k[10],k[11]],[k[12],k[13],k[14],k[15]]]}(N)}(l,a.width,a.height),A=Ae(function(){var d=uY(t),f=Du(function(g,y,x){return L4(x,"inputResolution"),[1/x.width*g[0][0]*y.width,1/x.height*g[0][1]*y.width,g[0][3]*y.width,1/x.width*g[1][0]*y.height,1/x.height*g[1][1]*y.height,g[1][3]*y.height,0,0]}(u,a,r),[1,8]),h=i==="zero"?"constant":"nearest",m=ni.transform(wr(Ue(d,"float32")),f,"bilinear",h,0,[r.height,r.width]);return o!=null?function(g,y){var x=function(v,b,w,C){var B=(C-w)/255;return{scale:B,offset:w-0*B}}(0,0,y[0],y[1]);return Ae(function(){return Ee(ne(g,x.scale),x.offset)})}(m,o):m});return{imageTensor:A,padding:c,transformationMatrix:u}}function D6(t){t.reduceBoxesInLowestLayer==null&&(t.reduceBoxesInLowestLayer=!1),t.interpolatedScaleAspectRatio==null&&(t.interpolatedScaleAspectRatio=1),t.fixedAnchorSize==null&&(t.fixedAnchorSize=!1);for(var e=[],n=0;n<t.numLayers;){for(var r=[],s=[],i=[],o=[],a=n;a<t.strides.length&&t.strides[a]===t.strides[n];){var l=R6(t.minScale,t.maxScale,a,t.strides.length);if(a===0&&t.reduceBoxesInLowestLayer)i.push(1),i.push(2),i.push(.5),o.push(.1),o.push(l),o.push(l);else{for(var c=0;c<t.aspectRatios.length;++c)i.push(t.aspectRatios[c]),o.push(l);if(t.interpolatedScaleAspectRatio>0){var u=a===t.strides.length-1?1:R6(t.minScale,t.maxScale,a+1,t.strides.length);o.push(Math.sqrt(l*u)),i.push(t.interpolatedScaleAspectRatio)}}a++}for(var A=0;A<i.length;++A){var d=Math.sqrt(i[A]);r.push(o[A]/d),s.push(o[A]*d)}var f=0,h=0;if(t.featureMapHeight.length>0)f=t.featureMapHeight[n],h=t.featureMapWidth[n];else{var m=t.strides[n];f=Math.ceil(t.inputSizeHeight/m),h=Math.ceil(t.inputSizeWidth/m)}for(var g=0;g<f;++g)for(var y=0;y<h;++y)for(var x=0;x<r.length;++x){var v={xCenter:(y+t.anchorOffsetX)/h,yCenter:(g+t.anchorOffsetY)/f,width:0,height:0};t.fixedAnchorSize?(v.width=1,v.height=1):(v.width=s[x],v.height=r[x]),e.push(v)}n=a}return e}function R6(t,e,n,r){return r===1?.5*(t+e):t+(e-t)*n/(r-1)}function P6(t,e){var n=e[0],r=e[1];return[n*t[0]+r*t[1]+t[3],n*t[4]+r*t[5]+t[7]]}function OEe(t,e,n,r){return vc(this,void 0,void 0,function(){var s,i,o,a,l;return bc(this,function(c){switch(c.label){case 0:return t.sort(function(u,A){return Math.max.apply(Math,A.score)-Math.max.apply(Math,u.score)}),s=Du(t.map(function(u){return[u.locationData.relativeBoundingBox.yMin,u.locationData.relativeBoundingBox.xMin,u.locationData.relativeBoundingBox.yMax,u.locationData.relativeBoundingBox.xMax]})),i=mr(t.map(function(u){return u.score[0]})),[4,ni.nonMaxSuppressionAsync(s,i,e,n)];case 1:return[4,(o=c.sent()).array()];case 2:return a=c.sent(),l=t.filter(function(u,A){return a.indexOf(A)>-1}),ft([s,i,o]),[2,l]}})})}function DEe(t,e,n){return vc(this,void 0,void 0,function(){var r,s,i,o,a;return bc(this,function(l){switch(l.label){case 0:return r=t[0],s=t[1],i=function(c,u,A){return Ae(function(){var d,f,h,m;A.reverseOutputOrder?(f=Wn(ct(c,[0,A.boxCoordOffset+0],[-1,1])),d=Wn(ct(c,[0,A.boxCoordOffset+1],[-1,1])),m=Wn(ct(c,[0,A.boxCoordOffset+2],[-1,1])),h=Wn(ct(c,[0,A.boxCoordOffset+3],[-1,1]))):(d=Wn(ct(c,[0,A.boxCoordOffset+0],[-1,1])),f=Wn(ct(c,[0,A.boxCoordOffset+1],[-1,1])),h=Wn(ct(c,[0,A.boxCoordOffset+2],[-1,1])),m=Wn(ct(c,[0,A.boxCoordOffset+3],[-1,1]))),f=Ee(ne(ze(f,A.xScale),u.w),u.x),d=Ee(ne(ze(d,A.yScale),u.h),u.y),A.applyExponentialOnBoxSize?(h=ne(Ms(ze(h,A.hScale)),u.h),m=ne(Ms(ze(m,A.wScale)),u.w)):(h=ne(ze(h,A.hScale),u.h),m=ne(ze(m,A.wScale),u.h));var g=We(d,ze(h,2)),y=We(f,ze(m,2)),x=Ee(d,ze(h,2)),v=Ee(f,ze(m,2)),b=qn([oe(g,[A.numBoxes,1]),oe(y,[A.numBoxes,1]),oe(x,[A.numBoxes,1]),oe(v,[A.numBoxes,1])],1);if(A.numKeypoints)for(var w=0;w<A.numKeypoints;++w){var C=A.keypointCoordOffset+w*A.numValuesPerKeypoint,B=void 0,S=void 0;A.reverseOutputOrder?(B=Wn(ct(c,[0,C],[-1,1])),S=Wn(ct(c,[0,C+1],[-1,1]))):(S=Wn(ct(c,[0,C],[-1,1])),B=Wn(ct(c,[0,C+1],[-1,1])));var N=Ee(ne(ze(B,A.xScale),u.w),u.x),k=Ee(ne(ze(S,A.yScale),u.h),u.y);b=qn([b,oe(N,[A.numBoxes,1]),oe(k,[A.numBoxes,1])],1)}return b})}(s,e,n),o=Ae(function(){var c=r;return n.sigmoidScore?(n.scoreClippingThresh!=null&&(c=oi(r,-n.scoreClippingThresh,n.scoreClippingThresh)),c=ba(c)):c}),[4,REe(i,o,n)];case 1:return a=l.sent(),ft([i,o]),[2,a]}})})}function REe(t,e,n){return vc(this,void 0,void 0,function(){var r,s,i,o,a,l,c,u,A,d,f,h;return bc(this,function(m){switch(m.label){case 0:return r=[],[4,t.data()];case 1:return s=m.sent(),[4,e.data()];case 2:for(i=m.sent(),o=0;o<n.numBoxes;++o)if(!(n.minScoreThresh!=null&&i[o]<n.minScoreThresh||(a=o*n.numCoords,l=PEe(s[a+0],s[a+1],s[a+2],s[a+3],i[o],n.flipVertically,o),(c=l.locationData.relativeBoundingBox).width<0||c.height<0))){if(n.numKeypoints>0)for((u=l.locationData).relativeKeypoints=[],A=n.numKeypoints*n.numValuesPerKeypoint,d=0;d<A;d+=n.numValuesPerKeypoint)f=a+n.keypointCoordOffset+d,h={x:s[f+0],y:n.flipVertically?1-s[f+1]:s[f+1]},u.relativeKeypoints.push(h);r.push(l)}return[2,r]}})})}function PEe(t,e,n,r,s,i,o){return{score:[s],ind:o,locationData:{relativeBoundingBox:{xMin:e,yMin:i?1-n:t,xMax:r,yMax:i?1-t:n,width:r-e,height:n-t}}}}var f2,UEe={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:128,inputSizeWidth:128,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},jEe={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:0,featureMapHeight:[],featureMapWidth:[],numLayers:1,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[4],aspectRatios:[1],fixedAnchorSize:!0},M4={runtime:"tfjs",modelType:"short",maxFaces:1,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"},LEe={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:896,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:128,yScale:128,hScale:128,wScale:128,minScoreThresh:.5},MEe={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2304,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.6},QEe={outputTensorSize:{width:128,height:128},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},HEe={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},zEe=function(){function t(e,n,r){this.detectorModel=n,this.maxFaces=r,e==="full"?(this.imageToTensorConfig=HEe,this.tensorsToDetectionConfig=MEe,this.anchors=D6(jEe)):(this.imageToTensorConfig=QEe,this.tensorsToDetectionConfig=LEe,this.anchors=D6(UEe));var s=mr(this.anchors.map(function(l){return l.width})),i=mr(this.anchors.map(function(l){return l.height})),o=mr(this.anchors.map(function(l){return l.xCenter})),a=mr(this.anchors.map(function(l){return l.yCenter}));this.anchorTensor={x:o,y:a,w:s,h:i}}return t.prototype.dispose=function(){this.detectorModel.dispose(),ft([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},t.prototype.reset=function(){},t.prototype.detectFaces=function(e,n){return n===void 0&&(n=!1),vc(this,void 0,void 0,function(){var r,s,i,o,a,l,c,u,A,d,f;return bc(this,function(h){switch(h.label){case 0:return e==null?(this.reset(),[2,[]]):(r=Ae(function(){var m=Ue(uY(e),"float32");return n&&(m=Wn(ni.flipLeftRight(wr(m,0)),[0])),m}),s=_Ee(r,this.imageToTensorConfig),i=s.imageTensor,o=s.transformationMatrix,a=this.detectorModel.execute(i,"Identity:0"),l=function(m){return Ae(function(){var g=function(v){return Ae(function(){return[ct(v,[0,0,0],[1,-1,1]),ct(v,[0,0,1],[1,-1,-1])]})}(m),y=g[0],x=g[1];return{boxes:Wn(x),logits:Wn(y)}})}(a),c=l.boxes,[4,DEe([u=l.logits,c],this.anchorTensor,this.tensorsToDetectionConfig)]);case 1:return(A=h.sent()).length===0?(ft([r,i,a,u,c]),[2,A]):[4,OEe(A,this.maxFaces,.3)];case 2:return d=h.sent(),f=function(m,g){m===void 0&&(m=[]);var y,x=(y=g,[].concat.apply([],y));return m.forEach(function(v){var b=v.locationData;b.relativeKeypoints.forEach(function(k){var O=P6(x,[k.x,k.y]),U=O[0],P=O[1];k.x=U,k.y=P});var w=b.relativeBoundingBox,C=Number.MAX_VALUE,B=Number.MAX_VALUE,S=Number.MIN_VALUE,N=Number.MIN_VALUE;[[w.xMin,w.yMin],[w.xMin+w.width,w.yMin],[w.xMin+w.width,w.yMin+w.height],[w.xMin,w.yMin+w.height]].forEach(function(k){var O=P6(x,k),U=O[0],P=O[1];C=Math.min(C,U),S=Math.max(S,U),B=Math.min(B,P),N=Math.max(N,P)}),b.relativeBoundingBox={xMin:C,xMax:S,yMin:B,yMax:N,width:S-C,height:N-B}}),m}(d,o),ft([r,i,a,u,c]),[2,f]}})})},t.prototype.estimateFaces=function(e,n){return vc(this,void 0,void 0,function(){var r,s;return bc(this,function(i){return r=cY(e),s=!!n&&n.flipHorizontal,[2,this.detectFaces(e,s).then(function(o){return o.map(function(a){for(var l=a.locationData.relativeKeypoints.map(function(h,m){return qu(qu({},h),{x:h.x*r.width,y:h.y*r.height,name:lY[m]})}),c=a.locationData.relativeBoundingBox,u=0,A=["width","xMax","xMin"];u<A.length;u++)c[A[u]]*=r.width;for(var d=0,f=["height","yMax","yMin"];d<f.length;d++)c[f[d]]*=r.height;return{keypoints:l,box:c}})})]})})},t}();function VEe(t){return vc(this,void 0,void 0,function(){var e,n,r;return bc(this,function(s){switch(s.label){case 0:return e=function(i){if(i==null)return qu({},M4);var o=qu({},i);return o.modelType==null&&(o.modelType=M4.modelType),o.maxFaces==null&&(o.maxFaces=M4.maxFaces),o.detectorModelUrl==null&&(o.modelType==="full"?o.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/full/1":o.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"),o}(t),n=typeof e.detectorModelUrl=="string"&&e.detectorModelUrl.indexOf("https://tfhub.dev")>-1,[4,oY(e.detectorModelUrl,{fromTFHub:n})];case 1:return r=s.sent(),[2,new zEe(e.modelType,r,e.maxFaces)]}})})}function WEe(t,e){return vc(this,void 0,void 0,function(){var n,r;return bc(this,function(s){if(t===f2.MediaPipeFaceDetector){if(r=void 0,(n=e)!=null){if(n.runtime==="tfjs")return[2,VEe(n)];if(n.runtime==="mediapipe")return[2,$Ee(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' "+"or 'mediapipe', but got ".concat(r))}throw new Error("".concat(t," is not a supported model name."))})})}function Q4(t){return t.width*t.height}function U6(t){var e=t.xCenter-t.width/2,n=e+t.width,r=t.yCenter-t.height/2;return{xMin:e,xMax:n,yMin:r,yMax:r+t.height,width:t.width,height:t.height}}function GEe(t,e){var n=U6(t),r=U6(e);if(!function(o,a){return!(o.xMax<a.xMin||a.xMax<o.xMin||o.yMax<a.yMin||a.yMax<o.yMin)}(n,r))return 0;var s=Q4(function(o,a){var l=Math.max(o.xMin,a.xMin),c=Math.min(o.xMax,a.xMax),u=Math.max(o.yMin,a.yMin),A=Math.min(o.yMax,a.yMax);return{xMin:l,xMax:c,yMin:u,yMax:A,width:Math.max(c-l,0),height:Math.max(A-u,0)}}(n,r)),i=Q4(n)+Q4(r)-s;return i>0?s/i:0}function KEe(t,e,n,r){var s=t.width,i=t.height,o=1,a=Math.cos(t.rotation),l=Math.sin(t.rotation),c=t.xCenter,u=t.yCenter,A=1/e,d=1/n,f=new Array(16);return f[0]=s*a*o*A,f[1]=-i*l*A,f[2]=0,f[3]=(-.5*s*a*o+.5*i*l+c)*A,f[4]=s*l*o*d,f[5]=i*a*d,f[6]=0,f[7]=(-.5*i*a-.5*s*l*o+u)*d,f[8]=0,f[9]=0,f[10]=s*A,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,function(h){if(h.length!==16)throw new Error("Array length must be 16 but got "+h.length);return[[h[0],h[1],h[2],h[3]],[h[4],h[5],h[6],h[7]],[h[8],h[9],h[10],h[11]],[h[12],h[13],h[14],h[15]]]}(f)}function AY(t){return t instanceof qt?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function dY(t){return t-2*Math.PI*Math.floor((t+Math.PI)/(2*Math.PI))}function fY(t){return t instanceof qt?t:Cq(t)}function H4(t,e){M(t.width!==0,function(){return e+" width cannot be 0."}),M(t.height!==0,function(){return e+" height cannot be 0."})}function XEe(t,e){var n=function(r,s,i,o){var a=s-r,l=o-i,c=l/a;return{scale:c,offset:i-r*c}}(0,255,e[0],e[1]);return Ae(function(){return Ee(ne(t,n.scale),n.offset)})}function qEe(t,e,n){var r=e.outputTensorSize,s=e.keepAspectRatio,i=e.outputTensorFloatRange,o=AY(t),a=function(A,d){return d?{xCenter:d.xCenter*A.width,yCenter:d.yCenter*A.height,width:d.width*A.width,height:d.height*A.height,rotation:d.rotation}:{xCenter:.5*A.width,yCenter:.5*A.height,width:A.width,height:A.height,rotation:0}}(o,n),l=function(A,d,f){if(f===void 0&&(f=!1),!f)return{top:0,left:0,right:0,bottom:0};var h=d.height,m=d.width;H4(d,"targetSize"),H4(A,"roi");var g,y,x=h/m,v=A.height/A.width,b=0,w=0;return x>v?(g=A.width,y=A.width*x,w=(1-v/x)/2):(g=A.height/x,y=A.height,b=(1-x/v)/2),A.width=g,A.height=y,{top:w,left:b,right:b,bottom:w}}(a,r,s),c=KEe(a,o.width,o.height),u=Ae(function(){var A=fY(t),d=Du(function(m,g,y){return H4(y,"inputResolution"),[1/y.width*m[0][0]*g.width,1/y.height*m[0][1]*g.width,m[0][3]*g.width,1/y.width*m[1][0]*g.height,1/y.height*m[1][1]*g.height,m[1][3]*g.height,0,0]}(c,o,r),[1,8]),f="nearest",h=ni.transform(wr(Ue(A,"float32")),d,"bilinear",f,0,[r.height,r.width]);return i!=null?XEe(h,i):h});return{imageTensor:u,padding:l,transformationMatrix:c}}function j6(t){return{xCenter:t.xMin+t.width/2,yCenter:t.yMin+t.height/2,width:t.width,height:t.height}}function YEe(t){var e=t.relativeKeypoints;if(e.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var n=Number.MAX_VALUE,r=Number.MAX_VALUE,s=Number.MIN_VALUE,i=Number.MIN_VALUE;return e.forEach(function(o){n=Math.min(n,o.x),s=Math.max(s,o.x),r=Math.min(r,o.y),i=Math.max(i,o.y)}),{xCenter:(n+s)/2,yCenter:(r+i)/2,width:s-n,height:i-r}}function L6(t,e,n,r,s){var i=n==="rect"?function(o,a,l){var c,u=o.locationData;return c=j6(u.boundingBox),c}(t):function(o,a){var l=o.locationData;return a==="boundingbox"?j6(l.relativeBoundingBox):YEe(l)}(t,e);return s&&(i.rotation=function(o,a,l){var c,u=o.locationData,A=l.rotationVectorStartKeypointIndex,d=l.rotationVectorEndKeypointIndex;c=l.rotationVectorTargetAngle?l.rotationVectorTargetAngle:Math.PI*l.rotationVectorTargetAngleDegree/180;var f=u.relativeKeypoints[A].x*a.width,h=u.relativeKeypoints[A].y*a.height,m=u.relativeKeypoints[d].x*a.width,g=u.relativeKeypoints[d].y*a.height;return dY(c-Math.atan2(-(g-h),m-f))}(t,r,s)),i}function JEe(t,e,n){for(var r=0;r<e.length;++r){var s=e[r],i=n[t[r]];i.x=s.x,i.y=s.y}}function ZEe(t,e,n,r){if(typeof e=="string"){if(e==="copy")for(var s=0;s<n.length;++s)r[t[s]].z=n[s].z}else{var i=function(o,a){for(var l=0,c=0;c<a.length;++c)l+=o[a[c]].z;return l/a.length}(r,e);for(s=0;s<t.length;++s)r[t[s]].z=i}}function eIe(t,e){for(var n=function(a){var l=[].concat.apply([],a.map(function(f){return f.indexesMapping}));if(l.length===0)throw new Error("There should be at least one landmark in indexes mapping");var c=l[0],u=l[0],A=new Set(l);A.forEach(function(f){c=Math.min(c,f),u=Math.max(u,f)});var d=A.size;if(c!==0)throw new Error("Indexes are expected to start with 0 instead of "+c);if(u+1!==d)throw new Error("Indexes should have no gaps but "+(u-d+1)+" indexes are missing");return d}(e),r=new Array(n).fill(null).map(Object),s=0;s<t.length;++s){var i=t[s],o=e[s];if(i.length!==o.indexesMapping.length)throw new Error("There are "+i.length+" refinement landmarks while mapping has "+o.indexesMapping.length);JEe(o.indexesMapping,i,r),ZEe(o.indexesMapping,o.zRefinement,i,r)}return r}function tIe(t,e){return t.map(function(n){var r=wa(wa({},n),{x:n.x*e.width,y:n.y*e.height});return n.z!=null&&(r.z=n.z*e.width),r})}function nIe(t,e){return t==="none"?e:function(n){return 1/(1+Math.exp(-n))}(e)}function DA(t,e,n,r){return Zl(this,void 0,void 0,function(){var s,i,o,a,l,c,u,A;return ec(this,function(d){switch(d.label){case 0:return n=n||e.flipHorizontally||!1,r=r||e.flipVertically||!1,s=t.size,i=s/e.numLandmarks,[4,t.data()];case 1:for(o=d.sent(),a=[],l=0;l<e.numLandmarks;++l)c=l*i,(A={x:0,y:0}).x=n?e.inputImageWidth-o[c]:o[c],i>1&&(A.y=r?e.inputImageHeight-o[c+1]:o[c+1]),i>2&&(A.z=o[c+2]),i>3&&(A.score=nIe(e.visibilityActivation,o[c+3])),a.push(A);for(u=0;u<a.length;++u)(A=a[u]).x=A.x/e.inputImageWidth,A.y=A.y/e.inputImageHeight,A.z=A.z/e.inputImageWidth/(e.normalizeZ||1);return[2,a]}})})}function M6(t,e,n){var r=t.width,s=t.height,i=t.rotation;if(n.rotation==null&&n.rotationDegree==null||(i=function(c,u){return u.rotation!=null?c+=u.rotation:u.rotationDegree!=null&&(c+=Math.PI*u.rotationDegree/180),dY(c)}(i,n)),i===0)t.xCenter=t.xCenter+r*n.shiftX,t.yCenter=t.yCenter+s*n.shiftY;else{var o=(e.width*r*n.shiftX*Math.cos(i)-e.height*s*n.shiftY*Math.sin(i))/e.width,a=(e.width*r*n.shiftX*Math.sin(i)+e.height*s*n.shiftY*Math.cos(i))/e.height;t.xCenter=t.xCenter+o,t.yCenter=t.yCenter+a}{var l=Math.max(r*e.width,s*e.height);r=l/e.width,s=l/e.height}return t.width=r*n.scaleX,t.height=s*n.scaleY,t}(f2||(f2={})).MediaPipeFaceDetector="MediaPipeFaceDetector";var z4={runtime:"tfjs",maxFaces:1,refineLandmarks:!1,landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"},V4={flipHorizontal:!1,staticImageMode:!1},Q6={shiftX:0,shiftY:0,scaleX:1.5,scaleY:1.5},rIe={outputTensorSize:{width:192,height:192},outputTensorFloatRange:[0,1]},H6={numLandmarks:468,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},sIe={numLandmarks:80,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},z6={numLandmarks:71,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},V6={numLandmarks:5,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},iIe={indexesMapping:Array.from(Array(468).keys()),zRefinement:"copy"},oIe={indexesMapping:[61,146,91,181,84,17,314,405,321,375,291,185,40,39,37,0,267,269,270,409,78,95,88,178,87,14,317,402,318,324,308,191,80,81,82,13,312,311,310,415,76,77,90,180,85,16,315,404,320,307,306,184,74,73,72,11,302,303,304,408,62,96,89,179,86,15,316,403,319,325,292,183,42,41,38,12,268,271,272,407],zRefinement:"none"},aIe={indexesMapping:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173,130,25,110,24,23,22,26,112,243,247,30,29,27,28,56,190,226,31,228,229,230,231,232,233,244,113,225,224,223,222,221,189,35,124,46,53,52,65,143,111,117,118,119,120,121,128,245,156,70,63,105,66,107,55,193],zRefinement:"none"},lIe={indexesMapping:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398,359,255,339,254,253,252,256,341,463,467,260,259,257,258,286,414,446,261,448,449,450,451,452,453,464,342,445,444,443,442,441,413,265,353,276,283,282,295,372,340,346,347,348,349,350,357,465,383,300,293,334,296,336,285,417],zRefinement:"none"},cIe={indexesMapping:[468,469,470,471,472],zRefinement:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173]},uIe={indexesMapping:[473,474,475,476,477],zRefinement:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398]},h2,AIe=function(){function t(e,n,r,s){this.detector=e,this.landmarkModel=n,this.maxFaces=r,this.withAttention=s,this.prevFaceRectsFromLandmarks=null}return t.prototype.estimateFaces=function(e,n){return Zl(this,void 0,void 0,function(){var r,s,i,o,a,l,c,u,A,d,f,h,m,g=this;return ec(this,function(y){switch(y.label){case 0:return r=function(b){if(b==null)return wa({},V4);var w=wa({},b);return w.flipHorizontal==null&&(w.flipHorizontal=V4.flipHorizontal),w.staticImageMode==null&&(w.staticImageMode=V4.staticImageMode),w}(n),e==null?(this.reset(),[2,[]]):(s=AY(e),i=Ae(function(){var b=Ue(fY(e),"float32");return r.flipHorizontal&&(b=Wn(ni.flipLeftRight(wr(b,0)),[0])),b}),o=this.prevFaceRectsFromLandmarks,r.staticImageMode||o==null||o.length<this.maxFaces?[4,this.detector.detectFaces(i,!1)]:[3,2]);case 1:return(l=y.sent()).length===0?(this.reset(),i.dispose(),[2,[]]):(a=l.map(function(b){return g.faceDetectionFrontDetectionToRoi(b,s)}),[3,3]);case 2:a=[],y.label=3;case 3:return x=.5,v=[],[a,o||[]].forEach(function(b){return b.forEach(function(w){(v=v.filter(function(C){return GEe(w,C)<=x})).push(w)})}),c=v,[4,Promise.all(c.map(function(b){return g.faceLandmark(b,i)}))];case 4:for(u=y.sent(),A=[],this.prevFaceRectsFromLandmarks=[],d=0;d<u.length;++d)(f=u[d])!=null&&(this.prevFaceRectsFromLandmarks.push(this.faceLandmarksToRoi(f,s)),(h=tIe(f,s))!=null&&h.forEach(function(b,w){var C=aY.get(w);C!=null&&(b.name=C)}),m=nT(h),A.push({keypoints:h,box:m.locationData.relativeBoundingBox}));return i.dispose(),[2,A]}var x,v})})},t.prototype.dispose=function(){this.detector.dispose(),this.landmarkModel.dispose()},t.prototype.reset=function(){this.detector.reset(),this.prevFaceRectsFromLandmarks=null},t.prototype.faceDetectionFrontDetectionToRoi=function(e,n){return M6(L6(e,"boundingbox","normRect",n,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:1,rotationVectorTargetAngleDegree:0}),n,Q6)},t.prototype.faceLandmark=function(e,n){return Zl(this,void 0,void 0,function(){var r,s,i,o,a,l,c;return ec(this,function(u){switch(u.label){case 0:return r=qEe(n,rIe,e).imageTensor,s=["output_faceflag"].concat(this.withAttention?["output_mesh_identity","output_lips","Identity_6:0","Identity_1:0","Identity_2:0","Identity_5:0"]:["output_mesh"]),i=this.landmarkModel.execute(r,s),o=i[0],a=i.slice(1),[4,o.data()];case 1:return u.sent()[0]<.5?(ft(i),ft(r),[2,null]):this.withAttention?[4,this.tensorsToFaceLandmarksWithAttention(a)]:[3,3];case 2:return l=u.sent(),[3,5];case 3:return[4,this.tensorsToFaceLandmarks(a)];case 4:l=u.sent(),u.label=5;case 5:return c=function(A,d,f){f===void 0&&(f={ignoreRotation:!1});for(var h=[],m=0,g=A;m<g.length;m++){var y=g[m],x=y.x-.5,v=y.y-.5,b=f.ignoreRotation?0:d.rotation,w=Math.cos(b)*x-Math.sin(b)*v,C=Math.sin(b)*x+Math.cos(b)*v;w=w*d.width+d.xCenter,C=C*d.height+d.yCenter;var B=y.z*d.width,S=wa({},y);S.x=w,S.y=C,S.z=B,h.push(S)}return h}(l,e),ft(i),ft(r),[2,c]}})})},t.prototype.tensorsToFaceLandmarks=function(e){return Zl(this,void 0,void 0,function(){return ec(this,function(n){return[2,DA(e[0],H6)]})})},t.prototype.tensorsToFaceLandmarksWithAttention=function(e){return Zl(this,void 0,void 0,function(){var n,r,s,i,o,a;return ec(this,function(l){switch(l.label){case 0:return[4,DA(e[0],H6)];case 1:return n=l.sent(),[4,DA(e[1],sIe)];case 2:return r=l.sent(),[4,DA(e[3],z6)];case 3:return s=l.sent(),[4,DA(e[5],z6)];case 4:return i=l.sent(),[4,DA(e[4],V6)];case 5:return o=l.sent(),[4,DA(e[2],V6)];case 6:return a=l.sent(),[2,eIe([n,r,s,i,o,a],[iIe,oIe,aIe,lIe,cIe,uIe])]}})})},t.prototype.faceLandmarksToRoi=function(e,n){return M6(L6(nT(e),"boundingbox","normRect",n,{rotationVectorStartKeypointIndex:33,rotationVectorEndKeypointIndex:263,rotationVectorTargetAngleDegree:0}),n,Q6)},t}();function dIe(t){return Zl(this,void 0,void 0,function(){var e,n,r,s;return ec(this,function(i){switch(i.label){case 0:return e=function(o){if(o==null)return wa({},z4);var a=wa({},o);return a.runtime="tfjs",a.maxFaces==null&&(a.maxFaces=z4.maxFaces),a.refineLandmarks==null&&(a.refineLandmarks=z4.refineLandmarks),a.landmarkModelUrl==null&&(a.landmarkModelUrl=a.refineLandmarks?"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/attention_mesh/1":"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"),a}(t),n=typeof e.landmarkModelUrl=="string"&&e.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,oY(e.landmarkModelUrl,{fromTFHub:n})];case 1:return r=i.sent(),[4,WEe(f2.MediaPipeFaceDetector,{modelType:"short",maxFaces:e.maxFaces,detectorModelUrl:e.detectorModelUrl,runtime:e.runtime})];case 2:return s=i.sent(),[2,new AIe(s,r,e.maxFaces,e.refineLandmarks)]}})})}function fIe(t,e){return Zl(this,void 0,void 0,function(){var n,r;return ec(this,function(s){if(t===h2.MediaPipeFaceMesh){if(r=void 0,(n=e)!=null){if(n.runtime==="tfjs")return[2,dIe(n)];if(n.runtime==="mediapipe")return[2,kEe(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r)}throw new Error(t+" is not a supported model name.")})})}(function(t){t.MediaPipeFaceMesh="MediaPipeFaceMesh"})(h2||(h2={}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hY={kernelName:xS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,im(Ue(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hIe={kernelName:ux,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=fn(Ue(n,"float32")),s=ss(We(at(1),r));return In(ze(t,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pIe={kernelName:Ax,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ss(We(fn(Ue(n,"float32")),1));return ze(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mIe={kernelName:nm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=bt(n.shape,r.shape);return{a:()=>{let a=t;const l=Fr(n.shape,s);return l.length>0&&(a=Je(a,l)),oe(a,n.shape)},b:()=>{let a=t;const l=Fr(r.shape,s);return l.length>0&&(a=Je(a,l)),oe(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gIe={kernelName:vS,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,s)=>{n[s]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yIe={kernelName:bS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>jt(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xIe={kernelName:wS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>jt(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vIe={kernelName:dx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,ss(We(at(1),fn(Ue(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bIe={kernelName:fx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ss(Ee(at(1),fn(Ue(n,"float32"))));return ze(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wIe={kernelName:mx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=bt(n.shape,r.shape);return{a:()=>{const a=Ee(fn(n),fn(r));let l=ne(t,ze(r,a));const c=Fr(n.shape,s);return c.length>0&&(l=Je(l,c)),oe(l,n.shape)},b:()=>{const a=Ee(fn(n),fn(r));let l=In(ne(t,ze(n,a)));const c=Fr(r.shape,s);return c.length>0&&(l=Je(l,c)),oe(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CIe={kernelName:hx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,Ee(fn(Ue(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIe={kernelName:px,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,We(at(1),fn(Ue(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BIe(t,e,n,r,s,i){const o=H(t,"dy","avgPool3dGrad"),a=H(e,"input","avgPool3dGrad");let l=o,c=a,u=!1;a.rank===4&&(u=!0,l=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=oe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),M(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),M(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Hs("avgPool3dGrad",s,i);const A={dy:l,input:c},d={filterSize:n,strides:r,pad:s,dimRoundingMode:i},f=re.runKernel(T_,A,d);return u?oe(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const NIe=te({avgPool3dGrad_:BIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EIe={kernelName:SS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:o,dimRoundingMode:a}=n;return{x:()=>NIe(t,r,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IIe(t,e,n,r,s){const i=H(t,"dy","avgPoolGrad"),o=H(e,"input","avgPoolGrad");M(o.rank===i.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${i.rank})`);let a=o,l=i,c=!1;o.rank===3&&(c=!0,a=oe(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),M(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),M(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const u={dy:l,input:a},A={filterSize:n,strides:r,pad:s},d=re.runKernel(k_,u,A);return c?oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const kIe=te({avgPoolGrad_:IIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TIe={kernelName:CS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:o}=n;return{x:()=>kIe(t,r,s,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FIe={kernelName:BS,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,s]=e,{transposeA:i,transposeB:o}=n;return!i&&!o?{a:()=>$t(t,s,!1,!0),b:()=>$t(r,t,!0,!1)}:!i&&o?{a:()=>$t(t,s,!1,!1),b:()=>$t(t,r,!0,!1)}:i&&!o?{a:()=>$t(s,t,!1,!0),b:()=>$t(r,t,!1,!1)}:{a:()=>$t(s,t,!0,!0),b:()=>$t(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ie={kernelName:NS,gradFunc:(t,e,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>_B(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ie={kernelName:P1e,gradFunc:(t,e,n)=>{const r=n,s=r.inputShape,i=r.shape,o=Array.from(i);for(let l=s.length-1;l>=0;l--)if(s[l]===i[l])o[l]=1;else if(s[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${i}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>Je(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OIe={kernelName:gx,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DIe={kernelName:yx,gradFunc:t=>({x:()=>jt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RIe={kernelName:xx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:s,clipValueMax:i}=n;return{x:()=>xs(ml(hA(r,s),Af(r,i)),t,jt(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PIe={kernelName:IS,inputsToSave:["x"],gradFunc:hY.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UIe={kernelName:kS,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:s}=n,i=kt(s,e[0].shape)[0],o=r.map(l=>l[i]);return Oi(t,o,i).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jIe={kernelName:TS,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{dilations:i,strides:o,pad:a,dataFormat:l}=n;return M(Ku(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>jO(r.shape,t,s,o,a,l),filter:()=>xD(r,t,s.shape,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LIe={kernelName:FS,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{strides:i,pad:o,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>Xu(t,s,i,o,a,1,l),filter:()=>xD(t,r,s.shape,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MIe(t,e,n,r,s){let i=t;t.rank===4&&(i=oe(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=oe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),M(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),M(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),M(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),M(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),M(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:i,dy:o},l={strides:r,pad:s,filterShape:n};return re.runKernel(D_,a,l)}const QIe=te({conv3DBackpropFilter_:MIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HIe={kernelName:$S,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i}=n;M(Ku(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,a]=e;return{x:()=>wX(o.shape,t,a,s,i),filter:()=>QIe(o,t,a.shape,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zIe={kernelName:vx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(In(cD(Ue(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VIe={kernelName:bx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(uD(Ue(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WIe={kernelName:_S,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s,exclusive:i,reverse:o}=n;return{x:()=>{const a=zn([s],r.rank);let l=QO(t,s,i,!o);return a!=null&&(l=Ut(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GIe={kernelName:OS,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i,dimRoundingMode:o}=n,a=r??[1,1];M(Ku(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,c]=e;return M(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),M(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),M(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),M(os(s,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${a}'.`),Hs("depthwiseConv2d",i,o),{x:()=>sq(l.shape,t,c,s,i,a,o),filter:()=>rq(l,t,c.shape,s,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KIe={kernelName:DS,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,i={x:r,filter:s,dy:t},o={x:r,filter:s,dy:t};return{x:()=>re.runKernel(Ck,i,n),filter:()=>re.runKernel(Sk,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XIe={kernelName:Cx,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>re.runKernel(V_,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qIe={kernelName:Sx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ne(Ms(In(fn(n))),2/Math.sqrt(Math.PI));return{x:()=>ne(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YIe={kernelName:Bx,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JIe={kernelName:PS,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>oe(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZIe={kernelName:Nx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,Ms(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eke={kernelName:Ex,gradFunc:t=>({x:()=>jt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tke={kernelName:Ix,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=bt(n.shape,r.shape);return{a:()=>{const a=ze(t,Ue(r,"float32")),l=Fr(n.shape,s);return l.length>0?oe(Je(a,l),n.shape):a},b:()=>{let a=ne(t,Ue(n,"float32"));const l=Fr(r.shape,s);l.length>0&&(a=oe(Je(a,l),r.shape));const c=fn(r);return In(ze(a,Ue(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nke={kernelName:US,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[s,i,o,a]=e,l=a??at(1),c=Fr(i.shape,s.shape),u=[];if(i.rank===1){for(let b=0;b<s.shape.length-1;++b)u.push(s.shape[b]);u.push(1)}const A=We(s,i),d=ne(t,l),f=oD(Ee(o,at(r))),h=ne(ne(ne(f,f),f),at(-.5));return{x:()=>i.rank===1?oe(ne(ne(t,_o(oe(f,[1,1,1,i.shape[0]]),u)),l),s.shape):oe(ne(ne(t,f),l),s.shape),mean:()=>{let b=ne(ne(f,at(-1)),d);return i.rank===1&&(b=Je(b,c)),oe(b,i.shape)},variance:()=>{let b=ne(ne(h,A),d);return i.rank===1&&(b=Je(b,c)),oe(b,i.shape)},scale:()=>{const b=ne(A,f);let w=ne(t,b);return i.rank===1&&(w=Je(w,c)),oe(w,i.shape)},offset:()=>{let b=t;return i.rank===1&&(b=Je(b,c)),oe(b,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rke={kernelName:jS,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,s]=e,{axis:i,batchDims:o}=n,a=kt(i,r.shape)[0],l=(c,u,A)=>()=>{const d=c.shape,f=u.size,h=d.slice(0,a),m=h.length,g=d.slice(i,d.length).slice(1),y=g.length,x=W6(0,m),v=W6(m+1,m+1+y),b=G6([h,[f],g]),w=oe(A,b),C=oe(u,[f]),B=G6([[m],x,v]),S=Ut(w,B);let N=mD(S,C,c.shape[a]);const k=fA(B);return N=Ut(N,k),N};if(o===1){const c=r.shape[0],u=r.split(c,0);return{x:()=>Ri(u.map((f,h)=>l(f,s.slice(h,1),t.slice(h,1))())).reshape(r.shape),indices:()=>s}}else return{x:l(r,s,t),indices:()=>s}}};function W6(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function G6(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ske={kernelName:kx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>jt(n),b:()=>jt(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ike={kernelName:Tx,gradFunc:t=>({x:()=>Ue(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oke={kernelName:Fx,gradFunc:t=>({x:()=>jt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ake={kernelName:$x,gradFunc:t=>({x:()=>jt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lke={kernelName:_x,gradFunc:t=>({x:()=>jt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cke={kernelName:MS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:s}=n,i=Mi(r,0);return{x:()=>xs(i,t,ne(t,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uke={kernelName:Dx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,Ee(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ake={kernelName:Ox,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,Ue(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dke={kernelName:j1e,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;return{logits:()=>{const o=Ms(r);return We(t,ne(Je(t,s,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fke(t,e,n,r=5,s=1,i=1,o=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:s,alpha:i,beta:o};return re.runKernel(Z_,a,l)}const hke=te({localResponseNormalizationBackprop_:fke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pke={kernelName:GS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{depthRadius:i,bias:o,alpha:a,beta:l}=n;return{x:()=>hke(r,s,t,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pY(t,e,n,r){return e.rank<n.rank&&(e=oe(e,or(e.shape,r))),t.rank<n.rank&&(t=oe(t,or(t.shape,r))),{x:()=>ne(t,Ue(Ea(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K6={kernelName:KS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:s}=r,i=e[0],o=e[1],a=kt(s,i.shape),l=pY(t,o,i,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mke={kernelName:Rx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ne(t,Ue(hA(n,r),"float32")),b:()=>ne(t,Ue(Jy(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gke(t,e,n,r,s,i,o){const a=H(t,"dy","maxPool3dGrad"),l=H(e,"input","maxPool3dGrad"),c=H(n,"output","maxPool3dGrad");let u=a,A=l,d=c,f=!1;l.rank===4&&(f=!0,u=oe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),A=oe(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=oe(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),M(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),M(A.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${A.rank}.`),M(d.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),Hs("maxPool3dGrad",i,o);const h={dy:u,input:A,output:d},m={filterSize:r,strides:s,pad:i,dimRoundingMode:o},g=re.runKernel(tO,h,m);return f?oe(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const yke=te({maxPool3dGrad_:gke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xke={kernelName:qS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=n;return{x:()=>yke(t,r,s,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vke(t,e,n,r,s,i,o){const a=H(t,"dy","maxPoolGrad"),l=H(e,"input","maxPoolGrad"),c=H(n,"output","maxPoolGrad");M(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),M(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),M(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Hs("maxPoolGrad",i,o);const u={dy:a,input:l,output:c},A={filterSize:r,strides:s,pad:i,dimRoundingMode:o};return re.runKernel(eO,u,A)}const bke=te({maxPoolGrad_:vke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wke={kernelName:XS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:o,pad:a}=n;return{x:()=>bke(t,r,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cke={kernelName:YS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n,i=kt(s,r.shape),a=Wr(r.shape,i)[1],l=ye(a);return{x:()=>{const u=r.shape.slice();i.forEach(f=>{u[f]=1});const A=oe(t,u);return ze(ne(A,Ei(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ske={kernelName:JS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:s}=r,[i,o]=e,a=kt(s,i.shape),l=pY(t,o,i,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bke={kernelName:Px,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ne(t,Ue(Af(n,r),"float32")),b:()=>ne(t,Ue(Mi(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nke={kernelName:ZS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(o=>o[0]);return{x:()=>ct(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eke={kernelName:Ux,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=bt(n.shape,r.shape);return{a:()=>{const a=Fr(n.shape,s);return a.length>0?oe(Je(t,a),n.shape):t},b:()=>{const a=ne(t,In(Av(ze(n,r)))),l=Fr(r.shape,s);return l.length>0?oe(Je(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ike={kernelName:jx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=bt(n.shape,r.shape);return{a:()=>{const a=ne(t,Ue(r,"float32")),l=Fr(n.shape,s);return l.length>0?oe(Je(a,l),n.shape):a},b:()=>{const a=ne(t,Ue(n,"float32")),l=Fr(r.shape,s);return l.length>0?oe(Je(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kke={kernelName:eB,gradFunc:t=>({x:()=>In(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tke={kernelName:rB,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Sr(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fke={kernelName:nB,gradFunc:t=>({x:()=>jt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ke={kernelName:sB,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Vo(t,r).map(i=>()=>i)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X6={kernelName:iB,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(o=>o[0]);return{x:()=>ct(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ke={kernelName:Lx,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,s]=e,i=n,o=r,a=bt(i.shape,o.shape);return{a:()=>{const u=Ue(o,"float32");let A=ne(t,ne(u,mc(i,We(u,at(1)))));const d=Fr(i.shape,a);return d.length>0&&(A=Je(A,d)),oe(A,i.shape)},b:()=>{const u=Mi(i,0),A=xs(u,so(i),jt(i));let d=ne(t,ne(s,A));const f=Fr(o.shape,a);return f.length>0&&(d=Je(d,f)),oe(d,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oke={kernelName:oB,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,s=Mi(n,0);return{x:()=>xs(s,t,ne(t,r)),alpha:()=>{let i=xs(s,jt(t),ne(t,n));const o=Fr(r.shape,t.shape);return o.length>0&&(i=Je(i,o)),oe(i,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dke(t,e,n){const r=t.shape.slice();r[n]=1;const s=oe(e,r),i=u2(t,n,!0,!1),o=u2(t,n,!0,!0),a=ne(i,o);return ne(s,a)}function Rke(t,e,n){const r=t.shape.length,s=r-n.length,i=zn(n,r);let o=t;i!=null&&(o=Ut(t,i));const a=o.shape.slice(),c=a.splice(r-n.length,n.length).reduce((d,f)=>d*f,1);a.push(c);const u=o.reshape(a);let A=Dke(u,e,s);if(A=A.reshape(o.shape),i!=null){const d=fA(i);A=Ut(A,d)}return A}const Pke={kernelName:aB,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;let i=[];return s==null?i=r.shape.map((o,a)=>a):typeof s=="number"?i=[s]:i=s,{x:()=>Rke(r,t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uke={kernelName:wx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=bt(n.shape,r.shape);return{a:()=>{const a=ze(t,Ue(r,"float32")),l=Fr(n.shape,s);return l.length>0?oe(Je(a,l),n.shape):a},b:()=>{let a=ne(t,Ue(n,"float32"));const l=Fr(r.shape,s);l.length>0&&(a=oe(Je(a,l),r.shape));const c=fn(r);return In(ze(a,Ue(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jke={kernelName:Mx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,In(fn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lke={kernelName:Hx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ne(Af(n,6),im(n));return{x:()=>ne(t,Ue(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mke={kernelName:Qx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,Ue(im(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qke={kernelName:lB,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>oe(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hke={kernelName:uB,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>re.runKernel(fO,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zke={kernelName:cB,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>re.runKernel(dO,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vke={kernelName:AB,gradFunc:(t,e,n)=>{const{dims:r}=n,s=kt(r,t.shape);return{x:()=>zo(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wke={kernelName:zx,gradFunc:t=>({x:()=>jt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gke={kernelName:Vx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>In(ze(t,ne(mc(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kke={kernelName:dB,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Ue(jt(n),"float32"),t:()=>ne(t,Ue(n,t.dtype)),e:()=>ne(t,Ue(TB(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xke={kernelName:Wx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Mi(n,at(0)),s=at(GB),i=at(KB),o=ne(t,i),a=ne(ne(t,s),Ms(Ue(n,"float32")));return xs(r,o,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qke={kernelName:qx,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,ne(n,We(at(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yke={kernelName:Xx,gradFunc:t=>({x:()=>jt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jke={kernelName:Gx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(BB(Ue(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zke={kernelName:Kx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(MO(Ue(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eTe={kernelName:fB,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:s,size:i}=n,o=r.shape,[a,l]=VB(r,s,i),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],o[u]-a[u]-l[u]]);return{x:()=>pA(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tTe={kernelName:gB,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:s}=n,i=!0,o=ne(t,r);return{logits:()=>We(o,ne(Je(o,[s],i),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nTe={kernelName:Yx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,ba(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q6={kernelName:pB,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>SB(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y6={kernelName:mB,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>qn(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rTe={kernelName:Jx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,ne(ss(Ue(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sTe={kernelName:wO,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,ne(Ue(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iTe={kernelName:Zx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=at(2);return{a:()=>ne(t,ne(s,We(n,r))),b:()=>ne(t,ne(s,We(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oTe={kernelName:sv,gradFunc:t=>({x:()=>jt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aTe={kernelName:ev,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=bt(n.shape,r.shape);return{a:()=>{let a=t;const l=Fr(n.shape,s);return l.length>0&&(a=Je(a,l)),oe(a,n.shape)},b:()=>{let a=t;const l=Fr(r.shape,s);return l.length>0&&(a=Je(a,l)),oe(In(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lTe={kernelName:hB,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,s=r.shape.slice(),{axis:i}=n;kt(i,r.shape).forEach(c=>{s[c]=1});const a=oe(t,s),l=ne(a,Ei(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cTe={kernelName:tv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,fn(BB(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uTe={kernelName:nv,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(We(at(1),fn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATe={kernelName:rv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:s}=n;return{x:()=>{let o=jt(r);if(r.rank===1)for(let a=0;a<s[0];++a)o=Ee(o,ct(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)o=Ee(o,ct(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)o=Ee(o,ct(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)for(let u=0;u<s[3];++u)o=Ee(o,ct(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dTe={kernelName:kh,gradFunc:(t,e,n)=>{const r=n,{perm:s}=r,i=fA(s);return{x:()=>Ut(t,i)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fTe={kernelName:xB,gradFunc:(t,e,n)=>{const r=n,{axis:s}=r;return{value:()=>Ri(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hTe={kernelName:vB,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>pTe(t,n)}}};function pTe(t,e){const n=Fc(e,jt(e)),r=dv(t,n);let s=hA(e,at(0,"int32"));const i=r.rank-s.rank;for(let a=0;a<i;++a)s=wr(s,a+1);s=ml(s,Ei(r.shape,"bool"));const o=jt(r);return xs(s,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mTe={kernelName:bB,gradFunc:t=>({x:()=>jt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gTe=[hY,hIe,pIe,mIe,gIe,yIe,xIe,vIe,bIe,wIe,CIe,SIe,EIe,TIe,FIe,$Ie,_Ie,OIe,DIe,RIe,PIe,UIe,LIe,jIe,HIe,zIe,VIe,WIe,GIe,KIe,Uke,XIe,qIe,YIe,JIe,ZIe,tke,eke,nke,rke,ske,ike,oke,ake,lke,cke,uke,Ake,dke,pke,K6,K6,mke,xke,wke,Cke,Ske,Bke,Nke,Eke,Ike,kke,Tke,Fke,$ke,X6,X6,_ke,Oke,Pke,jke,Lke,Mke,Qke,Hke,zke,Vke,Wke,Gke,Kke,Xke,qke,Yke,Jke,Zke,eTe,tTe,nTe,q6,q6,Y6,Y6,rTe,iTe,sTe,oTe,aTe,lTe,cTe,uTe,ATe,dTe,fTe,hTe,mTe];for(const t of gTe)M1e(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.abs=function(){return this.throwIfDisposed(),vr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.acos=function(){return this.throwIfDisposed(),rX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.acosh=function(){return this.throwIfDisposed(),sX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.add=function(t){return this.throwIfDisposed(),Ee(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.all=function(t,e){return this.throwIfDisposed(),RO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.any=function(t,e){return this.throwIfDisposed(),c2(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.argMax=function(t){return this.throwIfDisposed(),ap(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.argMin=function(t){return this.throwIfDisposed(),iX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.asScalar=function(){return this.throwIfDisposed(),M(this.size===1,()=>"The array must have only 1 element."),oe(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.asType=function(t){return this.throwIfDisposed(),Ue(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.as1D=function(){return this.throwIfDisposed(),oe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.as2D=function(t,e){return this.throwIfDisposed(),oe(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),oe(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),oe(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.as5D=function(t,e,n,r,s){return this.throwIfDisposed(),oe(this,[t,e,n,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.asin=function(){return this.throwIfDisposed(),oX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.asinh=function(){return this.throwIfDisposed(),aX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.atan=function(){return this.throwIfDisposed(),lX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.atan2=function(t){return this.throwIfDisposed(),cX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.atanh=function(){return this.throwIfDisposed(),uX(this)};ve().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),CB(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),SB(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.batchNorm=function(t,e,n,r,s){return this.throwIfDisposed(),av(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.broadcastTo=function(t){return this.throwIfDisposed(),$h(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.cast=function(t){return this.throwIfDisposed(),Ue(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.ceil=function(){return this.throwIfDisposed(),mX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),oi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof qt&&(t=[t]),qn([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.conv1d=function(t,e,n,r,s,i){return this.throwIfDisposed(),UO(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.conv2dTranspose=function(t,e,n,r,s){return this.throwIfDisposed(),LO(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.conv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),Xu(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.cos=function(){return this.throwIfDisposed(),BB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.cosh=function(){return this.throwIfDisposed(),MO(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),u2(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),QO(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),SX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.depthwiseConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),lv(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.dilation2d=function(t,e,n,r,s){return this.throwIfDisposed(),BX(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.divNoNan=function(t){return this.throwIfDisposed(),NX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.div=function(t){return this.throwIfDisposed(),ze(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.dot=function(t){return this.throwIfDisposed(),EX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.elu=function(){return this.throwIfDisposed(),cv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.equal=function(t){return this.throwIfDisposed(),Ea(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.erf=function(){return this.throwIfDisposed(),HO(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),TX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.exp=function(){return this.throwIfDisposed(),Ms(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.expandDims=function(t){return this.throwIfDisposed(),wr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.expm1=function(){return this.throwIfDisposed(),FX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.fft=function(){return this.throwIfDisposed(),jB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.flatten=function(){return this.throwIfDisposed(),oe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.floor=function(){return this.throwIfDisposed(),Av(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.floorDiv=function(t){return this.throwIfDisposed(),DO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.gather=function(t,e,n){return this.throwIfDisposed(),dv(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.greaterEqual=function(t){return this.throwIfDisposed(),hA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.greater=function(t){return this.throwIfDisposed(),Mi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.ifft=function(){return this.throwIfDisposed(),t0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.irfft=function(){return this.throwIfDisposed(),dD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.isFinite=function(){return this.throwIfDisposed(),$X(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.isInf=function(){return this.throwIfDisposed(),_X(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.isNaN=function(){return this.throwIfDisposed(),OX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.leakyRelu=function(t){return this.throwIfDisposed(),EB(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.lessEqual=function(t){return this.throwIfDisposed(),Af(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.less=function(t){return this.throwIfDisposed(),Jy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),DX(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.logSigmoid=function(){return this.throwIfDisposed(),RX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.logSoftmax=function(t){return this.throwIfDisposed(),WO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),kB(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.log=function(){return this.throwIfDisposed(),so(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.log1p=function(){return this.throwIfDisposed(),IB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.logicalAnd=function(t){return this.throwIfDisposed(),ml(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.logicalNot=function(){return this.throwIfDisposed(),TB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.logicalOr=function(t){return this.throwIfDisposed(),GO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.logicalXor=function(t){return this.throwIfDisposed(),PX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),$t(this,t,e,n)};ve().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),FB(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.max=function(t,e){return this.throwIfDisposed(),jo(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.maximum=function(t){return this.throwIfDisposed(),Fc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.mean=function(t,e){return this.throwIfDisposed(),Kn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.min=function(t,e){return this.throwIfDisposed(),Yy(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.minimum=function(t){return this.throwIfDisposed(),Xd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),jX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.mod=function(t){return this.throwIfDisposed(),LX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.mul=function(t){return this.throwIfDisposed(),ne(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.neg=function(){return this.throwIfDisposed(),In(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.norm=function(t,e,n){return this.throwIfDisposed(),uv(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.notEqual=function(t){return this.throwIfDisposed(),cp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),XO(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.onesLike=function(){return this.throwIfDisposed(),io(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.pad=function(t,e){return this.throwIfDisposed(),pA(this,t,e)};ve().prototype.pool=function(t,e,n,r,s,i){return this.throwIfDisposed(),MX(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.pow=function(t){return this.throwIfDisposed(),mc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.prelu=function(t){return this.throwIfDisposed(),OB(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.prod=function(t,e){return this.throwIfDisposed(),QX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.reciprocal=function(){return this.throwIfDisposed(),zX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.relu=function(){return this.throwIfDisposed(),wl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.relu6=function(){return this.throwIfDisposed(),sD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.reshapeAs=function(t){return this.throwIfDisposed(),oe(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.reshape=function(t){return this.throwIfDisposed(),oe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),aq(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),lq(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.reverse=function(t){return this.throwIfDisposed(),zo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.rfft=function(){return this.throwIfDisposed(),LB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.round=function(){return this.throwIfDisposed(),iD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.rsqrt=function(){return this.throwIfDisposed(),oD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.selu=function(){return this.throwIfDisposed(),aD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.separableConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),lD(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.sigmoid=function(){return this.throwIfDisposed(),ba(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.sign=function(){return this.throwIfDisposed(),VX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.sin=function(){return this.throwIfDisposed(),cD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.sinh=function(){return this.throwIfDisposed(),uD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.slice=function(t,e){return this.throwIfDisposed(),ct(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.softmax=function(t){return this.throwIfDisposed(),UB(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.softplus=function(){return this.throwIfDisposed(),sm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),_B(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.split=function(t,e){return this.throwIfDisposed(),Oi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.sqrt=function(){return this.throwIfDisposed(),ss(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.square=function(){return this.throwIfDisposed(),fn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.squaredDifference=function(t){return this.throwIfDisposed(),fD(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.squeeze=function(t){return this.throwIfDisposed(),Wn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof qt?[this,t]:[this,...t];return Ri(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.step=function(t){return this.throwIfDisposed(),im(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.stridedSlice=function(t,e,n,r,s,i,o,a){return this.throwIfDisposed(),WX(this,t,e,n,r,s,i,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.sub=function(t){return this.throwIfDisposed(),We(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.sum=function(t,e){return this.throwIfDisposed(),Je(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.tan=function(){return this.throwIfDisposed(),GX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.tanh=function(){return this.throwIfDisposed(),Kd(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.tile=function(t){return this.throwIfDisposed(),_o(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.toBool=function(){return this.throwIfDisposed(),Ue(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.toFloat=function(){return this.throwIfDisposed(),Ue(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.toInt=function(){return this.throwIfDisposed(),Ue(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.topk=function(t,e){return this.throwIfDisposed(),qX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.transpose=function(t){return this.throwIfDisposed(),Ut(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.unique=function(t){return this.throwIfDisposed(),YX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),mD(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.unstack=function(t){return this.throwIfDisposed(),Vo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.where=function(t,e){return this.throwIfDisposed(),xs(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.zerosLike=function(){return this.throwIfDisposed(),jt(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ja extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ja.prototype)}}class Oo extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Oo.prototype)}}class ce extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ce.prototype)}}class Ct extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ct.prototype)}}class ZD extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ZD.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class mY{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Jd(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Za(t,e){if(!t)throw new ZD(e)}function J6(t,e){let n=0;for(const r of t)r===e&&n++;return n}function ei(t){return t.length===1?t[0]:t}function en(t){return Array.isArray(t)?t:[t]}function Vl(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function JA(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let fo={};function eR(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function rT(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>rT(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:rT(r))}}}function mv(t,e={},n={},r="object",s=!1){if(typeof t=="string"){const i=t;let o;if(i in n)o=n[i];else if(i in fo)o=fo[i];else if(o=e[i],o==null)throw new ce(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const i=t;if(i.className==null||i.config==null)throw new ce(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const o=i.className;let a,l;if(o in n?[a,l]=n[o]:o in fo?[a,l]=fo.className:o in e&&([a,l]=e[o]),a==null)throw new ce(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const f of Object.keys(fo))c[f]=fo[f];for(const f of Object.keys(n))c[f]=n[f];const u=i.config;u.customObjects=c;const A=Object.assign({},fo);for(const f of Object.keys(n))fo[f]=n[f];rT(i.config);const d=l(a,i.config,n,s);return fo=Object.assign({},A),d}else{const c=Object.assign({},fo);for(const A of Object.keys(n))fo[A]=n[A];const u=new a(i.config);return fo=Object.assign({},c),u}}}function yTe(t,e){return t<e?-1:t>e?1:0}function lb(t,e){return-1*yTe(t,e)}function Ru(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function xTe(t){if(t==null)throw new ce(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function pf(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new ce(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function tR(t,e,n=0,r=1/0){return Za(n>=0),Za(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(s=>typeof s===e)}function Hr(t,e){Array.isArray(t)?(M(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Hr(n,`element ${r+1} of ${e}`))):M(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${gY(t)}.`)}function gY(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>gY(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function vTe(t,e,n){let r=n!=null?n():Js(),s;return(...o)=>{const a=n!=null?n():Js();return a-r<e||(r=a,s=t(...o)),s}}function yY(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let bTe=0;function xY(){return bTe++}const cb={};function XB(t=""){return t in cb||(cb[t]=0),cb[t]+=1,t+cb[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const wTe=["channelsFirst","channelsLast"],CTe=["nearest","bilinear"],STe=["valid","same","causal"],BTe=["max","avg"],NTe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Qf=new Map;function lr(t){pf(wTe,"DataFormat",t)}function ETe(t){pf(CTe,"InterpolationFormat",t)}function co(t){pf(STe,"PaddingMode",t)}function vY(t){pf(BTe,"PoolMode",t)}const uy=[],Z6="/";function kd(t,e){uy.push(t);try{const n=e();return uy.pop(),n}catch(n){throw uy.pop(),n}}function ITe(){return uy.length===0?"":uy.join(Z6)+Z6}function bY(t){if(!CY(t))throw new Error("Not a valid tensor name: '"+t+"'");return ITe()+t}function wY(t){if(!CY(t))throw new Error("Not a valid tensor name: '"+t+"'");Qf.has(t)||Qf.set(t,0);const e=Qf.get(t);if(Qf.set(t,Qf.get(t)+1),e>0){const n=`${t}_${e}`;return Qf.set(n,1),n}else return t}const kTe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function CY(t){return!!t.match(kTe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function TTe(t){return t===parseInt(t.toString(),10)}function Pu(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let s=e;s<n;++s)r*=t[s];return r}function Ap(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function Yu(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Ia(t,e){if(e<t)throw new ce(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let W4;function Br(){return W4==null&&(W4=MK().epsilon()),W4}function ka(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function dl(t,e){return Ue(t,e)}function gv(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),oe(t,n)}function FTe(t,e){return Ae(()=>{if(t.shape.length!==2)throw new ce(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=gv(t,1);return sT(n,[1,e,1])})}function $Te(t){const e=[Pu(t.shape)];return oe(t,e)}function _Te(t){if(t.rank<=1)throw new ce(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Pu(t.shape,1)];return oe(t,e)}function Td(t,e,n){return Ae(()=>{switch(t.rank){case 1:return RB(t,e,n);case 2:return AD(t,[e,0],[n,t.shape[1]]);case 3:return PB(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return e0(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return ct(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return ct(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new ce(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function G4(t,e,n){return Ae(()=>{switch(t.rank){case 1:return RB(t,e,n);case 2:return AD(t,[0,e],[t.shape[0],n]);case 3:return PB(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return e0(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new ce(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function ub(t,e,n,r){return Ae(()=>{switch(t.rank){case 1:return RB(t,e,n);case 2:switch(r){case 1:return Td(t,e,n);case 2:return G4(t,e,n);default:throw new ce(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Td(t,e,n);case 2:return PB(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return G4(t,e,n);default:throw new ce(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Td(t,e,n);case 2:return e0(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return e0(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return G4(t,e,n);default:throw new ce(`The axis is not within the rank of the tensor ${r}`)}default:throw new ce(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function nR(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),qn(t,e)}function e5(t,e){switch(t.rank){case 1:return gX([t,e]);case 2:return yX([t,e],0);case 3:return xX([t,e],0);case 4:return vX([t,e],0);default:throw new ce(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function sT(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new ce(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return _o(t,e)}function qB(t,e=0,n=1,r,s){return rD(t,e,n,r,s)}function fl(t,e,n,r){if(t.rank<2||e.rank<2)throw new Ct(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=t.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(s!==i)throw new Ct(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return Mk({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?iT(t.rank,r,ka()):null,activation:n});{const s=t.shape.slice(),i=s.pop();t=oe(t,[-1,i]);const o=e.shape.slice(),a=o.pop(),l=o.pop(),c=[...o,a],u=Array.from({length:e.rank},(h,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=oe(Ut(e,u),[l,-1]);const A=[...s,...c];return oe(Mk({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?iT(t.rank,r,ka()):null,activation:n}),A)}}function SY(t,e,n){return Ae(()=>(Array.isArray(e)?e=mr(e,"int32"):e=Ue(e,"int32"),dv(t,e,n)))}function yv(t){return ne(t,t)}function iT(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new ce(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?oe(e,[1,r[0],1,1,1]):oe(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?oe(e,[1,1,1,1,r[0]]):oe(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?oe(e,[1,r[0],1,1]):oe(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?oe(e,[1,1,1,r[0]]):oe(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?oe(e,[1,r[0],1]):oe(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?oe(e,[1,1,r[0]]):oe(e,[1].concat(r))}else if(t<3)return e;throw new ce(`Unsupported input rank by biasAdd: ${e.rank}`)}function Da(t,e,n){return Ae(()=>(n==null&&(n=ka()),lr(n),Ee(t,iT(t.rank,e,n))))}function OTe(t,e=1){if(e!==1)throw new Ct(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return cv(t)}function DTe(t){return Ae(()=>ze(t,Ee(vr(t),1)))}function BY(t,e,n,r){return Ae(()=>eq(t,e,n,r))}function RTe(t){return Ae(()=>{const e=Ee(.5,ne(.2,t));return oi(e,0,1)})}function xv(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const PTe=["fanIn","fanOut","fanAvg"],UTe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jTe(t){pf(PTe,"FanMode",t)}function LTe(t){pf(UTe,"Distribution",t)}class qo extends am{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class NY extends qo{apply(e,n){return Sr(e,n)}}NY.className="Zeros";Fe(NY);class rR extends qo{apply(e,n){return Ei(e,n)}}rR.className="Ones";Fe(rR);class EY extends qo{constructor(e){if(super(),typeof e!="object")throw new ce(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new ce(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return Ae(()=>ne(at(this.value),Ei(e,n)))}getConfig(){return{value:this.value}}}EY.className="Constant";Fe(EY);class IY extends qo{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return ff(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}IY.className="RandomUniform";Fe(IY);class kY extends qo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ct(`randomNormal does not support dType ${n}.`);return qB(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}kY.className="RandomNormal";Fe(kY);class TY extends qo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ct(`truncatedNormal does not support dType ${n}.`);return pD(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}TY.className="TruncatedNormal";Fe(TY);class FY extends qo{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return Ae(()=>{if(e.length!==2||e[0]!==e[1])throw new ce("Identity matrix initializer can only be used for 2D square matrices.");return ne(this.gain,VO(e[0]))})}getConfig(){return{gain:this.gain}}}FY.className="Identity";Fe(FY);function MTe(t,e="channelsLast"){let n,r;if(lr(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=Pu(t,2);n=t[1]*s,r=t[0]*s}else if(e==="channelsLast"){const s=Pu(t,0,t.length-2);n=t[t.length-2]*s,r=t[t.length-1]*s}}else{const s=Pu(t);n=Math.sqrt(s),r=Math.sqrt(s)}return[n,r]}class Pi extends qo{constructor(e){if(super(),e.scale<0)throw new ce(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,jTe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,LTe(this.distribution),this.seed=e.seed}apply(e,n){const r=MTe(e),s=r[0],i=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,s):this.mode==="fanOut"?o/=Math.max(1,i):o/=Math.max(1,(s+i)/2),this.distribution==="normal"){const a=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ct(`${this.getClassName()} does not support dType ${n}.`);return pD(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*o);return ff(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Pi.className="VarianceScaling";Fe(Pi);class sR extends Pi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Pi.className}}sR.className="GlorotUniform";Fe(sR);class iR extends Pi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Pi.className}}iR.className="GlorotNormal";Fe(iR);class oR extends Pi{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Pi.className}}oR.className="HeNormal";Fe(oR);class aR extends Pi{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Pi.className}}aR.className="HeUniform";Fe(aR);class lR extends Pi{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Pi.className}}lR.className="LeCunNormal";Fe(lR);class cR extends Pi{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Pi.className}}cR.className="LeCunUniform";Fe(cR);class $Y extends qo{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return Ae(()=>{if(e.length<2)throw new Ct("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=ye(e.slice(0,-1)),s=e[e.length-1],i=r*s;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const o=[Math.max(s,r),Math.min(s,r)],a=qB(o,0,1,n,this.seed),l=cq.qr(a,!1);let c=l[0];const A=l[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return c=ne(c,A.sign()),r<s&&(c=c.transpose()),ne(at(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}$Y.className="Orthogonal";Fe($Y);const t5={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function n5(t,e={}){return mv(t,Bo.getMap().classNameMap,e,"initializer")}function Qn(t){return eR(t)}function Dn(t){if(typeof t=="string"){const e=t in t5?t5[t]:t;if(e==="GlorotNormal")return new iR;if(e==="GlorotUniform")return new sR;if(e==="HeNormal")return new oR;if(e==="HeUniform")return new aR;if(e==="LeCunNormal")return new lR;if(e==="LeCunUniform")return new cR;{const n={};return n.className=e,n.config={},n5(n)}}else return t instanceof qo?t:n5(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function oT(t){return Array.isArray(t)&&Array.isArray(t[0])}function p2(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function At(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new ce(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function zt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new ce(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function m2(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,s)=>r*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const r5="Variable";class QTe{constructor(e,n="float32",r=r5,s=!0,i=null){this.dtype=n??"float32",this.shape=e.shape,this.id=xY(),r=r??r5,this.originalName=bY(r),this.name=wY(this.originalName),this.trainable_=s,this.constraint=i,this.val=JX(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),HTe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function HTe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function aT(t){return t.map(e=>e.read())}function uR(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Nr{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class gl{constructor(e,n,r,s,i,o,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=s,this.callArgs=i,this.outputTensorIndex=a,this.id=xY(),o!=null&&(this.originalName=bY(o),this.name=wY(this.originalName)),this.rank=n.length}}let zTe=0,YB=class{constructor(e,n){this.callArgs=n,this.id=zTe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},VTe=0,Tt=class extends am{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=VTe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Vl(r)+"_"+XB(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),r=[i].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Oo(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new ce(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return ei(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return ei(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Ja(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Ja(`Layer ${this.name} is not connected, no input to return.`);return ei(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Ja(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Ja(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return ei(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=en(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=en(this.inputSpec);if(n.length!==r.length)throw new ce(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let s=0;s<n.length;s++){const i=n[s],o=r[s];if(o==null)continue;const a=i.rank;if(o.ndim!=null&&a!==o.ndim)throw new ce(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(o.maxNDim!=null&&a>o.maxNDim)throw new ce(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(o.minNDim!=null&&a<o.minNDim)throw new ce(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(o.dtype!=null&&i.dtype!==o.dtype)throw new ce(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${i.dtype}.`);if(o.axes){const l=i.shape;for(const c in o.axes){const u=Number(c),A=o.axes[c],d=u>=0?l[u]:l[l.length+u];if(A!=null&&[A,null].indexOf(d)===-1)throw new ce(`Input ${s} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${A} but got shape ${l}.`)}}if(o.shape!=null)for(let l=0;l<o.shape.length;++l){const c=o.shape[l],u=i.shape[l];if(c!=null&&u!=null&&c!==u)throw new ce(`Input ${s} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=en(e),s=KTe(e),i=XTe(e);if(s===i)throw new ce("Arguments to apply() must be all SymbolicTensors or all Tensors");return kd(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const a of en(e))o.push(a.shape);this.build(ei(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let o=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,o);const a=en(o),l=[];for(let c of a)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(o=ei(l),this.activityRegularizer!=null)throw new Ct("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=WTe(e),a=this.computeOutputShape(o);let l;const c=GTe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,A)=>new gl(c,u,this,en(e),n,this.name,A)):l=new gl(c,a,this,en(e),n,this.name),this.addInboundNode(e,l,null,null,o,a,n),this._refCount++,this.activityRegularizer!=null)throw new Ct("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Ja(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Ja(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Oo(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return m2(this.weights)}build(e){this.built=!0}getWeights(e=!1){return aT(e?this.trainableWeights:this.weights)}setWeights(e){Ae(()=>{const n=this.weights;if(n.length!==e.length)throw new ce(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],s=aT(n);for(let i=0;i<s.length;++i){const o=s[i],a=n[i],l=e[i];if(!_t(o.shape,l.shape))throw new ce(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}uR(r)})}addWeight(e,n,r,s,i,o,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new ce(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():Dn("zeros"));const c=s.apply(n,r),u=new QTe(c,r,e,o,a);return c.dispose(),i!=null&&this.addLoss(()=>i.apply(u.read())),o==null&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=en(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),i=en(n),o=en(s);if(i.length!==o.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let a=0;a<i.length;a++)i[a].kerasMask=o[a]}addInboundNode(e,n,r,s,i,o,a=null){const l=en(e);n=en(n),r=en(r),s=en(s),i=p2(i),o=p2(o);const c=[],u=[],A=[];for(const d of l)c.push(d.sourceLayer),u.push(d.nodeIndex),A.push(d.tensorIndex);new YB({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:A,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:s,inputShapes:i,outputShapes:o},a);for(let d=0;d<n.length;d++)n[d].sourceLayer=this,n[d].nodeIndex=this.inboundNodes.length-1,n[d].tensorIndex=d}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function WTe(t){t=en(t);const e=[];for(const n of t)e.push(n.shape);return ei(e)}function GTe(t){return"float32"}function _Y(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let i=0;i<r.inboundLayers.length;i++){const o=r.inputTensors[i],a=r.inboundLayers[i],l=r.nodeIndices[i],c=_Y(o,a,l);for(const u of c)s.indexOf(u)===-1&&s.push(u)}return s}}}function KTe(t){let e=!0;for(const n of en(t))if(!(n instanceof gl)){e=!1;break}return e}function XTe(t){let e=!0;for(const n of en(t))if(n instanceof gl){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class vv extends Tt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:XB("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new ce("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new ce("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new ce("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const s=new gl(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new YB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new ce(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}vv.className="InputLayer";Fe(vv);function qTe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new ce("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new vv({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function YTe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Ue(e,t.dtype)}catch{throw new ce(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class yu{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof yu)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=YTe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new ce(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof gl){if(this.id2Value[e.id]==null)throw new ce(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ce(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof gl){if(this.id2Value[e.id]==null)throw new ce(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ce(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&ft(this.id2Mask)}}const g2=new mY,y2=new mY;function JTe(t){g2!=null&&g2.setMaxEntries(t),y2!=null&&y2.setMaxEntries(t)}function Lg(t,e,n,r){const s=n==null?!1:n.training,i=Array.isArray(t),o=i?t:[t],a=o.map(h=>h.name),l=[],c=e.names();for(const h of a)c.indexOf(h)!==-1?l.push(e.getValue(h)):l.push(null);const u=a.join(",")+"|"+e.names().sort().join(",");let A=g2.get(u),d;if(A==null){const h=ZTe(o,e);A=h.sorted,d=h.recipientCounts,g2.put(u,A),y2.put(u,d)}d={},s||Object.assign(d,y2.get(u));const f=new yu(e);for(let h=0;h<A.length;++h){const m=A[h],g=m.sourceLayer;if(g instanceof vv)continue;const y=[],x=[],v=[];let b=!1;for(const N of m.inputs){const k=f.getValue(N),O=f.getMask(N);y.push(k),x.push(O),O!=null&&(b=!0),s||(d[N.name]--,d[N.name]===0&&!e.hasKey(N)&&a.indexOf(N.name)===-1&&!k.isDisposed&&N.sourceLayer.stateful!==!0&&v.push(k))}b&&(n=n||{},n.mask=x[0]);const w=en(g.apply(y,n));let C=null;g.supportsMasking&&(C=g.computeMask(y,x));const B=tFe(m),S=Array.isArray(B)?B:[B];for(let N=0;N<S.length;++N){f.hasKey(S[N])||f.add(S[N],w[N],Array.isArray(C)?C[0]:C);const k=a.indexOf(S[N].name);k!==-1&&(l[k]=w[N])}s||ft(v)}return f.disposeMasks(),i?l:l[0]}function ZTe(t,e){M(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const s=s5(t[0],e);n=s.sorted,r=s.recipientMap}else{const s=new Set;for(const i of t){const{sorted:o,recipientMap:a}=s5(i,e);for(const l of o)s.has(l.name)||(n.push(l),s.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:eFe(r)}}function eFe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function s5(t,e){const n=new Set,r=[],s={};for(const a of e.names())n.add(a);const i=[],o=[];for(i.push(t);i.length>0;){const a=i[i.length-1];if(n.has(a.name)){i.pop();continue}const l=o[o.length-1]===i.length-1;if(a.inputs.length===0||l)i.pop(),r.push(a),n.add(a.name),l&&o.pop();else{o.push(i.length-1);for(const c of a.inputs)s[c.name]==null&&(s[c.name]=new Set),s[c.name].add(a.name),!n.has(c.name)&&i.push(c)}}return{sorted:r,recipientMap:s}}function tFe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const s of t.sourceLayer.inboundNodes[r].outputTensors)if(s.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nFe=he();nFe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,JTe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function AR(t,e){return Ae(()=>ss(Je(ne(t,t),e,!0)))}class bv extends am{getConfig(){return{}}}class OY extends bv{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ae(()=>{const n=AR(e,this.axis),r=oi(n,0,this.maxValue);return ne(e,ze(r,Ee(Br(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}OY.className="MaxNorm";Fe(OY);class DY extends bv{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ae(()=>ze(e,Ee(Br(),AR(e,this.axis))))}getConfig(){return{axis:this.axis}}}DY.className="UnitNorm";Fe(DY);class RY extends bv{apply(e){return wl(e)}}RY.className="NonNeg";Fe(RY);class PY extends bv{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ae(()=>{const n=AR(e,this.axis),r=Ee(ne(this.rate,oi(n,this.minValue,this.maxValue)),ne(1-this.rate,n));return ne(e,ze(r,Ee(Br(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}PY.className="MinMaxNorm";Fe(PY);const i5={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Ir(t){return eR(t)}function o5(t,e={}){return mv(t,Bo.getMap().classNameMap,e,"constraint")}function kr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in i5?i5[t]:t,config:{}};return o5(n)}else return t instanceof bv?t:o5(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function RA(t){if(t==null)return;const e=[],n=[],r=[];for(const s in t){const i=t[s];if(typeof i!="number"){const o=i;e.push(o.data()),n.push(s),r.push(o)}}if(e.length>0){const s=await Promise.all(e);for(let i=0;i<s.length;++i)t[n[i]]=s[i][0];ft(r)}}function UY(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var a5;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(a5||(a5={}));const rFe=125;class n0{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class sFe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class iFe extends n0{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const s in n){const i=n[s];if(typeof i=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+i*r;else{let o;s in this.totals?o=this.totals[s]:this.totals[s]=0;const a=Ae(()=>Ee(this.totals[s],ne(i,r)));this.totals[s]=a,o!=null&&o.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:Ae(()=>{const s=ne(ze(1,this.seen),this.totals[r]);n[r]=s,this.totals[r].dispose(),Qr(n[r])}))}}class oFe extends n0{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const i in this.history){const o=this.history[i];for(let a=0;a<o.length;++a)if(typeof o[a]!="number"){const l=o[a];e.push(l.data()),n.push(i),r.push(a)}}const s=await Promise.all(e);for(let i=0;i<s.length;++i)this.history[n[i]][r[i]].dispose(),this.history[n[i]][r[i]]=s[i][0]}}class aFe extends n0{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||$q,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=rFe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");vk(this.yieldEvery)&&(this.maybeWait=vTe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const s=[];this.yield!=null&&(await RA(r),s.push(this.yield(e,n,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await RA(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await RA(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await RA(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await RA(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):vk(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await RA(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await RA(e),await this.trainEnd(e))}}function jY(t,e){return t==null&&(t={}),t instanceof n0?[t]:Array.isArray(t)&&t[0]instanceof n0?t:en(t).map(r=>new aFe(r,e))}class xo{constructor(){}static registerCallbackConstructor(e,n){M(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),xo.checkForDuplicate(n),xo.constructors[e]==null&&(xo.constructors[e]=[]),xo.constructors[e].push(n)}static checkForDuplicate(e){for(const n in xo.constructors)xo.constructors[+n].forEach(s=>{if(s===e)throw new ce("Duplicate callback constructor.")})}static clear(){xo.constructors={}}static createCallbacks(e){const n=[];for(const r in xo.constructors){const s=+r;e>=s&&n.push(...xo.constructors[s])}return n.map(r=>new r)}}xo.constructors={};function LY(t,e,n,r,s,i,o,a,l){const c=new oFe,u=[new iFe,...xo.createCallbacks(e)];t!=null&&u.push(...t),u.push(c);const A=new sFe(u);return A.setParams({epochs:n,initialEpoch:r,samples:s,steps:i,batchSize:o,verbose:e,doValidation:a,metrics:l}),{callbackList:A,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ac(t,e={},n=!1){return mv(t,Bo.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function x2(t,e){return Ae(()=>{t.dtype!=="float32"&&(t=Ue(t,"float32"));const n=Je(yv(t),e,!0),r=rm(n.shape,Br()),s=ss(Fc(n,r));return ze(t,s)})}function JB(t,e){return Ae(()=>Kn(yv(We(e,t)),-1))}function dR(t,e){return Ae(()=>Kn(vr(We(e,t)),-1))}function fR(t,e){return Ae(()=>{const n=We(t,e),r=oi(vr(t),Br(),Number.MAX_VALUE),s=vr(ze(n,r));return ne(100,Kn(s,-1))})}function lFe(t,e){return Ae(()=>{const n=oi(e,Br(),Number.MAX_VALUE),r=so(Ee(1,n)),s=oi(t,Br(),Number.MAX_VALUE),i=so(Ee(1,s));return Kn(yv(We(r,i)),-1)})}function cFe(t,e){return Ae(()=>{const n=Fc(0,We(1,ne(t,e)));return Kn(yv(n),-1)})}function uFe(t,e){return Ae(()=>{const n=Fc(0,We(1,ne(t,e)));return Kn(n,-1)})}function AFe(t,e){return Ae(()=>{const n=Je(ne(t,e),-1),r=jo(ne(We(1,t),e),-1);return Fc(0,Ee(1,We(r,n)))})}function dFe(t,e){return Ae(()=>{const n=Math.log(2),r=We(e,t),s=We(Ee(r,sm(ne(-2,r))),n);return Kn(s,-1)})}function r0(t,e,n=!1){return Ae(()=>{if(n)e=UB(e);else{const r=Je(e,e.shape.length-1,!0);e=ze(e,r)}return e=oi(e,Br(),1-Br()),In(Je(ne(Ue(t,"float32"),so(e)),e.shape.length-1))})}function v2(t,e,n=!1){return Ae(()=>{const r=Ue(Av($Te(t)),"int32");e=oi(e,Br(),1-Br());const s=e.shape,i=oe(XO(r,s[s.length-1]),s);return r0(i,e,n)})}function fFe(t,e){if(!_t(t.shape,e.shape))throw new ce(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Ae(()=>{const n=wl(e),r=In(vr(e));return Ee(We(n,ne(e,t)),IB(Ms(r)))})}function ZB(t,e){return Ae(()=>{let n;return n=oi(e,Br(),1-Br()),n=so(ze(n,We(1,n))),Kn(fFe(t,n),-1)})}function hFe(t,e){return Ae(()=>{const n=oi(t,Br(),1),r=oi(e,Br(),1);return Je(ne(t,so(ze(n,r))),-1)})}function pFe(t,e){return Ae(()=>{const n=so(Ee(Br(),e));return Kn(We(e,ne(t,n)),-1)})}function MY(t,e){return Ae(()=>{const n=x2(t,-1),r=x2(e,-1),s=ne(n,r);return In(Je(s,-1))})}const b2={meanSquaredError:JB,meanAbsoluteError:dR,meanAbsolutePercentageError:fR,meanSquaredLogarithmicError:lFe,squaredHinge:cFe,hinge:uFe,categoricalHinge:AFe,logcosh:dFe,categoricalCrossentropy:r0,sparseCategoricalCrossentropy:v2,binaryCrossentropy:ZB,kullbackLeiblerDivergence:hFe,poisson:pFe,cosineProximity:MY};function K4(t){if(typeof t=="string"){if(t in b2)return b2[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ce(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function QY(t,e){return Ae(()=>{const n=ne(.5,io(e)),r=dl(Mi(e,n),t.dtype);return Kn(Ea(t,r),-1)})}function HY(t,e){return Ae(()=>dl(Ea(ap(t,-1),ap(e,-1)),"float32"))}function mFe(t,e){return Ae(()=>Ue(Je(ml(Ea(t,1),Ea(e,1))),"float32"))}function gFe(t,e){return Ae(()=>Ue(Je(ml(Ea(t,0),Ea(e,1))),"float32"))}function yFe(t,e){return Ae(()=>{const n=mFe(t,e),r=gFe(t,e),s=Ee(n,r);return Ue(xs(Mi(s,0),ze(n,s),0),"float32")})}function xFe(t,e){return ZB(t,e)}function vFe(t,e){return t.rank===e.rank&&(t=Wn(t,[t.rank-1])),e=ap(e,-1),e.dtype!==t.dtype&&(e=Ue(e,t.dtype)),Ue(Ea(t,e),"float32")}const bFe=JB,wFe=JB,CFe=dR,SFe=dR,BFe=fR,NFe=fR,zY=r0,EFe=MY,VY=v2,w2={binaryAccuracy:QY,categoricalAccuracy:HY,precision:yFe,categoricalCrossentropy:zY,sparseCategoricalCrossentropy:VY,mse:bFe,MSE:wFe,mae:CFe,MAE:SFe,mape:BFe,MAPE:NFe,cosine:EFe};function IFe(t){if(typeof t=="string"&&t in w2)return w2[t];if(typeof t!="string"&&t!=null)return t;throw new ce(`Unknown metric ${t}`)}function Ab(t){if(Za(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(b2))if(b2[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(w2))if(w2[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function kFe(t){const e={Adagrad:()=>Mf.adagrad(.01),Adadelta:()=>Mf.adadelta(1,.95,Br()),Adam:()=>Mf.adam(.001,.9,.999,Br()),Adamax:()=>Mf.adamax(.002,.9,.999,Br(),0),RMSProp:()=>Mf.rmsprop(.001,.9,0,Br()),SGD:()=>Mf.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new ce(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const l5=1*1024*1024;function c5(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!lT(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>l5&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${l5}.`)}}function lT(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!lT(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!lT(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function TFe(t,e,n,r=console.log){const s=$Fe(t),i=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let o;if(!s){i.push("Receives inputs"),o=[];for(const u in t.nodesByDepth)o.push(...t.nodesByDepth[u])}r("_".repeat(e)),C2(i,n,r),r("=".repeat(e));const a=t.layers;for(let u=0;u<a.length;++u)s?_Fe(a[u],n,r):OFe(a[u],n,o,r),r((u===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=FFe(t),c=m2(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function FFe(t){let e;return t.collectedTrainableWeights!=null?e=m2(t.collectedTrainableWeights):e=m2(t.trainableWeights),e}function $Fe(t){let e=!0;const n=[],r=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of t.layers){let i=!1;for(const o of s.inboundNodes)if(r.indexOf(o)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function C2(t,e,n=console.log){let r="";for(let s=0;s<t.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=t[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);n(r)}function _Fe(t,e,n){let r,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const i=t.name,o=t.getClassName(),a=[`${i} (${o})`,s,r,t.countParams().toString()];C2(a,e,n)}function OFe(t,e,n,r){let s,i;try{i=t.inboundNodes.map(A=>JSON.stringify(A.inputShapes)).join(",")}catch{i="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const o=[];for(const A of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(A)===-1))for(let d=0;d<A.inboundLayers.length;++d){const f=A.inboundLayers[d].name,h=A.nodeIndices[d],m=A.tensorIndices[d];o.push(`${f}[${h}][${m}]`)}const a=t.name,l=t.getClassName(),c=o.length===0?"":o[0],u=[`${a} (${l})`,i,s,t.countParams().toString(),c];C2(u,e,r);for(let A=1;A<o.length;++A)C2(["","","","",o[A]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function WY(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function cT(t,e){if(t===null)return null;if(typeof t=="string")return JA(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];WY(e,s,i)?n.push(i):n.push(cT(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r];if(r==="name"&&typeof s=="string")n[r]=s;else{const i=JA(r);n[i]=cT(s,i)}}return n}}function uT(t,e){if(t==null)return null;if(typeof t=="string")return Vl(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];WY(e,s,i)?n.push(i):n.push(uT(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r],i=Vl(r);(r==="name"||r==="className")&&typeof s=="string"?n[i]=s:n[i]=uT(s,r)}return n}}/** @license See the LICENSE file. */const GY="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const DFe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class sa extends Tt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const x=this.getClassName().toLowerCase();this.name=XB(x)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Ru(this.inputs).length!==this.inputs.length)throw new ce(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(x=>x.name)}`);Ru(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(x=>x.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const x of this.outputs){const v=x.sourceLayer,b=x.nodeIndex,w=x.tensorIndex;this.outputLayers.push(v),this.outputLayersNodeIndices.push(b),this.outputLayersTensorIndices.push(w)}for(const x of this.inputs){const v=x.sourceLayer,b=x.nodeIndex,w=x.tensorIndex;Za(b===0,"input layer has >1 nodes"),Za(w===0,"input layer has >1 tensors"),this.inputLayers.push(v),this.inputLayersNodeIndices.push(b),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let x=0;x<this.inputLayers.length;x++){const v=this.inputLayers[x];if(!(v instanceof vv))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${x} (0-based) originates from layer type ${v.getClassName()}.`);this.inputNames.push(v.name),this.feedInputShapes.push(v.batchInputShape),this.feedInputNames.push(v.name)}for(const x of this.outputLayers)this.outputNames.push(x.name);this.internalInputShapes=this.inputs.map(x=>x.shape),this.internalOutputShapes=this.outputs.map(x=>x.shape);const n={},r={},s={},i={},o={},a=[],l=(x,v,b,w,C,B)=>{(w==null||C==null||B==null)&&(w=x.sourceLayer,C=x.nodeIndex,B=x.tensorIndex);const S=w.inboundNodes[C];if(b.indexOf(S)!==-1)throw new Oo(`The tensor ${x.name} at layer "${w.name}" is part of a cycle.`);if(v.indexOf(S)!==-1)return;this.containerNodes.add(sa.nodeKey(w,C)),w.id in o||(o[w.id]=Object.keys(o).length),b.indexOf(S)===-1&&b.push(S);const N=S.inboundLayers.length;for(let k=0;k<N;k++){const O=S.inputTensors[k],U=S.inboundLayers[k],P=S.nodeIndices[k],V=S.tensorIndices[k];l(O,v,b,U,P,V)}for(v.push(S);b.indexOf(S)>=0;)b.splice(b.indexOf(S),1);a.push(S)},c=[],u=[];for(const x of this.outputs)l(x,c,u);const A=a.slice().reverse();for(const x of A){r[x.id]=x,x.id in n||(n[x.id]=0);let v=n[x.id];const b=s[x.outboundLayer.id]==null?0:s[x.outboundLayer.id];v=Math.max(v,b),s[x.outboundLayer.id]=v,i[x.outboundLayer.id]=x.outboundLayer,n[x.id]=v;for(let w=0;w<x.inboundLayers.length;w++){const C=x.inboundLayers[w],B=x.nodeIndices[w],S=C.inboundNodes[B],N=n[S.id]==null?0:n[S.id];n[S.id]=Math.max(v+1,N),r[S.id]=S}}const d={};for(const x in n){const v=n[x];v in d||(d[v]=[]),d[v].push(r[x])}const f={};for(const x in s){const v=s[x];v in f||(f[v]=[]),f[v].push(i[x])}let h=Object.keys(f).map(x=>parseInt(x,10)).sort(lb);this.layers=[];for(const x of h){const v=f[x];v.sort((b,w)=>{const C=o[b.id],B=o[w.id];return C<B?-1:C>B?1:0});for(const b of v)b instanceof sa&&this.internalContainerRefs.push(b),this.layers.push(b)}this.layersByDepth=f,h=Object.keys(d).map(x=>parseInt(x,10)).sort(lb);const m=this.inputs.slice(),g=[];for(const x of h)for(const v of d[x]){const b=v.outboundLayer;if(b!=null){for(const w of v.inputTensors)if(m.indexOf(w)===-1)throw new Oo(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${b.name}". The following previous layers were accessed without issue: ${g}`);for(const w of v.outputTensors)m.push(w);g.push(b.name)}}this.nodesByDepth=d;const y=this.layers.map(x=>x.name);for(const x of y){const v=y.filter(b=>b===x).length;if(v!==1)throw new Oo(`The name "${x}" is used ${v} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new YB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(x=>null),outputMasks:this.outputs.map(x=>null),inputShapes:this.inputs.map(x=>x.shape),outputShapes:this.outputs.map(x=>x.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ce("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let s=0;const i=DFe(e);i&&this.parseWeights(e);for(const a of this.layers)for(const[l,c]of a.weights.entries()){const u=i?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new ce(`Duplicate weight name: ${u}`);r[u]=c,s++}const o=[];for(const a in e){let l=a;if(r[a]==null){const c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)o.push([r[l],e[a]]);else if(n)throw new ce(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new ce(`${a.length} of ${s} weights are not set: ${a}`)}uR(o)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),s=["vars","layer_checkpoint_dependencies"],i=r.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!s.includes(o)).join("/");i!==n&&(e[i]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${GY}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=uT(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return Ae(()=>{e=en(e);const r=new yu;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return Lg(this.outputs,r,n)})}computeMask(e,n){return Ae(()=>{e=en(e);let r;return n==null?r=Jd(null,e.length):r=en(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=p2(e);if(n.length!==this.inputLayers.length)throw new ce(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],c=n[a],u=l.name+"_0_0";r[u]=c}const s=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(lb);if(s.length>1)for(const a of s){const l=this.nodesByDepth[a];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(u.id)!==-1)continue;const A=[];for(let m=0;m<c.inboundLayers.length;m++){const g=c.inboundLayers[m],y=c.nodeIndices[m],x=c.tensorIndices[m],v=`${g.name}_${y}_${x}`,b=r[v];A.push(b)}const d=u.computeOutputShape(ei(A)),f=p2(d),h=u.inboundNodes.indexOf(c);for(let m=0;m<f.length;m++){const g=`${u.name}_${h}_${m}`;r[g]=f[m]}}}const i=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],A=`${l.name}_${c}_${u}`;o.push(A)}for(let a=0;a<o.length;a++){const l=o[a];Za(l in r),i.push(r[l])}return ei(i)}runInternalGraph(e,n){n==null&&(n=Jd(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],A=n[l];r[c.id]=[u,A]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(lb);for(const l of s){const c=this.nodesByDepth[l];for(const u of c){const A=u.outboundLayer,d=u.inputTensors,f=u.outputTensors,h=new Array;for(const m of d)m.id in r&&h.push(r[m.id]);if(h.length===d.length){let m={},g,y,x,v;if(u.callArgs!=null&&(m=u.callArgs),h.length===1){const[b,w]=h[0];m.mask==null&&(m.mask=w),x=en(A.call(b,m)),v=en(A.computeMask(b,w)),g=[b],y=[w]}else g=h.map(b=>b[0]),y=h.map(b=>b[1]),m.mask==null&&(m.mask=y),x=en(A.call(g,m)),v=en(A.computeMask(g,y));if(A.activityRegularizer)throw new Ct("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let b=0;b<f.length;++b){const w=f[b],C=x[b],B=v[b];r[w.id]=[C,B]}}}}const i=[],o=[],a=[];for(const l of this.outputs){Za(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=r[l.id];a.push(c.shape),i.push(c),o.push(u)}return[i,o,a]}buildNodeConversionMap(e){const n={};let r;for(const s of this.layers){r=s instanceof sa?1:0;for(let i=0;i<s.inboundNodes.length;i++){const o=sa.nodeKey(s,i);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new ce("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new ce(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new ce(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return Ae(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const s=sa.nodeKey(n,r);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),c=[];for(let A=0;A<o.inboundNodes.length;A++){const d=o.inboundNodes[A],f=sa.nodeKey(o,A);let h={};if(this.containerNodes.has(f)){if(d.callArgs)try{JSON.stringify(d.callArgs),h=d.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${d.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),h={}}if(d.inboundLayers.length>0){const m=[];for(let g=0;g<d.inboundLayers.length;g++){const y=d.inboundLayers[g],x=d.nodeIndices[g],v=d.tensorIndices[g],b=sa.nodeKey(y,x);let w=n[b];w==null&&(w=0),m.push([y.name,w,v,h])}c.push(m)}}}const u={};u.name=o.name,u.className=a,u.config=l,u.inboundNodes=c,r.push(u)}e.layers=r;const s=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],l=this.inputLayersNodeIndices[o],c=sa.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const A=this.inputLayersTensorIndices[o];s.push([a.name,u,A])}e.inputLayers=s;const i=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],l=this.outputLayersNodeIndices[o],c=sa.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const A=this.outputLayersTensorIndices[o];i.push([a.name,u,A])}return e.outputLayers=i,e}static fromConfig(e,n,r={},s=!1){const i={},o={};function a(g,y){g.name in o?o[g.name].push(y):o[g.name]=[y]}function l(g,y){const x=[];let v;for(const b of y){const w=b[0],C=b[1],B=b[2];if(v=b[3]==null?{}:b[3],!(w in i)){a(g,y);return}const S=i[w];if(S.inboundNodes.length<=C){a(g,y);return}const N=S.inboundNodes[C];x.push(N.outputTensors[B])}x.length>0&&g.apply(ei(x),v)}function c(g){const y=g.name,x=ac(g,n.customObjects!=null?n.customObjects:{});x.setFastWeightInitDuringBuild(s),i[y]=x,g.inboundNodes.forEach(b=>{if(!(b instanceof Array))throw new ce(`Corrupted configuration, expected array for nodeData: ${b}`);a(x,b)})}const u=n.name,A=n.layers;for(const g of A)c(g);for(;!xTe(o);)for(const g of A){const y=i[g.name];if(y.name in o){const x=o[y.name];delete o[y.name];for(const v of x)l(y,v)}}const d=[],f=[],h=n.inputLayers;for(const g of h){const y=g[0],x=g[1],v=g[2];Za(y in i);const w=i[y].inboundNodes[x].outputTensors;d.push(w[v])}const m=n.outputLayers;for(const g of m){const y=g[0],x=g[1],v=g[2];Za(y in i);const w=i[y].inboundNodes[x].outputTensors;f.push(w[v])}return new e({inputs:d,outputs:f,name:u})}get stateful(){if(this._stateful)throw new ce("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Ae(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function RFe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(i=>{i in t?s.push(t[i]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function KY(t,e){return RFe(t,e,"classWeight")}async function XY(t,e,n,r){if(n!=null){const s=Ae(()=>{if(t.shape.length===1)return oc(t);if(t.shape.length===2){if(t.shape[1]>1)return ap(t,1);if(t.shape[1]===1)return oe(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await s.data());ft(s);const o=[];return i.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(n[a])}),mr(o,"float32")}else return null}function PFe(t,e){return ne(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const UFe=32;function qY(t,e){let n,r;const s=e;n=s.xs,r=s.ys,M(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=u5("input",t.inputNames,n),o=u5("output",t.outputNames,r),a=i[0].shape[0];M(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),M(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<i.length;l++)M(i[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)M(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:i,ys:o}}function u5(t,e,n){if(n instanceof qt)return[n];if(Array.isArray(n))return M(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const s of e){if(n[s]==null)throw new ce(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);r.push(n[s])}return r}}function jFe(t){if(t.length===3)throw new Ct("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function LFe(t,e,n){const r=n.batchesPerEpoch!=null;if(M(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),M(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),M(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),M(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),M(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let i,o;if(s)if(A5(n.validationData))M(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const g=jFe(n.validationData);i=g.xs,o=g.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;s?c=l.slice().concat(l.map(g=>"val_"+g)):c=l.slice();const u=jY(n.callbacks,n.yieldEvery),A=n.verbose==null?1:n.verbose,{callbackList:d,history:f}=LY(u,A,n.epochs,null,null,MFe(e,n),null,s,c);d.setModel(t),t.history=f,await d.onTrainBegin(),t.stopTraining_=!1;let h=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;h<n.epochs;){const g={};await d.onEpochBegin(h);let y=0,x=0;for(r||(m=await e.iterator());!r||y<n.batchesPerEpoch;){const v=await m.next();if(r&&v.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(v.value!=null){const{xs:b,ys:w}=qY(t,v.value),C={};C.batch=x,C.size=b[0].shape[0],await d.onBatchBegin(x,C);const B=[];if(n.classWeight!=null){const k=KY(n.classWeight,t.outputNames);for(let O=0;O<k.length;++O)B.push(await XY(w[O],null,k[O]))}const S=b.concat(w).concat(B),N=a(S);ft(S);for(let k=0;k<l.length;++k){const O=l[k],U=N[k];C[O]=U,Qr(U)}await d.onBatchEnd(x,C),UY(C),x++,y++}if(r?y>=n.batchesPerEpoch:v.done){if(s){let b;A5(n.validationData)?b=en(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):b=en(t.evaluate(i,o,{batchSize:n.validationBatchSize==null?UFe:n.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)g[`val_${t.metricsNames[w]}`]=b[w]}break}if(t.stopTraining_)break}if(await d.onEpochEnd(h,g),h++,t.stopTraining_)break}return await d.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function MFe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function A5(t){return typeof t.iterator=="function"}function QFe(t){return typeof t.next=="function"}async function HFe(t,e,n){n=n||{};const r=n.batches!=null,s=t.testFunction;let i=[];if(n.verbose>0)throw new Ct("Verbose mode is not implemented yet.");M(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=QFe(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const c=await o.next();if(i=Ae(()=>{if(c.value){const{xs:u,ys:A}=qY(t,c.value),d=u.concat(A),f=Ae(()=>s(d));if(ft(d),l===0)for(let m=0;m<f.length;++m)i.push(at(0));const h=d[0].shape[0];for(let m=0;m<f.length;++m){const g=f[m],y=i[m];i[m]=Ae(()=>Ee(i[m],ne(h,g))),l>0&&ft(y)}ft(f),a+=h,++l}return i}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<i.length;++c){const u=i[c];i[c]=ze(i[c],a),ft(u)}return ei(i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function X4(t){M(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function cg(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>Td(r,e,n-e)):Td(t,e,n-e)}function AT(t,e){return Ae(()=>t==null?null:Array.isArray(t)?t.map(n=>AT(n,e)):SY(t,e.dtype==="int32"?e:Ue(e,"int32")))}function q4(t,e){const n=[];let r=0,s=null;for(;r<t;)s=r+e,s>=t&&(s=t),n.push([r,s]),r=s;return n}function YY(t){const e=[];t instanceof qt&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(gv(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function ta(t,e){if(t==null)return;const n=[];if(e instanceof qt)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const i=e[s];n.push(i.id)}const r=[];if(t instanceof qt)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&r.push(s)});else if(t!=null)for(const s in t){const i=t[s];n.indexOf(i.id)===-1&&r.push(i)}r.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zFe(t){return t instanceof qt}function dT(t){return Array.isArray(t)}function d5(t){return!zFe(t)&&!dT(t)}function f5(t,e,n,r=!0,s=""){if(e==null||e.length===0){if(t!=null){let o=!1;if(dT(t)&&t.length>0)o=!0;else if(d5(t)){for(const a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new ce(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let i;if(d5(t)){t=t,i=[];for(const o of e){if(t[o]==null)throw new ce(`No data provided for "${o}". Need data for each key in: ${e}`);i.push(t[o])}}else if(dT(t)){if(t=t,t.length!==e.length)throw new ce(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,e.length>1)throw new ce(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=YY(i),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=i[o];if(a.shape.length!==n[o].length)throw new ce(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u>=0&&c!==u)throw new ce(`${s} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${s} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return i}function VFe(t,e,n){const r=Ru(t.map(i=>i.shape[0]));r.sort();const s=Ru(e.map(i=>i.shape[0]));if(s.sort(),r.length>1)throw new ce(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(s.length>1)throw new ce(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(r.length>0&&s.length>0&&!_t(r,s))throw new ce(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function WFe(t,e,n){const r=[JB,ZB,r0];for(let s=0;s<t.length;++s){const i=t[s],o=e[s],a=n[s];if(o!=null){if(o===r0&&i.shape[i.shape.length-1]===1)throw new ce(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const l=i.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){const A=l[u],d=c[u];if(d!=null&&A!==d)throw new ce(`A target Tensor with shape ${i.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function h5(t,e,n,r=!0,s=""){let i;if(Array.isArray(t)){if(t.length!==e.length)throw new ce(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(e.length>1)throw new ce(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=i[o];if(a.shape.length!==n[o].length)throw new ce(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u!==c)throw new ce(`Error when checking ${s}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function GFe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const s of e){let i=n.hasOwnProperty(s)?n[s]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}const KFe="layers-model";class _h extends sa{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new ce("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");TFe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=kFe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof mA))throw new ce("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new ce(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(K4(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ce(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>K4(a))}else{const o=K4(e.loss);this.outputs.forEach(a=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const a=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],kd("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([a,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const s=GFe(e.metrics,this.outputNames),i=(o,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[o]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,o])};kd("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=s[o];(c=>{const u="";let A,d,f;for(const h of c){if(typeof h=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(h)!==-1){const g=this.internalOutputShapes[o];g[g.length-1]===1||this.lossFunctions[o]===ZB?["accuracy","acc"].indexOf(h)!==-1?d=QY:["crossentropy","ce"].indexOf(h)!==-1&&(d=xFe):this.lossFunctions[o]===v2?["accuracy","acc"].indexOf(h)!==-1?d=vFe:["crossentropy","ce"].indexOf(h)!==-1&&(d=VY):["accuracy","acc"].indexOf(h)!==-1?d=HY:["crossentropy","ce"].indexOf(h)!==-1&&(d=zY);let y;["accuracy","acc"].indexOf(h)!==-1?y="acc":["crossentropy","ce"].indexOf(h)!==-1&&(y="ce"),f=d,A=u+y}else f=IFe(h),A=u+Ab(h);let m;kd(A,()=>{m=f}),i(o,A,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const s=r.batchSize==null?32:r.batchSize;X4(s);const o=this.standardizeUserDataXY(e,n,!0,s);try{const a=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,a,s,r.verbose,r.steps);return ei(c)}finally{ta(o[0],e),ta(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),HFe(this,e,n)}checkNumSamples(e,n,r,s="steps"){let i;if(r!=null){if(i=null,n!=null)throw new ce(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new ce(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return i}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new ce("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),s=r?n:[n],i=this.retrieveSymbolicTensors(s),o=new yu;if(e instanceof qt&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ce(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new ce(`No value is provided for the model's input ${l.name}`);o.add(l,c)}const a=Lg(i,o);return r?a:a[0]}retrieveSymbolicTensors(e){const n=Jd(null,e.length);let r=e.length;for(const s of this.layers){const i=Array.isArray(s.output)?s.output:[s.output],o=i.map(a=>a.name);for(let a=0;a<e.length;++a){const l=o.indexOf(e[a]);if(l!==-1&&(n[a]=i[l],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw n.forEach((i,o)=>{i==null&&s.push(e[o])}),new ce(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return n}predictLoop(e,n=32,r=!1){return Ae(()=>{const s=this.checkNumSamples(e);if(r)throw new Ct("Verbose predictLoop() is not implemented yet.");const i=q4(s,n),o=this.outputs.map(a=>[]);for(let a=0;a<i.length;++a)Ae(()=>{const c=i[a][0],u=i[a][1],A=cg(e,c,u),d=[];if(Array.isArray(A))for(let h=0;h<A.length;++h)d.push({key:this.inputs[h],value:A[h]});else d.push({key:this.inputs[0],value:A});const f=new yu(d);return Lg(this.outputs,f)}).forEach((c,u)=>o[u].push(c));return ei(o.map(a=>qn(a,0)))})}predict(e,n={}){const r=YY(e);h5(r,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return X4(s),this.predictLoop(r,s)}finally{ta(r,e)}}predictOnBatch(e){h5(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,s){if(this.optimizer_==null)throw new Oo("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let o=0;o<this.feedOutputShapes.length;++o){const a=this.feedOutputShapes[o];this.feedLossFns[o]===v2?i.push(a.slice(0,a.length-1).concat([1])):i.push(a)}if(e=f5(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=f5(n,this.feedOutputNames,i,!1,"target"),VFe(e,n),WFe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new ce(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,s,i=!0,o){const[a,l]=this.standardizeUserDataXY(e,n,i,o);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(s!=null){const u=KY(s,this.outputNames);c=[];for(let A=0;A<u.length;++A)c.push(await XY(l[A],null,u[A]))}return[a,l,c]}testLoop(e,n,r,s=0,i){return Ae(()=>{const o=this.checkNumSamples(n,r,i,"steps"),a=[];if(s>0)throw new Ct("Verbose mode is not implemented yet.");if(i!=null)throw new Ct("steps mode in testLoop() is not implemented yet");{const l=q4(o,r),c=mr(Ia(0,o));for(let u=0;u<l.length;++u){const A=l[u][0],d=l[u][1],f=Td(c,A,d-A),h=AT(n,f),m=e(h);if(u===0)for(let g=0;g<m.length;++g)a.push(at(0));for(let g=0;g<m.length;++g){const y=m[g];a[g]=Ee(a[g],ne(d-A,y))}}for(let u=0;u<a.length;++u)a[u]=ze(a[u],o)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const s=e[r];let i=s;if(J6(e,s)>1){const o=J6(e.slice(0,r),s);i+=`_${o}`}n.push(i)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],a=()=>{const A=[];for(let m=0;m<this.inputs.length;++m)A.push({key:this.inputs[m],value:r[m]});const d=new yu(A),f=Lg(this.outputs,d,{training:!0});let h;for(let m=0;m<this.lossFunctions.length;++m){const g=this.lossFunctions[m];let y=g(s[m],f[m]);i[m]!=null&&(y=PFe(y,i[m]));const x=Kn(y);n.push(x),m===0?h=y:h=Ee(h,y)}for(let m=0;m<this.metricsTensors.length;++m){let g;if(this.outputs.length>1&&m<this.outputs.length)g=n[m];else{const y=this.metricsTensors[m][0],x=this.metricsTensors[m][1];g=Kn(y(s[x],f[x]))}Qr(g),o.push(g)}return h=Kn(h),this.calculateLosses().forEach(m=>{h=Ee(h,m)}),h},l=this.collectedTrainableWeights.map(A=>A.read());return[this.optimizer_.minimize(a,!0,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>Ae(()=>{const n=[];let r;const s=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let c=0;c<this.inputs.length;++c)o.push({key:this.inputs[c],value:s[c]});const a=new yu(o),l=Lg(this.outputs,a);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],A=Kn(u(i[c],l[c]));c===0?r=A:r=Ee(r,A),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],A=this.metricsTensors[c][1],d=Kn(u(i[A],l[A]));n.push(d)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,i,o,a,l,c,u,A,d;try{const f=r.batchSize==null?32:r.batchSize;X4(f);const m=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,f);s=m[0],i=m[1],d=m[2];let g=!1,y;if(r.validationData!=null&&r.validationData.length>0){if(g=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new Ct("validationData including sample weights is not supported yet."):new ce(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const k=await this.standardizeUserData(l,c,null,null,!0,f);u=k[0],A=k[1],y=u.concat(A)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){g=!0;const N=Math.floor(s[0].shape[0]*(1-r.validationSplit)),k=s[0].shape[0];u=cg(s,N,k),o=s,s=cg(s,0,N),A=cg(i,N,k),a=i,i=cg(i,0,N),y=u.concat(A)}else r.validationSteps!=null&&(g=!0);const x=s.concat(i).concat(d);this.checkTrainableWeightsConsistency();const v=this.makeTrainFunction(),b=this.getDedupedMetricsNames();let w,C;g?(this.makeTestFunction(),w=this.testFunction,C=b.slice().concat(b.map(N=>"val_"+N))):(w=null,y=[],C=b.slice());const B=jY(r.callbacks,r.yieldEvery);return await this.fitLoop(v,x,b,f,r.epochs,r.verbose,B,w,y,r.shuffle,C,r.initialEpoch,null,null)}finally{this.isTraining=!1,ta(s,e),ta(i,n),ta(o,e),ta(a,n),ta(u,l),ta(A,c),d!=null&&ft(d)}}async fitLoop(e,n,r,s,i,o,a,l,c,u,A,d,f,h){s==null&&(s=32),i==null&&(i=1),u==null&&(u=!0),d==null&&(d=0);let m=!1;if(l!=null&&c!=null&&(m=!0),h!=null&&(m=!0,f==null))throw new ce("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=this.checkNumSamples(n,s,f,"steps_per_epoch");let y;g!=null&&(y=Ia(0,g)),o==null&&(o=1);const{callbackList:x,history:v}=LY(a,o,i,d,g,f,s,m,A);x.setModel(this),this.history=v,await x.onTrainBegin(),this.stopTraining_=!1;for(let b=d;b<i;++b){await x.onEpochBegin(b);const w={};if(f!=null)throw new Ct("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new Ct("batch shuffling is not implemneted yet");u&&C1e(y);const C=mr(y),B=q4(g,s);for(let S=0;S<B.length;++S){const N={};if(await x.onBatchBegin(S,N),Ae(()=>{const k=B[S][0],O=B[S][1],U=Td(C,k,O-k);N.batch=S,N.size=O-k;const P=AT(n,U),V=e(P);for(let W=0;W<r.length;++W){const L=r[W],G=V[W];N[L]=G,Qr(G)}if(S===B.length-1&&m){const W=this.testLoop(l,c,s);for(let L=0;L<r.length;++L){const G=r[L],_=W[L];Qr(_),w["val_"+G]=_}}}),await x.onBatchEnd(S,N),UY(N),this.stopTraining_)break}C.dispose()}if(await x.onEpochEnd(b,w),this.stopTraining_)break}return await x.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return LFe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),s=r[0],i=r[1],a=this.makeTrainFunction()(s.concat(i)),l=[];for(const c of a){const u=await c.data();l.push(u[0])}return ft(a),ta(r[0],e),ta(r[1],n),ei(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,i=this.getWeights(r);for(let o=0;o<s.length;++o)r&&!s[o].trainable||n.push({name:s[o].originalName,tensor:i[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=p6().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-p6().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Vl(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Vl(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const s of n)if(typeof r[s]=="string")e[s]=Vl(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Vl(Ab(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Vl(Ab(e)));{const e={};for(const n in this.metrics)e[n]=Vl(Ab(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=cT(e.optimizer_config),r=ac(n);let s;if(typeof e.loss=="string")s=JA(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(o=>JA(o));else if(e.loss!=null){s={};for(const o in e.loss)s[o]=JA(e.loss[o])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(o=>JA(o));else if(e.metrics!=null){i={};for(const o in e.metrics)i[o]=JA(e.metrics[o])}this.compile({loss:s,metrics:i,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=KK(e);if(c.length===0)throw new ce(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new ce(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new ce("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await Ok(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:KFe,generatedBy:`TensorFlow.js tfjs-layers v${GY}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:A}=await Ok(await this.optimizer.getWeights(),c);r.specs.push(...A),r.data=VK([r.data,u])}return this.userDefinedMetadata!=null&&(c5(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){c5(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}_h.className="Model";Fe(_h);class JY extends _h{}JY.className="Functional";Fe(JY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class s0 extends _h{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:XB("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new ce(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof s0||e instanceof _h;let r;if(n){if(r=e,r.outputs.length!==1)throw new ce("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new ce("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new ce("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=qTe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new ce(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new ce("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=_Y(this.outputs[0])}this.inboundNodes=[],new YB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Jd(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(zt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new _h({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Oo("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Oo("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Oo("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Oo("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},s=!1){let i,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new ce("Legacy serialization format not supported yet.");i=n}else M(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=n.layers,delete n.layers,o=n;const a=new e(o);if(!(a instanceof s0))throw new Ct(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of i){const u=ac(l,void 0,s);s&&u.setFastWeightInitDuringBuild(!0),a.add(u)}return a}set stopTraining(e){if(this.model==null)throw new ce("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new ce("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}s0.className="Sequential";Fe(s0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let ws=class extends am{getConfig(){return{}}};class ZY extends ws{apply(e,n=1){return OTe(e,n)}}ZY.className="elu";Fe(ZY);class eJ extends ws{apply(e){return aD(e)}}eJ.className="selu";Fe(eJ);class tJ extends ws{apply(e){return wl(e)}}tJ.className="relu";Fe(tJ);class nJ extends ws{apply(e){return Ae(()=>Xd(6,wl(e)))}}nJ.className="relu6";Fe(nJ);let rJ=class extends ws{apply(e){return e}};rJ.className="linear";Fe(rJ);class sJ extends ws{apply(e){return ba(e)}}sJ.className="sigmoid";Fe(sJ);class iJ extends ws{apply(e){return RTe(e)}}iJ.className="hardSigmoid";Fe(iJ);class oJ extends ws{apply(e){return sm(e)}}oJ.className="softplus";Fe(oJ);class aJ extends ws{apply(e){return DTe(e)}}aJ.className="softsign";Fe(aJ);class lJ extends ws{apply(e){return Kd(e)}}lJ.className="tanh";Fe(lJ);let hR=class extends ws{apply(e,n=-1){return UB(e,n)}};hR.className="softmax";Fe(hR);class cJ extends ws{apply(e,n=-1){return WO(e,n)}}cJ.className="logSoftmax";Fe(cJ);class uJ extends ws{apply(e){return Ae(()=>Ae(()=>{const n=Math.sqrt(2),r=ne(.5,Ee(1,HO(ze(e,n))));return ne(e,r)}))}}uJ.className="gelu";Fe(uJ);class AJ extends ws{apply(e){return Ae(()=>ne(.5,ne(e,Ee(1,Kd(ne(ss(ze(2,Math.PI)),Ee(e,ne(.044715,mc(e,3)))))))))}}AJ.className="gelu_new";Fe(AJ);class dJ extends ws{apply(e){return Ae(()=>ne(e,Kd(sm(e))))}}dJ.className="mish";Fe(dJ);class fJ extends ws{apply(e,n=1){return Ae(()=>ne(ba(ne(e,n)),e))}}fJ.className="swish";Fe(fJ);function Ju(t){return t.getClassName()}function Y4(t,e={}){return mv(t,Bo.getMap().classNameMap,e,"activation")}function Zu(t){if(t==null){const e={};return e.className="linear",e.config={},Y4(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},Y4(e)}else return t instanceof ws?t:Y4(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function XFe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class hJ extends am{}class pJ extends hJ{constructor(e){super(),XFe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return Ae(()=>{let n=Sr([1]);return this.hasL1&&(n=Ee(n,Je(ne(this.l1,vr(e))))),this.hasL2&&(n=Ee(n,Je(ne(this.l2,yv(e))))),oe(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}pJ.className="L1L2";Fe(pJ);const p5={l1l2:"L1L2"};function hn(t){return eR(t)}function m5(t,e={}){return mv(t,Bo.getMap().classNameMap,e,"regularizer")}function Rn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in p5?p5[t]:t,config:{}};return m5(n)}else return t instanceof hJ?t:m5(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class mJ extends Tt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=At(e);let r=wl(e);return this.maxValue!=null&&(r=oi(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}mJ.className="ReLU";Fe(mJ);class gJ extends Tt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=At(e);return EB(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}gJ.className="LeakyReLU";Fe(gJ);class yJ extends Tt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Dn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Rn(e.alphaRegularizer),this.alphaConstraint=kr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new ce(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=zt(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new Nr({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=At(e),OB(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Qn(this.alphaInitializer),alphaRegularizer:hn(this.alphaRegularizer),alphaConstraint:Ir(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}yJ.className="PReLU";Fe(yJ);let xJ=class extends Tt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Ct(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=At(e);return cv(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};xJ.className="ELU";Fe(xJ);class vJ extends Tt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=At(e);return ne(r,Ue(Mi(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}vJ.className="ThresholdedReLU";Fe(vJ);class bJ extends Tt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new hR().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return Ae(()=>{let r=At(e);const s=n.mask;if(s!=null){const i=ne(We(Ei(r.shape),Ue(s,r.dtype)),at(-1e9));r=Ee(r,i)}return this.axis instanceof Array?this.axis.length>1?Ms(We(r,kB(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}bJ.className="Softmax";Fe(bJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Oh(t,e,n){if(typeof t=="number")return Jd(t,e);if(t.length!==e)throw new ce(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const s=t[r];if(!TTe(s))throw new ce(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function Ca(t,e,n,r,s=1){if(t==null)return t;const i=e+(e-1)*(s-1);let o;return n==="same"?o=t:o=t-i+1,Math.floor((o+r-1)/r)}function el(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+Yu([n-e,0]);else if(r==="same")t=t*e;else throw new ce(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pR(t,e){return Ae(()=>(lr(e),e==="channelsFirst"?Ut(t,[0,2,3,1]):t))}function wJ(t,e){return Ae(()=>(lr(e),e==="channelsFirst"?Ut(t,[0,2,3,4,1]):t))}function qFe(t,e,n,r=1,s="valid",i,o=1){return Ae(()=>{if(i==null&&(i=ka()),lr(i),t.shape.length!==3)throw new ce(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new ce(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new ce(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(i==="channelsFirst"&&(t=Ut(t,[0,2,1])),s==="causal")throw new Ct("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=UO(t,e,r,s==="same"?"same":"valid","NWC",o);return n!=null&&(a=Da(a,n)),a})}function g5(t,e,n,r=[1,1],s="valid",i,o,a=null){return Ae(()=>{if(i==null&&(i=ka()),lr(i),t.rank!==3&&t.rank!==4)throw new ce(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new ce(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=pR(t,i);if(s==="causal")throw new Ct("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=nq({x:l,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:a}),i==="channelsFirst"&&(l=Ut(l,[0,3,1,2])),l})}function YFe(t,e,n,r=[1,1,1],s="valid",i,o){return Ae(()=>{if(i==null&&(i=ka()),lr(i),t.rank!==4&&t.rank!==5)throw new ce(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new ce(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=wJ(t,i);if(s==="causal")throw new Ct("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=bX(a,e,r,s==="same"?"same":"valid","NDHWC",o),n!=null&&(a=Da(a,n)),i==="channelsFirst"&&(a=Ut(a,[0,4,1,2,3])),a})}class e3 extends Tt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e3.verifyArgs(n),this.rank=e,Hr(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Ct(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Oh(n.kernelSize,e,"kernelSize"),this.strides=Oh(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,co(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,lr(this.dataFormat),this.activation=Zu(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Dn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=kr(n.biasConstraint),this.biasRegularizer=Rn(n.biasRegularizer),this.activityRegularizer=Rn(n.activityRegularizer),this.dilationRate=Oh(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ce(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ce(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ce(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Za("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!tR(e.kernelSize,"number",1,3))throw new ce(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Ju(this.activation),useBias:this.useBias,biasInitializer:Qn(this.biasInitializer),biasRegularizer:hn(this.biasRegularizer),activityRegularizer:hn(this.activityRegularizer),biasConstraint:Ir(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class lm extends e3{constructor(e,n){super(e,n),this.kernel=null,lm.verifyArgs(n),this.filters=n.filters,Hr(this.filters,"filters"),this.kernelInitializer=Dn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=kr(n.kernelConstraint),this.kernelRegularizer=Rn(n.kernelRegularizer)}build(e){e=zt(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ce(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return Ae(()=>{e=At(e);let r;const s=this.bias==null?null:this.bias.read(),i=yY(this.activation.getClassName());if(i!=null&&this.rank===2)r=g5(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=qFe(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=g5(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=YFe(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Ct("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=zt(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<r.length;++i){const o=Ca(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);n.push(o)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:Qn(this.kernelInitializer),kernelRegularizer:hn(this.kernelRegularizer),kernelConstraint:Ir(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new ce(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class wv extends lm{constructor(e){super(2,e),wv.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!tR(e.kernelSize,"number",1,2))throw new ce(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}wv.className="Conv2D";Fe(wv);class Cv extends lm{constructor(e){super(3,e),Cv.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new ce(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}Cv.className="Conv3D";Fe(Cv);class CJ extends wv{constructor(e){if(super(e),this.inputSpec=[new Nr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ce(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=zt(e),e.length!==4)throw new ce("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ce("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Nr({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return Ae(()=>{let r=At(e);if(r.shape.length!==4)throw new ce(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let o,a;this.dataFormat==="channelsFirst"?(o=2,a=3):(o=1,a=2);const l=s[o],c=s[a],u=this.kernelSize[0],A=this.kernelSize[1],d=this.strides[0],f=this.strides[1],h=el(l,d,u,this.padding),m=el(c,f,A,this.padding),g=[i,h,m,this.filters];this.dataFormat!=="channelsLast"&&(r=Ut(r,[0,2,3,1]));let y=LO(r,this.kernel.read(),g,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(y=Ut(y,[0,3,1,2])),this.bias!=null&&(y=Da(y,this.bias.read(),this.dataFormat)),this.activation!=null&&(y=this.activation.apply(y)),y})}computeOutputShape(e){e=zt(e);const n=e.slice();let r,s,i;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3):(r=3,s=1,i=2);const o=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[s]=el(n[s],l,o,this.padding),n[i]=el(n[i],c,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}CJ.className="Conv2DTranspose";Fe(CJ);class SJ extends Cv{constructor(e){if(super(e),this.inputSpec=[new Nr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ce(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=zt(e),e.length!==5)throw new ce("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ce("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Nr({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return Ae(()=>{let r=At(e);if(r.shape.length!==5)throw new ce(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let o,a,l;this.dataFormat==="channelsFirst"?(l=2,o=3,a=4):(l=1,o=2,a=3);const c=s[l],u=s[o],A=s[a],d=this.kernelSize[0],f=this.kernelSize[1],h=this.kernelSize[2],m=this.strides[0],g=this.strides[1],y=this.strides[2],x=el(c,m,d,this.padding),v=el(u,g,f,this.padding),b=el(A,y,h,this.padding),w=[i,x,v,b,this.filters];this.dataFormat!=="channelsLast"&&(r=Ut(r,[0,2,3,4,1]));let C=CX(r,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=Ut(C,[0,4,1,2,3])),this.bias!==null&&(C=Da(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(e){e=zt(e);const n=e.slice();let r,s,i,o;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3,o=4):(r=4,s=1,i=2,o=3);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],A=this.strides[1],d=this.strides[2];return n[r]=this.filters,n[s]=el(n[s],u,a,this.padding),n[i]=el(n[i],A,l,this.padding),n[o]=el(n[o],d,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}SJ.className="Conv3DTranspose";Fe(SJ);class BJ extends lm{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new ce("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new ce("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new ce(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Dn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Rn(n.depthwiseRegularizer),this.depthwiseConstraint=kr(n.depthwiseConstraint),this.pointwiseInitializer=Dn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Rn(n.pointwiseRegularizer),this.pointwiseConstraint=kr(n.pointwiseConstraint)}build(e){if(e=zt(e),e.length<this.rank+2)throw new ce(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new ce(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],s=this.kernelSize.concat([r,this.depthMultiplier]),i=[];for(let a=0;a<this.rank;++a)i.push(1);i.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new Nr({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return Ae(()=>{e=At(e);let r;if(this.rank===1)throw new Ct("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Ut(e,[0,2,3,1])),r=lD(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Da(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=Ut(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Qn(this.depthwiseInitializer),e.pointwiseInitializer=Qn(this.pointwiseInitializer),e.depthwiseRegularizer=hn(this.depthwiseRegularizer),e.pointwiseRegularizer=hn(this.pointwiseRegularizer),e.depthwiseConstraint=Ir(this.depthwiseConstraint),e.pointwiseConstraint=Ir(this.pointwiseConstraint),e}}BJ.className="SeparableConv";class NJ extends BJ{constructor(e){super(2,e)}}NJ.className="SeparableConv2D";Fe(NJ);class t3 extends lm{constructor(e){super(1,e),t3.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!tR(e.kernelSize,"number",1,1))throw new ce(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}t3.className="Conv1D";Fe(t3);class EJ extends Tt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return Ae(()=>{if(e=At(e),this.dataFormat==="channelsLast"){const r=ub(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return ub(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=ub(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return ub(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}EJ.className="Cropping2D";Fe(EJ);class IJ extends Tt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,lr(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,ETe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return Ae(()=>{let r=At(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=Ut(r,[0,2,3,1]);const i=this.size[0]*s[2],o=this.size[1]*s[3],a=this.interpolation==="nearest"?ni.resizeNearestNeighbor(r,[i,o]):ni.resizeBilinear(r,[i,o]);return Ut(a,[0,3,1,2])}else{const i=this.size[0]*s[1],o=this.size[1]*s[2];return this.interpolation==="nearest"?ni.resizeNearestNeighbor(r,[i,o]):ni.resizeBilinear(r,[i,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}IJ.className="UpSampling2D";Fe(IJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function JFe(t,e,n=[1,1],r="valid",s,i){return Ae(()=>{s==null&&(s=ka()),lr(s);let o=pR(t,s);if(t.rank!==4)throw new ce(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new ce(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=lv(o,e,n,r==="same"?"same":"valid","NHWC",i),s==="channelsFirst"&&(o=Ut(o,[0,3,1,2])),o})}class kJ extends e3{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Dn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=kr(e.depthwiseConstraint),this.depthwiseRegularizer=Rn(e.depthwiseRegularizer)}build(e){if(e=zt(e),e.length<4)throw new ce(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new ce(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Ae(()=>{e=At(e);let r=JFe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Da(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=zt(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=Ca(n,this.kernelSize[0],this.padding,this.strides[0]),o=Ca(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,i,o]:[e[0],i,o,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Qn(this.depthwiseInitializer),e.depthwiseRegularizer=hn(this.depthwiseRegularizer),e.depthwiseConstraint=Ir(this.depthwiseRegularizer),e}}kJ.className="DepthwiseConv2D";Fe(kJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function TJ(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new ce("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(i){return i==null||Array.isArray(i)?i:[i]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function FJ(t,e,n,r=!1,s,i,o=!1,a=!1){return Ae(()=>{const l=e.shape.length;if(l<3)throw new ce(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(Ia(2,l));e=Ut(e,c),o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=Ue(Ue(s,"bool"),"float32"),s.rank===l-1&&(s=wr(s,-1)),s=Ut(s,c)),r&&(e=zo(e,0),s!=null&&(s=zo(s,0)));const u=[];let A,d=n;const f=e.shape[0],h=Vo(e);let m;s!=null&&(m=Vo(s));for(let y=0;y<f;++y){const x=h[y],v=Ae(()=>t(x,d));if(s==null)A=v[0],d=v[1];else{const b=Ae(()=>{const w=m[y],C=We(io(w),w),B=Ee(ne(v[0],w),ne(d[0],C)),S=d.map((N,k)=>Ee(ne(v[1][k],w),ne(N,C)));return{output:B,newStates:S}});A=b.output,d=b.newStates}a&&u.push(A)}let g;return a&&(g=Ri(u,1)),[A,g,d]})}class gA extends Tt{constructor(e){super(e);let n;if(e.cell==null)throw new ce("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new yR({cells:e.cell}):n=e.cell,n.stateSize==null)throw new ce("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Nr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Ia(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){oT(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const i=[];for(const o of n)i.push([e[0],o]);return[s].concat(i)}else return s}computeMask(e,n){return Ae(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(i=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Ct("Constants support is not implemented in RNN yet.");oT(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Nr({shape:[n,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!_t(this.stateSpec.map(o=>o.shape[o.shape.length-1]),i))throw new ce(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(o=>new Nr({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){Ae(()=>{if(!this.stateful)throw new Ja("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new ce("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Sr([r,s])):this.states_=[Sr([r,this.cell.stateSize])];else if(e==null)ft(this.states_),this.keptStates!=null&&(ft(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Sr([r,s])):this.states_[0]=Sr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ce(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):ft(this.states_);for(let s=0;s<this.states_.length;++s){const i=e[s],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,a=[r,o];if(!_t(i.shape,a))throw new ce(`State ${s} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${i.shape}`);this.states_[s]=i}}this.states_=this.states_.map(s=>Qr(s.clone()))})}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=TJ(e,r,s,this.numConstants);e=i.inputs,r=i.initialState,s=i.constants;let o=[],a=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new Nr({shape:c.shape}));a=a.concat(this.stateSpec)}if(s!=null&&(n.constants=s,o=o.concat(s),this.numConstants=s.length),o[0]instanceof gl){const c=[e].concat(o),u=this.inputSpec.concat(a),A=this.inputSpec;this.inputSpec=u;const d=super.apply(c,n);return this.inputSpec=A,d}else return super.apply(e,n)}call(e,n){return Ae(()=>{const r=n==null?null:n.mask,s=n==null?null:n.training;let i=n==null?null:n.initialState;e=At(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==o)throw new ce(`RNN Layer has ${o} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:s},c=FJ((h,m)=>{const g=this.cell.call([h].concat(m),a);return[g[0],g.slice(1)]},e,i,this.goBackwards,r,null,this.unroll,this.returnSequences),u=c[0],A=c[1],d=c[2];this.stateful&&this.resetStates(d,s);const f=this.returnSequences?A:u;return this.returnState?[f].concat(d):f})}getInitialState(e){return Ae(()=>{let n=Sr(e.shape);return n=Je(n,[1,2]),n=gv(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?sT(n,[1,r]):n):this.cell.stateSize>1?[sT(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===gA.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const s=n.cell,i=ac(s,r);return new e(Object.assign(n,{cell:i}))}}gA.className="RNN";Fe(gA);class n3 extends Tt{}class mR extends n3{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Hr(this.units,"units"),this.activation=Zu(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Dn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Dn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Dn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Rn(e.kernelRegularizer),this.recurrentRegularizer=Rn(e.recurrentRegularizer),this.biasRegularizer=Rn(e.biasRegularizer),this.kernelConstraint=kr(e.kernelConstraint),this.recurrentConstraint=kr(e.recurrentConstraint),this.biasConstraint=kr(e.biasConstraint),this.dropout=Ap([1,Yu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Ap([1,Yu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=zt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Ae(()=>{if(e=e,e.length!==2)throw new ce(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=eA({ones:()=>io(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=eA({ones:()=>io(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let i;const o=this.dropoutMask,a=this.recurrentDropoutMask;o!=null?i=fl(ne(e,o),this.kernel.read()):i=fl(e,this.kernel.read()),this.bias!=null&&(i=Da(i,this.bias.read())),a!=null&&(r=ne(r,a));let l=Ee(i,fl(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Ju(this.activation),useBias:this.useBias,kernelInitializer:Qn(this.kernelInitializer),recurrentInitializer:Qn(this.recurrentInitializer),biasInitializer:Qn(this.biasInitializer),kernelRegularizer:hn(this.kernelRegularizer),recurrentRegularizer:hn(this.recurrentRegularizer),biasRegularizer:hn(this.biasRegularizer),activityRegularizer:hn(this.activityRegularizer),kernelConstraint:Ir(this.kernelConstraint),recurrentConstraint:Ir(this.recurrentConstraint),biasConstraint:Ir(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}mR.className="SimpleRNNCell";Fe(mR);class $J extends gA{constructor(e){e.cell=new mR(e),super(e)}call(e,n){return Ae(()=>{this.cell.dropoutMask!=null&&(ft(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ft(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return new e(n)}}$J.className="SimpleRNN";Fe($J);class gR extends n3{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ce("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Hr(this.units,"units"),this.activation=Zu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Zu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Dn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Dn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Dn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Rn(e.kernelRegularizer),this.recurrentRegularizer=Rn(e.recurrentRegularizer),this.biasRegularizer=Rn(e.biasRegularizer),this.kernelConstraint=kr(e.kernelConstraint),this.recurrentConstraint=kr(e.recurrentConstraint),this.biasConstraint=kr(e.biasConstraint),this.dropout=Ap([1,Yu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Ap([1,Yu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=zt(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Ae(()=>{if(e=e,e.length!==2)throw new ce(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=eA({ones:()=>io(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=eA({ones:()=>io(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;let a,l,c;0<this.dropout&&this.dropout<1&&(e=ne(e,i[0]));let u=fl(e,this.kernel.read());this.useBias&&(u=Da(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=ne(s,o[0]));const A=this.recurrentKernel.read(),[d,f]=Oi(A,[2*this.units,this.units],A.rank-1),h=fl(s,d),[m,g,y]=Oi(u,3,u.rank-1),[x,v]=Oi(h,2,h.rank-1);a=this.recurrentActivation.apply(Ee(m,x)),l=this.recurrentActivation.apply(Ee(g,v));const b=fl(ne(l,s),f);c=this.activation.apply(Ee(y,b));const w=Ee(ne(a,s),ne(Ee(1,In(a)),c));return[w,w]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Ju(this.activation),recurrentActivation:Ju(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Qn(this.kernelInitializer),recurrentInitializer:Qn(this.recurrentInitializer),biasInitializer:Qn(this.biasInitializer),kernelRegularizer:hn(this.kernelRegularizer),recurrentRegularizer:hn(this.recurrentRegularizer),biasRegularizer:hn(this.biasRegularizer),activityRegularizer:hn(this.activityRegularizer),kernelConstraint:Ir(this.kernelConstraint),recurrentConstraint:Ir(this.recurrentConstraint),biasConstraint:Ir(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}gR.className="GRUCell";Fe(gR);class _J extends gA{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new gR(e),super(e)}call(e,n){return Ae(()=>{this.cell.dropoutMask!=null&&(ft(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ft(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}_J.className="GRU";Fe(_J);class r3 extends n3{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Hr(this.units,"units"),this.activation=Zu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Zu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Dn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Dn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Dn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Rn(e.kernelRegularizer),this.recurrentRegularizer=Rn(e.recurrentRegularizer),this.biasRegularizer=Rn(e.biasRegularizer),this.kernelConstraint=kr(e.kernelConstraint),this.recurrentConstraint=kr(e.recurrentConstraint),this.biasConstraint=kr(e.biasConstraint),this.dropout=Ap([1,Yu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Ap([1,Yu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=zt(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,o=this.units;s=new(n=class extends qo{apply(l,c){const u=i.apply([o]),A=new rR().apply([o]),d=i.apply([o*2]);return e5(e5(u,A),d)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return Ae(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new ce(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=eA({ones:()=>io(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=eA({ones:()=>io(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,u,A;0<this.dropout&&this.dropout<1&&(e=ne(e,o[0]));let d=fl(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=ne(s,a[0])),d=Ee(d,fl(s,this.recurrentKernel.read())),this.useBias&&(d=Da(d,this.bias.read()));const[f,h,m,g]=Oi(d,4,d.rank-1);l=this.recurrentActivation.apply(f),c=this.recurrentActivation.apply(h),u=Ee(ne(c,i),ne(l,this.activation.apply(m))),A=this.recurrentActivation.apply(g);const y=ne(A,this.activation.apply(u));return[y,y,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Ju(this.activation),recurrentActivation:Ju(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Qn(this.kernelInitializer),recurrentInitializer:Qn(this.recurrentInitializer),biasInitializer:Qn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:hn(this.kernelRegularizer),recurrentRegularizer:hn(this.recurrentRegularizer),biasRegularizer:hn(this.biasRegularizer),activityRegularizer:hn(this.activityRegularizer),kernelConstraint:Ir(this.kernelConstraint),recurrentConstraint:Ir(this.recurrentConstraint),biasConstraint:Ir(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}r3.className="LSTMCell";Fe(r3);class OJ extends gA{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new r3(e),super(e)}call(e,n){return Ae(()=>{this.cell.dropoutMask!=null&&(ft(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ft(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}OJ.className="LSTM";Fe(OJ);class yR extends n3{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return Ae(()=>{e=e;let r=e.slice(1);const s=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?s.push(r.splice(0,a.stateSize.length)):s.push(r.splice(0,1));s.reverse();const i=[];let o;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=s[a],a===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=l.call(o,n),i.push(o.slice(1))}r=[];for(const a of i.slice().reverse())r.push(...a);return[o[0]].concat(r)})}build(e){oT(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,s)=>{kd(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=i=>({className:i.getClassName(),config:i.getConfig()}),s={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,n,r={}){const s=[];for(const i of n.cells)s.push(ac(i,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return aT(e)}setWeights(e){const n=[];for(const r of this.cells){const s=r.weights.length,i=e.splice(s);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],i[o]])}uR(n)}}yR.className="StackedRNNCells";Fe(yR);function eA(t){const{ones:e,rate:n,training:r=!1,count:s=1,dropoutFunc:i}=t,o=()=>i!=null?i(e(),n):BY(e(),n),a=()=>xv(o,e,r);return!s||s<=1?Qr(a().clone()):Array(s).fill(void 0).map(a).map(c=>Qr(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var ZFe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class DJ extends gA{constructor(e){if(e.unroll)throw new Ct("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Ct("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Nr({ndim:5})]}call(e,n){return Ae(()=>{if(this.cell.dropoutMask!=null&&(ft(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ft(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new ce("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return Ae(()=>{const{stateSize:n}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)],o=Sr(i);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){Ae(()=>{if(!this.stateful)throw new Ja("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)];if(r[0]==null)throw new ce("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Sr(i)):this.states_=[Sr(i)];else if(e==null)ft(this.states_),this.keptStates!=null&&(ft(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Sr(i)):this.states_[0]=Sr(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ce(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):ft(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],c=i;if(!_t(l.shape,c))throw new ce(`State ${a} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>Qr(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:s,padding:i,strides:o,dilationRate:a}=this.cell,l=n==="channelsFirst",c=e[l?3:2],u=e[l?4:3],A=Ca(c,s[0],i,o[0],a[0]),d=Ca(u,s[1],i,o[1],a[1]);return[...e.slice(0,2),...l?[r,A,d]:[A,d,r]]}}DJ.className="ConvRNN2D";class xR extends r3{constructor(e){const{filters:n,kernelSize:r,strides:s,padding:i,dataFormat:o,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Hr(this.filters,"filters"),this.kernelSize=Oh(r,2,"kernelSize"),this.kernelSize.forEach(l=>Hr(l,"kernelSize")),this.strides=Oh(s||1,2,"strides"),this.strides.forEach(l=>Hr(l,"strides")),this.padding=i||"valid",co(this.padding),this.dataFormat=o||"channelsLast",lr(this.dataFormat),this.dilationRate=Oh(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>Hr(l,"dilationRate"))}build(e){var n;e=zt(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new ce(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],i=4,o=this.kernelSize.concat([s,this.filters*i]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(n=class extends qo{apply(d,f){const h=c.apply([u]),m=Ei([u]),g=c.apply([u*2]);return nR([h,m,g])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return Ae(()=>{if(e.length!==3)throw new ce(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,s=e[0],i=e[1],o=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=eA({ones:()=>io(s),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(K,Y,J)=>!Y||!Y[J]?K:ne(Y[J],K);let u=c(s,l,0),A=c(s,l,1),d=c(s,l,2),f=c(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=eA({ones:()=>io(i),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const h=this.recurrentDropoutMask;let m=c(i,h,0),g=c(i,h,1),y=c(i,h,2),x=c(i,h,3);const v=3,[b,w,C,B]=Oi(this.kernel.read(),a,v),[S,N,k,O]=this.useBias?Oi(this.bias.read(),a):[null,null,null,null];u=this.inputConv(u,b,S,this.padding),A=this.inputConv(A,w,N,this.padding),d=this.inputConv(d,C,k,this.padding),f=this.inputConv(f,B,O,this.padding);const[U,P,V,W]=Oi(this.recurrentKernel.read(),a,v);m=this.recurrentConv(m,U),g=this.recurrentConv(g,P),y=this.recurrentConv(y,V),x=this.recurrentConv(x,W);const L=this.recurrentActivation.apply(Ee(u,m)),G=this.recurrentActivation.apply(Ee(A,g)),_=Ee(ne(G,o),ne(L,this.activation.apply(Ee(d,y)))),j=ne(this.recurrentActivation.apply(Ee(f,x)),this.activation.apply(_));return[j,j,_]})}getConfig(){const e=super.getConfig(),{units:n}=e,r=ZFe(e,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),s)}inputConv(e,n,r,s){const i=Xu(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Da(i,r,this.dataFormat):i}recurrentConv(e,n){return Xu(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}xR.className="ConvLSTM2DCell";Fe(xR);class RJ extends DJ{constructor(e){const n=new xR(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}RJ.className="ConvLSTM2D";Fe(RJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class vR extends Tt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return r}call(e,n){return Ae(()=>{this.invokeCallHook(e,n);const r=At(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,i=this.getNoiseShape(r);return xv(()=>BY(r,this.rate,i,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}vR.className="Dropout";Fe(vR);class PJ extends vR{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}PJ.className="SpatialDropout1D";Fe(PJ);class UJ extends Tt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Hr(this.units,"units"),this.activation=Zu(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Dn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Dn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=kr(e.kernelConstraint),this.biasConstraint=kr(e.biasConstraint),this.kernelRegularizer=Rn(e.kernelRegularizer),this.biasRegularizer=Rn(e.biasRegularizer),this.activityRegularizer=Rn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=zt(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=zt(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return Ae(()=>{this.invokeCallHook(e,n);const r=At(e),s=yY(this.activation.getClassName());let i;return s!=null?i=fl(r,this.kernel.read(),s,this.bias?this.bias.read():null):(i=fl(r,this.kernel.read()),this.bias!=null&&(i=Da(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:Ju(this.activation),useBias:this.useBias,kernelInitializer:Qn(this.kernelInitializer),biasInitializer:Qn(this.biasInitializer),kernelRegularizer:hn(this.kernelRegularizer),biasRegularizer:hn(this.biasRegularizer),activityRegularizer:hn(this.activityRegularizer),kernelConstraint:Ir(this.kernelConstraint),biasConstraint:Ir(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}UJ.className="Dense";Fe(UJ);class jJ extends Tt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=zt(e);for(const n of e.slice(1))if(n==null)throw new ce(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Pu(e,1)]}call(e,n){return Ae(()=>{this.invokeCallHook(e,n);let r=At(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let i=2;i<r.rank;++i)s.push(i);s.push(1),r=Ut(r,s)}return _Te(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}jJ.className="Flatten";Fe(jJ);class LJ extends Tt{constructor(e){super(e),this.supportsMasking=!0,this.activation=Zu(e.activation)}call(e,n){return Ae(()=>{this.invokeCallHook(e,n);const r=At(e);return this.activation.apply(r)})}getConfig(){const e={activation:Ju(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}LJ.className="Activation";Fe(LJ);class MJ extends Tt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return Ae(()=>(e=At(e),FTe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}MJ.className="RepeatVector";Fe(MJ);class QJ extends Tt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",s=n.slice();let i=1,o=null;for(let l=0;l<s.length;++l){const c=s[l];if(this.isUnknown(c))if(o===null)o=l;else throw new ce("Can only specifiy one unknown dimension.");else i*=c}const a=Pu(e);if(o!==null){if(i===0||a%i!==0)throw new ce(r);s[o]=a/i}else if(a!==i)throw new ce(r);return s}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return Ae(()=>{this.invokeCallHook(e,n);const r=At(e),s=r.shape,i=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return oe(r,i)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}QJ.className="Reshape";Fe(QJ);class HJ extends Tt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Ia(1,e.dims.length+1);if(!_t(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Nr({ndim:this.dims.length+1})]}computeOutputShape(e){e=zt(e);const n=e.slice();return this.dims.forEach((r,s)=>{n[s+1]=e[r]}),n}call(e,n){return Ut(At(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}HJ.className="Permute";Fe(HJ);class zJ extends Tt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=At(e);return c2(cp(r,this.maskValue),-1)}call(e,n){return Ae(()=>{this.invokeCallHook(e,n);const r=At(e),o=c2(cp(r,this.maskValue),-1,!0);return ne(r,Ue(o,r.dtype))})}}zJ.className="Masking";Fe(zJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class VJ extends Tt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(en(e.inputLength))}this.inputDim=e.inputDim,Hr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Hr(this.outputDim,"outputDim"),this.embeddingsInitializer=Dn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Rn(e.embeddingsRegularizer),this.activityRegularizer=Rn(e.activityRegularizer),this.embeddingsConstraint=kr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return Ae(()=>this.maskZero?(e=At(e),cp(e,jt(e))):null)}computeOutputShape(e){if(e=zt(e),this.inputLength==null)return[...e,this.outputDim];const n=en(this.inputLength);if(n.length!==e.length-1)throw new ce(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<n.length;++s){const i=n[s],o=e[s+1];if(i!=null&&o!=null&&i!==o)throw new ce(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(n[r]=o),r++}}return[e[0],...n,this.outputDim]}call(e,n){return Ae(()=>{this.invokeCallHook(e,n);let r=At(e);r.dtype!=="int32"&&(r=dl(r,"int32"));const s=SY(this.embeddings.read(),oe(r,[r.size]));return oe(s,zt(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Qn(this.embeddingsInitializer),embeddingsRegularizer:hn(this.embeddingsRegularizer),activityRegularizer:hn(this.activityRegularizer),embeddingsConstraint:Ir(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}VJ.className="Embedding";Fe(VJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class mf extends Tt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Ct}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const i=e[e.length-n.length+s],o=n[s];if(i==null||o==null||i<0||o<0)r.push(null);else if(i===1)r.push(o);else if(o===1)r.push(i);else{if(i!==o)throw new ce("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(i)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[zt(e)]),e=e,e.length<2)throw new ce(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const i of e)i!=null&&i[0]!==null&&n.push(i[0]);if(n=Ru(n),n.length>1)throw new ce(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){const o=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const s=e.map(i=>i.length);e.indexOf(null)===-1&&Ru(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return Ae(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(i=>i.rank);if(s.indexOf(null)===-1){const i=Yu(s);for(let o of e){const a=o.rank;for(let l=0;l<i-a;++l)o=gv(o,1);r.push(o)}return this.mergeFunction(r)}else{let i=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,A=u[0],d=u.slice(1).concat([A]);let f=oe(l,[A].concat(Pu(u.slice(1))));f=Ut(f,[1,0]),f=oe(f,d),r.push(f),i=!0}else if(c>1){const u=Ia(1,c).concat([0]);r.push(Ut(l,u)),i=!0}else r.push(l)}let o=this.mergeFunction(r);const a=o.rank;if(i){if(a==null){const l=o.shape,c=l.length,u=l[c-1],A=[u].concat(l.slice(0,l.length-1));o=oe(Ut(oe(o,[-1,u]),[1,0]),A)}else if(a>1){const l=[a-1].concat(Ia(0,a-1));o=Ut(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const i=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=Ru(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return Ae(()=>{if(n==null)return null;if(!Array.isArray(n))throw new ce("`mask` should be an Array");if(!Array.isArray(e))throw new ce("`inputs` should be an Array");if(n.length!==e.length)throw new ce(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:wr(s,0));let r=n[0];for(let s=1;s<n.length-1;++s)r=ml(r,n[s]);return r})}}class WJ extends mf{constructor(e){super(e)}mergeFunction(e){return Ae(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ee(n,e[r]);return n})}}WJ.className="Add";Fe(WJ);class GJ extends mf{constructor(e){super(e)}mergeFunction(e){return Ae(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ne(n,e[r]);return n})}}GJ.className="Multiply";Fe(GJ);class KJ extends mf{constructor(e){super(e)}mergeFunction(e){return Ae(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ee(n,e[r]);return ne(1/e.length,n)})}}KJ.className="Average";Fe(KJ);class XJ extends mf{constructor(e){super(e)}mergeFunction(e){return Ae(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Fc(n,e[r]);return n})}}XJ.className="Maximum";Fe(XJ);class qJ extends mf{constructor(e){super(e)}mergeFunction(e){return Ae(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Xd(n,e[r]);return n})}}qJ.className="Minimum";Fe(qJ);class YJ extends mf{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new ce("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const r=[];for(let s=0;s<e.length;++s){const i=e[s].slice();i.splice(this.axis,1);let o=!1;for(const a of r)if(_t(a,i)){o=!0;break}o||r.push(i)}if(r.length>1)throw new ce("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Ae(()=>nR(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ce("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const i of n.slice(1)){if(r[s]==null||i[s]==null){r[s]=null;break}r[s]+=i[s]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new ce("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ce("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new ce(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return Ae(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const s=[];for(let o=0;o<e.length;++o)n[o]==null?s.push(Ue(io(e[o]),"bool")):n[o].rank<e[o].rank?s.push(wr(n[o],-1)):s.push(n[o]);const i=qn(s,this.axis);return RO(i,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}YJ.className="Concatenate";Fe(YJ);function ug(t,e){for(;t<0;)t+=e;return t}function e$e(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Ct("batchDot is not implemented for tensors of 4D or higher rank yet");if(M(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),M(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Ct("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,s=e.shape.length;n==null&&(n=[r-1,s-2]);const i=n;return Ae(()=>{let o;if(r>s){o=r-s;const l=[];for(let c=0;c<o;++c)l.push(1);e=oe(e,e.shape.concat(l))}else if(s>r){o=s-r;const l=[];for(let c=0;c<o;++c)l.push(1);t=oe(t,t.shape.concat(l))}else o=0;let a;if(t.shape.length===2&&e.shape.length===2)i[0]===i[1]?a=Je(ne(t,e),i[0]):a=Je(ne(Ut(t,[1,0]),e),i[1]);else{const l=i[0]!==t.shape.length-1,c=i[1]===e.shape.length-1;a=$t(t,e,l,c)}if(o>0){let l;r>s?l=r+s-3:l=r-1;const c=[];for(let u=l;u<l+o;++u)c.push(u);a=Wn(a,c)}return a.shape.length===1&&(a=wr(a,1)),a})}let JJ=class extends mf{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){M(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new Ct("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);if(n[s[0]]!==r[s[1]])throw new ce(`Dimension incompatibility: ${n[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new ce(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((i,o)=>ug(i,e[o].shape.length)):s=[ug(this.axes,n.shape.length),ug(this.axes,r.shape.length)],this.normalize&&(n=x2(n,s[0]),r=x2(r,s[1])),e$e(n,r,s)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[ug(this.axes,e.length),ug(this.axes,n.length)],r}computeOutputShape(e){M(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new Ct("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);n.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const i=n.concat(r);return i.length===1&&i.push(1),i}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}};JJ.className="Dot";Fe(JJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ZJ extends Tt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return Ae(()=>{this.invokeCallHook(e,n);const r=At(e);return xv(()=>Ee(qB(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}ZJ.className="GaussianNoise";Fe(ZJ);class eZ extends Tt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Ae(()=>{this.invokeCallHook(e,n);const r=At(e);return this.rate>0&&this.rate<1?xv(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return ne(r,qB(r.shape,1,i))},()=>r,n.training||!1):r})}}eZ.className="GaussianDropout";Fe(eZ);class tZ extends Tt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||At(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Ae(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return xv(()=>{const i=At(e),a=-1.6732632423543772*1.0507009873554805;let l=hA(ff(r),this.rate);l=dl(l,"float32");const c=((1-this.rate)*(1+this.rate*a**2))**-.5,u=-c*a*this.rate,A=Ee(ne(i,l),ne(Ee(l,-1),a));return Ee(ne(A,c),u)},()=>At(e),n.training||!1)}return e})}}tZ.className="AlphaDropout";Fe(tZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function i0(t,e,n,r,s,i=.001){let o;if(t.rank===2)o=dX(t,e,n,r,s,i);else if(t.rank===3)o=fX(t,e,n,r,s,i);else if(t.rank===4)o=hX(t,e,n,r,s,i);else throw new Ct(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function t$e(t,e,n,r,s=.001){return Ae(()=>{const i=$B(t,r),o=i.mean,a=i.variance;return[i0(t,o,a,n,e,s),o,a]})}function n$e(t,e,n,r,s=.001){return Ae(()=>{const i=$B(t,r),o=i.mean,a=i.variance,l=[];for(const h of Ia(0,t.rank))r.indexOf(h)!==-1?l.push(1):l.push(t.shape[h]);const c=oe(o,l),u=oe(a,l),A=e==null?null:oe(e,l),d=n==null?null:oe(n,l);return[i0(t,c,u,d,A,s),o,a]})}function r$e(t,e,n,r,s=.001){return _t(r.slice().sort(),Ia(0,t.rank-1))?t$e(t,e,n,r,s):n$e(t,e,n,r,s)}class nZ extends Tt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Dn(e.betaInitializer||"zeros"),this.gammaInitializer=Dn(e.gammaInitializer||"ones"),this.movingMeanInitializer=Dn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Dn(e.movingVarianceInitializer||"ones"),this.betaConstraint=kr(e.betaConstraint),this.gammaConstraint=kr(e.gammaConstraint),this.betaRegularizer=Rn(e.betaRegularizer),this.gammaRegularizer=Rn(e.gammaRegularizer)}build(e){e=zt(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new ce(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Nr({ndim:e.length,axes:{[n]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return Ae(()=>{const r=n.training==null?!1:n.training,s=At(e),i=s.shape,o=i.length,a=Ia(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const c=Jd(1,o);c[l]=i[l];const u=a.slice();u.sort();const A=!_t(u,Ia(0,o).slice(0,o-1)),d=()=>{if(A){const x=oe(this.movingMean.read(),c),v=oe(this.movingVariance.read(),c),b=this.center?oe(this.beta.read(),c):null,w=this.scale?oe(this.gamma.read(),c):null;return i0(s,x,v,b,w,this.epsilon)}else return i0(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return d();const[f,h,m]=r$e(s,this.gamma.read(),this.beta.read(),a,this.epsilon),g=(x,v,b)=>{Ae(()=>{const w=1-b,C=x.read(),B=ne(We(C,v),w);x.write(We(C,B))})};return(()=>{g(this.movingMean,h,this.momentum),g(this.movingVariance,m,this.momentum)})(),f})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Qn(this.betaInitializer),gammaInitializer:Qn(this.gammaInitializer),movingMeanInitializer:Qn(this.movingMeanInitializer),movingVarianceInitializer:Qn(this.movingVarianceInitializer),betaRegularizer:hn(this.betaRegularizer),gammaRegularizer:hn(this.gammaRegularizer),betaConstraint:Ir(this.betaConstraint),gammaConstraint:Ir(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}nZ.className="BatchNormalization";Fe(nZ);class rZ extends Tt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Dn(e.betaInitializer||"zeros"),this.gammaInitializer=Dn(e.gammaInitializer||"ones"),this.betaRegularizer=Rn(e.betaRegularizer),this.gammaRegularizer=Rn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=zt(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(const i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==Ru(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(i=>e[i]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const r=At(e),s=r.shape,i=s.length;return Ae(()=>{let{mean:a,variance:l}=$B(r,this.axis,!0);const c=Jd(1,i);for(const m of this.axis)c[m]=s[m];const u=m=>m!=null&&m.shape.length!==i?oe(m,c):m;let A=this.scale?u(this.gamma.read()):null,d=this.center?u(this.beta.read()):null;const f=[],h=[];for(let m=0;m<i;++m)this.axis.indexOf(m)!==-1?(f.push(s[m]),h.push(1)):(f.push(1),h.push(s[m]));return a=_o(a,f),l=_o(l,f),A!=null&&(A=_o(A,h)),d!=null&&(d=_o(d,h)),i0(r,a,l,d,A,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Qn(this.betaInitializer),gammaInitializer:Qn(this.gammaInitializer),betaRegularizer:hn(this.betaRegularizer),gammaRegularizer:hn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}rZ.className="LayerNormalization";Fe(rZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function s$e(t,e,n){return Ae(()=>{if(t.rank!==4)throw new ce(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new ce("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=ka()),n!=="channelsLast"&&n!=="channelsFirst")throw new ce(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],pA(t,r)})}class sZ extends Tt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?ka():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new ce(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new ce(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new ce(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Nr({ndim:4})]}computeOutputShape(e){e=zt(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return Ae(()=>s$e(At(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}sZ.className="ZeroPadding2D";Fe(sZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function s3(t,e,n,r,s,i){return Ae(()=>{lr(s),vY(i),co(r),n==null&&(n=[1,1]),r==null&&(r="valid"),s==null&&(s=ka()),i==null&&(i="max"),t=pR(t,s);let o;const a=r==="same"?"same":"valid";return i==="max"?o=FB(t,e,n,a):o=CB(t,e,n,a),s==="channelsFirst"&&(o=Ut(o,[0,3,1,2])),o})}function iZ(t,e,n,r,s,i){return Ae(()=>{lr(s),vY(i),co(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),s==null&&(s=ka()),i==null&&(i="max"),t=wJ(t,s);let o;const a=r==="same"?"same":"valid";return i==="max"?o=UX(t,e,n,a):o=AX(t,e,n,a),s==="channelsFirst"&&(o=Ut(o,[0,4,1,2,3])),o})}class oZ extends Tt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new ce(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Hr(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new ce(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Hr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,co(this.padding),this.inputSpec=[new Nr({ndim:3})]}computeOutputShape(e){e=zt(e);const n=Ca(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return Ae(()=>{this.invokeCallHook(e,n),e=gv(At(e),2);const r=this.poolingFunction(At(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Wn(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class aZ extends oZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return lr(i),co(s),s3(e,n,r,s,i,"max")}}aZ.className="MaxPooling1D";Fe(aZ);class lZ extends oZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return lr(i),co(s),s3(e,n,r,s,i,"avg")}}lZ.className="AveragePooling1D";Fe(lZ);class cZ extends Tt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new ce(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Hr(this.poolSize,"poolSize"),Hr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,lr(this.dataFormat),co(this.padding),this.inputSpec=[new Nr({ndim:4})]}computeOutputShape(e){e=zt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Ca(n,this.poolSize[0],this.padding,this.strides[0]),r=Ca(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return Ae(()=>(this.invokeCallHook(e,n),this.poolingFunction(At(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class uZ extends cZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return lr(i),co(s),s3(e,n,r,s,i,"max")}}uZ.className="MaxPooling2D";Fe(uZ);class AZ extends cZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return lr(i),co(s),s3(e,n,r,s,i,"avg")}}AZ.className="AveragePooling2D";Fe(AZ);class dZ extends Tt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new ce(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Hr(this.poolSize,"poolSize"),Hr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,lr(this.dataFormat),co(this.padding),this.inputSpec=[new Nr({ndim:5})]}computeOutputShape(e){e=zt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Ca(n,this.poolSize[0],this.padding,this.strides[0]),r=Ca(r,this.poolSize[1],this.padding,this.strides[1]),s=Ca(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,s]:[e[0],n,r,s,e[4]]}call(e,n){return Ae(()=>(this.invokeCallHook(e,n),this.poolingFunction(At(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class fZ extends dZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return lr(i),co(s),iZ(e,n,r,s,i,"max")}}fZ.className="MaxPooling3D";Fe(fZ);class hZ extends dZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return lr(i),co(s),iZ(e,n,r,s,i,"avg")}}hZ.className="AveragePooling3D";Fe(hZ);class pZ extends Tt{constructor(e){super(e),this.inputSpec=[new Nr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Ct}}class mZ extends pZ{constructor(e){super(e||{})}call(e,n){return Ae(()=>{const r=At(e);return Kn(r,1)})}}mZ.className="GlobalAveragePooling1D";Fe(mZ);class gZ extends pZ{constructor(e){super(e||{})}call(e,n){return Ae(()=>{const r=At(e);return jo(r,1)})}}gZ.className="GlobalMaxPooling1D";Fe(gZ);class yZ extends Tt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,lr(this.dataFormat),this.inputSpec=[new Nr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Ct}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class xZ extends yZ{call(e,n){return Ae(()=>{const r=At(e);return this.dataFormat==="channelsLast"?Kn(r,[1,2]):Kn(r,[2,3])})}}xZ.className="GlobalAveragePooling2D";Fe(xZ);class vZ extends yZ{call(e,n){return Ae(()=>{const r=At(e);return this.dataFormat==="channelsLast"?jo(r,[1,2]):jo(r,[2,3])})}}vZ.className="GlobalMaxPooling2D";Fe(vZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class bZ extends Tt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const s=n.layer,i=ac(s,r);delete n.layer;const o={layer:i};return Object.assign(o,n),new e(o)}}class wZ extends bZ{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=zt(e),e.length<3)throw new ce(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=zt(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,n){return Ae(()=>(e=At(e),FJ((o,a)=>[At(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}wZ.className="TimeDistributed";Fe(wZ);function i$e(t){pf(NTe,"BidirectionalMergeMode",t)}const o$e="concat";class CZ extends bZ{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=ac(r),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=ac(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?o$e:e.mergeMode,i$e(this.mergeMode),e.weights)throw new Ct("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,s,i;return this.returnState&&(i=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(i).concat(i.slice()):[r].concat(i).concat(i.slice()):ei(s)}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=TJ(e,r,s,this.numConstants);if(e=i.inputs,r=i.initialState,s=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,n);const o=[],a=[];if(r!=null){const c=r.length;if(c%2>0)throw new ce("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const u=r.map(A=>new Nr({shape:A.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),a.push(...u)}if(s!=null)throw new Ct("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof gl;for(const c of o)if(c instanceof gl!==l)throw new ce("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(o),u=this.inputSpec.concat(a),A=this.inputSpec;this.inputSpec=u;const d=super.apply(c,n);return this.inputSpec=A,d}else return super.apply(e,n)}call(e,n){return Ae(()=>{const r=n.initialState;let s,i;if(r==null)s=this.forwardLayer.call(e,n),i=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),i=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let o;this.returnState&&(Array.isArray(s)&&(o=s.slice(1).concat(i.slice(1))),s=s[0],i=i[0]),this.returnSequences&&(i=zo(i,1));let a;return this.mergeMode==="concat"?a=nR([s,i]):this.mergeMode==="sum"?a=Ee(s,i):this.mergeMode==="ave"?a=ne(.5,Ee(s,i)):this.mergeMode==="mul"?a=ne(s,i):this.mergeMode==null&&(a=[s,i]),this.returnState?this.mergeMode==null?a.concat(o):[a].concat(o):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){kd(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),kd(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const i=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(i).concat(i):[r].concat(i).concat(i)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=ac(n.layer);if(delete n.layer,n.numConstants!=null)throw new Ct("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=r,new e(s)}}CZ.className="Bidirectional";Fe(CZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class SZ extends Tt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Ae(()=>(e=At(e),e.dtype!=="float32"&&(e=dl(e,"float32")),Ee(ne(e,this.scale),this.offset)))}}SZ.className="Rescaling";Fe(SZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:a$e,cropAndResize:l$e}=ni;class BZ extends Tt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,s,i,o,a,l){return Ae(()=>{let c,u=!1;const A=n/o,d=r/a,f=(s+n)/o,h=(i+r)/a,m=[A,d,f,h],g=[];e.rank===3?(u=!0,c=Ri([e])):c=e;for(let w=0;w<c.shape[0];w++)g.push(m);const y=va(g,[g.length,4]),x=up(0,g.length,1,"int32"),b=l$e(c,y,x,[s,i],"nearest");return dl(u?At(Vo(b)):b,l)})}upsize(e,n,r,s){return Ae(()=>{const i=a$e(e,[n,r]);return dl(i,s)})}call(e,n){return Ae(()=>{const r=At(e),s=r.dtype,i=r.shape,o=i[i.length-3],a=i[i.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let c=0;return a!==this.width&&(c=Math.floor((a-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,o,a,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=zt(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}BZ.className="CenterCrop";Fe(BZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function c$e(t,e,n,r){let s=At(t);if(s.dtype!=="int32"&&(s=dl(s,"int32")),e==="int")return s;const i=s.shape;if(s.rank===0&&(s=wr(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=wr(s,-1)),s.rank>2)throw new ce(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${i} which would result in output rank ${s.rank}.`);const o=["multiHot","oneHot"].includes(e),a=s;let l;if(typeof r<"u"&&e==="count"?l=Lk(a,r,n,o):l=Lk(a,[],n,o),e!=="tfIdf")return l;if(r)return ne(l,r);throw new ce("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class NZ extends Tt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=zt(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return Ae(()=>{e=At(e),e.dtype!=="int32"&&(e=dl(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new ce(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=At(n.countWeights)}const s=jo(e),i=Yy(e),o=Mi(this.numTokens,s).bufferSync().get(0),a=hA(i,0).bufferSync().get(0);if(!(o&&a))throw new ce(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return c$e(e,this.outputMode,this.numTokens,r)})}}NZ.className="CategoryEncoding";Fe(NZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const u$e=["bilinear","nearest"],y5=new Set(u$e);class EZ extends Tt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(y5.has(e.interpolation))this.interpolation=e.interpolation;else throw new ce(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=zt(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Ae(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return ni.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return ni.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...y5]} are supported`)})}}EZ.className="Resizing";Fe(EZ);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class IZ{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}IZ.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class kZ extends Tt{constructor(e){super(e),this.randomGenerator=new IZ(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}kZ.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const A$e=["bilinear","nearest"],x5=new Set(A$e);class TZ extends kZ{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new ce(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new ce(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ce(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(x5.has(r))this.interpolation=r;else throw new ce(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=zt(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return Ae(()=>{const r=At(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=ff([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*s;i=Math.round(i);const o=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return ni.resizeBilinear(e,o);case"nearest":return ni.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...x5]} are supported`)}})}}TZ.className="RandomWidth";Fe(TZ);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var v5;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(v5||(v5={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ze(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&M(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d$e=gD;class i3 extends C_{nextDataId(){return i3.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new dK(this,Ka())}write(e,n,r){this.firstUse&&(this.firstUse=!1,he().get("IS_NODE")&&Ji(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&cx(r[0])){const i=r.map(o=>Ou(o));s=this.write(i,e,n)}else s=this.write(r,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,s,i){this.data.set(e,{values:n,dtype:s,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const s=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return yc(s,i)}return T1e(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>Vu(s));return St(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return St(e.shape,e.dtype,n)}makeOutput(e,n,r){return Ka().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Js();return e(),{kernelMs:Js()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Ze([e],"where");const n=this.readSync(e.dataId);return d$e(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}i3.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FZ(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const f$e=t=>{const{x:e}=t.inputs,n=t.backend;Ze(e,"abs");let r=new Float32Array(ye(e.shape));const s=n.data.get(e.dataId).values;return r=FZ(s),n.makeOutput(r,e.shape,e.dtype)},h$e={kernelName:xS,backendName:"cpu",kernelFunc:f$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cr(t){return(e,n,r,s,i)=>{const o=bt(e,n),a=o.length,l=ot(o),c=ye(o),u=rs(i,c),A=e.length,d=n.length,f=ot(e),h=ot(n),m=lp(e,o),g=lp(n,o);if(m.length+g.length===0)for(let y=0;y<u.length;++y)u[y]=t(r[y%r.length],s[y%s.length]);else for(let y=0;y<u.length;++y){const x=tm(y,a,l),v=x.slice(-A);m.forEach(B=>v[B]=0);const b=ul(v,A,f),w=x.slice(-d);g.forEach(B=>w[B]=0);const C=ul(w,d,h);u[y]=t(r[b],s[C])}return[u,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wi(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(s.shape,"float32",o)},a}const p$e={kernelName:__,backendName:"cpu",kernelFunc:wi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2(t,e,n="float32"){if(n==="complex64"){const s=S2(t,e,"float32"),i=S2(t,e,"float32");return wi({inputs:{real:s,imag:i},backend:t})}const r=bs(ye(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yl(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const m$e={kernelName:Tx,backendName:"cpu",kernelFunc:yl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zd(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const g$e={kernelName:AO,backendName:"cpu",kernelFunc:Zd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Z(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=uf([0],n),[i,o]=cr((a,l)=>a!==l?1:0)(e,[],t,s,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function tA(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return yl({inputs:{x:s},backend:n});const u=S2(n,s.shape,s.dtype),A=tA({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),d=wi({inputs:{real:A,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(A),d}if(s.dtype==="complex64"){const u=Zd({inputs:{input:s},backend:n}),A=tA({inputs:{x:u},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(u),A}if(!hK(s.dtype,i)){const u=yl({inputs:{x:s},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:i}}const o=n.data.get(s.dataId).values,[a,l,c]=$Z(o,s.shape,s.dtype,i);return n.makeTensorInfo(a,l,c)}const y$e={kernelName:gx,backendName:"cpu",kernelFunc:tA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $r(t,e,n,r){return n==null?({inputs:s,backend:i})=>{const{a:o,b:a}=s,l=i;Ze([o,a],t);const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,A=o.dtype==="string"?xc(c):c,d=o.dtype==="string"?xc(u):u,f=r||o.dtype,[h,m]=e(o.shape,a.shape,A,d,f);return l.makeTensorInfo(m,f,h)}:({inputs:s,backend:i})=>{const{a:o,b:a}=s,l=i;if(o.dtype==="complex64"||a.dtype==="complex64"){const c=tA({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),A=u.complexTensorInfos.real,d=u.complexTensorInfos.imag,f=l.data.get(A.dataId).values,h=l.data.get(d.dataId).values,m=tA({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),y=g.complexTensorInfos.real,x=g.complexTensorInfos.imag,v=l.data.get(y.dataId).values,b=l.data.get(x.dataId).values,[w,C,B]=n(o.shape,a.shape,f,h,v,b),S=l.makeTensorInfo(B,"float32",w),N=l.makeTensorInfo(B,"float32",C),k=wi({inputs:{real:S,imag:N},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(S),l.disposeIntermediateTensorInfo(N),k}else{const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,A=r||o.dtype,[d,f]=e(o.shape,a.shape,c,u,A);return l.makeTensorInfo(f,A,d)}}}function bR(t){return(e,n,r,s,i,o)=>{const a=bt(e,n),l=ye(a),c=a.length,u=ot(a),A=rs("float32",l),d=rs("float32",l),f=lp(e,a),h=lp(n,a),m=yc(r,s),g=yc(i,o),y=e.length,x=ot(e),v=n.length,b=ot(n);if(f.length+h.length===0)for(let w=0;w<A.length;w++){const C=w%m.length,B=w%g.length,S=t(m[C*2],m[C*2+1],g[B*2],g[B*2+1]);A[w]=S.real,d[w]=S.imag}else for(let w=0;w<A.length;w++){const C=tm(w,c,u),B=C.slice(-y);f.forEach(U=>B[U]=0);const S=ul(B,y,x),N=C.slice(-v);h.forEach(U=>N[U]=0);const k=ul(N,v,b),O=t(m[S*2],m[S*2+1],g[k*2],g[k*2+1]);A[w]=O.real,d[w]=O.imag}return[A,d,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Z=cr((t,e)=>t+e),x$e=bR((t,e,n,r)=>({real:t+n,imag:e+r})),dp=$r(nm,_Z,x$e),v$e={kernelName:nm,backendName:"cpu",kernelFunc:dp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wR(t,e,n,r,s){const i=ye(r),o=bs(s,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(i>0?o[l]+=e[a]:o[l]+=1)}return o}function OZ(t,e,n,r=!1){const s=t.shape[0],i=t.shape[1],o=St([s,n],e.dtype);for(let a=0;a<s;a++)for(let l=0;l<i;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,a,c):e.size>0?o.set(o.get(a,c)+e.get(a,l),a,c):o.set(o.get(a,c)+1,a,c))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DZ=cr((t,e)=>t&e),b$e=$r(ES,DZ),w$e={kernelName:ES,backendName:"cpu",kernelFunc:b$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cl(t){return(e,n,r)=>{const s=sr(n,e.length);for(let i=0;i<e.length;++i)s[i]=t(e[i],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nn(t,e,n){const r=Cl(e);return yA(t,r,n)}function yA(t,e,n){return({inputs:r,attrs:s,backend:i})=>{const{x:o}=r;Ze(o,t);const a=i,l=a.data.get(o.dataId).values;let c;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=xc(l)}else c=l;const u=n||o.dtype,A=e(c,u,s);return a.makeTensorInfo(o.shape,u,A)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RZ=Cl(t=>Math.ceil(t)),C$e=yA(yx,RZ),S$e={kernelName:yx,backendName:"cpu",kernelFunc:C$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PZ(t,e,n,r){const s=sr(n,ye(e));if(r&&n!=="string"){let i=0;t.forEach(o=>{const a=ye(o.shape);s.set(o.vals,i),i+=a})}else{let i=0;t.forEach(o=>{const a=n==="string"?xc(o.vals):o.vals;let l=0;for(let c=0;c<o.shape[0];++c){const u=c*e[1]+i;for(let A=0;A<o.shape[1];++A)s[u+A]=a[l++]}i+=o.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UZ=cr((t,e)=>t===e?1:0),jZ=$r(RS,UZ,null,"bool"),B$e={kernelName:RS,backendName:"cpu",kernelFunc:jZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LZ=Cl(t=>Math.exp(t)),MZ=yA(Bx,LZ,"float32"),N$e={kernelName:Bx,backendName:"cpu",kernelFunc:MZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QZ=Cl(t=>Math.expm1(t)),E$e=yA(Nx,QZ),I$e={kernelName:Nx,backendName:"cpu",kernelFunc:E$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HZ=Cl(t=>Math.floor(t)),k$e=yA(Ex,HZ),T$e={kernelName:Ex,backendName:"cpu",kernelFunc:k$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zZ=cr((t,e)=>Math.floor(t/e)),F$e=$r(Ix,zZ,null,"int32"),$$e={kernelName:Ix,backendName:"cpu",kernelFunc:F$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VZ(t,e,n,r,s,i,o,a,l){const c=St([r,i],n);for(let u=0;u<r;u++){const A=[];let d=0;for(let f=0;f<s;f++){const h=t[u*s+f];d+=h*o[f],A.push(h)}if(d<0||d>=l/i)throw new Error(`Invalid indices: ${A} does not index into ${a}`);for(let f=0;f<i;f++)c.values[u*i+f]=e.get(...e.indexToLoc(d*i+f))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WZ(t,e,n){const r=St(n,t.dtype);for(let s=0;s<r.size;++s){const o=r.indexToLoc(s).slice(),a=o[0],l=o[2],c=e.locToIndex([a,l]);o[2]=e.values[c];const u=t.locToIndex(o);0<=u&&u<t.values.length&&(r.values[s]=t.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GZ=cr((t,e)=>t>e?1:0),_$e=$r(LS,GZ,null,"bool"),O$e={kernelName:LS,backendName:"cpu",kernelFunc:_$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KZ=cr((t,e)=>t>=e?1:0),D$e=$r(kx,KZ,null,"bool"),R$e={kernelName:kx,backendName:"cpu",kernelFunc:D$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XZ=cr((t,e)=>t<e?1:0),P$e=$r(QS,XZ,null,"bool"),U$e={kernelName:QS,backendName:"cpu",kernelFunc:P$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qZ=cr((t,e)=>t<=e?1:0),j$e=$r(HS,qZ,null,"bool"),L$e={kernelName:HS,backendName:"cpu",kernelFunc:j$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YZ(t,e,n){const r=(e-t)/(n-1),s=bs(n,"float32");s[0]=t;for(let i=1;i<s.length;i++)s[i]=s[i-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JZ=Cl(t=>Math.log(t)),M$e=yA(Ox,JZ),Q$e={kernelName:Ox,backendName:"cpu",kernelFunc:M$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZZ(t,e,n,r){const s=rs(r,ye(n));for(let i=0;i<s.length;++i){const o=i*e;let a=t[o];for(let l=0;l<e;++l){const c=t[o+l];(Number.isNaN(c)||c>a)&&(a=c)}s[i]=a}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eee=cr((t,e)=>Math.max(t,e)),H$e=$r(Rx,eee),z$e={kernelName:Rx,backendName:"cpu",kernelFunc:H$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tee=cr((t,e)=>Math.min(t,e)),V$e=$r(Px,tee),W$e={kernelName:Px,backendName:"cpu",kernelFunc:V$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CR=cr((t,e)=>t*e),G$e=bR((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),o3=$r(jx,CR,G$e),K$e={kernelName:jx,backendName:"cpu",kernelFunc:o3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nee(t,e,n){const r=cA(-1,n);return CR([],e,r,t,n)}function X$e(t){const{inputs:e,backend:n}=t,{x:r}=e;Ze(r,"neg");const s=n.data.get(r.dataId).values,[i,o]=nee(s,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}const q$e={kernelName:eB,backendName:"cpu",kernelFunc:X$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ree=cr((t,e)=>t!==e?1:0),Y$e=$r(tB,ree,null,"bool"),J$e={kernelName:tB,backendName:"cpu",kernelFunc:Y$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SR(t,e,n,r,s){const i=e.length,o=ye(e),a=ot(e),l=ot(s),c=rs(n,ye(s));for(let u=0;u<o;++u){const A=tm(u,i,a),d=new Array(A.length);for(let h=0;h<d.length;h++)d[h]=A[r[h]];const f=ul(d,i,l);c[f]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ai(t){const{inputs:e,attrs:n,backend:r}=t,{x:s}=e,{perm:i}=n;Ze(s,"transpose");const o=s.shape.length,a=new Array(o);for(let A=0;A<a.length;A++)a[A]=s.shape[i[A]];const l=r.data.get(s.dataId).values,c=SR(l,s.shape,s.dtype,i,a);return{dataId:r.write(c,a,s.dtype),shape:a,dtype:s.dtype}}const Z$e={kernelName:kh,backendName:"cpu",kernelFunc:ai};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function see(t,e,n,r){const[s,i]=Wr(t,r),o=Di(e,"int32"),a=bs(ye(s),o),l=ye(i);for(let c=0;c<a.length;++c){const u=c*l;let A=1;for(let d=0;d<l;++d)A*=n[u+d];a[c]=A}return{outVals:a,outShape:s,outDtype:o}}function e_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ze(s,"prod");const a=s.shape.length,l=kt(i,s.shape),c=zn(l,a);let u=l,A=s;const d=[];c!=null&&(A=ai({inputs:{x:s},backend:n,attrs:{perm:c}}),d.push(A),u=ar(u.length,a));const f=n.data.get(A.dataId).values,{outVals:h,outShape:m,outDtype:g}=see(A.shape,A.dtype,f,u);let y=m;return o&&(y=or(m,l)),d.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(y,g,h)}const t_e={kernelName:aB,backendName:"cpu",kernelFunc:e_e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n_e(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const i=tm(s,e.length,ot(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function r_e(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function s_e(t,e,n,r){const s=[];let i=0;const o=e.length-1+n.length,a=new Array(o).fill(null).map(()=>[0]);r_e(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let A=1;A<l+1;++A)a[c].push(A*u)}for(let c=0;c<t.length;++c){let u=t[c],A=t[c]+1;for(let d=0;d<n.length;++d){const f=n[d],h=d+e.length-1;if(h>=0){const m=a[h],g=m[m.length-1]-f[u];for(let y=u;y<A;++y)a[h].push(f[y+1]+g)}u=f[u],A=f[A]}A!==u&&(s.push([u,A]),i+=A-u)}return{outSplits:a,valueSlices:s,numValues:i}}function i_e(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=sr("int32",r);e.push(s),t[n].forEach((i,o)=>s[o]=i)}return e}function b5(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function o_e(t,e,n,r,s,i){const o=b5(e,2)[1],a=b5(i,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let A=0;A<r;++A)s[l*a+A]=t[u*o+A];++l}}function a_e(t,e,n,r,s){const i=e.slice();i[0]=s;const o=sr(n,ye(i)),a=t.length,l=a===0?0:a/e[0];return o_e(t,e,r,l,o,i),[o,i]}function iee(t,e,n,r,s,i,o,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(n_e(i,o,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:A,numValues:d}=s_e(i,o,t,c),f=i_e(u),h=a_e(n,r,s,A,d);return[f,h[0],h[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w5=2147483647;function oee(t,e,n,r,s,i,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=s.length===0,c=o.length===0,u=[];a||u.push(e[0]),l||u.push(s[0]),c||u.push(o[0]);for(let g=1;g<u.length;++g)if(u[g]!==u[g-1])throw new Error("starts, limits, and deltas must have the same shape");const A=u.length===0?1:u[0],d=sr("int32",A+1);d[0]=0;for(let g=0;g<A;++g){const y=a?t[0]:t[g],x=l?r[0]:r[g],v=c?i[0]:i[g];if(v===0)throw new Error("Requires delta != 0");let b;if(v>0&&x<y||v<0&&x>y)b=0;else if(b=Math.ceil(Math.abs((x-y)/v)),b>w5)throw new Error(`Requires ((limit - start) / delta) <= ${w5}`);d[g+1]=d[g]+b}const f=d[A],h=sr(n,f);let m=0;for(let g=0;g<A;++g){const y=d[g+1]-d[g];let x=a?t[0]:t[g];const v=c?i[0]:i[g];for(let b=0;b<y;++b)h[m++]=x,x+=v}return[d,h]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ho=fa;class B2{constructor(e,n,r,s,i,o,a,l,c,u){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=Oq(u),this.raggedRank=Dq(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===ho.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===ho.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case ho.VALUE_ROWIDS:return B2.getMaxWidthValueRowID(n);case ho.ROW_SPLITS:return B2.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${ho[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const i=e[s+1]-e[s];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],i=0;for(let o=1;o<n;++o){const a=e[o];a!==s&&(s=a,i=Math.max(o-r,i),r=o)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return S5(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;Rq(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=_q(this.raggedRank,s,n);o[0]<0&&(o[0]=e);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),i=[];let o=0;for(let a=0;a<s;++a,o+=n)i.push(o);for(let a=s;a<e;++a)i.push(-1);return M(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,s){const i=e.length,o=[];for(let a=0;a<i-1;++a){const l=e[a+1]-e[a];let c=Math.min(s,l),u=n[a];u===-1&&(c=0);for(let A=0;A<c;++A)o.push(u),u+=r;for(let A=0;A<l-c;++A)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,s){const i=e.length,o=[];if(i===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];o.push(c);for(let u=1;u<i;++u){const A=e[u];if(A===l)c>=0&&(++a,a<s?c+=r:c=-1);else{if(a=0,l=A,A>=n.length)throw new Error(`Got nextValueRowId=${A} which is not less than ${n.length}`);c=n[A]}o.push(c)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,s){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case ho.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,s);case ho.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,s);default:throw new Error(`Unsupported partition type: ${ho[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case ho.FIRST_DIM_SIZE:return e[0];case ho.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case ho.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${ho[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const i=S5(r,!1),o=sr(this.valuesDType,ye(i));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],r[c]);this.setOutput(this.raggedRank,l,o,i)}return[i,o]}setOutput(e,n,r,s){if(r.length===0)return;const i=this.values,o=r;let a=s.slice();a=a.slice(e+1);const l=ye(a),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const h=this.defaultValueShape;Ae(()=>{const m=oe(u,h);u=$h(m,a).dataSync()})}let A=0,d=0,f=0;for(let h=0;h<=c;++h){let m=h<c?n[h]:-1;if(m===f){++f;continue}if(d<f){const g=i.subarray(A*l),y=o.subarray(d*l),x=(f-d)*l;C5(y,g,x)}if(h>=c){const g=r.length;m=Math.floor(g/l)}if(m>f)if(this.defaultValue.length===1)o.subarray(f*l,m*l).fill(this.defaultValue[0]),f=m;else for(;m>f;){const g=o.slice(f*l);C5(g,u,l),++f}m<0?(A=h+1,d=f):(A=h,d=f,f=d+1)}}}function C5(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function S5(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function aee(t,e,n,r,s,i,o,a,l,c){return new B2(t,e,n,r,s,i,o,a,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lee(t,e,n,r){const s=t===e,i=t<e&&n<0,o=e<t&&n>1;if(s||i||o)return bs(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=bs(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cee=Cl(t=>1/Math.sqrt(t)),l_e=yA(Vx,cee),c_e={kernelName:Vx,backendName:"cpu",kernelFunc:l_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ld(t,e,n,r,s,i,o,a,l,c){const u=[r/s,s],A=t.values,d=e.values;if(r===0)return St(n,e.dtype);const f=l instanceof Er?l:St(u,e.dtype);typeof l=="string"||typeof l=="number"?f.values.fill(l):typeof l=="boolean"&&f.values.fill(+l);for(let h=0;h<i;h++){const m=[];let g=0;for(let y=0;y<o;y++){const x=A[h*o+y];m.push(x),g+=x*a[y]}if(g<0||g>=r/s)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let y=0;y<s;y++)c?f.values[g*s+y]+=d[h*s+y]:f.values[g*s+y]=e.rank===0?d[0]:d[h*s+y]}return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u_e=Cl(t=>1/(1+Math.exp(-t))),uee=nn(qx,t=>1/(1+Math.exp(-t))),A_e={kernelName:qx,backendName:"cpu",kernelFunc:uee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aee(t,e,n,r,s){const i=TD(r,e,n),o=ye(n),a=ot(r);if(i){const A=FD(e,a);return s==="string"?t.slice(A,A+o):t.subarray(A,A+o)}const l=s==="string"?xc(t):t,c=St(r,s,l),u=St(n,s);for(let A=0;A<u.size;++A){const d=u.indexToLoc(A),f=d.map((h,m)=>h+e[m]);u.set(c.get(...f),...d)}return s==="string"?nY(u.values):u.values}function ef(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r;Ze(s,"slice");const[a,l]=VB(s,i,o);ID(s,a,l);const c=n.data.get(s.dataId).values,u=Aee(c,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,u)}const d_e={kernelName:fB,backendName:"cpu",kernelFunc:ef};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dee(t,e,n,r,s,i,o){const a=e[0],l=i[0],c=new Array(l),u=new Array(a),A=e[1];if(l===0){if(a!==0)throw new Error(Hq(a));const g=sr(n,0),y=sr(s,0);return[g,[0,A],y,c,u]}let d=!0,f=0;const h=new Array(l).fill(0);for(let g=0;g<a;++g){const y=t[g*A];if(y<0)throw new Error(zq(g,y));if(y>=l)throw new Error(Vq(g,y,l));++h[y],d=d&&y>=f,f=y}let m=!0;for(let g=0;g<l;++g){const y=h[g]===0;c[g]=y,m=m&&!y,h[g]=Math.max(h[g],1),g>0&&(h[g]+=h[g-1])}if(m&&d){const g=t,y=r;for(let x=0;x<a;++x)u[x]=x;return[g,[a,A],y,c,u]}else{const g=h[l-1],y=sr(n,g*A),x=sr(s,g),v=new Array(l).fill(0);for(let b=0;b<a;++b){const w=t[b*A],C=v[w],B=(w===0?0:h[w-1])+C;v[w]++;for(let S=0;S<A;++S)y[B*A+S]=t[b*A+S];x[B]=r[b],u[b]=B}for(let b=0;b<l;++b)if(v[b]===0){const C=b===0?0:h[b-1];y[C*A+0]=b;for(let B=1;B<A;++B)y[C*A+B]=0;x[C]=o}return[y,[g,A],x,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fee(t,e,n,r,s){const i=ye(r),o=e[0],a=s.length,l=[];let c=1,u=-1;for(let g=0;g<a;++g){const y=s[g];if(y===-1){if(u!==-1)throw new Error(Wq(u,g));u=g,l.push(1)}else{if(y<0)throw new Error(Gq(g,y));c*=y,l.push(y)}}if(u!==-1){if(c<=0)throw new Error(Kq());const g=Math.trunc(i/c);if(c*g!==i)throw new Error(Xq(r,l));l[u]=g}if(ye(l)!==i)throw new Error(qq(r,l));const d=r.length,f=[];if(d>0){f[d-1]=1;for(let g=d-2;g>=0;--g)f[g]=f[g+1]*r[g+1]}const h=[];if(a>0){h[a-1]=1;for(let g=a-2;g>=0;--g)h[g]=h[g+1]*l[g+1]}const m=sr(n,o*a);for(let g=0;g<o;++g){let y=0;for(let x=0;x<d;++x)y+=t[g*d+x]*f[x];for(let x=0;x<a;++x)m[g*a+x]=Math.trunc(y/h[x]),y%=h[x]}return[m,[o,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BR(t,e,n,r,s,i=!1,o=0){const a=r.length,l=[e[0],t.length/e[0]],c=l[1],A=a>0?s[a-1]+1:0;if(A<0)throw new Error(zk());const d=e.slice();d[0]=A;const f=d.reduce((v,b)=>v*b,1),h=sr(n,f);if(a===0)return A>0&&h.fill(o),[h,d];if(A<=0)throw new Error(zk());let m=0,g=1,y=0,x=s[m];for(;;){let v=0;if(g<a){if(v=s[g],x===v){++g;continue}if(x>=v)throw new Error(Yq())}if(x<0||x>=A)throw new Error(Jq(x,A));x>y&&h.fill(o,y*c,x*c);for(let b=m;b<g;++b){const w=r[b];if(w<0||w>=l[0])throw new Error(Zq(b,r[b],l[0]));for(let C=0;C<c;C++)h[x*c+C]+=t[w*c+C]}if(i)for(let b=0;b<c;b++)h[x*c+b]/=g-m;if(m=g,++g,y=x+1,x=v,g>a)break}return y<A&&h.fill(o,y*c,A*c),[h,d]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f_e=Cl(t=>Math.sqrt(t)),h_e=nn(Jx,t=>Math.sqrt(t)),p_e={kernelName:Jx,backendName:"cpu",kernelFunc:h_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hee=cr((t,e)=>{const n=t-e;return n*n}),m_e=$r(Zx,hee),g_e={kernelName:Zx,backendName:"cpu",kernelFunc:m_e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pee=Cl((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)}),y_e=yA(yB,pee),x_e={kernelName:yB,backendName:"cpu",kernelFunc:y_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mee(t,e,n,r){const s=St(t,e.dtype);for(let i=0;i<s.size;i++){const o=s.indexToLoc(i),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*n[l]+r[l];s.set(e.get(...a),...o)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v_e{constructor(e,n,r,s,i,o){this.separator=Ou(e),this.nGramWidths=n,this.leftPad=Ou(r),this.rightPad=Ou(s),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,i,o){for(let a=0;a<i;++a){const l=this.getPadWidth(o),c=Math.max(0,l-a),u=Math.max(0,l-(i-(a+1))),A=o-(c+u),d=n+(c>0?0:a-l);let f=0;f+=c*this.leftPad.length;for(let x=0;x<A;++x)f+=e[d+x].length;f+=u*this.rightPad.length;const h=c+u+A-1;f+=h*this.separator.length,r[s+a]=new Uint8Array(f);const m=r[s+a];let g=0;const y=x=>x.forEach(v=>m[g++]=v);for(let x=0;x<c;++x)y(this.leftPad),y(this.separator);for(let x=0;x<A-1;++x)y(e[d+x]),y(this.separator);if(A>0){y(e[d+A-1]);for(let x=0;x<u;++x)y(this.separator),y(this.rightPad)}else{for(let x=0;x<u-1;++x)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<s;++c){let u=n[c]>=l;if(u=u&&n[c]<=r,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=s-1,o=sr("int32",s);if(r===0||s===0){const l=new Array(r);for(let c=0;c<=i;++c)o[c]=0;return[l,o]}o[0]=0;for(let l=1;l<=i;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(A=>{u+=this.getNumNGrams(c,A)}),this.preserveShort&&c>0&&u===0&&(u=1),o[l]=o[l-1]+u}const a=new Array(o[i]);for(let l=0;l<i;++l){const c=n[l];let u=o[l];if(this.nGramWidths.forEach(A=>{const d=n[l+1]-n[l],f=this.getNumNGrams(d,A);this.createNGrams(e,c,a,u,f,A),u+=f}),this.preserveShort&&u===o[l]){const A=n[l+1]-n[l];if(A===0)continue;const d=A+2*this.padWidth;this.createNGrams(e,c,a,u,1,d)}}return[a,o]}}function gee(t,e,n,r,s,i,o,a){return new v_e(n,r,s,i,o,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b_e(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let o=t.indexOf(i);for(;o!==-1;){const a=t.subarray(0,o);(!n||a.length!==0)&&r.push(a),t=t.subarray(o+1),o=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const o=t.subarray(s,i);(!n||o.length!==0)&&r.push(o),s=i+1}}function yee(t,e,n){const r=t.length,s=[];let i=0,o=0;const a=new Array(r);for(let d=0;d<r;++d){const f=s.length;b_e(t[d],e,n,s);const h=s.length-f;a[d]=h,i+=h,o=Math.max(o,h)}const l=sr("int32",i*2),c=new Array(i),u=[r,o];let A=0;for(let d=0;d<r;++d)for(let f=0;f<a[d];++f)l[A*2]=d,l[A*2+1]=f,c[A]=s[A],++A;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xee(t,e){const n=sr("int32",t.length);for(let r=0;r<t.length;++r)n[r]=K1e(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vee=cr((t,e)=>t-e),w_e=bR((t,e,n,r)=>({real:t-n,imag:e-r})),NR=$r(ev,vee,w_e),C_e={kernelName:ev,backendName:"cpu",kernelFunc:NR};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bee(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=St(n,t.dtype);for(let s=0;s<r.values.length;++s){const i=r.indexToLoc(s),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=i[l]%t.shape[l];const a=t.locToIndex(o);r.values[s]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mg=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function wee(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,c=Math.log(a),u=.5*Math.exp(2*c/3),A=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),d=Math.max(n,Math.floor(e-l*u/a+A)),f=Math.min(r,Math.floor(e+(a-l)*u/a+A));wee(t,e,d,f)}const s=t[e];let i=n,o=r;for(Xf(t,n,e),Mg(t[r],s)>0&&Xf(t,n,r);i<o;){for(Xf(t,i,o),i++,o--;Mg(t[i],s)<0;)i=i+1;for(;Mg(t[o],s)>0;)o=o-1}Mg(t[n],s)===0?Xf(t,n,o):(o=o+1,Xf(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function Cee(t,e,n,r,s){const i=e[e.length-1],[o,a]=[t.length/i,i],l=rs(n,o*r),c=rs("int32",o*r);for(let A=0;A<o;A++){const d=A*a,f=t.subarray(d,d+a);let h=new Array(f.length);f.forEach((x,v)=>h[v]={value:x,index:v}),r<h.length&&(wee(h,r),h=h.slice(0,r)),s&&h.sort(Mg);const m=A*r,g=l.subarray(m,m+r),y=c.subarray(m,m+r);for(let x=0;x<r;x++)g[x]=h[x].value,y[x]=h[x].index}const u=e.slice();return u[u.length-1]=r,[St(u,n,l),St(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function See(t,e,n,r){const s=kt(e,n)[0],i=[1,n[0],1];for(let h=0;h<s;h++)i[0]*=n[h];i[1]=n[s];for(let h=s+1;h<n.length;h++)i[2]*=n[h];const o=new Map,a=new Int32Array(n[s]),l=new Er(i,r,t),c=[],u=i[0]===1&&i[2]===1;for(let h=0;h<n[s];h++){let m;if(u)m=t[h].toString();else{const y=[];for(let x=0;x<i[0];x++)for(let v=0;v<i[2];v++)y.push(l.get(x,h,v));m=y.join(",")}const g=o.get(m);if(g!=null)a[h]=g;else{const y=o.size;o.set(m,y),a[h]=y,c.push(h)}}const A=i.slice();A[1]=o.size;const d=new Er(A,r);c.forEach((h,m)=>{for(let g=0;g<i[0];g++)for(let y=0;y<i[2];y++)d.set(l.get(g,h,y),g,m,y)});const f=n.slice();return f[s]=A[1],{outputValues:d.values,outputShape:f,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S_e=Object.freeze(Object.defineProperty({__proto__:null,addImpl:_Z,bincountImpl:wR,bincountReduceImpl:OZ,bitwiseAndImpl:DZ,castImpl:$Z,ceilImpl:RZ,concatImpl:PZ,equalImpl:UZ,expImpl:LZ,expm1Impl:QZ,floorDivImpl:zZ,floorImpl:HZ,gatherNdImpl:VZ,gatherV2Impl:WZ,greaterEqualImpl:KZ,greaterImpl:GZ,lessEqualImpl:qZ,lessImpl:XZ,linSpaceImpl:YZ,logImpl:JZ,maxImpl:ZZ,maximumImpl:eee,minimumImpl:tee,multiplyImpl:CR,negImpl:nee,notEqualImpl:ree,prodImpl:see,raggedGatherImpl:iee,raggedRangeImpl:oee,raggedTensorToTensorImpl:aee,rangeImpl:lee,rsqrtImpl:cee,scatterImpl:ld,sigmoidImpl:u_e,simpleAbsImpl:FZ,sliceImpl:Aee,sparseFillEmptyRowsImpl:dee,sparseReshapeImpl:fee,sparseSegmentReductionImpl:BR,sqrtImpl:f_e,squaredDifferenceImpl:hee,staticRegexReplaceImpl:pee,stridedSliceImpl:mee,stringNGramsImpl:gee,stringSplitImpl:yee,stringToHashBucketFastImpl:xee,subImpl:vee,tileImpl:bee,topKImpl:Cee,transposeImpl:SR,uniqueImpl:See},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */LK("cpu",()=>new i3,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bee=nn(Cx,t=>t>=0?t:Math.exp(t)-1),B_e={kernelName:Cx,backendName:"cpu",kernelFunc:Bee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nee(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r;Ze([s],"leakyRelu");const o=ye(s.shape),a=n.data.get(s.dataId).values,l=rs("float32",o);for(let c=0;c<a.length;c++)l[c]=a[c]<0?i*a[c]:a[c];return n.makeTensorInfo(s.shape,"float32",l)}const N_e={kernelName:MS,backendName:"cpu",kernelFunc:Nee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E_e=cr((t,e)=>t<0?e*t:t);function Eee(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e;Ze([r,s],"prelu");const i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,[a,l]=E_e(r.shape,s.shape,i,o,"float32");return n.makeTensorInfo(l,"float32",a)}const I_e={kernelName:oB,backendName:"cpu",kernelFunc:Eee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iee=nn(Qx,t=>Math.max(0,t)),k_e={kernelName:Qx,backendName:"cpu",kernelFunc:Iee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kee=nn(Hx,t=>Math.min(Math.max(0,t),6)),T_e={kernelName:Hx,backendName:"cpu",kernelFunc:kee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N2(t,e,n,r,s){if(n==="linear")return yl({inputs:{x:e},backend:t});if(n==="relu")return Iee({inputs:{x:e},backend:t});if(n==="elu")return Bee({inputs:{x:e},backend:t});if(n==="relu6")return kee({inputs:{x:e},backend:t});if(n==="prelu")return Eee({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return Nee({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return uee({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vn(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,o=ye(s.shape),a=fK(i,o),l=ye(a);M(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const c=n.data.get(s.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,A=c.complexTensorInfos.imag;u.shape=a,A.shape=a}return{dataId:s.dataId,shape:a,dtype:s.dtype}}const F_e={kernelName:lB,backendName:"cpu",kernelFunc:vn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tee(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;Ze([s,i],"matMul");const l=s.shape.length,c=i.shape.length,u=o?s.shape[l-2]:s.shape[l-1],A=a?i.shape[c-1]:i.shape[c-2],d=o?s.shape[l-1]:s.shape[l-2],f=a?i.shape[c-2]:i.shape[c-1],h=s.shape.slice(0,-2),m=i.shape.slice(0,-2),g=ye(h),y=ye(m),v=bt(s.shape.slice(0,-2),i.shape.slice(0,-2)).concat([d,f]);M(u===A,()=>`Error in matMul: inner shapes (${u}) and (${A}) of Tensors with shapes ${s.shape} and ${i.shape} and transposeA=${o} and transposeB=${a} must match.`);const b=o?[g,u,d]:[g,d,u],w=a?[y,f,A]:[y,A,f],C=vn({inputs:{x:s},backend:n,attrs:{shape:b}}),B=vn({inputs:{x:i},backend:n,attrs:{shape:w}}),S=o?C.shape[1]:C.shape[2],N=o?C.shape[2]:C.shape[1],k=a?B.shape[1]:B.shape[2],O=Math.max(g,y),U=n.data.get(C.dataId).values,P=n.data.get(B.dataId).values,V=ot(C.shape),W=ot(B.shape),[L,G,_]=o?[V[0],1,V[1]]:[V[0],V[1],1],[j,K,Y]=a?[1,W[1],W[0]]:[W[1],1,W[0]],J=N*k,ae=St([O,N,k],C.dtype),ue=ae.values,le=n.blockSize;for(let fe=0;fe<O;fe++){const Ie=fe%g,Re=fe%y;for(let ge=0;ge<N;ge+=le){const $e=Math.min(ge+le,N);for(let Te=0;Te<k;Te+=le){const be=Math.min(Te+le,k);for(let it=0;it<S;it+=le){const et=Math.min(it+le,S);for(let st=ge;st<$e;st++)for(let rt=Te;rt<be;rt++){let ht=0;for(let dt=it;dt<et;dt++){const cn=U[Ie*L+st*G+dt*_],Yt=P[dt*j+rt*K+Re*Y];ht+=cn*Yt}ue[fe*J+(st*k+rt)]+=ht}}}}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(B),n.makeTensorInfo(v,ae.dtype,ae.values)}const $_e={kernelName:BS,backendName:"cpu",kernelFunc:Tee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function __e(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:A}=r;let d,f,h;const m=[];d=Tee({inputs:{a:s,b:i},attrs:{transposeA:l,transposeB:c},backend:n}),o&&(f=dp({inputs:{a:d,b:o},backend:n}),m.push(d),d=f),u&&(h=N2(n,d,u,a,A),m.push(d),d=h);for(const y of m)n.disposeIntermediateTensorInfo(y);return d}const O_e={kernelName:n2,backendName:"cpu",kernelFunc:__e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D_e=nn(ux,t=>Math.acos(t)),R_e={kernelName:ux,backendName:"cpu",kernelFunc:D_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P_e=nn(Ax,t=>Math.acosh(t)),U_e={kernelName:Ax,backendName:"cpu",kernelFunc:P_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j_e(t){const{inputs:e,backend:n}=t,r=e;Ze(e,"addN");const s=r.map(a=>n.data.get(a.dataId).values),i=St(r[0].shape,r[0].dtype),o=i.values;for(let a=0;a<r.length;a++){const l=s[a];for(let c=0;c<o.length;c++)o[c]+=l[c]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const L_e={kernelName:vS,backendName:"cpu",kernelFunc:j_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ze(s,"all");const a=kt(i,s.shape);let l=a;const c=zn(l,s.shape.length);let u=s;c!=null&&(u=ai({inputs:{x:s},backend:n,attrs:{perm:c}}),l=ar(l.length,s.shape.length)),as("all",l,u.shape.length);const[A,d]=Wr(u.shape,l),f=ye(d),h=bs(ye(A),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){const x=y*f;let v=m[x];for(let b=0;b<f;++b){const w=m[x+b];v=v&&w}h[y]=v}c!=null&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(A,u.dtype,h);if(o){const y=or(A,a),x=vn({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),x}return g}const Q_e={kernelName:E_,backendName:"cpu",kernelFunc:M_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ze(s,"any");const a=kt(i,s.shape);let l=a;const c=zn(l,s.shape.length);let u=s;c!=null&&(u=ai({inputs:{x:s},backend:n,attrs:{perm:c}}),l=ar(l.length,s.shape.length)),as("any",l,u.shape.length);const[A,d]=Wr(u.shape,l),f=ye(d),h=bs(ye(A),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){const x=y*f;let v=m[x];for(let b=0;b<f;++b){const w=m[x+b];v=v||w}h[y]=v}c!=null&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(A,u.dtype,h);if(o){const y=or(A,a),x=vn({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),x}return g}const z_e={kernelName:I_,backendName:"cpu",kernelFunc:H_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;Ze(s,"argMax");let o=kt(i,s.shape);const a=zn(o,s.shape.length);let l=s;const c=[];a!=null&&(l=ai({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=ar(o.length,l.shape.length)),o=[o[0]],as("argMax",o,l.shape.length);const[u,A]=Wr(l.shape,o),d=ye(u),f=bs(d,"int32"),h=ye(A),m=n.data.get(l.dataId).values;for(let g=0;g<f.length;++g){const y=g*h;let x=m[y],v=0;for(let b=0;b<h;++b){const w=m[y+b];w>x&&(x=w,v=b)}f[g]=v}return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(u,"int32",f)}const W_e={kernelName:bS,backendName:"cpu",kernelFunc:V_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;Ze(s,"argMin");let o=kt(i,s.shape);const a=zn(o,s.shape.length);let l=s;const c=[];a!=null&&(l=ai({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=ar(o.length,l.shape.length)),o=[o[0]],as("argMin",o,l.shape.length);const[u,A]=Wr(l.shape,o),d=ye(u),f=bs(d,"int32"),h=ye(A),m=n.data.get(l.dataId).values;for(let g=0;g<f.length;++g){const y=g*h;let x=m[y],v=0;for(let b=0;b<h;++b){const w=m[y+b];w<x&&(x=w,v=b)}f[g]=v}return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(u,"int32",f)}const K_e={kernelName:wS,backendName:"cpu",kernelFunc:G_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X_e=nn(dx,t=>Math.asin(t)),q_e={kernelName:dx,backendName:"cpu",kernelFunc:X_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y_e=nn(fx,t=>Math.asinh(t)),J_e={kernelName:fx,backendName:"cpu",kernelFunc:Y_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z_e=nn(hx,t=>Math.atan(t)),eOe={kernelName:hx,backendName:"cpu",kernelFunc:Z_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tOe=cr((t,e)=>Math.atan2(t,e)),nOe=$r(mx,tOe),rOe={kernelName:mx,backendName:"cpu",kernelFunc:nOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sOe=nn(px,t=>Math.atanh(t)),iOe={kernelName:px,backendName:"cpu",kernelFunc:sOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ER(t,e,n,r,s,i){const o=s.strideHeight,a=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,u=s.effectiveFilterHeight,A=s.effectiveFilterWidth,d=s.padInfo.top,f=s.padInfo.left,h=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=St(s.outShape,n),g=m.values,y=s.outShape[1]*s.outShape[2]*s.outShape[3],x=s.outShape[2]*s.outShape[3],v=s.outShape[3];for(let b=0;b<s.batchSize;++b){const w=b*y,C=b*r[0];for(let B=0;B<s.inChannels;++B)for(let S=0;S<s.outHeight;++S){const N=S*o-d,k=Math.max(0,N),O=Math.min(s.inHeight,u+N),U=w+S*x;for(let P=0;P<s.outWidth;++P){const V=P*a-f,W=Math.max(0,V),L=Math.min(s.inWidth,A+V);let G=h,_=0,j=0;for(let Y=k;Y<O;Y+=l){const J=C+Y*r[1];for(let ae=W;ae<L;ae+=c){const ue=J+ae*r[2],le=t[ue+B];i==="max"&&le>G?G=le:i==="avg"&&(_+=le,j++)}if(isNaN(G))break}const K=U+P*v+B;g[K]=i==="avg"?_/j:G}}}return m}function Fee(t,e,n,r,s=!1,i=!1){const o=St(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,A=r.effectiveFilterHeight,d=r.effectiveFilterWidth,f=r.padInfo.top,h=r.padInfo.left,m=St(e,n,t);for(let g=0;g<r.batchSize;++g)for(let y=0;y<r.inChannels;++y)for(let x=0;x<r.outHeight;++x){const v=x*a-f;let b=v;for(;b<0;)b+=c;const w=Math.min(r.inHeight,A+v);for(let C=0;C<r.outWidth;++C){const B=C*l-h;let S=B;for(;S<0;)S+=u;const N=Math.min(r.inWidth,d+B);let k=Number.NEGATIVE_INFINITY,O=-1;for(let U=b;U<w;U+=c){const P=U-v;for(let V=S;V<N;V+=u){const W=V-B,L=m.get(g,U,V,y);L>k&&(k=L,s?O=i?((g*r.inHeight+U)*r.inWidth+V)*r.inChannels+y:(U*r.inWidth+V)*r.inChannels+y:O=P*d+W)}}o.set(O,g,x,C,y)}}return o}function $ee(t,e,n,r,s,i){const o=s.strideDepth,a=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,u=s.dilationHeight,A=s.dilationWidth,d=s.effectiveFilterDepth,f=s.effectiveFilterHeight,h=s.effectiveFilterWidth,m=s.padInfo.front,g=s.padInfo.top,y=s.padInfo.left,x=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=St(s.outShape,n),b=v.values,w=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],C=s.outShape[2]*s.outShape[3]*s.outShape[4],B=s.outShape[3]*s.outShape[4],S=s.outShape[4];for(let N=0;N<s.batchSize;++N){const k=N*w,O=N*r[0];for(let U=0;U<s.inChannels;++U)for(let P=0;P<s.outDepth;++P){const V=P*o-m;let W=V;for(;W<0;)W+=c;const L=Math.min(s.inDepth,d+V),G=k+P*C;for(let _=0;_<s.outHeight;++_){const j=_*a-g;let K=j;for(;K<0;)K+=u;const Y=Math.min(s.inHeight,f+j),J=G+_*B;for(let ae=0;ae<s.outWidth;++ae){const ue=ae*l-y;let le=ue;for(;le<0;)le+=A;const fe=Math.min(s.inWidth,h+ue),Ie=J+ae*S;let Re=x,ge=0,$e=0;for(let be=W;be<L;be+=c){const it=O+be*r[1];for(let et=K;et<Y;et+=u){const st=it+et*r[2];for(let rt=le;rt<fe;rt+=A){const ht=st+rt*r[3],dt=t[ht+U];if(i==="max"&&dt>Re?Re=dt:i==="avg"&&(ge+=dt,$e++),isNaN(Re))break}if(isNaN(Re))break}if(isNaN(Re))break}const Te=Ie+U;b[Te]=i==="avg"?ge/Math.max($e,1):Re}}}}return v}function oOe(t,e){const n=St(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,A=e.effectiveFilterWidth,d=e.padInfo.front,f=e.padInfo.top,h=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let g=0;g<e.inChannels;++g)for(let y=0;y<e.outDepth;++y){const x=y*r-d;let v=x;for(;v<0;)v+=o;const b=Math.min(e.inDepth,c+x);for(let w=0;w<e.outHeight;++w){const C=w*s-f;let B=C;for(;B<0;)B+=a;const S=Math.min(e.inHeight,u+C);for(let N=0;N<e.outWidth;++N){const k=N*i-h;let O=k;for(;O<0;)O+=l;const U=Math.min(e.inWidth,A+k);let P=Number.NEGATIVE_INFINITY,V=-1;for(let W=v;W<b;W+=o){const L=W-x;for(let G=B;G<S;G+=a){const _=G-C;for(let j=O;j<U;j+=l){const K=j-k,Y=t.get(m,W,G,j,g);Y>=P&&(P=Y,V=L*u*A+_*u+K)}}}n.set(V,m,y,w,N,g)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Ze(s,"avgPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;M(os(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Xo(s.shape,i,o,c,a,l);let A;if(u.filterWidth===1&&u.filterHeight===1&&_t(u.inShape,u.outShape))A=yl({inputs:{x:s},backend:n});else{const d=n.data.get(s.dataId).values,f=ot(s.shape),h=ER(d,s.shape,s.dtype,f,u,"avg");A=n.makeTensorInfo(u.outShape,s.dtype,h.values)}return A}const lOe={kernelName:CS,backendName:"cpu",kernelFunc:aOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;Ze(s,"avgPool3d");const u=kc(s.shape,i,o,1,a,l,c),A=n.data.get(s.dataId).values,d=$ee(A,s.shape,s.dtype,ot(s.shape),u,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}const uOe={kernelName:SS,backendName:"cpu",kernelFunc:cOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AOe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;Ze([s,i],"avgPool3DGrad");const u=kc(i.shape,o,a,1,l,c),A=u.strideDepth,d=u.strideHeight,f=u.strideWidth,h=u.filterDepth,m=u.filterHeight,g=u.filterWidth,y=u.dilationDepth,x=u.dilationHeight,v=u.dilationWidth,b=u.effectiveFilterDepth,w=u.effectiveFilterHeight,C=u.effectiveFilterWidth,B=b-1-u.padInfo.front,S=C-1-u.padInfo.left,N=w-1-u.padInfo.top,k=St(i.shape,"float32"),O=1/(h*m*g),U=n.bufferSync(s);for(let P=0;P<u.batchSize;++P)for(let V=0;V<u.inChannels;++V)for(let W=0;W<u.inDepth;++W)for(let L=0;L<u.inHeight;++L)for(let G=0;G<u.inWidth;++G){const _=W-B,j=L-N,K=G-S;let Y=0;for(let J=0;J<b;J+=y){const ae=(_+J)/A;if(!(ae<0||ae>=u.outDepth||Math.floor(ae)!==ae))for(let ue=0;ue<w;ue+=x){const le=(j+ue)/d;if(!(le<0||le>=u.outHeight||Math.floor(le)!==le))for(let fe=0;fe<C;fe+=v){const Ie=(K+fe)/f;if(Ie<0||Ie>=u.outWidth||Math.floor(Ie)!==Ie)continue;const Re=U.get(P,ae,le,Ie,V);Y+=Re}}}k.set(Y*O,P,W,L,G,V)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const dOe={kernelName:T_,backendName:"cpu",kernelFunc:AOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fOe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;Ze([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=Xo(o.shape,a,l,1,c),A=u.strideHeight,d=u.strideWidth,f=u.filterHeight,h=u.filterWidth,m=u.dilationHeight,g=u.dilationWidth,y=u.effectiveFilterHeight,x=u.effectiveFilterWidth,v=x-1-u.padInfo.left,b=y-1-u.padInfo.top,w=St(o.shape,"float32"),C=1/(f*h),B=n.data.get(s.dataId).values,S=St(s.shape,"float32",B);for(let N=0;N<u.batchSize;++N)for(let k=0;k<u.inChannels;++k)for(let O=0;O<u.inHeight;++O)for(let U=0;U<u.inWidth;++U){const P=O-b,V=U-v;let W=0;for(let L=0;L<y;L+=m){const G=(P+L)/A;if(!(G<0||G>=u.outHeight||Math.floor(G)!==G))for(let _=0;_<x;_+=g){const j=(V+_)/d;if(j<0||j>=u.outWidth||Math.floor(j)!==j)continue;const K=S.get(N,G,j,k);W+=K}}w.set(W*C,N,O,U,k)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const hOe={kernelName:k_,backendName:"cpu",kernelFunc:fOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,scale:i,offset:o,mean:a,variance:l}=e;M(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),M(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),M(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Ze([s,a,l,i,o],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=n.data.get(s.dataId).values,A=n.data.get(a.dataId).values,d=n.data.get(l.dataId).values,f=i?n.data.get(i.dataId).values:new Float32Array([1]),h=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),g=h.length,y=f.length,x=d.length,v=A.length;let b=0,w=0,C=0,B=0;for(let S=0;S<u.length;++S)m[S]=h[b++]+(u[S]-A[w++])*f[C++]/Math.sqrt(d[B++]+c),b>=g&&(b=0),w>=v&&(w=0),C>=y&&(C=0),B>=x&&(B=0);return n.makeTensorInfo(s.shape,s.dtype,m)}const mOe={kernelName:US,backendName:"cpu",kernelFunc:pOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;Ze([s],"batchToSpaceND");const a=i.reduce((y,x)=>y*x),l=fv(s.shape,i,a),c=hv(l.length,i.length),u=pv(s.shape,i,a),A=RD(o,i.length),d=PD(u,o,i.length),f=vn({inputs:{x:s},backend:n,attrs:{shape:l}}),h=ai({inputs:{x:f},backend:n,attrs:{perm:c}}),m=vn({inputs:{x:h},backend:n,attrs:{shape:u}}),g=ef({inputs:{x:m},backend:n,attrs:{begin:A,size:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}const yOe={kernelName:NS,backendName:"cpu",kernelFunc:gOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,c=wR(a,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}const vOe={kernelName:F_,backendName:"cpu",kernelFunc:xOe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bOe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,a=bt(Array.from(i),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const wOe={kernelName:$_,backendName:"cpu",kernelFunc:bOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COe=nn(xx,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),SOe={kernelName:xx,backendName:"cpu",kernelFunc:COe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BOe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(ye(e.shape)),s=n.data.get(e.dataId),i=s.complexTensorInfos.real,o=s.complexTensorInfos.imag,a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let c=0;c<a.length;c++){const u=a[c],A=l[c];r[c]=Math.hypot(u,A)}return n.makeOutput(r,e.shape,"float32")},NOe={kernelName:IS,backendName:"cpu",kernelFunc:BOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fp(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const EOe={kernelName:Y_,backendName:"cpu",kernelFunc:fp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hp(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=kt(s,e[0].shape)[0],o=e.map(m=>m.shape);_D(o,i);let a=Al(e.map(m=>m.shape),i);if(ye(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(m=>ye(m.shape)>0);if(l.length===1)return yl({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const m=l.map(b=>Zd({inputs:{input:b},backend:n})),g=l.map(b=>fp({inputs:{input:b},backend:n})),y=hp({inputs:m,backend:n,attrs:{axis:i}}),x=hp({inputs:g,backend:n,attrs:{axis:i}}),v=wi({inputs:{real:y,imag:x},backend:n});return m.forEach(b=>n.disposeIntermediateTensorInfo(b)),g.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),v}const c=l.map(m=>{const y=[-1,ye(m.shape.slice(i))];return vn({inputs:{x:m},backend:n,attrs:{shape:y}})}),u=c.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=Al(c.map(m=>m.shape),1);const A=c[0].shape[0]===1,d=PZ(u,a,e[0].dtype,A),f=Al(l.map(m=>m.shape),i),h=n.makeTensorInfo(f,e[0].dtype,d);return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}const IOe={kernelName:kS,backendName:"cpu",kernelFunc:hp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ee(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r;Ze([s,i],"conv2d");const A=Tc(l),d=Vr(s.shape,i.shape,o,c,a,u,!1,A),f=d.filterHeight,h=d.filterWidth,m=d.dilationHeight,g=d.dilationWidth,y=d.padInfo.left,x=d.padInfo.top,v=d.dataFormat==="channelsLast",b=new Er(d.outShape,s.dtype),w=ot(s.shape),C=ot(i.shape),B=w[0],S=v?w[1]:w[2],N=v?w[2]:1,k=v?1:w[1],O=b.strides[0],U=v?b.strides[1]:b.strides[2],P=v?b.strides[2]:1,V=v?1:b.strides[1],W=n.data.get(s.dataId).values,L=n.data.get(i.dataId).values,G=b.values;for(let _=0;_<d.batchSize;++_){const j=_*B,K=_*O;for(let Y=0;Y<d.outHeight;++Y){const J=K+Y*U,ae=Y*d.strideHeight-x;for(let ue=0;ue<f;++ue){const le=ae+ue*m;if(le<0||le>=d.inHeight)continue;const fe=ue*C[0],Ie=j+le*S;for(let Re=0;Re<d.outWidth;++Re){const ge=J+Re*P,$e=Re*d.strideWidth-y;for(let Te=0;Te<h;++Te){const be=$e+Te*g;if(be<0||be>=d.inWidth)continue;const it=fe+Te*C[1],et=Ie+be*N;let st=it;for(let rt=0;rt<d.inChannels;++rt){const ht=W[et+rt*k];for(let dt=0;dt<d.outChannels;++dt)G[ge+dt*V]+=ht*L[st+dt];st+=d.outChannels}}}}}}return n.makeTensorInfo(b.shape,b.dtype,G)}const kOe={kernelName:TS,backendName:"cpu",kernelFunc:_ee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;Ze([s,i],"conv2dBackpropFilter");const A=Tc(l),d=Vr(s.shape,u,o,1,a,c,!1,A),{strideHeight:f,strideWidth:h,filterHeight:m,filterWidth:g}=d,y=d.dataFormat==="channelsLast",x=new Er(d.filterShape,"float32"),v=d.padInfo.left,b=d.padInfo.top,w=n.data.get(s.dataId).values,C=n.data.get(i.dataId).values,B=new Er(s.shape,s.dtype,w),S=new Er(i.shape,i.dtype,C);for(let N=0;N<m;++N){const k=Math.max(0,Math.ceil((b-N)/f)),O=Math.min(d.outHeight,(d.inHeight+b-N)/f);for(let U=0;U<g;++U){const P=Math.max(0,Math.ceil((v-U)/h)),V=Math.min(d.outWidth,(d.inWidth+v-U)/h);for(let W=0;W<d.inChannels;++W)for(let L=0;L<d.outChannels;++L){let G=0;for(let _=0;_<d.batchSize;++_)for(let j=k;j<O;++j){const K=N+j*f-b;for(let Y=P;Y<V;++Y){const J=U+Y*h-v;y?G+=B.get(_,K,J,W)*S.get(_,j,Y,L):G+=B.get(_,W,K,J)*S.get(_,L,j,Y)}}x.set(G,N,U,W,L)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const FOe={kernelName:O_,backendName:"cpu",kernelFunc:TOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Oe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r;Ze([s,i],"conv2dBackpropInput");const A=ot(i.shape),d=ot(s.shape);let f=Tc(c);const h=Vr(o,i.shape,a,1,l,u,!1,f),m=new Er(h.inShape,"float32"),g=m.values,y=n.data.get(s.dataId).values,x=n.data.get(i.dataId).values,[v,b,w]=A,{batchSize:C,filterHeight:B,filterWidth:S,inChannels:N,inHeight:k,inWidth:O,outChannels:U,outHeight:P,outWidth:V,strideHeight:W,strideWidth:L}=h;f=h.dataFormat;const G=B-1-h.padInfo.top,_=S-1-h.padInfo.left,j=f==="channelsLast",K=m.strides[0],Y=j?m.strides[1]:m.strides[2],J=j?m.strides[2]:1,ae=j?1:m.strides[1],ue=d[0],le=j?d[1]:d[2],fe=j?d[2]:1,Ie=j?1:d[1];for(let Re=0;Re<C;++Re)for(let ge=0;ge<N;++ge)for(let $e=0;$e<k;++$e){const Te=$e-G,be=Math.max(0,Math.ceil(Te/W)),it=Math.min(P,(B+Te)/W);for(let et=0;et<O;++et){const st=et-_,rt=Math.max(0,Math.ceil(st/L)),ht=Math.min(V,(S+st)/L);let dt=0;for(let Yt=be;Yt<it;++Yt){const Dt=Yt*W-Te;for(let rn=rt;rn<ht;++rn){const As=rn*L-st,yr=ue*Re+le*Yt+fe*rn,Zn=v*(B-1-Dt)+b*(S-1-As)+w*ge;for(let ur=0;ur<U;++ur){const Ss=y[yr+Ie*ur],Vn=x[Zn+ur];dt+=Ss*Vn}}}const cn=K*Re+Y*$e+J*et+ae*ge;g[cn]=dt}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const _Oe={kernelName:FS,backendName:"cpu",kernelFunc:$Oe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r;Ze([s,i],"conv3d");const c=dA(s.shape,i.shape,o,l,a),{filterDepth:u,filterHeight:A,filterWidth:d,dilationDepth:f,dilationHeight:h,dilationWidth:m,padInfo:g}=c,y=g.front,x=g.left,v=g.top,b=new Er(c.outShape,s.dtype),w=n.data.get(s.dataId).values,C=n.data.get(i.dataId).values,B=b.values,S=ot(s.shape),N=ot(i.shape);for(let k=0;k<c.batchSize;++k){const O=k*S[0],U=k*b.strides[0];for(let P=0;P<c.outDepth;++P){const V=U+P*b.strides[1],W=P*c.strideDepth-y;for(let L=0;L<u;++L){const G=W+L*f;if(G<0||G>=c.inDepth)continue;const _=L*N[0],j=O+G*S[1];for(let K=0;K<c.outHeight;++K){const Y=V+K*b.strides[2],J=K*c.strideHeight-v;for(let ae=0;ae<A;++ae){const ue=J+ae*h;if(ue<0||ue>=c.inHeight)continue;const le=_+ae*N[1],fe=j+ue*S[2];for(let Ie=0;Ie<c.outWidth;++Ie){const Re=Y+Ie*c.outChannels,ge=Ie*c.strideWidth-x;for(let $e=0;$e<d;++$e){const Te=ge+$e*m;if(Te<0||Te>=c.inWidth)continue;const be=le+$e*N[2],it=fe+Te*c.inChannels;let et=be;for(let st=0;st<c.inChannels;++st){const rt=w[it+st];for(let ht=0;ht<c.outChannels;++ht)B[Re+ht]+=rt*C[et+ht];et+=c.outChannels}}}}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const DOe={kernelName:$S,backendName:"cpu",kernelFunc:OOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ROe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:l}=r;Ze([s,i],"conv3dBackpropFilterV2");const c=ot(s.shape),u=ot(i.shape),A=dA(s.shape,l,o,1,a),d=A.strideDepth,f=A.strideHeight,h=A.strideWidth,m=A.filterDepth,g=A.filterHeight,y=A.filterWidth,x=new Er(A.filterShape,"float32"),v=x.values,[b,w,C,B]=x.strides,S=n.data.get(i.dataId).values,[N,k,O,U]=u,P=n.data.get(s.dataId).values,[V,W,L,G]=c,_=A.padInfo.front,j=A.padInfo.left,K=A.padInfo.top;for(let Y=0;Y<m;++Y){const J=Math.max(0,Math.ceil((_-Y)/d)),ae=Math.min(A.outDepth,(A.inDepth+_-Y)/d),ue=Y*b;for(let le=0;le<g;++le){const fe=Math.max(0,Math.ceil((K-le)/f)),Ie=Math.min(A.outHeight,(A.inHeight+K-le)/f),Re=le*w+ue;for(let ge=0;ge<y;++ge){const $e=Math.max(0,Math.ceil((j-ge)/h)),Te=Math.min(A.outWidth,(A.inWidth+j-ge)/h),be=ge*C+Re;for(let it=0;it<A.inChannels;++it){const et=it*B+be;for(let st=0;st<A.outChannels;++st){let rt=0;for(let ht=0;ht<A.batchSize;++ht){const dt=ht*V,cn=ht*N;for(let Yt=J;Yt<ae;++Yt){const rn=(Y+Yt*d-_)*W+dt,As=Yt*k+cn;for(let yr=fe;yr<Ie;++yr){const ur=(le+yr*f-K)*L+rn,Ss=yr*O+As;for(let Vn=$e;Vn<Te;++Vn){const El=(ge+Vn*h-j)*G+ur,Il=Vn*U+Ss;rt+=P[El+it]*S[Il+st]}}}}v[et+st]=rt}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const POe={kernelName:D_,backendName:"cpu",kernelFunc:ROe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UOe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:l}=r;Ze([s],"conv3dBackpropInputV2");const c=ot(s.shape),u=ot(i.shape),A=dA(l,i.shape,a,1,o),d=new Er(A.inShape,"float32"),f=d.values,[h,m,g,y]=d.strides,x=n.data.get(s.dataId).values,[v,b,w,C]=c,B=n.data.get(i.dataId).values,[S,N,k,O]=u,{batchSize:U,filterDepth:P,filterHeight:V,filterWidth:W,inChannels:L,inDepth:G,inHeight:_,inWidth:j,outChannels:K,outDepth:Y,outHeight:J,outWidth:ae,strideDepth:ue,strideHeight:le,strideWidth:fe}=A,Ie=P-1-A.padInfo.front,Re=V-1-A.padInfo.top,ge=W-1-A.padInfo.left;for(let $e=0;$e<U;++$e)for(let Te=0;Te<L;++Te)for(let be=0;be<G;++be){const it=be-Ie,et=Math.max(0,Math.ceil(it/ue)),st=Math.min(Y,(P+it)/ue);for(let rt=0;rt<_;++rt){const ht=rt-Re,dt=Math.max(0,Math.ceil(ht/le)),cn=Math.min(J,(V+ht)/le);for(let Yt=0;Yt<j;++Yt){const Dt=Yt-ge,rn=Math.max(0,Math.ceil(Dt/fe)),As=Math.min(ae,(W+Dt)/fe);let yr=0;for(let Zn=et;Zn<st;++Zn){const ur=Zn*ue-it;for(let Ss=dt;Ss<cn;++Ss){const Vn=Ss*le-ht;for(let Hi=rn;Hi<As;++Hi){const El=Hi*fe-Dt,Il=v*$e+b*Zn+w*Ss+C*Hi,Bf=S*(P-1-ur)+N*(V-1-Vn)+k*(W-1-El)+O*Te;for(let kl=0;kl<K;++kl){const _r=x[Il+kl],Pn=B[Bf+kl];yr+=_r*Pn}}}}f[h*$e+m*be+g*rt+y*Yt+Te]=yr}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}const jOe={kernelName:R_,backendName:"cpu",kernelFunc:UOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOe=nn(vx,t=>Math.cos(t)),MOe={kernelName:vx,backendName:"cpu",kernelFunc:LOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QOe=nn(bx,t=>Math.cosh(t)),HOe={kernelName:bx,backendName:"cpu",kernelFunc:QOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zOe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,[u,A,d,f]=s.shape,h=i.shape[0],[m,g]=a,y=St([h,m,g,f],"float32"),x=n.data.get(i.dataId).values,v=n.data.get(o.dataId).values,b=n.data.get(s.dataId).values,w=ot(s.shape),C=ot(y.shape);for(let B=0;B<h;B++){const S=B*4,N=x[S],k=x[S+1],O=x[S+2],U=x[S+3],P=v[B];if(P>=u)continue;const V=m>1?(O-N)*(A-1)/(m-1):0,W=g>1?(U-k)*(d-1)/(g-1):0;for(let L=0;L<m;L++){const G=m>1?N*(A-1)+L*V:.5*(N+O)*(A-1);if(G<0||G>A-1){for(let _=0;_<g;_++)for(let j=0;j<f;j++){const K=j+_*C[2]+L*C[1]+B*C[0];y.values[K]=c}continue}if(l==="bilinear"){const _=Math.floor(G),j=Math.ceil(G),K=G-_;for(let Y=0;Y<g;Y++){const J=g>1?k*(d-1)+Y*W:.5*(k+U)*(d-1);if(J<0||J>d-1){for(let fe=0;fe<f;fe++){const Ie=fe+Y*C[2]+L*C[1]+B*C[0];y.values[Ie]=c}continue}const ae=Math.floor(J),ue=Math.ceil(J),le=J-ae;for(let fe=0;fe<f;fe++){let Ie=fe+ae*w[2]+_*w[1]+P*w[0];const Re=b[Ie];Ie=fe+ue*w[2]+_*w[1]+P*w[0];const ge=b[Ie];Ie=fe+ae*w[2]+j*w[1]+P*w[0];const $e=b[Ie];Ie=fe+ue*w[2]+j*w[1]+P*w[0];const Te=b[Ie],be=Re+(ge-Re)*le,it=$e+(Te-$e)*le;Ie=fe+Y*C[2]+L*C[1]+B*C[0],y.values[Ie]=be+(it-be)*K}}}else for(let _=0;_<g;++_){const j=g>1?k*(d-1)+_*W:.5*(k+U)*(d-1);if(j<0||j>d-1){for(let J=0;J<f;J++){const ae=J+_*C[2]+L*C[1]+B*C[0];y.values[ae]=c}continue}const K=Math.round(j),Y=Math.round(G);for(let J=0;J<f;J++){const ae=J+K*w[2]+Y*w[1]+P*w[0],ue=J+_*C[2]+L*C[1]+B*C[0];y.values[ue]=b[ae]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const VOe={kernelName:U_,backendName:"cpu",kernelFunc:zOe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;Ze(s,"cumprod");const l=zn([i],s.shape.length);let c=s;l!=null&&(c=ai({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=ar(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const A=Di(c.dtype,"int32"),d=B_(ye(c.shape),A),f=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],m=a?(y,x)=>y+h-x-1:(y,x)=>y+x;for(let y=0;y<f.length;y+=h)for(let x=0;x<h;x++){const v=m(y,x);if(x===0)d[v]=o?1:f[v];else{const b=m(y,x-1);d[v]=o?f[b]*d[b]:f[v]*d[b]}}const g=n.makeTensorInfo(c.shape,A,d);if(l!=null){const y=fA(l),x=ai({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),x}return g}const GOe={kernelName:P_,backendName:"cpu",kernelFunc:WOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;Ze(s,"cumsum");const l=zn([i],s.shape.length);let c=s;l!=null&&(c=ai({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=ar(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const A=Di(c.dtype,"int32"),d=bs(ye(c.shape),A),f=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],m=a?(y,x)=>y+h-x-1:(y,x)=>y+x;for(let y=0;y<f.length;y+=h)for(let x=0;x<h;x++){const v=m(y,x);if(x===0)d[v]=o?0:f[v];else{const b=m(y,x-1);d[v]=o?f[b]+d[b]:f[v]+d[b]}}const g=n.makeTensorInfo(c.shape,A,d);if(l!=null){const y=fA(l),x=ai({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),x}return g}const XOe={kernelName:_S,backendName:"cpu",kernelFunc:KOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(s.shape.length===1){const l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=wR(l,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(i),u=OZ(l,c,o,a);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const YOe={kernelName:j_,backendName:"cpu",kernelFunc:qOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:o}=r;M(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=s.shape[0],l=s.shape[1],c=s.shape[2],u=s.shape[3],A=l*i,d=c*i,f=u/(i*i),h=n.data.get(s.dataId).values,m=new Float32Array(a*A*d*f);let g=0;for(let y=0;y<a;++y)for(let x=0;x<A;++x){const v=Math.floor(x/i),b=x%i;for(let w=0;w<d;++w){const C=Math.floor(w/i),B=w%i,S=(b*i+B)*f;for(let N=0;N<f;++N){const O=N+S+u*(C+c*(v+l*y));m[g++]=h[O]}}}return n.makeTensorInfo([a,A,d,f],s.dtype,m)}const ZOe={kernelName:L_,backendName:"cpu",kernelFunc:JOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oee(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;Ze([s,i],"depthwiseConv2DNative");const u=ot(s.shape),A=ot(i.shape);let d=l;d==null&&(d=[1,1]),M(os(o,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${d}'`);const f=Vr(s.shape,i.shape,o,d,a,c,!0),{filterHeight:h,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:x}=f,v=x.left,b=x.top,w=f.outChannels/f.inChannels,C=new Er(f.outShape,s.dtype),B=n.data.get(s.dataId).values,S=n.data.get(i.dataId).values,N=C.values;for(let k=0;k<f.batchSize;++k){const O=k*u[0],U=k*C.strides[0];for(let P=0;P<f.outHeight;++P){const V=U+P*C.strides[1],W=P*f.strideHeight-b;for(let L=0;L<h;++L){const G=W+L*g;if(G<0||G>=f.inHeight)continue;const _=L*A[0],j=O+G*u[1];for(let K=0;K<f.outWidth;++K){const Y=V+K*C.strides[2],J=K*f.strideWidth-v;for(let ae=0;ae<m;++ae){const ue=J+ae*y;if(ue<0||ue>=f.inWidth)continue;const le=_+ae*A[1],fe=j+ue*f.inChannels;let Ie=Y,Re=le;for(let ge=0;ge<f.inChannels;++ge){const $e=B[fe+ge];for(let Te=0;Te<w;++Te)N[Ie+Te]+=$e*S[Re+Te];Ie+=w,Re+=w}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const eDe={kernelName:OS,backendName:"cpu",kernelFunc:Oee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r;Ze([s,i],"depthwiseConv2dNativeBackpropFilter");const A=Vr(s.shape,u,o,a,l,c,!0),{strideHeight:d,strideWidth:f,filterHeight:h,filterWidth:m}=A,g=new Er(A.filterShape,"float32"),y=A.padInfo.left,x=A.padInfo.top,v=A.outChannels/A.inChannels,b=n.data.get(s.dataId).values,w=new Er(s.shape,s.dtype,b),C=n.data.get(i.dataId).values,B=new Er(i.shape,i.dtype,C);for(let S=0;S<h;++S){const N=Math.max(0,Math.ceil((x-S)/d)),k=Math.min(A.outHeight,(A.inHeight+x-S)/d);for(let O=0;O<m;++O){const U=Math.max(0,Math.ceil((y-O)/f)),P=Math.min(A.outWidth,(A.inWidth+y-O)/f);for(let V=0;V<A.outChannels;++V){const W=Math.trunc(V/v),L=V%v;let G=0;for(let _=0;_<A.batchSize;++_)for(let j=N;j<k;++j){const K=S+j*d-x;for(let Y=U;Y<P;++Y){const J=O+Y*f-y;G+=w.get(_,K,J,W)*B.get(_,j,Y,V)}}g.set(G,S,O,W,L)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const nDe={kernelName:M_,backendName:"cpu",kernelFunc:tDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rDe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r;Ze([s,i],"depthwiseConv2DNativeBackpropInput");const A=ot(s.shape),d=ot(i.shape),f=Vr(u,i.shape,o,a,l,c,!0),h=new Er(f.inShape,"float32"),m=h.values,[g,y,x]=h.strides,v=n.data.get(s.dataId).values,[b,w,C]=A,B=n.data.get(i.dataId).values,[S,N,k]=d,{batchSize:O,filterHeight:U,filterWidth:P,inChannels:V,inHeight:W,inWidth:L,outChannels:G,outHeight:_,outWidth:j,strideHeight:K,strideWidth:Y}=f,J=U-1-f.padInfo.top,ae=P-1-f.padInfo.left,ue=G/V;for(let le=0;le<O;++le)for(let fe=0;fe<V;++fe)for(let Ie=0;Ie<W;++Ie){const Re=Ie-J,ge=Math.max(0,Math.ceil(Re/K)),$e=Math.min(_,(U+Re)/K);for(let Te=0;Te<L;++Te){const be=Te-ae,it=Math.max(0,Math.ceil(be/Y)),et=Math.min(j,(P+be)/Y);let st=0;for(let rt=ge;rt<$e;++rt){const ht=rt*K-Re;for(let dt=it;dt<et;++dt){const cn=dt*Y-be,Yt=b*le+w*rt+C*dt,Dt=S*(U-1-ht)+N*(P-1-cn)+k*fe;for(let rn=0;rn<ue;++rn){const As=fe*ue+rn,yr=v[Yt+As],Zn=B[Dt+rn];st+=yr*Zn}}}m[g*le+y*Ie+x*Te+fe]=st}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const sDe={kernelName:Q_,backendName:"cpu",kernelFunc:rDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iDe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=ye(r.shape),i=n.data.get(r.dataId).values,o=St([s,s],r.dtype),a=o.values;for(let c=0;c<i.length;c++)a[c*s+c]=i[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const oDe={kernelName:H_,backendName:"cpu",kernelFunc:iDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aDe={kernelName:DS,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s}=t,{strides:i,pad:o,dilations:a}=n,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,A=l.data.get(s.dataId).values,d=s.shape.length,{batchSize:f,inHeight:h,inWidth:m,inChannels:g,outHeight:y,outWidth:x,padInfo:v,strideHeight:b,strideWidth:w,filterHeight:C,filterWidth:B,dilationHeight:S,dilationWidth:N,outShape:k}=ov(r.shape,s.shape,i,o,"NHWC",a),O=ye(k),U=k.length,P=sr(r.dtype,O);for(let W=0;W<f;++W)for(let L=0;L<y;++L){const G=L*b-v.top;for(let _=0;_<x;++_){const j=_*w-v.left;for(let K=0;K<g;++K){let Y=Number.MIN_SAFE_INTEGER;for(let ae=0;ae<C;++ae){const ue=G+ae*S;if(ue>=0&&ue<h)for(let le=0;le<B;++le){const fe=j+le*N;if(fe>=0&&fe<m){const Ie=ul([W,ue,fe,K],u,ot(r.shape)),Re=ul([ae,le,K],d,ot(s.shape)),ge=c[Ie]+A[Re];ge>Y&&(Y=ge)}}}const J=ul([W,L,_,K],U,ot(k));P[J]=Y}}}return{dataId:l.write(uf(P,r.dtype),k,r.dtype),shape:k,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lDe={kernelName:Sk,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=Uo(r.shape,c.data.get(r.dataId).values),A=Uo(s.shape,c.data.get(s.dataId).values),{batchSize:d,inHeight:f,inWidth:h,inChannels:m,outHeight:g,outWidth:y,padInfo:x,strideHeight:v,strideWidth:b,filterHeight:w,filterWidth:C,dilationHeight:B,dilationWidth:S,outShape:N}=ov(r.shape,s.shape,o,a,"NHWC",l);M(i.rank===N.length,()=>`Error in ${Sk}, dy must have the same rank as output ${N.length}, but got ${i.rank}`);const k=Uo(N,c.data.get(i.dataId).values),O=mK(s.shape,s.dtype);for(let P=0;P<d;++P)for(let V=0;V<g;++V){const W=V*v-x.top;for(let L=0;L<y;++L){const G=L*b-x.left;for(let _=0;_<m;++_){let j=Number.MIN_SAFE_INTEGER,K=0,Y=0;for(let J=0;J<w;++J){const ae=W+J*B;if(ae>=0&&ae<f)for(let ue=0;ue<C;++ue){const le=G+ue*S;if(le>=0&&le<h){const fe=u[P][ae][le][_]+A[J][ue][_];fe>j&&(j=fe,K=J,Y=ue)}}}O[K][Y][_]+=k[P][V][L][_]}}}return{dataId:c.write(uf(O,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cDe={kernelName:Ck,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=Uo(r.shape,c.data.get(r.dataId).values),A=Uo(s.shape,c.data.get(s.dataId).values),{batchSize:d,inHeight:f,inWidth:h,inChannels:m,outHeight:g,outWidth:y,padInfo:x,strideHeight:v,strideWidth:b,filterHeight:w,filterWidth:C,dilationHeight:B,dilationWidth:S,outShape:N}=ov(r.shape,s.shape,o,a,"NHWC",l);M(i.rank===N.length,()=>`Error in ${Ck}, dy must have the same rank as output ${N.length}, but got ${i.rank}`);const k=Uo(N,c.data.get(i.dataId).values),O=mK(r.shape,r.dtype);for(let P=0;P<d;++P)for(let V=0;V<g;++V){const W=V*v-x.top;for(let L=0;L<y;++L){const G=L*b-x.left;for(let _=0;_<m;++_){let j=Number.MIN_SAFE_INTEGER,K=W<0?0:W,Y=G<0?0:G;for(let J=0;J<w;++J){const ae=W+J*B;if(ae>=0&&ae<f)for(let ue=0;ue<C;++ue){const le=G+ue*S;if(le>=0&&le<h){const fe=u[P][ae][le][_]+A[J][ue][_];fe>j&&(j=fe,K=ae,Y=le)}}}O[P][K][Y][_]+=k[P][V][L][_]}}}return{dataId:c.write(uf(O,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uDe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s}=e,{canvas:i,options:o}=r,{contextOptions:a,imageOptions:l}=o||{},c=(l==null?void 0:l.alpha)||1,u=(a==null?void 0:a.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const A=i.getContext(u,(a==null?void 0:a.contextAttributes)||{});if(A==null)throw new Error(`Could not get the context with ${u} type.`);const[d,f]=s.shape.slice(0,2),h=s.shape.length===2?1:s.shape[2],m=n.data.get(s.dataId).values,g=s.dtype==="float32"?255:1,y=new Uint8ClampedArray(f*d*4);for(let v=0;v<d*f;++v){const b=[0,0,0,255*c];for(let C=0;C<h;C++){const B=m[v*h+C];if(s.dtype==="float32"){if(B<0||B>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${B}.`)}else if(s.dtype==="int32"&&(B<0||B>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${B}.`);h===1?(b[0]=B*g,b[1]=B*g,b[2]=B*g):b[C]=B*g}const w=v*4;y[w+0]=Math.round(b[0]),y[w+1]=Math.round(b[1]),y[w+2]=Math.round(b[2]),y[w+3]=Math.round(b[3])}i.width=f,i.height=d;const x=new ImageData(y,f,d);return A.putImageData(x,0,0),s}const ADe={kernelName:U1e,backendName:"cpu",kernelFunc:uDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sv(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ze(s,"sum");let a;s.dtype==="bool"?a=tA({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):a=yl({inputs:{x:s},backend:n});const l=a.shape.length,c=kt(i,a.shape),u=zn(c,l);let A=c,d=a;u!=null&&(d=ai({inputs:{x:a},backend:n,attrs:{perm:u}}),A=ar(A.length,l)),as("sum",A,d.shape.length);const[f,h]=Wr(d.shape,A),m=Di(d.dtype,"int32");let g=S2(n,f,m);const y=ye(h),x=n.data.get(g.dataId).values,v=n.data.get(d.dataId).values;for(let b=0;b<x.length;++b){const w=b*y;let C=0;for(let B=0;B<y;++B)C+=v[w+B];x[b]=C}if(o){const b=or(g.shape,c),w=g;g=vn({inputs:{x:g},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(a),u!=null&&n.disposeIntermediateTensorInfo(d),g}const dDe={kernelName:hB,backendName:"cpu",kernelFunc:Sv};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fDe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:o,summedDims:a,idDims:l}=VD(s,i.length);GD(o.length,l,i);const{path:c,steps:u}=KD(a,l),A=u.length;let d=null,f=o.length;const h=[];for(let m=0;m<A;++m){for(const g of u[m]){const{permutationIndices:y,expandDims:x}=WD(f,l[g]);let v;XD(y)?v=i[g]:(v=ai({inputs:{x:i[g]},backend:n,attrs:{perm:y}}),h.push(v));const b=v.shape.slice();for(let w=0;w<x.length;++w)b.splice(x[w],0,1);_t(v.shape,b)||(v=vn({inputs:{x:v},backend:n,attrs:{shape:b}}),h.push(v)),d===null?d=v:(d=o3({inputs:{a:v,b:d},backend:n}),h.push(d))}m<A-1&&(c[m]>=0&&(d=Sv({inputs:{x:d},backend:n,attrs:{axis:c[m]-(o.length-f),keepDims:!1}}),h.push(d)),f--)}for(const m of h)m!==d&&n.disposeIntermediateTensorInfo(m);return d}const hDe={kernelName:z_,backendName:"cpu",kernelFunc:fDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pDe(t){const{inputs:e,backend:n}=t,{dy:r,y:s}=e;Ze([r,s],"eluGrad");const i=new Float32Array(ye(s.shape)),o=n.data.get(s.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const c=o[l];c>=0?i[l]=a[l]:i[l]=a[l]*(c+1)}return n.makeTensorInfo(s.shape,"float32",i)}const mDe={kernelName:V_,backendName:"cpu",kernelFunc:pDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gDe=UD,yDe=jD,xDe=LD,vDe=MD,bDe=QD,wDe=HD,CDe=nn(Sx,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+gDe*n);return e*(1-((((wDe*r+bDe)*r+vDe)*r+xDe)*r+yDe)*r*Math.exp(-n*n))}),SDe={kernelName:Sx,backendName:"cpu",kernelFunc:CDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E2(t){const{inputs:e,backend:n,attrs:r}=t,{input:s}=e,{dim:i}=r,o=s.shape.length,a=s.shape.slice();let l=i;return i<0&&(M(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),a.splice(l,0,1),vn({inputs:{x:s},backend:n,attrs:{shape:a}})}const BDe={kernelName:PS,backendName:"cpu",kernelFunc:E2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NDe=cr((t,e)=>t/e),IR=$r(wx,NDe),fT={kernelName:wx,backendName:"cpu",kernelFunc:IR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dee(t,e,n){const r=t.shape,s=r[0],i=r[1],o=n.data.get(t.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,c=[s,i],u=ye(c),A=rs("float32",u),d=rs("float32",u);for(let g=0;g<s;g++){const y=ef({inputs:{x:a},backend:n,attrs:{begin:[g,0],size:[1,i]}}),x=ef({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,i]}}),v=wi({inputs:{real:y,imag:x},backend:n}),{real:b,imag:w}=EDe(v,e,n),C=yc(b,w);for(let B=0;B<i;B++){const S=zD(C,B);A[g*i+B]=S.real,d[g*i+B]=S.imag}n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v)}const f=n.makeTensorInfo(c,"float32",A),h=n.makeTensorInfo(c,"float32",d),m=wi({inputs:{real:f,imag:h},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),m}function EDe(t,e,n){const r=ye(t.shape),s=n.data.get(t.dataId),i=n.data.get(s.complexTensorInfos.real.dataId).values,o=n.data.get(s.complexTensorInfos.imag.dataId).values;if(IDe(r)){const a=hT(i,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",a.real),u=n.makeTensorInfo(l,"float32",a.imag),A=n.makeTensorInfo([],"float32",cA(r,"float32")),d=yl({inputs:{x:A},backend:n}),f=fT.kernelFunc({inputs:{a:c,b:A},backend:n}),h=fT.kernelFunc({inputs:{a:u,b:d},backend:n}),m=n.data.get(f.dataId).values,g=n.data.get(h.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),{real:m,imag:g}}return a}else{const a=yc(i,o),l=kDe(a,r,e);return Pq(l)}}function IDe(t){return(t&t-1)===0}function hT(t,e,n,r,s){if(n===1)return{real:t,imag:e};const i=yc(t,e),o=n/2,a=Uq(i),l=a.real,c=a.imag,u=[l.length],A=s.makeTensorInfo(u,"float32",l),d=s.makeTensorInfo(u,"float32",c),f=wi({inputs:{real:A,imag:d},backend:s}),h=jq(i),m=h.real,g=h.imag,y=[m.length],x=s.makeTensorInfo(y,"float32",m),v=s.makeTensorInfo(y,"float32",g),b=wi({inputs:{real:x,imag:v},backend:s}),w=hT(l,c,o,r,s),C=w.real,B=w.imag,S=[C.length],N=s.makeTensorInfo(S,"float32",C),k=s.makeTensorInfo(S,"float32",B),O=wi({inputs:{real:N,imag:k},backend:s}),U=hT(m,g,o,r,s),P=U.real,V=U.imag,W=[P.length],L=s.makeTensorInfo(W,"float32",P),G=s.makeTensorInfo(W,"float32",V),_=wi({inputs:{real:L,imag:G},backend:s}),j=Mq(n,r),K=[j.real.length],Y=s.makeTensorInfo(K,"float32",j.real),J=s.makeTensorInfo(K,"float32",j.imag),ae=wi({inputs:{real:Y,imag:J},backend:s}),ue=o3({inputs:{a:ae,b:_},backend:s}),le=dp({inputs:{a:O,b:ue},backend:s}),fe=NR({inputs:{a:O,b:ue},backend:s}),Ie=Zd({inputs:{input:le},backend:s}),Re=Zd({inputs:{input:fe},backend:s}),ge=fp({inputs:{input:le},backend:s}),$e=fp({inputs:{input:fe},backend:s}),Te=hp({inputs:[Ie,Re],backend:s,attrs:{axis:0}}),be=hp({inputs:[ge,$e],backend:s,attrs:{axis:0}}),it=s.data.get(Te.dataId).values,et=s.data.get(be.dataId).values;return s.disposeIntermediateTensorInfo(A),s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(x),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(b),s.disposeIntermediateTensorInfo(N),s.disposeIntermediateTensorInfo(k),s.disposeIntermediateTensorInfo(O),s.disposeIntermediateTensorInfo(L),s.disposeIntermediateTensorInfo(G),s.disposeIntermediateTensorInfo(_),s.disposeIntermediateTensorInfo(Y),s.disposeIntermediateTensorInfo(J),s.disposeIntermediateTensorInfo(ae),s.disposeIntermediateTensorInfo(ue),s.disposeIntermediateTensorInfo(le),s.disposeIntermediateTensorInfo(fe),s.disposeIntermediateTensorInfo(Ie),s.disposeIntermediateTensorInfo(ge),s.disposeIntermediateTensorInfo(Re),s.disposeIntermediateTensorInfo($e),s.disposeIntermediateTensorInfo(Te),s.disposeIntermediateTensorInfo(be),{real:it,imag:et}}function kDe(t,e,n){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let i=0,o=0;for(let a=0;a<e;a++){const l=Qq(s*a,e,n),c=zD(t,a);i+=c.real*l.real-c.imag*l.imag,o+=c.real*l.imag+c.imag*l.real}n&&(i/=e,o/=e),Lq(r,i,o,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TDe(t){const{inputs:e,backend:n}=t,{input:r}=e,s=ye(r.shape),i=r.shape[r.shape.length-1],o=s/i,a=vn({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=Dee(a,!1,n),c=vn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const FDe={kernelName:W_,backendName:"cpu",kernelFunc:TDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kR(t){const{backend:e,attrs:n}=t,{shape:r,value:s,dtype:i}=n,o=i||em(s),a=sr(o,ye(r));return _De(a,s,o),e.makeTensorInfo(r,o,a)}const $De={kernelName:G_,backendName:"cpu",kernelFunc:kR};function _De(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ODe={kernelName:K_,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,s=n,i=rs(r.dtype,ye(r.shape)),[o,a,l,c]=r.shape,u=s.data.get(r.dataId).values;for(let d=0;d<o;d++){const f=d*l*a*c;for(let h=0;h<a;h++){const m=h*(l*c);for(let g=0;g<l;g++){const y=g*c;for(let x=0;x<c;x++){const v=Math.round(l-g-1),b=f+m+y+x;let w=u[b];if(v>=0&&v<l){const C=v*c,B=f+m+C+x;w=u[B]}i[b]=w}}}}return{dataId:s.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:A,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=r;let m=_ee({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:A,dimRoundingMode:d}});if(o){const g=m;if(u==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const y=vn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=dp({inputs:{a:m,b:y},backend:n}),n.disposeIntermediateTensorInfo(y)}else m=dp({inputs:{a:m,b:o},backend:n});n.disposeIntermediateTensorInfo(g)}if(f){const g=m;if(u==="NCHW"&&f==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const y=vn({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=N2(n,m,f,y,h),n.disposeIntermediateTensorInfo(y)}else m=N2(n,m,f,a,h);n.disposeIntermediateTensorInfo(g)}return m}const RDe={kernelName:r2,backendName:"cpu",kernelFunc:DDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:A,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=r;let m=Oee({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:A,dimRoundingMode:d}});if(o){const g=m;m=dp({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(g)}if(f){const g=m;m=N2(n,m,f,a,h),n.disposeIntermediateTensorInfo(g)}return m}const UDe={kernelName:s2,backendName:"cpu",kernelFunc:PDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jDe(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=ye(r.shape),o=s.shape,a=o[o.length-1],[l,c,u,A]=ED(r,s);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const d=n.data.get(s.dataId).values,f=n.bufferSync(r),h=VZ(d,f,r.dtype,c,a,u,A,r.shape,i);return n.makeTensorInfo(l,r.dtype,h.values)}const LDe={kernelName:X_,backendName:"cpu",kernelFunc:jDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:o,batchDims:a}=r;Ze([s,i],"gatherV2");const l=kt(o,s.shape)[0],c=n.data.get(i.dataId).values,u=s.shape[l];for(let b=0;b<c.length;++b){const w=c[b];M(w<=u-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${u-1}]`)}let A=a;a==null&&(A=0);const d=ye(i.shape),f=YD(s,i,l,A),h=vn({inputs:{x:s},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),m=vn({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,d/f.batchSize]}}),g=[f.batchSize,f.outerSize,d/f.batchSize,f.sliceSize],y=n.bufferSync(m),x=n.bufferSync(h),v=WZ(x,y,g);return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(f.outputShape,v.dtype,v.values)}const QDe={kernelName:jS,backendName:"cpu",kernelFunc:MDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HDe(t){const{inputs:e,backend:n}=t,{input:r}=e,s=ye(r.shape),i=r.shape[r.shape.length-1],o=s/i,a=vn({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=Dee(a,!0,n),c=vn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const zDe={kernelName:q_,backendName:"cpu",kernelFunc:HDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VDe=nn(Fx,t=>Number.isFinite(t)?1:0,"bool"),WDe={kernelName:Fx,backendName:"cpu",kernelFunc:VDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GDe=nn($x,t=>Math.abs(t)===1/0?1:0,"bool"),KDe={kernelName:$x,backendName:"cpu",kernelFunc:GDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XDe=nn(_x,t=>Number.isNaN(t)?1:0,"bool"),qDe={kernelName:_x,backendName:"cpu",kernelFunc:XDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YDe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=YZ(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}const JDe={kernelName:J_,backendName:"cpu",kernelFunc:YDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZDe=nn(Dx,t=>Math.log1p(t)),eRe={kernelName:Dx,backendName:"cpu",kernelFunc:ZDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tRe=cr((t,e)=>t&&e),nRe=$r(zS,tRe,null,"bool"),rRe={kernelName:zS,backendName:"cpu",kernelFunc:nRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sRe=nn(VS,t=>t?0:1,"bool"),iRe={kernelName:VS,backendName:"cpu",kernelFunc:sRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oRe=cr((t,e)=>t||e),aRe=$r(WS,oRe,null,"bool"),lRe={kernelName:WS,backendName:"cpu",kernelFunc:aRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:l}=r;Ze(s,"LRN");const c=s.shape[3],u=c-1,A=n.data.get(s.dataId).values,d=ye(s.shape),f=new Float32Array(d);function h(m){const g=m%c;let y=m-g+Math.max(0,g-i);const x=m-g+Math.min(g+i,u);let v=0;for(;y<=x;y++){const b=A[y];v+=b*b}return v}for(let m=0;m<d;m++){const g=h(m),y=A[m]*Math.pow(o+a*g,-l);f[m]=y}return n.makeTensorInfo(s.shape,s.dtype,f)}const uRe={kernelName:GS,backendName:"cpu",kernelFunc:cRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ARe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r;Ze(o,"LRNGrad");const A=ye(o.shape),d=o.shape[3],f=n.data.get(o.dataId).values,h=n.data.get(s.dataId).values,m=n.data.get(i.dataId).values,g=new Float32Array(A),y=A;for(let x=0;x<y;x++){const v=x%d,b=x-v+Math.max(0,v-a),w=x-v+Math.min(d,v+a+1);let C=0;for(let B=b;B<w;B++)C+=Math.pow(h[B],2);C=c*C+l;for(let B=b;B<w;B++){let S=-2*c*u*h[B]*m[x]/C;x===B&&(S+=Math.pow(C,-u)),S*=f[x],g[B]+=S}}return n.makeTensorInfo(o.shape,s.dtype,g)}const dRe={kernelName:Z_,backendName:"cpu",kernelFunc:ARe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ree(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:o}=r,a=n;let l=s.shape;const c=l.length,u=kt(i,l);let A=u;const d=zn(A,c);let f=a.data.get(s.dataId).values;if(d!=null){const b=new Array(c);for(let w=0;w<b.length;w++)b[w]=l[d[w]];f=SR(f,l,s.dtype,d,b),A=ar(A.length,c),l=b}Ze(s,"max"),as("max",A,c);const[h,m]=Wr(l,A),g=ye(m),y=ZZ(f,g,h,s.dtype),x=a.write(y,h,s.dtype);let v=h;return o&&(v=or(h,u)),{dataId:x,shape:v,dtype:s.dtype}}const fRe={kernelName:KS,backendName:"cpu",kernelFunc:Ree};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Ze(s,"maxPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;M(os(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Xo(s.shape,i,o,c,a,l);let A;if(u.filterWidth===1&&u.filterHeight===1&&_t(u.inShape,u.outShape))A=yl({inputs:{x:s},backend:n});else{const d=n.data.get(s.dataId).values,f=ot(s.shape),h=ER(d,s.shape,s.dtype,f,u,"max");A=n.makeTensorInfo(u.outShape,s.dtype,h.values)}return A}const pRe={kernelName:XS,backendName:"cpu",kernelFunc:hRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;Ze(s,"maxPool3d");const u=kc(s.shape,i,o,1,a,l,c),A=n.data.get(s.dataId).values,d=$ee(A,s.shape,s.dtype,ot(s.shape),u,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}const gRe={kernelName:qS,backendName:"cpu",kernelFunc:mRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yRe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;Ze([s,i],"maxPool3DGrad");const u=kc(i.shape,o,a,1,l,c),A=n.bufferSync(i),d=oOe(A,u),f=u.strideDepth,h=u.strideHeight,m=u.strideWidth,g=u.dilationDepth,y=u.dilationHeight,x=u.dilationWidth,v=u.effectiveFilterDepth,b=u.effectiveFilterHeight,w=u.effectiveFilterWidth,C=v-1-u.padInfo.front,B=w-1-u.padInfo.left,S=b-1-u.padInfo.top,N=St(i.shape,"float32"),k=n.bufferSync(s);for(let O=0;O<u.batchSize;++O)for(let U=0;U<u.inChannels;++U)for(let P=0;P<u.inDepth;++P)for(let V=0;V<u.inHeight;++V)for(let W=0;W<u.inWidth;++W){const L=P-C,G=V-S,_=W-B;let j=0;for(let K=0;K<v;K+=g){const Y=(L+K)/f;if(!(Y<0||Y>=u.outDepth||Math.floor(Y)!==Y))for(let J=0;J<b;J+=y){const ae=(G+J)/h;if(!(ae<0||ae>=u.outHeight||Math.floor(ae)!==ae))for(let ue=0;ue<w;ue+=x){const le=(_+ue)/m;if(le<0||le>=u.outWidth||Math.floor(le)!==le)continue;const fe=v*b*w-1-d.get(O,Y,ae,le,U),Ie=K*b*w+J*w+ue,Re=fe===Ie?1:0;if(Re===0)continue;const ge=k.get(O,Y,ae,le,U);j+=ge*Re}}}N.set(j,O,P,V,W,U)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}const xRe={kernelName:tO,backendName:"cpu",kernelFunc:yRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vRe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;Ze([i,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:A}=r,d=Xo(a.shape,l,c,1,u,A),f=n.data.get(a.dataId).values,h=St(d.outShape,a.dtype,Fee(f,a.shape,a.dtype,d).values),m=d.strideHeight,g=d.strideWidth,y=d.dilationHeight,x=d.dilationWidth,v=d.effectiveFilterHeight,b=d.effectiveFilterWidth,w=b-1-d.padInfo.left,C=v-1-d.padInfo.top,B=St(a.shape,"float32"),S=n.data.get(s.dataId).values,N=St(s.shape,"float32",S);for(let k=0;k<d.batchSize;++k)for(let O=0;O<d.inChannels;++O)for(let U=0;U<d.inHeight;++U)for(let P=0;P<d.inWidth;++P){const V=U-C,W=P-w;let L=0;for(let G=0;G<v;G+=y){const _=(V+G)/m;if(!(_<0||_>=d.outHeight||Math.floor(_)!==_))for(let j=0;j<b;j+=x){const K=(W+j)/g;if(K<0||K>=d.outWidth||Math.floor(K)!==K)continue;const Y=v*b-1-h.get(k,_,K,O),J=G*b+j,ae=Y===J?1:0;if(ae===0)continue;const ue=N.get(k,_,K,O);L+=ue*ae}}B.set(L,k,U,P,O)}return n.makeTensorInfo(B.shape,B.dtype,B.values)}const bRe={kernelName:eO,backendName:"cpu",kernelFunc:vRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wRe(t,e,n,r,s){const i=ot(e),o=ER(t,e,n,i,s,"max"),a=Fee(t,e,n,s,!0,r);return[o.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CRe={kernelName:nO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:a}=e,l=n;Ze(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=Xo(r.shape,s,i,[1,1],o),[A,d]=wRe(c,r.shape,r.dtype,a,u),f=l.write(A,u.outShape,r.dtype),h=l.write(d,u.outShape,r.dtype);return[{dataId:f,shape:u.outShape,dtype:r.dtype},{dataId:h,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=kt(i,s.shape),c=Wr(s.shape,a)[1],u=ye(c),A=[],d=n.makeTensorInfo([],"float32",new Float32Array([u]));A.push(d);const f=tA({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});A.push(f);const h=IR({inputs:{a:f,b:d},backend:n});A.push(h);const m=Sv({inputs:{x:h},backend:n,attrs:{axis:i,keepDims:o}});return A.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const BRe={kernelName:YS,backendName:"cpu",kernelFunc:SRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ze(s,"min");const a=kt(i,s.shape);let l=a;const c=zn(l,s.shape.length);let u=s;c!=null&&(u=ai({inputs:{x:s},backend:n,attrs:{perm:c}}),l=ar(l.length,s.shape.length)),as("min",l,u.shape.length);const[A,d]=Wr(u.shape,l),f=ye(d),h=bs(ye(A),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){const x=y*f;let v=m[x];for(let b=0;b<f;++b){const w=m[x+b];(Number.isNaN(w)||w<v)&&(v=w)}h[y]=v}c!=null&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(A,u.dtype,h);if(o){const y=or(A,a),x=vn({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),x}return g}const ERe={kernelName:JS,backendName:"cpu",kernelFunc:NRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,mode:o}=r;Ze(s,"mirrorPad");const a=i.map((v,b)=>v[0]+s.shape[b]+v[1]),l=i.map(v=>v[0]),c=i.map((v,b)=>v[0]+s.shape[b]),u=o==="reflect"?0:1,A=n.data.get(s.dataId).values,d=s.shape.length,f=ot(s.shape),h=ye(a),m=a.length,g=ot(a),y=rs(s.dtype,h);for(let v=0;v<h;v++){let b=tm(v,m,g);for(let C=0;C<m;C++)b[C]<l[C]?b[C]=l[C]*2-b[C]-u:b[C]>=c[C]&&(b[C]=(c[C]-1)*2-b[C]+u);b=b.map((C,B)=>C-l[B]);const w=ul(b,d,f);y[v]=A[w]}return{dataId:n.write(y,a,s.dtype),shape:a,dtype:s.dtype}}const kRe={kernelName:ZS,backendName:"cpu",kernelFunc:IRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TRe=cr((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),FRe=$r(Ux,TRe),$Re={kernelName:Ux,backendName:"cpu",kernelFunc:FRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pee(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,o=s.shape.length;let a=i;if(a===-1&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=kt([a],s.shape),c=Ree({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=or(c.shape,l),A=vn({inputs:{x:c},backend:n,attrs:{shape:u}}),d=NR({inputs:{a:s,b:A},backend:n}),f=MZ({inputs:{x:d},backend:n}),h=Sv({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),m=vn({inputs:{x:h},backend:n,attrs:{shape:u}}),g=IR({inputs:{a:f,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}const _Re={kernelName:gB,backendName:"cpu",kernelFunc:Pee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ORe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r;Ze(s,"multinomial");const l=a?s:Pee({inputs:{logits:s},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],A=n.data.get(l.dataId).values,d=[c,i],f=bs(ye(d),"int32");for(let h=0;h<c;++h){const m=h*u,g=new Float32Array(u-1);g[0]=A[m];for(let v=1;v<g.length;++v)g[v]=g[v-1]+A[m+v];const y=DB.alea(o.toString()),x=h*i;for(let v=0;v<i;++v){const b=y();f[x+v]=g.length;for(let w=0;w<g.length;w++)if(b<g[w]){f[x+v]=w;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",f)}const DRe={kernelName:rO,backendName:"cpu",kernelFunc:ORe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RRe=vD;function PRe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r;Ze(s,"NonMaxSuppression");const c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,{selectedIndices:A}=RRe(c,u,o,a,l);return n.makeTensorInfo([A.length],"int32",new Int32Array(A))}const URe={kernelName:sO,backendName:"cpu",kernelFunc:PRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jRe=bD;function LRe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;Ze(s,"NonMaxSuppressionPadded");const u=n.data.get(s.dataId).values,A=n.data.get(i.dataId).values,{selectedIndices:d,validOutputs:f}=jRe(u,A,o,a,l,c);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const MRe={kernelName:iO,backendName:"cpu",kernelFunc:LRe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QRe=wD;function HRe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;Ze(s,"NonMaxSuppressionWithScore");const u=n.data.get(s.dataId).values,A=n.data.get(i.dataId).values,d=o,f=a,h=l,m=c,{selectedIndices:g,selectedScores:y}=QRe(u,A,d,f,h,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const zRe={kernelName:oO,backendName:"cpu",kernelFunc:HRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VRe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:o,onValue:a,offValue:l}=r;Ze(s,"oneHot");const c=ye(s.shape),u=new Float32Array(c*o);u.fill(l);const A=n.data.get(s.dataId).values;for(let d=0;d<c;++d)A[d]>=0&&A[d]<o&&(u[d*o+A[d]]=a);return n.makeTensorInfo([...s.shape,o],i,u)}const WRe={kernelName:rB,backendName:"cpu",kernelFunc:VRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=Zd({inputs:{input:r},backend:n}),i=I2({inputs:{x:s},backend:n}),o=fp({inputs:{input:r},backend:n}),a=I2({inputs:{x:o},backend:n}),l=wi({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return kR({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const GRe={kernelName:bB,backendName:"cpu",kernelFunc:I2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uee(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=Zd({inputs:{input:r},backend:n}),i=Uee({inputs:{x:s},backend:n}),o=fp({inputs:{input:r},backend:n}),a=I2({inputs:{x:o},backend:n}),l=wi({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return kR({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const KRe={kernelName:nB,backendName:"cpu",kernelFunc:Uee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jee(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return E2({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,o=e[0].dtype;e.forEach(u=>{ji(i,u.shape,"All tensors passed to stack must have matching shapes"),M(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const A=E2({inputs:{input:u},backend:n,attrs:{dim:s}});return a.push(A),A}),c=hp({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const XRe={kernelName:sB,backendName:"cpu",kernelFunc:jee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r;Ze(s,"pad");const a=i.map((x,v)=>x[0]+s.shape[v]+x[1]),l=i.map(x=>x[0]),c=n.data.get(s.dataId).values,u=ye(s.shape),A=s.shape.length,d=ot(s.shape),f=ye(a),h=a.length,m=ot(a),g=rs(s.dtype,f);o!==0&&g.fill(o);for(let x=0;x<u;x++){const b=tm(x,A,d).map((C,B)=>C+l[B]),w=ul(b,h,m);g[w]=c[x]}return{dataId:n.write(g,a,s.dtype),shape:a,dtype:s.dtype}}const Lee={kernelName:iB,backendName:"cpu",kernelFunc:qRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YRe=cr((t,e)=>Math.pow(t,e)),JRe=$r(Lx,YRe),ZRe={kernelName:Lx,backendName:"cpu",kernelFunc:JRe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ePe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:o}=e,{outputRaggedRank:a}=r,l=s.map(y=>n.data.get(y.dataId).values),c=s.map(y=>y.shape),u=n.data.get(i.dataId).values,A=n.data.get(o.dataId).values,[d,f,h]=iee(l,c,u,i.shape,i.dtype,A,o.shape),m=d.map(y=>n.makeTensorInfo([y.length],"int32",y)),g=n.makeTensorInfo(h,i.dtype,f);return m.concat([g])}const tPe={kernelName:aO,backendName:"cpu",kernelFunc:ePe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nPe(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=oee(o,r.shape,r.dtype,a,s.shape,l,i.shape),A=n.makeTensorInfo([c.length],"int32",c),d=n.makeTensorInfo([u.length],r.dtype,u);return[A,d]}const rPe={kernelName:lO,backendName:"cpu",kernelFunc:nPe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sPe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,A=n.data.get(o.dataId).values,d=a.map(g=>n.data.get(g.dataId).values),f=a.map(g=>g.shape),[h,m]=aee(c,s.shape,u,i.shape,i.dtype,A,o.shape,d,f,l);return n.makeTensorInfo(h,i.dtype,m)}const iPe={kernelName:cO,backendName:"cpu",kernelFunc:sPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oPe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,dtype:i,step:o}=n,a=lee(r,s,o,i);return e.makeTensorInfo([a.length],i,a)}const aPe={kernelName:uO,backendName:"cpu",kernelFunc:oPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lPe=nn(Mx,t=>1/t),cPe={kernelName:Mx,backendName:"cpu",kernelFunc:lPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r;Ze(s,"resizeBilinear");const l=ot(s.shape),[c,u]=a,[A,d,f,h]=s.shape,m=n.data.get(s.dataId).values,g=new Float32Array(ye([A,c,u,h])),y=[i&&c>1?d-1:d,i&&u>1?f-1:f],x=[i&&c>1?c-1:c,i&&u>1?u-1:u];let v=0;const b=y[0]/x[0],w=y[1]/x[1];for(let C=0;C<A;C++)for(let B=0;B<c;B++){let S;o?S=b*(B+.5)-.5:S=b*B;const N=Math.max(0,Math.floor(S)),k=S-N,O=Math.min(d-1,Math.ceil(S)),U=C*l[0]+N*l[1],P=C*l[0]+O*l[1];for(let V=0;V<u;V++){let W;o?W=w*(V+.5)-.5:W=w*V;const L=Math.max(0,Math.floor(W)),G=W-L,_=Math.min(f-1,Math.ceil(W)),j=U+L*l[2],K=P+L*l[2],Y=U+_*l[2],J=P+_*l[2];for(let ae=0;ae<h;ae++){const ue=m[j+ae],le=m[K+ae],fe=m[Y+ae],Ie=m[J+ae],Re=ue+(fe-ue)*G,ge=le+(Ie-le)*G,$e=Re+(ge-Re)*k;g[v++]=$e}}}return n.makeTensorInfo([A,c,u,h],"float32",g)}const APe={kernelName:uB,backendName:"cpu",kernelFunc:uPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r;Ze([i,s],"resizeBilinearGrad");const a=ot(s.shape),[l,c,u,A]=s.shape,[,d,f]=i.shape,h=new Float32Array(l*c*u*A),m=[o&&d>1?c-1:c,o&&f>1?u-1:u],g=[o&&d>1?d-1:d,o&&f>1?f-1:f],y=m[0]/g[0],x=m[1]/g[1],v=n.data.get(i.dataId).values;let b=0;for(let w=0;w<l;w++){const C=w*a[0];for(let B=0;B<d;B++){const S=B*y,N=Math.floor(S),k=Math.min(Math.ceil(S),c-1),O=C+N*a[1],U=C+k*a[1],P=S-N,V=1-P;for(let W=0;W<f;W++){const L=W*x,G=Math.floor(L),_=Math.min(Math.ceil(L),u-1),j=L-G,K=1-j,Y=O+G*a[2],J=O+_*a[2],ae=U+G*a[2],ue=U+_*a[2],le=V*K,fe=V*j,Ie=P*K,Re=P*j;for(let ge=0;ge<A;ge++){const $e=v[b++];h[Y+ge]+=$e*le,h[J+ge]+=$e*fe,h[ae+ge]+=$e*Ie,h[ue+ge]+=$e*Re}}}}return n.makeTensorInfo([l,u,c,A],"float32",h)}const fPe={kernelName:fO,backendName:"cpu",kernelFunc:dPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r;Ze(s,"resizeNearestNeighbor");const l=ot(s.shape),[c,u]=a,[A,d,f,h]=s.shape,m=n.data.get(s.dataId).values,g=new Float32Array(A*c*u*h),y=[i&&c>1?d-1:d,i&&u>1?f-1:f],x=[i&&c>1?c-1:c,i&&u>1?u-1:u],v=y[0]/x[0],b=y[1]/x[1];let w=0;for(let C=0;C<A;C++){const B=C*l[0];for(let S=0;S<c;S++){const N=o?v*(S+.5):v*S;let k=Math.min(d-1,i?Math.round(N):Math.floor(N));o&&(k=Math.max(0,k));const O=B+k*l[1];for(let U=0;U<u;U++){const P=o?b*(U+.5):b*U;let V=Math.min(f-1,i?Math.round(P):Math.floor(P));o&&(V=Math.max(0,V));const W=O+V*l[2];for(let L=0;L<h;L++){const G=m[W+L];g[w++]=G}}}}return n.makeTensorInfo([A,c,u,h],s.dtype,g)}const pPe={kernelName:cB,backendName:"cpu",kernelFunc:hPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r;Ze([i,s],"resizeNearestNeighborGrad");const a=ot(s.shape),l=ot(i.shape),[c,u,A,d]=s.shape,[,f,h]=i.shape,m=new Float32Array(c*u*A*d),g=n.data.get(i.dataId).values,y=[o&&f>1?u-1:u,o&&h>1?A-1:A],x=[o&&f>1?f-1:f,o&&h>1?h-1:h],v=y[0]/x[0],b=y[1]/x[1],w=1/v,C=1/b,B=Math.ceil(w)*2+2,S=Math.ceil(C)*2+2;for(let N=0;N<c;N++){const k=N*a[0];for(let O=0;O<u;O++){const U=k+O*a[1],P=Math.floor(O*w),V=Math.floor(P-B/2);for(let W=0;W<A;W++){const L=U+W*a[2],G=Math.floor(W*C),_=Math.floor(G-S/2);for(let j=0;j<d;j++){let K=0;for(let Y=0;Y<B;Y++){const J=Y+V;if(J<0||J>=f)continue;const ae=k+J*l[1],ue=J*v,le=Math.min(u-1,o?Math.round(ue):Math.floor(ue));if(O===le)for(let fe=0;fe<S;fe++){const Ie=fe+_;if(Ie<0||Ie>=h)continue;const Re=ae+Ie*l[2],ge=Ie*b,$e=Math.min(A-1,o?Math.round(ge):Math.floor(ge));W===$e&&(K+=g[Re+j])}}m[L+j]=K}}}}return n.makeTensorInfo(s.shape,s.dtype,m)}const gPe={kernelName:dO,backendName:"cpu",kernelFunc:mPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r;Ze(s,"reverse");const o=s.shape.length,a=kt(i,s.shape);if(o===0)return yl({inputs:{x:s},backend:n});const l=new Er(s.shape,s.dtype),c=n.bufferSync(s);for(let u=0;u<l.size;u++){const A=l.indexToLoc(u),d=A.slice();a.forEach(f=>d[f]=s.shape[f]-1-d[f]),l.set(c.get(...d),...A)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const xPe={kernelName:AB,backendName:"cpu",kernelFunc:yPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vPe={kernelName:TO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,l=rs(r.dtype,ye(r.shape)),[c,u,A,d]=r.shape,[f,h]=DD(o,u,A),m=255,g=Math.sin(s),y=Math.cos(s),x=a.data.get(r.dataId).values;for(let b=0;b<c;b++){const w=b*A*u*d;for(let C=0;C<u;C++){const B=C*(A*d);for(let S=0;S<A;S++){const N=S*d;for(let k=0;k<d;k++){const O=[c,C,S,k],U=O[2],P=O[1];let V=(U-f)*y-(P-h)*g,W=(U-f)*g+(P-h)*y;V=Math.round(V+f),W=Math.round(W+h);let L=i;if(typeof i!="number"&&(k===3?L=m:L=i[k]),V>=0&&V<A&&W>=0&&W<u){const _=W*(A*d),j=V*d,K=w+_+j+k;L=x[K]}const G=w+B+N+k;l[G]=L}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bPe=nn(zx,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),wPe={kernelName:zx,backendName:"cpu",kernelFunc:bPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CPe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:A}=hf(i,s,o),d=!0,f=n.bufferSync(s),h=n.bufferSync(i),m=ld(f,h,o,A,c,l,a,u,0,d);return n.makeTensorInfo(o,m.dtype,m.values)}const SPe={kernelName:hO,backendName:"cpu",kernelFunc:CPe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BPe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<e?n=s+1:r=s;return r}function NPe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<=e?n=s+1:r=s;return r}function EPe(t,e,n,r,s,i){const o=sr("int32",n*s);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),c=a*s;for(let u=0;u<s;++u)o[c+u]=i==="left"?BPe(l,e[u+c]):NPe(l,e[u+c])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IPe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:o}=r,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,c=EPe(a,l,s.shape[0],s.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",c)}const kPe={kernelName:mO,backendName:"cpu",kernelFunc:IPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TPe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e;Ze([r,s,i],"select");const o=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=Di(s.dtype,i.dtype),A=bs(ye(s.shape),u);let d=0;const f=o===0||o>1||s.shape.length===1?1:ye(s.shape.slice(1));for(let h=0;h<a.length;h++)for(let m=0;m<f;m++)a[h]===1?A[d++]=l[h]:A[d++]=c[h];return n.makeTensorInfo(s.shape,u,A)}const FPe={kernelName:dB,backendName:"cpu",kernelFunc:TPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Pe=GB,_Pe=KB,OPe=nn(Wx,t=>t>=0?_Pe*t:$Pe*(Math.exp(t)-1)),DPe={kernelName:Wx,backendName:"cpu",kernelFunc:OPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RPe=nn(Xx,t=>t<0?-1:t>0?1:0),PPe={kernelName:Xx,backendName:"cpu",kernelFunc:RPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UPe=nn(Gx,t=>Math.sin(t)),jPe={kernelName:Gx,backendName:"cpu",kernelFunc:UPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LPe=nn(Kx,t=>Math.sinh(t)),MPe={kernelName:Kx,backendName:"cpu",kernelFunc:LPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QPe=11920928955078125e-23,B5=Math.log(QPe)+2,HPe=nn(Yx,t=>{const e=t>-B5,n=t<B5,r=Math.exp(t);let s;return n?s=r:e?s=t:s=Math.log(1+r),s}),zPe={kernelName:Yx,backendName:"cpu",kernelFunc:HPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:o}=r;Ze([s],"spaceToBatchND");const a=ye(i),l=[[0,0]];l.push(...o);for(let C=1+i.length;C<s.shape.length;++C)l.push([0,0]);const c=Lee.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),u=fv(c.shape,i,a,!1),A=hv(u.length,i.length,!1),d=pv(c.shape,i,a,!1),m=vn({inputs:{x:c},backend:n,attrs:{shape:u}}),x=ai({inputs:{x:m},backend:n,attrs:{perm:A}}),w=vn({inputs:{x},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(x),w}const WPe={kernelName:pB,backendName:"cpu",kernelFunc:VPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GPe(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values[0],[A,d,f,h,m]=dee(a,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(d,r.dtype,A),n.makeTensorInfo([d[0]],s.dtype,f),n.makeTensorInfo([h.length],"bool",new Uint8Array(h.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const KPe={kernelName:gO,backendName:"cpu",kernelFunc:GPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XPe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.data.get(s.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[c,u,A]=fee(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([A.length],i.dtype,new Int32Array(A))]}const qPe={kernelName:yO,backendName:"cpu",kernelFunc:XPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YPe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=BR(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const JPe={kernelName:xO,backendName:"cpu",kernelFunc:YPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZPe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=BR(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const eUe={kernelName:vO,backendName:"cpu",kernelFunc:ZPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tUe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:A,outputSize:d}=hf(i,s,a),f=!1,h=n.bufferSync(s);let m;switch(i.dtype){case"bool":{const g=n.bufferSync(i),y=!!n.data.get(o.dataId).values[0];m=ld(h,g,a,d,u,c,l,A,y,f);break}case"float32":{const g=n.bufferSync(i),y=n.data.get(o.dataId).values[0];m=ld(h,g,a,d,u,c,l,A,y,f);break}case"int32":{const g=n.bufferSync(i),y=n.data.get(o.dataId).values[0];m=ld(h,g,a,d,u,c,l,A,y,f);break}case"string":{const g=n.bufferSync(i),y=Vu(n.data.get(o.dataId).values[0]);m=ld(h,g,a,d,u,c,l,A,y,f);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(a,m.dtype,m.values)}const nUe={kernelName:bO,backendName:"cpu",kernelFunc:tUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:o}=r,a=kt(o,s.shape)[0],l=qD(s,i,a),c=new Array(s.shape.length).fill(0),u=s.shape.slice();return l.map(A=>{const d=[...u];d[a]=A;const f=ef({inputs:{x:s},backend:n,attrs:{begin:c,size:d}});return c[a]+=A,f})}const sUe={kernelName:mB,backendName:"cpu",kernelFunc:rUe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iUe={kernelName:wO,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Ze(n,"square");const s=r.data.get(n.dataId).values,i=new Float32Array(s.length);for(let a=0;a<s.length;++a){const l=s[a];i[a]=l*l}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oUe=nn(sv,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),aUe={kernelName:sv,backendName:"cpu",kernelFunc:oUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:A,shrinkAxisMask:d}=r;Ze(s,"stridedSlice");const{finalShapeSparse:f,finalShape:h,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:x,end:v,strides:b}=$D(s.shape,i,o,a,l,c,u,A,d);let w;if(m)w=vn({inputs:{x:s},backend:n,attrs:{shape:h}});else if(g||y){M(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const C=kD(x,v,b),B=ef({inputs:{x:s},backend:n,attrs:{begin:x,size:C}});w=vn({inputs:{x:B},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(B)}else{const C=n.bufferSync(s),B=mee(f,C,b,x);w=n.makeTensorInfo(h,B.dtype,B.values)}return w}const cUe={kernelName:CO,backendName:"cpu",kernelFunc:lUe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uUe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:A}=e,d=n.data.get(u.dataId).values,f=n.data.get(A.dataId).values,[h,m]=gee(d,f,s,i,o,a,l,c);return[n.makeTensorInfo([h.length],"string",h),n.makeTensorInfo(A.shape,"int32",m)]}const AUe={kernelName:SO,backendName:"cpu",kernelFunc:uUe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dUe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],[c,u,A]=yee(a,l,s),d=u.length;return[n.makeTensorInfo([d,2],"int32",c),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(A))]}const fUe={kernelName:BO,backendName:"cpu",kernelFunc:dUe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hUe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(i.dataId).values,a=xee(o,s);return n.makeTensorInfo(i.shape,"int32",a)}const pUe={kernelName:NO,backendName:"cpu",kernelFunc:hUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mUe=nn(tv,t=>Math.tan(t)),gUe={kernelName:tv,backendName:"cpu",kernelFunc:mUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yUe=nn(nv,t=>Math.tanh(t)),xUe={kernelName:nv,backendName:"cpu",kernelFunc:yUe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vUe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:s,updates:i}=e,{sliceRank:o,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=hf(i,s,r.shape),A=!1,d=n.bufferSync(s),f=n.bufferSync(i),h=n.bufferSync(r),m=ld(d,f,r.shape,u,l,a,o,c,h,A);return n.makeTensorInfo(r.shape,m.dtype,m.values)}const bUe={kernelName:pO,backendName:"cpu",kernelFunc:vUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;Ze(s,"tile");const o=bee(n.bufferSync(s),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const CUe={kernelName:rv,backendName:"cpu",kernelFunc:wUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r;Ze(s,"topk");const a=n.data.get(s.dataId).values,[l,c]=Cee(a,s.shape,s.dtype,i,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const BUe={kernelName:EO,backendName:"cpu",kernelFunc:SUe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NUe(t){const{inputs:e,attrs:n,backend:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=n,[u,A,d,f]=s.shape,[h,m]=c??[A,d],g=[u,h,m,f],y=ot(s.shape),x=y[0],v=y[1],b=y[2],w=ot(g),C=w[0],B=w[1],S=w[2],N=rs(s.dtype,ye(g));N.fill(l);const k=r.data.get(s.dataId).values,O=r.data.get(i.dataId).values;for(let P=0;P<u;++P){const V=i.shape[0]===1?O:O.subarray(P*8,P*8+8);for(let W=0;W<h;++W)for(let L=0;L<m;++L)for(let G=0;G<f;++G){let _;const j=V[6]*L+V[7]*W+1;if(j===0)continue;const K=(V[0]*L+V[1]*W+V[2])/j,Y=(V[3]*L+V[4]*W+V[5])/j,J=N5(K,d,a),ae=N5(Y,A,a);switch(o){case"nearest":_=$Ue(k,A,d,x,v,b,P,ae,J,G,l);break;case"bilinear":_=_Ue(k,A,d,x,v,b,P,ae,J,G,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const ue=P*C+W*B+L*S+G;N[ue]=_}return r.makeTensorInfo(g,s.dtype,N)}return{dataId:r.write(N,g,s.dtype),shape:s.shape,dtype:s.dtype}}const EUe={kernelName:IO,backendName:"cpu",kernelFunc:NUe};function N5(t,e,n){switch(n){case"reflect":return IUe(t,e);case"wrap":return kUe(t,e);case"nearest":return FUe(t,e);case"constant":default:return TUe(t)}}function IUe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Md(0,n,e-1)}function kUe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Md(0,n,e-1)}function TUe(t,e){return t}function FUe(t,e){return Md(0,t,e-1)}function Qg(t,e,n,r,s,i,o,a,l,c,u){const A=o*r+a*s+l*i+c;return 0<=a&&a<e&&0<=l&&l<n?t[A]:u}function $Ue(t,e,n,r,s,i,o,a,l,c,u){const A=Math.round(a),d=Math.round(l);return Qg(t,e,n,r,s,i,o,A,d,c,u)}function _Ue(t,e,n,r,s,i,o,a,l,c,u){const A=Math.floor(a),d=Math.floor(l),f=A+1,h=d+1,m=(h-l)*Qg(t,e,n,r,s,i,o,A,d,c,u)+(l-d)*Qg(t,e,n,r,s,i,o,A,h,c,u),g=(h-l)*Qg(t,e,n,r,s,i,o,f,d,c,u)+(l-d)*Qg(t,e,n,r,s,i,o,f,h,c,u);return(f-a)*m+(a-A)*g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OUe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;Ze(i,"unique");const o=r.data.get(i.dataId).values,{outputValues:a,outputShape:l,indices:c}=See(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const DUe={kernelName:kO,backendName:"cpu",kernelFunc:OUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RUe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s.shape.length,a=s.shape[i],l=new Array(o-1);let c=0;for(let f=0;f<o;f++)f!==i&&(l[c++]=s.shape[f]);const u=new Array(o).fill(0),A=s.shape.slice();A[i]=1;const d=new Array(a);for(let f=0;f<d.length;f++){u[i]=f;const h=ef({inputs:{x:s},backend:n,attrs:{begin:u,size:A}});d[f]=vn({inputs:{x:h},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(h)}return d}const PUe={kernelName:xB,backendName:"cpu",kernelFunc:RUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:o}=r;Ze(s,"unsortedSegmentSum");const a=s.shape.length,l=i.shape.length,c=[],u=[],A=a-l;let d=i;for(let h=0;h<A;++h){const m=E2({inputs:{input:d},backend:n,attrs:{dim:h+1}});d=m,u.push(m)}for(let h=0;h<o;++h){const m=cA(h,"int32"),g=n.makeTensorInfo([],"int32",m),y=jZ({inputs:{a:g,b:d},backend:n}),x=tA({inputs:{x:y},backend:n,attrs:{dtype:"float32"}}),v=o3({inputs:{a:x,b:s},backend:n}),b=Sv({inputs:{x:v},backend:n,attrs:{axis:0,keepDims:!1}});c.push(b),u.push(g),u.push(y),u.push(x),u.push(v),u.push(b)}const f=jee({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(h=>n.disposeIntermediateTensorInfo(h)),f}const jUe={kernelName:vB,backendName:"cpu",kernelFunc:UUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LUe=[O_e,h$e,R_e,U_e,v$e,L_e,Q_e,z_e,W_e,K_e,q_e,J_e,eOe,rOe,iOe,lOe,uOe,dOe,hOe,$_e,mOe,yOe,vOe,w$e,wOe,y$e,S$e,SOe,p$e,NOe,IOe,kOe,FOe,_Oe,DOe,POe,jOe,MOe,HOe,VOe,GOe,XOe,YOe,ZOe,eDe,nDe,sDe,oDe,aDe,lDe,cDe,ADe,hDe,B_e,mDe,B$e,SDe,N$e,BDe,I$e,FDe,$De,ODe,T$e,$$e,RDe,UDe,LDe,QDe,O$e,R$e,m$e,zDe,EOe,WDe,KDe,qDe,N_e,U$e,L$e,JDe,Q$e,eRe,rRe,iRe,lRe,uRe,dRe,fRe,z$e,pRe,gRe,xRe,bRe,CRe,BRe,ERe,W$e,kRe,$Re,DRe,K$e,q$e,URe,MRe,zRe,J$e,WRe,KRe,XRe,Lee,ZRe,I_e,t_e,tPe,rPe,iPe,aPe,g$e,fT,cPe,k_e,T_e,F_e,APe,fPe,pPe,gPe,xPe,vPe,wPe,c_e,SPe,kPe,FPe,DPe,A_e,PPe,jPe,MPe,d_e,_Re,zPe,WPe,KPe,qPe,JPe,eUe,nUe,sUe,p_e,iUe,g_e,x_e,aUe,cUe,AUe,fUe,pUe,C_e,dDe,gUe,xUe,bUe,CUe,BUe,EUe,Z$e,DUe,PUe,jUe,GRe];for(const t of LUe)xK(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZA={},db={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function MUe(t,e){ZA[t]=e}function Ta(t,e){if(!(t in ZA)||e!=null){const r=HUe(t,e);if(r!==null)ZA[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=ZA[t];return n==null||n.isContextLost()?(delete ZA[t],Ta(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),ZA[t])}function QUe(t){if(!he().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function HUe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??QUe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete ZA[t]},!1),he().getBool("SOFTWARE_WEBGL_ENABLED")&&(db.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",db)||n.getContext("experimental-webgl",db):n.getContext("webgl2",db)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var o0;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(o0||(o0={}));var to;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(to||(to={}));var es;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(es||(es={}));function Bv(t,e){return[e,t]}function zUe(t,e){return t*e}function fb(t){const e=ye(t),n=Math.ceil(e/4);return xk(n)}function cm(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function VUe(t,e){const[n,r]=cm(t,e);return n*r*4}function TR(t,e){const n=t;let r,s,i,o,a,l,c,u,A,d;return he().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,i=n.RGBA16F,o=n.RGBA32F,a=n.RED,c=4,u=1,A=n.HALF_FLOAT,d=n.FLOAT,l=n.RGBA8):(r=t.RGBA,s=t.RGBA,i=t.RGBA,o=n.RGBA,a=t.RGBA,c=4,u=4,A=e!=null?e.HALF_FLOAT_OES:null,d=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:A,textureTypeFloat:d}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function He(t,e){const n=e();return he().getBool("DEBUG")&&WUe(t),n}function WUe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+qUe(t,e))}const GUe=596e-10,KUe=65504;function XUe(t){return!!(he().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||GUe<Math.abs(t)&&Math.abs(t)<KUe)}function qUe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function hb(t,e){return _c(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function YUe(t,e){const n=_c(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(He(t,()=>t.shaderSource(n,e)),He(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function JUe(t,e){const n=_c(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(He(t,()=>t.shaderSource(n,e)),He(t,()=>t.compileShader(n)),he().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw Mee(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const ZUe=/ERROR: [0-9]+:([0-9]+):/g;function Mee(t,e){const n=ZUe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),i=s.length.toString().length+2,o=s.map((A,d)=>Ih((d+1).toString(),i)+A);let a=0;for(let A=0;A<o.length;A++)a=Math.max(o[A].length,a);const l=o.slice(0,r-1),c=o.slice(r-1,r),u=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Ih(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function eje(t){return _c(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function tje(t,e){if(He(t,()=>t.linkProgram(e)),!he().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function J4(t,e){if(He(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function nje(t,e){const n=_c(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),He(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function rje(t,e){const n=_c(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return He(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),He(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function sje(t){return _c(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function ije(t,e){const n=he().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function oje(t){return _c(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function E5(t,e,n,r,s,i,o){const a=t.getAttribLocation(e,n);return a===-1?!1:(He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),He(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,i,o)),He(t,()=>t.enableVertexAttribArray(a)),!0)}function aje(t,e,n){dje(t,n),He(t,()=>t.activeTexture(t.TEXTURE0+n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function lje(t,e,n){return _c(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function cje(t,e,n){return t.getUniformLocation(e,n)}function uje(t,e,n,r){He(t,()=>aje(t,e,r)),He(t,()=>t.uniform1i(n,r))}function Z4(t,e,n){He(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),He(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function I5(t,e){He(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),He(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function pb(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Aje(t,e))}function Aje(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function _c(t,e,n){const r=He(t,()=>e());if(r==null)throw new Error(n);return r}function dje(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function pp(t,e=2){return ye(t.slice(0,t.length-e))}function mp(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function mb(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[pp(t),...mp(t)]),e}function fje(t,e=!1){let n=he().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=he().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&he().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?S_(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=lA(t).newShape);let s=ye(t),i=null;t.length<=1&&s<=n?i=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const o=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||o)if(e){const a=pp(t);let l=2,c=2;t.length&&([l,c]=mp(t)),s=a*(l/2)*(c/2),i=xk(s).map(u=>u*2)}else i=xk(s);return i}function gb(t){return t%2===0}function k2(t,e){if(t=t.slice(-2),e=e.slice(-2),_t(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||gb(n)&&gb(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&gb(t[0])&&gb(e[0])}let eE,tE;function hje(t){if(eE==null){const e=Ta(t);eE=e.getParameter(e.MAX_TEXTURE_SIZE)}return eE}function pje(t){if(tE==null){const e=Ta(t);tE=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,tE)}function mje(t){if(t===0)return 0;let e;const n=Ta(t);return Do(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Do(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Do(t,e){return t.getExtension(e)!=null}function k5(t){try{if(Ta(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function gje(t){if(t===0)return!1;const e=Ta(t);if(t===1){if(!Do(e,"OES_texture_float"))return!1}else if(!Do(e,"EXT_color_buffer_float"))return!1;return pT(e)}function yje(t){if(t===0)return!1;const e=Ta(t);if(t===1){if(!Do(e,"OES_texture_float")||!Do(e,"WEBGL_color_buffer_float"))return!1}else{if(Do(e,"EXT_color_buffer_float"))return pT(e);const r="EXT_color_buffer_half_float";if(Do(e,r)){const s=e.getExtension(r);return xje(e,s)}return!1}return pT(e)}function pT(t){const e=TR(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),o}function xje(t,e){const n=TR(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}function vje(t){return t!==2?!1:Ta(t).fenceSync!=null}function Nv(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&M(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tt=he();tt.registerFlag("HAS_WEBGL",()=>tt.getNumber("WEBGL_VERSION")>0);tt.registerFlag("WEBGL_VERSION",()=>k5(2)?2:k5(1)?1:0);tt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);tt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>tt.get("WEBGL_VERSION")===2);tt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);tt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);tt.registerFlag("WEBGL_PACK",()=>tt.getBool("HAS_WEBGL"));tt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_CLIP",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_REDUCE",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_LAZILY_UNPACK",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_CONV_IM2COL",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>hje(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>pje(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=tt.getNumber("WEBGL_VERSION");return t===0?0:mje(t)});tt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>tt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!RK());tt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>gje(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>tt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:tt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));tt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>yje(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>vje(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>tt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);tt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});tt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>RK()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});tt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);tt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);tt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);tt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);tt.registerFlag("WEBGL_EXP_CONV",()=>!1);tt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>tt.getBool("IS_TEST"));tt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);tt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);tt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);tt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zs(){let t,e,n,r,s,i,o,a,l,c;return he().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",i="outputColor",o="out vec4 outputColor;",a=he().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",i="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:i,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gf(t,e,n="index"){const r=ot(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / ${s}`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s}`:`index -= ${t[i]} * ${s}`;return`${o}; ${a};`}).join("")}function a3(t,e,n="index"){const r=ot(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${o}; ${a};`}).join("")}function bje(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let i=n-3;i>=0;--i)s[i]=`(${s[i+1]} * ${r[i+1]})`;return s}function wje(t,e,n="index"){const r=t.map((i,o)=>o),s=bje(r,e);return s.map((i,o)=>{const a=`int ${t[o]} = ${n} / ${s[o]}`,l=o===s.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${s[o]}`:`index -= ${t[o]} * ${s[o]}`;return`${a}; ${l};`}).join("")}function FR(t){const e=ot(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function $R(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const Qee=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:Hee}=YNe;function Cje(t,e,n){const r=[];if(t.forEach(f=>{const h=ye(f.shapeInfo.logicalShape);if(f.shapeInfo.isUniform?r.push(`uniform float ${f.name}${h>1?`[${h}]`:""};`):(r.push(`uniform sampler2D ${f.name};`),r.push(`uniform int offset${f.name};`)),n.enableShapeUniforms){const{uniformShape:m}=_R(n.packedInputs,f.shapeInfo.logicalShape,f.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${f.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${f.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${f.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${f.name}Shape;`);break}r.push(`uniform ivec2 ${f.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(f=>{r.push(`uniform ${f.type} ${f.name}${f.arrayIndex?`[${f.arrayIndex}]`:""};`)});const s=r.join(`
`),i=t.map(f=>Sje(f,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,a=zs(),l=Eje(a);let c,u,A=Tje(a);return e.isPacked?(c=Bje(e.logicalShape,o,n.enableShapeUniforms),u=kje(a)):(c=Nje(e.logicalShape,o,n.enableShapeUniforms),u=Ije(a)),n.packedInputs&&(A+=Oje),[A,l,u,s,c,i,n.userCode].join(`
`)}function um(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Wje(t,e);case 1:return Kje(t,e);case 2:return qje(t,e);case 3:return Jje(t,e);case 4:return eLe(t,e);case 5:return tLe(t);case 6:return nLe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function zee(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return Vje(t);case 1:return Gje(t,e);case 2:return Xje(t,e);case 3:return Yje(t,e);default:return Zje(t,e)}}function Sje(t,e,n=!1,r){let s="";n?s+=zee(t,r):s+=um(t,r);const i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(n?s+=rLe(t,e):s+=sLe(t,e)),s}function Bje(t,e,n){switch(t.length){case 0:return Vee();case 1:return Dje(t,e,n);case 2:return Hje(t,e,n);case 3:return Pje(t,e,n);default:return jje(t,e,n)}}function Nje(t,e,n){switch(t.length){case 0:return Vee();case 1:return Rje(t,e,n);case 2:return zje(t,e,n);case 3:return Uje(t,e,n);case 4:return Lje(t,e,n);case 5:return Mje(t,e);case 6:return Qje(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function Eje(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function Ije(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function kje(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function Tje(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${Fje}
    ${$je}
    ${_je}
  `}const Fje=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,$je=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,_je=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Oje=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Vee(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function Dje(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function Rje(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function Pje(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),i=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function Uje(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${a3(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=gf(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function jje(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),i=s*Math.ceil(t[t.length-2]/2);let o=i,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)o*=t[t.length-c-1],a=`
      int b${c} = index / ${o};
      index -= b${c} * ${o};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${l});
    }
  `}function Lje(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${a3(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=gf(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Mje(t,e){const n=gf(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Qje(t,e){const n=gf(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Hje(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(_t(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function zje(t,e,n){return _t(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function yf(t){return`offset${t}`}function Vje(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=zs();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function Wje(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,i]=t.shapeInfo.texShape;if(s===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=yf(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function Gje(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,i=zs();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function Kje(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Am(t)}
      }
    `;const s=t.shapeInfo.texShape,i=s[0],o=s[1];if(o===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=yf(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function Xje(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=i[0],a=i[1],l=zs();if(i!=null&&_t(n,i))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function qje(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&_t(n,i)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const d=i[0],f=i[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=lA(n),l=o;if(l.length<n.length){const d=dm(t,l),f=["row","col"];return`
      ${um(d,e)}
      float ${s}(int row, int col) {
        return ${s}(${fm(f,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Am(t)}
      }
    `;const c=i[0],u=i[1],A=yf(r);return u===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${A}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${A}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${A}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${A}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${A};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${A};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function Yje(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const d=n.slice(1),f=[1,2],h=dm(t,d),m=["b","row","col"];return`
        ${zee(h,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${fm(m,f)});
        }
      `}const a=zs();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=o[0],c=o[1],u=Math.ceil(n[2]/2),A=u*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${A}, ${u}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function Jje(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],{newShape:a,keptDims:l}=lA(n),c=a;if(c.length<n.length){const m=dm(t,c),g=["row","col","depth"];return`
        ${um(m,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${fm(g,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${o}, 1)));
        ${Am(t)}
      }
    `;const u=t.shapeInfo.texShape,A=u[0],d=u[1],f=t.shapeInfo.flatOffset;if(d===i&&f==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${d}.0, ${A}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(d===o&&f==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${A}.0);
      return sampleTexture(${r}, uv);
    }
  `;const h=yf(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${h};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${o} + depth + ${h};
        vec2 uv = uvFromFlat(${A}, ${d}, index);
        return sampleTexture(${r}, uv);
      }
  `}function Zje(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=zs();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,o=i.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],A=Math.ceil(i[o-1]/2);let d=A*Math.ceil(i[o-2]/2),f="int b, int row, int col",h=`b * ${d} + (row / 2) * ${A} + (col / 2)`;for(let m=2;m<o-1;m++)f=`int b${m}, `+f,d*=i[o-m-1],h=`b${m} * ${d} + `+h;return`
    vec4 ${r}(${f}) {
      int index = ${h};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${s.texture2D}(${n}, uv);
    }
  `}function eLe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,a=n[1]*o,{newShape:l,keptDims:c}=lA(n);if(l.length<n.length){const x=dm(t,l),v=["row","col","depth","depth2"];return`
      ${um(x,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${fm(v,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${i}, 1)));
        ${Am(t)}
      }
    `;const u=t.shapeInfo.flatOffset,A=t.shapeInfo.texShape,d=A[0],f=A[1],h=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(f===a&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${h}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(f===i&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;const y=yf(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${h}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${d}, ${f}, index + ${y});
      return sampleTexture(${r}, uv);
    }
  `}function tLe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],i=e[3]*s,o=e[2]*i,a=e[1]*o,{newShape:l,keptDims:c}=lA(e);if(l.length<e.length){const m=dm(t,l),g=["row","col","depth","depth2","depth3"];return`
      ${um(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${fm(g,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${i}, ${s})) +
          depth3;
        ${Am(t)}
      }
    `;const u=t.shapeInfo.flatOffset,A=t.shapeInfo.texShape,d=A[0],f=A[1];if(f===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(f===s&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;const h=yf(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${i} +
          depth2 * ${s} + depth3 + ${h};
      vec2 uv = uvFromFlat(${d}, ${f}, index);
      return sampleTexture(${n}, uv);
    }
  `}function nLe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:i}=lA(e);if(s.length<e.length){const g=dm(t,s),y=["row","col","depth","depth2","depth3","depth4"];return`
      ${um(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${fm(y,i)});
      }
    `}const o=e[5],a=e[4]*o,l=e[3]*a,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${Am(t)}
      }
    `;const A=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1];if(h===u&&A==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===o&&A==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=yf(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${m};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Am(t){const e=t.name,n=ye(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function rLe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=Hee(t.shapeInfo.logicalShape,e.logicalShape),l=an(o),c=o-i;let u;const A=["x","y","z","w","u","v"];i===0?u="":o<2&&a.length>=1?u="coords = 0;":u=a.map(x=>`coords.${A[x+c]} = 0;`).join(`
`);let d="";o<2&&i>0?d="coords":d=t.shapeInfo.logicalShape.map((x,v)=>`coords.${A[v+c]}`).join(", ");let f="return outputValue;";const m=ye(t.shapeInfo.logicalShape)===1,y=ye(e.logicalShape)===1;if(i===1&&!m&&!y)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!y)o===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(a.length){const x=i-2,v=i-1;a.indexOf(x)>-1&&a.indexOf(v)>-1?f="return vec4(outputValue.x);":a.indexOf(x)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(v)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${d});
      ${f}
    }
  `}function sLe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=e.texShape,o=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&_t(o,i))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=an(l),u=Hee(t.shapeInfo.logicalShape,e.logicalShape),A=l-a;let d;const f=["x","y","z","w","u","v"];a===0?d="":l<2&&u.length>=1?d="coords = 0;":d=u.map(m=>`coords.${f[m+A]} = 0;`).join(`
`);let h="";return l<2&&a>0?h="coords":h=t.shapeInfo.logicalShape.map((m,g)=>`coords.${f[g+A]}`).join(", "),`
    float ${s}() {
      ${c} coords = getOutputCoords();
      ${d}
      return get${r}(${h});
    }
  `}function an(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function _R(t,e,n){const{newShape:r,keptDims:s}=lA(e),i=e.length,o=t&&i===3&&e[0]===1,a=o?e.slice(1):r,l=!t&&i>1&&!_t(e,n)&&r.length<i||o;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:s}}function dm(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function fm(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iLe(t,e,n,r){const s=n.map((u,A)=>{const d={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(d.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[A],shapeInfo:d}}),i=s.map(u=>u.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=Cje(s,o,e),l=JUe(t.gl,a),c=t.createProgram(l);return he().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:o},Wee(t,e,c)))}function Wee(t,e,n){const r=[],s=[];let i,o,a,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),he().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const A of e.variableNames){const d={name:A,uniform:t.getUniformLocation(n,A,u),offset:t.getUniformLocation(n,`offset${A}`,u)};e.enableShapeUniforms&&(d.shape=t.getUniformLocation(n,`${A}Shape`,u),d.texShape=t.getUniformLocation(n,`${A}TexShape`,u)),r.push(d)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",u),a=t.getUniformLocation(n,"outShapeStrides",u),o=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const A of e.customUniforms)s.push(t.getUniformLocation(n,A.name,u));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:o}}function T5(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,i=e[r],o=i.shape;if(!_t(s,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${o} must match`);if(n.isUniform&&i.isUniform)return;const a=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!_t(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function oLe(t,e,n,r,s){e.program.enableShapeUniforms||(T5(e.inShapeInfos,n),T5([e.outShapeInfo],[r]));const i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):t.setOutputMatrixTexture(i.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),he().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:A,shape:d,texShape:f}=e.variablesLocations[l];if(d){const{uniformShape:h}=_R(e.program.packedInputs,c.shape,c.texData.texShape);switch(h.length){case 1:t.gl.uniform1iv(d,new Int32Array(h));break;case 2:t.gl.uniform2iv(d,new Int32Array(h));break;case 3:t.gl.uniform3iv(d,new Int32Array(h));break;case 4:t.gl.uniform4iv(d,new Int32Array(h));break}}if(f&&t.gl.uniform2i(f,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(ye(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let h=c.uniformValues;h instanceof Float32Array||(h=new Float32Array(h)),t.gl.uniform1fv(u,h)}continue}c.texData.slice!=null&&A!=null&&t.gl.uniform1i(A,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=ot(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],A=s[l];if(c.type==="float")t.gl.uniform1fv(u,A);else if(c.type==="vec2")t.gl.uniform2fv(u,A);else if(c.type==="vec3")t.gl.uniform3fv(u,A);else if(c.type==="vec4")t.gl.uniform4fv(u,A);else if(c.type==="int")t.gl.uniform1iv(u,A);else if(c.type==="ivec2")t.gl.uniform2iv(u,A);else if(c.type==="ivec3")t.gl.uniform3iv(u,A);else if(c.type==="ivec4")t.gl.uniform4iv(u,A);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function aLe(t,e,n){let r="";e.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:A}=_R(t.packedInputs,o.shape,l);let d="",f="",h="";if(u.length===1&&t.packedInputs){const w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];d=`${w[0]>1}_${w[1]>1}`}else if(u.length===2&&!t.packedInputs)f=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const w=ot(u);h=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}const m=o.shape.length,g=u.length===2&&_t(o.shape,l),y=ye(o.shape)===1,x=lp(o.shape,n.shape),v=!t.packedInputs&&m===n.shape.length&&_t(l,n.texData.texShape),b=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${m}_${v}_${c?A:""}_${u.length}_${y}_${x}_${g}_${d}_${f}_${h}_${b}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${a}`}});const s=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+s+`${he().getNumber("WEBGL_VERSION")}`,i}function Cs(t){return he().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lLe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=o0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=zs();this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?a3(["r","c","d"],e):gf(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cLe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=o0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=zs();this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?a3(["r","c","d"],e):gf(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uLe{constructor(e){this.variableNames=["A"],this.outTexUsage=to.DOWNLOAD;const n=zs();this.outputShape=e,this.userCode=`
      ${Qee}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ALe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=to.DOWNLOAD;const n=zs();this.outputShape=e,this.userCode=`
      ${Qee}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dLe={R:0,G:1,B:2,A:3};class F5{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=zs();this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++){const l=r[a];o+=`
          if(offset == ${a}) {
            result = values[${dLe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?$R():FR(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${o}
        }
        ${s.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fLe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=zs();this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length);let s="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;s+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?$R():FR(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hLe(t){const e=zs(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return YUe(t,n)}function pLe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return nje(t,e)}function mLe(t){const e=new Uint16Array([0,1,2,2,1,3]);return rje(t,e)}function Ev(t,e,n,r,s,i){ije(e,n);const o=sje(t),a=t.TEXTURE_2D;return He(t,()=>t.bindTexture(a,o)),He(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),He(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),He(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),He(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),he().getNumber("WEBGL_VERSION")===1?He(t,()=>t.texImage2D(a,0,r,e,n,0,s,i,null)):He(t,()=>t.texStorage2D(a,1,r,e,n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function Gee(t){return t.internalFormatFloat}function gLe(t,e,n,r){const[s,i]=Bv(e,n);return Ev(t,s,i,Gee(r),r.textureFormatFloat,t.FLOAT)}function Kee(t){return t.internalFormatHalfFloat}function yLe(t,e,n,r){const[s,i]=Bv(e,n);return Ev(t,s,i,Kee(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function Xee(t){return t.downloadTextureFormat}function xLe(t,e,n,r){const[s,i]=Bv(e,n);return Ev(t,s,i,Xee(r),t.RGBA,t.UNSIGNED_BYTE)}function qee(t){return t.internalFormatPackedFloat}function vLe(t,e,n,r){const[s,i]=cm(e,n);return Ev(t,s,i,qee(r),t.RGBA,t.FLOAT)}function Yee(t){return t.internalFormatPackedHalfFloat}function bLe(t,e,n,r){const[s,i]=cm(e,n);return Ev(t,s,i,Yee(r),t.RGBA,r.textureTypeHalfFloat)}function wLe(t,e,n){return He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),E5(t,e,"clipSpacePos",n,3,20,0)&&E5(t,e,"uv",n,2,20,12)}function CLe(t,e,n,r,s,i){He(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,a,l;s instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,l=i.internalFormatPackedFloat),o.set(s),he().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,o)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,o)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function SLe(t,e,n){He(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?he().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):he().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function BLe(t,e,n,r){const s=t.createBuffer();He(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const a=4*4*e*n;return He(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),He(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),He(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function NLe(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function ELe(t,e,n,r){const[s,i]=Bv(e,n),o=4,a=new Uint8Array(zUe(e*n,o));return He(t,()=>t.readPixels(0,0,s,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function ILe(t,e,n,r,s,i,o,a){const l=t,c=new Float32Array(VUe(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function kLe(t,e,n){const r=new Float32Array(e*n*4);return He(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nE{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=he().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,MUe(n,e)):this.gl=Ta(n),e=this.gl,he().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>He(i,()=>i.createVertexArray()),this.bindVertexArray=o=>He(i,()=>i.bindVertexArray(o)),this.deleteVertexArray=o=>He(i,()=>i.deleteVertexArray(o)),this.getVertexArray=()=>He(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>He(e,()=>i.createVertexArrayOES()),this.bindVertexArray=o=>He(e,()=>i.bindVertexArrayOES(o)),this.deleteVertexArray=o=>He(e,()=>i.deleteVertexArrayOES(o)),this.getVertexArray=()=>He(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),he().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=hb(this.gl,i),Do(this.gl,o))this.textureHalfFloatExtension=hb(this.gl,o);else if(he().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Do(this.gl,s))this.colorBufferHalfFloatExtension=hb(this.gl,s);else if(he().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Do(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Do(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=pLe(this.gl),this.indexBuffer=mLe(this.gl),this.framebuffer=oje(this.gl),this.textureConfig=TR(this.gl,this.textureHalfFloatExtension)}get debug(){return he().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;He(e,()=>e.finish()),He(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),He(e,()=>e.deleteFramebuffer(this.framebuffer)),He(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),He(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),He(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),gLe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),yLe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),xLe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),SLe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),CLe(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),bLe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),vLe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(I5(this.gl,this.framebuffer),this.outputTexture=null),He(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>ELe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,i,o){return ILe(this.gl,e,n,r,s,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return NLe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=BLe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(he().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,i=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=s.clientWaitSync(i,0,0);return o===s.ALREADY_SIGNALED||o===s.CONDITION_SATISFIED},n=i}else he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>kLe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=hLe(n));const r=eje(n);He(n,()=>n.attachShader(r,this.vertexShader)),He(n,()=>n.attachShader(r,e)),tje(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&J4(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;He(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),wLe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(He(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&J4(this.gl,this.program),He(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?lje(this.gl,e,n):cje(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),He(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),uje(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,i]=cm(n,r);this.setOutputMatrixTextureDriver(e,s,i)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&J4(this.gl,this.program),pb(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}He(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),He(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=hb(this.gl,he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await t6(()=>this.disposed||this.isQueryAvailable(e,he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=TLe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in he().platform&&(r=he().platform.setTimeoutCustom.bind(he().platform)),t6(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),Z4(this.gl,e,this.framebuffer),this.debug&&pb(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(Z4(this.gl,this.outputTexture,this.framebuffer),this.debug&&pb(this.gl)):I5(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;Z4(s,e,this.framebuffer),this.debug&&pb(s),this.outputTexture=e,He(s,()=>s.viewport(0,0,n,r)),He(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),He(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function TLe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:FLe,bincountImpl:Jee,bincountReduceImpl:$Le,bitwiseAndImpl:_Le,castImpl:OLe,ceilImpl:DLe,concatImpl:RLe,equalImpl:PLe,expImpl:ULe,expm1Impl:jLe,floorImpl:LLe,gatherNdImpl:MLe,gatherV2Impl:QLe,greaterImpl:HLe,greaterEqualImpl:zLe,lessImpl:VLe,lessEqualImpl:WLe,linSpaceImpl:GLe,logImpl:KLe,maxImpl:XLe,maximumImpl:qLe,minimumImpl:YLe,multiplyImpl:JLe,negImpl:ZLe,notEqualImpl:eMe,prodImpl:tMe,raggedGatherImpl:nMe,raggedRangeImpl:rMe,raggedTensorToTensorImpl:sMe,rangeImpl:iMe,rsqrtImpl:oMe,scatterImpl:aMe,sigmoidImpl:lMe,simpleAbsImpl:Zee,sliceImpl:cMe,sparseFillEmptyRowsImpl:uMe,sparseReshapeImpl:AMe,sparseSegmentReductionImpl:ete,sqrtImpl:dMe,staticRegexReplaceImpl:fMe,stridedSliceImpl:hMe,stringNGramsImpl:pMe,stringSplitImpl:mMe,stringToHashBucketFastImpl:gMe,subImpl:yMe,tileImpl:xMe,topKImpl:vMe,transposeImpl:OR,uniqueImpl:bMe}=S_e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tte(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Us(t,e){return e===1?[t]:tte(t,e)}function wMe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CMe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Cs(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Us("rc",this.rank),r=an(this.rank),s=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let i=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)i=`${e[e.length-1-o]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nte{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length);let r="";for(let s=0;s<4;s++){let i="thisRC = rc;";s%2===1&&(i+="thisRC.z += 1;"),s>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${SMe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?$R():FR(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function SMe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?wje(["r","c","d"],"inputShape"):gf(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BMe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=_5(n,r),i=O5(e,s,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=$5(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[i].pop();return this.usedTextures[i].push(l),l}let a;return s===es.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===es.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===es.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===es.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===es.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const i=_5(r,s),o=O5(n,i,s);o in this.freeTextures||(this.freeTextures[o]=[]);const a=$5(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=he().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[o],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function NMe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function $5(t,e,n,r,s){const i=EMe(e,r);let o;if(s){const[l,c]=cm(t[0],t[1]);o=l*c}else{const[l,c]=Bv(t[0],t[1]);o=l*c}const a=NMe(n,i);return o*a}function EMe(t,e){switch(t){case es.PACKED_2X2_FLOAT32:return qee(e);case es.PACKED_2X2_FLOAT16:return Yee(e);case es.UNPACKED_FLOAT32:return Gee(e);case es.UNPACKED_FLOAT16:return Kee(e);case es.PACKED_4X1_UNSIGNED_BYTE:return Xee(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function IMe(t){return he().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?es.PACKED_2X2_FLOAT32:es.UNPACKED_FLOAT32:t?es.PACKED_2X2_FLOAT16:es.UNPACKED_FLOAT16}function _5(t,e){if(t===to.UPLOAD)return es.PACKED_2X2_FLOAT32;if(t===to.RENDER||t==null)return IMe(e);if(t===to.DOWNLOAD||t===to.PIXELS)return es.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function O5(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class il{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Yo="if (isnan(x)) return x;",kMe="return x;",D5="return abs(x);",TMe="return (x >= 0.0) ? x : (exp(x) - 1.0);",FMe=Yo+`
  return (x < 0.0) ? 0.0 : x;
`,$Me=Yo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Jc="return x;",_Me="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OMe="return x;",DMe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,RMe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,PMe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,UMe="return 1.0 / (1.0 + exp(-1.0 * x));";class xu{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jMe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length);const n=e.length,r=Us("rc",n),s=an(n),i=wMe(n,r),o=r.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LMe=gD,MMe=1e-7,QMe=1e-4,yb={};function HMe(t){return t in yb||(yb[t]={}),yb[t]}const zMe=he().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),VMe=600;function WMe(){return he().global.screen==null?1024:he().global.screen.height*he().global.screen.width*window.devicePixelRatio*VMe/1024/1024}class l3 extends C_{nextDataId(){return l3.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!he().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof nE)n=e;else{const r=Ta(he().getNumber("WEBGL_VERSION"),e);n=new nE(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Ta(he().getNumber("WEBGL_VERSION"));n=new nE(r),this.binaryCache=HMe(he().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new BMe(this.gpgpu),this.numMBBeforeWarning=WMe(),this.texData=new dK(this,Ka())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,i,o){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,i]},l.texShape=[s,i];const c=mb(n),u=new F5(c,!1,o),A=this.runWebGLProgram(u,[a],r,[[s,i]]);return A.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),A.dataId}write(e,n,r){if((he().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||he().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:to.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,i){if(he().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:to.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:i,slice:o,shape:a,isPacked:l}=n;if(o!=null){let d;l?d=new xu(a,Jc):d=new il(a,Jc);const f=this.runWebGLProgram(d,[{dataId:e,shape:a,dtype:s}],s),h=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),h}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=Js());let A;if(s==="complex64"){const d=this.readSync(i.real.dataId),f=this.readSync(i.imag.dataId);A=yc(d,f)}else A=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Js()-u),this.convertAndCacheOnCPU(e,A)}async read(e){if(this.pendingRead.has(e)){const h=this.pendingRead.get(e);return new Promise(m=>h.push(m))}const n=this.texData.get(e),{values:r,shape:s,slice:i,dtype:o,complexTensorInfos:a,isPacked:l}=n;if(i!=null){let h;l?h=new xu(s,Jc):h=new il(s,Jc);const m=this.runWebGLProgram(h,[{dataId:e,shape:s,dtype:o}],o),g=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(he().getBool("DEBUG")&&!he().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&he().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(o!=="complex64"&&he().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const h=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(h.texture.texture,...fb(s))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let A;if(o==="complex64"){const h=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=h[0],g=h[1];A=yc(m,g)}else if(c==null)A=this.getValuesFromTexture(e);else{const h=ye(s);A=this.gpgpu.downloadFloat32MatrixFromBuffer(c,h)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const h=this.gpgpu.gl;He(h,()=>h.deleteBuffer(c))}const d=this.convertAndCacheOnCPU(e,A),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(h=>h(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Ka().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:i,slice:o,dtype:a,isPacked:l,texture:c}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let f;l?f=new xu(i,Jc):f=new il(i,Jc);const h=this.runWebGLProgram(f,[{dataId:e,shape:i,dtype:a}],a),m=this.readToGPU(h,n);return this.disposeIntermediateTensorInfo(h),m}if(c==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),A=Ka().makeTensorFromTensorInfo(u),d=this.texData.get(u.dataId);return Object.assign({tensorRef:A},d.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>Vu(s));return St(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return St(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!XUe(r))throw he().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),i=ye(n);if(he().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const d=this.decode(e),f=this.texData.get(d.dataId),h=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...fb(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(d),h}const o=he().getBool("WEBGL_PACK")&&s===!0,a=o?mb(n):n,l=o?new ALe(a):new uLe(a),c=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),A=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(c),A}timerAvailable(){return he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=Hd(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=Hd(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);a.kernelMs=S1e(l),a.getExtraProfileInfo=()=>l.map((c,u)=>({name:o[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Js(),endMs:null}}endTimer(e){return he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Js(),e)}async getQueryTime(e){if(he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:i,isPacked:o,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,i,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=zMe){return he().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&ye(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Ji("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return LMe(e.shape,n)}packedUnaryOp(e,n,r){const s=new xu(e.shape,n),i=this.compileAndRun(s,[e],r);return Ka().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=Zee(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(he().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,D5,e.dtype);const n=new il(e.shape,D5),r=this.compileAndRun(n,[e]);return Ka().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&cx(r[0])){const i=r.map(o=>Ou(o));s=this.write(i,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return Ka().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new jMe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new CMe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[pp(e.shape),...mp(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},i=[pp(n),...mp(n)],o=new nte(i,r),a=!0,l=[r],c=this.runWebGLProgram(o,[s],e.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:i,dtype:o}=r;if(n!=null){const d=ye(i),f=n[0]*n[1]*4;M(d<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=mb(i);let l;s?l=new cLe(a):l=new lLe(a);const c=!0,u=[n??fb(a)],A=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],o,u,c,n);return{dtype:o,shape:i,dataId:A.dataId}}runWebGLProgram(e,n,r,s,i=!1,o){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===o0.DENSE){const y=o??fb(e.outputShape);l.texShape=y.map(x=>x*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),ye(a.shape)===0)return l.values=rs(a.dtype,0),a;const c=[],u=n.map(y=>{if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let x=this.texData.get(y.dataId);if(x.texture==null){if(!e.packedInputs&&ye(y.shape)<=he().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:x.values};e.packedInputs&&(x.isPacked=!0,x.shape=y.shape)}if(this.uploadToGPU(y.dataId),!!x.isPacked!=!!e.packedInputs)y=x.isPacked?this.unpackTensor(y):this.packTensor(y),c.push(y),x=this.texData.get(y.dataId);else if(x.isPacked&&!k2(x.shape,y.shape)){const v=y,b=y.shape;y.shape=x.shape,y=this.packedReshape(y,b),c.push(y),x=this.texData.get(y.dataId),v.shape=b}return{shape:y.shape,texData:x,isUniform:!1}});this.uploadToGPU(a.dataId);const A={shape:a.shape,texData:l,isUniform:!1},d=aLe(e,u,A),f=this.getAndSaveBinary(d,()=>iLe(this.gpgpu,e,u,A)),h=this.activeTimers!=null;let m;h&&(m=this.startTimer()),he().get("ENGINE_COMPILE_ONLY")||oLe(this.gpgpu,f,u,A,s),c.forEach(y=>this.disposeIntermediateTensorInfo(y)),h&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const g=he().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){const y=Js();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!he().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const y=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),y}return a}compileAndRun(e,n,r,s,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(he().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Ae(()=>{if(!he().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=he().getBool("DEBUG");he().set("DEBUG",!1);const n=this.abs(at(1e-8)).dataSync()[0];if(he().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?MMe:QMe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:i,texture:o,usage:a,isPacked:l}=n;if(o!=null)return;const c=this.activeTimers!=null;let u;c&&(u=Js());let A=n.texShape;if(A==null&&(A=fje(r,l),n.texShape=A),i!=null){const d=mb(r);let f,h=A[1],m=A[0];const g=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!g)&&([h,m]=cm(A[0],A[1])),l?f=new fLe(d,g):f=new F5(d,g);const y=g?[m,h]:A,x=this.makeTensorInfo(y,s),v=this.texData.get(x.dataId);g?v.usage=to.PIXELS:v.usage=to.UPLOAD,v.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),h,m,i);const b=[[m,h]],C=this.runWebGLProgram(f,[x],s,b,!0),B=this.texData.get(C.dataId);n.texShape=B.texShape,n.isPacked=B.isPacked,n.usage=B.usage,he().get("ENGINE_COMPILE_ONLY")?this.disposeData(C.dataId):(n.texture=B.texture,n.values=null,this.texData.delete(C.dataId)),this.disposeIntermediateTensorInfo(x),c&&(this.uploadWaitMs+=Js()-u)}else{const d=this.acquireTexture(A,a,s,l);n.texture=d}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=GMe(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*t2(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await $q(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(Mee(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:i,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:l}=Wee(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=i,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:i,width:o,channels:a}=e,l=Ka().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(s,n,r,i,o,a);return Ka().makeTensorFromDataId(c,n,r,l)}}l3.nextDataId=0;function GMe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */PK()&&LK("webgl",()=>new l3,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DR=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class tf{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=bt(n,r),this.enableShapeUniforms=Cs(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xf=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class hm{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=bt(n,r);const i=this.outputShape.length;this.enableShapeUniforms=Cs(i);let o="";if(s)if(i===0||ye(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${an(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Us("coords",i);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ui(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const KMe={kernelName:Tx,backendName:"webgl",kernelFunc:Ui};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xA(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),a=Ui({inputs:{x:r},backend:n}),l=Ui({inputs:{x:s},backend:n});return o.complexTensorInfos={real:a,imag:l},i}const XMe={kernelName:__,backendName:"webgl",kernelFunc:xA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rte="return (a < 0.) ? b * a : a;",ste=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function qMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r,o=n.makeTensorInfo([],"float32",cA(i,"float32")),a=he().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hm(ste,s.shape,o.shape):new tf(rte,s.shape,o.shape),l=n.runWebGLProgram(a,[s,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const YMe={kernelName:MS,backendName:"webgl",kernelFunc:qMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ite="return (a < 0.) ? b * a : a;",ote=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function JMe(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,i=he().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hm(ote,r.shape,s.shape):new tf(ite,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],"float32")}const ZMe={kernelName:oB,backendName:"webgl",kernelFunc:JMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pm="if (isnan(x)) return x;";function Qt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:i})=>{const{x:o}=s,a=i,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const A=a.texData.get(o.dataId),d=n(A.values,l);return a.makeTensorInfo(o.shape,l,d)}const c=he().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new xu(o.shape,e):u=new il(o.shape,t),a.runWebGLProgram(u,[o],l)}}function cs({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:i}){return({inputs:o,backend:a})=>{const{a:l,b:c}=o,u=a;if(r&&l.dtype==="complex64"){const h=u.texData.get(l.dataId),m=u.texData.get(c.dataId),[g,y]=[[h.complexTensorInfos.real,m.complexTensorInfos.real],[h.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(v=>{const[b,w]=v,C={dataId:b.dataId,dtype:b.dtype,shape:l.shape},B={dataId:w.dataId,dtype:w.dtype,shape:c.shape},S=new tf(t,l.shape,c.shape);return u.runWebGLProgram(S,[C,B],Di(b.dtype,w.dtype))}),x=xA({inputs:{real:g,imag:y},backend:u});return u.disposeIntermediateTensorInfo(g),u.disposeIntermediateTensorInfo(y),x}const A=i||Di(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&s!=null){const h=u.texData.get(l.dataId).values,m=u.texData.get(c.dataId).values,g=l.dtype==="string"?xc(h):h,y=l.dtype==="string"?xc(m):m,[x,v]=s(l.shape,c.shape,g,y,A),b=u.makeTensorInfo(v,A),w=u.texData.get(b.dataId);return w.values=x,b}const d=he().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return d?f=new hm(e,l.shape,c.shape,n):f=new tf(t,l.shape,c.shape),u.runWebGLProgram(f,[l,c],A)}}function a0(t,e=!1){if(t==="linear")return e?OMe:kMe;if(t==="relu")return e?RMe:FMe;if(t==="elu")return e?DMe:TMe;if(t==="relu6")return e?PMe:$Me;if(t==="prelu")return e?ote:ite;if(t==="leakyrelu")return e?ste:rte;if(t==="sigmoid")return e?UMe:_Me;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ate{constructor(e,n,r,s=!1,i=!1,o=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Cs(this.outputShape.length);const u=s?e[1]:e[2],A=Math.ceil(u/2),d=s?"i * 2, rc.y":"rc.y, i * 2",f=i?"rc.z, i * 2":"i * 2, rc.z",h=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",y="";a&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,y="result = activation(result);");const x=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let v="rc.x",b="rc.x";e[0]<n[0]?v=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(b=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${A}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${v};
        int batchB = ${b};
        for (int i = 0; i < ${A}; i++) {
          vec4 a = getMatrixA(batchA, ${d});
          vec4 b = getMatrixB(batchB, ${f});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${h[0]} * ${m[0]});
          result += (${h[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${x}

        ${y}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R5={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class P5{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=bt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U5="return a * b;";function RR(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=Di(r.dtype,s.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),c=new P5(R5.REAL,r.shape,s.shape),u=new P5(R5.IMAG,r.shape,s.shape),A=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],d=n.runWebGLProgram(c,A,"float32"),f=n.runWebGLProgram(u,A,"float32"),h=xA({inputs:{real:d,imag:f},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),h}if(n.shouldExecuteOnCPU([r,s])){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),[c,u]=JLe(r.shape,s.shape,a.values,l.values,i),A=n.makeTensorInfo(u,i),d=n.texData.get(A.dataId);return d.values=c,A}let o;return he().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new hm(U5,r.shape,s.shape):o=new tf(U5,r.shape,s.shape),n.runWebGLProgram(o,[r,s],i)}const e6e={kernelName:jx,backendName:"webgl",kernelFunc:RR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t6e(t,e,n){const r=[pp(t.shape),...mp(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},i=[pp(e),...mp(e)],o=new nte(i,r),a=!0,l=[r],c=n.runWebGLProgram(o,[s],t.dtype,l,a);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Le(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,o=n,a=ye(s.shape),l=fK(i,a),c=ye(l);M(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=o.texData.get(s.dataId);return u.isPacked&&!k2(s.shape,l)&&!(u.texture!==null&&k2(u.shape,l))?t6e(s,l,o):(o.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const n6e={kernelName:lB,backendName:"webgl",kernelFunc:Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j5{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];const a=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const A=1/n;c=`sumValue += dot(values * ${sp(A)?A.toPrecision(2):A}, ones);`}let u="";i%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r6e{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,A=r%4;let d=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";n==="all"?(a="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(a="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let h="";i%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${u};
        if (${A===1}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${A===2}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${A===3}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${d}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s6e(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=WB(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function vf(t,e,n,r){const s=s6e(t.shape);let i=t;for(let o=0;o<s.length;o++){const{inSize:a,windowSize:l,outSize:c}=s[o];let u,A;n==="mean"?u=o===0?new j5({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new j5({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new r6e({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},n),A=i,i=r.runWebGLProgram(u,[i],e),A.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(A)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i6e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const s=an(this.rank),i=o6e(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function o6e(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a6e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[n[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=an(this.rank),i=tte("rc",this.rank),o=new Array(this.rank);for(let u=0;u<n.length;u++)o[n[u]]=i[u];const a=`vec2(${o.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3(t,e,n){const r=he().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new a6e(t.shape,e):new i6e(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l6e(t,e,n,r){const s=e,i=t.shape.length,o=kt(s,t.shape);let a=o;const l=zn(a,i),c=l!=null;let u=t;c&&(u=c3(t,l,r),a=ar(a.length,i)),as("sum",a,i);const[A,d]=Wr(u.shape,a);let f=A;n&&(f=or(A,o));const h=ye(d),g=ye(t.shape)/h,y=Le({inputs:{x:u},attrs:{shape:[g,h]},backend:r}),x=$O(t.dtype),v=vf(y,x,"sum",r),b=Le({inputs:{x:v},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(v),c&&r.disposeIntermediateTensorInfo(u),b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u3(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;return l6e(s,i,o,n)}const c6e={kernelName:hB,backendName:"webgl",kernelFunc:u3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qs(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:i}=r,o=n,a=s.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=s.shape[i[u]];let c;if(o.shouldExecuteOnCPU([s])){const A=o.texData.get(s.dataId).values,d=OR(A,s.shape,s.dtype,i,l);c=o.makeTensorInfo(l,s.dtype);const f=o.texData.get(c.dataId);f.values=d}else c=c3(s,i,o);return c}const u6e={kernelName:kh,backendName:"webgl",kernelFunc:Qs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lte=1e3;function T2({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,A=n?t.shape[c-2]:t.shape[c-1],d=r?e.shape[u-1]:e.shape[u-2],f=n?t.shape[c-1]:t.shape[c-2],h=r?e.shape[u-2]:e.shape[u-1],m=t.shape.slice(0,-2),g=e.shape.slice(0,-2),y=ye(m),x=ye(g),b=bt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,h]);M(A===d,()=>`Error in matMul: inner shapes (${A}) and (${d}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=n?[y,A,f]:[y,f,A],C=r?[x,h,d]:[x,d,h],B=Le({inputs:{x:t},backend:s,attrs:{shape:w}}),S=Le({inputs:{x:e},backend:s,attrs:{shape:C}}),N=[B,S],k=Math.max(y,x),O=n?B.shape[1]:B.shape[2],U=i!=null,P=o!=null,V=l==="leakyrelu",W=l!=null?a0(l,!0):null,L=U||P||V||W!=null;let G;if((f===1||h===1)&&O>lte&&L===!1){let j=B,K=S;n&&(j=Qs({inputs:{x:B},backend:s,attrs:{perm:[0,2,1]}}),N.push(j)),r&&(K=Qs({inputs:{x:S},backend:s,attrs:{perm:[0,2,1]}}),N.push(K));const Y=h!==1,J=h===1;let ae=j;Y&&(ae=Le({inputs:{x:j},backend:s,attrs:{shape:[k,O,1]}}),N.push(ae));const ue=h===1?2:1;let le=K;J&&(le=Le({inputs:{x:K},backend:s,attrs:{shape:[k,1,O]}}),N.push(le));const fe=RR({inputs:{a:ae,b:le},backend:s});G=u3({inputs:{x:fe},backend:s,attrs:{axis:ue,keepDims:!0}}),N.push(fe)}else{const j=Di(t.dtype,e.dtype),K=new ate(w,C,[k,f,h],n,r,U,W,P,V),Y=[B,S];if(i!=null&&Y.push(i),P&&Y.push(o),V){const J=s.makeTensorInfo([],"float32",cA(a,"float32"));Y.push(J),N.push(J)}G=s.runWebGLProgram(K,Y,j)}const _=Le({inputs:{x:G},backend:s,attrs:{shape:b}});N.push(G);for(const j of N)s.disposeIntermediateTensorInfo(j);return _}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A6e(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:A}=r;return T2({a:s,b:i,transposeA:l,transposeB:c,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:A,activation:u})}const d6e={kernelName:n2,backendName:"webgl",kernelFunc:A6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L5="return abs(x);";function f6e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),o=Zee(i.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let s;return he().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new xu(r.shape,L5):s=new il(r.shape,L5),n.runWebGLProgram(s,[r],r.dtype)}const h6e={kernelName:xS,backendName:"webgl",kernelFunc:f6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p6e=Yo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,m6e=Qt({opSnippet:p6e}),g6e={kernelName:ux,backendName:"webgl",kernelFunc:m6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y6e=Yo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,x6e=Qt({opSnippet:y6e}),v6e={kernelName:Ax,backendName:"webgl",kernelFunc:x6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M5="return a + b;",b6e=cs({opSnippet:M5,packedOpSnippet:M5,supportsComplex:!0,cpuKernelImpl:FLe}),w6e={kernelName:nm,backendName:"webgl",kernelFunc:b6e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C6e{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S6e{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aw(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Ui({inputs:{x:r[0]},backend:n});if(r.length>he().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=aw({inputs:r.slice(0,l),backend:n}),u=aw({inputs:r.slice(l),backend:n});return aw({inputs:[c,u],backend:n})}const s=r.map(l=>l.dtype).reduce((l,c)=>Di(l,c)),i=r.map(l=>l.shape),a=he().getBool("WEBGL_PACK")?new S6e(r[0].shape,i):new C6e(r[0].shape,i);return n.runWebGLProgram(a,r,s)}const B6e={kernelName:vS,backendName:"webgl",kernelFunc:aw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=kt(i,s.shape);let c=l;const u=zn(c,a);let A=s;u!=null&&(A=Qs({inputs:{x:s},backend:n,attrs:{perm:u}}),c=ar(c.length,a)),as("all",c,a);const[d,f]=Wr(A.shape,c),h=ye(f),m=Le({inputs:{x:A},backend:n,attrs:{shape:[-1,h]}}),g=vf(m,m.dtype,"all",n);let y;if(o){const x=or(d,l);y=Le({inputs:{x:g},backend:n,attrs:{shape:x}})}else y=Le({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(A),y}const E6e={kernelName:E_,backendName:"webgl",kernelFunc:N6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=kt(i,s.shape);let c=l;const u=zn(c,a);let A=s;u!=null&&(A=Qs({inputs:{x:s},backend:n,attrs:{perm:u}}),c=ar(c.length,a)),as("any",c,a);const[d,f]=Wr(A.shape,c),h=ye(f),m=Le({inputs:{x:A},backend:n,attrs:{shape:[-1,h]}}),g=vf(m,m.dtype,"any",n);let y;if(o){const x=or(d,l);y=Le({inputs:{x:g},backend:n,attrs:{shape:x}})}else y=Le({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(A),y}const k6e={kernelName:I_,backendName:"webgl",kernelFunc:I6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T6e{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:i,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F6e{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,M(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],o=Math.ceil(i/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),s||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=an(l),u=Us("coords",l);let A,d;if(o===1){d=l+1;const S=an(d);A=`
        ${S} sourceLocR = ${S}(${u.join()}, 0);
        ++${u[l-1]};
        ${S} sourceLocG = ${S}(${u.join()}, 0);
        ++${u[l-2]};
        ${S} sourceLocA = ${S}(${u.join()}, 0);
        --${u[l-1]};
        ${S} sourceLocB = ${S}(${u.join()}, 0);
        --${u[l-2]};`}else d=l,A=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const f=["x","y","z","w","u","v"].slice(0,d),h="."+f[d-1],m=f.map(S=>"int "+S),g=Us("sourceLocR",d-1).concat("inIdx.r"),y=Us("sourceLocG",d-1).concat("inIdx.g"),x=Us("sourceLocB",d-1).concat("inIdx.b"),v=Us("sourceLocA",d-1).concat("inIdx.a"),b=r==="max"?"greaterThan":"lessThan",w=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${v.join()})));`,C=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${x.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,B=s?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${B}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${A}
        ivec4 srcIdx = ivec4(sourceLocR${h}, sourceLocG${h},
          sourceLocB${h}, sourceLocA${h}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${b}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cte(t,e,n,r=null){let s=e.shape[0],i=e.shape[1];r!=null&&(s=r.shape[0],i=r.shape[1]);const o=WB(i),a={windowSize:o,inSize:i,batchSize:s,outSize:Math.ceil(i/o)},l=new T6e(a,n,r==null),c=[e];r!=null&&c.push(r);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const A=cte(t,e,n,u);return t.disposeIntermediateTensorInfo(u),A}function ute(t,e,n,r=null){const s=r!=null?r.shape:e.shape,i=s[s.length-1],o=WB(i),a=new F6e(s,o,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===e.shape.length){const u=ute(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function Ate(t,e,n,r){const s=[n];if(as("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!he().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],o=t.texData.get(e.dataId),a=o!==null&&o.isPacked;let l=e;a&&(l=t.unpackTensor(e),i.push(l));const[c,u]=Wr(l.shape,s),A=ye(u),d=Le({inputs:{x:l},backend:t,attrs:{shape:[-1,A]}});i.push(d);const f=cte(t,d,r);i.push(f);const h=Le({inputs:{x:f},backend:t,attrs:{shape:c}});return i.forEach(m=>t.disposeIntermediateTensorInfo(m)),h}return ute(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=kt(i,s.shape);const a=zn(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Qs({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=ar(o.length,l.shape.length)),as("argMax",[o[0]],l.shape.length);const u=Ate(n,l,o[0],"max");return c.forEach(A=>n.disposeIntermediateTensorInfo(A)),u}const _6e={kernelName:bS,backendName:"webgl",kernelFunc:$6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=kt(i,s.shape);const a=zn(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Qs({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=ar(o.length,l.shape.length)),as("argMin",[o[0]],l.shape.length);const u=Ate(n,l,o[0],"min");return c.forEach(A=>n.disposeIntermediateTensorInfo(A)),u}const D6e={kernelName:wS,backendName:"webgl",kernelFunc:O6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R6e=Yo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,P6e=Qt({opSnippet:R6e}),U6e={kernelName:dx,backendName:"webgl",kernelFunc:P6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j6e=Yo+"return log(x + sqrt(x * x + 1.0));",L6e=Qt({opSnippet:j6e}),M6e={kernelName:fx,backendName:"webgl",kernelFunc:L6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q6e=Yo+`
  return atan(x);
`,H6e=Qt({opSnippet:Q6e}),z6e={kernelName:hx,backendName:"webgl",kernelFunc:H6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V6e=DR+`
  return atan(a, b);
`,W6e=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+xf+`
  return result;
`,G6e=cs({opSnippet:V6e,packedOpSnippet:W6e}),K6e={kernelName:mx,backendName:"webgl",kernelFunc:G6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X6e=Yo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,q6e=Qt({opSnippet:X6e}),Y6e={kernelName:px,backendName:"webgl",kernelFunc:q6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l0{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,A=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",g=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,y=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let x="0.0";if(m||(x="-1.0 / 1e-20"),r){const S=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${f}, ${h});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${A};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${S} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?i?g:y:`wR * ${d} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const v="max";let b=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(b="avgValue / max(count, 1.0)");const w=Math.floor(o/4)*4,C=o%4,B=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${v}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${f}, ${h});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${A};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${B}
          }

          int xC = xCCorner + ${w};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${B}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${B}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${B}
          }
        }
        setOutput(${b});
      }
    `}}class PR{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,A=e.dilationHeight,d=e.dilationWidth,f=e.effectiveFilterDepth,h=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=e.padInfo.front,y=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const v=n==="avg";let b="0.0";if(v||(b="-1.0 / 1e-20"),r){const k=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${g}, ${y}, ${x});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${h};
                wR += ${A}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${d}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${k} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${h} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / max(count, 1.0)");const B=Math.floor(o/4)*4,S=o%4,N=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${g}, ${y}, ${x});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h};
            wR += ${A}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${B}; wC += 4) {
              int xC = xCCorner + wC * ${d};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                getValue(batch, xD, xR, xC + 3 * ${d}, ch)
              );

              ${N}
            }

            int xC = xCCorner + ${B};
            if (${S===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${N}
            } else if (${S===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                initializationValue,
                initializationValue
              );

              ${N}
            } else if (${S===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                initializationValue
              );

              ${N}
            }
          }
        }
        setOutput(${C});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Nv(s,"avgPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;M(os(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Xo(s.shape,i,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&_t(u.inShape,u.outShape))return Ui({inputs:{x:s},backend:n});const A=new l0(u,"avg",!1);return n.runWebGLProgram(A,[s],"float32")}const Z6e={kernelName:CS,backendName:"webgl",kernelFunc:J6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],A=kc(s.shape,i,o,u,a,l,c),d=new PR(A,"avg",!1);return n.runWebGLProgram(d,[s],"float32")}const t5e={kernelName:SS,backendName:"webgl",kernelFunc:e5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n5e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,A=c-1-e.padInfo.left,d=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${A});
      const float avgMultiplier = float(${d});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class r5e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,A=e.effectiveFilterDepth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=A-1-e.padInfo.front,m=d-1-e.padInfo.top,g=f-1-e.padInfo.left,y=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${h}, ${m}, ${g});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${A};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,A=[1,1,1],d=kc(o.shape,a,l,A,c,u),f=new r5e(d);return n.runWebGLProgram(f,[s],o.dtype)}const i5e={kernelName:T_,backendName:"webgl",kernelFunc:s5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;Nv([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=Xo(o.shape,a,l,1,c),A=new n5e(u);return n.runWebGLProgram(A,[s],o.dtype)}const a5e={kernelName:k_,backendName:"webgl",kernelFunc:o5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l5e(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;return T2({a:s,b:i,transposeA:o,transposeB:a,backend:n})}const c5e={kernelName:BS,backendName:"webgl",kernelFunc:l5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u5e{constructor(e,n,r,s,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],bt(e,n),bt(e,r);let a="0.0";s!=null&&(bt(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";i!=null&&(bt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A5e{constructor(e,n,r,s,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],bt(e,n),bt(e,r);let a="vec4(0.0)";s!=null&&(bt(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(bt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d5e=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:i,offset:o,scale:a}=t;M(s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),M(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),M(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,s,i];let u=null;o!=null&&(u=o.shape,c.push(o));let A=null;a!=null&&(A=a.shape,c.push(a));const d=he().getBool("WEBGL_PACK_NORMALIZATION")?new A5e(r.shape,s.shape,i.shape,u,A,l):new u5e(r.shape,s.shape,i.shape,u,A,l);return e.runWebGLProgram(d,c,c[0].dtype)},f5e={kernelName:US,backendName:"webgl",kernelFunc:d5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h5e{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=an(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=p5e(this.rank);let s;const i=e.map((o,a)=>`sourceLoc.${mT[a]} = start[${a}] + coords.${mT[a]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const mT=["x","y","z","w","u","v"];function p5e(t){if(t===1)return"sourceLoc";if(t<=6)return mT.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m5e{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=an(this.rank),r=Us("coords",this.rank),s=Us("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,o=`getChannel(getSource(${s.join()}), ${i})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${o};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${o};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,A)=>`start[${A}]`).join()});`:e.map((u,A)=>`${s[A]} = ${r[A]} + start[${A}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g5e(t,e,n,r){const s=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),o=r.texData.get(i.dataId);Object.assign(o,s),o.refCount=1,o.shape=n,o.dtype=t.dtype;let a=FD(e,ot(t.shape));s.slice&&(a+=s.slice.flatOffset),o.slice={flatOffset:a,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),i}function mm(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r,[a,l]=VB(s,i,o);if(ID(s,a,l),ye(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const A=n.texData.get(s.dataId),d=cMe(A.values,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,d)}const{isPacked:c}=n.texData.get(s.dataId),u=TD(s.shape,a,l);if(c||!u){const A=he().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new m5e(l):new h5e(l),d=[a];return n.runWebGLProgram(A,[s],s.dtype,d)}return n.uploadToGPU(s.dataId),g5e(s,a,l,n)}const y5e={kernelName:fB,backendName:"webgl",kernelFunc:mm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x5e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;M(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((x,v)=>x*v),l=fv(s.shape,i,a),c=hv(l.length,i.length),u=pv(s.shape,i,a),A=RD(o,i.length),d=PD(u,o,i.length),f=[],h=Le({inputs:{x:s},backend:n,attrs:{shape:l}}),m=Qs({inputs:{x:h},backend:n,attrs:{perm:c}}),g=Le({inputs:{x:m},backend:n,attrs:{shape:u}}),y=mm({inputs:{x:g},backend:n,attrs:{begin:A,size:d}});return f.push(h),f.push(m),f.push(g),f.forEach(x=>n.disposeIntermediateTensorInfo(x)),y},v5e={kernelName:NS,backendName:"webgl",kernelFunc:x5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.readSync(s.dataId),l=n.readSync(i.dataId),c=Jee(a,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}const w5e={kernelName:F_,backendName:"webgl",kernelFunc:b5e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C5e=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,S5e=`
  return float(int(a.r) & int(b.r));
`;function B5e(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=he().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=he().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||o===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(s.dataId).values,[u,A]=_Le(r.shape,s.shape,l,c,r.dtype),d=n.makeTensorInfo(A,r.dtype),f=n.texData.get(d.dataId);return f.values=u,d}let a;return i?a=new hm(C5e,r.shape,s.shape,!1):a=new tf(S5e,r.shape,s.shape),n.runWebGLProgram(a,[r,s],r.dtype)}const N5e={kernelName:ES,backendName:"webgl",kernelFunc:B5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E5e(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.readSync(r.dataId),o=n.readSync(s.dataId),a=bt(Array.from(i),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const I5e={kernelName:$_,backendName:"webgl",kernelFunc:E5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k5e="return float(a != b);",dte=cs({opSnippet:k5e,cpuKernelImpl:eMe,dtype:"bool"}),T5e={kernelName:tB,backendName:"webgl",kernelFunc:dte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iv(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Ui({inputs:{x:s.complexTensorInfos.real},backend:n})}const F5e={kernelName:AO,backendName:"webgl",kernelFunc:Iv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $5e="return float(int(x));";function _5e(t,e){const n=new il(t.shape,$5e),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gT(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return Ui({inputs:{x:s},backend:n});const o=Sr(s.shape),a=gT({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=xA({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),l}if(s.dtype==="complex64"){const o=Iv({inputs:{input:s},backend:n}),a=gT({inputs:{x:o},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(o),a}if(!hK(s.dtype,i)){const o=Ui({inputs:{x:s},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:i}}if(n.shouldExecuteOnCPU([s])){const o=n.texData.get(s.dataId).values,[a,l,c]=OLe(o,s.shape,s.dtype,i);return n.makeTensorInfo(a,l,c)}if(i==="int32")return _5e(s,n);if(i==="bool"){const o=n.makeTensorInfo([],"bool",rs("bool",1)),l=dte({inputs:{a:s,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}const O5e={kernelName:gx,backendName:"webgl",kernelFunc:gT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q5="return ceil(x);",D5e=Qt({opSnippet:Q5,packedOpSnippet:Q5,cpuKernelImpl:DLe}),R5e={kernelName:yx,backendName:"webgl",kernelFunc:D5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P5e{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U5e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:i,clipValueMax:o}=r;let a;he().getBool("WEBGL_PACK_CLIP")?a=new U5e(s.shape):a=new P5e(s.shape);const l=[[i],[o]];return n.runWebGLProgram(a,[s],s.dtype,l)}const L5e={kernelName:xx,backendName:"webgl",kernelFunc:j5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M5e{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H5(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function Q5e(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),i=new M5e(r.shape),o=[H5(r,s.complexTensorInfos.real),H5(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}const H5e={kernelName:IS,backendName:"webgl",kernelFunc:Q5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z5e{constructor(e){this.outputShape=[],this.outputShape=Al(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const s=n.length,i=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V5e{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Al(e,n);const r=this.outputShape,s=r.length,i=an(s),o=Us("coords",s),a=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((m,g)=>`T${g}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][n];const c=a[n],u=a.slice(-2),A=a.join();let d=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${A}), vec2(${u.join()}));
        }`;for(let m=1;m<l.length;m++){const g=l[m-1];d+=`
        if (${c} < ${l[m]}  && ${c} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${xb(a,c,g)}),
            vec2(${xb(u,c,g)}));
        }`}const f=l.length,h=l[l.length-1];d+=`
        return getChannel(
          getT${f}(${xb(a,c,h)}),
          vec2(${xb(u,c,h)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${d}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[s-1]} = ${o[s-1]} + 1;
        if (${o[s-1]} < ${r[s-1]}) {
          result.g = getValue(${o});
        }

        ${o[s-2]} = ${o[s-2]} + 1;
        if (${o[s-2]} < ${r[s-2]}) {
          result.a = getValue(${o});
        }

        ${o[s-1]} = ${o[s-1]} - 1;
        if (${o[s-2]} < ${r[s-2]} &&
            ${o[s-1]} < ${r[s-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function xb(t,e,n){const r=t.indexOf(e);return t.map((i,o)=>o===r?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A3(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Ui({inputs:{x:s.complexTensorInfos.imag},backend:n})}const W5e={kernelName:Y_,backendName:"webgl",kernelFunc:A3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hg(t,e,n){const r=t[0].dtype;if(r==="complex64"){const f=t.map(x=>Iv({inputs:{input:x},backend:n})),h=t.map(x=>A3({inputs:{input:x},backend:n})),m=Hg(f,e,n),g=Hg(h,e,n),y=xA({inputs:{real:m,imag:g},backend:n});return f.forEach(x=>n.disposeIntermediateTensorInfo(x)),h.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const f=t.map(b=>{const C=[-1,ye(b.shape.slice(e))];return Le({inputs:{x:b},backend:n,attrs:{shape:C}})}),h=f.map(b=>({vals:n.readSync(b.dataId),shape:b.shape})),m=Al(f.map(b=>b.shape),1),g=f[0].shape[0]===1,y=RLe(h,m,r,g),x=Al(t.map(b=>b.shape),e),v=n.makeTensorInfo(x,r,y);return f.forEach(b=>n.disposeIntermediateTensorInfo(b)),v}const i=t.filter(f=>ye(f.shape)>0),o=he().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const f=o?new il(t[0].shape,Jc):new xu(t[0].shape,Jc);return n.runWebGLProgram(f,t,r)}const a=he().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>a){const f=[];for(let m=0;m<i.length;m+=a){const g=i.slice(m,m+a);f.push(Hg(g,e,n))}const h=Hg(f,e,n);for(const m of f)n.disposeIntermediateTensorInfo(m);return h}if(o){const f=new V5e(i.map(h=>h.shape),e);return n.runWebGLProgram(f,i,r)}const{tensors2D:l,outShape:c}=G5e(i,e,n),u=new z5e(l.map(f=>f.shape)),A=n.runWebGLProgram(u,l,r);l.forEach(f=>n.disposeIntermediateTensorInfo(f));const d=Le({inputs:{x:A},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(A),d}function G5e(t,e,n){const r=Al(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>Le({inputs:{x:i},attrs:{shape:[-1,ye(i.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fte(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=kt(s,e[0].shape)[0],o=e.map(c=>c.shape);_D(o,i);const a=Al(e.map(c=>c.shape),i);if(ye(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(c=>ye(c.shape)>0);return l.length===1?Ui({inputs:{x:l[0]},backend:n}):Hg(l,i,n)}const K5e={kernelName:kS,backendName:"webgl",kernelFunc:fte};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hte{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,A=e.dilationWidth,d=e.filterHeight,f=e.filterWidth,h=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,g=e.dataFormat==="channelsLast",y=g?1:2,x=g?2:3,v=g?3:1;let b="",w="";r&&(s?b=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?b=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:b=`
          float activation(float x) {
            ${r}
          }
        `,w="result = activation(result);");const C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${b}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${v}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${x}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${d}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${A};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${h}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${h}) *
                    getW(wR, wC, ${h}, d2);
              } else {
                dotProd +=
                    getX(batch, ${h}, xR, xC) *
                    getW(wR, wC, ${h}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${h}, d2),
                getW(wR, wC, ${h} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${h}),
                  getX(batch, xR, xC, ${h} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${h}, xR, xC),
                  getX(batch, ${h} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${h}, d2),
                getW(wR, wC, ${h} + 1, d2),
                getW(wR, wC, ${h} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${h}),
                  getX(batch, xR, xC, ${h} + 1),
                  getX(batch, xR, xC, ${h} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${h}, xR, xC),
                  getX(batch, ${h} + 1, xR, xC),
                  getX(batch, ${h} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${w}
        setOutput(result);
      }
    `}}class X5e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,A=e.filterDepth,d=e.filterHeight,f=e.filterWidth,h=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${A}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${d}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${h}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${h}) *
                  getW(wF, wR, wC, ${h}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${h}),
                  getX(batch, xF, xR, xC, ${h} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${h}, d2),
                  getW(wF, wR, wC, ${h} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${h}),
                  getX(batch, xF, xR, xC, ${h} + 1),
                  getX(batch, xF, xR, xC, ${h} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${h}, d2),
                  getW(wF, wR, wC, ${h} + 1, d2),
                  getW(wF, wR, wC, ${h} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pte{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Cs(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,A=u;let d=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<u;g++)d+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;d+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let g=0;g<u;g++)d+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;d+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(A+1)/2;g++){const y=g*2;if(d+=`
           xC = xCCorner + ${y*l};
           `,a===1){if(y<u&&(o%2===1?(d+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }
               `,l===1&&y>0?d+=`
                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                 `:d+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                   } else {
                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                   }
                   `):d+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xC${y} = xTexelC${y};
                 `,y+1<u)){const x=o%2===0?S_(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(d+=`
                   xCOffset = xC + imod(pads[1], 2) + ${x};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${y+1}.zw = vec2(0.0);
                     }
                     xTexelC${y+1}Ready = 1;
                   }
                   `,l>1?d+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                     } else {
                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                     }
                     `:d+=`
                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                     `):x===1?d+=`
                     xC${y+1} = xTexelC${y};
                     `:d+=`
                     xCOffset = xC + ${x};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${y+1}.zw = vec2(0.0);
                       }
                       xTexelC${y+1}Ready = 1;
                     }

                     xC${y+1} = xTexelC${y+1};
                     `}}else y<u&&(o%2===1?(d+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.0);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
               `,y+1<u&&(d+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                 `)):(d+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(
                   xTexelC${y}.xy, xTexelC${y+1}.xy);
               `,y+1<u&&(d+=`
                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                 `)));y<u&&(d+=`
             wTexel = getW(r, ${y}, d1, d2);
             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,y+1<u&&(d+=`
               wTexel = getW(r, ${y+1}, d1, d2);
               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}d+=`
     }
   `,d+=`
     }
   `,d+=`
     }
   `;let f="",h="";r&&(s?f=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?f=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:f=`vec4 activation(vec4 x) {
           ${r}
         }`,h="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${f}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${d}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${h}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q5e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length);const{dataFormat:r}=n,s=zs(),i=r==="channelsLast",o=i?1:2,a=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let A=0;A<=1;A++)c+=`
          blockIndex = rc.z + ${A};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+A}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+A}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F2(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function mte({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,c=r.texData.get(t.dataId),u=n.inChannels,A=l[0]*l[1]*l[2],d=n.outChannels,f=n.dataFormat==="channelsLast",h=!1,m=!1;let g;const y=[];if(i!=null){const b=F2(i.shape,f);b!=null&&(i=Le({inputs:{x:i},backend:r,attrs:{shape:b}}),y.push(i))}if(s!=null){const b=F2(s.shape,f);b!=null&&(s=Le({inputs:{x:s},backend:r,attrs:{shape:b}}),y.push(s))}if(!((A===1||d===1)&&u>lte)&&c.isPacked&&f&&c.texture!=null&&l[2]%2!==0&&_t(c.shape.slice(-3),l.slice(-3))){const b=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,b,n.inChannels],dtype:t.dtype},C=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,M(k2(c.shape,w.shape),()=>`packed reshape ${c.shape} to ${w.shape} isn't free`);const B=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});y.push(B);const S=T2({a:w,b:B,backend:r,transposeA:h,transposeB:m,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o}),N=r.texData.get(S.dataId);M(N.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=C,N.shape=n.outShape,g=Ui({inputs:{x:S},backend:r}),g.shape=n.outShape,y.push(S)}else{const b=n.outHeight*n.outWidth,w=Le({inputs:{x:t},backend:r,attrs:{shape:f?[n.batchSize,b,n.inChannels]:[n.batchSize,n.inChannels,b]}}),C=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),B=T2({a:f?w:C,b:f?C:w,transposeA:!f,transposeB:m,backend:r,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o});g=Le({inputs:{x:B},backend:r,attrs:{shape:n.outShape}}),y.push(w),y.push(C),y.push(B)}for(const b of y)r.disposeIntermediateTensorInfo(b);return g}function gte({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:A,outHeight:d,dataFormat:f}=n,h=f==="channelsLast",m=l*c*u,g=d*A,y=[n.batchSize,m,g],x=!0,v=!1,b=[];if(i!=null){const _=F2(i.shape,h);_!=null&&(i=Le({inputs:{x:i},backend:r,attrs:{shape:_}}),b.push(i))}if(s!=null){const _=F2(s.shape,h);_!=null&&(s=Le({inputs:{x:s},backend:r,attrs:{shape:_}}),b.push(s))}const w=Le({inputs:{x:e},backend:r,attrs:{shape:[1,m,ye(e.shape)/m]}});b.push(w);const C=new q5e(y,n),B=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],S=r.runWebGLProgram(C,[t],"float32",B),N=Le({inputs:{x:S},backend:r,attrs:{shape:y}});b.push(S),b.push(N);const k=s!=null,O=i!=null,U=a==="leakyrelu",P=a?a0(a,!0):null,V=new ate(h?N.shape:w.shape,h?w.shape:N.shape,h?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],x,v,k,P,O,U),W=h?[N,w]:[w,N];if(s&&W.push(s),O&&W.push(i),U){const _=r.makeTensorInfo([],"float32",cA(o,"float32"));W.push(_),b.push(_)}const L=r.runWebGLProgram(V,W,"float32"),G=Le({inputs:{x:L},backend:r,attrs:{shape:n.outShape}});b.push(L);for(const _ of b)r.disposeIntermediateTensorInfo(_);return G}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,A=Tc(l),d=Vr(s.shape,i.shape,o,c,a,u,!1,A);let f;if(d.filterHeight===1&&d.filterWidth===1&&d.dilationHeight===1&&d.dilationWidth===1&&d.strideHeight===1&&d.strideWidth===1&&(d.padInfo.type==="SAME"||d.padInfo.type==="VALID"))f=mte({x:s,filter:i,convInfo:d,backend:n});else if(d.strideWidth<=2&&A==="channelsLast"&&he().getBool("WEBGL_EXP_CONV")){const m=new pte(d),g=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];f=n.runWebGLProgram(m,[s,i],"float32",g)}else if(he().getBool("WEBGL_CONV_IM2COL"))f=gte({x:s,filter:i,convInfo:d,backend:n});else{const m=new hte(d);f=n.runWebGLProgram(m,[s,i],"float32")}const h=Le({inputs:{x:f},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(f),h}const J5e={kernelName:TS,backendName:"webgl",kernelFunc:Y5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z5e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class eQe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=o?1:2,u=o?2:3,A=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${A}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class tQe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class nQe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,u=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,A=Tc(l),d=Vr(s.shape,u,o,1,a,c,!1,A),f=new Z5e(d);return n.runWebGLProgram(f,[s,i],"float32")}const sQe={kernelName:O_,backendName:"webgl",kernelFunc:rQe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iQe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Cs(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oQe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,A=Tc(c),d=Vr(o,i.shape,a,1,l,u,!1,A);if(he().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&A==="channelsLast"){const f=[[d.strideHeight,d.strideWidth]],h=new iQe(d);return n.runWebGLProgram(h,[s,i],"float32",f)}else{const f=new eQe(d);return n.runWebGLProgram(f,[s,i],"float32")}}const aQe={kernelName:FS,backendName:"webgl",kernelFunc:oQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,c=dA(s.shape,i.shape,o,l,a),u=new X5e(c);return n.runWebGLProgram(u,[s,i],"float32")}const cQe={kernelName:$S,backendName:"webgl",kernelFunc:lQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:l}=r,c=dA(s.shape,l,o,1,a),u=new tQe(c);return n.runWebGLProgram(u,[s,i],"float32")}const AQe={kernelName:D_,backendName:"webgl",kernelFunc:uQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dQe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:l}=r,c=dA(l,i.shape,a,1,o),u=new nQe(c);return n.runWebGLProgram(u,[s,i],"float32")}const fQe={kernelName:R_,backendName:"webgl",kernelFunc:dQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hQe=pm+`
  return cos(x);
`,pQe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${xf}
  return result;
`,mQe=Qt({opSnippet:hQe,packedOpSnippet:pQe}),gQe={kernelName:vx,backendName:"webgl",kernelFunc:mQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yQe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,xQe=Qt({opSnippet:yQe}),vQe={kernelName:bx,backendName:"webgl",kernelFunc:xQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bQe{constructor(e,n,r,s,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,c]=e,[u]=n,[A,d]=r;this.outputShape=[u,A,d,c];const f=s==="bilinear"?1:0,[h,m]=[`${a-1}.0`,`${l-1}.0`],[g,y,x]=A>1?[`${(a-1)/(A-1)}`,"(y2-y1) * height_ratio",`y1*${h} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${h}`],[v,b,w]=d>1?[`${(l-1)/(d-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${v});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${b};

        float in_y = ${x};
        if( in_y < 0.0 || in_y > ${h} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${f} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wQe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,u=new bQe(s.shape,i.shape,a,l,c);return n.runWebGLProgram(u,[s,i,o],"float32")},CQe={kernelName:U_,backendName:"webgl",kernelFunc:wQe};var c0;(function(t){t.Prod="*",t.Sum="+"})(c0||(c0={}));class z5{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===c0.Prod?"1.0":"0.0",a=r?o:`getX(${V5(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=s?`end != ${l-1}`:"end != 0",u=s?"end + 1":"end - 1"):(c=s?`end + pow2 < ${l}`:"end >= pow2",u=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${an(i)} coords = getOutputCoords();
        int end = ${W5(i,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${W5(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${V5(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function V5(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function W5(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yte(t,e,n,r,s,i){const o=e.shape.length,a=zn([r],o);let l=e;a!=null&&(l=Qs({inputs:{x:e},backend:n,attrs:{perm:a}}));const c=ar(1,o)[0];if(c!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let A=Ui({inputs:{x:l},backend:n});for(let d=0;d<=Math.ceil(Math.log2(u))-1;d++){const f=new z5(t,l.shape,!1,i),h=[[d]],m=A;A=n.runWebGLProgram(f,[A],A.dtype,h),n.disposeIntermediateTensorInfo(m)}if(s){const d=new z5(t,l.shape,s,i),f=A;A=n.runWebGLProgram(d,[A],A.dtype),n.disposeIntermediateTensorInfo(f)}if(a!=null){const d=fA(a),f=Qs({inputs:{x:A},backend:n,attrs:{perm:d}});return n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(l),f}return A}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return yte(c0.Prod,s,n,i,o,a)}const BQe={kernelName:P_,backendName:"webgl",kernelFunc:SQe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return yte(c0.Sum,s,n,i,o,a)}const EQe={kernelName:_S,backendName:"webgl",kernelFunc:NQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(s.shape.length===1){const l=n.readSync(s.dataId),c=n.readSync(i.dataId),u=Jee(l,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(i),u=$Le(l,c,o,a);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const kQe={kernelName:j_,backendName:"webgl",kernelFunc:IQe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TQe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:o}=r,a=s.shape[0],l=o==="NHWC"?s.shape[1]:s.shape[2],c=o==="NHWC"?s.shape[2]:s.shape[3],u=o==="NHWC"?s.shape[3]:s.shape[1],A=l*i,d=c*i,f=u/(i*i),h=o==="NHWC"?[a,A,d,f]:[a,f,A,d],m=new TQe(h,i,o);return n.runWebGLProgram(m,[s],s.dtype)}const $Qe={kernelName:L_,backendName:"webgl",kernelFunc:FQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xte{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Cs(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(s?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const A=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${A}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vte{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Cs(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,A=e.filterWidth,d=A;let f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<A;y++)f+=`
          vec4 xTexelC${y*2};
          int xTexelC${y*2}Ready;
          vec4 xTexelC${y*2+1};
          int xTexelC${y*2+1}Ready;
          vec4 xC${y};`;f+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let y=0;y<A;y++)f+=`
          xTexelC${y*2} = vec4(0.0);
          xTexelC${y*2}Ready = 0;
          xTexelC${y*2+1} = vec4(0.0);
          xTexelC${y*2+1}Ready = 0;
          xC${y} = vec4(0.0);`;f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let y=0;y<(d+1)/2;y++){const x=y*2;if(f+=`
          xC = xCCorner + ${x*c};
          `,l===1){if(x<A&&(a%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }
              `,c===1&&x>0?f+=`
                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                `:f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                  } else {
                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                  }
                  `):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xC${x} = xTexelC${x};
                `,x+1<A)){const v=a%2===0?S_(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + ${v};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${x+1}.zw = vec2(0.0);
                    }
                    xTexelC${x+1}Ready = 1;
                  }
                  `,c>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                    } else {
                     xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                    }
                    `:f+=`
                    xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                    `):v===1?f+=`
                    xC${x+1} = xTexelC${x};
                    `:f+=`
                    xCOffset = xC + ${v};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${x+1}.zw = vec2(0.0);
                      }
                      xTexelC${x+1}Ready = 1;
                    }

                    xC${x+1} = xTexelC${x+1};
                    `}}else x<A&&(a%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.0);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
              `,x+1<A&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                `)):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(
                  xTexelC${x}.xy, xTexelC${x+1}.xy);
              `,x+1<A&&(f+=`
                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                `)));x<A&&(f+=`
            wTexel = getW(r, ${x}, d1, q);
            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);
          `,x+1<A&&(f+=`
              wTexel = getW(r, ${x+1}, d1, q);
              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);
            `))}f+=`
    }
  `,f+=`
      }
    `;let h="",m="";r&&(s?h=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?h=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:h=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${h}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${f}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Qe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),M(os(o,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const A=Vr(s.shape,i.shape,o,u,a,c,!0);let d;he().getBool("WEBGL_PACK_DEPTHWISECONV")&&A.strideWidth<=2&&A.outChannels/A.inChannels===1?d=new vte(A):d=new xte(A);const f=[[A.padInfo.top,A.padInfo.left],[A.strideHeight,A.strideWidth],[A.dilationHeight,A.dilationWidth],[A.inHeight,A.inWidth]];return n.runWebGLProgram(d,[s,i],"float32",f)}const OQe={kernelName:OS,backendName:"webgl",kernelFunc:_Qe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DQe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class RQe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,A=Vr(s.shape,u,o,a,l,c,!0),d=new DQe(A);return n.runWebGLProgram(d,[s,i],"float32")}const UQe={kernelName:M_,backendName:"webgl",kernelFunc:PQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jQe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,A=Vr(u,i.shape,o,a,l,c,!0),d=new RQe(A);return n.runWebGLProgram(d,[s,i],"float32")}const LQe={kernelName:Q_,backendName:"webgl",kernelFunc:jQe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MQe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QQe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],i=ye(r.shape),o=Le({inputs:{x:r},backend:n,attrs:{shape:[i]}}),a=new MQe(i),l=n.runWebGLProgram(a,[o],o.dtype),c=Le({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const HQe={kernelName:H_,backendName:"webgl",kernelFunc:QQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zQe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:i,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:A,left:d}=s;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${o});
      const ivec2 pads = ivec2(${A}, ${d});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,c=ov(s.shape,i.shape,o,a,"NHWC",l);let u;const A=new zQe(c);u=n.runWebGLProgram(A,[s,i],"float32");const d=Le({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),d}const WQe={kernelName:DS,backendName:"webgl",kernelFunc:VQe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GQe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:o,summedDims:a,idDims:l}=VD(s,i.length);GD(o.length,l,i);const{path:c,steps:u}=KD(a,l),A=u.length;let d=null,f=o.length;const h=[];for(let m=0;m<A;++m){for(const g of u[m]){const{permutationIndices:y,expandDims:x}=WD(f,l[g]);let v;XD(y)?v=i[g]:(v=Qs({inputs:{x:i[g]},backend:n,attrs:{perm:y}}),h.push(v));const b=v.shape.slice();for(let w=0;w<x.length;++w)b.splice(x[w],0,1);_t(v.shape,b)||(v=Le({inputs:{x:v},backend:n,attrs:{shape:b}}),h.push(v)),d===null?d=v:(d=RR({inputs:{a:v,b:d},backend:n}),h.push(d))}m<A-1&&(c[m]>=0&&(d=u3({inputs:{x:d},backend:n,attrs:{axis:c[m]-(o.length-f),keepDims:!1}}),h.push(d)),f--)}for(const m of h)m!==d&&n.disposeIntermediateTensorInfo(m);return d}const KQe={kernelName:z_,backendName:"webgl",kernelFunc:GQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XQe="return (x >= 0.0) ? x : (exp(x) - 1.0);",qQe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,YQe=Qt({opSnippet:XQe,packedOpSnippet:qQe}),JQe={kernelName:Cx,backendName:"webgl",kernelFunc:YQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZQe="return (b >= 0.0) ? a : a * (b + 1.0);",e8e=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,t8e=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,i=he().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hm(e8e,r.shape,s.shape):new tf(ZQe,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],r.dtype)},n8e={kernelName:V_,backendName:"webgl",kernelFunc:t8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r8e=`
  return vec4(equal(a, b));
`,s8e="return float(a == b);",i8e=cs({opSnippet:s8e,packedOpSnippet:r8e,dtype:"bool",cpuKernelImpl:PLe}),o8e={kernelName:RS,backendName:"webgl",kernelFunc:i8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a8e=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${UD};
  float a1 = ${jD};
  float a2 = ${LD};
  float a3 = ${MD};
  float a4 = ${QD};
  float a5 = ${HD};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,l8e=Qt({opSnippet:a8e}),c8e={kernelName:Sx,backendName:"webgl",kernelFunc:l8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u8e=pm+`
  return exp(x);
`,A8e=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,bte=Qt({opSnippet:u8e,packedOpSnippet:A8e,cpuKernelImpl:ULe,dtype:"float32"}),d8e={kernelName:Bx,backendName:"webgl",kernelFunc:bte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yT(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:i}=e,o=i.shape.length,a=i.shape.slice();let l=s;return s<0&&(M(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),Le({inputs:{x:i},backend:r,attrs:{shape:a}})}const f8e={kernelName:PS,backendName:"webgl",kernelFunc:yT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G5="return exp(x) - 1.0;",h8e=Qt({opSnippet:G5,packedOpSnippet:G5,cpuKernelImpl:jLe}),p8e={kernelName:Nx,backendName:"webgl",kernelFunc:h8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K5{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${s}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wte(t,e,n){const r=n.texData.get(t.dataId),s=ye(t.shape),i=t.shape[t.shape.length-1],o=s/i,a=Le({inputs:{x:t},backend:n,attrs:{shape:[o,i]}}),l=a.shape,c=new K5("real",l,e),u=new K5("imag",l,e),A=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],d=n.runWebGLProgram(c,A,"float32"),f=n.runWebGLProgram(u,A,"float32"),h=xA({inputs:{real:d,imag:f},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f);const m=Le({inputs:{x:h},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(h),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m8e(t){const{inputs:e,backend:n}=t,{input:r}=e;return wte(r,!1,n)}const g8e={kernelName:W_,backendName:"webgl",kernelFunc:m8e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y8e{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kv(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:i}=n;if(i=i||em(s),i==="string"){const o=sr(i,ye(r));return o.fill(s),e.makeTensorInfo(r,i,o)}else{const o=new y8e(r,s),a=[[s]];return e.runWebGLProgram(o,[],i,a)}}const x8e={kernelName:G_,backendName:"webgl",kernelFunc:kv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v8e{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b8e={kernelName:K_,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new v8e(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X5="return floor(x);",w8e=Qt({opSnippet:X5,packedOpSnippet:X5,cpuKernelImpl:LLe}),C8e={kernelName:Ex,backendName:"webgl",kernelFunc:w8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S8e=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,B8e=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,N8e=cs({opSnippet:S8e,packedOpSnippet:B8e,dtype:"int32"}),E8e={kernelName:Ix,backendName:"webgl",kernelFunc:N8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I8e{constructor(e){this.variableNames=["A"];const n=zs(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k8e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=zs(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T8e={kernelName:Bk,backendName:"webgl",kernelFunc:F8e};let Hf,rE=he().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function F8e(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:i}=r,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],u=[c,l],A=[c,l,i];if(a||o){const m=he().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Hf==null||m!==rE)&&(rE=m,Hf=document.createElement("canvas").getContext("2d",{willReadFrequently:rE})),Hf.canvas.width=l,Hf.canvas.height=c,Hf.drawImage(s,0,0,l,c),s=Hf.canvas}const d=n.makeTensorInfo(u,"int32");n.texData.get(d.dataId).usage=to.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),s);const f=he().getBool("WEBGL_PACK")?new k8e(A):new I8e(A),h=n.runWebGLProgram(f,[d],"int32");return n.disposeData(d.dataId),h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:A,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=r,m=Tc(u),g=Vr(s.shape,i.shape,l,A,c,d,!1,m);let y;const x=[],v=o!=null,b=a!=null,w=f==="leakyrelu",C=()=>{const S=[s,i],N=(k,O)=>{if(O==="NCHW"&&k.shape.length===1&&k.shape[0]!==1){const U=Le({inputs:{x:k},backend:n,attrs:{shape:[k.shape[0],1,1]}});return x.push(U),U}return k};if(v&&S.push(N(o,u)),b&&S.push(N(a,u)),w){const k=n.makeTensorInfo([],"float32",cA(h,"float32"));S.push(k),x.push(k)}return S};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))y=mte({x:s,filter:i,convInfo:g,backend:n,bias:o,activation:f,preluActivationWeights:a,leakyreluAlpha:h});else if(g.strideWidth<=2&&m==="channelsLast"&&he().getBool("WEBGL_EXP_CONV")){const S=f?a0(f,!0):null,N=new pte(g,v,S,b,w),k=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],O=C();y=n.runWebGLProgram(N,O,"float32",k)}else if(he().getBool("WEBGL_CONV_IM2COL"))y=gte({x:s,filter:i,convInfo:g,backend:n,bias:o,activation:f,preluActivationWeights:a,leakyreluAlpha:h});else{const S=f?a0(f,!1):null,N=new hte(g,v,S,b,w),k=C();y=n.runWebGLProgram(N,k,"float32")}const B=Le({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return x.push(y),x.forEach(S=>n.disposeIntermediateTensorInfo(S)),B}const _8e={kernelName:r2,backendName:"webgl",kernelFunc:$8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:A,activation:d,leakyreluAlpha:f}=r,h=[];let m=u;m==null&&(m=[1,1]),M(os(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const g=Vr(s.shape,i.shape,l,m,c,A,!0),y=he().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,x=d?a0(d,y):null,v=[s,i],b=o!=null,w=a!=null,C=d==="leakyrelu";if(b&&v.push(o),w&&v.push(a),C){const k=n.makeTensorInfo([],"float32",cA(f,"float32"));v.push(k),h.push(k)}let B;y?B=new vte(g,b,x,w,C):B=new xte(g,b,x,w,C);const S=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],N=n.runWebGLProgram(B,v,"float32",S);return h.forEach(k=>n.disposeIntermediateTensorInfo(k)),N}const D8e={kernelName:s2,backendName:"webgl",kernelFunc:O8e};class R8e{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const i=an(r.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P8e(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=s.shape,o=i[i.length-1],a=ye(r.shape),[l,c,u,A]=ED(r,s),d=Le({inputs:{x:s},backend:n,attrs:{shape:[c,o]}}),f=Le({inputs:{x:r},backend:n,attrs:{shape:[ye(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const y=n.readSync(s.dataId),x=n.bufferSync(r),v=MLe(y,x,r.dtype,c,o,u,A,r.shape,a);return n.makeTensorInfo(l,r.dtype,v.values)}const h=new R8e(o,A,[c,u],r.shape),m=n.runWebGLProgram(h,[f,d],f.dtype),g=Le({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const U8e={kernelName:X_,backendName:"webgl",kernelFunc:P8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j8e{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=an(this.rank),s=L8e(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function L8e(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cte(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:o,batchDims:a}=r,l=kt(o,s.shape)[0];if(he().get("DEBUG")){const x=n.readSync(i.dataId),v=s.shape[l];for(let b=0;b<x.length;++b){const w=x[b];M(w<=v-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${v-1}]`)}}const c=YD(s,i,l,a),u=ye(i.shape),A=[],d=Le({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),f=Le({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});A.push(d),A.push(f);const h=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([s,i])||s.dtype==="string"){const x=n.bufferSync(f),v=n.bufferSync(d),b=QLe(v,x,h);return A.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(c.outputShape,b.dtype,b.values)}const m=new j8e(d.shape,h),g=n.runWebGLProgram(m,[d,f],d.dtype);A.push(g);const y=Le({inputs:{x:g},backend:n,attrs:{shape:c.outputShape}});return A.forEach(x=>n.disposeIntermediateTensorInfo(x)),y}const M8e={kernelName:jS,backendName:"webgl",kernelFunc:Cte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q8e="return float(a > b);",H8e=`
  return vec4(greaterThan(a, b));
`,z8e=cs({opSnippet:Q8e,packedOpSnippet:H8e,cpuKernelImpl:HLe,dtype:"bool"}),V8e={kernelName:LS,backendName:"webgl",kernelFunc:z8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W8e="return float(a >= b);",G8e=`
  return vec4(greaterThanEqual(a, b));
`,K8e=cs({opSnippet:W8e,packedOpSnippet:G8e,dtype:"bool",cpuKernelImpl:zLe}),X8e={kernelName:kx,backendName:"webgl",kernelFunc:K8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q8e(t){const{inputs:e,backend:n}=t,{input:r}=e;return wte(r,!0,n)}const Y8e={kernelName:q_,backendName:"webgl",kernelFunc:q8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J8e="return float(!isnan(x) && !isinf(x));",Z8e=Qt({opSnippet:J8e,dtype:"bool"}),eHe={kernelName:Fx,backendName:"webgl",kernelFunc:Z8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tHe="return float(isinf(x));",nHe=Qt({opSnippet:tHe,dtype:"bool"}),rHe={kernelName:$x,backendName:"webgl",kernelFunc:nHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sHe="return float(isnan(x));",iHe=Qt({opSnippet:sHe,dtype:"bool"}),oHe={kernelName:_x,backendName:"webgl",kernelFunc:iHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aHe="return float(a < b);",lHe=`
  return vec4(lessThan(a, b));
`,cHe=cs({opSnippet:aHe,packedOpSnippet:lHe,cpuKernelImpl:VLe,dtype:"bool"}),uHe={kernelName:QS,backendName:"webgl",kernelFunc:cHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AHe="return float(a <= b);",dHe=`
  return vec4(lessThanEqual(a, b));
`,fHe=cs({opSnippet:AHe,packedOpSnippet:dHe,cpuKernelImpl:WLe,dtype:"bool"}),hHe={kernelName:HS,backendName:"webgl",kernelFunc:fHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pHe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=GLe(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}const mHe={kernelName:J_,backendName:"webgl",kernelFunc:pHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gHe=pm+`
  return x < 0.0 ? 0./0. : log(x);
`,yHe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,xHe=Qt({opSnippet:gHe,packedOpSnippet:yHe,cpuKernelImpl:KLe}),vHe={kernelName:Ox,backendName:"webgl",kernelFunc:xHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bHe=pm+`
  return log(1.0 + x);
`,wHe=Qt({opSnippet:bHe}),CHe={kernelName:Dx,backendName:"webgl",kernelFunc:wHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SHe="return float(a >= 1.0 && b >= 1.0);",BHe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,NHe=cs({opSnippet:SHe,packedOpSnippet:BHe,dtype:"bool"}),EHe={kernelName:zS,backendName:"webgl",kernelFunc:NHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IHe="return float(!(x >= 1.0));",kHe=Qt({opSnippet:IHe}),THe={kernelName:VS,backendName:"webgl",kernelFunc:kHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FHe="return float(a >= 1.0 || b >= 1.0);",$He=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,_He=cs({opSnippet:FHe,packedOpSnippet:$He,dtype:"bool"}),OHe={kernelName:WS,backendName:"webgl",kernelFunc:_He};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DHe{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[];const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RHe{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PHe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:l}=r,c=he().getBool("WEBGL_PACK_NORMALIZATION")?new RHe(s.shape,i,o,a,l):new DHe(s.shape,i,o,a,l);return n.runWebGLProgram(c,[s],s.dtype)},UHe={kernelName:GS,backendName:"webgl",kernelFunc:PHe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jHe{constructor(e,n,r,s,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LHe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r,A=new jHe(s.shape,a,l,c,u);return n.runWebGLProgram(A,[s,i,o],s.dtype)},MHe={kernelName:Z_,backendName:"webgl",kernelFunc:LHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QHe(t,e,n,r){const s=ye(e),o=ye(t.shape)/s,a=Le({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=vf(a,t.dtype,"max",r),c=Le({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ste(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:o}=r,a=s.shape.length,l=kt(i,s.shape);let c=l;const u=zn(c,a),A=u!=null,d=n.shouldExecuteOnCPU([s]);let f=s;if(A){if(d){const v=n.texData.get(f.dataId).values,b=new Array(a);for(let B=0;B<b.length;B++)b[B]=s.shape[u[B]];const w=OR(v,s.shape,s.dtype,u,b);f=n.makeTensorInfo(b,s.dtype);const C=n.texData.get(f.dataId);C.values=w}else f=c3(s,u,n);c=ar(c.length,a)}as("max",c,a);const[h,m]=Wr(f.shape,c);let g=h;o&&(g=or(h,l));let y;if(d){const v=n.texData.get(f.dataId).values,b=XLe(v,ye(m),g,s.dtype);y=n.makeTensorInfo(g,s.dtype);const w=n.texData.get(y.dataId);w.values=b}else y=QHe(f,m,g,n);return A&&n.disposeIntermediateTensorInfo(f),y}const HHe={kernelName:KS,backendName:"webgl",kernelFunc:Ste};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zHe=DR+`
  return max(a, b);
`,VHe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+xf+`
  return result;
`,WHe=cs({opSnippet:zHe,packedOpSnippet:VHe,cpuKernelImpl:qLe}),GHe={kernelName:Rx,backendName:"webgl",kernelFunc:WHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Nv(s,"maxPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;M(os(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Xo(s.shape,i,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&_t(u.inShape,u.outShape))return Ui({inputs:{x:s},backend:n});const A=new l0(u,"max",!1);return n.runWebGLProgram(A,[s],s.dtype)}const XHe={kernelName:XS,backendName:"webgl",kernelFunc:KHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],A=kc(s.shape,i,o,u,a,c,l),d=new PR(A,"max",!1);return n.runWebGLProgram(d,[s],s.dtype)}const YHe={kernelName:qS,backendName:"webgl",kernelFunc:qHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JHe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,l=o-1-e.padInfo.left,c=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class ZHe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,A=l-1-e.padInfo.front,d=c-1-e.padInfo.top,f=u-1-e.padInfo.left,h=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${A}, ${d}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${h} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e7e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,A=[1,1,1],d=kc(o.shape,a,l,A,c,u),f=new PR(d,"max",!0),h=n.runWebGLProgram(f,[o],o.dtype),m=new ZHe(d),g=n.runWebGLProgram(m,[s,h],o.dtype);return n.disposeIntermediateTensorInfo(h),g}const t7e={kernelName:tO,backendName:"webgl",kernelFunc:e7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n7e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;Nv([i,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:A}=r,d=Xo(a.shape,l,c,1,u,A),f=!0,h=new l0(d,"max",f),m=n.runWebGLProgram(h,[a],a.dtype),g=new JHe(d),y=n.runWebGLProgram(g,[s,m],a.dtype);return n.disposeIntermediateTensorInfo(m),y}const r7e={kernelName:eO,backendName:"webgl",kernelFunc:n7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s7e(t,e,n,r){let s=new l0(n,"max",!1);const i=r.runWebGLProgram(s,[t],"float32");s=new l0(n,"max",!0,!0,e);const o=r.runWebGLProgram(s,[t],"float32");return[i,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i7e={kernelName:nO,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:a}=e,l=n;M(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];M(os(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=Xo(r.shape,s,i,c,o),[A,d]=s7e(r,a,u,l);return[A,d]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o7e(t,e,n,r){const s=ye(e),o=ye(t.shape)/s,a=Le({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=vf(a,"float32","mean",r),c=Le({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a7e={kernelName:YS,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:i}=e,o=n,a=r.shape.length,l=kt(i,r.shape);let c=l;const u=zn(c,a),A=u!=null,d=o.shouldExecuteOnCPU([r]),f=[];let h=r;if(A){if(d){const b=o.texData.get(h.dataId).values,w=new Array(a);for(let S=0;S<w.length;S++)w[S]=r.shape[u[S]];const C=OR(b,r.shape,r.dtype,u,w);h=o.makeTensorInfo(w,r.dtype);const B=o.texData.get(h.dataId);B.values=C}else h=c3(r,u,o);f.push(h),c=ar(c.length,a)}as("sum",c,a);const[m,g]=Wr(h.shape,c);let y=m;s&&(y=or(m,l));const x=o7e(h,g,y,o);for(const v of f)o.disposeIntermediateTensorInfo(v);return x}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=kt(i,s.shape);let c=l;const u=zn(c,a);let A=s;u!=null&&(A=Qs({inputs:{x:s},backend:n,attrs:{perm:u}}),c=ar(c.length,s.shape.length)),as("min",c,a);const[d,f]=Wr(A.shape,c),h=ye(f),m=Le({inputs:{x:A},backend:n,attrs:{shape:[-1,h]}}),g=vf(m,m.dtype,"min",n);let y;if(o){const x=or(d,l);y=Le({inputs:{x:g},backend:n,attrs:{shape:x}})}else y=Le({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(A),y}const c7e={kernelName:JS,backendName:"webgl",kernelFunc:l7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u7e=DR+`
  return min(a, b);
`,A7e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+xf+`
  return result;
`,d7e=cs({opSnippet:u7e,packedOpSnippet:A7e,cpuKernelImpl:YLe}),f7e={kernelName:Px,backendName:"webgl",kernelFunc:d7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h7e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((u,A)=>u[0]+e[A]+u[1]);const s=e.length,i=an(s),o=n.map(u=>u[0]).join(","),a=n.map((u,A)=>u[0]+e[A]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p7e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((h,m)=>h[0]+e[m]+h[1]);const s=e.length,i=an(s),o=n.map(h=>h[0]).join(","),a=n.map((h,m)=>h[0]+e[m]).join(","),l=Us("rc",s),c=Us("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,A=s===1?"source":`vec2(${c.slice(-2).join()})`,d=r==="reflect"?0:1;let f="";if(s===1){const h=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${d};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${d};
        }
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${h}
        result[0] = getChannel(getX(${c.join()}), ${A});
        ${l[s-1]} += 1;
        if(${u}) {
          ${h}
          result[1] = getChannel(getX(${c.join()}), ${A});
        }
      `}else{const h=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${d}) +
                gte * ((end - 1) * 2 - source + ${d});
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${h}
        result[0] = getChannel(getX(${c.join()}), ${A});
        ${l[s-1]} += 1;
        if(${u}) {
          ${h}
          result[1] = getChannel(getX(${c.join()}), ${A});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${h}
          result[2] = getChannel(getX(${c.join()}), ${A});
          ${l[s-1]} += 1;
          if(${u}) {
            ${h}
            result[3] = getChannel(getX(${c.join()}), ${A});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m7e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:i}=n,o=he().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new p7e(r.shape,s,i):new h7e(r.shape,s,i);return e.runWebGLProgram(o,[r],r.dtype)},g7e={kernelName:ZS,backendName:"webgl",kernelFunc:m7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y7e=`if (b == 0.0) return NAN;
  return mod(a, b);`,x7e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+xf+`
  return result;
`,v7e=cs({opSnippet:y7e,packedOpSnippet:x7e}),b7e={kernelName:Ux,backendName:"webgl",kernelFunc:v7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w7e{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C7e=`
if (a == b) {
  return 1.0;
};
return a / b;`,S7e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Bte=cs({opSnippet:C7e,packedOpSnippet:S7e,checkOutOfBounds:!0}),B7e={kernelName:wx,backendName:"webgl",kernelFunc:Bte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q5="return a - b;",Nte=cs({opSnippet:q5,packedOpSnippet:q5,supportsComplex:!0,cpuKernelImpl:yMe}),N7e={kernelName:ev,backendName:"webgl",kernelFunc:Nte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ete(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,o=kt([i],s.shape),a=Ste({inputs:{x:s},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=or(a.shape,o),c=Le({inputs:{x:a},backend:n,attrs:{shape:l}}),u=Nte({inputs:{a:s,b:c},backend:n}),A=bte({inputs:{x:u},backend:n}),d=u3({inputs:{x:A},backend:n,attrs:{axis:o,keepDims:!1}}),f=Le({inputs:{x:d},backend:n,attrs:{shape:l}}),h=Bte({inputs:{a:A,b:f},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),h}const E7e={kernelName:gB,backendName:"webgl",kernelFunc:Ete};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I7e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r,l=a?s:Ete({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),c=l.shape[0],u=l.shape[1],A=new w7e(c,u,i),d=[[o]],f=n.runWebGLProgram(A,[l],"int32",d);return a||n.disposeIntermediateTensorInfo(l),f}const k7e={kernelName:rO,backendName:"webgl",kernelFunc:I7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T7e=Yo+`
  return -x;
`,F7e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function $7e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[o,a]=ZLe(i.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}let s;return he().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new xu(r.shape,F7e):s=new il(r.shape,T7e),n.runWebGLProgram(s,[r],r.dtype)}const _7e={kernelName:eB,backendName:"webgl",kernelFunc:$7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O7e=vD;function D7e(t){Ji("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,c=n.readSync(s.dataId),u=n.readSync(i.dataId),{selectedIndices:A}=O7e(c,u,o,a,l);return n.makeTensorInfo([A.length],"int32",new Int32Array(A))}const R7e={kernelName:sO,backendName:"webgl",kernelFunc:D7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P7e=bD;function U7e(t){Ji("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(s.dataId),A=n.readSync(i.dataId),{selectedIndices:d,validOutputs:f}=P7e(u,A,o,a,l,c);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const j7e={kernelName:iO,backendName:"webgl",kernelFunc:U7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L7e=wD;function M7e(t){Ji("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(s.dataId),A=n.readSync(i.dataId),d=o,f=a,h=l,m=c,{selectedIndices:g,selectedScores:y}=L7e(u,A,d,f,h,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const Q7e={kernelName:oO,backendName:"webgl",kernelFunc:M7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H7e{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z7e=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:o,onValue:a,offValue:l}=r,c=ye(s.shape),u=new H7e(c,o,a,l),A=Le({inputs:{x:s},backend:n,attrs:{shape:[c]}}),d=n.runWebGLProgram(u,[A],i);n.disposeIntermediateTensorInfo(A);const f=[...s.shape,o],h=Le({inputs:{x:d},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(d),h},V7e={kernelName:rB,backendName:"webgl",kernelFunc:z7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=Iv({inputs:{input:r},backend:n}),i=$2({inputs:{x:s},backend:n}),o=A3({inputs:{input:r},backend:n}),a=$2({inputs:{x:o},backend:n}),l=xA({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return kv({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const W7e={kernelName:bB,backendName:"webgl",kernelFunc:$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ite(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=Iv({inputs:{input:r},backend:n}),i=Ite({inputs:{x:s},backend:n}),o=A3({inputs:{input:r},backend:n}),a=$2({inputs:{x:o},backend:n}),l=xA({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return kv({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const G7e={kernelName:nB,backendName:"webgl",kernelFunc:Ite};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K7e(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return yT({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,o=e[0].dtype;e.forEach(u=>{ji(i,u.shape,"All tensors passed to stack must have matching shapes"),M(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const A=yT({inputs:{input:u},backend:n,attrs:{dim:s}});return a.push(A),A}),c=fte({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const X7e={kernelName:sB,backendName:"webgl",kernelFunc:K7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q7e{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const s=e.length,i=an(s),o=n.map(c=>c[0]).join(","),a=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y7e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,g)=>m[0]+e[g]+m[1]);const s=e.length,i=an(s),o=n.map(m=>m[0]).join(","),a=n.map((m,g)=>m[0]+e[g]).join(","),l=Us("rc",s),c=Us("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,A=s===1?"source":`vec2(${c.slice(-2).join()})`,d=[`${i} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${u}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${u}) {`],f=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let h="";for(let m=0,g=s===1?2:4;m<g;m++)h+=`
        ${d[m]}
        if (${f}) {
          result[${m}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${m}] = getChannel(getX(${c.join()}), ${A});
        }
      `;h+=s===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kte=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r;if(ye(s.shape)===0){const c=i.map((u,A)=>u[0]+s.shape[A]+u[1]);return kv({backend:n,attrs:{shape:c,value:o,dtype:s.dtype}})}const a=he().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Y7e(s.shape,i,o):new q7e(s.shape,i,o),l=[[o]];return n.runWebGLProgram(a,[s],s.dtype,l)},J7e={kernelName:iB,backendName:"webgl",kernelFunc:kte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z7e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,e9e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+xf+`
  return result;
`,t9e=cs({opSnippet:Z7e,packedOpSnippet:e9e}),n9e={kernelName:Lx,backendName:"webgl",kernelFunc:t9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=[],c=kt(i,s.shape);let u=c;const A=zn(u,a);let d=s;A!=null&&(d=Qs({inputs:{x:s},backend:n,attrs:{perm:A}}),u=ar(u.length,a),l.push(d)),as("prod",u,a);let f;if(n.shouldExecuteOnCPU([d])){const h=n.texData.get(d.dataId).values,{outVals:m,outShape:g,outDtype:y}=tMe(d.shape,d.dtype,h,u);f=n.makeTensorInfo(g,y,m)}else{const[h,m]=Wr(d.shape,u),g=ye(m),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),x=$O(s.dtype),v=vf(y,x,"prod",n);f=Le({inputs:{x:v},backend:n,attrs:{shape:h}}),l.push(y),l.push(v)}if(o){l.push(f);const h=or(f.shape,c);f=Le({inputs:{x:f},backend:n,attrs:{shape:h}})}return l.forEach(h=>n.disposeIntermediateTensorInfo(h)),f}const s9e={kernelName:aB,backendName:"webgl",kernelFunc:r9e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i9e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:o}=e,{outputRaggedRank:a}=r,l=s.map(y=>n.readSync(y.dataId)),c=s.map(y=>y.shape),u=n.readSync(i.dataId),A=n.readSync(o.dataId),[d,f,h]=nMe(l,c,u,i.shape,i.dtype,A,o.shape,a),m=d.map(y=>n.makeTensorInfo([y.length],"int32",y)),g=n.makeTensorInfo(h,i.dtype,f);return m.concat([g])}const o9e={kernelName:aO,backendName:"webgl",kernelFunc:i9e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a9e(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=rMe(o,r.shape,r.dtype,a,s.shape,l,i.shape),A=n.makeTensorInfo([c.length],"int32",c),d=n.makeTensorInfo([u.length],r.dtype,u);return[A,d]}const l9e={kernelName:lO,backendName:"webgl",kernelFunc:a9e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c9e(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.readSync(s.dataId),u=n.readSync(i.dataId),A=n.readSync(o.dataId),d=a.map(g=>n.readSync(g.dataId)),f=a.map(g=>g.shape),[h,m]=sMe(c,s.shape,u,i.shape,i.dtype,A,o.shape,d,f,l);return n.makeTensorInfo(h,i.dtype,m)}const u9e={kernelName:cO,backendName:"webgl",kernelFunc:c9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tte=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:i,dtype:o}=n,a=iMe(r,s,i,o);return e.makeTensorInfo([a.length],o,a)},A9e={kernelName:uO,backendName:"webgl",kernelFunc:Tte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d9e="return 1.0 / x;",f9e=Qt({opSnippet:d9e}),h9e={kernelName:Mx,backendName:"webgl",kernelFunc:f9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p9e=Yo+`
  return (x < 0.0) ? 0.0 : x;
`,m9e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,g9e=Qt({opSnippet:p9e,packedOpSnippet:m9e}),y9e={kernelName:Qx,backendName:"webgl",kernelFunc:g9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x9e=Yo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,v9e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,b9e=Qt({opSnippet:x9e,packedOpSnippet:v9e}),w9e={kernelName:Hx,backendName:"webgl",kernelFunc:b9e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C9e{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],A=[s&&n>1?n-1:n,s&&r>1?r-1:r];let d;i?d="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/A[0]},
          ${u[1]/A[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S9e{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],A=[s&&n>1?n-1:n,s&&r>1?r-1:r];let d;i?d="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/A[0]},
          ${u[1]/A[1]},
          ${u[1]/A[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B9e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,c]=a,u=he().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new S9e(s.shape,l,c,i,o):new C9e(s.shape,l,c,i,o);return n.runWebGLProgram(u,[s],"float32")}const N9e={kernelName:uB,backendName:"webgl",kernelFunc:B9e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E9e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],A=l[1]/c[1],d=1/u,f=1/A,h=Math.ceil(d)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${A});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${f});

        const int winHeight = int(${h});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I9e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new E9e(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const k9e={kernelName:fO,backendName:"webgl",kernelFunc:I9e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T9e{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],A=[s&&n>1?n-1:n,s&&r>1?r-1:r],d=s?"0.5":"0.0";let f;i?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/A[0]},
          ${u[1]/A[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F9e{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],A=[s&&n>1?n-1:n,s&&r>1?r-1:r],d=s?"0.5":"0.0";let f;i?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/A[0]},
          ${u[1]/A[1]},
          ${u[1]/A[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $9e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,c]=a,u=he().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new F9e(s.shape,l,c,i,o):new T9e(s.shape,l,c,i,o);return n.runWebGLProgram(u,[s],s.dtype)}const _9e={kernelName:cB,backendName:"webgl",kernelFunc:$9e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O9e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],A=l[1]/c[1],d=1/u,f=1/A,h=Math.ceil(d)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${A});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${f});

        const int winHeight = int(${h});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D9e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new O9e(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const R9e={kernelName:dO,backendName:"webgl",kernelFunc:D9e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P9e{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,i=e.map((a,l)=>s(l)).join(","),o=an(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U9e{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=Us("rc",r),i=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,a=an(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${i}){
            result.g = ${c(s.slice())};
          }
          if(${o}) {
            result.b = ${u(s.slice())};
            if(${i}) {
              result.a = ${A(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(h){return d(h)}function c(h){return h[r-1]="("+h[r-1]+" + 1)",d(h)}function u(h){return h[r-2]="("+h[r-2]+" + 1)",d(h)}function A(h){return h[r-1]="("+h[r-1]+" + 1)",h[r-2]="("+h[r-2]+" + 1)",d(h)}function d(h){const m=e.map((x,v)=>f(v,h)),g=m.join(","),y=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${y}))`}function f(h,m){return n.indexOf(h)!==-1&&e[h]!==1?`${e[h]} - ${m[h]} - 1`:`${m[h]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r,o=s.shape.length,a=kt(i,s.shape);if(o===0)return Ui({inputs:{x:s},backend:n});const l=he().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new U9e(s.shape,a):new P9e(s.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}const L9e={kernelName:AB,backendName:"webgl",kernelFunc:j9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M9e{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q9e={kernelName:TO,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,l=new M9e(r.shape,i),[c,u]=DD(o,r.shape[1],r.shape[2]),A=[[c,u,Math.sin(s),Math.cos(s)]];return a.runWebGLProgram(l,[r],r.dtype,A)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H9e=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,z9e=Qt({opSnippet:H9e}),V9e={kernelName:zx,backendName:"webgl",kernelFunc:z9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W9e="return inversesqrt(x);",G9e=Qt({opSnippet:W9e,cpuKernelImpl:oMe}),K9e={kernelName:Vx,backendName:"webgl",kernelFunc:G9e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UR{constructor(e,n,r,s,i,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const c=an(i.length),u=an(o.length);let A="";r===1?A="i":r===2&&(A="i, j");const d=`getIndices(${A})`;let f="";s===1?f="i":s===2&&(f="i, coords[1]");const h=`getUpdates(${f})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${y};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${h};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X9e{constructor(e,n,r,s,i,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const c=an(i.length),u=an(o.length);let A="";r===1?A="i":r===2&&(A="i, j");const d=`getIndices(${A})`;let f="";s===1?f="i":s===2&&(f="i, coords[1]");const h=`getUpdates(${f})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides",x=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${d});
              flattenedIndex += index.xz * ${y};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${x};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${h};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q9e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:A}=hf(i,s,o),d=[A/c,c];if(A===0)return n.makeTensorInfo(o,s.dtype);const f=Le({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),h=Le({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;he().getBool("WEBGL_PACK")?g=new X9e(l,a,f.shape.length,h.shape.length,u,d):g=new UR(l,a,f.shape.length,h.shape.length,u,d);const y=n.runWebGLProgram(g,[h,f,m],h.dtype),x=Le({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),x}const Y9e={kernelName:hO,backendName:"webgl",kernelFunc:q9e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J9e{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=he().getNumber("WEBGL_VERSION")===2?i:o,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z9e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:o}=r,a=new J9e(s.shape[0],s.shape[1],i.shape[1],o),l=[[s.shape[1]]];return n.runWebGLProgram(a,[s,i],"int32",l)}const eze={kernelName:mO,backendName:"webgl",kernelFunc:Z9e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tze{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",s="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${a[u]}`),u<e&&l.push(`${a[u]}`);s=l.join(),i=c.join()}const o=an(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nze(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e,o=new tze(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(o,[r,s,i],Di(s.dtype,i.dtype))}const rze={kernelName:dB,backendName:"webgl",kernelFunc:nze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sze=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${GB};
  float scale = ${KB};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,ize=Qt({opSnippet:sze}),oze={kernelName:Wx,backendName:"webgl",kernelFunc:ize};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aze=pm+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,lze=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,cze=Qt({opSnippet:aze,packedOpSnippet:lze,cpuKernelImpl:lMe}),uze={kernelName:qx,backendName:"webgl",kernelFunc:cze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aze=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,dze=Qt({opSnippet:Aze}),fze={kernelName:Xx,backendName:"webgl",kernelFunc:dze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hze=pm+`
  return sin(x);
`,pze=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${xf}
  return result;
`,mze=Qt({opSnippet:hze,packedOpSnippet:pze}),gze={kernelName:Gx,backendName:"webgl",kernelFunc:mze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yze=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,xze=Qt({opSnippet:yze}),vze={kernelName:Kx,backendName:"webgl",kernelFunc:xze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bze=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,wze=Qt({opSnippet:bze}),Cze={kernelName:Yx,backendName:"webgl",kernelFunc:wze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sze=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:o}=r;M(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((y,x)=>y*x),l=[[0,0]];l.push(...o);for(let y=1+i.length;y<s.shape.length;++y)l.push([0,0]);const c=[],u=kte({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),A=fv(u.shape,i,a,!1),d=hv(A.length,i.length,!1),f=pv(u.shape,i,a,!1),h=Le({inputs:{x:u},backend:n,attrs:{shape:A}}),m=Qs({inputs:{x:h},backend:n,attrs:{perm:d}}),g=Le({inputs:{x:m},backend:n,attrs:{shape:f}});return c.push(u),c.push(h),c.push(m),c.forEach(y=>n.disposeIntermediateTensorInfo(y)),g},Bze={kernelName:pB,backendName:"webgl",kernelFunc:Sze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nze(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(r.dataId),l=n.readSync(s.dataId),c=n.readSync(i.dataId),u=n.readSync(o.dataId)[0],[A,d,f,h,m]=uMe(a,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(d,r.dtype,A),n.makeTensorInfo([d[0]],s.dtype,f),n.makeTensorInfo([h.length],"bool",new Uint8Array(h.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const Eze={kernelName:gO,backendName:"webgl",kernelFunc:Nze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ize(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.readSync(s.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[c,u,A]=AMe(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([A.length],i.dtype,new Int32Array(A))]}const kze={kernelName:yO,backendName:"webgl",kernelFunc:Ize};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tze(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=ete(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const Fze={kernelName:xO,backendName:"webgl",kernelFunc:Tze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ze(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=ete(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const _ze={kernelName:vO,backendName:"webgl",kernelFunc:$ze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oze(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:A,outputSize:d}=hf(i,s,a),f=!1;if(i.dtype==="string"){const y=n.bufferSync(s),x=n.bufferSync(i),v=Vu(n.readSync(o.dataId)[0]),b=aMe(y,x,a,d,u,c,l,A,v,f);return n.makeTensorInfo(a,b.dtype,b.values)}const h=new UR(c,l,s.shape.length,i.shape.length,A,[d,1],f),m=n.runWebGLProgram(h,[i,s,o],i.dtype),g=Le({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),g}const Dze={kernelName:bO,backendName:"webgl",kernelFunc:Oze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:o}=r,a=kt(o,s.shape)[0],l=qD(s,i,a),c=s.shape.length,u=new Array(c).fill(0),A=s.shape.slice();return l.map(d=>{const f=[...A];f[a]=d;const h=mm({inputs:{x:s},backend:n,attrs:{begin:u,size:f}});return u[a]+=d,h})}const Pze={kernelName:mB,backendName:"webgl",kernelFunc:Rze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y5="return sqrt(x);",Uze=Qt({opSnippet:Y5,packedOpSnippet:Y5,cpuKernelImpl:dMe}),jze={kernelName:Jx,backendName:"webgl",kernelFunc:Uze};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lze="return x * x;",Mze=Qt({opSnippet:Lze}),Qze={kernelName:wO,backendName:"webgl",kernelFunc:Mze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J5="return (a - b) * (a - b);",Hze=cs({opSnippet:J5,packedOpSnippet:J5}),zze={kernelName:Zx,backendName:"webgl",kernelFunc:Hze};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(s.dataId),o=xc(i),a=fMe(o,"string",r);return n.makeTensorInfo(s.shape,"string",a)}const Wze={kernelName:yB,backendName:"webgl",kernelFunc:Vze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gze({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=Yo+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new il(r.shape,s);return n.runWebGLProgram(i,[r],r.dtype)}const Kze={kernelName:sv,backendName:"webgl",kernelFunc:Gze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xze{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,i=an(r.length),o=an(r.length);let a="";if(s===1)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:A,shrinkAxisMask:d}=r,{finalShapeSparse:f,finalShape:h,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:x,end:v,strides:b}=$D(s.shape,i,o,a,l,c,u,A,d);let w;if(m)w=Le({inputs:{x:s},backend:n,attrs:{shape:h}});else if(g||y){M(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const B=kD(x,v,b),S=mm({inputs:{x:s},backend:n,attrs:{begin:x,size:B}});w=Le({inputs:{x:S},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(S)}else if(n.shouldExecuteOnCPU([s])){const S=n.readSync(s.dataId),N=St(s.shape,s.dtype,S),k=hMe(f,N,b,x);w=n.makeTensorInfo(h,s.dtype,k.values)}else{const S=new Xze(x,b,f);w=n.runWebGLProgram(S,[s],s.dtype)}const C=Le({inputs:{x:w},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(w),C}const Yze={kernelName:CO,backendName:"webgl",kernelFunc:qze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jze(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:A}=e,d=n.readSync(u.dataId),f=n.readSync(A.dataId),[h,m]=pMe(d,f,s,i,o,a,l,c);return[n.makeTensorInfo([h.length],"string",h),n.makeTensorInfo(A.shape,"int32",m)]}const Zze={kernelName:SO,backendName:"webgl",kernelFunc:Jze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eVe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],[c,u,A]=mMe(a,l,s),d=u.length;return[n.makeTensorInfo([d,2],"int32",c),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(A))]}const tVe={kernelName:BO,backendName:"webgl",kernelFunc:eVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nVe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),a=gMe(o,s);return n.makeTensorInfo(i.shape,"int32",a)}const rVe={kernelName:NO,backendName:"webgl",kernelFunc:nVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sVe="return tan(x);",iVe=Qt({opSnippet:sVe}),oVe={kernelName:tv,backendName:"webgl",kernelFunc:iVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aVe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,lVe=Qt({opSnippet:aVe}),cVe={kernelName:nv,backendName:"webgl",kernelFunc:lVe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uVe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:i,updates:o}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:A}=hf(o,i,s.shape),d=[A/c,c];if(A===0)return n.makeTensorInfo(s.shape,i.dtype);const f=Le({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),h=Le({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),m=Le({inputs:{x:s},backend:n,attrs:{shape:d}}),g=new UR(l,a,f.shape.length,h.shape.length,u,d,!1,!0),y=n.runWebGLProgram(g,[h,f,m],m.dtype),x=Le({inputs:{x:y},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),x}const AVe={kernelName:pO,backendName:"webgl",kernelFunc:uVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dVe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const s=an(this.rank),i=fVe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function fVe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fte(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),c=s.dtype==="string"?l.map(d=>Vu(d)):l,u=St(s.shape,s.dtype,c),A=xMe(u,i);return n.makeTensorInfo(A.shape,A.dtype,A.values)}const o=new dVe(s.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}const hVe={kernelName:rv,backendName:"webgl",kernelFunc:Fte};class pVe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class mVe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PA(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function Z5(t){let e=1;for(;e<t;)e*=2;return e}function gVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r,a=he().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=he().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([s])||u<a||i>l){const k=n.readSync(s.dataId),[O,U]=vMe(k,c,s.dtype,i,o);return[n.makeTensorInfo(O.shape,O.dtype,O.values),n.makeTensorInfo(U.shape,U.dtype,U.values)]}if(i===0)return c[c.length-1]=0,[n.makeTensorInfo(c,s.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[s,kv({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const A=n.texData.get(s.dataId),d=A!==null&&A.isPacked,f=d?n.unpackTensor(s):s,m=ye(c)/u,g=Le({inputs:{x:f},attrs:{shape:[m,u]},backend:n});d&&PA(n,f);const y=Z5(i),x=Z5(u);let v=null;const b=()=>v===null?[g,g]:[g,v],w=(k,O,U)=>{const P=b(),V=new pVe(U),L=[[u],[v===null?1:0],[Number.NEGATIVE_INFINITY],[k],[O]],G=v;v=n.runWebGLProgram(V,P,"int32",L),PA(n,G)};for(let k=1;k<y;k*=2){const O=k*2;for(let U=k;U>=1;U/=2)w(O,U,[m,x])}for(let k=x;k>y;k/=2){const O=b(),U=new mVe([m,k/2]),V=[[u],[v===null?1:0],[y]],W=v;v=n.runWebGLProgram(U,O,"int32",V),PA(n,W);const L=y/2,G=L*2;for(let _=L;_>=1;_/=2)w(G,_,v.shape)}let C=v;v=mm({inputs:{x:v},backend:n,attrs:{begin:0,size:[m,i]}}),PA(n,C);let B=Cte({inputs:{x:g,indices:v},backend:n,attrs:{axis:1,batchDims:1}});PA(n,g);const S=c.slice(0,-1);S.push(i),C=v,v=Le({inputs:{x:v},attrs:{shape:S},backend:n}),PA(n,C);const N=B;return B=Le({inputs:{x:B},attrs:{shape:S},backend:n}),PA(n,N),[B,v]}const yVe={kernelName:EO,backendName:"webgl",kernelFunc:gVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xVe{constructor(e,n,r,s,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vVe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=r,[u,A,d,f]=s.shape,[h,m]=c??[A,d],g=[u,h,m,f],y=new xVe(A,d,o,a,l,g);return n.runWebGLProgram(y,[s,i],"float32")}const bVe={kernelName:IO,backendName:"webgl",kernelFunc:vVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wVe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;Nv(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:a,outputShape:l,indices:c}=bMe(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const CVe={kernelName:kO,backendName:"webgl",kernelFunc:wVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SVe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s,a=o.shape.length,l=s.shape[i],c=new Array(a-1);let u=0;for(let m=0;m<a;m++)m!==i&&(c[u++]=o.shape[m]);const A=[],d=new Array(a).fill(0),f=o.shape.slice();f[i]=1;const h=new Array(l);for(let m=0;m<h.length;m++){d[i]=m;const g=mm({inputs:{x:o},backend:n,attrs:{begin:d,size:f}}),y=Le({inputs:{x:g},backend:n,attrs:{shape:c}});h[m]=y,A.push(g)}return A.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}const BVe={kernelName:xB,backendName:"webgl",kernelFunc:SVe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NVe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/r);this.outputShape=[s,a];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,A=r%4,d=`
        sumValue += dot(values, segFilter);
    `;let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let h="";i%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${h}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${d}
        }

        int inIdx = inOffset + ${u};
        if (${A===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${d}
        } else if (${A===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${d}
        } else if (${A===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${d}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:o}=r,a=s.shape.length,l=[];let c=0;const u=zn([c],a);let A=s;u!=null&&(A=Qs({inputs:{x:s},backend:n,attrs:{perm:u}}),l.push(A),c=ar(1,a)[0]);const d=tY(A.shape,c,o),f=ye([A.shape[c]]),h=Le({inputs:{x:A},backend:n,attrs:{shape:[-1,f]}});l.push(h);const m=$O(s.dtype),g=(b,w,C,B,S)=>{const N=b.shape[0],k=b.shape[1],O=eY(k,S),U={windowSize:O,inSize:k,batchSize:N,numSegments:S},P=new NVe(U,w),V=n.compileAndRun(P,[b,C],B);if(l.push(V),V.shape[1]===S)return V;const W=Tte({backend:n,attrs:{start:0,stop:S,step:1,dtype:"float32"}}),L=Fte({inputs:{x:W},backend:n,attrs:{reps:[k/O]}});return l.push(W),l.push(L),g(V,w,L,B,S)},y=g(h,"unsortedSegmentSum",i,m,o),x=Le({inputs:{x:y},backend:n,attrs:{shape:d}});let v=x;if(u!=null){l.push(x);const b=fA(u);v=Qs({inputs:{x:v},backend:n,attrs:{perm:b}})}return l.forEach(b=>n.disposeIntermediateTensorInfo(b)),v}const IVe={kernelName:vB,backendName:"webgl",kernelFunc:EVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kVe=[d6e,h6e,g6e,v6e,w6e,B6e,E6e,k6e,_6e,D6e,U6e,M6e,z6e,K6e,Y6e,Z6e,t5e,i5e,a5e,c5e,f5e,v5e,w5e,N5e,I5e,O5e,R5e,L5e,XMe,H5e,K5e,J5e,sQe,aQe,cQe,AQe,fQe,gQe,vQe,CQe,BQe,EQe,kQe,$Qe,OQe,UQe,LQe,HQe,WQe,KQe,JQe,n8e,o8e,c8e,d8e,f8e,p8e,g8e,x8e,b8e,C8e,E8e,T8e,_8e,D8e,U8e,M8e,V8e,X8e,KMe,Y8e,W5e,eHe,rHe,oHe,YMe,uHe,hHe,mHe,vHe,CHe,EHe,THe,OHe,UHe,MHe,HHe,GHe,XHe,YHe,t7e,r7e,i7e,a7e,c7e,f7e,g7e,b7e,k7e,e6e,_7e,R7e,j7e,Q7e,T5e,V7e,G7e,X7e,J7e,n9e,ZMe,s9e,o9e,l9e,u9e,A9e,F5e,B7e,h9e,y9e,w9e,n6e,N9e,k9e,_9e,R9e,L9e,Q9e,V9e,K9e,Y9e,eze,rze,oze,uze,fze,gze,vze,y5e,E7e,Cze,Bze,Eze,kze,Fze,_ze,Dze,Pze,jze,Qze,zze,Wze,Kze,Yze,Zze,tVe,rVe,N7e,c6e,oVe,cVe,AVe,hVe,yVe,bVe,u6e,CVe,BVe,IVe,W7e];for(const t of kVe)xK(t);var mi=(t=>(t.FIXATION="fixation",t.SACCADE="saccade",t.BLINK="blink",t.OFF_PAGE="off_page",t))(mi||{});const $te=t=>{const{enabled:e,onGazePoint:n,calibrationMatrix:r,targetFPS:s=30}=t,[i,o]=Q.useState(!1),[a,l]=Q.useState(!1),[c,u]=Q.useState(null),[A,d]=Q.useState(null),[f,h]=Q.useState(0),m=Q.useRef(null),g=Q.useRef(null),y=Q.useRef(null),x=Q.useRef(null),v=Q.useRef(null),b=Q.useRef({frames:0,lastTime:Date.now()}),w=Q.useRef(null),C=Q.useCallback(async()=>{try{await fbe(),console.log("✅ TensorFlow.js ready");const k=h2.MediaPipeFaceMesh,U=await fIe(k,{runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh",refineLandmarks:!0});y.current=U,console.log("✅ MediaPipe Face Mesh loaded"),o(!0),u(null)}catch(k){console.error("❌ Failed to initialize gaze tracking:",k),u("시선 추적 초기화 실패. 페이지를 새로고침하세요."),o(!1)}},[]),B=Q.useCallback(async()=>{if(y.current||await C(),!y.current){u("Face detector not initialized");return}try{const k=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}}});x.current=k,m.current&&(m.current.srcObject=k,m.current.play()),l(!0),u(null),console.log("✅ Camera started")}catch(k){console.error("❌ Camera access denied:",k),u("카메라 접근 권한이 필요합니다."),l(!1)}},[C]),S=Q.useCallback(()=>{v.current&&(cancelAnimationFrame(v.current),v.current=null),x.current&&(x.current.getTracks().forEach(k=>k.stop()),x.current=null),m.current&&(m.current.srcObject=null),l(!1),console.log("🛑 Tracking stopped")},[]),N=Q.useCallback(async()=>{if(!y.current||!m.current||!a)return;const k=m.current,O=await y.current.estimateFaces(k,{flipHorizontal:!1});if(O.length===0){d(null);return}const P=O[0].keypoints,V=P[33],W=P[263],L=P[468],G=P[473],_=P[1];if(!L||!G)return;const j={leftEye:{x:V.x,y:V.y},rightEye:{x:W.x,y:W.y},leftIris:{x:L.x,y:L.y},rightIris:{x:G.x,y:G.y},noseTip:{x:_.x,y:_.y}},K=TVe(j,k.videoWidth,k.videoHeight);let Y=K.x,J=K.y;if(r){const ge=FVe(K.x,K.y,r);Y=ge.x,J=ge.y}const ae={x:Y,y:J,confidence:K.confidence,landmarks:j};d(ae);const ue=Date.now(),le=$Ve(Y,J,w.current,ue),fe={timestamp:ue,x:Y,y:J,confidence:K.confidence,type:le};w.current={x:Y,y:J,timestamp:ue},n&&n(fe),b.current.frames++;const Ie=Date.now();Ie-b.current.lastTime>=1e3&&(h(b.current.frames),b.current={frames:0,lastTime:Ie});const Re=1e3/s;v.current=window.requestAnimationFrame(()=>{setTimeout(N,Re)})},[a,n,r,s]);return Q.useEffect(()=>(a&&e&&N(),()=>{v.current&&cancelAnimationFrame(v.current)}),[a,e,N]),Q.useEffect(()=>(e&&C(),()=>{S()}),[e,C,S]),{isInitialized:i,isTracking:a,error:c,currentGaze:A,fps:f,videoRef:m,canvasRef:g,startTracking:B,stopTracking:S}};function TVe(t,e,n){const r=(t.leftIris.x+t.rightIris.x)/2,s=(t.leftIris.y+t.rightIris.y)/2,i=r/e,o=s/n;return{x:i,y:o,confidence:.85}}function FVe(t,e,n){const r=n[0][0]*t+n[0][1]*e+n[0][2],s=n[1][0]*t+n[1][1]*e+n[1][2];return{x:r,y:s}}function $Ve(t,e,n,r){if(!n)return mi.FIXATION;const s=Math.abs(t-n.x),i=Math.abs(e-n.y),o=Math.sqrt(s*s+i*i),a=(r-n.timestamp)/1e3;return t<-.1||t>1.1||e<-.1||e>1.1?mi.OFF_PAGE:(a>0?o/a:0)>1?mi.SACCADE:mi.FIXATION}const _Ve="http://localhost:3000",OVe="v1",DVe=()=>localStorage.getItem("token"),Sl=ir.create({baseURL:`${_Ve}/api/${OVe}/vision`,headers:{"Content-Type":"application/json"}});Sl.interceptors.request.use(t=>{const e=DVe();return e&&(t.headers.Authorization=`Bearer ${e}`),t});const RVe=async t=>(await Sl.post("/calibration/start",t)).data,PVe=async t=>(await Sl.post("/calibration/record-point",t)).data,UVe=async t=>(await Sl.post("/calibration/validate",{calibrationId:t})).data,jVe=async t=>(await Sl.get(`/calibration/active/${t}`)).data,LVe=async t=>(await Sl.post("/session/start",t)).data,MVe=async t=>(await Sl.post("/session/save-gaze-data",t)).data,QVe=async t=>(await Sl.post("/session/submit",t)).data,_te=async t=>(await Sl.get(`/analysis/${t}/report`)).data,HVe=async t=>(await Sl.get(`/admin/session/${t}/gaze-data`)).data,zVe=({userId:t,onCalibrationComplete:e,onCancel:n})=>{const[r,s]=Q.useState({stage:"instructions",currentPointIndex:0,recordedPoints:[]}),[i,o]=Q.useState(""),[a,l]=Q.useState([]),[c,u]=Q.useState(!1),[A,d]=Q.useState([]),{isTracking:f,currentGaze:h,fps:m,videoRef:g,startTracking:y,stopTracking:x}=$te({enabled:r.stage==="calibrating",onGazePoint:B=>{c&&d(S=>[...S,B])},targetFPS:30}),v=Q.useCallback(async()=>{try{const B={userAgent:navigator.userAgent,screenWidth:window.screen.width,screenHeight:window.screen.height,devicePixelRatio:window.devicePixelRatio,platform:navigator.platform},S=await RVe({userId:t,deviceInfo:B});o(S.calibrationId),l(S.points),s({stage:"calibrating",currentPointIndex:0,recordedPoints:[]}),await y()}catch(B){console.error("Failed to start calibration:",B),s(S=>({...S,error:"캘리브레이션 시작 실패"}))}},[t,y]),b=Q.useCallback(async()=>{if(A.length===0){s(k=>({...k,error:"시선 데이터가 감지되지 않습니다."}));return}const B=A.reduce((k,O)=>k+O.x,0)/A.length,S=A.reduce((k,O)=>k+O.y,0)/A.length,N=a[r.currentPointIndex];try{await PVe({calibrationId:i,pointId:N.id,gazeX:B,gazeY:S}),s(k=>({...k,recordedPoints:[...k.recordedPoints,{id:N.id,screenX:N.x,screenY:N.y,actualX:B,actualY:S,error:0,attempts:1}],currentPointIndex:k.currentPointIndex+1})),d([]),u(!1),r.currentPointIndex+1>=a.length&&w()}catch(k){console.error("Failed to record point:",k),s(O=>({...O,error:"포인트 기록 실패. 다시 시도하세요."})),u(!1)}},[i,a,r.currentPointIndex,A]),w=Q.useCallback(async()=>{s(B=>({...B,stage:"validating"}));try{const B=await UVe(i);B.valid?(s(S=>({...S,stage:"completed",accuracy:B.accuracy})),x(),e(B.calibrationResult)):s(S=>({...S,stage:"failed",error:B.message,accuracy:B.accuracy}))}catch(B){console.error("Calibration validation failed:",B),s(S=>({...S,stage:"failed",error:"캘리브레이션 검증 실패"}))}},[i,x,e]),C=Q.useCallback(()=>{d([]),u(!0),setTimeout(()=>{b()},3e3)},[b]);return r.stage==="instructions"?p.jsx("div",{className:"fixed inset-0 bg-background flex items-center justify-center z-50",children:p.jsxs("div",{className:"max-w-2xl mx-auto p-8 bg-card rounded-2xl shadow-2xl",children:[p.jsx("h2",{className:"text-3xl font-bold text-foreground mb-6",children:"시선 추적 캘리브레이션"}),p.jsxs("div",{className:"space-y-4 text-muted-foreground mb-8",children:[p.jsx("p",{className:"text-lg",children:"정확한 시선 추적을 위해 캘리브레이션이 필요합니다."}),p.jsxs("div",{className:"bg-secondary/10 p-4 rounded-lg",children:[p.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"준비사항:"}),p.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[p.jsx("li",{children:"밝은 조명이 있는 환경에서 진행하세요"}),p.jsx("li",{children:"태블릿을 편안한 위치에 고정하세요"}),p.jsx("li",{children:"얼굴이 화면 중앙에 오도록 위치하세요"}),p.jsx("li",{children:"화면으로부터 30-50cm 거리를 유지하세요"})]})]}),p.jsxs("div",{className:"bg-primary/10 p-4 rounded-lg",children:[p.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"진행 방법:"}),p.jsxs("ul",{className:"list-decimal list-inside space-y-1",children:[p.jsx("li",{children:"화면에 나타나는 9개의 점을 순서대로 응시합니다"}),p.jsx("li",{children:"각 점이 나타나면 고개를 움직이지 말고 눈으로만 응시하세요"}),p.jsx("li",{children:"3초간 점을 응시한 후 화면을 탭하세요"}),p.jsx("li",{children:"모든 점 측정이 완료되면 자동으로 검증됩니다"})]})]})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{onClick:n,className:"flex-1 px-6 py-3 bg-secondary text-secondary-foreground rounded-lg hover:bg-secondary/80 transition-colors",children:"취소"}),p.jsx("button",{onClick:v,className:"flex-1 px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-semibold",children:"캘리브레이션 시작"})]})]})}):r.stage==="calibrating"?p.jsxs("div",{className:"fixed inset-0 bg-background z-50",children:[p.jsx("video",{ref:g,className:"hidden",autoPlay:!0,playsInline:!0}),p.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-card/90 backdrop-blur px-6 py-3 rounded-full shadow-lg",children:p.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[p.jsxs("span",{className:"text-muted-foreground",children:["포인트: ",r.currentPointIndex+1," / ",a.length]}),p.jsx("span",{className:"text-muted-foreground",children:"|"}),p.jsx("span",{className:`${f?"text-green-500":"text-red-500"}`,children:f?"✓ 추적 중":"✗ 추적 안됨"}),p.jsx("span",{className:"text-muted-foreground",children:"|"}),p.jsxs("span",{className:"text-muted-foreground",children:[m," FPS"]})]})}),a.map((B,S)=>{const N=S===r.currentPointIndex,k=S<r.currentPointIndex;return p.jsxs("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 transition-all duration-300",style:{left:`${B.x*100}%`,top:`${B.y*100}%`,opacity:N?1:k?.3:.1},children:[p.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${N?"bg-primary animate-pulse":k?"bg-green-500":"bg-muted"}`,children:p.jsx("div",{className:"w-4 h-4 rounded-full bg-background"})}),N&&!c&&p.jsx("button",{onClick:C,className:"absolute top-20 left-1/2 transform -translate-x-1/2 px-4 py-2 bg-primary text-primary-foreground rounded-lg whitespace-nowrap",children:"점 응시 후 탭"}),N&&c&&p.jsxs("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 text-center",children:[p.jsx("div",{className:"text-primary font-semibold",children:"기록 중..."}),p.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[A.length," 포인트"]})]})]},B.id)}),h&&p.jsx("div",{className:"absolute w-3 h-3 bg-red-500 rounded-full transform -translate-x-1/2 -translate-y-1/2 pointer-events-none",style:{left:`${h.x*100}%`,top:`${h.y*100}%`,opacity:h.confidence}}),r.error&&p.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 bg-destructive text-destructive-foreground px-6 py-3 rounded-lg",children:r.error})]}):r.stage==="validating"?p.jsx("div",{className:"fixed inset-0 bg-background flex items-center justify-center z-50",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent mb-4"}),p.jsx("p",{className:"text-lg text-foreground",children:"캘리브레이션 검증 중..."})]})}):r.stage==="failed"?p.jsx("div",{className:"fixed inset-0 bg-background flex items-center justify-center z-50",children:p.jsxs("div",{className:"max-w-md mx-auto p-8 bg-card rounded-2xl shadow-2xl text-center",children:[p.jsx("div",{className:"text-6xl mb-4",children:"❌"}),p.jsx("h2",{className:"text-2xl font-bold text-destructive mb-4",children:"캘리브레이션 실패"}),p.jsx("p",{className:"text-muted-foreground mb-2",children:r.error}),r.accuracy&&p.jsxs("p",{className:"text-sm text-muted-foreground mb-6",children:["정확도: ",r.accuracy.toFixed(1),"% (필요: 70% 이상)"]}),p.jsx("button",{onClick:v,className:"w-full px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:"다시 시도"})]})}):null},VVe=()=>{const{sessionId:t}=oA(),e=is(),[n,r]=Q.useState({stage:"calibration",currentPassageIndex:0,gazeTracking:!1}),[s,i]=Q.useState(""),[o,a]=Q.useState(null),[l,c]=Q.useState([]),[u,A]=Q.useState(null),[d,f]=Q.useState(!1),[h,m]=Q.useState({}),[g,y]=Q.useState([]),[x,v]=Q.useState(null),b=Q.useRef([]),w=Q.useRef(Date.now()),C=5e3,B=1e3,S=localStorage.getItem("userId")||"",{isTracking:N,currentGaze:k,fps:O,videoRef:U,startTracking:P,stopTracking:V}=$te({enabled:n.stage==="testing",onGazePoint:W,calibrationMatrix:o==null?void 0:o.transformMatrix,targetFPS:30});function W(le){b.current.push(le),(Date.now()-w.current>=C||b.current.length>=B)&&L()}const L=Q.useCallback(async()=>{if(b.current.length===0||!s||!u)return;const le={passageId:u.id,gazePoints:[...b.current],startTime:new Date(b.current[0].timestamp),endTime:new Date(b.current[b.current.length-1].timestamp),totalPoints:b.current.length};try{await MVe({visionSessionId:s,gazeChunk:le}),console.log(`✅ Saved gaze chunk: ${le.totalPoints} points`),b.current=[],w.current=Date.now()}catch(fe){console.error("Failed to save gaze chunk:",fe)}},[s,u]);Q.useEffect(()=>{S&&t&&(async()=>{try{const fe=await jVe(S);if(fe.found&&fe.calibration){const Ie={calibrationId:fe.calibration.calibrationId,overallAccuracy:fe.calibration.overallAccuracy,points:[],transformMatrix:[[1,0,0],[0,1,0],[0,0,1]],deviceInfo:{userAgent:navigator.userAgent,screenWidth:window.screen.width,screenHeight:window.screen.height,devicePixelRatio:window.devicePixelRatio,platform:navigator.platform},expiresAt:new Date(fe.calibration.expiresAt)};a(Ie),await _(Ie)}}catch{console.log("No active calibration found, starting new calibration")}})()},[S,t]);const G=async le=>{a(le),await _(le)},_=async le=>{if(t)try{const fe=await LVe({sessionId:t,calibrationId:le.calibrationId});i(fe.visionSessionId),c(fe.passages),A(fe.passages[0]),await j(t),r({stage:"testing",currentPassageIndex:0,gazeTracking:!0}),await P(),console.log("✅ Vision session started:",fe.visionSessionId)}catch(fe){console.error("Failed to start vision session:",fe),r(Ie=>({...Ie,error:"Vision 세션 시작 실패"}))}},j=async le=>{try{const Ie=(await vt.get(`/api/v1/sessions/${le}`)).data.data;Ie.template&&Ie.template.questions&&(y(Ie.template.questions),Ie.template.questions.length>0&&v(Ie.template.questions[0]))}catch(fe){console.error("Failed to load questions:",fe),r(Ie=>({...Ie,error:"문제 불러오기 실패"}))}},K=Q.useCallback(async()=>{await L(),u!=null&&u.showPassageWithQuestions?Y():(f(!0),V())},[u,L,V]),Y=Q.useCallback(async()=>{const le=n.currentPassageIndex+1;if(le>=l.length)await ue();else{r(Ie=>({...Ie,currentPassageIndex:le})),A(l[le]),f(!1);const fe=le;fe<g.length&&v(g[fe]),N||await P()}},[n.currentPassageIndex,l,g,N,P]),J=(le,fe)=>{m(Ie=>({...Ie,[le]:fe}))},ae=async(le,fe)=>{try{await vt.post("/api/v1/sessions/submit-answer",{sessionId:t,questionId:le,studentAnswer:fe}),console.log("✅ Answer submitted:",le)}catch(Ie){console.error("Failed to submit answer:",Ie)}},ue=async()=>{try{await L(),await QVe({visionSessionId:s}),V(),console.log("✅ Vision test submitted"),e(`/student/vision/result/${t}`)}catch(le){console.error("Failed to submit vision test:",le),r(fe=>({...fe,error:"테스트 제출 실패"}))}};return n.stage==="calibration"&&!o?p.jsx(zVe,{userId:S,onCalibrationComplete:G,onCancel:()=>e("/student/dashboard")}):n.stage==="testing"&&u?p.jsxs("div",{className:"min-h-screen bg-background",children:[p.jsx("video",{ref:U,className:"hidden",autoPlay:!0,playsInline:!0}),p.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-card/95 backdrop-blur border-b border-border z-40",children:[p.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("span",{className:"text-sm text-muted-foreground",children:["지문 ",n.currentPassageIndex+1," / ",l.length]}),p.jsx("div",{className:"h-4 w-px bg-border"}),p.jsx("span",{className:`text-xs ${N?"text-green-500":"text-red-500"}`,children:N?"● 추적 중":"○ 추적 안됨"}),p.jsxs("span",{className:"text-xs text-muted-foreground",children:[O," FPS"]})]}),p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("div",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-xs font-medium",children:"Vision TEST"})})]}),p.jsx("div",{className:"h-1 bg-muted",children:p.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${(n.currentPassageIndex+1)/l.length*100}%`}})})]}),p.jsx("div",{className:"pt-20 pb-20 px-4",children:p.jsxs("div",{className:"max-w-4xl mx-auto",children:[(!d||u.showPassageWithQuestions)&&p.jsxs("div",{className:"bg-card rounded-2xl p-8 shadow-lg mb-6",children:[p.jsxs("div",{className:"mb-4 flex items-center gap-2 text-sm text-muted-foreground",children:[p.jsx("span",{children:"읽기 지문"}),p.jsxs("span",{className:"px-2 py-0.5 bg-secondary rounded text-xs",children:["난이도 ",u.difficulty,"/10"]})]}),p.jsx("div",{className:"text-foreground leading-relaxed whitespace-pre-wrap",style:{fontSize:`${u.fontSize}px`,lineHeight:u.lineHeight},children:u.text}),!d&&p.jsx("button",{onClick:K,className:"mt-6 px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:"다 읽었습니다"})]}),d&&x&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-card rounded-2xl p-8 shadow-lg",children:[p.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4",children:["문제 ",x.questionNumber]}),p.jsx("p",{className:"text-foreground mb-4 whitespace-pre-wrap",children:x.questionText}),x.questionType==="choice"&&x.options&&p.jsx("div",{className:"space-y-2",children:x.options.map(le=>p.jsx("button",{onClick:()=>{J(x.id,le.text),ae(x.id,le.text)},className:`w-full p-4 text-left rounded-lg border-2 transition-colors ${h[x.id]===le.text?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:p.jsx("span",{className:"text-foreground",children:le.text})},le.id))}),x.questionType==="short_answer"&&p.jsx("input",{type:"text",value:h[x.id]||"",onChange:le=>J(x.id,le.target.value),onBlur:le=>ae(x.id,le.target.value),className:"w-full px-4 py-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"답변을 입력하세요"}),x.questionType==="essay"&&p.jsx("textarea",{value:h[x.id]||"",onChange:le=>J(x.id,le.target.value),onBlur:le=>ae(x.id,le.target.value),className:"w-full px-4 py-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground min-h-[120px]",placeholder:"답변을 작성하세요"})]}),p.jsx("button",{onClick:Y,disabled:!h[x.id],className:"w-full px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.currentPassageIndex+1>=l.length?"테스트 제출":"다음"})]})]})}),k&&!1,n.error&&p.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 bg-destructive text-destructive-foreground px-6 py-3 rounded-lg shadow-lg z-50",children:n.error})]}):p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent mb-4"}),p.jsx("p",{className:"text-lg text-foreground",children:"Vision TEST 준비 중..."})]})})};function Ote(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Ote(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function It(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Ote(t))&&(r&&(r+=" "),r+=e);return r}var WVe=Array.isArray,Qi=WVe,GVe=typeof Ci=="object"&&Ci&&Ci.Object===Object&&Ci,Dte=GVe,KVe=Dte,XVe=typeof self=="object"&&self&&self.Object===Object&&self,qVe=KVe||XVe||Function("return this")(),Bl=qVe,YVe=Bl,JVe=YVe.Symbol,Tv=JVe,eQ=Tv,Rte=Object.prototype,ZVe=Rte.hasOwnProperty,eWe=Rte.toString,Ag=eQ?eQ.toStringTag:void 0;function tWe(t){var e=ZVe.call(t,Ag),n=t[Ag];try{t[Ag]=void 0;var r=!0}catch{}var s=eWe.call(t);return r&&(e?t[Ag]=n:delete t[Ag]),s}var nWe=tWe,rWe=Object.prototype,sWe=rWe.toString;function iWe(t){return sWe.call(t)}var oWe=iWe,tQ=Tv,aWe=nWe,lWe=oWe,cWe="[object Null]",uWe="[object Undefined]",nQ=tQ?tQ.toStringTag:void 0;function AWe(t){return t==null?t===void 0?uWe:cWe:nQ&&nQ in Object(t)?aWe(t):lWe(t)}var Oc=AWe;function dWe(t){return t!=null&&typeof t=="object"}var Dc=dWe,fWe=Oc,hWe=Dc,pWe="[object Symbol]";function mWe(t){return typeof t=="symbol"||hWe(t)&&fWe(t)==pWe}var gm=mWe,gWe=Qi,yWe=gm,xWe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vWe=/^\w*$/;function bWe(t,e){if(gWe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||yWe(t)?!0:vWe.test(t)||!xWe.test(t)||e!=null&&t in Object(e)}var jR=bWe;function wWe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var vA=wWe;const ym=Gt(vA);var CWe=Oc,SWe=vA,BWe="[object AsyncFunction]",NWe="[object Function]",EWe="[object GeneratorFunction]",IWe="[object Proxy]";function kWe(t){if(!SWe(t))return!1;var e=CWe(t);return e==NWe||e==EWe||e==BWe||e==IWe}var LR=kWe;const xt=Gt(LR);var TWe=Bl,FWe=TWe["__core-js_shared__"],$We=FWe,sE=$We,rQ=function(){var t=/[^.]+$/.exec(sE&&sE.keys&&sE.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function _We(t){return!!rQ&&rQ in t}var OWe=_We,DWe=Function.prototype,RWe=DWe.toString;function PWe(t){if(t!=null){try{return RWe.call(t)}catch{}try{return t+""}catch{}}return""}var Pte=PWe,UWe=LR,jWe=OWe,LWe=vA,MWe=Pte,QWe=/[\\^$.*+?()[\]{}|]/g,HWe=/^\[object .+?Constructor\]$/,zWe=Function.prototype,VWe=Object.prototype,WWe=zWe.toString,GWe=VWe.hasOwnProperty,KWe=RegExp("^"+WWe.call(GWe).replace(QWe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function XWe(t){if(!LWe(t)||jWe(t))return!1;var e=UWe(t)?KWe:HWe;return e.test(MWe(t))}var qWe=XWe;function YWe(t,e){return t==null?void 0:t[e]}var JWe=YWe,ZWe=qWe,eGe=JWe;function tGe(t,e){var n=eGe(t,e);return ZWe(n)?n:void 0}var bf=tGe,nGe=bf,rGe=nGe(Object,"create"),d3=rGe,sQ=d3;function sGe(){this.__data__=sQ?sQ(null):{},this.size=0}var iGe=sGe;function oGe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var aGe=oGe,lGe=d3,cGe="__lodash_hash_undefined__",uGe=Object.prototype,AGe=uGe.hasOwnProperty;function dGe(t){var e=this.__data__;if(lGe){var n=e[t];return n===cGe?void 0:n}return AGe.call(e,t)?e[t]:void 0}var fGe=dGe,hGe=d3,pGe=Object.prototype,mGe=pGe.hasOwnProperty;function gGe(t){var e=this.__data__;return hGe?e[t]!==void 0:mGe.call(e,t)}var yGe=gGe,xGe=d3,vGe="__lodash_hash_undefined__";function bGe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=xGe&&e===void 0?vGe:e,this}var wGe=bGe,CGe=iGe,SGe=aGe,BGe=fGe,NGe=yGe,EGe=wGe;function xm(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}xm.prototype.clear=CGe;xm.prototype.delete=SGe;xm.prototype.get=BGe;xm.prototype.has=NGe;xm.prototype.set=EGe;var IGe=xm;function kGe(){this.__data__=[],this.size=0}var TGe=kGe;function FGe(t,e){return t===e||t!==t&&e!==e}var MR=FGe,$Ge=MR;function _Ge(t,e){for(var n=t.length;n--;)if($Ge(t[n][0],e))return n;return-1}var f3=_Ge,OGe=f3,DGe=Array.prototype,RGe=DGe.splice;function PGe(t){var e=this.__data__,n=OGe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():RGe.call(e,n,1),--this.size,!0}var UGe=PGe,jGe=f3;function LGe(t){var e=this.__data__,n=jGe(e,t);return n<0?void 0:e[n][1]}var MGe=LGe,QGe=f3;function HGe(t){return QGe(this.__data__,t)>-1}var zGe=HGe,VGe=f3;function WGe(t,e){var n=this.__data__,r=VGe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var GGe=WGe,KGe=TGe,XGe=UGe,qGe=MGe,YGe=zGe,JGe=GGe;function vm(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}vm.prototype.clear=KGe;vm.prototype.delete=XGe;vm.prototype.get=qGe;vm.prototype.has=YGe;vm.prototype.set=JGe;var h3=vm,ZGe=bf,eKe=Bl,tKe=ZGe(eKe,"Map"),QR=tKe,iQ=IGe,nKe=h3,rKe=QR;function sKe(){this.size=0,this.__data__={hash:new iQ,map:new(rKe||nKe),string:new iQ}}var iKe=sKe;function oKe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var aKe=oKe,lKe=aKe;function cKe(t,e){var n=t.__data__;return lKe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var p3=cKe,uKe=p3;function AKe(t){var e=uKe(this,t).delete(t);return this.size-=e?1:0,e}var dKe=AKe,fKe=p3;function hKe(t){return fKe(this,t).get(t)}var pKe=hKe,mKe=p3;function gKe(t){return mKe(this,t).has(t)}var yKe=gKe,xKe=p3;function vKe(t,e){var n=xKe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var bKe=vKe,wKe=iKe,CKe=dKe,SKe=pKe,BKe=yKe,NKe=bKe;function bm(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}bm.prototype.clear=wKe;bm.prototype.delete=CKe;bm.prototype.get=SKe;bm.prototype.has=BKe;bm.prototype.set=NKe;var HR=bm,Ute=HR,EKe="Expected a function";function zR(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(EKe);var n=function(){var r=arguments,s=e?e.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var o=t.apply(this,r);return n.cache=i.set(s,o)||i,o};return n.cache=new(zR.Cache||Ute),n}zR.Cache=Ute;var jte=zR;const IKe=Gt(jte);var kKe=jte,TKe=500;function FKe(t){var e=kKe(t,function(r){return n.size===TKe&&n.clear(),r}),n=e.cache;return e}var $Ke=FKe,_Ke=$Ke,OKe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,DKe=/\\(\\)?/g,RKe=_Ke(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(OKe,function(n,r,s,i){e.push(s?i.replace(DKe,"$1"):r||n)}),e}),PKe=RKe;function UKe(t,e){for(var n=-1,r=t==null?0:t.length,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}var VR=UKe,oQ=Tv,jKe=VR,LKe=Qi,MKe=gm,aQ=oQ?oQ.prototype:void 0,lQ=aQ?aQ.toString:void 0;function Lte(t){if(typeof t=="string")return t;if(LKe(t))return jKe(t,Lte)+"";if(MKe(t))return lQ?lQ.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var QKe=Lte,HKe=QKe;function zKe(t){return t==null?"":HKe(t)}var Mte=zKe,VKe=Qi,WKe=jR,GKe=PKe,KKe=Mte;function XKe(t,e){return VKe(t)?t:WKe(t,e)?[t]:GKe(KKe(t))}var Qte=XKe,qKe=gm;function YKe(t){if(typeof t=="string"||qKe(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var m3=YKe,JKe=Qte,ZKe=m3;function eXe(t,e){e=JKe(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[ZKe(e[n++])];return n&&n==r?t:void 0}var WR=eXe,tXe=WR;function nXe(t,e,n){var r=t==null?void 0:tXe(t,e);return r===void 0?n:r}var Hte=nXe;const Lo=Gt(Hte);function rXe(t){return t==null}var sXe=rXe;const Ht=Gt(sXe);var iXe=Oc,oXe=Qi,aXe=Dc,lXe="[object String]";function cXe(t){return typeof t=="string"||!oXe(t)&&aXe(t)&&iXe(t)==lXe}var uXe=cXe;const nf=Gt(uXe);var zte={exports:{}},ln={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GR=Symbol.for("react.element"),KR=Symbol.for("react.portal"),g3=Symbol.for("react.fragment"),y3=Symbol.for("react.strict_mode"),x3=Symbol.for("react.profiler"),v3=Symbol.for("react.provider"),b3=Symbol.for("react.context"),AXe=Symbol.for("react.server_context"),w3=Symbol.for("react.forward_ref"),C3=Symbol.for("react.suspense"),S3=Symbol.for("react.suspense_list"),B3=Symbol.for("react.memo"),N3=Symbol.for("react.lazy"),dXe=Symbol.for("react.offscreen"),Vte;Vte=Symbol.for("react.module.reference");function Jo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case GR:switch(t=t.type,t){case g3:case x3:case y3:case C3:case S3:return t;default:switch(t=t&&t.$$typeof,t){case AXe:case b3:case w3:case N3:case B3:case v3:return t;default:return e}}case KR:return e}}}ln.ContextConsumer=b3;ln.ContextProvider=v3;ln.Element=GR;ln.ForwardRef=w3;ln.Fragment=g3;ln.Lazy=N3;ln.Memo=B3;ln.Portal=KR;ln.Profiler=x3;ln.StrictMode=y3;ln.Suspense=C3;ln.SuspenseList=S3;ln.isAsyncMode=function(){return!1};ln.isConcurrentMode=function(){return!1};ln.isContextConsumer=function(t){return Jo(t)===b3};ln.isContextProvider=function(t){return Jo(t)===v3};ln.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===GR};ln.isForwardRef=function(t){return Jo(t)===w3};ln.isFragment=function(t){return Jo(t)===g3};ln.isLazy=function(t){return Jo(t)===N3};ln.isMemo=function(t){return Jo(t)===B3};ln.isPortal=function(t){return Jo(t)===KR};ln.isProfiler=function(t){return Jo(t)===x3};ln.isStrictMode=function(t){return Jo(t)===y3};ln.isSuspense=function(t){return Jo(t)===C3};ln.isSuspenseList=function(t){return Jo(t)===S3};ln.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===g3||t===x3||t===y3||t===C3||t===S3||t===dXe||typeof t=="object"&&t!==null&&(t.$$typeof===N3||t.$$typeof===B3||t.$$typeof===v3||t.$$typeof===b3||t.$$typeof===w3||t.$$typeof===Vte||t.getModuleId!==void 0)};ln.typeOf=Jo;zte.exports=ln;var fXe=zte.exports,hXe=Oc,pXe=Dc,mXe="[object Number]";function gXe(t){return typeof t=="number"||pXe(t)&&hXe(t)==mXe}var Wte=gXe;const yXe=Gt(Wte);var xXe=Wte;function vXe(t){return xXe(t)&&t!=+t}var bXe=vXe;const Fv=Gt(bXe);var ma=function(e){return e===0?0:e>0?1:-1},cd=function(e){return nf(e)&&e.indexOf("%")===e.length-1},je=function(e){return yXe(e)&&!Fv(e)},wXe=function(e){return Ht(e)},zr=function(e){return je(e)||nf(e)},CXe=0,E3=function(e){var n=++CXe;return"".concat(e||"").concat(n)},ga=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!je(e)&&!nf(e))return r;var i;if(cd(e)){var o=e.indexOf("%");i=n*parseFloat(e.slice(0,o))/100}else i=+e;return Fv(i)&&(i=r),s&&i>n&&(i=n),i},nu=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},SXe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},s=0;s<n;s++)if(!r[e[s]])r[e[s]]=!0;else return!0;return!1},tl=function(e,n){return je(e)&&je(n)?function(r){return e+r*(n-e)}:function(){return n}};function xT(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Lo(r,e))===n})}var BXe=function(e,n){return je(e)&&je(n)?e-n:nf(e)&&nf(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Dh(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function vT(t){"@babel/helpers - typeof";return vT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vT(t)}var NXe=["viewBox","children"],EXe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],cQ=["points","pathLength"],iE={svg:NXe,polygon:cQ,polyline:cQ},XR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],_2=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(Q.isValidElement(e)&&(r=e.props),!ym(r))return null;var s={};return Object.keys(r).forEach(function(i){XR.includes(i)&&(s[i]=n||function(o){return r[i](r,o)})}),s},IXe=function(e,n,r){return function(s){return e(n,r,s),null}},gp=function(e,n,r){if(!ym(e)||vT(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(i){var o=e[i];XR.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=IXe(o,n,r))}),s},kXe=["children"],TXe=["children"];function uQ(t,e){if(t==null)return{};var n=FXe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function FXe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var AQ={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},lc=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},dQ=null,oE=null,qR=function t(e){if(e===dQ&&Array.isArray(oE))return oE;var n=[];return Q.Children.forEach(e,function(r){Ht(r)||(fXe.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),oE=n,dQ=e,n};function Sa(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(s){return lc(s)}):r=[lc(e)],qR(t).forEach(function(s){var i=Lo(s,"type.displayName")||Lo(s,"type.name");r.indexOf(i)!==-1&&n.push(s)}),n}function qi(t,e){var n=Sa(t,e);return n&&n[0]}var fQ=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,s=n.height;return!(!je(r)||r<=0||!je(s)||s<=0)},$Xe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],_Xe=function(e){return e&&e.type&&nf(e.type)&&$Xe.indexOf(e.type)>=0},OXe=function(e,n,r,s){var i,o=(i=iE==null?void 0:iE[s])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!xt(e)&&(s&&o.includes(n)||EXe.includes(n))||r&&XR.includes(n)},ut=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(Q.isValidElement(e)&&(s=e.props),!ym(s))return null;var i={};return Object.keys(s).forEach(function(o){var a;OXe((a=s)===null||a===void 0?void 0:a[o],o,n,r)&&(i[o]=s[o])}),i},bT=function t(e,n){if(e===n)return!0;var r=Q.Children.count(e);if(r!==Q.Children.count(n))return!1;if(r===0)return!0;if(r===1)return hQ(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var s=0;s<r;s++){var i=e[s],o=n[s];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!hQ(i,o))return!1}return!0},hQ=function(e,n){if(Ht(e)&&Ht(n))return!0;if(!Ht(e)&&!Ht(n)){var r=e.props||{},s=r.children,i=uQ(r,kXe),o=n.props||{},a=o.children,l=uQ(o,TXe);return s&&a?Dh(i,l)&&bT(s,a):!s&&!a?Dh(i,l):!1}return!1},pQ=function(e,n){var r=[],s={};return qR(e).forEach(function(i,o){if(_Xe(i))r.push(i);else if(i){var a=lc(i.type),l=n[a]||{},c=l.handler,u=l.once;if(c&&(!u||!s[a])){var A=c(i,a,o);r.push(A),s[a]=!0}}}),r},DXe=function(e){var n=e&&e.type;return n&&AQ[n]?AQ[n]:null},RXe=function(e,n){return qR(n).indexOf(e)},PXe=["children","width","height","viewBox","className","style","title","desc"];function wT(){return wT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wT.apply(this,arguments)}function UXe(t,e){if(t==null)return{};var n=jXe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jXe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function CT(t){var e=t.children,n=t.width,r=t.height,s=t.viewBox,i=t.className,o=t.style,a=t.title,l=t.desc,c=UXe(t,PXe),u=s||{width:n,height:r,x:0,y:0},A=It("recharts-surface",i);return ie.createElement("svg",wT({},ut(c,!0,"svg"),{className:A,width:n,height:r,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ie.createElement("title",null,a),ie.createElement("desc",null,l),e)}var LXe=["children","className"];function ST(){return ST=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ST.apply(this,arguments)}function MXe(t,e){if(t==null)return{};var n=QXe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function QXe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var yn=ie.forwardRef(function(t,e){var n=t.children,r=t.className,s=MXe(t,LXe),i=It("recharts-layer",r);return ie.createElement("g",ST({className:i},ut(s,!0),{ref:e}),n)}),cc=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i]};function HXe(t,e,n){var r=-1,s=t.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(s);++r<s;)i[r]=t[r+e];return i}var zXe=HXe,VXe=zXe;function WXe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:VXe(t,e,n)}var GXe=WXe,KXe="\\ud800-\\udfff",XXe="\\u0300-\\u036f",qXe="\\ufe20-\\ufe2f",YXe="\\u20d0-\\u20ff",JXe=XXe+qXe+YXe,ZXe="\\ufe0e\\ufe0f",eqe="\\u200d",tqe=RegExp("["+eqe+KXe+JXe+ZXe+"]");function nqe(t){return tqe.test(t)}var Gte=nqe;function rqe(t){return t.split("")}var sqe=rqe,Kte="\\ud800-\\udfff",iqe="\\u0300-\\u036f",oqe="\\ufe20-\\ufe2f",aqe="\\u20d0-\\u20ff",lqe=iqe+oqe+aqe,cqe="\\ufe0e\\ufe0f",uqe="["+Kte+"]",BT="["+lqe+"]",NT="\\ud83c[\\udffb-\\udfff]",Aqe="(?:"+BT+"|"+NT+")",Xte="[^"+Kte+"]",qte="(?:\\ud83c[\\udde6-\\uddff]){2}",Yte="[\\ud800-\\udbff][\\udc00-\\udfff]",dqe="\\u200d",Jte=Aqe+"?",Zte="["+cqe+"]?",fqe="(?:"+dqe+"(?:"+[Xte,qte,Yte].join("|")+")"+Zte+Jte+")*",hqe=Zte+Jte+fqe,pqe="(?:"+[Xte+BT+"?",BT,qte,Yte,uqe].join("|")+")",mqe=RegExp(NT+"(?="+NT+")|"+pqe+hqe,"g");function gqe(t){return t.match(mqe)||[]}var yqe=gqe,xqe=sqe,vqe=Gte,bqe=yqe;function wqe(t){return vqe(t)?bqe(t):xqe(t)}var Cqe=wqe,Sqe=GXe,Bqe=Gte,Nqe=Cqe,Eqe=Mte;function Iqe(t){return function(e){e=Eqe(e);var n=Bqe(e)?Nqe(e):void 0,r=n?n[0]:e.charAt(0),s=n?Sqe(n,1).join(""):e.slice(1);return r[t]()+s}}var kqe=Iqe,Tqe=kqe,Fqe=Tqe("toUpperCase"),$qe=Fqe;const I3=Gt($qe);function Cn(t){return function(){return t}}const ene=Math.cos,O2=Math.sin,Ra=Math.sqrt,D2=Math.PI,k3=2*D2,ET=Math.PI,IT=2*ET,WA=1e-6,_qe=IT-WA;function tne(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Oqe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return tne;const n=10**e;return function(r){this._+=r[0];for(let s=1,i=r.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class Dqe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?tne:Oqe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,s){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,n,r,s,i,o){this._append`C${+e},${+n},${+r},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(e,n,r,s,i){if(e=+e,n=+n,r=+r,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,l=r-e,c=s-n,u=o-e,A=a-n,d=u*u+A*A;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>WA)if(!(Math.abs(A*l-c*u)>WA)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let f=r-o,h=s-a,m=l*l+c*c,g=f*f+h*h,y=Math.sqrt(m),x=Math.sqrt(d),v=i*Math.tan((ET-Math.acos((m+d-g)/(2*y*x)))/2),b=v/x,w=v/y;Math.abs(b-1)>WA&&this._append`L${e+b*u},${n+b*A}`,this._append`A${i},${i},0,0,${+(A*f>u*h)},${this._x1=e+w*l},${this._y1=n+w*c}`}}arc(e,n,r,s,i,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(s),l=r*Math.sin(s),c=e+a,u=n+l,A=1^o,d=o?s-i:i-s;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>WA||Math.abs(this._y1-u)>WA)&&this._append`L${c},${u}`,r&&(d<0&&(d=d%IT+IT),d>_qe?this._append`A${r},${r},0,1,${A},${e-a},${n-l}A${r},${r},0,1,${A},${this._x1=c},${this._y1=u}`:d>WA&&this._append`A${r},${r},0,${+(d>=ET)},${A},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function YR(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Dqe(e)}function JR(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function nne(t){this._context=t}nne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function T3(t){return new nne(t)}function rne(t){return t[0]}function sne(t){return t[1]}function ine(t,e){var n=Cn(!0),r=null,s=T3,i=null,o=YR(a);t=typeof t=="function"?t:t===void 0?rne:Cn(t),e=typeof e=="function"?e:e===void 0?sne:Cn(e);function a(l){var c,u=(l=JR(l)).length,A,d=!1,f;for(r==null&&(i=s(f=o())),c=0;c<=u;++c)!(c<u&&n(A=l[c],c,l))===d&&((d=!d)?i.lineStart():i.lineEnd()),d&&i.point(+t(A,c,l),+e(A,c,l));if(f)return i=null,f+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Cn(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Cn(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Cn(!!l),a):n},a.curve=function(l){return arguments.length?(s=l,r!=null&&(i=s(r)),a):s},a.context=function(l){return arguments.length?(l==null?r=i=null:i=s(r=l),a):r},a}function vb(t,e,n){var r=null,s=Cn(!0),i=null,o=T3,a=null,l=YR(c);t=typeof t=="function"?t:t===void 0?rne:Cn(+t),e=typeof e=="function"?e:Cn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?sne:Cn(+n);function c(A){var d,f,h,m=(A=JR(A)).length,g,y=!1,x,v=new Array(m),b=new Array(m);for(i==null&&(a=o(x=l())),d=0;d<=m;++d){if(!(d<m&&s(g=A[d],d,A))===y)if(y=!y)f=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=d-1;h>=f;--h)a.point(v[h],b[h]);a.lineEnd(),a.areaEnd()}y&&(v[d]=+t(g,d,A),b[d]=+e(g,d,A),a.point(r?+r(g,d,A):v[d],n?+n(g,d,A):b[d]))}if(x)return a=null,x+""||null}function u(){return ine().defined(s).curve(o).context(i)}return c.x=function(A){return arguments.length?(t=typeof A=="function"?A:Cn(+A),r=null,c):t},c.x0=function(A){return arguments.length?(t=typeof A=="function"?A:Cn(+A),c):t},c.x1=function(A){return arguments.length?(r=A==null?null:typeof A=="function"?A:Cn(+A),c):r},c.y=function(A){return arguments.length?(e=typeof A=="function"?A:Cn(+A),n=null,c):e},c.y0=function(A){return arguments.length?(e=typeof A=="function"?A:Cn(+A),c):e},c.y1=function(A){return arguments.length?(n=A==null?null:typeof A=="function"?A:Cn(+A),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(A){return arguments.length?(s=typeof A=="function"?A:Cn(!!A),c):s},c.curve=function(A){return arguments.length?(o=A,i!=null&&(a=o(i)),c):o},c.context=function(A){return arguments.length?(A==null?i=a=null:a=o(i=A),c):i},c}class one{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Rqe(t){return new one(t,!0)}function Pqe(t){return new one(t,!1)}const ZR={draw(t,e){const n=Ra(e/D2);t.moveTo(n,0),t.arc(0,0,n,0,k3)}},Uqe={draw(t,e){const n=Ra(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},ane=Ra(1/3),jqe=ane*2,Lqe={draw(t,e){const n=Ra(e/jqe),r=n*ane;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Mqe={draw(t,e){const n=Ra(e),r=-n/2;t.rect(r,r,n,n)}},Qqe=.8908130915292852,lne=O2(D2/10)/O2(7*D2/10),Hqe=O2(k3/10)*lne,zqe=-ene(k3/10)*lne,Vqe={draw(t,e){const n=Ra(e*Qqe),r=Hqe*n,s=zqe*n;t.moveTo(0,-n),t.lineTo(r,s);for(let i=1;i<5;++i){const o=k3*i/5,a=ene(o),l=O2(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*s,l*r+a*s)}t.closePath()}},aE=Ra(3),Wqe={draw(t,e){const n=-Ra(e/(aE*3));t.moveTo(0,n*2),t.lineTo(-aE*n,-n),t.lineTo(aE*n,-n),t.closePath()}},po=-.5,mo=Ra(3)/2,kT=1/Ra(12),Gqe=(kT/2+1)*3,Kqe={draw(t,e){const n=Ra(e/Gqe),r=n/2,s=n*kT,i=r,o=n*kT+n,a=-i,l=o;t.moveTo(r,s),t.lineTo(i,o),t.lineTo(a,l),t.lineTo(po*r-mo*s,mo*r+po*s),t.lineTo(po*i-mo*o,mo*i+po*o),t.lineTo(po*a-mo*l,mo*a+po*l),t.lineTo(po*r+mo*s,po*s-mo*r),t.lineTo(po*i+mo*o,po*o-mo*i),t.lineTo(po*a+mo*l,po*l-mo*a),t.closePath()}};function Xqe(t,e){let n=null,r=YR(s);t=typeof t=="function"?t:Cn(t||ZR),e=typeof e=="function"?e:Cn(e===void 0?64:+e);function s(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(t=typeof i=="function"?i:Cn(i),s):t},s.size=function(i){return arguments.length?(e=typeof i=="function"?i:Cn(+i),s):e},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function R2(){}function P2(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function cne(t){this._context=t}cne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:P2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:P2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function qqe(t){return new cne(t)}function une(t){this._context=t}une.prototype={areaStart:R2,areaEnd:R2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:P2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Yqe(t){return new une(t)}function Ane(t){this._context=t}Ane.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:P2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Jqe(t){return new Ane(t)}function dne(t){this._context=t}dne.prototype={areaStart:R2,areaEnd:R2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Zqe(t){return new dne(t)}function mQ(t){return t<0?-1:1}function gQ(t,e,n){var r=t._x1-t._x0,s=e-t._x1,i=(t._y1-t._y0)/(r||s<0&&-0),o=(n-t._y1)/(s||r<0&&-0),a=(i*s+o*r)/(r+s);return(mQ(i)+mQ(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(a))||0}function yQ(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function lE(t,e,n){var r=t._x0,s=t._y0,i=t._x1,o=t._y1,a=(i-r)/3;t._context.bezierCurveTo(r+a,s+a*e,i-a,o-a*n,i,o)}function U2(t){this._context=t}U2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:lE(this,this._t0,yQ(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,lE(this,yQ(this,n=gQ(this,t,e)),n);break;default:lE(this,this._t0,n=gQ(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function fne(t){this._context=new hne(t)}(fne.prototype=Object.create(U2.prototype)).point=function(t,e){U2.prototype.point.call(this,e,t)};function hne(t){this._context=t}hne.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,s,i){this._context.bezierCurveTo(e,t,r,n,i,s)}};function eYe(t){return new U2(t)}function tYe(t){return new fne(t)}function pne(t){this._context=t}pne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=xQ(t),s=xQ(e),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],s[0][i],r[1][i],s[1][i],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function xQ(t){var e,n=t.length-1,r,s=new Array(n),i=new Array(n),o=new Array(n);for(s[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,i[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=s[e]/i[e-1],i[e]-=r,o[e]-=r*o[e-1];for(s[n-1]=o[n-1]/i[n-1],e=n-2;e>=0;--e)s[e]=(o[e]-s[e+1])/i[e];for(i[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)i[e]=2*t[e+1]-s[e+1];return[s,i]}function nYe(t){return new pne(t)}function F3(t,e){this._context=t,this._t=e}F3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function rYe(t){return new F3(t,.5)}function sYe(t){return new F3(t,0)}function iYe(t){return new F3(t,1)}function yp(t,e){if((o=t.length)>1)for(var n=1,r,s,i=t[e[0]],o,a=i.length;n<o;++n)for(s=i,i=t[e[n]],r=0;r<a;++r)i[r][1]+=i[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function TT(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function oYe(t,e){return t[e]}function aYe(t){const e=[];return e.key=t,e}function lYe(){var t=Cn([]),e=TT,n=yp,r=oYe;function s(i){var o=Array.from(t.apply(this,arguments),aYe),a,l=o.length,c=-1,u;for(const A of i)for(a=0,++c;a<l;++a)(o[a][c]=[0,+r(A,o[a].key,c,i)]).data=A;for(a=0,u=JR(e(o));a<l;++a)o[u[a]].index=a;return n(o,u),o}return s.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Cn(Array.from(i)),s):t},s.value=function(i){return arguments.length?(r=typeof i=="function"?i:Cn(+i),s):r},s.order=function(i){return arguments.length?(e=i==null?TT:typeof i=="function"?i:Cn(Array.from(i)),s):e},s.offset=function(i){return arguments.length?(n=i??yp,s):n},s}function cYe(t,e){if((r=t.length)>0){for(var n,r,s=0,i=t[0].length,o;s<i;++s){for(o=n=0;n<r;++n)o+=t[n][s][1]||0;if(o)for(n=0;n<r;++n)t[n][s][1]/=o}yp(t,e)}}function uYe(t,e){if((s=t.length)>0){for(var n=0,r=t[e[0]],s,i=r.length;n<i;++n){for(var o=0,a=0;o<s;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}yp(t,e)}}function AYe(t,e){if(!(!((o=t.length)>0)||!((i=(s=t[e[0]]).length)>0))){for(var n=0,r=1,s,i,o;r<i;++r){for(var a=0,l=0,c=0;a<o;++a){for(var u=t[e[a]],A=u[r][1]||0,d=u[r-1][1]||0,f=(A-d)/2,h=0;h<a;++h){var m=t[e[h]],g=m[r][1]||0,y=m[r-1][1]||0;f+=g-y}l+=A,c+=f*A}s[r-1][1]+=s[r-1][0]=n,l&&(n-=c/l)}s[r-1][1]+=s[r-1][0]=n,yp(t,e)}}function u0(t){"@babel/helpers - typeof";return u0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u0(t)}var dYe=["type","size","sizeType"];function FT(){return FT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FT.apply(this,arguments)}function vQ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function bQ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vQ(Object(n),!0).forEach(function(r){fYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vQ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fYe(t,e,n){return e=hYe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hYe(t){var e=pYe(t,"string");return u0(e)=="symbol"?e:e+""}function pYe(t,e){if(u0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(u0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mYe(t,e){if(t==null)return{};var n=gYe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gYe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var mne={symbolCircle:ZR,symbolCross:Uqe,symbolDiamond:Lqe,symbolSquare:Mqe,symbolStar:Vqe,symbolTriangle:Wqe,symbolWye:Kqe},yYe=Math.PI/180,xYe=function(e){var n="symbol".concat(I3(e));return mne[n]||ZR},vYe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*yYe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},bYe=function(e,n){mne["symbol".concat(I3(e))]=n},eP=function(e){var n=e.type,r=n===void 0?"circle":n,s=e.size,i=s===void 0?64:s,o=e.sizeType,a=o===void 0?"area":o,l=mYe(e,dYe),c=bQ(bQ({},l),{},{type:r,size:i,sizeType:a}),u=function(){var g=xYe(r),y=Xqe().type(g).size(vYe(i,a,r));return y()},A=c.className,d=c.cx,f=c.cy,h=ut(c,!0);return d===+d&&f===+f&&i===+i?ie.createElement("path",FT({},h,{className:It("recharts-symbols",A),transform:"translate(".concat(d,", ").concat(f,")"),d:u()})):null};eP.registerSymbol=bYe;function xp(t){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xp(t)}function $T(){return $T=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$T.apply(this,arguments)}function wQ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function wYe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wQ(Object(n),!0).forEach(function(r){A0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wQ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SYe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yne(r.key),r)}}function BYe(t,e,n){return e&&SYe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function NYe(t,e,n){return e=j2(e),EYe(t,gne()?Reflect.construct(e,n||[],j2(t).constructor):e.apply(t,n))}function EYe(t,e){if(e&&(xp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IYe(t)}function IYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gne=function(){return!!t})()}function j2(t){return j2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},j2(t)}function kYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_T(t,e)}function _T(t,e){return _T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},_T(t,e)}function A0(t,e,n){return e=yne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yne(t){var e=TYe(t,"string");return xp(e)=="symbol"?e:e+""}function TYe(t,e){if(xp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var go=32,tP=function(t){function e(){return CYe(this,e),NYe(this,e,arguments)}return kYe(e,t),BYe(e,[{key:"renderIcon",value:function(r){var s=this.props.inactiveColor,i=go/2,o=go/6,a=go/3,l=r.inactive?s:r.color;if(r.type==="plainline")return ie.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:go,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return ie.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(go,"M").concat(2*a,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return ie.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(go/8,"h").concat(go,"v").concat(go*3/4,"h").concat(-go,"z"),className:"recharts-legend-icon"});if(ie.isValidElement(r.legendIcon)){var c=wYe({},r);return delete c.legendIcon,ie.cloneElement(r.legendIcon,c)}return ie.createElement(eP,{fill:l,cx:i,cy:i,size:go,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,s=this.props,i=s.payload,o=s.iconSize,a=s.layout,l=s.formatter,c=s.inactiveColor,u={x:0,y:0,width:go,height:go},A={display:a==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(f,h){var m=f.formatter||l,g=It(A0(A0({"recharts-legend-item":!0},"legend-item-".concat(h),!0),"inactive",f.inactive));if(f.type==="none")return null;var y=xt(f.value)?null:f.value;cc(!xt(f.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=f.inactive?c:f.color;return ie.createElement("li",$T({className:g,style:A,key:"legend-item-".concat(h)},gp(r.props,f,h)),ie.createElement(CT,{width:o,height:o,viewBox:u,style:d},r.renderIcon(f)),ie.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},m?m(y,f,h):y))})}},{key:"render",value:function(){var r=this.props,s=r.payload,i=r.layout,o=r.align;if(!s||!s.length)return null;var a={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return ie.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])}(Q.PureComponent);A0(tP,"displayName","Legend");A0(tP,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var FYe=h3;function $Ye(){this.__data__=new FYe,this.size=0}var _Ye=$Ye;function OYe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var DYe=OYe;function RYe(t){return this.__data__.get(t)}var PYe=RYe;function UYe(t){return this.__data__.has(t)}var jYe=UYe,LYe=h3,MYe=QR,QYe=HR,HYe=200;function zYe(t,e){var n=this.__data__;if(n instanceof LYe){var r=n.__data__;if(!MYe||r.length<HYe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new QYe(r)}return n.set(t,e),this.size=n.size,this}var VYe=zYe,WYe=h3,GYe=_Ye,KYe=DYe,XYe=PYe,qYe=jYe,YYe=VYe;function wm(t){var e=this.__data__=new WYe(t);this.size=e.size}wm.prototype.clear=GYe;wm.prototype.delete=KYe;wm.prototype.get=XYe;wm.prototype.has=qYe;wm.prototype.set=YYe;var xne=wm,JYe="__lodash_hash_undefined__";function ZYe(t){return this.__data__.set(t,JYe),this}var eJe=ZYe;function tJe(t){return this.__data__.has(t)}var nJe=tJe,rJe=HR,sJe=eJe,iJe=nJe;function L2(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new rJe;++e<n;)this.add(t[e])}L2.prototype.add=L2.prototype.push=sJe;L2.prototype.has=iJe;var vne=L2;function oJe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var bne=oJe;function aJe(t,e){return t.has(e)}var wne=aJe,lJe=vne,cJe=bne,uJe=wne,AJe=1,dJe=2;function fJe(t,e,n,r,s,i){var o=n&AJe,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=i.get(t),u=i.get(e);if(c&&u)return c==e&&u==t;var A=-1,d=!0,f=n&dJe?new lJe:void 0;for(i.set(t,e),i.set(e,t);++A<a;){var h=t[A],m=e[A];if(r)var g=o?r(m,h,A,e,t,i):r(h,m,A,t,e,i);if(g!==void 0){if(g)continue;d=!1;break}if(f){if(!cJe(e,function(y,x){if(!uJe(f,x)&&(h===y||s(h,y,n,r,i)))return f.push(x)})){d=!1;break}}else if(!(h===m||s(h,m,n,r,i))){d=!1;break}}return i.delete(t),i.delete(e),d}var Cne=fJe,hJe=Bl,pJe=hJe.Uint8Array,mJe=pJe;function gJe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,s){n[++e]=[s,r]}),n}var yJe=gJe;function xJe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var nP=xJe,CQ=Tv,SQ=mJe,vJe=MR,bJe=Cne,wJe=yJe,CJe=nP,SJe=1,BJe=2,NJe="[object Boolean]",EJe="[object Date]",IJe="[object Error]",kJe="[object Map]",TJe="[object Number]",FJe="[object RegExp]",$Je="[object Set]",_Je="[object String]",OJe="[object Symbol]",DJe="[object ArrayBuffer]",RJe="[object DataView]",BQ=CQ?CQ.prototype:void 0,cE=BQ?BQ.valueOf:void 0;function PJe(t,e,n,r,s,i,o){switch(n){case RJe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case DJe:return!(t.byteLength!=e.byteLength||!i(new SQ(t),new SQ(e)));case NJe:case EJe:case TJe:return vJe(+t,+e);case IJe:return t.name==e.name&&t.message==e.message;case FJe:case _Je:return t==e+"";case kJe:var a=wJe;case $Je:var l=r&SJe;if(a||(a=CJe),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=BJe,o.set(t,e);var u=bJe(a(t),a(e),r,s,i,o);return o.delete(t),u;case OJe:if(cE)return cE.call(t)==cE.call(e)}return!1}var UJe=PJe;function jJe(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var Sne=jJe,LJe=Sne,MJe=Qi;function QJe(t,e,n){var r=e(t);return MJe(t)?r:LJe(r,n(t))}var HJe=QJe;function zJe(t,e){for(var n=-1,r=t==null?0:t.length,s=0,i=[];++n<r;){var o=t[n];e(o,n,t)&&(i[s++]=o)}return i}var VJe=zJe;function WJe(){return[]}var GJe=WJe,KJe=VJe,XJe=GJe,qJe=Object.prototype,YJe=qJe.propertyIsEnumerable,NQ=Object.getOwnPropertySymbols,JJe=NQ?function(t){return t==null?[]:(t=Object(t),KJe(NQ(t),function(e){return YJe.call(t,e)}))}:XJe,ZJe=JJe;function eZe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var tZe=eZe,nZe=Oc,rZe=Dc,sZe="[object Arguments]";function iZe(t){return rZe(t)&&nZe(t)==sZe}var oZe=iZe,EQ=oZe,aZe=Dc,Bne=Object.prototype,lZe=Bne.hasOwnProperty,cZe=Bne.propertyIsEnumerable,uZe=EQ(function(){return arguments}())?EQ:function(t){return aZe(t)&&lZe.call(t,"callee")&&!cZe.call(t,"callee")},rP=uZe,M2={exports:{}};function AZe(){return!1}var dZe=AZe;M2.exports;(function(t,e){var n=Bl,r=dZe,s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===s,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(M2,M2.exports);var Nne=M2.exports,fZe=9007199254740991,hZe=/^(?:0|[1-9]\d*)$/;function pZe(t,e){var n=typeof t;return e=e??fZe,!!e&&(n=="number"||n!="symbol"&&hZe.test(t))&&t>-1&&t%1==0&&t<e}var sP=pZe,mZe=9007199254740991;function gZe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=mZe}var iP=gZe,yZe=Oc,xZe=iP,vZe=Dc,bZe="[object Arguments]",wZe="[object Array]",CZe="[object Boolean]",SZe="[object Date]",BZe="[object Error]",NZe="[object Function]",EZe="[object Map]",IZe="[object Number]",kZe="[object Object]",TZe="[object RegExp]",FZe="[object Set]",$Ze="[object String]",_Ze="[object WeakMap]",OZe="[object ArrayBuffer]",DZe="[object DataView]",RZe="[object Float32Array]",PZe="[object Float64Array]",UZe="[object Int8Array]",jZe="[object Int16Array]",LZe="[object Int32Array]",MZe="[object Uint8Array]",QZe="[object Uint8ClampedArray]",HZe="[object Uint16Array]",zZe="[object Uint32Array]",Fn={};Fn[RZe]=Fn[PZe]=Fn[UZe]=Fn[jZe]=Fn[LZe]=Fn[MZe]=Fn[QZe]=Fn[HZe]=Fn[zZe]=!0;Fn[bZe]=Fn[wZe]=Fn[OZe]=Fn[CZe]=Fn[DZe]=Fn[SZe]=Fn[BZe]=Fn[NZe]=Fn[EZe]=Fn[IZe]=Fn[kZe]=Fn[TZe]=Fn[FZe]=Fn[$Ze]=Fn[_Ze]=!1;function VZe(t){return vZe(t)&&xZe(t.length)&&!!Fn[yZe(t)]}var WZe=VZe;function GZe(t){return function(e){return t(e)}}var Ene=GZe,Q2={exports:{}};Q2.exports;(function(t,e){var n=Dte,r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,i=s&&s.exports===r,o=i&&n.process,a=function(){try{var l=s&&s.require&&s.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(Q2,Q2.exports);var KZe=Q2.exports,XZe=WZe,qZe=Ene,IQ=KZe,kQ=IQ&&IQ.isTypedArray,YZe=kQ?qZe(kQ):XZe,Ine=YZe,JZe=tZe,ZZe=rP,eet=Qi,tet=Nne,net=sP,ret=Ine,set=Object.prototype,iet=set.hasOwnProperty;function oet(t,e){var n=eet(t),r=!n&&ZZe(t),s=!n&&!r&&tet(t),i=!n&&!r&&!s&&ret(t),o=n||r||s||i,a=o?JZe(t.length,String):[],l=a.length;for(var c in t)(e||iet.call(t,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||net(c,l)))&&a.push(c);return a}var aet=oet,cet=Object.prototype;function uet(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||cet;return t===n}var Aet=uet;function det(t,e){return function(n){return t(e(n))}}var kne=det,fet=kne,het=fet(Object.keys,Object),pet=het,met=Aet,get=pet,yet=Object.prototype,xet=yet.hasOwnProperty;function vet(t){if(!met(t))return get(t);var e=[];for(var n in Object(t))xet.call(t,n)&&n!="constructor"&&e.push(n);return e}var bet=vet,wet=LR,Cet=iP;function Bet(t){return t!=null&&Cet(t.length)&&!wet(t)}var $v=Bet,Net=aet,Eet=bet,Iet=$v;function ket(t){return Iet(t)?Net(t):Eet(t)}var $3=ket,Tet=HJe,Fet=ZJe,$et=$3;function _et(t){return Tet(t,$et,Fet)}var Oet=_et,TQ=Oet,Det=1,Ret=Object.prototype,Pet=Ret.hasOwnProperty;function Uet(t,e,n,r,s,i){var o=n&Det,a=TQ(t),l=a.length,c=TQ(e),u=c.length;if(l!=u&&!o)return!1;for(var A=l;A--;){var d=a[A];if(!(o?d in e:Pet.call(e,d)))return!1}var f=i.get(t),h=i.get(e);if(f&&h)return f==e&&h==t;var m=!0;i.set(t,e),i.set(e,t);for(var g=o;++A<l;){d=a[A];var y=t[d],x=e[d];if(r)var v=o?r(x,y,d,e,t,i):r(y,x,d,t,e,i);if(!(v===void 0?y===x||s(y,x,n,r,i):v)){m=!1;break}g||(g=d=="constructor")}if(m&&!g){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof w=="function"&&w instanceof w)&&(m=!1)}return i.delete(t),i.delete(e),m}var jet=Uet,Let=bf,Met=Bl,Qet=Let(Met,"DataView"),Het=Qet,zet=bf,Vet=Bl,Wet=zet(Vet,"Promise"),Get=Wet,Ket=bf,Xet=Bl,qet=Ket(Xet,"Set"),Tne=qet,Yet=bf,Jet=Bl,Zet=Yet(Jet,"WeakMap"),ett=Zet,OT=Het,DT=QR,RT=Get,PT=Tne,UT=ett,Fne=Oc,Cm=Pte,FQ="[object Map]",ttt="[object Object]",$Q="[object Promise]",_Q="[object Set]",OQ="[object WeakMap]",DQ="[object DataView]",ntt=Cm(OT),rtt=Cm(DT),stt=Cm(RT),itt=Cm(PT),ott=Cm(UT),GA=Fne;(OT&&GA(new OT(new ArrayBuffer(1)))!=DQ||DT&&GA(new DT)!=FQ||RT&&GA(RT.resolve())!=$Q||PT&&GA(new PT)!=_Q||UT&&GA(new UT)!=OQ)&&(GA=function(t){var e=Fne(t),n=e==ttt?t.constructor:void 0,r=n?Cm(n):"";if(r)switch(r){case ntt:return DQ;case rtt:return FQ;case stt:return $Q;case itt:return _Q;case ott:return OQ}return e});var att=GA,uE=xne,ltt=Cne,ctt=UJe,utt=jet,RQ=att,PQ=Qi,UQ=Nne,Att=Ine,dtt=1,jQ="[object Arguments]",LQ="[object Array]",bb="[object Object]",ftt=Object.prototype,MQ=ftt.hasOwnProperty;function htt(t,e,n,r,s,i){var o=PQ(t),a=PQ(e),l=o?LQ:RQ(t),c=a?LQ:RQ(e);l=l==jQ?bb:l,c=c==jQ?bb:c;var u=l==bb,A=c==bb,d=l==c;if(d&&UQ(t)){if(!UQ(e))return!1;o=!0,u=!1}if(d&&!u)return i||(i=new uE),o||Att(t)?ltt(t,e,n,r,s,i):ctt(t,e,l,n,r,s,i);if(!(n&dtt)){var f=u&&MQ.call(t,"__wrapped__"),h=A&&MQ.call(e,"__wrapped__");if(f||h){var m=f?t.value():t,g=h?e.value():e;return i||(i=new uE),s(m,g,n,r,i)}}return d?(i||(i=new uE),utt(t,e,n,r,s,i)):!1}var ptt=htt,mtt=ptt,QQ=Dc;function $ne(t,e,n,r,s){return t===e?!0:t==null||e==null||!QQ(t)&&!QQ(e)?t!==t&&e!==e:mtt(t,e,n,r,$ne,s)}var oP=$ne,gtt=xne,ytt=oP,xtt=1,vtt=2;function btt(t,e,n,r){var s=n.length,i=s,o=!r;if(t==null)return!i;for(t=Object(t);s--;){var a=n[s];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++s<i;){a=n[s];var l=a[0],c=t[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in t))return!1}else{var A=new gtt;if(r)var d=r(c,u,l,t,e,A);if(!(d===void 0?ytt(u,c,xtt|vtt,r,A):d))return!1}}return!0}var wtt=btt,Ctt=vA;function Stt(t){return t===t&&!Ctt(t)}var _ne=Stt,Btt=_ne,Ntt=$3;function Ett(t){for(var e=Ntt(t),n=e.length;n--;){var r=e[n],s=t[r];e[n]=[r,s,Btt(s)]}return e}var Itt=Ett;function ktt(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var One=ktt,Ttt=wtt,Ftt=Itt,$tt=One;function _tt(t){var e=Ftt(t);return e.length==1&&e[0][2]?$tt(e[0][0],e[0][1]):function(n){return n===t||Ttt(n,t,e)}}var Ott=_tt;function Dtt(t,e){return t!=null&&e in Object(t)}var Rtt=Dtt,Ptt=Qte,Utt=rP,jtt=Qi,Ltt=sP,Mtt=iP,Qtt=m3;function Htt(t,e,n){e=Ptt(e,t);for(var r=-1,s=e.length,i=!1;++r<s;){var o=Qtt(e[r]);if(!(i=t!=null&&n(t,o)))break;t=t[o]}return i||++r!=s?i:(s=t==null?0:t.length,!!s&&Mtt(s)&&Ltt(o,s)&&(jtt(t)||Utt(t)))}var ztt=Htt,Vtt=Rtt,Wtt=ztt;function Gtt(t,e){return t!=null&&Wtt(t,e,Vtt)}var Ktt=Gtt,Xtt=oP,qtt=Hte,Ytt=Ktt,Jtt=jR,Ztt=_ne,ent=One,tnt=m3,nnt=1,rnt=2;function snt(t,e){return Jtt(t)&&Ztt(e)?ent(tnt(t),e):function(n){var r=qtt(n,t);return r===void 0&&r===e?Ytt(n,t):Xtt(e,r,nnt|rnt)}}var int=snt;function ont(t){return t}var Sm=ont;function ant(t){return function(e){return e==null?void 0:e[t]}}var lnt=ant,cnt=WR;function unt(t){return function(e){return cnt(e,t)}}var Ant=unt,dnt=lnt,fnt=Ant,hnt=jR,pnt=m3;function mnt(t){return hnt(t)?dnt(pnt(t)):fnt(t)}var gnt=mnt,ynt=Ott,xnt=int,vnt=Sm,bnt=Qi,wnt=gnt;function Cnt(t){return typeof t=="function"?t:t==null?vnt:typeof t=="object"?bnt(t)?xnt(t[0],t[1]):ynt(t):wnt(t)}var Nl=Cnt;function Snt(t,e,n,r){for(var s=t.length,i=n+(r?1:-1);r?i--:++i<s;)if(e(t[i],i,t))return i;return-1}var Dne=Snt;function Bnt(t){return t!==t}var Nnt=Bnt;function Ent(t,e,n){for(var r=n-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}var Int=Ent,knt=Dne,Tnt=Nnt,Fnt=Int;function $nt(t,e,n){return e===e?Fnt(t,e,n):knt(t,Tnt,n)}var _nt=$nt,Ont=_nt;function Dnt(t,e){var n=t==null?0:t.length;return!!n&&Ont(t,e,0)>-1}var Rnt=Dnt;function Pnt(t,e,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(n(e,t[r]))return!0;return!1}var Unt=Pnt;function jnt(){}var Lnt=jnt,AE=Tne,Mnt=Lnt,Qnt=nP,Hnt=1/0,znt=AE&&1/Qnt(new AE([,-0]))[1]==Hnt?function(t){return new AE(t)}:Mnt,Vnt=znt,Wnt=vne,Gnt=Rnt,Knt=Unt,Xnt=wne,qnt=Vnt,Ynt=nP,Jnt=200;function Znt(t,e,n){var r=-1,s=Gnt,i=t.length,o=!0,a=[],l=a;if(n)o=!1,s=Knt;else if(i>=Jnt){var c=e?null:qnt(t);if(c)return Ynt(c);o=!1,s=Xnt,l=new Wnt}else l=e?[]:a;e:for(;++r<i;){var u=t[r],A=e?e(u):u;if(u=n||u!==0?u:0,o&&A===A){for(var d=l.length;d--;)if(l[d]===A)continue e;e&&l.push(A),a.push(u)}else s(l,A,n)||(l!==a&&l.push(A),a.push(u))}return a}var ert=Znt,trt=Nl,nrt=ert;function rrt(t,e){return t&&t.length?nrt(t,trt(e)):[]}var srt=rrt;const HQ=Gt(srt);function Rne(t,e,n){return e===!0?HQ(t,n):xt(e)?HQ(t,e):t}function vp(t){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(t)}var irt=["ref"];function zQ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Dl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zQ(Object(n),!0).forEach(function(r){_3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zQ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ort(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VQ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Une(r.key),r)}}function art(t,e,n){return e&&VQ(t.prototype,e),n&&VQ(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lrt(t,e,n){return e=H2(e),crt(t,Pne()?Reflect.construct(e,n||[],H2(t).constructor):e.apply(t,n))}function crt(t,e){if(e&&(vp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return urt(t)}function urt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pne=function(){return!!t})()}function H2(t){return H2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},H2(t)}function Art(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jT(t,e)}function jT(t,e){return jT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},jT(t,e)}function _3(t,e,n){return e=Une(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Une(t){var e=drt(t,"string");return vp(e)=="symbol"?e:e+""}function drt(t,e){if(vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function frt(t,e){if(t==null)return{};var n=hrt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hrt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function prt(t){return t.value}function mrt(t,e){if(ie.isValidElement(t))return ie.cloneElement(t,e);if(typeof t=="function")return ie.createElement(t,e);e.ref;var n=frt(e,irt);return ie.createElement(tP,n)}var WQ=1,ha=function(t){function e(){var n;ort(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=lrt(this,e,[].concat(s)),_3(n,"lastBoundingBox",{width:-1,height:-1}),n}return Art(e,t),art(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>WQ||Math.abs(s.height-this.lastBoundingBox.height)>WQ)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,r&&r(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Dl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var s=this.props,i=s.layout,o=s.align,a=s.verticalAlign,l=s.margin,c=s.chartWidth,u=s.chartHeight,A,d;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&i==="vertical"){var f=this.getBBoxSnapshot();A={left:((c||0)-f.width)/2}}else A=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var h=this.getBBoxSnapshot();d={top:((u||0)-h.height)/2}}else d=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Dl(Dl({},A),d)}},{key:"render",value:function(){var r=this,s=this.props,i=s.content,o=s.width,a=s.height,l=s.wrapperStyle,c=s.payloadUniqBy,u=s.payload,A=Dl(Dl({position:"absolute",width:o||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return ie.createElement("div",{className:"recharts-legend-wrapper",style:A,ref:function(f){r.wrapperNode=f}},mrt(i,Dl(Dl({},this.props),{},{payload:Rne(u,c,prt)})))}}],[{key:"getWithHeight",value:function(r,s){var i=Dl(Dl({},this.defaultProps),r.props),o=i.layout;return o==="vertical"&&je(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||s}:null}}])}(Q.PureComponent);_3(ha,"displayName","Legend");_3(ha,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var GQ=Tv,grt=rP,yrt=Qi,KQ=GQ?GQ.isConcatSpreadable:void 0;function xrt(t){return yrt(t)||grt(t)||!!(KQ&&t&&t[KQ])}var vrt=xrt,brt=Sne,wrt=vrt;function jne(t,e,n,r,s){var i=-1,o=t.length;for(n||(n=wrt),s||(s=[]);++i<o;){var a=t[i];e>0&&n(a)?e>1?jne(a,e-1,n,r,s):brt(s,a):r||(s[s.length]=a)}return s}var Lne=jne;function Crt(t){return function(e,n,r){for(var s=-1,i=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++s];if(n(i[l],l,i)===!1)break}return e}}var Srt=Crt,Brt=Srt,Nrt=Brt(),Ert=Nrt,Irt=Ert,krt=$3;function Trt(t,e){return t&&Irt(t,e,krt)}var Mne=Trt,Frt=$v;function $rt(t,e){return function(n,r){if(n==null)return n;if(!Frt(n))return t(n,r);for(var s=n.length,i=e?s:-1,o=Object(n);(e?i--:++i<s)&&r(o[i],i,o)!==!1;);return n}}var _rt=$rt,Ort=Mne,Drt=_rt,Rrt=Drt(Ort),aP=Rrt,Prt=aP,Urt=$v;function jrt(t,e){var n=-1,r=Urt(t)?Array(t.length):[];return Prt(t,function(s,i,o){r[++n]=e(s,i,o)}),r}var Qne=jrt;function Lrt(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var Mrt=Lrt,XQ=gm;function Qrt(t,e){if(t!==e){var n=t!==void 0,r=t===null,s=t===t,i=XQ(t),o=e!==void 0,a=e===null,l=e===e,c=XQ(e);if(!a&&!c&&!i&&t>e||i&&o&&l&&!a&&!c||r&&o&&l||!n&&l||!s)return 1;if(!r&&!i&&!c&&t<e||c&&n&&s&&!r&&!i||a&&n&&s||!o&&s||!l)return-1}return 0}var Hrt=Qrt,zrt=Hrt;function Vrt(t,e,n){for(var r=-1,s=t.criteria,i=e.criteria,o=s.length,a=n.length;++r<o;){var l=zrt(s[r],i[r]);if(l){if(r>=a)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var Wrt=Vrt,dE=VR,Grt=WR,Krt=Nl,Xrt=Qne,qrt=Mrt,Yrt=Ene,Jrt=Wrt,Zrt=Sm,est=Qi;function tst(t,e,n){e.length?e=dE(e,function(i){return est(i)?function(o){return Grt(o,i.length===1?i[0]:i)}:i}):e=[Zrt];var r=-1;e=dE(e,Yrt(Krt));var s=Xrt(t,function(i,o,a){var l=dE(e,function(c){return c(i)});return{criteria:l,index:++r,value:i}});return qrt(s,function(i,o){return Jrt(i,o,n)})}var nst=tst;function rst(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var sst=rst,ist=sst,qQ=Math.max;function ost(t,e,n){return e=qQ(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,i=qQ(r.length-e,0),o=Array(i);++s<i;)o[s]=r[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=r[s];return a[e]=n(o),ist(t,this,a)}}var ast=ost;function lst(t){return function(){return t}}var cst=lst,ust=bf,Ast=function(){try{var t=ust(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Hne=Ast,dst=cst,YQ=Hne,fst=Sm,hst=YQ?function(t,e){return YQ(t,"toString",{configurable:!0,enumerable:!1,value:dst(e),writable:!0})}:fst,pst=hst,mst=800,gst=16,yst=Date.now;function xst(t){var e=0,n=0;return function(){var r=yst(),s=gst-(r-n);if(n=r,s>0){if(++e>=mst)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var vst=xst,bst=pst,wst=vst,Cst=wst(bst),Sst=Cst,Bst=Sm,Nst=ast,Est=Sst;function Ist(t,e){return Est(Nst(t,e,Bst),t+"")}var kst=Ist,Tst=MR,Fst=$v,$st=sP,_st=vA;function Ost(t,e,n){if(!_st(n))return!1;var r=typeof e;return(r=="number"?Fst(n)&&$st(e,n.length):r=="string"&&e in n)?Tst(n[e],t):!1}var O3=Ost,Dst=Lne,Rst=nst,Pst=kst,JQ=O3,Ust=Pst(function(t,e){if(t==null)return[];var n=e.length;return n>1&&JQ(t,e[0],e[1])?e=[]:n>2&&JQ(e[0],e[1],e[2])&&(e=[e[0]]),Rst(t,Dst(e,1),[])}),jst=Ust;const lP=Gt(jst);function d0(t){"@babel/helpers - typeof";return d0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d0(t)}function LT(){return LT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LT.apply(this,arguments)}function Lst(t,e){return zst(t)||Hst(t,e)||Qst(t,e)||Mst()}function Mst(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qst(t,e){if(t){if(typeof t=="string")return ZQ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZQ(t,e)}}function ZQ(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hst(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function zst(t){if(Array.isArray(t))return t}function e8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e8(Object(n),!0).forEach(function(r){Vst(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vst(t,e,n){return e=Wst(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wst(t){var e=Gst(t,"string");return d0(e)=="symbol"?e:e+""}function Gst(t,e){if(d0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(d0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kst(t){return Array.isArray(t)&&zr(t[0])&&zr(t[1])?t.join(" ~ "):t}var Xst=function(e){var n=e.separator,r=n===void 0?" : ":n,s=e.contentStyle,i=s===void 0?{}:s,o=e.itemStyle,a=o===void 0?{}:o,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,A=e.formatter,d=e.itemSorter,f=e.wrapperClassName,h=e.labelClassName,m=e.label,g=e.labelFormatter,y=e.accessibilityLayer,x=y===void 0?!1:y,v=function(){if(u&&u.length){var U={padding:0,margin:0},P=(d?lP(u,d):u).map(function(V,W){if(V.type==="none")return null;var L=fE({display:"block",paddingTop:4,paddingBottom:4,color:V.color||"#000"},a),G=V.formatter||A||Kst,_=V.value,j=V.name,K=_,Y=j;if(G&&K!=null&&Y!=null){var J=G(_,j,V,W,u);if(Array.isArray(J)){var ae=Lst(J,2);K=ae[0],Y=ae[1]}else K=J}return ie.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:L},zr(Y)?ie.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,zr(Y)?ie.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,ie.createElement("span",{className:"recharts-tooltip-item-value"},K),ie.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return ie.createElement("ul",{className:"recharts-tooltip-item-list",style:U},P)}return null},b=fE({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=fE({margin:0},c),C=!Ht(m),B=C?m:"",S=It("recharts-default-tooltip",f),N=It("recharts-tooltip-label",h);C&&g&&u!==void 0&&u!==null&&(B=g(m,u));var k=x?{role:"status","aria-live":"assertive"}:{};return ie.createElement("div",LT({className:S,style:b},k),ie.createElement("p",{className:N,style:w},ie.isValidElement(B)?B:"".concat(B)),v())};function f0(t){"@babel/helpers - typeof";return f0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f0(t)}function wb(t,e,n){return e=qst(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qst(t){var e=Yst(t,"string");return f0(e)=="symbol"?e:e+""}function Yst(t,e){if(f0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(f0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dg="recharts-tooltip-wrapper",Jst={visibility:"hidden"};function Zst(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return It(dg,wb(wb(wb(wb({},"".concat(dg,"-right"),je(n)&&e&&je(e.x)&&n>=e.x),"".concat(dg,"-left"),je(n)&&e&&je(e.x)&&n<e.x),"".concat(dg,"-bottom"),je(r)&&e&&je(e.y)&&r>=e.y),"".concat(dg,"-top"),je(r)&&e&&je(e.y)&&r<e.y))}function t8(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,s=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(i&&je(i[r]))return i[r];var u=n[r]-a-s,A=n[r]+s;if(e[r])return o[r]?u:A;if(o[r]){var d=u,f=l[r];return d<f?Math.max(A,l[r]):Math.max(u,l[r])}var h=A+a,m=l[r]+c;return h>m?Math.max(u,l[r]):Math.max(A,l[r])}function eit(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function tit(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,s=t.position,i=t.reverseDirection,o=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,c,u,A;return o.height>0&&o.width>0&&n?(u=t8({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),A=t8({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=eit({translateX:u,translateY:A,useTranslate3d:a})):c=Jst,{cssProperties:c,cssClasses:Zst({translateX:u,translateY:A,coordinate:n})}}function bp(t){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp(t)}function n8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function r8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n8(Object(n),!0).forEach(function(r){QT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nit(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rit(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vne(r.key),r)}}function sit(t,e,n){return e&&rit(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function iit(t,e,n){return e=z2(e),oit(t,zne()?Reflect.construct(e,n||[],z2(t).constructor):e.apply(t,n))}function oit(t,e){if(e&&(bp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ait(t)}function ait(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zne=function(){return!!t})()}function z2(t){return z2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},z2(t)}function lit(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MT(t,e)}function MT(t,e){return MT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},MT(t,e)}function QT(t,e,n){return e=Vne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vne(t){var e=cit(t,"string");return bp(e)=="symbol"?e:e+""}function cit(t,e){if(bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var s8=1,uit=function(t){function e(){var n;nit(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=iit(this,e,[].concat(s)),QT(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),QT(n,"handleKeyDown",function(o){if(o.key==="Escape"){var a,l,c,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(c=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),n}return lit(e,t),sit(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>s8||Math.abs(r.height-this.state.lastBoundingBox.height)>s8)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,a=s.animationDuration,l=s.animationEasing,c=s.children,u=s.coordinate,A=s.hasPayload,d=s.isAnimationActive,f=s.offset,h=s.position,m=s.reverseDirection,g=s.useTranslate3d,y=s.viewBox,x=s.wrapperStyle,v=tit({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:f,position:h,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:y}),b=v.cssClasses,w=v.cssProperties,C=r8(r8({transition:d&&i?"transform ".concat(a,"ms ").concat(l):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&A?"visible":"hidden",position:"absolute",top:0,left:0},x);return ie.createElement("div",{tabIndex:-1,className:b,style:C,ref:function(S){r.wrapperNode=S}},c)}}])}(Q.PureComponent),Ait=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Bm={isSsr:Ait()};function wp(t){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wp(t)}function i8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function o8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i8(Object(n),!0).forEach(function(r){cP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dit(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fit(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gne(r.key),r)}}function hit(t,e,n){return e&&fit(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function pit(t,e,n){return e=V2(e),mit(t,Wne()?Reflect.construct(e,n||[],V2(t).constructor):e.apply(t,n))}function mit(t,e){if(e&&(wp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return git(t)}function git(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wne=function(){return!!t})()}function V2(t){return V2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},V2(t)}function yit(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HT(t,e)}function HT(t,e){return HT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},HT(t,e)}function cP(t,e,n){return e=Gne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gne(t){var e=xit(t,"string");return wp(e)=="symbol"?e:e+""}function xit(t,e){if(wp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function vit(t){return t.dataKey}function bit(t,e){return ie.isValidElement(t)?ie.cloneElement(t,e):typeof t=="function"?ie.createElement(t,e):ie.createElement(Xst,e)}var xi=function(t){function e(){return dit(this,e),pit(this,e,arguments)}return yit(e,t),hit(e,[{key:"render",value:function(){var r=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,a=s.animationDuration,l=s.animationEasing,c=s.content,u=s.coordinate,A=s.filterNull,d=s.isAnimationActive,f=s.offset,h=s.payload,m=s.payloadUniqBy,g=s.position,y=s.reverseDirection,x=s.useTranslate3d,v=s.viewBox,b=s.wrapperStyle,w=h??[];A&&w.length&&(w=Rne(h.filter(function(B){return B.value!=null&&(B.hide!==!0||r.props.includeHidden)}),m,vit));var C=w.length>0;return ie.createElement(uit,{allowEscapeViewBox:o,animationDuration:a,animationEasing:l,isAnimationActive:d,active:i,coordinate:u,hasPayload:C,offset:f,position:g,reverseDirection:y,useTranslate3d:x,viewBox:v,wrapperStyle:b},bit(c,o8(o8({},this.props),{},{payload:w})))}}])}(Q.PureComponent);cP(xi,"displayName","Tooltip");cP(xi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Bm.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var wit=Bl,Cit=function(){return wit.Date.now()},Sit=Cit,Bit=/\s/;function Nit(t){for(var e=t.length;e--&&Bit.test(t.charAt(e)););return e}var Eit=Nit,Iit=Eit,kit=/^\s+/;function Tit(t){return t&&t.slice(0,Iit(t)+1).replace(kit,"")}var Fit=Tit,$it=Fit,a8=vA,_it=gm,l8=NaN,Oit=/^[-+]0x[0-9a-f]+$/i,Dit=/^0b[01]+$/i,Rit=/^0o[0-7]+$/i,Pit=parseInt;function Uit(t){if(typeof t=="number")return t;if(_it(t))return l8;if(a8(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=a8(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=$it(t);var n=Dit.test(t);return n||Rit.test(t)?Pit(t.slice(2),n?2:8):Oit.test(t)?l8:+t}var Kne=Uit,jit=vA,hE=Sit,c8=Kne,Lit="Expected a function",Mit=Math.max,Qit=Math.min;function Hit(t,e,n){var r,s,i,o,a,l,c=0,u=!1,A=!1,d=!0;if(typeof t!="function")throw new TypeError(Lit);e=c8(e)||0,jit(n)&&(u=!!n.leading,A="maxWait"in n,i=A?Mit(c8(n.maxWait)||0,e):i,d="trailing"in n?!!n.trailing:d);function f(C){var B=r,S=s;return r=s=void 0,c=C,o=t.apply(S,B),o}function h(C){return c=C,a=setTimeout(y,e),u?f(C):o}function m(C){var B=C-l,S=C-c,N=e-B;return A?Qit(N,i-S):N}function g(C){var B=C-l,S=C-c;return l===void 0||B>=e||B<0||A&&S>=i}function y(){var C=hE();if(g(C))return x(C);a=setTimeout(y,m(C))}function x(C){return a=void 0,d&&r?f(C):(r=s=void 0,o)}function v(){a!==void 0&&clearTimeout(a),c=0,r=l=s=a=void 0}function b(){return a===void 0?o:x(hE())}function w(){var C=hE(),B=g(C);if(r=arguments,s=this,l=C,B){if(a===void 0)return h(l);if(A)return clearTimeout(a),a=setTimeout(y,e),f(l)}return a===void 0&&(a=setTimeout(y,e)),o}return w.cancel=v,w.flush=b,w}var zit=Hit,Vit=zit,Wit=vA,Git="Expected a function";function Kit(t,e,n){var r=!0,s=!0;if(typeof t!="function")throw new TypeError(Git);return Wit(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),Vit(t,e,{leading:r,maxWait:e,trailing:s})}var Xit=Kit;const Xne=Gt(Xit);function h0(t){"@babel/helpers - typeof";return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h0(t)}function u8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Cb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u8(Object(n),!0).forEach(function(r){qit(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qit(t,e,n){return e=Yit(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yit(t){var e=Jit(t,"string");return h0(e)=="symbol"?e:e+""}function Jit(t,e){if(h0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(h0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zit(t,e){return rot(t)||not(t,e)||tot(t,e)||eot()}function eot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tot(t,e){if(t){if(typeof t=="string")return A8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A8(t,e)}}function A8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function not(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function rot(t){if(Array.isArray(t))return t}var fg=Q.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,s=r===void 0?{width:-1,height:-1}:r,i=t.width,o=i===void 0?"100%":i,a=t.height,l=a===void 0?"100%":a,c=t.minWidth,u=c===void 0?0:c,A=t.minHeight,d=t.maxHeight,f=t.children,h=t.debounce,m=h===void 0?0:h,g=t.id,y=t.className,x=t.onResize,v=t.style,b=v===void 0?{}:v,w=Q.useRef(null),C=Q.useRef();C.current=x,Q.useImperativeHandle(e,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var B=Q.useState({containerWidth:s.width,containerHeight:s.height}),S=Zit(B,2),N=S[0],k=S[1],O=Q.useCallback(function(P,V){k(function(W){var L=Math.round(P),G=Math.round(V);return W.containerWidth===L&&W.containerHeight===G?W:{containerWidth:L,containerHeight:G}})},[]);Q.useEffect(function(){var P=function(j){var K,Y=j[0].contentRect,J=Y.width,ae=Y.height;O(J,ae),(K=C.current)===null||K===void 0||K.call(C,J,ae)};m>0&&(P=Xne(P,m,{trailing:!0,leading:!1}));var V=new ResizeObserver(P),W=w.current.getBoundingClientRect(),L=W.width,G=W.height;return O(L,G),V.observe(w.current),function(){V.disconnect()}},[O,m]);var U=Q.useMemo(function(){var P=N.containerWidth,V=N.containerHeight;if(P<0||V<0)return null;cc(cd(o)||cd(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),cc(!n||n>0,"The aspect(%s) must be greater than zero.",n);var W=cd(o)?P:o,L=cd(l)?V:l;n&&n>0&&(W?L=W/n:L&&(W=L*n),d&&L>d&&(L=d)),cc(W>0||L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,L,o,l,u,A,n);var G=!Array.isArray(f)&&lc(f.type).endsWith("Chart");return ie.Children.map(f,function(_){return ie.isValidElement(_)?Q.cloneElement(_,Cb({width:W,height:L},G?{style:Cb({height:"100%",width:"100%",maxHeight:L,maxWidth:W},_.props.style)}:{})):_})},[n,f,l,d,A,u,N,o]);return ie.createElement("div",{id:g?"".concat(g):void 0,className:It("recharts-responsive-container",y),style:Cb(Cb({},b),{},{width:o,height:l,minWidth:u,minHeight:A,maxHeight:d}),ref:w},U)}),qne=function(e){return null};qne.displayName="Cell";function p0(t){"@babel/helpers - typeof";return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p0(t)}function d8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function zT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d8(Object(n),!0).forEach(function(r){sot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sot(t,e,n){return e=iot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iot(t){var e=oot(t,"string");return p0(e)=="symbol"?e:e+""}function oot(t,e){if(p0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(p0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zf={widthCache:{},cacheCount:0},aot=2e3,lot={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},f8="recharts_measurement_span";function cot(t){var e=zT({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Ay=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Bm.isSsr)return{width:0,height:0};var r=cot(n),s=JSON.stringify({text:e,copyStyle:r});if(zf.widthCache[s])return zf.widthCache[s];try{var i=document.getElementById(f8);i||(i=document.createElement("span"),i.setAttribute("id",f8),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=zT(zT({},lot),r);Object.assign(i.style,o),i.textContent="".concat(e);var a=i.getBoundingClientRect(),l={width:a.width,height:a.height};return zf.widthCache[s]=l,++zf.cacheCount>aot&&(zf.cacheCount=0,zf.widthCache={}),l}catch{return{width:0,height:0}}},uot=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function m0(t){"@babel/helpers - typeof";return m0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m0(t)}function W2(t,e){return hot(t)||fot(t,e)||dot(t,e)||Aot()}function Aot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dot(t,e){if(t){if(typeof t=="string")return h8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h8(t,e)}}function h8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fot(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function hot(t){if(Array.isArray(t))return t}function pot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,got(r.key),r)}}function mot(t,e,n){return e&&p8(t.prototype,e),n&&p8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function got(t){var e=yot(t,"string");return m0(e)=="symbol"?e:e+""}function yot(t,e){if(m0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(m0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var m8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,g8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,xot=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,vot=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Yne={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},bot=Object.keys(Yne),hh="NaN";function wot(t,e){return t*Yne[e]}var Sb=function(){function t(e,n){pot(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!xot.test(n)&&(this.num=NaN,this.unit=""),bot.includes(n)&&(this.num=wot(e,n),this.unit="px")}return mot(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,s=(r=vot.exec(n))!==null&&r!==void 0?r:[],i=W2(s,3),o=i[1],a=i[2];return new t(parseFloat(o),a??"")}}])}();function Jne(t){if(t.includes(hh))return hh;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=m8.exec(e))!==null&&n!==void 0?n:[],s=W2(r,4),i=s[1],o=s[2],a=s[3],l=Sb.parse(i??""),c=Sb.parse(a??""),u=o==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return hh;e=e.replace(m8,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var A,d=(A=g8.exec(e))!==null&&A!==void 0?A:[],f=W2(d,4),h=f[1],m=f[2],g=f[3],y=Sb.parse(h??""),x=Sb.parse(g??""),v=m==="+"?y.add(x):y.subtract(x);if(v.isNaN())return hh;e=e.replace(g8,v.toString())}return e}var y8=/\(([^()]*)\)/;function Cot(t){for(var e=t;e.includes("(");){var n=y8.exec(e),r=W2(n,2),s=r[1];e=e.replace(y8,Jne(s))}return e}function Sot(t){var e=t.replace(/\s+/g,"");return e=Cot(e),e=Jne(e),e}function Bot(t){try{return Sot(t)}catch{return hh}}function pE(t){var e=Bot(t.slice(5,-1));return e===hh?"":e}var Not=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Eot=["dx","dy","angle","className","breakAll"];function VT(){return VT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VT.apply(this,arguments)}function x8(t,e){if(t==null)return{};var n=Iot(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Iot(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function v8(t,e){return $ot(t)||Fot(t,e)||Tot(t,e)||kot()}function kot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tot(t,e){if(t){if(typeof t=="string")return b8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b8(t,e)}}function b8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fot(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function $ot(t){if(Array.isArray(t))return t}var Zne=/[ \f\n\r\t\v\u2028\u2029]+/,ere=function(e){var n=e.children,r=e.breakAll,s=e.style;try{var i=[];Ht(n)||(r?i=n.toString().split(""):i=n.toString().split(Zne));var o=i.map(function(l){return{word:l,width:Ay(l,s).width}}),a=r?0:Ay(" ",s).width;return{wordsWithComputedWidth:o,spaceWidth:a}}catch{return null}},_ot=function(e,n,r,s,i){var o=e.maxLines,a=e.children,l=e.style,c=e.breakAll,u=je(o),A=a,d=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(L,G){var _=G.word,j=G.width,K=L[L.length-1];if(K&&(s==null||i||K.width+j+r<Number(s)))K.words.push(_),K.width+=j+r;else{var Y={words:[_],width:j};L.push(Y)}return L},[])},f=d(n),h=function(W){return W.reduce(function(L,G){return L.width>G.width?L:G})};if(!u)return f;for(var m="…",g=function(W){var L=A.slice(0,W),G=ere({breakAll:c,style:l,children:L+m}).wordsWithComputedWidth,_=d(G),j=_.length>o||h(_).width>Number(s);return[j,_]},y=0,x=A.length-1,v=0,b;y<=x&&v<=A.length-1;){var w=Math.floor((y+x)/2),C=w-1,B=g(C),S=v8(B,2),N=S[0],k=S[1],O=g(w),U=v8(O,1),P=U[0];if(!N&&!P&&(y=w+1),N&&P&&(x=w-1),!N&&P){b=k;break}v++}return b||f},w8=function(e){var n=Ht(e)?[]:e.toString().split(Zne);return[{words:n}]},Oot=function(e){var n=e.width,r=e.scaleToFit,s=e.children,i=e.style,o=e.breakAll,a=e.maxLines;if((n||r)&&!Bm.isSsr){var l,c,u=ere({breakAll:o,children:s,style:i});if(u){var A=u.wordsWithComputedWidth,d=u.spaceWidth;l=A,c=d}else return w8(s);return _ot({breakAll:o,children:s,maxLines:a,style:i},l,c,n,r)}return w8(s)},C8="#808080",Cp=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,i=s===void 0?0:s,o=e.lineHeight,a=o===void 0?"1em":o,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,A=u===void 0?!1:u,d=e.textAnchor,f=d===void 0?"start":d,h=e.verticalAnchor,m=h===void 0?"end":h,g=e.fill,y=g===void 0?C8:g,x=x8(e,Not),v=Q.useMemo(function(){return Oot({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:A,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,A,x.style,x.width]),b=x.dx,w=x.dy,C=x.angle,B=x.className,S=x.breakAll,N=x8(x,Eot);if(!zr(r)||!zr(i))return null;var k=r+(je(b)?b:0),O=i+(je(w)?w:0),U;switch(m){case"start":U=pE("calc(".concat(c,")"));break;case"middle":U=pE("calc(".concat((v.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:U=pE("calc(".concat(v.length-1," * -").concat(a,")"));break}var P=[];if(A){var V=v[0].width,W=x.width;P.push("scale(".concat((je(W)?W/V:1)/V,")"))}return C&&P.push("rotate(".concat(C,", ").concat(k,", ").concat(O,")")),P.length&&(N.transform=P.join(" ")),ie.createElement("text",VT({},ut(N,!0),{x:k,y:O,className:It("recharts-text",B),textAnchor:f,fill:y.includes("url")?C8:y}),v.map(function(L,G){var _=L.words.join(S?"":" ");return ie.createElement("tspan",{x:k,dy:G===0?U:a,key:"".concat(_,"-").concat(G)},_)}))};function Uu(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Dot(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function uP(t){let e,n,r;t.length!==2?(e=Uu,n=(a,l)=>Uu(t(a),l),r=(a,l)=>t(a)-l):(e=t===Uu||t===Dot?t:Rot,n=t,r=t);function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const A=c+u>>>1;n(a[A],l)<0?c=A+1:u=A}while(c<u)}return c}function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const A=c+u>>>1;n(a[A],l)<=0?c=A+1:u=A}while(c<u)}return c}function o(a,l,c=0,u=a.length){const A=s(a,l,c,u-1);return A>c&&r(a[A-1],l)>-r(a[A],l)?A-1:A}return{left:s,center:o,right:i}}function Rot(){return 0}function tre(t){return t===null?NaN:+t}function*Pot(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Uot=uP(Uu),_v=Uot.right;uP(tre).center;class S8 extends Map{constructor(e,n=Mot){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(B8(this,e))}has(e){return super.has(B8(this,e))}set(e,n){return super.set(jot(this,e),n)}delete(e){return super.delete(Lot(this,e))}}function B8({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function jot({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Lot({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Mot(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Qot(t=Uu){if(t===Uu)return nre;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function nre(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Hot=Math.sqrt(50),zot=Math.sqrt(10),Vot=Math.sqrt(2);function G2(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),o=i>=Hot?10:i>=zot?5:i>=Vot?2:1;let a,l,c;return s<0?(c=Math.pow(10,-s)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,s)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?G2(t,e,n*2):[a,l,c]}function WT(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,i,o]=r?G2(e,t,n):G2(t,e,n);if(!(i>=s))return[];const a=i-s+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(s+c)/-o;else for(let c=0;c<a;++c)l[c]=(s+c)*o;return l}function GT(t,e,n){return e=+e,t=+t,n=+n,G2(t,e,n)[2]}function KT(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?GT(e,t,n):GT(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function N8(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function E8(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function rre(t,e,n=0,r=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(s=s===void 0?nre:Qot(s);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),A=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*A*(l-A)/l)*(c-l/2<0?-1:1),f=Math.max(n,Math.floor(e-c*A/l+d)),h=Math.min(r,Math.floor(e+(l-c)*A/l+d));rre(t,e,f,h,s)}const i=t[e];let o=n,a=r;for(hg(t,n,e),s(t[r],i)>0&&hg(t,n,r);o<a;){for(hg(t,o,a),++o,--a;s(t[o],i)<0;)++o;for(;s(t[a],i)>0;)--a}s(t[n],i)===0?hg(t,n,a):(++a,hg(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function hg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Wot(t,e,n){if(t=Float64Array.from(Pot(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return E8(t);if(e>=1)return N8(t);var r,s=(r-1)*e,i=Math.floor(s),o=N8(rre(t,i).subarray(0,i+1)),a=E8(t.subarray(i+1));return o+(a-o)*(s-i)}}function Got(t,e,n=tre){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,s=(r-1)*e,i=Math.floor(s),o=+n(t[i],i,t),a=+n(t[i+1],i+1,t);return o+(a-o)*(s-i)}}function Kot(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(s);++r<s;)i[r]=t+r*n;return i}function Zo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Rc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const XT=Symbol("implicit");function AP(){var t=new S8,e=[],n=[],r=XT;function s(i){let o=t.get(i);if(o===void 0){if(r!==XT)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return s.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new S8;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return AP(e,n).unknown(r)},Zo.apply(s,arguments),s}function g0(){var t=AP().unknown(void 0),e=t.domain,n=t.range,r=0,s=1,i,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function A(){var d=e().length,f=s<r,h=f?s:r,m=f?r:s;i=(m-h)/Math.max(1,d-l+c*2),a&&(i=Math.floor(i)),h+=(m-h-i*(d-l))*u,o=i*(1-l),a&&(h=Math.round(h),o=Math.round(o));var g=Kot(d).map(function(y){return h+i*y});return n(f?g.reverse():g)}return t.domain=function(d){return arguments.length?(e(d),A()):e()},t.range=function(d){return arguments.length?([r,s]=d,r=+r,s=+s,A()):[r,s]},t.rangeRound=function(d){return[r,s]=d,r=+r,s=+s,a=!0,A()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(d){return arguments.length?(a=!!d,A()):a},t.padding=function(d){return arguments.length?(l=Math.min(1,c=+d),A()):l},t.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),A()):l},t.paddingOuter=function(d){return arguments.length?(c=+d,A()):c},t.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),A()):u},t.copy=function(){return g0(e(),[r,s]).round(a).paddingInner(l).paddingOuter(c).align(u)},Zo.apply(A(),arguments)}function sre(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return sre(e())},t}function dy(){return sre(g0.apply(null,arguments).paddingInner(1))}function dP(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ire(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ov(){}var y0=.7,K2=1/y0,Rh="\\s*([+-]?\\d+)\\s*",x0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xot=/^#([0-9a-f]{3,8})$/,qot=new RegExp(`^rgb\\(${Rh},${Rh},${Rh}\\)$`),Yot=new RegExp(`^rgb\\(${hl},${hl},${hl}\\)$`),Jot=new RegExp(`^rgba\\(${Rh},${Rh},${Rh},${x0}\\)$`),Zot=new RegExp(`^rgba\\(${hl},${hl},${hl},${x0}\\)$`),eat=new RegExp(`^hsl\\(${x0},${hl},${hl}\\)$`),tat=new RegExp(`^hsla\\(${x0},${hl},${hl},${x0}\\)$`),I8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dP(Ov,v0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:k8,formatHex:k8,formatHex8:nat,formatHsl:rat,formatRgb:T8,toString:T8});function k8(){return this.rgb().formatHex()}function nat(){return this.rgb().formatHex8()}function rat(){return ore(this).formatHsl()}function T8(){return this.rgb().formatRgb()}function v0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Xot.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?F8(e):n===3?new Ii(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Bb(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Bb(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qot.exec(t))?new Ii(e[1],e[2],e[3],1):(e=Yot.exec(t))?new Ii(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Jot.exec(t))?Bb(e[1],e[2],e[3],e[4]):(e=Zot.exec(t))?Bb(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=eat.exec(t))?O8(e[1],e[2]/100,e[3]/100,1):(e=tat.exec(t))?O8(e[1],e[2]/100,e[3]/100,e[4]):I8.hasOwnProperty(t)?F8(I8[t]):t==="transparent"?new Ii(NaN,NaN,NaN,0):null}function F8(t){return new Ii(t>>16&255,t>>8&255,t&255,1)}function Bb(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ii(t,e,n,r)}function sat(t){return t instanceof Ov||(t=v0(t)),t?(t=t.rgb(),new Ii(t.r,t.g,t.b,t.opacity)):new Ii}function qT(t,e,n,r){return arguments.length===1?sat(t):new Ii(t,e,n,r??1)}function Ii(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}dP(Ii,qT,ire(Ov,{brighter(t){return t=t==null?K2:Math.pow(K2,t),new Ii(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?y0:Math.pow(y0,t),new Ii(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ii(Fd(this.r),Fd(this.g),Fd(this.b),X2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$8,formatHex:$8,formatHex8:iat,formatRgb:_8,toString:_8}));function $8(){return`#${ud(this.r)}${ud(this.g)}${ud(this.b)}`}function iat(){return`#${ud(this.r)}${ud(this.g)}${ud(this.b)}${ud((isNaN(this.opacity)?1:this.opacity)*255)}`}function _8(){const t=X2(this.opacity);return`${t===1?"rgb(":"rgba("}${Fd(this.r)}, ${Fd(this.g)}, ${Fd(this.b)}${t===1?")":`, ${t})`}`}function X2(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Fd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ud(t){return t=Fd(t),(t<16?"0":"")+t.toString(16)}function O8(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new pa(t,e,n,r)}function ore(t){if(t instanceof pa)return new pa(t.h,t.s,t.l,t.opacity);if(t instanceof Ov||(t=v0(t)),!t)return new pa;if(t instanceof pa)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,a=i-s,l=(i+s)/2;return a?(e===i?o=(n-r)/a+(n<r)*6:n===i?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new pa(o,a,l,t.opacity)}function oat(t,e,n,r){return arguments.length===1?ore(t):new pa(t,e,n,r??1)}function pa(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}dP(pa,oat,ire(Ov,{brighter(t){return t=t==null?K2:Math.pow(K2,t),new pa(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?y0:Math.pow(y0,t),new pa(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Ii(mE(t>=240?t-240:t+120,s,r),mE(t,s,r),mE(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new pa(D8(this.h),Nb(this.s),Nb(this.l),X2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=X2(this.opacity);return`${t===1?"hsl(":"hsla("}${D8(this.h)}, ${Nb(this.s)*100}%, ${Nb(this.l)*100}%${t===1?")":`, ${t})`}`}}));function D8(t){return t=(t||0)%360,t<0?t+360:t}function Nb(t){return Math.max(0,Math.min(1,t||0))}function mE(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const fP=t=>()=>t;function aat(t,e){return function(n){return t+n*e}}function lat(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function cat(t){return(t=+t)==1?are:function(e,n){return n-e?lat(e,n,t):fP(isNaN(e)?n:e)}}function are(t,e){var n=e-t;return n?aat(t,n):fP(isNaN(t)?e:t)}const R8=function t(e){var n=cat(e);function r(s,i){var o=n((s=qT(s)).r,(i=qT(i)).r),a=n(s.g,i.g),l=n(s.b,i.b),c=are(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=a(u),s.b=l(u),s.opacity=c(u),s+""}}return r.gamma=t,r}(1);function uat(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=t[s]*(1-i)+e[s]*i;return r}}function Aat(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function dat(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)s[o]=Nm(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(a){for(o=0;o<r;++o)i[o]=s[o](a);return i}}function fat(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function q2(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function hat(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=Nm(t[s],e[s]):r[s]=e[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var YT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gE=new RegExp(YT.source,"g");function pat(t){return function(){return t}}function mat(t){return function(e){return t(e)+""}}function gat(t,e){var n=YT.lastIndex=gE.lastIndex=0,r,s,i,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=YT.exec(t))&&(s=gE.exec(e));)(i=s.index)>n&&(i=e.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(r=r[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:q2(r,s)})),n=gE.lastIndex;return n<e.length&&(i=e.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?mat(l[0].x):pat(e):(e=l.length,function(c){for(var u=0,A;u<e;++u)a[(A=l[u]).i]=A.x(c);return a.join("")})}function Nm(t,e){var n=typeof e,r;return e==null||n==="boolean"?fP(e):(n==="number"?q2:n==="string"?(r=v0(e))?(e=r,R8):gat:e instanceof v0?R8:e instanceof Date?fat:Aat(e)?uat:Array.isArray(e)?dat:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?hat:q2)(t,e)}function hP(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function yat(t,e){e===void 0&&(e=t,t=Nm);for(var n=0,r=e.length-1,s=e[0],i=new Array(r<0?0:r);n<r;)i[n]=t(s,s=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[a](o-a)}}function xat(t){return function(){return t}}function Y2(t){return+t}var P8=[0,1];function ri(t){return t}function JT(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:xat(isNaN(e)?NaN:.5)}function vat(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function bat(t,e,n){var r=t[0],s=t[1],i=e[0],o=e[1];return s<r?(r=JT(s,r),i=n(o,i)):(r=JT(r,s),i=n(i,o)),function(a){return i(r(a))}}function wat(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),i=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)s[o]=JT(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(a){var l=_v(t,a,1,r)-1;return i[l](s[l](a))}}function Dv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function D3(){var t=P8,e=P8,n=Nm,r,s,i,o=ri,a,l,c;function u(){var d=Math.min(t.length,e.length);return o!==ri&&(o=vat(t[0],t[d-1])),a=d>2?wat:bat,l=c=null,A}function A(d){return d==null||isNaN(d=+d)?i:(l||(l=a(t.map(r),e,n)))(r(o(d)))}return A.invert=function(d){return o(s((c||(c=a(e,t.map(r),q2)))(d)))},A.domain=function(d){return arguments.length?(t=Array.from(d,Y2),u()):t.slice()},A.range=function(d){return arguments.length?(e=Array.from(d),u()):e.slice()},A.rangeRound=function(d){return e=Array.from(d),n=hP,u()},A.clamp=function(d){return arguments.length?(o=d?!0:ri,u()):o!==ri},A.interpolate=function(d){return arguments.length?(n=d,u()):n},A.unknown=function(d){return arguments.length?(i=d,A):i},function(d,f){return r=d,s=f,u()}}function pP(){return D3()(ri,ri)}function Cat(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function J2(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Sp(t){return t=J2(Math.abs(t)),t?t[1]:NaN}function Sat(t,e){return function(n,r){for(var s=n.length,i=[],o=0,a=t[0],l=0;s>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),i.push(n.substring(s-=a,s+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return i.reverse().join(e)}}function Bat(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Nat=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function b0(t){if(!(e=Nat.exec(t)))throw new Error("invalid format: "+t);var e;return new mP({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}b0.prototype=mP.prototype;function mP(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}mP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Eat(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var lre;function Iat(t,e){var n=J2(t,e);if(!n)return t+"";var r=n[0],s=n[1],i=s-(lre=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+J2(t,Math.max(0,e+i-1))[0]}function U8(t,e){var n=J2(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const j8={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Cat,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>U8(t*100,e),r:U8,s:Iat,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function L8(t){return t}var M8=Array.prototype.map,Q8=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function kat(t){var e=t.grouping===void 0||t.thousands===void 0?L8:Sat(M8.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?L8:Bat(M8.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(A){A=b0(A);var d=A.fill,f=A.align,h=A.sign,m=A.symbol,g=A.zero,y=A.width,x=A.comma,v=A.precision,b=A.trim,w=A.type;w==="n"?(x=!0,w="g"):j8[w]||(v===void 0&&(v=12),b=!0,w="g"),(g||d==="0"&&f==="=")&&(g=!0,d="0",f="=");var C=m==="$"?n:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",B=m==="$"?r:/[%p]/.test(w)?o:"",S=j8[w],N=/[defgprs%]/.test(w);v=v===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function k(O){var U=C,P=B,V,W,L;if(w==="c")P=S(O)+P,O="";else{O=+O;var G=O<0||1/O<0;if(O=isNaN(O)?l:S(Math.abs(O),v),b&&(O=Eat(O)),G&&+O==0&&h!=="+"&&(G=!1),U=(G?h==="("?h:a:h==="-"||h==="("?"":h)+U,P=(w==="s"?Q8[8+lre/3]:"")+P+(G&&h==="("?")":""),N){for(V=-1,W=O.length;++V<W;)if(L=O.charCodeAt(V),48>L||L>57){P=(L===46?s+O.slice(V+1):O.slice(V))+P,O=O.slice(0,V);break}}}x&&!g&&(O=e(O,1/0));var _=U.length+O.length+P.length,j=_<y?new Array(y-_+1).join(d):"";switch(x&&g&&(O=e(j+O,j.length?y-P.length:1/0),j=""),f){case"<":O=U+O+P+j;break;case"=":O=U+j+O+P;break;case"^":O=j.slice(0,_=j.length>>1)+U+O+P+j.slice(_);break;default:O=j+U+O+P;break}return i(O)}return k.toString=function(){return A+""},k}function u(A,d){var f=c((A=b0(A),A.type="f",A)),h=Math.max(-8,Math.min(8,Math.floor(Sp(d)/3)))*3,m=Math.pow(10,-h),g=Q8[8+h/3];return function(y){return f(m*y)+g}}return{format:c,formatPrefix:u}}var Eb,gP,cre;Tat({thousands:",",grouping:[3],currency:["$",""]});function Tat(t){return Eb=kat(t),gP=Eb.format,cre=Eb.formatPrefix,Eb}function Fat(t){return Math.max(0,-Sp(Math.abs(t)))}function $at(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Sp(e)/3)))*3-Sp(Math.abs(t)))}function _at(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Sp(e)-Sp(t))+1}function ure(t,e,n,r){var s=KT(t,e,n),i;switch(r=b0(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=$at(s,o))&&(r.precision=i),cre(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=_at(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=Fat(s))&&(r.precision=i-(r.type==="%")*2);break}}return gP(r)}function bA(t){var e=t.domain;return t.ticks=function(n){var r=e();return WT(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return ure(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,i=r.length-1,o=r[s],a=r[i],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=s,s=i,i=c);u-- >0;){if(c=GT(o,a,n),c===l)return r[s]=o,r[i]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function Z2(){var t=pP();return t.copy=function(){return Dv(t,Z2())},Zo.apply(t,arguments),bA(t)}function Are(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Y2),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Are(t).unknown(e)},t=arguments.length?Array.from(t,Y2):[0,1],bA(n)}function dre(t,e){t=t.slice();var n=0,r=t.length-1,s=t[n],i=t[r],o;return i<s&&(o=n,n=r,r=o,o=s,s=i,i=o),t[n]=e.floor(s),t[r]=e.ceil(i),t}function H8(t){return Math.log(t)}function z8(t){return Math.exp(t)}function Oat(t){return-Math.log(-t)}function Dat(t){return-Math.exp(-t)}function Rat(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Pat(t){return t===10?Rat:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Uat(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function V8(t){return(e,n)=>-t(-e,n)}function yP(t){const e=t(H8,z8),n=e.domain;let r=10,s,i;function o(){return s=Uat(r),i=Pat(r),n()[0]<0?(s=V8(s),i=V8(i),t(Oat,Dat)):t(H8,z8),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const A=u<c;A&&([c,u]=[u,c]);let d=s(c),f=s(u),h,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&f-d<g){if(d=Math.floor(d),f=Math.ceil(f),c>0){for(;d<=f;++d)for(h=1;h<r;++h)if(m=d<0?h/i(-d):h*i(d),!(m<c)){if(m>u)break;y.push(m)}}else for(;d<=f;++d)for(h=r-1;h>=1;--h)if(m=d>0?h/i(-d):h*i(d),!(m<c)){if(m>u)break;y.push(m)}y.length*2<g&&(y=WT(c,u,g))}else y=WT(d,f,Math.min(f-d,g)).map(i);return A?y.reverse():y},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=b0(l)).precision==null&&(l.trim=!0),l=gP(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return u=>{let A=u/i(Math.round(s(u)));return A*r<r-.5&&(A*=r),A<=c?l(u):""}},e.nice=()=>n(dre(n(),{floor:a=>i(Math.floor(s(a))),ceil:a=>i(Math.ceil(s(a)))})),e}function fre(){const t=yP(D3()).domain([1,10]);return t.copy=()=>Dv(t,fre()).base(t.base()),Zo.apply(t,arguments),t}function W8(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function G8(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function xP(t){var e=1,n=t(W8(e),G8(e));return n.constant=function(r){return arguments.length?t(W8(e=+r),G8(e)):e},bA(n)}function hre(){var t=xP(D3());return t.copy=function(){return Dv(t,hre()).constant(t.constant())},Zo.apply(t,arguments)}function K8(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function jat(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Lat(t){return t<0?-t*t:t*t}function vP(t){var e=t(ri,ri),n=1;function r(){return n===1?t(ri,ri):n===.5?t(jat,Lat):t(K8(n),K8(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,r()):n},bA(e)}function bP(){var t=vP(D3());return t.copy=function(){return Dv(t,bP()).exponent(t.exponent())},Zo.apply(t,arguments),t}function Mat(){return bP.apply(null,arguments).exponent(.5)}function X8(t){return Math.sign(t)*t*t}function Qat(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function pre(){var t=pP(),e=[0,1],n=!1,r;function s(i){var o=Qat(t(i));return isNaN(o)?r:n?Math.round(o):o}return s.invert=function(i){return t.invert(X8(i))},s.domain=function(i){return arguments.length?(t.domain(i),s):t.domain()},s.range=function(i){return arguments.length?(t.range((e=Array.from(i,Y2)).map(X8)),s):e.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(t.clamp(i),s):t.clamp()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return pre(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Zo.apply(s,arguments),bA(s)}function mre(){var t=[],e=[],n=[],r;function s(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=Got(t,o/a);return i}function i(o){return o==null||isNaN(o=+o)?r:e[_v(n,o)]}return i.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Uu),s()},i.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return mre().domain(t).range(e).unknown(r)},Zo.apply(i,arguments)}function gre(){var t=0,e=1,n=1,r=[.5],s=[0,1],i;function o(l){return l!=null&&l<=l?s[_v(r,l,0,n)]:i}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(s=Array.from(l)).length-1,a()):s.slice()},o.invertExtent=function(l){var c=s.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return gre().domain([t,e]).range(s).unknown(i)},Zo.apply(bA(o),arguments)}function yre(){var t=[.5],e=[0,1],n,r=1;function s(i){return i!=null&&i<=i?e[_v(t,i,0,r)]:n}return s.domain=function(i){return arguments.length?(t=Array.from(i),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(i){return arguments.length?(e=Array.from(i),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return yre().domain(t).range(e).unknown(n)},Zo.apply(s,arguments)}const yE=new Date,xE=new Date;function Gr(t,e,n,r){function s(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(t(i=new Date(+i)),i),s.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),s.round=i=>{const o=s(i),a=s.ceil(i);return i-o<a-i?o:a},s.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,a)=>{const l=[];if(i=s.ceil(i),a=a==null?1:Math.floor(a),!(i<o)||!(a>0))return l;let c;do l.push(c=new Date(+i)),e(i,a),t(i);while(c<i&&i<o);return l},s.filter=i=>Gr(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!i(o););else for(;--a>=0;)for(;e(o,1),!i(o););}),n&&(s.count=(i,o)=>(yE.setTime(+i),xE.setTime(+o),t(yE),t(xE),Math.floor(n(yE,xE))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(r?o=>r(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const eC=Gr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);eC.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Gr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):eC);eC.range;const tc=1e3,Ro=tc*60,nc=Ro*60,wc=nc*24,wP=wc*7,q8=wc*30,vE=wc*365,Ad=Gr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*tc)},(t,e)=>(e-t)/tc,t=>t.getUTCSeconds());Ad.range;const CP=Gr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*tc)},(t,e)=>{t.setTime(+t+e*Ro)},(t,e)=>(e-t)/Ro,t=>t.getMinutes());CP.range;const SP=Gr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ro)},(t,e)=>(e-t)/Ro,t=>t.getUTCMinutes());SP.range;const BP=Gr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*tc-t.getMinutes()*Ro)},(t,e)=>{t.setTime(+t+e*nc)},(t,e)=>(e-t)/nc,t=>t.getHours());BP.range;const NP=Gr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*nc)},(t,e)=>(e-t)/nc,t=>t.getUTCHours());NP.range;const Rv=Gr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ro)/wc,t=>t.getDate()-1);Rv.range;const R3=Gr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/wc,t=>t.getUTCDate()-1);R3.range;const xre=Gr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/wc,t=>Math.floor(t/wc));xre.range;function wf(t){return Gr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ro)/wP)}const P3=wf(0),tC=wf(1),Hat=wf(2),zat=wf(3),Bp=wf(4),Vat=wf(5),Wat=wf(6);P3.range;tC.range;Hat.range;zat.range;Bp.range;Vat.range;Wat.range;function Cf(t){return Gr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/wP)}const U3=Cf(0),nC=Cf(1),Gat=Cf(2),Kat=Cf(3),Np=Cf(4),Xat=Cf(5),qat=Cf(6);U3.range;nC.range;Gat.range;Kat.range;Np.range;Xat.range;qat.range;const EP=Gr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());EP.range;const IP=Gr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());IP.range;const Cc=Gr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Cc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Gr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Cc.range;const Sc=Gr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Sc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Gr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Sc.range;function vre(t,e,n,r,s,i){const o=[[Ad,1,tc],[Ad,5,5*tc],[Ad,15,15*tc],[Ad,30,30*tc],[i,1,Ro],[i,5,5*Ro],[i,15,15*Ro],[i,30,30*Ro],[s,1,nc],[s,3,3*nc],[s,6,6*nc],[s,12,12*nc],[r,1,wc],[r,2,2*wc],[n,1,wP],[e,1,q8],[e,3,3*q8],[t,1,vE]];function a(c,u,A){const d=u<c;d&&([c,u]=[u,c]);const f=A&&typeof A.range=="function"?A:l(c,u,A),h=f?f.range(c,+u+1):[];return d?h.reverse():h}function l(c,u,A){const d=Math.abs(u-c)/A,f=uP(([,,g])=>g).right(o,d);if(f===o.length)return t.every(KT(c/vE,u/vE,A));if(f===0)return eC.every(Math.max(KT(c,u,A),1));const[h,m]=o[d/o[f-1][2]<o[f][2]/d?f-1:f];return h.every(m)}return[a,l]}const[Yat,Jat]=vre(Sc,IP,U3,xre,NP,SP),[Zat,elt]=vre(Cc,EP,P3,Rv,BP,CP);function bE(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function wE(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function pg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function tlt(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,i=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=mg(s),u=gg(s),A=mg(i),d=gg(i),f=mg(o),h=gg(o),m=mg(a),g=gg(a),y=mg(l),x=gg(l),v={a:G,A:_,b:j,B:K,c:null,d:nH,e:nH,f:Slt,g:Olt,G:Rlt,H:blt,I:wlt,j:Clt,L:bre,m:Blt,M:Nlt,p:Y,q:J,Q:iH,s:oH,S:Elt,u:Ilt,U:klt,V:Tlt,w:Flt,W:$lt,x:null,X:null,y:_lt,Y:Dlt,Z:Plt,"%":sH},b={a:ae,A:ue,b:le,B:fe,c:null,d:rH,e:rH,f:Mlt,g:Ylt,G:Zlt,H:Ult,I:jlt,j:Llt,L:Cre,m:Qlt,M:Hlt,p:Ie,q:Re,Q:iH,s:oH,S:zlt,u:Vlt,U:Wlt,V:Glt,w:Klt,W:Xlt,x:null,X:null,y:qlt,Y:Jlt,Z:ect,"%":sH},w={a:k,A:O,b:U,B:P,c:V,d:eH,e:eH,f:glt,g:Z8,G:J8,H:tH,I:tH,j:flt,L:mlt,m:dlt,M:hlt,p:N,q:Alt,Q:xlt,s:vlt,S:plt,u:olt,U:alt,V:llt,w:ilt,W:clt,x:W,X:L,y:Z8,Y:J8,Z:ult,"%":ylt};v.x=C(n,v),v.X=C(r,v),v.c=C(e,v),b.x=C(n,b),b.X=C(r,b),b.c=C(e,b);function C(ge,$e){return function(Te){var be=[],it=-1,et=0,st=ge.length,rt,ht,dt;for(Te instanceof Date||(Te=new Date(+Te));++it<st;)ge.charCodeAt(it)===37&&(be.push(ge.slice(et,it)),(ht=Y8[rt=ge.charAt(++it)])!=null?rt=ge.charAt(++it):ht=rt==="e"?" ":"0",(dt=$e[rt])&&(rt=dt(Te,ht)),be.push(rt),et=it+1);return be.push(ge.slice(et,it)),be.join("")}}function B(ge,$e){return function(Te){var be=pg(1900,void 0,1),it=S(be,ge,Te+="",0),et,st;if(it!=Te.length)return null;if("Q"in be)return new Date(be.Q);if("s"in be)return new Date(be.s*1e3+("L"in be?be.L:0));if($e&&!("Z"in be)&&(be.Z=0),"p"in be&&(be.H=be.H%12+be.p*12),be.m===void 0&&(be.m="q"in be?be.q:0),"V"in be){if(be.V<1||be.V>53)return null;"w"in be||(be.w=1),"Z"in be?(et=wE(pg(be.y,0,1)),st=et.getUTCDay(),et=st>4||st===0?nC.ceil(et):nC(et),et=R3.offset(et,(be.V-1)*7),be.y=et.getUTCFullYear(),be.m=et.getUTCMonth(),be.d=et.getUTCDate()+(be.w+6)%7):(et=bE(pg(be.y,0,1)),st=et.getDay(),et=st>4||st===0?tC.ceil(et):tC(et),et=Rv.offset(et,(be.V-1)*7),be.y=et.getFullYear(),be.m=et.getMonth(),be.d=et.getDate()+(be.w+6)%7)}else("W"in be||"U"in be)&&("w"in be||(be.w="u"in be?be.u%7:"W"in be?1:0),st="Z"in be?wE(pg(be.y,0,1)).getUTCDay():bE(pg(be.y,0,1)).getDay(),be.m=0,be.d="W"in be?(be.w+6)%7+be.W*7-(st+5)%7:be.w+be.U*7-(st+6)%7);return"Z"in be?(be.H+=be.Z/100|0,be.M+=be.Z%100,wE(be)):bE(be)}}function S(ge,$e,Te,be){for(var it=0,et=$e.length,st=Te.length,rt,ht;it<et;){if(be>=st)return-1;if(rt=$e.charCodeAt(it++),rt===37){if(rt=$e.charAt(it++),ht=w[rt in Y8?$e.charAt(it++):rt],!ht||(be=ht(ge,Te,be))<0)return-1}else if(rt!=Te.charCodeAt(be++))return-1}return be}function N(ge,$e,Te){var be=c.exec($e.slice(Te));return be?(ge.p=u.get(be[0].toLowerCase()),Te+be[0].length):-1}function k(ge,$e,Te){var be=f.exec($e.slice(Te));return be?(ge.w=h.get(be[0].toLowerCase()),Te+be[0].length):-1}function O(ge,$e,Te){var be=A.exec($e.slice(Te));return be?(ge.w=d.get(be[0].toLowerCase()),Te+be[0].length):-1}function U(ge,$e,Te){var be=y.exec($e.slice(Te));return be?(ge.m=x.get(be[0].toLowerCase()),Te+be[0].length):-1}function P(ge,$e,Te){var be=m.exec($e.slice(Te));return be?(ge.m=g.get(be[0].toLowerCase()),Te+be[0].length):-1}function V(ge,$e,Te){return S(ge,e,$e,Te)}function W(ge,$e,Te){return S(ge,n,$e,Te)}function L(ge,$e,Te){return S(ge,r,$e,Te)}function G(ge){return o[ge.getDay()]}function _(ge){return i[ge.getDay()]}function j(ge){return l[ge.getMonth()]}function K(ge){return a[ge.getMonth()]}function Y(ge){return s[+(ge.getHours()>=12)]}function J(ge){return 1+~~(ge.getMonth()/3)}function ae(ge){return o[ge.getUTCDay()]}function ue(ge){return i[ge.getUTCDay()]}function le(ge){return l[ge.getUTCMonth()]}function fe(ge){return a[ge.getUTCMonth()]}function Ie(ge){return s[+(ge.getUTCHours()>=12)]}function Re(ge){return 1+~~(ge.getUTCMonth()/3)}return{format:function(ge){var $e=C(ge+="",v);return $e.toString=function(){return ge},$e},parse:function(ge){var $e=B(ge+="",!1);return $e.toString=function(){return ge},$e},utcFormat:function(ge){var $e=C(ge+="",b);return $e.toString=function(){return ge},$e},utcParse:function(ge){var $e=B(ge+="",!0);return $e.toString=function(){return ge},$e}}}var Y8={"-":"",_:" ",0:"0"},us=/^\s*\d+/,nlt=/^%/,rlt=/[\\^$*+?|[\]().{}]/g;function Wt(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",i=s.length;return r+(i<n?new Array(n-i+1).join(e)+s:s)}function slt(t){return t.replace(rlt,"\\$&")}function mg(t){return new RegExp("^(?:"+t.map(slt).join("|")+")","i")}function gg(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function ilt(t,e,n){var r=us.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function olt(t,e,n){var r=us.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function alt(t,e,n){var r=us.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function llt(t,e,n){var r=us.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function clt(t,e,n){var r=us.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function J8(t,e,n){var r=us.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Z8(t,e,n){var r=us.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ult(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Alt(t,e,n){var r=us.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function dlt(t,e,n){var r=us.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function eH(t,e,n){var r=us.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function flt(t,e,n){var r=us.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function tH(t,e,n){var r=us.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function hlt(t,e,n){var r=us.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function plt(t,e,n){var r=us.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function mlt(t,e,n){var r=us.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function glt(t,e,n){var r=us.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ylt(t,e,n){var r=nlt.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function xlt(t,e,n){var r=us.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function vlt(t,e,n){var r=us.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function nH(t,e){return Wt(t.getDate(),e,2)}function blt(t,e){return Wt(t.getHours(),e,2)}function wlt(t,e){return Wt(t.getHours()%12||12,e,2)}function Clt(t,e){return Wt(1+Rv.count(Cc(t),t),e,3)}function bre(t,e){return Wt(t.getMilliseconds(),e,3)}function Slt(t,e){return bre(t,e)+"000"}function Blt(t,e){return Wt(t.getMonth()+1,e,2)}function Nlt(t,e){return Wt(t.getMinutes(),e,2)}function Elt(t,e){return Wt(t.getSeconds(),e,2)}function Ilt(t){var e=t.getDay();return e===0?7:e}function klt(t,e){return Wt(P3.count(Cc(t)-1,t),e,2)}function wre(t){var e=t.getDay();return e>=4||e===0?Bp(t):Bp.ceil(t)}function Tlt(t,e){return t=wre(t),Wt(Bp.count(Cc(t),t)+(Cc(t).getDay()===4),e,2)}function Flt(t){return t.getDay()}function $lt(t,e){return Wt(tC.count(Cc(t)-1,t),e,2)}function _lt(t,e){return Wt(t.getFullYear()%100,e,2)}function Olt(t,e){return t=wre(t),Wt(t.getFullYear()%100,e,2)}function Dlt(t,e){return Wt(t.getFullYear()%1e4,e,4)}function Rlt(t,e){var n=t.getDay();return t=n>=4||n===0?Bp(t):Bp.ceil(t),Wt(t.getFullYear()%1e4,e,4)}function Plt(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Wt(e/60|0,"0",2)+Wt(e%60,"0",2)}function rH(t,e){return Wt(t.getUTCDate(),e,2)}function Ult(t,e){return Wt(t.getUTCHours(),e,2)}function jlt(t,e){return Wt(t.getUTCHours()%12||12,e,2)}function Llt(t,e){return Wt(1+R3.count(Sc(t),t),e,3)}function Cre(t,e){return Wt(t.getUTCMilliseconds(),e,3)}function Mlt(t,e){return Cre(t,e)+"000"}function Qlt(t,e){return Wt(t.getUTCMonth()+1,e,2)}function Hlt(t,e){return Wt(t.getUTCMinutes(),e,2)}function zlt(t,e){return Wt(t.getUTCSeconds(),e,2)}function Vlt(t){var e=t.getUTCDay();return e===0?7:e}function Wlt(t,e){return Wt(U3.count(Sc(t)-1,t),e,2)}function Sre(t){var e=t.getUTCDay();return e>=4||e===0?Np(t):Np.ceil(t)}function Glt(t,e){return t=Sre(t),Wt(Np.count(Sc(t),t)+(Sc(t).getUTCDay()===4),e,2)}function Klt(t){return t.getUTCDay()}function Xlt(t,e){return Wt(nC.count(Sc(t)-1,t),e,2)}function qlt(t,e){return Wt(t.getUTCFullYear()%100,e,2)}function Ylt(t,e){return t=Sre(t),Wt(t.getUTCFullYear()%100,e,2)}function Jlt(t,e){return Wt(t.getUTCFullYear()%1e4,e,4)}function Zlt(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Np(t):Np.ceil(t),Wt(t.getUTCFullYear()%1e4,e,4)}function ect(){return"+0000"}function sH(){return"%"}function iH(t){return+t}function oH(t){return Math.floor(+t/1e3)}var Vf,Bre,Nre;tct({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function tct(t){return Vf=tlt(t),Bre=Vf.format,Vf.parse,Nre=Vf.utcFormat,Vf.utcParse,Vf}function nct(t){return new Date(t)}function rct(t){return t instanceof Date?+t:+new Date(+t)}function kP(t,e,n,r,s,i,o,a,l,c){var u=pP(),A=u.invert,d=u.domain,f=c(".%L"),h=c(":%S"),m=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),x=c("%b %d"),v=c("%B"),b=c("%Y");function w(C){return(l(C)<C?f:a(C)<C?h:o(C)<C?m:i(C)<C?g:r(C)<C?s(C)<C?y:x:n(C)<C?v:b)(C)}return u.invert=function(C){return new Date(A(C))},u.domain=function(C){return arguments.length?d(Array.from(C,rct)):d().map(nct)},u.ticks=function(C){var B=d();return t(B[0],B[B.length-1],C??10)},u.tickFormat=function(C,B){return B==null?w:c(B)},u.nice=function(C){var B=d();return(!C||typeof C.range!="function")&&(C=e(B[0],B[B.length-1],C??10)),C?d(dre(B,C)):u},u.copy=function(){return Dv(u,kP(t,e,n,r,s,i,o,a,l,c))},u}function sct(){return Zo.apply(kP(Zat,elt,Cc,EP,P3,Rv,BP,CP,Ad,Bre).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ict(){return Zo.apply(kP(Yat,Jat,Sc,IP,U3,R3,NP,SP,Ad,Nre).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function j3(){var t=0,e=1,n,r,s,i,o=ri,a=!1,l;function c(A){return A==null||isNaN(A=+A)?l:o(s===0?.5:(A=(i(A)-n)*s,a?Math.max(0,Math.min(1,A)):A))}c.domain=function(A){return arguments.length?([t,e]=A,n=i(t=+t),r=i(e=+e),s=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(A){return arguments.length?(a=!!A,c):a},c.interpolator=function(A){return arguments.length?(o=A,c):o};function u(A){return function(d){var f,h;return arguments.length?([f,h]=d,o=A(f,h),c):[o(0),o(1)]}}return c.range=u(Nm),c.rangeRound=u(hP),c.unknown=function(A){return arguments.length?(l=A,c):l},function(A){return i=A,n=A(t),r=A(e),s=n===r?0:1/(r-n),c}}function wA(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Ere(){var t=bA(j3()(ri));return t.copy=function(){return wA(t,Ere())},Rc.apply(t,arguments)}function Ire(){var t=yP(j3()).domain([1,10]);return t.copy=function(){return wA(t,Ire()).base(t.base())},Rc.apply(t,arguments)}function kre(){var t=xP(j3());return t.copy=function(){return wA(t,kre()).constant(t.constant())},Rc.apply(t,arguments)}function TP(){var t=vP(j3());return t.copy=function(){return wA(t,TP()).exponent(t.exponent())},Rc.apply(t,arguments)}function oct(){return TP.apply(null,arguments).exponent(.5)}function Tre(){var t=[],e=ri;function n(r){if(r!=null&&!isNaN(r=+r))return e((_v(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Uu),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,i)=>Wot(t,i/r))},n.copy=function(){return Tre(e).domain(t)},Rc.apply(n,arguments)}function L3(){var t=0,e=.5,n=1,r=1,s,i,o,a,l,c=ri,u,A=!1,d;function f(m){return isNaN(m=+m)?d:(m=.5+((m=+u(m))-i)*(r*m<r*i?a:l),c(A?Math.max(0,Math.min(1,m)):m))}f.domain=function(m){return arguments.length?([t,e,n]=m,s=u(t=+t),i=u(e=+e),o=u(n=+n),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),r=i<s?-1:1,f):[t,e,n]},f.clamp=function(m){return arguments.length?(A=!!m,f):A},f.interpolator=function(m){return arguments.length?(c=m,f):c};function h(m){return function(g){var y,x,v;return arguments.length?([y,x,v]=g,c=yat(m,[y,x,v]),f):[c(0),c(.5),c(1)]}}return f.range=h(Nm),f.rangeRound=h(hP),f.unknown=function(m){return arguments.length?(d=m,f):d},function(m){return u=m,s=m(t),i=m(e),o=m(n),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),r=i<s?-1:1,f}}function Fre(){var t=bA(L3()(ri));return t.copy=function(){return wA(t,Fre())},Rc.apply(t,arguments)}function $re(){var t=yP(L3()).domain([.1,1,10]);return t.copy=function(){return wA(t,$re()).base(t.base())},Rc.apply(t,arguments)}function _re(){var t=xP(L3());return t.copy=function(){return wA(t,_re()).constant(t.constant())},Rc.apply(t,arguments)}function FP(){var t=vP(L3());return t.copy=function(){return wA(t,FP()).exponent(t.exponent())},Rc.apply(t,arguments)}function act(){return FP.apply(null,arguments).exponent(.5)}const aH=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:g0,scaleDiverging:Fre,scaleDivergingLog:$re,scaleDivergingPow:FP,scaleDivergingSqrt:act,scaleDivergingSymlog:_re,scaleIdentity:Are,scaleImplicit:XT,scaleLinear:Z2,scaleLog:fre,scaleOrdinal:AP,scalePoint:dy,scalePow:bP,scaleQuantile:mre,scaleQuantize:gre,scaleRadial:pre,scaleSequential:Ere,scaleSequentialLog:Ire,scaleSequentialPow:TP,scaleSequentialQuantile:Tre,scaleSequentialSqrt:oct,scaleSequentialSymlog:kre,scaleSqrt:Mat,scaleSymlog:hre,scaleThreshold:yre,scaleTime:sct,scaleUtc:ict,tickFormat:ure},Symbol.toStringTag,{value:"Module"}));var lct=gm;function cct(t,e,n){for(var r=-1,s=t.length;++r<s;){var i=t[r],o=e(i);if(o!=null&&(a===void 0?o===o&&!lct(o):n(o,a)))var a=o,l=i}return l}var M3=cct;function uct(t,e){return t>e}var Ore=uct,Act=M3,dct=Ore,fct=Sm;function hct(t){return t&&t.length?Act(t,fct,dct):void 0}var pct=hct;const Q3=Gt(pct);function mct(t,e){return t<e}var Dre=mct,gct=M3,yct=Dre,xct=Sm;function vct(t){return t&&t.length?gct(t,xct,yct):void 0}var bct=vct;const H3=Gt(bct);var wct=VR,Cct=Nl,Sct=Qne,Bct=Qi;function Nct(t,e){var n=Bct(t)?wct:Sct;return n(t,Cct(e))}var Ect=Nct,Ict=Lne,kct=Ect;function Tct(t,e){return Ict(kct(t,e),1)}var Fct=Tct;const $ct=Gt(Fct);var _ct=oP;function Oct(t,e){return _ct(t,e)}var Dct=Oct;const z3=Gt(Dct);var Em=1e9,Rct={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},_P,Hn=!0,Wo="[DecimalError] ",$d=Wo+"Invalid argument: ",$P=Wo+"Exponent out of range: ",Im=Math.floor,KA=Math.pow,Pct=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Zi,Yr=1e7,$n=7,Rre=9007199254740991,rC=Im(Rre/$n),qe={};qe.absoluteValue=qe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};qe.comparedTo=qe.cmp=function(t){var e,n,r,s,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(r=i.d.length,s=t.d.length,e=0,n=r<s?r:s;e<n;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return r===s?0:r>s^i.s<0?1:-1};qe.decimalPlaces=qe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*$n;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};qe.dividedBy=qe.div=function(t){return uc(this,new this.constructor(t))};qe.dividedToIntegerBy=qe.idiv=function(t){var e=this,n=e.constructor;return xn(uc(e,new n(t),0,1),n.precision)};qe.equals=qe.eq=function(t){return!this.cmp(t)};qe.exponent=function(){return Tr(this)};qe.greaterThan=qe.gt=function(t){return this.cmp(t)>0};qe.greaterThanOrEqualTo=qe.gte=function(t){return this.cmp(t)>=0};qe.isInteger=qe.isint=function(){return this.e>this.d.length-2};qe.isNegative=qe.isneg=function(){return this.s<0};qe.isPositive=qe.ispos=function(){return this.s>0};qe.isZero=function(){return this.s===0};qe.lessThan=qe.lt=function(t){return this.cmp(t)<0};qe.lessThanOrEqualTo=qe.lte=function(t){return this.cmp(t)<1};qe.logarithm=qe.log=function(t){var e,n=this,r=n.constructor,s=r.precision,i=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Zi))throw Error(Wo+"NaN");if(n.s<1)throw Error(Wo+(n.s?"NaN":"-Infinity"));return n.eq(Zi)?new r(0):(Hn=!1,e=uc(w0(n,i),w0(t,i),i),Hn=!0,xn(e,s))};qe.minus=qe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?jre(e,t):Pre(e,(t.s=-t.s,t))};qe.modulo=qe.mod=function(t){var e,n=this,r=n.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(Wo+"NaN");return n.s?(Hn=!1,e=uc(n,t,0,1).times(t),Hn=!0,n.minus(e)):xn(new r(n),s)};qe.naturalExponential=qe.exp=function(){return Ure(this)};qe.naturalLogarithm=qe.ln=function(){return w0(this)};qe.negated=qe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};qe.plus=qe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Pre(e,t):jre(e,(t.s=-t.s,t))};qe.precision=qe.sd=function(t){var e,n,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error($d+t);if(e=Tr(s)+1,r=s.d.length-1,n=r*$n+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};qe.squareRoot=qe.sqrt=function(){var t,e,n,r,s,i,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Wo+"NaN")}for(t=Tr(a),Hn=!1,s=Math.sqrt(+a),s==0||s==1/0?(e=ol(a.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=Im((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(s.toString()),n=l.precision,s=o=n+3;;)if(i=r,r=i.plus(uc(a,i,o+2)).times(.5),ol(i.d).slice(0,o)===(e=ol(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),s==o&&e=="4999"){if(xn(i,n+1,0),i.times(i).eq(a)){r=i;break}}else if(e!="9999")break;o+=4}return Hn=!0,xn(r,n)};qe.times=qe.mul=function(t){var e,n,r,s,i,o,a,l,c,u=this,A=u.constructor,d=u.d,f=(t=new A(t)).d;if(!u.s||!t.s)return new A(0);for(t.s*=u.s,n=u.e+t.e,l=d.length,c=f.length,l<c&&(i=d,d=f,f=i,o=l,l=c,c=o),i=[],o=l+c,r=o;r--;)i.push(0);for(r=c;--r>=0;){for(e=0,s=l+r;s>r;)a=i[s]+f[r]*d[s-r-1]+e,i[s--]=a%Yr|0,e=a/Yr|0;i[s]=(i[s]+e)%Yr|0}for(;!i[--o];)i.pop();return e?++n:i.shift(),t.d=i,t.e=n,Hn?xn(t,A.precision):t};qe.toDecimalPlaces=qe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(xl(t,0,Em),e===void 0?e=r.rounding:xl(e,0,8),xn(n,t+Tr(n)+1,e))};qe.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=rf(r,!0):(xl(t,0,Em),e===void 0?e=s.rounding:xl(e,0,8),r=xn(new s(r),t+1,e),n=rf(r,!0,t+1)),n};qe.toFixed=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?rf(s):(xl(t,0,Em),e===void 0?e=i.rounding:xl(e,0,8),r=xn(new i(s),t+Tr(s)+1,e),n=rf(r.abs(),!1,t+Tr(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};qe.toInteger=qe.toint=function(){var t=this,e=t.constructor;return xn(new e(t),Tr(t)+1,e.rounding)};qe.toNumber=function(){return+this};qe.toPower=qe.pow=function(t){var e,n,r,s,i,o,a=this,l=a.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(Zi);if(a=new l(a),!a.s){if(t.s<1)throw Error(Wo+"Infinity");return a}if(a.eq(Zi))return a;if(r=l.precision,t.eq(Zi))return xn(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,i=a.s,o){if((n=u<0?-u:u)<=Rre){for(s=new l(Zi),e=Math.ceil(r/$n+4),Hn=!1;n%2&&(s=s.times(a),cH(s.d,e)),n=Im(n/2),n!==0;)a=a.times(a),cH(a.d,e);return Hn=!0,t.s<0?new l(Zi).div(s):xn(s,r)}}else if(i<0)throw Error(Wo+"NaN");return i=i<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Hn=!1,s=t.times(w0(a,r+c)),Hn=!0,s=Ure(s),s.s=i,s};qe.toPrecision=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?(n=Tr(s),r=rf(s,n<=i.toExpNeg||n>=i.toExpPos)):(xl(t,1,Em),e===void 0?e=i.rounding:xl(e,0,8),s=xn(new i(s),t,e),n=Tr(s),r=rf(s,t<=n||n<=i.toExpNeg,t)),r};qe.toSignificantDigits=qe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(xl(t,1,Em),e===void 0?e=r.rounding:xl(e,0,8)),xn(new r(n),t,e)};qe.toString=qe.valueOf=qe.val=qe.toJSON=qe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Tr(t),n=t.constructor;return rf(t,e<=n.toExpNeg||e>=n.toExpPos)};function Pre(t,e){var n,r,s,i,o,a,l,c,u=t.constructor,A=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),Hn?xn(e,A):e;if(l=t.d,c=e.d,o=t.e,s=e.e,l=l.slice(),i=o-s,i){for(i<0?(r=l,i=-i,a=c.length):(r=c,s=o,a=l.length),o=Math.ceil(A/$n),a=o>a?o+1:a+1,i>a&&(i=a,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(a=l.length,i=c.length,a-i<0&&(i=a,r=c,c=l,l=r),n=0;i;)n=(l[--i]=l[i]+c[i]+n)/Yr|0,l[i]%=Yr;for(n&&(l.unshift(n),++s),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=s,Hn?xn(e,A):e}function xl(t,e,n){if(t!==~~t||t<e||t>n)throw Error($d+t)}function ol(t){var e,n,r,s=t.length-1,i="",o=t[0];if(s>0){for(i+=o,e=1;e<s;e++)r=t[e]+"",n=$n-r.length,n&&(i+=Zc(n)),i+=r;o=t[e],r=o+"",n=$n-r.length,n&&(i+=Zc(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var uc=function(){function t(r,s){var i,o=0,a=r.length;for(r=r.slice();a--;)i=r[a]*s+o,r[a]=i%Yr|0,o=i/Yr|0;return o&&r.unshift(o),r}function e(r,s,i,o){var a,l;if(i!=o)l=i>o?1:-1;else for(a=l=0;a<i;a++)if(r[a]!=s[a]){l=r[a]>s[a]?1:-1;break}return l}function n(r,s,i){for(var o=0;i--;)r[i]-=o,o=r[i]<s[i]?1:0,r[i]=o*Yr+r[i]-s[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,i,o){var a,l,c,u,A,d,f,h,m,g,y,x,v,b,w,C,B,S,N=r.constructor,k=r.s==s.s?1:-1,O=r.d,U=s.d;if(!r.s)return new N(r);if(!s.s)throw Error(Wo+"Division by zero");for(l=r.e-s.e,B=U.length,w=O.length,f=new N(k),h=f.d=[],c=0;U[c]==(O[c]||0);)++c;if(U[c]>(O[c]||0)&&--l,i==null?x=i=N.precision:o?x=i+(Tr(r)-Tr(s))+1:x=i,x<0)return new N(0);if(x=x/$n+2|0,c=0,B==1)for(u=0,U=U[0],x++;(c<w||u)&&x--;c++)v=u*Yr+(O[c]||0),h[c]=v/U|0,u=v%U|0;else{for(u=Yr/(U[0]+1)|0,u>1&&(U=t(U,u),O=t(O,u),B=U.length,w=O.length),b=B,m=O.slice(0,B),g=m.length;g<B;)m[g++]=0;S=U.slice(),S.unshift(0),C=U[0],U[1]>=Yr/2&&++C;do u=0,a=e(U,m,B,g),a<0?(y=m[0],B!=g&&(y=y*Yr+(m[1]||0)),u=y/C|0,u>1?(u>=Yr&&(u=Yr-1),A=t(U,u),d=A.length,g=m.length,a=e(A,m,d,g),a==1&&(u--,n(A,B<d?S:U,d))):(u==0&&(a=u=1),A=U.slice()),d=A.length,d<g&&A.unshift(0),n(m,A,g),a==-1&&(g=m.length,a=e(U,m,B,g),a<1&&(u++,n(m,B<g?S:U,g))),g=m.length):a===0&&(u++,m=[0]),h[c++]=u,a&&m[0]?m[g++]=O[b]||0:(m=[O[b]],g=1);while((b++<w||m[0]!==void 0)&&x--)}return h[0]||h.shift(),f.e=l,xn(f,o?i+Tr(f)+1:i)}}();function Ure(t,e){var n,r,s,i,o,a,l=0,c=0,u=t.constructor,A=u.precision;if(Tr(t)>16)throw Error($P+Tr(t));if(!t.s)return new u(Zi);for(Hn=!1,a=A,o=new u(.03125);t.abs().gte(.1);)t=t.times(o),c+=5;for(r=Math.log(KA(2,c))/Math.LN10*2+5|0,a+=r,n=s=i=new u(Zi),u.precision=a;;){if(s=xn(s.times(t),a),n=n.times(++l),o=i.plus(uc(s,n,a)),ol(o.d).slice(0,a)===ol(i.d).slice(0,a)){for(;c--;)i=xn(i.times(i),a);return u.precision=A,e==null?(Hn=!0,xn(i,A)):i}i=o}}function Tr(t){for(var e=t.e*$n,n=t.d[0];n>=10;n/=10)e++;return e}function CE(t,e,n){if(e>t.LN10.sd())throw Hn=!0,n&&(t.precision=n),Error(Wo+"LN10 precision limit exceeded");return xn(new t(t.LN10),e)}function Zc(t){for(var e="";t--;)e+="0";return e}function w0(t,e){var n,r,s,i,o,a,l,c,u,A=1,d=10,f=t,h=f.d,m=f.constructor,g=m.precision;if(f.s<1)throw Error(Wo+(f.s?"NaN":"-Infinity"));if(f.eq(Zi))return new m(0);if(e==null?(Hn=!1,c=g):c=e,f.eq(10))return e==null&&(Hn=!0),CE(m,c);if(c+=d,m.precision=c,n=ol(h),r=n.charAt(0),i=Tr(f),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)f=f.times(t),n=ol(f.d),r=n.charAt(0),A++;i=Tr(f),r>1?(f=new m("0."+n),i++):f=new m(r+"."+n.slice(1))}else return l=CE(m,c+2,g).times(i+""),f=w0(new m(r+"."+n.slice(1)),c-d).plus(l),m.precision=g,e==null?(Hn=!0,xn(f,g)):f;for(a=o=f=uc(f.minus(Zi),f.plus(Zi),c),u=xn(f.times(f),c),s=3;;){if(o=xn(o.times(u),c),l=a.plus(uc(o,new m(s),c)),ol(l.d).slice(0,c)===ol(a.d).slice(0,c))return a=a.times(2),i!==0&&(a=a.plus(CE(m,c+2,g).times(i+""))),a=uc(a,new m(A),c),m.precision=g,e==null?(Hn=!0,xn(a,g)):a;a=l,s+=2}}function lH(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,n=n-r-1,t.e=Im(n/$n),t.d=[],r=(n+1)%$n,n<0&&(r+=$n),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=$n;r<s;)t.d.push(+e.slice(r,r+=$n));e=e.slice(r),r=$n-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),Hn&&(t.e>rC||t.e<-rC))throw Error($P+n)}else t.s=0,t.e=0,t.d=[0];return t}function xn(t,e,n){var r,s,i,o,a,l,c,u,A=t.d;for(o=1,i=A[0];i>=10;i/=10)o++;if(r=e-o,r<0)r+=$n,s=e,c=A[u=0];else{if(u=Math.ceil((r+1)/$n),i=A.length,u>=i)return t;for(c=i=A[u],o=1;i>=10;i/=10)o++;r%=$n,s=r-$n+o}if(n!==void 0&&(i=KA(10,o-s-1),a=c/i%10|0,l=e<0||A[u+1]!==void 0||c%i,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?s>0?c/KA(10,o-s):0:A[u-1])%10&1||n==(t.s<0?8:7))),e<1||!A[0])return l?(i=Tr(t),A.length=1,e=e-i-1,A[0]=KA(10,($n-e%$n)%$n),t.e=Im(-e/$n)||0):(A.length=1,A[0]=t.e=t.s=0),t;if(r==0?(A.length=u,i=1,u--):(A.length=u+1,i=KA(10,$n-r),A[u]=s>0?(c/KA(10,o-s)%KA(10,s)|0)*i:0),l)for(;;)if(u==0){(A[0]+=i)==Yr&&(A[0]=1,++t.e);break}else{if(A[u]+=i,A[u]!=Yr)break;A[u--]=0,i=1}for(r=A.length;A[--r]===0;)A.pop();if(Hn&&(t.e>rC||t.e<-rC))throw Error($P+Tr(t));return t}function jre(t,e){var n,r,s,i,o,a,l,c,u,A,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new d(t),Hn?xn(e,f):e;if(l=t.d,A=e.d,r=e.e,c=t.e,l=l.slice(),o=c-r,o){for(u=o<0,u?(n=l,o=-o,a=A.length):(n=A,r=c,a=l.length),s=Math.max(Math.ceil(f/$n),a)+2,o>s&&(o=s,n.length=1),n.reverse(),s=o;s--;)n.push(0);n.reverse()}else{for(s=l.length,a=A.length,u=s<a,u&&(a=s),s=0;s<a;s++)if(l[s]!=A[s]){u=l[s]<A[s];break}o=0}for(u&&(n=l,l=A,A=n,e.s=-e.s),a=l.length,s=A.length-a;s>0;--s)l[a++]=0;for(s=A.length;s>o;){if(l[--s]<A[s]){for(i=s;i&&l[--i]===0;)l[i]=Yr-1;--l[i],l[s]+=Yr}l[s]-=A[s]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Hn?xn(e,f):e):new d(0)}function rf(t,e,n){var r,s=Tr(t),i=ol(t.d),o=i.length;return e?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+Zc(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Zc(-s-1)+i,n&&(r=n-o)>0&&(i+=Zc(r))):s>=o?(i+=Zc(s+1-o),n&&(r=n-s-1)>0&&(i=i+"."+Zc(r))):((r=s+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(s+1===o&&(i+="."),i+=Zc(r))),t.s<0?"-"+i:i}function cH(t,e){if(t.length>e)return t.length=e,!0}function Lre(t){var e,n,r;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error($d+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return lH(o,i.toString())}else if(typeof i!="string")throw Error($d+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Pct.test(i))lH(o,i);else throw Error($d+i)}if(s.prototype=qe,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=Lre,s.config=s.set=Uct,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function Uct(t){if(!t||typeof t!="object")throw Error(Wo+"Object expected");var e,n,r,s=["precision",1,Em,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[n=s[e]])!==void 0)if(Im(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error($d+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error($d+n+": "+r);return this}var _P=Lre(Rct);Zi=new _P(1);const An=_P;function jct(t){return Hct(t)||Qct(t)||Mct(t)||Lct()}function Lct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mct(t,e){if(t){if(typeof t=="string")return ZT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZT(t,e)}}function Qct(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Hct(t){if(Array.isArray(t))return ZT(t)}function ZT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var zct=function(e){return e},Mre={},Qre=function(e){return e===Mre},uH=function(e){return function n(){return arguments.length===0||arguments.length===1&&Qre(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Vct=function t(e,n){return e===1?n:uH(function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];var o=s.filter(function(a){return a!==Mre}).length;return o>=e?n.apply(void 0,s):t(e-o,uH(function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];var u=s.map(function(A){return Qre(A)?l.shift():A});return n.apply(void 0,jct(u).concat(l))}))})},V3=function(e){return Vct(e.length,e)},eF=function(e,n){for(var r=[],s=e;s<n;++s)r[s-e]=s;return r},Wct=V3(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Gct=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return zct;var s=n.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(a,l){return l(a)},i.apply(void 0,arguments))}},tF=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Hre=function(e){var n=null,r=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return n&&i.every(function(a,l){return a===n[l]})||(n=i,r=e.apply(void 0,i)),r}};function Kct(t){var e;return t===0?e=1:e=Math.floor(new An(t).abs().log(10).toNumber())+1,e}function Xct(t,e,n){for(var r=new An(t),s=0,i=[];r.lt(e)&&s<1e5;)i.push(r.toNumber()),r=r.add(n),s++;return i}var qct=V3(function(t,e,n){var r=+t,s=+e;return r+n*(s-r)}),Yct=V3(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),Jct=V3(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const W3={rangeStep:Xct,getDigitCount:Kct,interpolateNumber:qct,uninterpolateNumber:Yct,uninterpolateTruncation:Jct};function nF(t){return tut(t)||eut(t)||zre(t)||Zct()}function Zct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eut(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function tut(t){if(Array.isArray(t))return rF(t)}function C0(t,e){return sut(t)||rut(t,e)||zre(t,e)||nut()}function nut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zre(t,e){if(t){if(typeof t=="string")return rF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rF(t,e)}}function rF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rut(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,i=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function sut(t){if(Array.isArray(t))return t}function Vre(t){var e=C0(t,2),n=e[0],r=e[1],s=n,i=r;return n>r&&(s=r,i=n),[s,i]}function Wre(t,e,n){if(t.lte(0))return new An(0);var r=W3.getDigitCount(t.toNumber()),s=new An(10).pow(r),i=t.div(s),o=r!==1?.05:.1,a=new An(Math.ceil(i.div(o).toNumber())).add(n).mul(o),l=a.mul(s);return e?l:new An(Math.ceil(l))}function iut(t,e,n){var r=1,s=new An(t);if(!s.isint()&&n){var i=Math.abs(t);i<1?(r=new An(10).pow(W3.getDigitCount(t)-1),s=new An(Math.floor(s.div(r).toNumber())).mul(r)):i>1&&(s=new An(Math.floor(t)))}else t===0?s=new An(Math.floor((e-1)/2)):n||(s=new An(Math.floor(t)));var o=Math.floor((e-1)/2),a=Gct(Wct(function(l){return s.add(new An(l-o).mul(r)).toNumber()}),eF);return a(0,e)}function Gre(t,e,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new An(0),tickMin:new An(0),tickMax:new An(0)};var i=Wre(new An(e).sub(t).div(n-1),r,s),o;t<=0&&e>=0?o=new An(0):(o=new An(t).add(e).div(2),o=o.sub(new An(o).mod(i)));var a=Math.ceil(o.sub(t).div(i).toNumber()),l=Math.ceil(new An(e).sub(o).div(i).toNumber()),c=a+l+1;return c>n?Gre(t,e,n,r,s+1):(c<n&&(l=e>0?l+(n-c):l,a=e>0?a:a+(n-c)),{step:i,tickMin:o.sub(new An(a).mul(i)),tickMax:o.add(new An(l).mul(i))})}function out(t){var e=C0(t,2),n=e[0],r=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),a=Vre([n,r]),l=C0(a,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var A=u===1/0?[c].concat(nF(eF(0,s-1).map(function(){return 1/0}))):[].concat(nF(eF(0,s-1).map(function(){return-1/0})),[u]);return n>r?tF(A):A}if(c===u)return iut(c,s,i);var d=Gre(c,u,o,i),f=d.step,h=d.tickMin,m=d.tickMax,g=W3.rangeStep(h,m.add(new An(.1).mul(f)),f);return n>r?tF(g):g}function aut(t,e){var n=C0(t,2),r=n[0],s=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Vre([r,s]),a=C0(o,2),l=a[0],c=a[1];if(l===-1/0||c===1/0)return[r,s];if(l===c)return[l];var u=Math.max(e,2),A=Wre(new An(c).sub(l).div(u-1),i,0),d=[].concat(nF(W3.rangeStep(new An(l),new An(c).sub(new An(.99).mul(A)),A)),[c]);return r>s?tF(d):d}var lut=Hre(out),cut=Hre(aut),uut="Invariant failed";function sf(t,e){throw new Error(uut)}var Aut=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ep(t){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(t)}function sC(){return sC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sC.apply(this,arguments)}function dut(t,e){return mut(t)||put(t,e)||hut(t,e)||fut()}function fut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hut(t,e){if(t){if(typeof t=="string")return AH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AH(t,e)}}function AH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function put(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function mut(t){if(Array.isArray(t))return t}function gut(t,e){if(t==null)return{};var n=yut(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yut(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qre(r.key),r)}}function but(t,e,n){return e&&vut(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wut(t,e,n){return e=iC(e),Cut(t,Kre()?Reflect.construct(e,n||[],iC(t).constructor):e.apply(t,n))}function Cut(t,e){if(e&&(Ep(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sut(t)}function Sut(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kre(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kre=function(){return!!t})()}function iC(t){return iC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iC(t)}function But(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sF(t,e)}function sF(t,e){return sF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},sF(t,e)}function Xre(t,e,n){return e=qre(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qre(t){var e=Nut(t,"string");return Ep(e)=="symbol"?e:e+""}function Nut(t,e){if(Ep(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var G3=function(t){function e(){return xut(this,e),wut(this,e,arguments)}return But(e,t),but(e,[{key:"render",value:function(){var r=this.props,s=r.offset,i=r.layout,o=r.width,a=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,A=r.yAxis,d=gut(r,Aut),f=ut(d,!1);this.props.direction==="x"&&u.type!=="number"&&sf();var h=l.map(function(m){var g=c(m,a),y=g.x,x=g.y,v=g.value,b=g.errorVal;if(!b)return null;var w=[],C,B;if(Array.isArray(b)){var S=dut(b,2);C=S[0],B=S[1]}else C=B=b;if(i==="vertical"){var N=u.scale,k=x+s,O=k+o,U=k-o,P=N(v-C),V=N(v+B);w.push({x1:V,y1:O,x2:V,y2:U}),w.push({x1:P,y1:k,x2:V,y2:k}),w.push({x1:P,y1:O,x2:P,y2:U})}else if(i==="horizontal"){var W=A.scale,L=y+s,G=L-o,_=L+o,j=W(v-C),K=W(v+B);w.push({x1:G,y1:K,x2:_,y2:K}),w.push({x1:L,y1:j,x2:L,y2:K}),w.push({x1:G,y1:j,x2:_,y2:j})}return ie.createElement(yn,sC({className:"recharts-errorBar",key:"bar-".concat(w.map(function(Y){return"".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))},f),w.map(function(Y){return ie.createElement("line",sC({},Y,{key:"line-".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))}))});return ie.createElement(yn,{className:"recharts-errorBars"},h)}}])}(ie.Component);Xre(G3,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Xre(G3,"displayName","ErrorBar");function S0(t){"@babel/helpers - typeof";return S0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S0(t)}function dH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function UA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dH(Object(n),!0).forEach(function(r){Eut(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eut(t,e,n){return e=Iut(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Iut(t){var e=kut(t,"string");return S0(e)=="symbol"?e:e+""}function kut(t,e){if(S0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(S0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yre=function(e){var n=e.children,r=e.formattedGraphicalItems,s=e.legendWidth,i=e.legendContent,o=qi(n,ha);if(!o)return null;var a=ha.defaultProps,l=a!==void 0?UA(UA({},a),o.props):{},c;return o.props&&o.props.payload?c=o.props&&o.props.payload:i==="children"?c=(r||[]).reduce(function(u,A){var d=A.item,f=A.props,h=f.sectors||f.data||[];return u.concat(h.map(function(m){return{type:o.props.iconType||d.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):c=(r||[]).map(function(u){var A=u.item,d=A.type.defaultProps,f=d!==void 0?UA(UA({},d),A.props):{},h=f.dataKey,m=f.name,g=f.legendType,y=f.hide;return{inactive:y,dataKey:h,type:l.iconType||g||"square",color:OP(A),value:m||h,payload:f}}),UA(UA(UA({},l),ha.getWithHeight(o,s)),{},{payload:c,item:o})};function B0(t){"@babel/helpers - typeof";return B0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B0(t)}function fH(t){return _ut(t)||$ut(t)||Fut(t)||Tut()}function Tut(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fut(t,e){if(t){if(typeof t=="string")return iF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iF(t,e)}}function $ut(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _ut(t){if(Array.isArray(t))return iF(t)}function iF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function nr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hH(Object(n),!0).forEach(function(r){Ph(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ph(t,e,n){return e=Out(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Out(t){var e=Dut(t,"string");return B0(e)=="symbol"?e:e+""}function Dut(t,e){if(B0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(B0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Go(t,e,n){return Ht(t)||Ht(e)?n:zr(e)?Lo(t,e,n):xt(e)?e(t):n}function fy(t,e,n,r){var s=$ct(t,function(a){return Go(a,e)});if(n==="number"){var i=s.filter(function(a){return je(a)||parseFloat(a)});return i.length?[H3(i),Q3(i)]:[1/0,-1/0]}var o=r?s.filter(function(a){return!Ht(a)}):s;return o.map(function(a){return zr(a)||a instanceof Date?a:""})}var Rut=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var l=i.range,c=0;c<a;c++){var u=c>0?s[c-1].coordinate:s[a-1].coordinate,A=s[c].coordinate,d=c>=a-1?s[0].coordinate:s[c+1].coordinate,f=void 0;if(ma(A-u)!==ma(d-A)){var h=[];if(ma(d-A)===ma(l[1]-l[0])){f=d;var m=A+l[1]-l[0];h[0]=Math.min(m,(m+u)/2),h[1]=Math.max(m,(m+u)/2)}else{f=u;var g=d+l[1]-l[0];h[0]=Math.min(A,(g+A)/2),h[1]=Math.max(A,(g+A)/2)}var y=[Math.min(A,(f+A)/2),Math.max(A,(f+A)/2)];if(e>y[0]&&e<=y[1]||e>=h[0]&&e<=h[1]){o=s[c].index;break}}else{var x=Math.min(u,d),v=Math.max(u,d);if(e>(x+A)/2&&e<=(v+A)/2){o=s[c].index;break}}}else for(var b=0;b<a;b++)if(b===0&&e<=(r[b].coordinate+r[b+1].coordinate)/2||b>0&&b<a-1&&e>(r[b].coordinate+r[b-1].coordinate)/2&&e<=(r[b].coordinate+r[b+1].coordinate)/2||b===a-1&&e>(r[b].coordinate+r[b-1].coordinate)/2){o=r[b].index;break}return o},OP=function(e){var n,r=e,s=r.type.displayName,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?nr(nr({},e.type.defaultProps),e.props):e.props,o=i.stroke,a=i.fill,l;switch(s){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:a;break;default:l=a;break}return l},Put=function(e){var n=e.barSize,r=e.totalSize,s=e.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},a=Object.keys(i),l=0,c=a.length;l<c;l++)for(var u=i[a[l]].stackGroups,A=Object.keys(u),d=0,f=A.length;d<f;d++){var h=u[A[d]],m=h.items,g=h.cateAxisId,y=m.filter(function(B){return lc(B.type).indexOf("Bar")>=0});if(y&&y.length){var x=y[0].type.defaultProps,v=x!==void 0?nr(nr({},x),y[0].props):y[0].props,b=v.barSize,w=v[g];o[w]||(o[w]=[]);var C=Ht(b)?n:b;o[w].push({item:y[0],stackList:y.slice(1),barSize:Ht(C)?void 0:ga(C,r,0)})}}return o},Uut=function(e){var n=e.barGap,r=e.barCategoryGap,s=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,a=e.maxBarSize,l=o.length;if(l<1)return null;var c=ga(n,s,0,!0),u,A=[];if(o[0].barSize===+o[0].barSize){var d=!1,f=s/l,h=o.reduce(function(b,w){return b+w.barSize||0},0);h+=(l-1)*c,h>=s&&(h-=(l-1)*c,c=0),h>=s&&f>0&&(d=!0,f*=.9,h=l*f);var m=(s-h)/2>>0,g={offset:m-c,size:0};u=o.reduce(function(b,w){var C={item:w.item,position:{offset:g.offset+g.size+c,size:d?f:w.barSize}},B=[].concat(fH(b),[C]);return g=B[B.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){B.push({item:S,position:g})}),B},A)}else{var y=ga(r,s,0,!0);s-2*y-(l-1)*c<=0&&(c=0);var x=(s-2*y-(l-1)*c)/l;x>1&&(x>>=0);var v=a===+a?Math.min(x,a):x;u=o.reduce(function(b,w,C){var B=[].concat(fH(b),[{item:w.item,position:{offset:y+(x+c)*C+(x-v)/2,size:v}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){B.push({item:S,position:B[B.length-1].position})}),B},A)}return u},jut=function(e,n,r,s){var i=r.children,o=r.width,a=r.margin,l=o-(a.left||0)-(a.right||0),c=Yre({children:i,legendWidth:l});if(c){var u=s||{},A=u.width,d=u.height,f=c.align,h=c.verticalAlign,m=c.layout;if((m==="vertical"||m==="horizontal"&&h==="middle")&&f!=="center"&&je(e[f]))return nr(nr({},e),{},Ph({},f,e[f]+(A||0)));if((m==="horizontal"||m==="vertical"&&f==="center")&&h!=="middle"&&je(e[h]))return nr(nr({},e),{},Ph({},h,e[h]+(d||0)))}return e},Lut=function(e,n,r){return Ht(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},Jre=function(e,n,r,s,i){var o=n.props.children,a=Sa(o,G3).filter(function(c){return Lut(s,i,c.props.direction)});if(a&&a.length){var l=a.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var A=Go(u,r);if(Ht(A))return c;var d=Array.isArray(A)?[H3(A),Q3(A)]:[A,A],f=l.reduce(function(h,m){var g=Go(u,m,0),y=d[0]-Math.abs(Array.isArray(g)?g[0]:g),x=d[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(y,h[0]),Math.max(x,h[1])]},[1/0,-1/0]);return[Math.min(f[0],c[0]),Math.max(f[1],c[1])]},[1/0,-1/0])}return null},Mut=function(e,n,r,s,i){var o=n.map(function(a){return Jre(e,a,r,i,s)}).filter(function(a){return!Ht(a)});return o&&o.length?o.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},Zre=function(e,n,r,s,i){var o=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&Jre(e,l,c,s)||fy(e,c,r,i)});if(r==="number")return o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var a={};return o.reduce(function(l,c){for(var u=0,A=c.length;u<A;u++)a[c[u]]||(a[c[u]]=!0,l.push(c[u]));return l},[])},ese=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},tse=function(e,n,r,s){if(s)return e.map(function(l){return l.coordinate});var i,o,a=e.map(function(l){return l.coordinate===n&&(i=!0),l.coordinate===r&&(o=!0),l.coordinate});return i||a.push(n),o||a.push(r),a},rc=function(e,n,r){if(!e)return null;var s=e.scale,i=e.duplicateDomain,o=e.type,a=e.range,l=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,c=(n||r)&&o==="category"&&s.bandwidth?s.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?ma(a[0]-a[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(A){var d=i?i.indexOf(A):A;return{coordinate:s(d)+c,value:A,offset:c}});return u.filter(function(A){return!Fv(A.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(A,d){return{coordinate:s(A)+c,value:A,index:d,offset:c}}):s.ticks&&!r?s.ticks(e.tickCount).map(function(A){return{coordinate:s(A)+c,value:A,offset:c}}):s.domain().map(function(A,d){return{coordinate:s(A)+c,value:i?i[A]:A,index:d,offset:c}})},SE=new WeakMap,Ib=function(e,n){if(typeof n!="function")return e;SE.has(e)||SE.set(e,new WeakMap);var r=SE.get(e);if(r.has(n))return r.get(n);var s=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,s),s},nse=function(e,n,r){var s=e.scale,i=e.type,o=e.layout,a=e.axisType;if(s==="auto")return o==="radial"&&a==="radiusAxis"?{scale:g0(),realScaleType:"band"}:o==="radial"&&a==="angleAxis"?{scale:Z2(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:dy(),realScaleType:"point"}:i==="category"?{scale:g0(),realScaleType:"band"}:{scale:Z2(),realScaleType:"linear"};if(nf(s)){var l="scale".concat(I3(s));return{scale:(aH[l]||dy)(),realScaleType:aH[l]?l:"point"}}return xt(s)?{scale:s}:{scale:dy(),realScaleType:"point"}},pH=1e-4,rse=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,s=e.range(),i=Math.min(s[0],s[1])-pH,o=Math.max(s[0],s[1])+pH,a=e(n[0]),l=e(n[r-1]);(a<i||a>o||l<i||l>o)&&e.domain([n[0],n[r-1]])}},Qut=function(e,n){if(!e)return null;for(var r=0,s=e.length;r<s;r++)if(e[r].item===n)return e[r].position;return null},Hut=function(e,n){if(!n||n.length!==2||!je(n[0])||!je(n[1]))return e;var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),i=[e[0],e[1]];return(!je(e[0])||e[0]<r)&&(i[0]=r),(!je(e[1])||e[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<r&&(i[1]=r),i},zut=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var i=0,o=0,a=0;a<n;++a){var l=Fv(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=i,e[a][r][1]=i+l,i=e[a][r][1]):(e[a][r][0]=o,e[a][r][1]=o+l,o=e[a][r][1])}},Vut=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var i=0,o=0;o<n;++o){var a=Fv(e[o][r][1])?e[o][r][0]:e[o][r][1];a>=0?(e[o][r][0]=i,e[o][r][1]=i+a,i=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},Wut={sign:zut,expand:cYe,none:yp,silhouette:uYe,wiggle:AYe,positive:Vut},Gut=function(e,n,r){var s=n.map(function(a){return a.props.dataKey}),i=Wut[r],o=lYe().keys(s).value(function(a,l){return+Go(a,l,0)}).order(TT).offset(i);return o(e)},Kut=function(e,n,r,s,i,o){if(!e)return null;var a=o?n.reverse():n,l={},c=a.reduce(function(A,d){var f,h=(f=d.type)!==null&&f!==void 0&&f.defaultProps?nr(nr({},d.type.defaultProps),d.props):d.props,m=h.stackId,g=h.hide;if(g)return A;var y=h[r],x=A[y]||{hasStack:!1,stackGroups:{}};if(zr(m)){var v=x.stackGroups[m]||{numericAxisId:r,cateAxisId:s,items:[]};v.items.push(d),x.hasStack=!0,x.stackGroups[m]=v}else x.stackGroups[E3("_stackId_")]={numericAxisId:r,cateAxisId:s,items:[d]};return nr(nr({},A),{},Ph({},y,x))},l),u={};return Object.keys(c).reduce(function(A,d){var f=c[d];if(f.hasStack){var h={};f.stackGroups=Object.keys(f.stackGroups).reduce(function(m,g){var y=f.stackGroups[g];return nr(nr({},m),{},Ph({},g,{numericAxisId:r,cateAxisId:s,items:y.items,stackedData:Gut(e,y.items,i)}))},h)}return nr(nr({},A),{},Ph({},d,f))},u)},sse=function(e,n){var r=n.realScaleType,s=n.type,i=n.tickCount,o=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=lut(c,i,a);return e.domain([H3(u),Q3(u)]),{niceTicks:u}}if(i&&s==="number"){var A=e.domain(),d=cut(A,i,a);return{niceTicks:d}}return null},mH=function(e){var n=e.axis,r=e.ticks,s=e.offset,i=e.bandSize,o=e.entry,a=e.index;if(n.type==="category")return r[a]?r[a].coordinate+s:null;var l=Go(o,n.dataKey,n.domain[a]);return Ht(l)?null:n.scale(l)-i/2+s},Xut=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var s=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return s<=0&&i>=0?0:i<0?i:s}return r[0]},qut=function(e,n){var r,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?nr(nr({},e.type.defaultProps),e.props):e.props,i=s.stackId;if(zr(i)){var o=n[i];if(o){var a=o.items.indexOf(e);return a>=0?o.stackedData[a]:null}}return null},Yut=function(e){return e.reduce(function(n,r){return[H3(r.concat([n[0]]).filter(je)),Q3(r.concat([n[1]]).filter(je))]},[1/0,-1/0])},ise=function(e,n,r){return Object.keys(e).reduce(function(s,i){var o=e[i],a=o.stackedData,l=a.reduce(function(c,u){var A=Yut(u.slice(n,r+1));return[Math.min(c[0],A[0]),Math.max(c[1],A[1])]},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},gH=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,yH=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,oF=function(e,n,r){if(xt(e))return e(n,r);if(!Array.isArray(e))return n;var s=[];if(je(e[0]))s[0]=r?e[0]:Math.min(e[0],n[0]);else if(gH.test(e[0])){var i=+gH.exec(e[0])[1];s[0]=n[0]-i}else xt(e[0])?s[0]=e[0](n[0]):s[0]=n[0];if(je(e[1]))s[1]=r?e[1]:Math.max(e[1],n[1]);else if(yH.test(e[1])){var o=+yH.exec(e[1])[1];s[1]=n[1]+o}else xt(e[1])?s[1]=e[1](n[1]):s[1]=n[1];return s},oC=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!r||s>0)return s}if(e&&n&&n.length>=2){for(var i=lP(n,function(A){return A.coordinate}),o=1/0,a=1,l=i.length;a<l;a++){var c=i[a],u=i[a-1];o=Math.min((c.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},xH=function(e,n,r){return!e||!e.length||z3(e,Lo(r,"type.defaultProps.domain"))?n:e},ose=function(e,n){var r=e.type.defaultProps?nr(nr({},e.type.defaultProps),e.props):e.props,s=r.dataKey,i=r.name,o=r.unit,a=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return nr(nr({},ut(e,!1)),{},{dataKey:s,unit:o,formatter:a,name:i||s,color:OP(e),value:Go(n,s),type:l,payload:n,chartType:c,hide:u})};function N0(t){"@babel/helpers - typeof";return N0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N0(t)}function vH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ll(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vH(Object(n),!0).forEach(function(r){ase(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ase(t,e,n){return e=Jut(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jut(t){var e=Zut(t,"string");return N0(e)=="symbol"?e:e+""}function Zut(t,e){if(N0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(N0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eAt(t,e){return sAt(t)||rAt(t,e)||nAt(t,e)||tAt()}function tAt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nAt(t,e){if(t){if(typeof t=="string")return bH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bH(t,e)}}function bH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rAt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function sAt(t){if(Array.isArray(t))return t}var aC=Math.PI/180,iAt=function(e){return e*180/Math.PI},pn=function(e,n,r,s){return{x:e+Math.cos(-aC*s)*r,y:n+Math.sin(-aC*s)*r}},oAt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},aAt=function(e,n,r,s,i){var o=e.width,a=e.height,l=e.startAngle,c=e.endAngle,u=ga(e.cx,o,o/2),A=ga(e.cy,a,a/2),d=oAt(o,a,r),f=ga(e.innerRadius,d,0),h=ga(e.outerRadius,d,d*.8),m=Object.keys(n);return m.reduce(function(g,y){var x=n[y],v=x.domain,b=x.reversed,w;if(Ht(x.range))s==="angleAxis"?w=[l,c]:s==="radiusAxis"&&(w=[f,h]),b&&(w=[w[1],w[0]]);else{w=x.range;var C=w,B=eAt(C,2);l=B[0],c=B[1]}var S=nse(x,i),N=S.realScaleType,k=S.scale;k.domain(v).range(w),rse(k);var O=sse(k,Ll(Ll({},x),{},{realScaleType:N})),U=Ll(Ll(Ll({},x),O),{},{range:w,radius:h,realScaleType:N,scale:k,cx:u,cy:A,innerRadius:f,outerRadius:h,startAngle:l,endAngle:c});return Ll(Ll({},g),{},ase({},y,U))},{})},lAt=function(e,n){var r=e.x,s=e.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(s-o,2))},cAt=function(e,n){var r=e.x,s=e.y,i=n.cx,o=n.cy,a=lAt({x:r,y:s},{x:i,y:o});if(a<=0)return{radius:a};var l=(r-i)/a,c=Math.acos(l);return s>o&&(c=2*Math.PI-c),{radius:a,angle:iAt(c),angleInRadian:c}},uAt=function(e){var n=e.startAngle,r=e.endAngle,s=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(s,i);return{startAngle:n-o*360,endAngle:r-o*360}},AAt=function(e,n){var r=n.startAngle,s=n.endAngle,i=Math.floor(r/360),o=Math.floor(s/360),a=Math.min(i,o);return e+a*360},wH=function(e,n){var r=e.x,s=e.y,i=cAt({x:r,y:s},n),o=i.radius,a=i.angle,l=n.innerRadius,c=n.outerRadius;if(o<l||o>c)return!1;if(o===0)return!0;var u=uAt(n),A=u.startAngle,d=u.endAngle,f=a,h;if(A<=d){for(;f>d;)f-=360;for(;f<A;)f+=360;h=f>=A&&f<=d}else{for(;f>A;)f-=360;for(;f<d;)f+=360;h=f>=d&&f<=A}return h?Ll(Ll({},n),{},{radius:o,angle:AAt(f,n)}):null},lse=function(e){return!Q.isValidElement(e)&&!xt(e)&&typeof e!="boolean"?e.className:""};function E0(t){"@babel/helpers - typeof";return E0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E0(t)}var dAt=["offset"];function fAt(t){return gAt(t)||mAt(t)||pAt(t)||hAt()}function hAt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pAt(t,e){if(t){if(typeof t=="string")return aF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aF(t,e)}}function mAt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gAt(t){if(Array.isArray(t))return aF(t)}function aF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yAt(t,e){if(t==null)return{};var n=xAt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xAt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function CH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Rr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CH(Object(n),!0).forEach(function(r){vAt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vAt(t,e,n){return e=bAt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bAt(t){var e=wAt(t,"string");return E0(e)=="symbol"?e:e+""}function wAt(t,e){if(E0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(E0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I0(){return I0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},I0.apply(this,arguments)}var CAt=function(e){var n=e.value,r=e.formatter,s=Ht(e.children)?n:e.children;return xt(r)?r(s):s},SAt=function(e,n){var r=ma(n-e),s=Math.min(Math.abs(n-e),360);return r*s},BAt=function(e,n,r){var s=e.position,i=e.viewBox,o=e.offset,a=e.className,l=i,c=l.cx,u=l.cy,A=l.innerRadius,d=l.outerRadius,f=l.startAngle,h=l.endAngle,m=l.clockWise,g=(A+d)/2,y=SAt(f,h),x=y>=0?1:-1,v,b;s==="insideStart"?(v=f+x*o,b=m):s==="insideEnd"?(v=h-x*o,b=!m):s==="end"&&(v=h+x*o,b=m),b=y<=0?b:!b;var w=pn(c,u,g,v),C=pn(c,u,g,v+(b?1:-1)*359),B="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(b?0:1,`,
    `).concat(C.x,",").concat(C.y),S=Ht(e.id)?E3("recharts-radial-line-"):e.id;return ie.createElement("text",I0({},r,{dominantBaseline:"central",className:It("recharts-radial-bar-label",a)}),ie.createElement("defs",null,ie.createElement("path",{id:S,d:B})),ie.createElement("textPath",{xlinkHref:"#".concat(S)},n))},NAt=function(e){var n=e.viewBox,r=e.offset,s=e.position,i=n,o=i.cx,a=i.cy,l=i.innerRadius,c=i.outerRadius,u=i.startAngle,A=i.endAngle,d=(u+A)/2;if(s==="outside"){var f=pn(o,a,c+r,d),h=f.x,m=f.y;return{x:h,y:m,textAnchor:h>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var g=(l+c)/2,y=pn(o,a,g,d),x=y.x,v=y.y;return{x,y:v,textAnchor:"middle",verticalAnchor:"middle"}},EAt=function(e){var n=e.viewBox,r=e.parentViewBox,s=e.offset,i=e.position,o=n,a=o.x,l=o.y,c=o.width,u=o.height,A=u>=0?1:-1,d=A*s,f=A>0?"end":"start",h=A>0?"start":"end",m=c>=0?1:-1,g=m*s,y=m>0?"end":"start",x=m>0?"start":"end";if(i==="top"){var v={x:a+c/2,y:l-A*s,textAnchor:"middle",verticalAnchor:f};return Rr(Rr({},v),r?{height:Math.max(l-r.y,0),width:c}:{})}if(i==="bottom"){var b={x:a+c/2,y:l+u+d,textAnchor:"middle",verticalAnchor:h};return Rr(Rr({},b),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(i==="left"){var w={x:a-g,y:l+u/2,textAnchor:y,verticalAnchor:"middle"};return Rr(Rr({},w),r?{width:Math.max(w.x-r.x,0),height:u}:{})}if(i==="right"){var C={x:a+c+g,y:l+u/2,textAnchor:x,verticalAnchor:"middle"};return Rr(Rr({},C),r?{width:Math.max(r.x+r.width-C.x,0),height:u}:{})}var B=r?{width:c,height:u}:{};return i==="insideLeft"?Rr({x:a+g,y:l+u/2,textAnchor:x,verticalAnchor:"middle"},B):i==="insideRight"?Rr({x:a+c-g,y:l+u/2,textAnchor:y,verticalAnchor:"middle"},B):i==="insideTop"?Rr({x:a+c/2,y:l+d,textAnchor:"middle",verticalAnchor:h},B):i==="insideBottom"?Rr({x:a+c/2,y:l+u-d,textAnchor:"middle",verticalAnchor:f},B):i==="insideTopLeft"?Rr({x:a+g,y:l+d,textAnchor:x,verticalAnchor:h},B):i==="insideTopRight"?Rr({x:a+c-g,y:l+d,textAnchor:y,verticalAnchor:h},B):i==="insideBottomLeft"?Rr({x:a+g,y:l+u-d,textAnchor:x,verticalAnchor:f},B):i==="insideBottomRight"?Rr({x:a+c-g,y:l+u-d,textAnchor:y,verticalAnchor:f},B):ym(i)&&(je(i.x)||cd(i.x))&&(je(i.y)||cd(i.y))?Rr({x:a+ga(i.x,c),y:l+ga(i.y,u),textAnchor:"end",verticalAnchor:"end"},B):Rr({x:a+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},B)},IAt=function(e){return"cx"in e&&je(e.cx)};function ms(t){var e=t.offset,n=e===void 0?5:e,r=yAt(t,dAt),s=Rr({offset:n},r),i=s.viewBox,o=s.position,a=s.value,l=s.children,c=s.content,u=s.className,A=u===void 0?"":u,d=s.textBreakAll;if(!i||Ht(a)&&Ht(l)&&!Q.isValidElement(c)&&!xt(c))return null;if(Q.isValidElement(c))return Q.cloneElement(c,s);var f;if(xt(c)){if(f=Q.createElement(c,s),Q.isValidElement(f))return f}else f=CAt(s);var h=IAt(i),m=ut(s,!0);if(h&&(o==="insideStart"||o==="insideEnd"||o==="end"))return BAt(s,f,m);var g=h?NAt(s):EAt(s);return ie.createElement(Cp,I0({className:It("recharts-label",A)},m,g,{breakAll:d}),f)}ms.displayName="Label";var cse=function(e){var n=e.cx,r=e.cy,s=e.angle,i=e.startAngle,o=e.endAngle,a=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,A=e.x,d=e.y,f=e.top,h=e.left,m=e.width,g=e.height,y=e.clockWise,x=e.labelViewBox;if(x)return x;if(je(m)&&je(g)){if(je(A)&&je(d))return{x:A,y:d,width:m,height:g};if(je(f)&&je(h))return{x:f,y:h,width:m,height:g}}return je(A)&&je(d)?{x:A,y:d,width:0,height:0}:je(n)&&je(r)?{cx:n,cy:r,startAngle:i||s||0,endAngle:o||s||0,innerRadius:c||0,outerRadius:u||l||a||0,clockWise:y}:e.viewBox?e.viewBox:{}},kAt=function(e,n){return e?e===!0?ie.createElement(ms,{key:"label-implicit",viewBox:n}):zr(e)?ie.createElement(ms,{key:"label-implicit",viewBox:n,value:e}):Q.isValidElement(e)?e.type===ms?Q.cloneElement(e,{key:"label-implicit",viewBox:n}):ie.createElement(ms,{key:"label-implicit",content:e,viewBox:n}):xt(e)?ie.createElement(ms,{key:"label-implicit",content:e,viewBox:n}):ym(e)?ie.createElement(ms,I0({viewBox:n},e,{key:"label-implicit"})):null:null},TAt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,i=cse(e),o=Sa(s,ms).map(function(l,c){return Q.cloneElement(l,{viewBox:n||i,key:"label-".concat(c)})});if(!r)return o;var a=kAt(e.label,n||i);return[a].concat(fAt(o))};ms.parseViewBox=cse;ms.renderCallByParent=TAt;function FAt(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var $At=FAt;const use=Gt($At);function k0(t){"@babel/helpers - typeof";return k0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k0(t)}var _At=["valueAccessor"],OAt=["data","dataKey","clockWise","id","textBreakAll"];function DAt(t){return jAt(t)||UAt(t)||PAt(t)||RAt()}function RAt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PAt(t,e){if(t){if(typeof t=="string")return lF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lF(t,e)}}function UAt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jAt(t){if(Array.isArray(t))return lF(t)}function lF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lC(){return lC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lC.apply(this,arguments)}function SH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function BH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SH(Object(n),!0).forEach(function(r){LAt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LAt(t,e,n){return e=MAt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MAt(t){var e=QAt(t,"string");return k0(e)=="symbol"?e:e+""}function QAt(t,e){if(k0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(k0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NH(t,e){if(t==null)return{};var n=HAt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function HAt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var zAt=function(e){return Array.isArray(e.value)?use(e.value):e.value};function ju(t){var e=t.valueAccessor,n=e===void 0?zAt:e,r=NH(t,_At),s=r.data,i=r.dataKey,o=r.clockWise,a=r.id,l=r.textBreakAll,c=NH(r,OAt);return!s||!s.length?null:ie.createElement(yn,{className:"recharts-label-list"},s.map(function(u,A){var d=Ht(i)?n(u,A):Go(u&&u.payload,i),f=Ht(a)?{}:{id:"".concat(a,"-").concat(A)};return ie.createElement(ms,lC({},ut(u,!0),c,f,{parentViewBox:u.parentViewBox,value:d,textBreakAll:l,viewBox:ms.parseViewBox(Ht(o)?u:BH(BH({},u),{},{clockWise:o})),key:"label-".concat(A),index:A}))}))}ju.displayName="LabelList";function VAt(t,e){return t?t===!0?ie.createElement(ju,{key:"labelList-implicit",data:e}):ie.isValidElement(t)||xt(t)?ie.createElement(ju,{key:"labelList-implicit",data:e,content:t}):ym(t)?ie.createElement(ju,lC({data:e},t,{key:"labelList-implicit"})):null:null}function WAt(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,s=Sa(r,ju).map(function(o,a){return Q.cloneElement(o,{data:e,key:"labelList-".concat(a)})});if(!n)return s;var i=VAt(t.label,e);return[i].concat(DAt(s))}ju.renderCallByParent=WAt;function T0(t){"@babel/helpers - typeof";return T0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T0(t)}function cF(){return cF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cF.apply(this,arguments)}function EH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function IH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EH(Object(n),!0).forEach(function(r){GAt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GAt(t,e,n){return e=KAt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KAt(t){var e=XAt(t,"string");return T0(e)=="symbol"?e:e+""}function XAt(t,e){if(T0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(T0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qAt=function(e,n){var r=ma(n-e),s=Math.min(Math.abs(n-e),359.999);return r*s},kb=function(e){var n=e.cx,r=e.cy,s=e.radius,i=e.angle,o=e.sign,a=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(a?1:-1)+s,A=Math.asin(l/u)/aC,d=c?i:i+o*A,f=pn(n,r,u,d),h=pn(n,r,s,d),m=c?i-o*A:i,g=pn(n,r,u*Math.cos(A*aC),m);return{center:f,circleTangency:h,lineTangency:g,theta:A}},Ase=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.startAngle,a=e.endAngle,l=qAt(o,a),c=o+l,u=pn(n,r,i,o),A=pn(n,r,i,c),d="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>c),`,
    `).concat(A.x,",").concat(A.y,`
  `);if(s>0){var f=pn(n,r,s,o),h=pn(n,r,s,c);d+="L ".concat(h.x,",").concat(h.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else d+="L ".concat(n,",").concat(r," Z");return d},YAt=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,A=ma(u-c),d=kb({cx:n,cy:r,radius:i,angle:c,sign:A,cornerRadius:o,cornerIsExternal:l}),f=d.circleTangency,h=d.lineTangency,m=d.theta,g=kb({cx:n,cy:r,radius:i,angle:u,sign:-A,cornerRadius:o,cornerIsExternal:l}),y=g.circleTangency,x=g.lineTangency,v=g.theta,b=l?Math.abs(c-u):Math.abs(c-u)-m-v;if(b<0)return a?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):Ase({cx:n,cy:r,innerRadius:s,outerRadius:i,startAngle:c,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(A<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(A<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(A<0),",").concat(x.x,",").concat(x.y,`
  `);if(s>0){var C=kb({cx:n,cy:r,radius:s,angle:c,sign:A,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),B=C.circleTangency,S=C.lineTangency,N=C.theta,k=kb({cx:n,cy:r,radius:s,angle:u,sign:-A,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),O=k.circleTangency,U=k.lineTangency,P=k.theta,V=l?Math.abs(c-u):Math.abs(c-u)-N-P;if(V<0&&o===0)return"".concat(w,"L").concat(n,",").concat(r,"Z");w+="L".concat(U.x,",").concat(U.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(A<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(V>180),",").concat(+(A>0),",").concat(B.x,",").concat(B.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(A<0),",").concat(S.x,",").concat(S.y,"Z")}else w+="L".concat(n,",").concat(r,"Z");return w},JAt={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},dse=function(e){var n=IH(IH({},JAt),e),r=n.cx,s=n.cy,i=n.innerRadius,o=n.outerRadius,a=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,u=n.startAngle,A=n.endAngle,d=n.className;if(o<i||u===A)return null;var f=It("recharts-sector",d),h=o-i,m=ga(a,h,0,!0),g;return m>0&&Math.abs(u-A)<360?g=YAt({cx:r,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(m,h/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:A}):g=Ase({cx:r,cy:s,innerRadius:i,outerRadius:o,startAngle:u,endAngle:A}),ie.createElement("path",cF({},ut(n,!0),{className:f,d:g,role:"img"}))};function F0(t){"@babel/helpers - typeof";return F0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F0(t)}function uF(){return uF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uF.apply(this,arguments)}function kH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function TH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kH(Object(n),!0).forEach(function(r){ZAt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZAt(t,e,n){return e=edt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function edt(t){var e=tdt(t,"string");return F0(e)=="symbol"?e:e+""}function tdt(t,e){if(F0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(F0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FH={curveBasisClosed:Yqe,curveBasisOpen:Jqe,curveBasis:qqe,curveBumpX:Rqe,curveBumpY:Pqe,curveLinearClosed:Zqe,curveLinear:T3,curveMonotoneX:eYe,curveMonotoneY:tYe,curveNatural:nYe,curveStep:rYe,curveStepAfter:iYe,curveStepBefore:sYe},Tb=function(e){return e.x===+e.x&&e.y===+e.y},yg=function(e){return e.x},xg=function(e){return e.y},ndt=function(e,n){if(xt(e))return e;var r="curve".concat(I3(e));return(r==="curveMonotone"||r==="curveBump")&&n?FH["".concat(r).concat(n==="vertical"?"Y":"X")]:FH[r]||T3},rdt=function(e){var n=e.type,r=n===void 0?"linear":n,s=e.points,i=s===void 0?[]:s,o=e.baseLine,a=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=ndt(r,a),A=c?i.filter(function(m){return Tb(m)}):i,d;if(Array.isArray(o)){var f=c?o.filter(function(m){return Tb(m)}):o,h=A.map(function(m,g){return TH(TH({},m),{},{base:f[g]})});return a==="vertical"?d=vb().y(xg).x1(yg).x0(function(m){return m.base.x}):d=vb().x(yg).y1(xg).y0(function(m){return m.base.y}),d.defined(Tb).curve(u),d(h)}return a==="vertical"&&je(o)?d=vb().y(xg).x1(yg).x0(o):je(o)?d=vb().x(yg).y1(xg).y0(o):d=ine().x(yg).y(xg),d.defined(Tb).curve(u),d(A)},$H=function(e){var n=e.className,r=e.points,s=e.path,i=e.pathRef;if((!r||!r.length)&&!s)return null;var o=r&&r.length?rdt(e):s;return Q.createElement("path",uF({},ut(e,!1),_2(e),{className:It("recharts-curve",n),d:o,ref:i}))},fse={exports:{}},sdt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",idt=sdt,odt=idt;function hse(){}function pse(){}pse.resetWarningCache=hse;var adt=function(){function t(r,s,i,o,a,l){if(l!==odt){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:pse,resetWarningCache:hse};return n.PropTypes=n,n};fse.exports=adt();var ldt=fse.exports;const Jt=Gt(ldt);var cdt=Object.getOwnPropertyNames,udt=Object.getOwnPropertySymbols,Adt=Object.prototype.hasOwnProperty;function _H(t,e){return function(r,s,i){return t(r,s,i)&&e(r,s,i)}}function Fb(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);var i=s.cache,o=i.get(n),a=i.get(r);if(o&&a)return o===r&&a===n;i.set(n,r),i.set(r,n);var l=t(n,r,s);return i.delete(n),i.delete(r),l}}function ddt(t){return t!=null?t[Symbol.toStringTag]:void 0}function OH(t){return cdt(t).concat(udt(t))}var fdt=Object.hasOwn||function(t,e){return Adt.call(t,e)};function Sf(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var hdt="__v",pdt="__o",mdt="_owner",DH=Object.getOwnPropertyDescriptor,RH=Object.keys;function gdt(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function ydt(t,e){return Sf(t.getTime(),e.getTime())}function xdt(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function vdt(t,e){return t===e}function PH(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),i=t.entries(),o,a,l=0;(o=i.next())&&!o.done;){for(var c=e.entries(),u=!1,A=0;(a=c.next())&&!a.done;){if(s[A]){A++;continue}var d=o.value,f=a.value;if(n.equals(d[0],f[0],l,A,t,e,n)&&n.equals(d[1],f[1],d[0],f[0],t,e,n)){u=s[A]=!0;break}A++}if(!u)return!1;l++}return!0}var bdt=Sf;function wdt(t,e,n){var r=RH(t),s=r.length;if(RH(e).length!==s)return!1;for(;s-- >0;)if(!mse(t,e,n,r[s]))return!1;return!0}function vg(t,e,n){var r=OH(t),s=r.length;if(OH(e).length!==s)return!1;for(var i,o,a;s-- >0;)if(i=r[s],!mse(t,e,n,i)||(o=DH(t,i),a=DH(e,i),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function Cdt(t,e){return Sf(t.valueOf(),e.valueOf())}function Sdt(t,e){return t.source===e.source&&t.flags===e.flags}function UH(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),i=t.values(),o,a;(o=i.next())&&!o.done;){for(var l=e.values(),c=!1,u=0;(a=l.next())&&!a.done;){if(!s[u]&&n.equals(o.value,a.value,o.value,a.value,t,e,n)){c=s[u]=!0;break}u++}if(!c)return!1}return!0}function Bdt(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function Ndt(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function mse(t,e,n,r){return(r===mdt||r===pdt||r===hdt)&&(t.$$typeof||e.$$typeof)?!0:fdt(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var Edt="[object Arguments]",Idt="[object Boolean]",kdt="[object Date]",Tdt="[object Error]",Fdt="[object Map]",$dt="[object Number]",_dt="[object Object]",Odt="[object RegExp]",Ddt="[object Set]",Rdt="[object String]",Pdt="[object URL]",Udt=Array.isArray,jH=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,LH=Object.assign,jdt=Object.prototype.toString.call.bind(Object.prototype.toString);function Ldt(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,s=t.areFunctionsEqual,i=t.areMapsEqual,o=t.areNumbersEqual,a=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,c=t.areRegExpsEqual,u=t.areSetsEqual,A=t.areTypedArraysEqual,d=t.areUrlsEqual,f=t.unknownTagComparators;return function(m,g,y){if(m===g)return!0;if(m==null||g==null)return!1;var x=typeof m;if(x!==typeof g)return!1;if(x!=="object")return x==="number"?o(m,g,y):x==="function"?s(m,g,y):!1;var v=m.constructor;if(v!==g.constructor)return!1;if(v===Object)return a(m,g,y);if(Udt(m))return e(m,g,y);if(jH!=null&&jH(m))return A(m,g,y);if(v===Date)return n(m,g,y);if(v===RegExp)return c(m,g,y);if(v===Map)return i(m,g,y);if(v===Set)return u(m,g,y);var b=jdt(m);if(b===kdt)return n(m,g,y);if(b===Odt)return c(m,g,y);if(b===Fdt)return i(m,g,y);if(b===Ddt)return u(m,g,y);if(b===_dt)return typeof m.then!="function"&&typeof g.then!="function"&&a(m,g,y);if(b===Pdt)return d(m,g,y);if(b===Tdt)return r(m,g,y);if(b===Edt)return a(m,g,y);if(b===Idt||b===$dt||b===Rdt)return l(m,g,y);if(f){var w=f[b];if(!w){var C=ddt(m);C&&(w=f[C])}if(w)return w(m,g,y)}return!1}}function Mdt(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,s={areArraysEqual:r?vg:gdt,areDatesEqual:ydt,areErrorsEqual:xdt,areFunctionsEqual:vdt,areMapsEqual:r?_H(PH,vg):PH,areNumbersEqual:bdt,areObjectsEqual:r?vg:wdt,arePrimitiveWrappersEqual:Cdt,areRegExpsEqual:Sdt,areSetsEqual:r?_H(UH,vg):UH,areTypedArraysEqual:r?vg:Bdt,areUrlsEqual:Ndt,unknownTagComparators:void 0};if(n&&(s=LH({},s,n(s))),e){var i=Fb(s.areArraysEqual),o=Fb(s.areMapsEqual),a=Fb(s.areObjectsEqual),l=Fb(s.areSetsEqual);s=LH({},s,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:l})}return s}function Qdt(t){return function(e,n,r,s,i,o,a){return t(e,n,a)}}function Hdt(t){var e=t.circular,n=t.comparator,r=t.createState,s=t.equals,i=t.strict;if(r)return function(l,c){var u=r(),A=u.cache,d=A===void 0?e?new WeakMap:void 0:A,f=u.meta;return n(l,c,{cache:d,equals:s,meta:f,strict:i})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var o={cache:void 0,equals:s,meta:void 0,strict:i};return function(l,c){return n(l,c,o)}}var zdt=CA();CA({strict:!0});CA({circular:!0});CA({circular:!0,strict:!0});CA({createInternalComparator:function(){return Sf}});CA({strict:!0,createInternalComparator:function(){return Sf}});CA({circular:!0,createInternalComparator:function(){return Sf}});CA({circular:!0,createInternalComparator:function(){return Sf},strict:!0});function CA(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,s=t.createState,i=t.strict,o=i===void 0?!1:i,a=Mdt(t),l=Ldt(a),c=r?r(l):Qdt(l);return Hdt({circular:n,comparator:l,createState:s,equals:c,strict:o})}function Vdt(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function MH(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function s(i){n<0&&(n=i),i-n>e?(t(i),n=-1):Vdt(s)};requestAnimationFrame(r)}function AF(t){"@babel/helpers - typeof";return AF=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AF(t)}function Wdt(t){return qdt(t)||Xdt(t)||Kdt(t)||Gdt()}function Gdt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kdt(t,e){if(t){if(typeof t=="string")return QH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QH(t,e)}}function QH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xdt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qdt(t){if(Array.isArray(t))return t}function Ydt(){var t={},e=function(){return null},n=!1,r=function s(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,a=Wdt(o),l=a[0],c=a.slice(1);if(typeof l=="number"){MH(s.bind(null,c),l);return}s(l),MH(s.bind(null,c));return}AF(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,r(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function $0(t){"@babel/helpers - typeof";return $0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$0(t)}function HH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function zH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HH(Object(n),!0).forEach(function(r){gse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gse(t,e,n){return e=Jdt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jdt(t){var e=Zdt(t,"string");return $0(e)==="symbol"?e:String(e)}function Zdt(t,e){if($0(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eft=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,s){return r.filter(function(i){return s.includes(i)})})},tft=function(e){return e},nft=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},hy=function(e,n){return Object.keys(n).reduce(function(r,s){return zH(zH({},r),{},gse({},s,e(s,n[s])))},{})},VH=function(e,n,r){return e.map(function(s){return"".concat(nft(s)," ").concat(n,"ms ").concat(r)}).join(",")};function rft(t,e){return oft(t)||ift(t,e)||yse(t,e)||sft()}function sft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ift(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function oft(t){if(Array.isArray(t))return t}function aft(t){return uft(t)||cft(t)||yse(t)||lft()}function lft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yse(t,e){if(t){if(typeof t=="string")return dF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dF(t,e)}}function cft(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uft(t){if(Array.isArray(t))return dF(t)}function dF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var cC=1e-4,xse=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},vse=function(e,n){return e.map(function(r,s){return r*Math.pow(n,s)}).reduce(function(r,s){return r+s})},WH=function(e,n){return function(r){var s=xse(e,n);return vse(s,r)}},Aft=function(e,n){return function(r){var s=xse(e,n),i=[].concat(aft(s.map(function(o,a){return o*a}).slice(1)),[0]);return vse(i,r)}},GH=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0],i=n[1],o=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,i=0,o=1,a=1;break;case"ease":s=.25,i=.1,o=.25,a=1;break;case"ease-in":s=.42,i=0,o=1,a=1;break;case"ease-out":s=.42,i=0,o=.58,a=1;break;case"ease-in-out":s=0,i=0,o=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=rft(c,4);s=u[0],i=u[1],o=u[2],a=u[3]}}}var A=WH(s,o),d=WH(i,a),f=Aft(s,o),h=function(y){return y>1?1:y<0?0:y},m=function(y){for(var x=y>1?1:y,v=x,b=0;b<8;++b){var w=A(v)-x,C=f(v);if(Math.abs(w-x)<cC||C<cC)return d(v);v=h(v-w/C)}return d(v)};return m.isStepper=!1,m},dft=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,s=e.damping,i=s===void 0?8:s,o=e.dt,a=o===void 0?17:o,l=function(u,A,d){var f=-(u-A)*r,h=d*i,m=d+(f-h)*a/1e3,g=d*a/1e3+u;return Math.abs(g-A)<cC&&Math.abs(m)<cC?[A,0]:[g,m]};return l.isStepper=!0,l.dt=a,l},fft=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return GH(s);case"spring":return dft();default:if(s.split("(")[0]==="cubic-bezier")return GH(s)}return typeof s=="function"?s:null};function _0(t){"@babel/helpers - typeof";return _0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_0(t)}function KH(t){return mft(t)||pft(t)||bse(t)||hft()}function hft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pft(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mft(t){if(Array.isArray(t))return hF(t)}function XH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XH(Object(n),!0).forEach(function(r){fF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fF(t,e,n){return e=gft(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gft(t){var e=yft(t,"string");return _0(e)==="symbol"?e:String(e)}function yft(t,e){if(_0(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xft(t,e){return wft(t)||bft(t,e)||bse(t,e)||vft()}function vft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bse(t,e){if(t){if(typeof t=="string")return hF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hF(t,e)}}function hF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bft(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function wft(t){if(Array.isArray(t))return t}var uC=function(e,n,r){return e+(n-e)*r},pF=function(e){var n=e.from,r=e.to;return n!==r},Cft=function t(e,n,r){var s=hy(function(i,o){if(pF(o)){var a=e(o.from,o.to,o.velocity),l=xft(a,2),c=l[0],u=l[1];return fs(fs({},o),{},{from:c,velocity:u})}return o},n);return r<1?hy(function(i,o){return pF(o)?fs(fs({},o),{},{velocity:uC(o.velocity,s[i].velocity,r),from:uC(o.from,s[i].from,r)}):o},n):t(e,s,r-1)};const Sft=function(t,e,n,r,s){var i=eft(t,e),o=i.reduce(function(g,y){return fs(fs({},g),{},fF({},y,[t[y],e[y]]))},{}),a=i.reduce(function(g,y){return fs(fs({},g),{},fF({},y,{from:t[y],velocity:0,to:e[y]}))},{}),l=-1,c,u,A=function(){return null},d=function(){return hy(function(y,x){return x.from},a)},f=function(){return!Object.values(a).filter(pF).length},h=function(y){c||(c=y);var x=y-c,v=x/n.dt;a=Cft(n,a,v),s(fs(fs(fs({},t),e),d())),c=y,f()||(l=requestAnimationFrame(A))},m=function(y){u||(u=y);var x=(y-u)/r,v=hy(function(w,C){return uC.apply(void 0,KH(C).concat([n(x)]))},o);if(s(fs(fs(fs({},t),e),v)),x<1)l=requestAnimationFrame(A);else{var b=hy(function(w,C){return uC.apply(void 0,KH(C).concat([n(1)]))},o);s(fs(fs(fs({},t),e),b))}};return A=n.isStepper?h:m,function(){return requestAnimationFrame(A),function(){cancelAnimationFrame(l)}}};function Ip(t){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ip(t)}var Bft=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Nft(t,e){if(t==null)return{};var n=Eft(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Eft(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function BE(t){return Fft(t)||Tft(t)||kft(t)||Ift()}function Ift(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kft(t,e){if(t){if(typeof t=="string")return mF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mF(t,e)}}function Tft(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fft(t){if(Array.isArray(t))return mF(t)}function mF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function na(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qH(Object(n),!0).forEach(function(r){zg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zg(t,e,n){return e=wse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wse(r.key),r)}}function Oft(t,e,n){return e&&_ft(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wse(t){var e=Dft(t,"string");return Ip(e)==="symbol"?e:String(e)}function Dft(t,e){if(Ip(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ip(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rft(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gF(t,e)}function gF(t,e){return gF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},gF(t,e)}function Pft(t){var e=Uft();return function(){var r=AC(t),s;if(e){var i=AC(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return yF(this,s)}}function yF(t,e){if(e&&(Ip(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xF(t)}function xF(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uft(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function AC(t){return AC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},AC(t)}var Bc=function(t){Rft(n,t);var e=Pft(n);function n(r,s){var i;$ft(this,n),i=e.call(this,r,s);var o=i.props,a=o.isActive,l=o.attributeName,c=o.from,u=o.to,A=o.steps,d=o.children,f=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(xF(i)),i.changeStyle=i.changeStyle.bind(xF(i)),!a||f<=0)return i.state={style:{}},typeof d=="function"&&(i.state={style:u}),yF(i);if(A&&A.length)i.state={style:A[0].style};else if(c){if(typeof d=="function")return i.state={style:c},yF(i);i.state={style:l?zg({},l,c):c}}else i.state={style:{}};return i}return Oft(n,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,a=i.canBegin,l=i.attributeName,c=i.shouldReAnimate,u=i.to,A=i.from,d=this.state.style;if(a){if(!o){var f={style:l?zg({},l,u):u};this.state&&d&&(l&&d[l]!==u||!l&&d!==u)&&this.setState(f);return}if(!(zdt(s.to,u)&&s.canBegin&&s.isActive)){var h=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=h||c?A:s.to;if(this.state&&d){var g={style:l?zg({},l,m):m};(l&&d[l]!==m||!l&&d!==m)&&this.setState(g)}this.runAnimation(na(na({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,a=s.to,l=s.duration,c=s.easing,u=s.begin,A=s.onAnimationEnd,d=s.onAnimationStart,f=Sft(o,a,fft(c),l,this.changeStyle),h=function(){i.stopJSAnimation=f()};this.manager.start([d,u,h,l,A])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,a=s.begin,l=s.onAnimationStart,c=o[0],u=c.style,A=c.duration,d=A===void 0?0:A,f=function(m,g,y){if(y===0)return m;var x=g.duration,v=g.easing,b=v===void 0?"ease":v,w=g.style,C=g.properties,B=g.onAnimationEnd,S=y>0?o[y-1]:g,N=C||Object.keys(w);if(typeof b=="function"||b==="spring")return[].concat(BE(m),[i.runJSAnimation.bind(i,{from:S.style,to:w,duration:x,easing:b}),x]);var k=VH(N,x,b),O=na(na(na({},S.style),w),{},{transition:k});return[].concat(BE(m),[O,x,B]).filter(tft)};return this.manager.start([l].concat(BE(o.reduce(f,[u,Math.max(d,a)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=Ydt());var i=s.begin,o=s.duration,a=s.attributeName,l=s.to,c=s.easing,u=s.onAnimationStart,A=s.onAnimationEnd,d=s.steps,f=s.children,h=this.manager;if(this.unSubscribe=h.subscribe(this.handleStyleChange),typeof c=="function"||typeof f=="function"||c==="spring"){this.runJSAnimation(s);return}if(d.length>1){this.runStepAnimation(s);return}var m=a?zg({},a,l):l,g=VH(Object.keys(m),o,c);h.start([u,i,na(na({},m),{},{transition:g}),o,A])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var a=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var l=Nft(s,Bft),c=Q.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!a||c===0||o<=0)return i;var A=function(f){var h=f.props,m=h.style,g=m===void 0?{}:m,y=h.className,x=Q.cloneElement(f,na(na({},l),{},{style:na(na({},g),u),className:y}));return x};return c===1?A(Q.Children.only(i)):ie.createElement("div",null,Q.Children.map(i,function(d){return A(d)}))}}]),n}(Q.PureComponent);Bc.displayName="Animate";Bc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Bc.propTypes={from:Jt.oneOfType([Jt.object,Jt.string]),to:Jt.oneOfType([Jt.object,Jt.string]),attributeName:Jt.string,duration:Jt.number,begin:Jt.number,easing:Jt.oneOfType([Jt.string,Jt.func]),steps:Jt.arrayOf(Jt.shape({duration:Jt.number.isRequired,style:Jt.object.isRequired,easing:Jt.oneOfType([Jt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Jt.func]),properties:Jt.arrayOf("string"),onAnimationEnd:Jt.func})),children:Jt.oneOfType([Jt.node,Jt.func]),isActive:Jt.bool,canBegin:Jt.bool,onAnimationEnd:Jt.func,shouldReAnimate:Jt.bool,onAnimationStart:Jt.func,onAnimationReStart:Jt.func};function O0(t){"@babel/helpers - typeof";return O0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O0(t)}function dC(){return dC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dC.apply(this,arguments)}function jft(t,e){return Hft(t)||Qft(t,e)||Mft(t,e)||Lft()}function Lft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mft(t,e){if(t){if(typeof t=="string")return YH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YH(t,e)}}function YH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qft(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function Hft(t){if(Array.isArray(t))return t}function JH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ZH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JH(Object(n),!0).forEach(function(r){zft(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zft(t,e,n){return e=Vft(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vft(t){var e=Wft(t,"string");return O0(e)=="symbol"?e:e+""}function Wft(t,e){if(O0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(O0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var e7=function(e,n,r,s,i){var o=Math.min(Math.abs(r)/2,Math.abs(s)/2),a=s>=0?1:-1,l=r>=0?1:-1,c=s>=0&&r>=0||s<0&&r<0?1:0,u;if(o>0&&i instanceof Array){for(var A=[0,0,0,0],d=0,f=4;d<f;d++)A[d]=i[d]>o?o:i[d];u="M".concat(e,",").concat(n+a*A[0]),A[0]>0&&(u+="A ".concat(A[0],",").concat(A[0],",0,0,").concat(c,",").concat(e+l*A[0],",").concat(n)),u+="L ".concat(e+r-l*A[1],",").concat(n),A[1]>0&&(u+="A ".concat(A[1],",").concat(A[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+a*A[1])),u+="L ".concat(e+r,",").concat(n+s-a*A[2]),A[2]>0&&(u+="A ".concat(A[2],",").concat(A[2],",0,0,").concat(c,`,
        `).concat(e+r-l*A[2],",").concat(n+s)),u+="L ".concat(e+l*A[3],",").concat(n+s),A[3]>0&&(u+="A ".concat(A[3],",").concat(A[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+s-a*A[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var h=Math.min(o,i);u="M ".concat(e,",").concat(n+a*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(n,`
            L `).concat(e+r-l*h,",").concat(n,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r,",").concat(n+a*h,`
            L `).concat(e+r,",").concat(n+s-a*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r-l*h,",").concat(n+s,`
            L `).concat(e+l*h,",").concat(n+s,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(n+s-a*h," Z")}else u="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return u},Gft=function(e,n){if(!e||!n)return!1;var r=e.x,s=e.y,i=n.x,o=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var c=Math.min(i,i+a),u=Math.max(i,i+a),A=Math.min(o,o+l),d=Math.max(o,o+l);return r>=c&&r<=u&&s>=A&&s<=d}return!1},Kft={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DP=function(e){var n=ZH(ZH({},Kft),e),r=Q.useRef(),s=Q.useState(-1),i=jft(s,2),o=i[0],a=i[1];Q.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var l=n.x,c=n.y,u=n.width,A=n.height,d=n.radius,f=n.className,h=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isAnimationActive,x=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||A!==+A||u===0||A===0)return null;var v=It("recharts-rectangle",f);return x?ie.createElement(Bc,{canBegin:o>0,from:{width:u,height:A,x:l,y:c},to:{width:u,height:A,x:l,y:c},duration:m,animationEasing:h,isActive:x},function(b){var w=b.width,C=b.height,B=b.x,S=b.y;return ie.createElement(Bc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,isActive:y,easing:h},ie.createElement("path",dC({},ut(n,!0),{className:v,d:e7(B,S,w,C,d),ref:r})))}):ie.createElement("path",dC({},ut(n,!0),{className:v,d:e7(l,c,u,A,d)}))},Xft=["points","className","baseLinePoints","connectNulls"];function ph(){return ph=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ph.apply(this,arguments)}function qft(t,e){if(t==null)return{};var n=Yft(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Yft(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function t7(t){return tht(t)||eht(t)||Zft(t)||Jft()}function Jft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zft(t,e){if(t){if(typeof t=="string")return vF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vF(t,e)}}function eht(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tht(t){if(Array.isArray(t))return vF(t)}function vF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var n7=function(e){return e&&e.x===+e.x&&e.y===+e.y},nht=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){n7(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),n7(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},py=function(e,n){var r=nht(e);n&&(r=[r.reduce(function(i,o){return[].concat(t7(i),t7(o))},[])]);var s=r.map(function(i){return i.reduce(function(o,a,l){return"".concat(o).concat(l===0?"M":"L").concat(a.x,",").concat(a.y)},"")}).join("");return r.length===1?"".concat(s,"Z"):s},rht=function(e,n,r){var s=py(e,r);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(py(n.reverse(),r).slice(1))},Cse=function(e){var n=e.points,r=e.className,s=e.baseLinePoints,i=e.connectNulls,o=qft(e,Xft);if(!n||!n.length)return null;var a=It("recharts-polygon",r);if(s&&s.length){var l=o.stroke&&o.stroke!=="none",c=rht(n,s,i);return ie.createElement("g",{className:a},ie.createElement("path",ph({},ut(o,!0),{fill:c.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:c})),l?ie.createElement("path",ph({},ut(o,!0),{fill:"none",d:py(n,i)})):null,l?ie.createElement("path",ph({},ut(o,!0),{fill:"none",d:py(s,i)})):null)}var u=py(n,i);return ie.createElement("path",ph({},ut(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",className:a,d:u}))};function bF(){return bF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bF.apply(this,arguments)}var K3=function(e){var n=e.cx,r=e.cy,s=e.r,i=e.className,o=It("recharts-dot",i);return n===+n&&r===+r&&s===+s?Q.createElement("circle",bF({},ut(e,!1),_2(e),{className:o,cx:n,cy:r,r:s})):null};function D0(t){"@babel/helpers - typeof";return D0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D0(t)}var sht=["x","y","top","left","width","height","className"];function wF(){return wF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wF.apply(this,arguments)}function r7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function iht(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r7(Object(n),!0).forEach(function(r){oht(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oht(t,e,n){return e=aht(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aht(t){var e=lht(t,"string");return D0(e)=="symbol"?e:e+""}function lht(t,e){if(D0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(D0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cht(t,e){if(t==null)return{};var n=uht(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uht(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Aht=function(e,n,r,s,i,o){return"M".concat(e,",").concat(i,"v").concat(s,"M").concat(o,",").concat(n,"h").concat(r)},dht=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,i=s===void 0?0:s,o=e.top,a=o===void 0?0:o,l=e.left,c=l===void 0?0:l,u=e.width,A=u===void 0?0:u,d=e.height,f=d===void 0?0:d,h=e.className,m=cht(e,sht),g=iht({x:r,y:i,top:a,left:c,width:A,height:f},m);return!je(r)||!je(i)||!je(A)||!je(f)||!je(a)||!je(c)?null:ie.createElement("path",wF({},ut(g,!0),{className:It("recharts-cross",h),d:Aht(r,i,A,f,a,c)}))},fht=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function R0(t){"@babel/helpers - typeof";return R0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R0(t)}function hht(t,e){if(t==null)return{};var n=pht(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pht(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Nc(){return Nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nc.apply(this,arguments)}function s7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function P0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s7(Object(n),!0).forEach(function(r){mht(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mht(t,e,n){return e=ght(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ght(t){var e=yht(t,"string");return R0(e)=="symbol"?e:e+""}function yht(t,e){if(R0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(R0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xht=function(e,n,r,s){var i="";return s.forEach(function(o,a){var l=pn(n,r,e,o);a?i+="L ".concat(l.x,",").concat(l.y):i+="M ".concat(l.x,",").concat(l.y)}),i+="Z",i},vht=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.polarAngles,a=e.radialLines;if(!o||!o.length||!a)return null;var l=P0({stroke:"#ccc"},ut(e,!1));return ie.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(c){var u=pn(n,r,s,c),A=pn(n,r,i,c);return ie.createElement("line",Nc({},l,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:A.x,y2:A.y}))}))},bht=function(e){var n=e.cx,r=e.cy,s=e.radius,i=e.index,o=P0(P0({stroke:"#ccc"},ut(e,!1)),{},{fill:"none"});return ie.createElement("circle",Nc({},o,{className:It("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(i),cx:n,cy:r,r:s}))},wht=function(e){var n=e.radius,r=e.index,s=P0(P0({stroke:"#ccc"},ut(e,!1)),{},{fill:"none"});return ie.createElement("path",Nc({},s,{className:It("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:xht(n,e.cx,e.cy,e.polarAngles)}))},Cht=function(e){var n=e.polarRadius,r=e.gridType;return!n||!n.length?null:ie.createElement("g",{className:"recharts-polar-grid-concentric"},n.map(function(s,i){var o=i;return r==="circle"?ie.createElement(bht,Nc({key:o},e,{radius:s,index:i})):ie.createElement(wht,Nc({key:o},e,{radius:s,index:i}))}))},Sse=function(e){var n=e.cx,r=n===void 0?0:n,s=e.cy,i=s===void 0?0:s,o=e.innerRadius,a=o===void 0?0:o,l=e.outerRadius,c=l===void 0?0:l,u=e.gridType,A=u===void 0?"polygon":u,d=e.radialLines,f=d===void 0?!0:d,h=hht(e,fht);return c<=0?null:ie.createElement("g",{className:"recharts-polar-grid"},ie.createElement(vht,Nc({cx:r,cy:i,innerRadius:a,outerRadius:c,gridType:A,radialLines:f},h)),ie.createElement(Cht,Nc({cx:r,cy:i,innerRadius:a,outerRadius:c,gridType:A,radialLines:f},h)))};Sse.displayName="PolarGrid";var Sht=M3,Bht=Ore,Nht=Nl;function Eht(t,e){return t&&t.length?Sht(t,Nht(e),Bht):void 0}var Iht=Eht;const kht=Gt(Iht);var Tht=M3,Fht=Nl,$ht=Dre;function _ht(t,e){return t&&t.length?Tht(t,Fht(e),$ht):void 0}var Oht=_ht;const Dht=Gt(Oht);var Rht=["cx","cy","angle","ticks","axisLine"],Pht=["ticks","tick","angle","tickFormatter","stroke"];function kp(t){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kp(t)}function my(){return my=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},my.apply(this,arguments)}function i7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function jA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i7(Object(n),!0).forEach(function(r){X3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o7(t,e){if(t==null)return{};var n=Uht(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Uht(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function jht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nse(r.key),r)}}function Lht(t,e,n){return e&&a7(t.prototype,e),n&&a7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mht(t,e,n){return e=fC(e),Qht(t,Bse()?Reflect.construct(e,n||[],fC(t).constructor):e.apply(t,n))}function Qht(t,e){if(e&&(kp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hht(t)}function Hht(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bse=function(){return!!t})()}function fC(t){return fC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fC(t)}function zht(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CF(t,e)}function CF(t,e){return CF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},CF(t,e)}function X3(t,e,n){return e=Nse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nse(t){var e=Vht(t,"string");return kp(e)=="symbol"?e:e+""}function Vht(t,e){if(kp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Pv=function(t){function e(){return jht(this,e),Mht(this,e,arguments)}return zht(e,t),Lht(e,[{key:"getTickValueCoord",value:function(r){var s=r.coordinate,i=this.props,o=i.angle,a=i.cx,l=i.cy;return pn(a,l,s,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,s;switch(r){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.angle,a=r.ticks,l=kht(a,function(u){return u.coordinate||0}),c=Dht(a,function(u){return u.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:c.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.angle,a=r.ticks,l=r.axisLine,c=o7(r,Rht),u=a.reduce(function(h,m){return[Math.min(h[0],m.coordinate),Math.max(h[1],m.coordinate)]},[1/0,-1/0]),A=pn(s,i,u[0],o),d=pn(s,i,u[1],o),f=jA(jA(jA({},ut(c,!1)),{},{fill:"none"},ut(l,!1)),{},{x1:A.x,y1:A.y,x2:d.x,y2:d.y});return ie.createElement("line",my({className:"recharts-polar-radius-axis-line"},f))}},{key:"renderTicks",value:function(){var r=this,s=this.props,i=s.ticks,o=s.tick,a=s.angle,l=s.tickFormatter,c=s.stroke,u=o7(s,Pht),A=this.getTickTextAnchor(),d=ut(u,!1),f=ut(o,!1),h=i.map(function(m,g){var y=r.getTickValueCoord(m),x=jA(jA(jA(jA({textAnchor:A,transform:"rotate(".concat(90-a,", ").concat(y.x,", ").concat(y.y,")")},d),{},{stroke:"none",fill:c},f),{},{index:g},y),{},{payload:m});return ie.createElement(yn,my({className:It("recharts-polar-radius-axis-tick",lse(o)),key:"tick-".concat(m.coordinate)},gp(r.props,m,g)),e.renderTickItem(o,x,l?l(m.value,g):m.value))});return ie.createElement(yn,{className:"recharts-polar-radius-axis-ticks"},h)}},{key:"render",value:function(){var r=this.props,s=r.ticks,i=r.axisLine,o=r.tick;return!s||!s.length?null:ie.createElement(yn,{className:It("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),ms.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,s,i){var o;return ie.isValidElement(r)?o=ie.cloneElement(r,s):xt(r)?o=r(s):o=ie.createElement(Cp,my({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(Q.PureComponent);X3(Pv,"displayName","PolarRadiusAxis");X3(Pv,"axisType","radiusAxis");X3(Pv,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Tp(t){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tp(t)}function ed(){return ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ed.apply(this,arguments)}function l7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function LA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l7(Object(n),!0).forEach(function(r){q3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ise(r.key),r)}}function Ght(t,e,n){return e&&c7(t.prototype,e),n&&c7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kht(t,e,n){return e=hC(e),Xht(t,Ese()?Reflect.construct(e,n||[],hC(t).constructor):e.apply(t,n))}function Xht(t,e){if(e&&(Tp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qht(t)}function qht(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ese(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ese=function(){return!!t})()}function hC(t){return hC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hC(t)}function Yht(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SF(t,e)}function SF(t,e){return SF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},SF(t,e)}function q3(t,e,n){return e=Ise(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ise(t){var e=Jht(t,"string");return Tp(e)=="symbol"?e:e+""}function Jht(t,e){if(Tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Zht=Math.PI/180,u7=1e-5,Uv=function(t){function e(){return Wht(this,e),Kht(this,e,arguments)}return Yht(e,t),Ght(e,[{key:"getTickLineCoord",value:function(r){var s=this.props,i=s.cx,o=s.cy,a=s.radius,l=s.orientation,c=s.tickSize,u=c||8,A=pn(i,o,a,r.coordinate),d=pn(i,o,a+(l==="inner"?-1:1)*u,r.coordinate);return{x1:A.x,y1:A.y,x2:d.x,y2:d.y}}},{key:"getTickTextAnchor",value:function(r){var s=this.props.orientation,i=Math.cos(-r.coordinate*Zht),o;return i>u7?o=s==="outer"?"start":"end":i<-u7?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.radius,a=r.axisLine,l=r.axisLineType,c=LA(LA({},ut(this.props,!1)),{},{fill:"none"},ut(a,!1));if(l==="circle")return ie.createElement(K3,ed({className:"recharts-polar-angle-axis-line"},c,{cx:s,cy:i,r:o}));var u=this.props.ticks,A=u.map(function(d){return pn(s,i,o,d.coordinate)});return ie.createElement(Cse,ed({className:"recharts-polar-angle-axis-line"},c,{points:A}))}},{key:"renderTicks",value:function(){var r=this,s=this.props,i=s.ticks,o=s.tick,a=s.tickLine,l=s.tickFormatter,c=s.stroke,u=ut(this.props,!1),A=ut(o,!1),d=LA(LA({},u),{},{fill:"none"},ut(a,!1)),f=i.map(function(h,m){var g=r.getTickLineCoord(h),y=r.getTickTextAnchor(h),x=LA(LA(LA({textAnchor:y},u),{},{stroke:"none",fill:c},A),{},{index:m,payload:h,x:g.x2,y:g.y2});return ie.createElement(yn,ed({className:It("recharts-polar-angle-axis-tick",lse(o)),key:"tick-".concat(h.coordinate)},gp(r.props,h,m)),a&&ie.createElement("line",ed({className:"recharts-polar-angle-axis-tick-line"},d,g)),o&&e.renderTickItem(o,x,l?l(h.value,m):h.value))});return ie.createElement(yn,{className:"recharts-polar-angle-axis-ticks"},f)}},{key:"render",value:function(){var r=this.props,s=r.ticks,i=r.radius,o=r.axisLine;return i<=0||!s||!s.length?null:ie.createElement(yn,{className:It("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,s,i){var o;return ie.isValidElement(r)?o=ie.cloneElement(r,s):xt(r)?o=r(s):o=ie.createElement(Cp,ed({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(Q.PureComponent);q3(Uv,"displayName","PolarAngleAxis");q3(Uv,"axisType","angleAxis");q3(Uv,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var ept=kne,tpt=ept(Object.getPrototypeOf,Object),npt=tpt,rpt=Oc,spt=npt,ipt=Dc,opt="[object Object]",apt=Function.prototype,lpt=Object.prototype,kse=apt.toString,cpt=lpt.hasOwnProperty,upt=kse.call(Object);function Apt(t){if(!ipt(t)||rpt(t)!=opt)return!1;var e=spt(t);if(e===null)return!0;var n=cpt.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&kse.call(n)==upt}var dpt=Apt;const fpt=Gt(dpt);var hpt=Oc,ppt=Dc,mpt="[object Boolean]";function gpt(t){return t===!0||t===!1||ppt(t)&&hpt(t)==mpt}var ypt=gpt;const xpt=Gt(ypt);function U0(t){"@babel/helpers - typeof";return U0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U0(t)}function pC(){return pC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pC.apply(this,arguments)}function vpt(t,e){return Spt(t)||Cpt(t,e)||wpt(t,e)||bpt()}function bpt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wpt(t,e){if(t){if(typeof t=="string")return A7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A7(t,e)}}function A7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Cpt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function Spt(t){if(Array.isArray(t))return t}function d7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function f7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d7(Object(n),!0).forEach(function(r){Bpt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bpt(t,e,n){return e=Npt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Npt(t){var e=Ept(t,"string");return U0(e)=="symbol"?e:e+""}function Ept(t,e){if(U0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(U0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h7=function(e,n,r,s,i){var o=r-s,a;return a="M ".concat(e,",").concat(n),a+="L ".concat(e+r,",").concat(n),a+="L ".concat(e+r-o/2,",").concat(n+i),a+="L ".concat(e+r-o/2-s,",").concat(n+i),a+="L ".concat(e,",").concat(n," Z"),a},Ipt={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kpt=function(e){var n=f7(f7({},Ipt),e),r=Q.useRef(),s=Q.useState(-1),i=vpt(s,2),o=i[0],a=i[1];Q.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&a(v)}catch{}},[]);var l=n.x,c=n.y,u=n.upperWidth,A=n.lowerWidth,d=n.height,f=n.className,h=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||A!==+A||d!==+d||u===0&&A===0||d===0)return null;var x=It("recharts-trapezoid",f);return y?ie.createElement(Bc,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:d,x:l,y:c},to:{upperWidth:u,lowerWidth:A,height:d,x:l,y:c},duration:m,animationEasing:h,isActive:y},function(v){var b=v.upperWidth,w=v.lowerWidth,C=v.height,B=v.x,S=v.y;return ie.createElement(Bc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,easing:h},ie.createElement("path",pC({},ut(n,!0),{className:x,d:h7(B,S,b,w,C),ref:r})))}):ie.createElement("g",null,ie.createElement("path",pC({},ut(n,!0),{className:x,d:h7(l,c,u,A,d)})))},Tpt=["option","shapeType","propTransformer","activeClassName","isActive"];function j0(t){"@babel/helpers - typeof";return j0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j0(t)}function Fpt(t,e){if(t==null)return{};var n=$pt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $pt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function p7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function mC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p7(Object(n),!0).forEach(function(r){_pt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _pt(t,e,n){return e=Opt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Opt(t){var e=Dpt(t,"string");return j0(e)=="symbol"?e:e+""}function Dpt(t,e){if(j0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(j0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rpt(t,e){return mC(mC({},e),t)}function Ppt(t,e){return t==="symbols"}function m7(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return ie.createElement(DP,n);case"trapezoid":return ie.createElement(kpt,n);case"sector":return ie.createElement(dse,n);case"symbols":if(Ppt(e))return ie.createElement(eP,n);break;default:return null}}function Upt(t){return Q.isValidElement(t)?t.props:t}function jpt(t){var e=t.option,n=t.shapeType,r=t.propTransformer,s=r===void 0?Rpt:r,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,a=t.isActive,l=Fpt(t,Tpt),c;if(Q.isValidElement(e))c=Q.cloneElement(e,mC(mC({},l),Upt(e)));else if(xt(e))c=e(l);else if(fpt(e)&&!xpt(e)){var u=s(e,l);c=ie.createElement(m7,{shapeType:n,elementProps:u})}else{var A=l;c=ie.createElement(m7,{shapeType:n,elementProps:A})}return a?ie.createElement(yn,{className:o},c):c}function Y3(t,e){return e!=null&&"trapezoids"in t.props}function J3(t,e){return e!=null&&"sectors"in t.props}function L0(t,e){return e!=null&&"points"in t.props}function Lpt(t,e){var n,r,s=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,i=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return s&&i}function Mpt(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function Qpt(t,e){var n=t.x===e.x,r=t.y===e.y,s=t.z===e.z;return n&&r&&s}function Hpt(t,e){var n;return Y3(t,e)?n=Lpt:J3(t,e)?n=Mpt:L0(t,e)&&(n=Qpt),n}function zpt(t,e){var n;return Y3(t,e)?n="trapezoids":J3(t,e)?n="sectors":L0(t,e)&&(n="points"),n}function Vpt(t,e){if(Y3(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(J3(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return L0(t,e)?e.payload:{}}function Wpt(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,s=zpt(n,e),i=Vpt(n,e),o=r.filter(function(l,c){var u=z3(i,l),A=n.props[s].filter(function(h){var m=Hpt(n,e);return m(h,e)}),d=n.props[s].indexOf(A[A.length-1]),f=c===d;return u&&f}),a=r.indexOf(o[o.length-1]);return a}function Gpt(t){return t&&t.length?t[0]:void 0}var Kpt=Gpt,Xpt=Kpt;const qpt=Gt(Xpt);var Ypt=["key"];function Fp(t){"@babel/helpers - typeof";return Fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fp(t)}function Jpt(t,e){if(t==null)return{};var n=Zpt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Zpt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function gC(){return gC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gC.apply(this,arguments)}function g7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function qs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g7(Object(n),!0).forEach(function(r){Kl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function emt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fse(r.key),r)}}function tmt(t,e,n){return e&&y7(t.prototype,e),n&&y7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nmt(t,e,n){return e=yC(e),rmt(t,Tse()?Reflect.construct(e,n||[],yC(t).constructor):e.apply(t,n))}function rmt(t,e){if(e&&(Fp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return smt(t)}function smt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tse=function(){return!!t})()}function yC(t){return yC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yC(t)}function imt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BF(t,e)}function BF(t,e){return BF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},BF(t,e)}function Kl(t,e,n){return e=Fse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fse(t){var e=omt(t,"string");return Fp(e)=="symbol"?e:e+""}function omt(t,e){if(Fp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var jv=function(t){function e(){var n;emt(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=nmt(this,e,[].concat(s)),Kl(n,"state",{isAnimationFinished:!1}),Kl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),xt(o)&&o()}),Kl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),xt(o)&&o()}),Kl(n,"handleMouseEnter",function(o){var a=n.props.onMouseEnter;a&&a(n.props,o)}),Kl(n,"handleMouseLeave",function(o){var a=n.props.onMouseLeave;a&&a(n.props,o)}),n}return imt(e,t),tmt(e,[{key:"renderDots",value:function(r){var s=this.props,i=s.dot,o=s.dataKey,a=ut(this.props,!1),l=ut(i,!0),c=r.map(function(u,A){var d=qs(qs(qs({key:"dot-".concat(A),r:3},a),l),{},{dataKey:o,cx:u.x,cy:u.y,index:A,payload:u});return e.renderDotItem(i,d)});return ie.createElement(yn,{className:"recharts-radar-dots"},c)}},{key:"renderPolygonStatically",value:function(r){var s=this.props,i=s.shape,o=s.dot,a=s.isRange,l=s.baseLinePoints,c=s.connectNulls,u;return ie.isValidElement(i)?u=ie.cloneElement(i,qs(qs({},this.props),{},{points:r})):xt(i)?u=i(qs(qs({},this.props),{},{points:r})):u=ie.createElement(Cse,gC({},ut(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:r,baseLinePoints:a?l:null,connectNulls:c})),ie.createElement(yn,{className:"recharts-radar-polygon"},u,o?this.renderDots(r):null)}},{key:"renderPolygonWithAnimation",value:function(){var r=this,s=this.props,i=s.points,o=s.isAnimationActive,a=s.animationBegin,l=s.animationDuration,c=s.animationEasing,u=s.animationId,A=this.state.prevPoints;return ie.createElement(Bc,{begin:a,duration:l,isActive:o,easing:c,from:{t:0},to:{t:1},key:"radar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(d){var f=d.t,h=A&&A.length/i.length,m=i.map(function(g,y){var x=A&&A[Math.floor(y*h)];if(x){var v=tl(x.x,g.x),b=tl(x.y,g.y);return qs(qs({},g),{},{x:v(f),y:b(f)})}var w=tl(g.cx,g.x),C=tl(g.cy,g.y);return qs(qs({},g),{},{x:w(f),y:C(f)})});return r.renderPolygonStatically(m)})}},{key:"renderPolygon",value:function(){var r=this.props,s=r.points,i=r.isAnimationActive,o=r.isRange,a=this.state.prevPoints;return i&&s&&s.length&&!o&&(!a||!z3(a,s))?this.renderPolygonWithAnimation():this.renderPolygonStatically(s)}},{key:"render",value:function(){var r=this.props,s=r.hide,i=r.className,o=r.points,a=r.isAnimationActive;if(s||!o||!o.length)return null;var l=this.state.isAnimationFinished,c=It("recharts-radar",i);return ie.createElement(yn,{className:c},this.renderPolygon(),(!a||l)&&ju.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}},{key:"renderDotItem",value:function(r,s){var i;if(ie.isValidElement(r))i=ie.cloneElement(r,s);else if(xt(r))i=r(s);else{var o=s.key,a=Jpt(s,Ypt);i=ie.createElement(K3,gC({},a,{key:o,className:It("recharts-radar-dot",typeof r!="boolean"?r.className:"")}))}return i}}])}(Q.PureComponent);Kl(jv,"displayName","Radar");Kl(jv,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Bm.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Kl(jv,"getComposedData",function(t){var e=t.radiusAxis,n=t.angleAxis,r=t.displayedData,s=t.dataKey,i=t.bandSize,o=n.cx,a=n.cy,l=!1,c=[],u=n.type!=="number"?i??0:0;r.forEach(function(d,f){var h=Go(d,n.dataKey,f),m=Go(d,s),g=n.scale(h)+u,y=Array.isArray(m)?use(m):m,x=Ht(y)?void 0:e.scale(y);Array.isArray(m)&&m.length>=2&&(l=!0),c.push(qs(qs({},pn(o,a,x,g)),{},{name:h,value:m,cx:o,cy:a,radius:x,angle:g,payload:d}))});var A=[];return l&&c.forEach(function(d){if(Array.isArray(d.value)){var f=qpt(d.value),h=Ht(f)?void 0:e.scale(f);A.push(qs(qs({},d),{},{radius:h},pn(o,a,h,d.angle)))}else A.push(d)}),{points:c,isRange:l,baseLinePoints:A}});var amt=Math.ceil,lmt=Math.max;function cmt(t,e,n,r){for(var s=-1,i=lmt(amt((e-t)/(n||1)),0),o=Array(i);i--;)o[r?i:++s]=t,t+=n;return o}var umt=cmt,Amt=Kne,x7=1/0,dmt=17976931348623157e292;function fmt(t){if(!t)return t===0?t:0;if(t=Amt(t),t===x7||t===-x7){var e=t<0?-1:1;return e*dmt}return t===t?t:0}var $se=fmt,hmt=umt,pmt=O3,NE=$se;function mmt(t){return function(e,n,r){return r&&typeof r!="number"&&pmt(e,n,r)&&(n=r=void 0),e=NE(e),n===void 0?(n=e,e=0):n=NE(n),r=r===void 0?e<n?1:-1:NE(r),hmt(e,n,r,t)}}var gmt=mmt,ymt=gmt,xmt=ymt(),vmt=xmt;const xC=Gt(vmt);function M0(t){"@babel/helpers - typeof";return M0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M0(t)}function v7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function b7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v7(Object(n),!0).forEach(function(r){_se(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _se(t,e,n){return e=bmt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bmt(t){var e=wmt(t,"string");return M0(e)=="symbol"?e:e+""}function wmt(t,e){if(M0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(M0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cmt=["Webkit","Moz","O","ms"],Smt=function(e,n){var r=e.replace(/(\w)/,function(i){return i.toUpperCase()}),s=Cmt.reduce(function(i,o){return b7(b7({},i),{},_se({},o+r,n))},{});return s[e]=n,s};function $p(t){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(t)}function vC(){return vC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vC.apply(this,arguments)}function w7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function EE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w7(Object(n),!0).forEach(function(r){Ki(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bmt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Dse(r.key),r)}}function Nmt(t,e,n){return e&&C7(t.prototype,e),n&&C7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Emt(t,e,n){return e=bC(e),Imt(t,Ose()?Reflect.construct(e,n||[],bC(t).constructor):e.apply(t,n))}function Imt(t,e){if(e&&($p(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kmt(t)}function kmt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ose(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ose=function(){return!!t})()}function bC(t){return bC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bC(t)}function Tmt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NF(t,e)}function NF(t,e){return NF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},NF(t,e)}function Ki(t,e,n){return e=Dse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dse(t){var e=Fmt(t,"string");return $p(e)=="symbol"?e:e+""}function Fmt(t,e){if($p(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($p(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $mt=function(e){var n=e.data,r=e.startIndex,s=e.endIndex,i=e.x,o=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=dy().domain(xC(0,l)).range([i,i+o-a]),u=c.domain().map(function(A){return c(A)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(s),scale:c,scaleValues:u}},S7=function(e){return e.changedTouches&&!!e.changedTouches.length},_p=function(t){function e(n){var r;return Bmt(this,e),r=Emt(this,e,[n]),Ki(r,"handleDrag",function(s){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(s):r.state.isSlideMoving&&r.handleSlideDrag(s)}),Ki(r,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&r.handleDrag(s.changedTouches[0])}),Ki(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=r.props,i=s.endIndex,o=s.onDragEnd,a=s.startIndex;o==null||o({endIndex:i,startIndex:a})}),r.detachDragEndListener()}),Ki(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ki(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ki(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ki(r,"handleSlideDragStart",function(s){var i=S7(s)?s.changedTouches[0]:s;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Tmt(e,t),Nmt(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var s=r.startX,i=r.endX,o=this.state.scaleValues,a=this.props,l=a.gap,c=a.data,u=c.length-1,A=Math.min(s,i),d=Math.max(s,i),f=e.getIndexInRange(o,A),h=e.getIndexInRange(o,d);return{startIndex:f-f%l,endIndex:h===u?u:h-h%l}}},{key:"getTextOfTick",value:function(r){var s=this.props,i=s.data,o=s.tickFormatter,a=s.dataKey,l=Go(i[r],a,r);return xt(o)?o(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var s=this.state,i=s.slideMoveStartX,o=s.startX,a=s.endX,l=this.props,c=l.x,u=l.width,A=l.travellerWidth,d=l.startIndex,f=l.endIndex,h=l.onChange,m=r.pageX-i;m>0?m=Math.min(m,c+u-A-a,c+u-A-o):m<0&&(m=Math.max(m,c-o,c-a));var g=this.getIndex({startX:o+m,endX:a+m});(g.startIndex!==d||g.endIndex!==f)&&h&&h(g),this.setState({startX:o+m,endX:a+m,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,s){var i=S7(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,a=s.endX,l=s.startX,c=this.state[o],u=this.props,A=u.x,d=u.width,f=u.travellerWidth,h=u.onChange,m=u.gap,g=u.data,y={startX:this.state.startX,endX:this.state.endX},x=r.pageX-i;x>0?x=Math.min(x,A+d-f-c):x<0&&(x=Math.max(x,A-c)),y[o]=c+x;var v=this.getIndex(y),b=v.startIndex,w=v.endIndex,C=function(){var S=g.length-1;return o==="startX"&&(a>l?b%m===0:w%m===0)||a<l&&w===S||o==="endX"&&(a>l?w%m===0:b%m===0)||a>l&&w===S};this.setState(Ki(Ki({},o,c+x),"brushMoveStartX",r.pageX),function(){h&&C()&&h(v)})}},{key:"handleTravellerMoveKeyboard",value:function(r,s){var i=this,o=this.state,a=o.scaleValues,l=o.startX,c=o.endX,u=this.state[s],A=a.indexOf(u);if(A!==-1){var d=A+r;if(!(d===-1||d>=a.length)){var f=a[d];s==="startX"&&f>=c||s==="endX"&&f<=l||this.setState(Ki({},s,f),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,a=r.height,l=r.fill,c=r.stroke;return ie.createElement("rect",{stroke:c,fill:l,x:s,y:i,width:o,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,a=r.height,l=r.data,c=r.children,u=r.padding,A=Q.Children.only(c);return A?ie.cloneElement(A,{x:s,y:i,width:o,height:a,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,s){var i,o,a=this,l=this.props,c=l.y,u=l.travellerWidth,A=l.height,d=l.traveller,f=l.ariaLabel,h=l.data,m=l.startIndex,g=l.endIndex,y=Math.max(r,this.props.x),x=EE(EE({},ut(this.props,!1)),{},{x:y,y:c,width:u,height:A}),v=f||"Min value: ".concat((i=h[m])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=h[g])===null||o===void 0?void 0:o.name);return ie.createElement(yn,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),a.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,s))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(d,x))}},{key:"renderSlide",value:function(r,s){var i=this.props,o=i.y,a=i.height,l=i.stroke,c=i.travellerWidth,u=Math.min(r,s)+c,A=Math.max(Math.abs(s-r)-c,0);return ie.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:o,width:A,height:a})}},{key:"renderText",value:function(){var r=this.props,s=r.startIndex,i=r.endIndex,o=r.y,a=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,A=u.startX,d=u.endX,f=5,h={pointerEvents:"none",fill:c};return ie.createElement(yn,{className:"recharts-brush-texts"},ie.createElement(Cp,vC({textAnchor:"end",verticalAnchor:"middle",x:Math.min(A,d)-f,y:o+a/2},h),this.getTextOfTick(s)),ie.createElement(Cp,vC({textAnchor:"start",verticalAnchor:"middle",x:Math.max(A,d)+l+f,y:o+a/2},h),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,s=r.data,i=r.className,o=r.children,a=r.x,l=r.y,c=r.width,u=r.height,A=r.alwaysShowText,d=this.state,f=d.startX,h=d.endX,m=d.isTextActive,g=d.isSlideMoving,y=d.isTravellerMoving,x=d.isTravellerFocused;if(!s||!s.length||!je(a)||!je(l)||!je(c)||!je(u)||c<=0||u<=0)return null;var v=It("recharts-brush",i),b=ie.Children.count(o)===1,w=Smt("userSelect","none");return ie.createElement(yn,{className:v,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),b&&this.renderPanorama(),this.renderSlide(f,h),this.renderTravellerLayer(f,"startX"),this.renderTravellerLayer(h,"endX"),(m||g||y||x||A)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var s=r.x,i=r.y,o=r.width,a=r.height,l=r.stroke,c=Math.floor(i+a/2)-1;return ie.createElement(ie.Fragment,null,ie.createElement("rect",{x:s,y:i,width:o,height:a,fill:l,stroke:"none"}),ie.createElement("line",{x1:s+1,y1:c,x2:s+o-1,y2:c,fill:"none",stroke:"#fff"}),ie.createElement("line",{x1:s+1,y1:c+2,x2:s+o-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,s){var i;return ie.isValidElement(r)?i=ie.cloneElement(r,s):xt(r)?i=r(s):i=e.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(r,s){var i=r.data,o=r.width,a=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,A=r.endIndex;if(i!==s.prevData||c!==s.prevUpdateId)return EE({prevData:i,prevTravellerWidth:l,prevUpdateId:c,prevX:a,prevWidth:o},i&&i.length?$mt({data:i,width:o,x:a,travellerWidth:l,startIndex:u,endIndex:A}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||a!==s.prevX||l!==s.prevTravellerWidth)){s.scale.range([a,a+o-l]);var d=s.scale.domain().map(function(f){return s.scale(f)});return{prevData:i,prevTravellerWidth:l,prevUpdateId:c,prevX:a,prevWidth:o,startX:s.scale(r.startIndex),endX:s.scale(r.endIndex),scaleValues:d}}return null}},{key:"getIndexInRange",value:function(r,s){for(var i=r.length,o=0,a=i-1;a-o>1;){var l=Math.floor((o+a)/2);r[l]>s?a=l:o=l}return s>=r[a]?a:o}}])}(Q.PureComponent);Ki(_p,"displayName","Brush");Ki(_p,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var _mt=aP;function Omt(t,e){var n;return _mt(t,function(r,s,i){return n=e(r,s,i),!n}),!!n}var Dmt=Omt,Rmt=bne,Pmt=Nl,Umt=Dmt,jmt=Qi,Lmt=O3;function Mmt(t,e,n){var r=jmt(t)?Rmt:Umt;return n&&Lmt(t,e,n)&&(e=void 0),r(t,Pmt(e))}var Qmt=Mmt;const Hmt=Gt(Qmt);var pl=function(e,n){var r=e.alwaysShow,s=e.ifOverflow;return r&&(s="extendDomain"),s===n},B7=Hne;function zmt(t,e,n){e=="__proto__"&&B7?B7(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Vmt=zmt,Wmt=Vmt,Gmt=Mne,Kmt=Nl;function Xmt(t,e){var n={};return e=Kmt(e),Gmt(t,function(r,s,i){Wmt(n,s,e(r,s,i))}),n}var qmt=Xmt;const Ymt=Gt(qmt);function Jmt(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var Zmt=Jmt,egt=aP;function tgt(t,e){var n=!0;return egt(t,function(r,s,i){return n=!!e(r,s,i),n}),n}var ngt=tgt,rgt=Zmt,sgt=ngt,igt=Nl,ogt=Qi,agt=O3;function lgt(t,e,n){var r=ogt(t)?rgt:sgt;return n&&agt(t,e,n)&&(e=void 0),r(t,igt(e))}var cgt=lgt;const Rse=Gt(cgt);var ugt=["x","y"];function Q0(t){"@babel/helpers - typeof";return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q0(t)}function EF(){return EF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EF.apply(this,arguments)}function N7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function bg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N7(Object(n),!0).forEach(function(r){Agt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Agt(t,e,n){return e=dgt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dgt(t){var e=fgt(t,"string");return Q0(e)=="symbol"?e:e+""}function fgt(t,e){if(Q0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Q0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hgt(t,e){if(t==null)return{};var n=pgt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pgt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function mgt(t,e){var n=t.x,r=t.y,s=hgt(t,ugt),i="".concat(n),o=parseInt(i,10),a="".concat(r),l=parseInt(a,10),c="".concat(e.height||s.height),u=parseInt(c,10),A="".concat(e.width||s.width),d=parseInt(A,10);return bg(bg(bg(bg(bg({},e),s),o?{x:o}:{}),l?{y:l}:{}),{},{height:u,width:d,name:e.name,radius:e.radius})}function E7(t){return ie.createElement(jpt,EF({shapeType:"rectangle",propTransformer:mgt,activeClassName:"recharts-active-bar"},t))}var ggt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,s){if(typeof e=="number")return e;var i=je(r)||wXe(r);return i?e(r,s):(i||sf(),n)}},ygt=["value","background"],Pse;function Op(t){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Op(t)}function xgt(t,e){if(t==null)return{};var n=vgt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vgt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wC(){return wC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wC.apply(this,arguments)}function I7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function xr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I7(Object(n),!0).forEach(function(r){vu(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bgt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jse(r.key),r)}}function wgt(t,e,n){return e&&k7(t.prototype,e),n&&k7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cgt(t,e,n){return e=CC(e),Sgt(t,Use()?Reflect.construct(e,n||[],CC(t).constructor):e.apply(t,n))}function Sgt(t,e){if(e&&(Op(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bgt(t)}function Bgt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Use(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Use=function(){return!!t})()}function CC(t){return CC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},CC(t)}function Ngt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IF(t,e)}function IF(t,e){return IF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},IF(t,e)}function vu(t,e,n){return e=jse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jse(t){var e=Egt(t,"string");return Op(e)=="symbol"?e:e+""}function Egt(t,e){if(Op(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Op(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gi=function(t){function e(){var n;bgt(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=Cgt(this,e,[].concat(s)),vu(n,"state",{isAnimationFinished:!1}),vu(n,"id",E3("recharts-bar-")),vu(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),vu(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return Ngt(e,t),wgt(e,[{key:"renderRectanglesStatically",value:function(r){var s=this,i=this.props,o=i.shape,a=i.dataKey,l=i.activeIndex,c=i.activeBar,u=ut(this.props,!1);return r&&r.map(function(A,d){var f=d===l,h=f?c:o,m=xr(xr(xr({},u),A),{},{isActive:f,option:h,index:d,dataKey:a,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return ie.createElement(yn,wC({className:"recharts-bar-rectangle"},gp(s.props,A,d),{key:"rectangle-".concat(A==null?void 0:A.x,"-").concat(A==null?void 0:A.y,"-").concat(A==null?void 0:A.value,"-").concat(d)}),ie.createElement(E7,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,s=this.props,i=s.data,o=s.layout,a=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,u=s.animationEasing,A=s.animationId,d=this.state.prevData;return ie.createElement(Bc,{begin:l,duration:c,isActive:a,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(A),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var h=f.t,m=i.map(function(g,y){var x=d&&d[y];if(x){var v=tl(x.x,g.x),b=tl(x.y,g.y),w=tl(x.width,g.width),C=tl(x.height,g.height);return xr(xr({},g),{},{x:v(h),y:b(h),width:w(h),height:C(h)})}if(o==="horizontal"){var B=tl(0,g.height),S=B(h);return xr(xr({},g),{},{y:g.y+g.height-S,height:S})}var N=tl(0,g.width),k=N(h);return xr(xr({},g),{},{width:k})});return ie.createElement(yn,null,r.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var r=this.props,s=r.data,i=r.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!z3(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var r=this,s=this.props,i=s.data,o=s.dataKey,a=s.activeIndex,l=ut(this.props.background,!1);return i.map(function(c,u){c.value;var A=c.background,d=xgt(c,ygt);if(!A)return null;var f=xr(xr(xr(xr(xr({},d),{},{fill:"#eee"},A),l),gp(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return ie.createElement(E7,wC({key:"background-bar-".concat(u),option:r.props.background,isActive:u===a},f))})}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,a=i.xAxis,l=i.yAxis,c=i.layout,u=i.children,A=Sa(u,G3);if(!A)return null;var d=c==="vertical"?o[0].height/2:o[0].width/2,f=function(g,y){var x=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:x,errorVal:Go(g,y)}},h={clipPath:r?"url(#clipPath-".concat(s,")"):null};return ie.createElement(yn,h,A.map(function(m){return ie.cloneElement(m,{key:"error-bar-".concat(s,"-").concat(m.props.dataKey),data:o,xAxis:a,yAxis:l,layout:c,offset:d,dataPointFormatter:f})}))}},{key:"render",value:function(){var r=this.props,s=r.hide,i=r.data,o=r.className,a=r.xAxis,l=r.yAxis,c=r.left,u=r.top,A=r.width,d=r.height,f=r.isAnimationActive,h=r.background,m=r.id;if(s||!i||!i.length)return null;var g=this.state.isAnimationFinished,y=It("recharts-bar",o),x=a&&a.allowDataOverflow,v=l&&l.allowDataOverflow,b=x||v,w=Ht(m)?this.id:m;return ie.createElement(yn,{className:y},x||v?ie.createElement("defs",null,ie.createElement("clipPath",{id:"clipPath-".concat(w)},ie.createElement("rect",{x:x?c:c-A/2,y:v?u:u-d/2,width:x?A:A*2,height:v?d:d*2}))):null,ie.createElement(yn,{className:"recharts-bar-rectangles",clipPath:b?"url(#clipPath-".concat(w,")"):null},h?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(b,w),(!f||g)&&ju.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:s.curData}:r.data!==s.curData?{curData:r.data}:null}}])}(Q.PureComponent);Pse=gi;vu(gi,"displayName","Bar");vu(gi,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Bm.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});vu(gi,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,s=t.bandSize,i=t.xAxis,o=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,A=t.displayedData,d=t.offset,f=Qut(r,n);if(!f)return null;var h=e.layout,m=n.type.defaultProps,g=m!==void 0?xr(xr({},m),n.props):n.props,y=g.dataKey,x=g.children,v=g.minPointSize,b=h==="horizontal"?o:i,w=c?b.scale.domain():null,C=Xut({numericAxis:b}),B=Sa(x,qne),S=A.map(function(N,k){var O,U,P,V,W,L;c?O=Hut(c[u+k],w):(O=Go(N,y),Array.isArray(O)||(O=[C,O]));var G=ggt(v,Pse.defaultProps.minPointSize)(O[1],k);if(h==="horizontal"){var _,j=[o.scale(O[0]),o.scale(O[1])],K=j[0],Y=j[1];U=mH({axis:i,ticks:a,bandSize:s,offset:f.offset,entry:N,index:k}),P=(_=Y??K)!==null&&_!==void 0?_:void 0,V=f.size;var J=K-Y;if(W=Number.isNaN(J)?0:J,L={x:U,y:o.y,width:V,height:o.height},Math.abs(G)>0&&Math.abs(W)<Math.abs(G)){var ae=ma(W||G)*(Math.abs(G)-Math.abs(W));P-=ae,W+=ae}}else{var ue=[i.scale(O[0]),i.scale(O[1])],le=ue[0],fe=ue[1];if(U=le,P=mH({axis:o,ticks:l,bandSize:s,offset:f.offset,entry:N,index:k}),V=fe-le,W=f.size,L={x:i.x,y:P,width:i.width,height:W},Math.abs(G)>0&&Math.abs(V)<Math.abs(G)){var Ie=ma(V||G)*(Math.abs(G)-Math.abs(V));V+=Ie}}return xr(xr(xr({},N),{},{x:U,y:P,width:V,height:W,value:c?O:O[1],payload:N,background:L},B&&B[k]&&B[k].props),{},{tooltipPayload:[ose(n,N)],tooltipPosition:{x:U+V/2,y:P+W/2}})});return xr({data:S,layout:h},d)});function H0(t){"@babel/helpers - typeof";return H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H0(t)}function Igt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lse(r.key),r)}}function kgt(t,e,n){return e&&T7(t.prototype,e),n&&T7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function F7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ua(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F7(Object(n),!0).forEach(function(r){Z3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Z3(t,e,n){return e=Lse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lse(t){var e=Tgt(t,"string");return H0(e)=="symbol"?e:e+""}function Tgt(t,e){if(H0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(H0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fgt=function(e,n,r,s,i){var o=e.width,a=e.height,l=e.layout,c=e.children,u=Object.keys(n),A={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},d=!!qi(c,gi);return u.reduce(function(f,h){var m=n[h],g=m.orientation,y=m.domain,x=m.padding,v=x===void 0?{}:x,b=m.mirror,w=m.reversed,C="".concat(g).concat(b?"Mirror":""),B,S,N,k,O;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var U=y[1]-y[0],P=1/0,V=m.categoricalDomain.sort(BXe);if(V.forEach(function(ue,le){le>0&&(P=Math.min((ue||0)-(V[le-1]||0),P))}),Number.isFinite(P)){var W=P/U,L=m.layout==="vertical"?r.height:r.width;if(m.padding==="gap"&&(B=W*L/2),m.padding==="no-gap"){var G=ga(e.barCategoryGap,W*L),_=W*L/2;B=_-G-(_-G)/L*G}}}s==="xAxis"?S=[r.left+(v.left||0)+(B||0),r.left+r.width-(v.right||0)-(B||0)]:s==="yAxis"?S=l==="horizontal"?[r.top+r.height-(v.bottom||0),r.top+(v.top||0)]:[r.top+(v.top||0)+(B||0),r.top+r.height-(v.bottom||0)-(B||0)]:S=m.range,w&&(S=[S[1],S[0]]);var j=nse(m,i,d),K=j.scale,Y=j.realScaleType;K.domain(y).range(S),rse(K);var J=sse(K,ua(ua({},m),{},{realScaleType:Y}));s==="xAxis"?(O=g==="top"&&!b||g==="bottom"&&b,N=r.left,k=A[C]-O*m.height):s==="yAxis"&&(O=g==="left"&&!b||g==="right"&&b,N=A[C]-O*m.width,k=r.top);var ae=ua(ua(ua({},m),J),{},{realScaleType:Y,x:N,y:k,scale:K,width:s==="xAxis"?r.width:m.width,height:s==="yAxis"?r.height:m.height});return ae.bandSize=oC(ae,J),!m.hide&&s==="xAxis"?A[C]+=(O?-1:1)*ae.height:m.hide||(A[C]+=(O?-1:1)*ae.width),ua(ua({},f),{},Z3({},h,ae))},{})},Mse=function(e,n){var r=e.x,s=e.y,i=n.x,o=n.y;return{x:Math.min(r,i),y:Math.min(s,o),width:Math.abs(i-r),height:Math.abs(o-s)}},$gt=function(e){var n=e.x1,r=e.y1,s=e.x2,i=e.y2;return Mse({x:n,y:r},{x:s,y:i})},Qse=function(){function t(e){Igt(this,t),this.scale=e}return kgt(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.bandAware,i=r.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(s){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),s=r[0],i=r[r.length-1];return s<=i?n>=s&&n<=i:n>=i&&n<=s}}],[{key:"create",value:function(n){return new t(n)}}])}();Z3(Qse,"EPS",1e-4);var RP=function(e){var n=Object.keys(e).reduce(function(r,s){return ua(ua({},r),{},Z3({},s,Qse.create(e[s])))},{});return ua(ua({},n),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,a=i.position;return Ymt(s,function(l,c){return n[c].apply(l,{bandAware:o,position:a})})},isInRange:function(s){return Rse(s,function(i,o){return n[o].isInRange(i)})}})};function _gt(t){return(t%180+180)%180}var Ogt=function(e){var n=e.width,r=e.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=_gt(s),o=i*Math.PI/180,a=Math.atan(r/n),l=o>a&&o<Math.PI-a?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},Dgt=Nl,Rgt=$v,Pgt=$3;function Ugt(t){return function(e,n,r){var s=Object(e);if(!Rgt(e)){var i=Dgt(n);e=Pgt(e),n=function(a){return i(s[a],a,s)}}var o=t(e,n,r);return o>-1?s[i?e[o]:o]:void 0}}var jgt=Ugt,Lgt=$se;function Mgt(t){var e=Lgt(t),n=e%1;return e===e?n?e-n:e:0}var Qgt=Mgt,Hgt=Dne,zgt=Nl,Vgt=Qgt,Wgt=Math.max;function Ggt(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var s=n==null?0:Vgt(n);return s<0&&(s=Wgt(r+s,0)),Hgt(t,zgt(e),s)}var Kgt=Ggt,Xgt=jgt,qgt=Kgt,Ygt=Xgt(qgt),Jgt=Ygt;const Zgt=Gt(Jgt);var eyt=IKe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),PP=Q.createContext(void 0),UP=Q.createContext(void 0),Hse=Q.createContext(void 0),zse=Q.createContext({}),Vse=Q.createContext(void 0),Wse=Q.createContext(0),Gse=Q.createContext(0),$7=function(e){var n=e.state,r=n.xAxisMap,s=n.yAxisMap,i=n.offset,o=e.clipPathId,a=e.children,l=e.width,c=e.height,u=eyt(i);return ie.createElement(PP.Provider,{value:r},ie.createElement(UP.Provider,{value:s},ie.createElement(zse.Provider,{value:i},ie.createElement(Hse.Provider,{value:u},ie.createElement(Vse.Provider,{value:o},ie.createElement(Wse.Provider,{value:c},ie.createElement(Gse.Provider,{value:l},a)))))))},tyt=function(){return Q.useContext(Vse)},Kse=function(e){var n=Q.useContext(PP);n==null&&sf();var r=n[e];return r==null&&sf(),r},nyt=function(){var e=Q.useContext(PP);return nu(e)},ryt=function(){var e=Q.useContext(UP),n=Zgt(e,function(r){return Rse(r.domain,Number.isFinite)});return n||nu(e)},Xse=function(e){var n=Q.useContext(UP);n==null&&sf();var r=n[e];return r==null&&sf(),r},syt=function(){var e=Q.useContext(Hse);return e},iyt=function(){return Q.useContext(zse)},jP=function(){return Q.useContext(Gse)},LP=function(){return Q.useContext(Wse)};function Dp(t){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dp(t)}function oyt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ayt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yse(r.key),r)}}function lyt(t,e,n){return e&&ayt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cyt(t,e,n){return e=SC(e),uyt(t,qse()?Reflect.construct(e,n||[],SC(t).constructor):e.apply(t,n))}function uyt(t,e){if(e&&(Dp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ayt(t)}function Ayt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qse=function(){return!!t})()}function SC(t){return SC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},SC(t)}function dyt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kF(t,e)}function kF(t,e){return kF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},kF(t,e)}function _7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function O7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_7(Object(n),!0).forEach(function(r){MP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MP(t,e,n){return e=Yse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yse(t){var e=fyt(t,"string");return Dp(e)=="symbol"?e:e+""}function fyt(t,e){if(Dp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function hyt(t,e){return yyt(t)||gyt(t,e)||myt(t,e)||pyt()}function pyt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function myt(t,e){if(t){if(typeof t=="string")return D7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D7(t,e)}}function D7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gyt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function yyt(t){if(Array.isArray(t))return t}function TF(){return TF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TF.apply(this,arguments)}var xyt=function(e,n){var r;return ie.isValidElement(e)?r=ie.cloneElement(e,n):xt(e)?r=e(n):r=ie.createElement("line",TF({},n,{className:"recharts-reference-line-line"})),r},vyt=function(e,n,r,s,i,o,a,l,c){var u=i.x,A=i.y,d=i.width,f=i.height;if(r){var h=c.y,m=e.y.apply(h,{position:o});if(pl(c,"discard")&&!e.y.isInRange(m))return null;var g=[{x:u+d,y:m},{x:u,y:m}];return l==="left"?g.reverse():g}if(n){var y=c.x,x=e.x.apply(y,{position:o});if(pl(c,"discard")&&!e.x.isInRange(x))return null;var v=[{x,y:A+f},{x,y:A}];return a==="top"?v.reverse():v}if(s){var b=c.segment,w=b.map(function(C){return e.apply(C,{position:o})});return pl(c,"discard")&&Hmt(w,function(C){return!e.isInRange(C)})?null:w}return null};function byt(t){var e=t.x,n=t.y,r=t.segment,s=t.xAxisId,i=t.yAxisId,o=t.shape,a=t.className,l=t.alwaysShow,c=tyt(),u=Kse(s),A=Xse(i),d=syt();if(!c||!d)return null;cc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=RP({x:u.scale,y:A.scale}),h=zr(e),m=zr(n),g=r&&r.length===2,y=vyt(f,h,m,g,d,t.position,u.orientation,A.orientation,t);if(!y)return null;var x=hyt(y,2),v=x[0],b=v.x,w=v.y,C=x[1],B=C.x,S=C.y,N=pl(t,"hidden")?"url(#".concat(c,")"):void 0,k=O7(O7({clipPath:N},ut(t,!0)),{},{x1:b,y1:w,x2:B,y2:S});return ie.createElement(yn,{className:It("recharts-reference-line",a)},xyt(o,k),ms.renderCallByParent(t,$gt({x1:b,y1:w,x2:B,y2:S})))}var QP=function(t){function e(){return oyt(this,e),cyt(this,e,arguments)}return dyt(e,t),lyt(e,[{key:"render",value:function(){return ie.createElement(byt,this.props)}}])}(ie.Component);MP(QP,"displayName","ReferenceLine");MP(QP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function FF(){return FF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FF.apply(this,arguments)}function Rp(t){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rp(t)}function R7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function P7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R7(Object(n),!0).forEach(function(r){eN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wyt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cyt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zse(r.key),r)}}function Syt(t,e,n){return e&&Cyt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Byt(t,e,n){return e=BC(e),Nyt(t,Jse()?Reflect.construct(e,n||[],BC(t).constructor):e.apply(t,n))}function Nyt(t,e){if(e&&(Rp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eyt(t)}function Eyt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jse=function(){return!!t})()}function BC(t){return BC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},BC(t)}function Iyt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$F(t,e)}function $F(t,e){return $F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},$F(t,e)}function eN(t,e,n){return e=Zse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zse(t){var e=kyt(t,"string");return Rp(e)=="symbol"?e:e+""}function kyt(t,e){if(Rp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Tyt=function(e){var n=e.x,r=e.y,s=e.xAxis,i=e.yAxis,o=RP({x:s.scale,y:i.scale}),a=o.apply({x:n,y:r},{bandAware:!0});return pl(e,"discard")&&!o.isInRange(a)?null:a},tN=function(t){function e(){return wyt(this,e),Byt(this,e,arguments)}return Iyt(e,t),Syt(e,[{key:"render",value:function(){var r=this.props,s=r.x,i=r.y,o=r.r,a=r.alwaysShow,l=r.clipPathId,c=zr(s),u=zr(i);if(cc(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var A=Tyt(this.props);if(!A)return null;var d=A.x,f=A.y,h=this.props,m=h.shape,g=h.className,y=pl(this.props,"hidden")?"url(#".concat(l,")"):void 0,x=P7(P7({clipPath:y},ut(this.props,!0)),{},{cx:d,cy:f});return ie.createElement(yn,{className:It("recharts-reference-dot",g)},e.renderDot(m,x),ms.renderCallByParent(this.props,{x:d-o,y:f-o,width:2*o,height:2*o}))}}])}(ie.Component);eN(tN,"displayName","ReferenceDot");eN(tN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});eN(tN,"renderDot",function(t,e){var n;return ie.isValidElement(t)?n=ie.cloneElement(t,e):xt(t)?n=t(e):n=ie.createElement(K3,FF({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function _F(){return _F=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_F.apply(this,arguments)}function Pp(t){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pp(t)}function U7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function j7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U7(Object(n),!0).forEach(function(r){nN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fyt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tie(r.key),r)}}function _yt(t,e,n){return e&&$yt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Oyt(t,e,n){return e=NC(e),Dyt(t,eie()?Reflect.construct(e,n||[],NC(t).constructor):e.apply(t,n))}function Dyt(t,e){if(e&&(Pp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ryt(t)}function Ryt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eie=function(){return!!t})()}function NC(t){return NC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},NC(t)}function Pyt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OF(t,e)}function OF(t,e){return OF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},OF(t,e)}function nN(t,e,n){return e=tie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tie(t){var e=Uyt(t,"string");return Pp(e)=="symbol"?e:e+""}function Uyt(t,e){if(Pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var jyt=function(e,n,r,s,i){var o=i.x1,a=i.x2,l=i.y1,c=i.y2,u=i.xAxis,A=i.yAxis;if(!u||!A)return null;var d=RP({x:u.scale,y:A.scale}),f={x:e?d.x.apply(o,{position:"start"}):d.x.rangeMin,y:r?d.y.apply(l,{position:"start"}):d.y.rangeMin},h={x:n?d.x.apply(a,{position:"end"}):d.x.rangeMax,y:s?d.y.apply(c,{position:"end"}):d.y.rangeMax};return pl(i,"discard")&&(!d.isInRange(f)||!d.isInRange(h))?null:Mse(f,h)},rN=function(t){function e(){return Fyt(this,e),Oyt(this,e,arguments)}return Pyt(e,t),_yt(e,[{key:"render",value:function(){var r=this.props,s=r.x1,i=r.x2,o=r.y1,a=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;cc(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var A=zr(s),d=zr(i),f=zr(o),h=zr(a),m=this.props.shape;if(!A&&!d&&!f&&!h&&!m)return null;var g=jyt(A,d,f,h,this.props);if(!g&&!m)return null;var y=pl(this.props,"hidden")?"url(#".concat(u,")"):void 0;return ie.createElement(yn,{className:It("recharts-reference-area",l)},e.renderRect(m,j7(j7({clipPath:y},ut(this.props,!0)),g)),ms.renderCallByParent(this.props,g))}}])}(ie.Component);nN(rN,"displayName","ReferenceArea");nN(rN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});nN(rN,"renderRect",function(t,e){var n;return ie.isValidElement(t)?n=ie.cloneElement(t,e):xt(t)?n=t(e):n=ie.createElement(DP,_F({},e,{className:"recharts-reference-area-rect"})),n});function nie(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],s=0;s<t.length;s+=e)r.push(t[s]);return r}function Lyt(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Ogt(r,n)}function Myt(t,e,n){var r=n==="width",s=t.x,i=t.y,o=t.width,a=t.height;return e===1?{start:r?s:i,end:r?s+o:i+a}:{start:r?s+o:i+a,end:r?s:i}}function EC(t,e,n,r,s){if(t*e<t*r||t*e>t*s)return!1;var i=n();return t*(e-t*i/2-r)>=0&&t*(e+t*i/2-s)<=0}function Qyt(t,e){return nie(t,e+1)}function Hyt(t,e,n,r,s){for(var i=(r||[]).slice(),o=e.start,a=e.end,l=0,c=1,u=o,A=function(){var h=r==null?void 0:r[l];if(h===void 0)return{v:nie(r,c)};var m=l,g,y=function(){return g===void 0&&(g=n(h,m)),g},x=h.coordinate,v=l===0||EC(t,x,y,u,a);v||(l=0,u=o,c+=1),v&&(u=x+t*(y()/2+s),l+=c)},d;c<=i.length;)if(d=A(),d)return d.v;return[]}function z0(t){"@babel/helpers - typeof";return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z0(t)}function L7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ts(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L7(Object(n),!0).forEach(function(r){zyt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zyt(t,e,n){return e=Vyt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vyt(t){var e=Wyt(t,"string");return z0(e)=="symbol"?e:e+""}function Wyt(t,e){if(z0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(z0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gyt(t,e,n,r,s){for(var i=(r||[]).slice(),o=i.length,a=e.start,l=e.end,c=function(d){var f=i[d],h,m=function(){return h===void 0&&(h=n(f,d)),h};if(d===o-1){var g=t*(f.coordinate+t*m()/2-l);i[d]=f=Ts(Ts({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate})}else i[d]=f=Ts(Ts({},f),{},{tickCoord:f.coordinate});var y=EC(t,f.tickCoord,m,a,l);y&&(l=f.tickCoord-t*(m()/2+s),i[d]=Ts(Ts({},f),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return i}function Kyt(t,e,n,r,s,i){var o=(r||[]).slice(),a=o.length,l=e.start,c=e.end;if(i){var u=r[a-1],A=n(u,a-1),d=t*(u.coordinate+t*A/2-c);o[a-1]=u=Ts(Ts({},u),{},{tickCoord:d>0?u.coordinate-d*t:u.coordinate});var f=EC(t,u.tickCoord,function(){return A},l,c);f&&(c=u.tickCoord-t*(A/2+s),o[a-1]=Ts(Ts({},u),{},{isShow:!0}))}for(var h=i?a-1:a,m=function(x){var v=o[x],b,w=function(){return b===void 0&&(b=n(v,x)),b};if(x===0){var C=t*(v.coordinate-t*w()/2-l);o[x]=v=Ts(Ts({},v),{},{tickCoord:C<0?v.coordinate-C*t:v.coordinate})}else o[x]=v=Ts(Ts({},v),{},{tickCoord:v.coordinate});var B=EC(t,v.tickCoord,w,l,c);B&&(l=v.tickCoord+t*(w()/2+s),o[x]=Ts(Ts({},v),{},{isShow:!0}))},g=0;g<h;g++)m(g);return o}function HP(t,e,n){var r=t.tick,s=t.ticks,i=t.viewBox,o=t.minTickGap,a=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,A=t.angle;if(!s||!s.length||!r)return[];if(je(l)||Bm.isSsr)return Qyt(s,typeof l=="number"&&je(l)?l:0);var d=[],f=a==="top"||a==="bottom"?"width":"height",h=u&&f==="width"?Ay(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},m=function(v,b){var w=xt(c)?c(v.value,b):v.value;return f==="width"?Lyt(Ay(w,{fontSize:e,letterSpacing:n}),h,A):Ay(w,{fontSize:e,letterSpacing:n})[f]},g=s.length>=2?ma(s[1].coordinate-s[0].coordinate):1,y=Myt(i,g,f);return l==="equidistantPreserveStart"?Hyt(g,y,m,s,o):(l==="preserveStart"||l==="preserveStartEnd"?d=Kyt(g,y,m,s,o,l==="preserveStartEnd"):d=Gyt(g,y,m,s,o),d.filter(function(x){return x.isShow}))}var Xyt=["viewBox"],qyt=["viewBox"],Yyt=["ticks"];function Up(t){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Up(t)}function mh(){return mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mh.apply(this,arguments)}function M7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Dr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M7(Object(n),!0).forEach(function(r){zP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IE(t,e){if(t==null)return{};var n=Jyt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jyt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Zyt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sie(r.key),r)}}function e0t(t,e,n){return e&&Q7(t.prototype,e),n&&Q7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function t0t(t,e,n){return e=IC(e),n0t(t,rie()?Reflect.construct(e,n||[],IC(t).constructor):e.apply(t,n))}function n0t(t,e){if(e&&(Up(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r0t(t)}function r0t(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rie=function(){return!!t})()}function IC(t){return IC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},IC(t)}function s0t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DF(t,e)}function DF(t,e){return DF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},DF(t,e)}function zP(t,e,n){return e=sie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sie(t){var e=i0t(t,"string");return Up(e)=="symbol"?e:e+""}function i0t(t,e){if(Up(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var km=function(t){function e(n){var r;return Zyt(this,e),r=t0t(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return s0t(e,t),e0t(e,[{key:"shouldComponentUpdate",value:function(r,s){var i=r.viewBox,o=IE(r,Xyt),a=this.props,l=a.viewBox,c=IE(a,qyt);return!Dh(i,l)||!Dh(o,c)||!Dh(s,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var s=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var s=this.props,i=s.x,o=s.y,a=s.width,l=s.height,c=s.orientation,u=s.tickSize,A=s.mirror,d=s.tickMargin,f,h,m,g,y,x,v=A?-1:1,b=r.tickSize||u,w=je(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":f=h=r.coordinate,g=o+ +!A*l,m=g-v*b,x=m-v*d,y=w;break;case"left":m=g=r.coordinate,h=i+ +!A*a,f=h-v*b,y=f-v*d,x=w;break;case"right":m=g=r.coordinate,h=i+ +A*a,f=h+v*b,y=f+v*d,x=w;break;default:f=h=r.coordinate,g=o+ +A*l,m=g+v*b,x=m+v*d,y=w;break}return{line:{x1:f,y1:m,x2:h,y2:g},tick:{x:y,y:x}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,s=r.orientation,i=r.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,s=r.orientation,i=r.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,a=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,A=Dr(Dr(Dr({},ut(this.props,!1)),ut(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var d=+(l==="top"&&!c||l==="bottom"&&c);A=Dr(Dr({},A),{},{x1:s,y1:i+d*a,x2:s+o,y2:i+d*a})}else{var f=+(l==="left"&&!c||l==="right"&&c);A=Dr(Dr({},A),{},{x1:s+f*o,y1:i,x2:s+f*o,y2:i+a})}return ie.createElement("line",mh({},A,{className:It("recharts-cartesian-axis-line",Lo(u,"className"))}))}},{key:"renderTicks",value:function(r,s,i){var o=this,a=this.props,l=a.tickLine,c=a.stroke,u=a.tick,A=a.tickFormatter,d=a.unit,f=HP(Dr(Dr({},this.props),{},{ticks:r}),s,i),h=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),g=ut(this.props,!1),y=ut(u,!1),x=Dr(Dr({},g),{},{fill:"none"},ut(l,!1)),v=f.map(function(b,w){var C=o.getTickLineCoord(b),B=C.line,S=C.tick,N=Dr(Dr(Dr(Dr({textAnchor:h,verticalAnchor:m},g),{},{stroke:"none",fill:c},y),S),{},{index:w,payload:b,visibleTicksCount:f.length,tickFormatter:A});return ie.createElement(yn,mh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(b.value,"-").concat(b.coordinate,"-").concat(b.tickCoord)},gp(o.props,b,w)),l&&ie.createElement("line",mh({},x,B,{className:It("recharts-cartesian-axis-tick-line",Lo(l,"className"))})),u&&e.renderTickItem(u,N,"".concat(xt(A)?A(b.value,w):b.value).concat(d||"")))});return ie.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var r=this,s=this.props,i=s.axisLine,o=s.width,a=s.height,l=s.ticksGenerator,c=s.className,u=s.hide;if(u)return null;var A=this.props,d=A.ticks,f=IE(A,Yyt),h=d;return xt(l)&&(h=d&&d.length>0?l(this.props):l(f)),o<=0||a<=0||!h||!h.length?null:ie.createElement(yn,{className:It("recharts-cartesian-axis",c),ref:function(g){r.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(h,this.state.fontSize,this.state.letterSpacing),ms.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,s,i){var o,a=It(s.className,"recharts-cartesian-axis-tick-value");return ie.isValidElement(r)?o=ie.cloneElement(r,Dr(Dr({},s),{},{className:a})):xt(r)?o=r(Dr(Dr({},s),{},{className:a})):o=ie.createElement(Cp,mh({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(Q.Component);zP(km,"displayName","CartesianAxis");zP(km,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var o0t=["x1","y1","x2","y2","key"],a0t=["offset"];function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}function H7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Rs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H7(Object(n),!0).forEach(function(r){l0t(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l0t(t,e,n){return e=c0t(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c0t(t){var e=u0t(t,"string");return of(e)=="symbol"?e:e+""}function u0t(t,e){if(of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dd.apply(this,arguments)}function z7(t,e){if(t==null)return{};var n=A0t(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function A0t(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var d0t=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,s=e.x,i=e.y,o=e.width,a=e.height,l=e.ry;return ie.createElement("rect",{x:s,y:i,ry:l,width:o,height:a,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function iie(t,e){var n;if(ie.isValidElement(t))n=ie.cloneElement(t,e);else if(xt(t))n=t(e);else{var r=e.x1,s=e.y1,i=e.x2,o=e.y2,a=e.key,l=z7(e,o0t),c=ut(l,!1);c.offset;var u=z7(c,a0t);n=ie.createElement("line",dd({},u,{x1:r,y1:s,x2:i,y2:o,fill:"none",key:a}))}return n}function f0t(t){var e=t.x,n=t.width,r=t.horizontal,s=r===void 0?!0:r,i=t.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(a,l){var c=Rs(Rs({},t),{},{x1:e,y1:a,x2:e+n,y2:a,key:"line-".concat(l),index:l});return iie(s,c)});return ie.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function h0t(t){var e=t.y,n=t.height,r=t.vertical,s=r===void 0?!0:r,i=t.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(a,l){var c=Rs(Rs({},t),{},{x1:a,y1:e,x2:a,y2:e+n,key:"line-".concat(l),index:l});return iie(s,c)});return ie.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function p0t(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,s=t.y,i=t.width,o=t.height,a=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var u=a.map(function(d){return Math.round(d+s-s)}).sort(function(d,f){return d-f});s!==u[0]&&u.unshift(0);var A=u.map(function(d,f){var h=!u[f+1],m=h?s+o-d:u[f+1]-d;if(m<=0)return null;var g=f%e.length;return ie.createElement("rect",{key:"react-".concat(f),y:d,x:r,height:m,width:i,stroke:"none",fill:e[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return ie.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},A)}function m0t(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,s=t.fillOpacity,i=t.x,o=t.y,a=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var u=c.map(function(d){return Math.round(d+i-i)}).sort(function(d,f){return d-f});i!==u[0]&&u.unshift(0);var A=u.map(function(d,f){var h=!u[f+1],m=h?i+a-d:u[f+1]-d;if(m<=0)return null;var g=f%r.length;return ie.createElement("rect",{key:"react-".concat(f),x:d,y:o,width:m,height:l,stroke:"none",fill:r[g],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return ie.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},A)}var g0t=function(e,n){var r=e.xAxis,s=e.width,i=e.height,o=e.offset;return tse(HP(Rs(Rs(Rs({},km.defaultProps),r),{},{ticks:rc(r,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,n)},y0t=function(e,n){var r=e.yAxis,s=e.width,i=e.height,o=e.offset;return tse(HP(Rs(Rs(Rs({},km.defaultProps),r),{},{ticks:rc(r,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,n)},Wf={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Vg(t){var e,n,r,s,i,o,a=jP(),l=LP(),c=iyt(),u=Rs(Rs({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Wf.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Wf.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Wf.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:Wf.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:Wf.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Wf.verticalFill,x:je(t.x)?t.x:c.left,y:je(t.y)?t.y:c.top,width:je(t.width)?t.width:c.width,height:je(t.height)?t.height:c.height}),A=u.x,d=u.y,f=u.width,h=u.height,m=u.syncWithTicks,g=u.horizontalValues,y=u.verticalValues,x=nyt(),v=ryt();if(!je(f)||f<=0||!je(h)||h<=0||!je(A)||A!==+A||!je(d)||d!==+d)return null;var b=u.verticalCoordinatesGenerator||g0t,w=u.horizontalCoordinatesGenerator||y0t,C=u.horizontalPoints,B=u.verticalPoints;if((!C||!C.length)&&xt(w)){var S=g&&g.length,N=w({yAxis:v?Rs(Rs({},v),{},{ticks:S?g:v.ticks}):void 0,width:a,height:l,offset:c},S?!0:m);cc(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(of(N),"]")),Array.isArray(N)&&(C=N)}if((!B||!B.length)&&xt(b)){var k=y&&y.length,O=b({xAxis:x?Rs(Rs({},x),{},{ticks:k?y:x.ticks}):void 0,width:a,height:l,offset:c},k?!0:m);cc(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(of(O),"]")),Array.isArray(O)&&(B=O)}return ie.createElement("g",{className:"recharts-cartesian-grid"},ie.createElement(d0t,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),ie.createElement(f0t,dd({},u,{offset:c,horizontalPoints:C,xAxis:x,yAxis:v})),ie.createElement(h0t,dd({},u,{offset:c,verticalPoints:B,xAxis:x,yAxis:v})),ie.createElement(p0t,dd({},u,{horizontalPoints:C})),ie.createElement(m0t,dd({},u,{verticalPoints:B})))}Vg.displayName="CartesianGrid";function jp(t){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jp(t)}function x0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v0t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lie(r.key),r)}}function b0t(t,e,n){return e&&v0t(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function w0t(t,e,n){return e=kC(e),C0t(t,oie()?Reflect.construct(e,n||[],kC(t).constructor):e.apply(t,n))}function C0t(t,e){if(e&&(jp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S0t(t)}function S0t(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oie=function(){return!!t})()}function kC(t){return kC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kC(t)}function B0t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RF(t,e)}function RF(t,e){return RF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},RF(t,e)}function aie(t,e,n){return e=lie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lie(t){var e=N0t(t,"string");return jp(e)=="symbol"?e:e+""}function N0t(t,e){if(jp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function PF(){return PF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PF.apply(this,arguments)}function E0t(t){var e=t.xAxisId,n=jP(),r=LP(),s=Kse(e);return s==null?null:Q.createElement(km,PF({},s,{className:It("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return rc(o,!0)}}))}var fd=function(t){function e(){return x0t(this,e),w0t(this,e,arguments)}return B0t(e,t),b0t(e,[{key:"render",value:function(){return Q.createElement(E0t,this.props)}}])}(Q.Component);aie(fd,"displayName","XAxis");aie(fd,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Lp(t){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lp(t)}function I0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k0t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Aie(r.key),r)}}function T0t(t,e,n){return e&&k0t(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function F0t(t,e,n){return e=TC(e),$0t(t,cie()?Reflect.construct(e,n||[],TC(t).constructor):e.apply(t,n))}function $0t(t,e){if(e&&(Lp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _0t(t)}function _0t(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cie=function(){return!!t})()}function TC(t){return TC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},TC(t)}function O0t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UF(t,e)}function UF(t,e){return UF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},UF(t,e)}function uie(t,e,n){return e=Aie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aie(t){var e=D0t(t,"string");return Lp(e)=="symbol"?e:e+""}function D0t(t,e){if(Lp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function jF(){return jF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jF.apply(this,arguments)}var R0t=function(e){var n=e.yAxisId,r=jP(),s=LP(),i=Xse(n);return i==null?null:Q.createElement(km,jF({},i,{className:It("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(a){return rc(a,!0)}}))},hd=function(t){function e(){return I0t(this,e),F0t(this,e,arguments)}return O0t(e,t),T0t(e,[{key:"render",value:function(){return Q.createElement(R0t,this.props)}}])}(Q.Component);uie(hd,"displayName","YAxis");uie(hd,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function V7(t){return L0t(t)||j0t(t)||U0t(t)||P0t()}function P0t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U0t(t,e){if(t){if(typeof t=="string")return LF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LF(t,e)}}function j0t(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function L0t(t){if(Array.isArray(t))return LF(t)}function LF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var MF=function(e,n,r,s,i){var o=Sa(e,QP),a=Sa(e,tN),l=[].concat(V7(o),V7(a)),c=Sa(e,rN),u="".concat(s,"Id"),A=s[0],d=n;if(l.length&&(d=l.reduce(function(m,g){if(g.props[u]===r&&pl(g.props,"extendDomain")&&je(g.props[A])){var y=g.props[A];return[Math.min(m[0],y),Math.max(m[1],y)]}return m},d)),c.length){var f="".concat(A,"1"),h="".concat(A,"2");d=c.reduce(function(m,g){if(g.props[u]===r&&pl(g.props,"extendDomain")&&je(g.props[f])&&je(g.props[h])){var y=g.props[f],x=g.props[h];return[Math.min(m[0],y,x),Math.max(m[1],y,x)]}return m},d)}return i&&i.length&&(d=i.reduce(function(m,g){return je(g)?[Math.min(m[0],g),Math.max(m[1],g)]:m},d)),d},die={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,A,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,A||l,d),h=n?n+c:c;return l._events[h]?l._events[h].fn?l._events[h]=[l._events[h],f]:l._events[h].push(f):(l._events[h]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,A;if(this._eventsCount===0)return c;for(A in u=this._events)e.call(u,A)&&c.push(n?A.slice(1):A);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,A=this._events[u];if(!A)return[];if(A.fn)return[A.fn];for(var d=0,f=A.length,h=new Array(f);d<f;d++)h[d]=A[d].fn;return h},a.prototype.listenerCount=function(c){var u=n?n+c:c,A=this._events[u];return A?A.fn?1:A.length:0},a.prototype.emit=function(c,u,A,d,f,h){var m=n?n+c:c;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,x,v;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,A),!0;case 4:return g.fn.call(g.context,u,A,d),!0;case 5:return g.fn.call(g.context,u,A,d,f),!0;case 6:return g.fn.call(g.context,u,A,d,f,h),!0}for(v=1,x=new Array(y-1);v<y;v++)x[v-1]=arguments[v];g.fn.apply(g.context,x)}else{var b=g.length,w;for(v=0;v<b;v++)switch(g[v].once&&this.removeListener(c,g[v].fn,void 0,!0),y){case 1:g[v].fn.call(g[v].context);break;case 2:g[v].fn.call(g[v].context,u);break;case 3:g[v].fn.call(g[v].context,u,A);break;case 4:g[v].fn.call(g[v].context,u,A,d);break;default:if(!x)for(w=1,x=new Array(y-1);w<y;w++)x[w-1]=arguments[w];g[v].fn.apply(g[v].context,x)}}return!0},a.prototype.on=function(c,u,A){return i(this,c,u,A,!1)},a.prototype.once=function(c,u,A){return i(this,c,u,A,!0)},a.prototype.removeListener=function(c,u,A,d){var f=n?n+c:c;if(!this._events[f])return this;if(!u)return o(this,f),this;var h=this._events[f];if(h.fn)h.fn===u&&(!d||h.once)&&(!A||h.context===A)&&o(this,f);else{for(var m=0,g=[],y=h.length;m<y;m++)(h[m].fn!==u||d&&!h[m].once||A&&h[m].context!==A)&&g.push(h[m]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(die);var M0t=die.exports;const Q0t=Gt(M0t);var kE=new Q0t,TE="recharts.syncMouseEvents";function V0(t){"@babel/helpers - typeof";return V0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V0(t)}function H0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z0t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fie(r.key),r)}}function V0t(t,e,n){return e&&z0t(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function FE(t,e,n){return e=fie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fie(t){var e=W0t(t,"string");return V0(e)=="symbol"?e:e+""}function W0t(t,e){if(V0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(V0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var G0t=function(){function t(){H0t(this,t),FE(this,"activeIndex",0),FE(this,"coordinateList",[]),FE(this,"layout","horizontal")}return V0t(t,[{key:"setDetails",value:function(n){var r,s=n.coordinateList,i=s===void 0?null:s,o=n.container,a=o===void 0?null:o,l=n.layout,c=l===void 0?null:l,u=n.offset,A=u===void 0?null:u,d=n.mouseHandlerCallback,f=d===void 0?null:d;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=c??this.layout,this.offset=A??this.offset,this.mouseHandlerCallback=f??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,a=s.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,A=i+l+c,d=o+this.offset.top+a/2+u;this.mouseHandlerCallback({pageX:A,pageY:d})}}}])}();function K0t(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],s=t==null?void 0:t[1];if(r&&s&&je(r)&&je(s))return!0}return!1}function X0t(t,e,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-s,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function hie(t){var e=t.cx,n=t.cy,r=t.radius,s=t.startAngle,i=t.endAngle,o=pn(e,n,r,s),a=pn(e,n,r,i);return{points:[o,a],cx:e,cy:n,radius:r,startAngle:s,endAngle:i}}function q0t(t,e,n){var r,s,i,o;if(t==="horizontal")r=e.x,i=r,s=n.top,o=n.top+n.height;else if(t==="vertical")s=e.y,o=s,r=n.left,i=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,A=e.angle,d=pn(a,l,c,A),f=pn(a,l,u,A);r=d.x,s=d.y,i=f.x,o=f.y}else return hie(e);return[{x:r,y:s},{x:i,y:o}]}function W0(t){"@babel/helpers - typeof";return W0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W0(t)}function W7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $b(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W7(Object(n),!0).forEach(function(r){Y0t(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Y0t(t,e,n){return e=J0t(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J0t(t){var e=Z0t(t,"string");return W0(e)=="symbol"?e:e+""}function Z0t(t,e){if(W0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(W0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ext(t){var e,n,r=t.element,s=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,a=t.activePayload,l=t.offset,c=t.activeTooltipIndex,u=t.tooltipAxisBandSize,A=t.layout,d=t.chartName,f=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!f||!i||!o||d!=="ScatterChart"&&s!=="axis")return null;var h,m=$H;if(d==="ScatterChart")h=o,m=dht;else if(d==="BarChart")h=X0t(A,o,l,u),m=DP;else if(A==="radial"){var g=hie(o),y=g.cx,x=g.cy,v=g.radius,b=g.startAngle,w=g.endAngle;h={cx:y,cy:x,startAngle:b,endAngle:w,innerRadius:v,outerRadius:v},m=dse}else h={points:q0t(A,o,l)},m=$H;var C=$b($b($b($b({stroke:"#ccc",pointerEvents:"none"},l),h),ut(f,!1)),{},{payload:a,payloadIndex:c,className:It("recharts-tooltip-cursor",f.className)});return Q.isValidElement(f)?Q.cloneElement(f,C):Q.createElement(m,C)}var txt=["item"],nxt=["children","className","width","height","style","compact","title","desc"];function Mp(t){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mp(t)}function gh(){return gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gh.apply(this,arguments)}function G7(t,e){return ixt(t)||sxt(t,e)||mie(t,e)||rxt()}function rxt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sxt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function ixt(t){if(Array.isArray(t))return t}function K7(t,e){if(t==null)return{};var n=oxt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function oxt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function axt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lxt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gie(r.key),r)}}function cxt(t,e,n){return e&&lxt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uxt(t,e,n){return e=FC(e),Axt(t,pie()?Reflect.construct(e,n||[],FC(t).constructor):e.apply(t,n))}function Axt(t,e){if(e&&(Mp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dxt(t)}function dxt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pie=function(){return!!t})()}function FC(t){return FC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},FC(t)}function fxt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QF(t,e)}function QF(t,e){return QF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},QF(t,e)}function Qp(t){return mxt(t)||pxt(t)||mie(t)||hxt()}function hxt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mie(t,e){if(t){if(typeof t=="string")return HF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HF(t,e)}}function pxt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mxt(t){if(Array.isArray(t))return HF(t)}function HF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function X7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function we(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X7(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lt(t,e,n){return e=gie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gie(t){var e=gxt(t,"string");return Mp(e)=="symbol"?e:e+""}function gxt(t,e){if(Mp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yxt={xAxis:["bottom","top"],yAxis:["left","right"]},xxt={width:"100%",height:"100%"},yie={x:0,y:0};function _b(t){return t}var vxt=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},bxt=function(e,n,r,s){var i=n.find(function(u){return u&&u.index===r});if(i){if(e==="horizontal")return{x:i.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,a=s.radius;return we(we(we({},s),pn(s.cx,s.cy,a,o)),{},{angle:o,radius:a})}var l=i.coordinate,c=s.angle;return we(we(we({},s),pn(s.cx,s.cy,l,c)),{},{angle:c,radius:l})}return yie},sN=function(e,n){var r=n.graphicalItems,s=n.dataStartIndex,i=n.dataEndIndex,o=(r??[]).reduce(function(a,l){var c=l.props.data;return c&&c.length?[].concat(Qp(a),Qp(c)):a},[]);return o.length>0?o:e&&e.length&&je(s)&&je(i)?e.slice(s,i+1):[]};function xie(t){return t==="number"?[0,"auto"]:void 0}var zF=function(e,n,r,s){var i=e.graphicalItems,o=e.tooltipAxis,a=sN(n,e);return r<0||!i||!i.length||r>=a.length?null:i.reduce(function(l,c){var u,A=(u=c.props.data)!==null&&u!==void 0?u:n;A&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(A=A.slice(e.dataStartIndex,e.dataEndIndex+1));var d;if(o.dataKey&&!o.allowDuplicatedCategory){var f=A===void 0?a:A;d=xT(f,o.dataKey,s)}else d=A&&A[r]||a[r];return d?[].concat(Qp(l),[ose(c,d)]):l},[])},q7=function(e,n,r,s){var i=s||{x:e.chartX,y:e.chartY},o=vxt(i,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=Rut(o,a,c,l);if(u>=0&&c){var A=c[u]&&c[u].value,d=zF(e,n,u,A),f=bxt(r,a,u,i);return{activeTooltipIndex:u,activeLabel:A,activePayload:d,activeCoordinate:f}}return null},wxt=function(e,n){var r=n.axes,s=n.graphicalItems,i=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,A=e.children,d=e.stackOffset,f=ese(u,i);return r.reduce(function(h,m){var g,y=m.type.defaultProps!==void 0?we(we({},m.type.defaultProps),m.props):m.props,x=y.type,v=y.dataKey,b=y.allowDataOverflow,w=y.allowDuplicatedCategory,C=y.scale,B=y.ticks,S=y.includeHidden,N=y[o];if(h[N])return h;var k=sN(e.data,{graphicalItems:s.filter(function(J){var ae,ue=o in J.props?J.props[o]:(ae=J.type.defaultProps)===null||ae===void 0?void 0:ae[o];return ue===N}),dataStartIndex:l,dataEndIndex:c}),O=k.length,U,P,V;K0t(y.domain,b,x)&&(U=oF(y.domain,null,b),f&&(x==="number"||C!=="auto")&&(V=fy(k,v,"category")));var W=xie(x);if(!U||U.length===0){var L,G=(L=y.domain)!==null&&L!==void 0?L:W;if(v){if(U=fy(k,v,x),x==="category"&&f){var _=SXe(U);w&&_?(P=U,U=xC(0,O)):w||(U=xH(G,U,m).reduce(function(J,ae){return J.indexOf(ae)>=0?J:[].concat(Qp(J),[ae])},[]))}else if(x==="category")w?U=U.filter(function(J){return J!==""&&!Ht(J)}):U=xH(G,U,m).reduce(function(J,ae){return J.indexOf(ae)>=0||ae===""||Ht(ae)?J:[].concat(Qp(J),[ae])},[]);else if(x==="number"){var j=Mut(k,s.filter(function(J){var ae,ue,le=o in J.props?J.props[o]:(ae=J.type.defaultProps)===null||ae===void 0?void 0:ae[o],fe="hide"in J.props?J.props.hide:(ue=J.type.defaultProps)===null||ue===void 0?void 0:ue.hide;return le===N&&(S||!fe)}),v,i,u);j&&(U=j)}f&&(x==="number"||C!=="auto")&&(V=fy(k,v,"category"))}else f?U=xC(0,O):a&&a[N]&&a[N].hasStack&&x==="number"?U=d==="expand"?[0,1]:ise(a[N].stackGroups,l,c):U=Zre(k,s.filter(function(J){var ae=o in J.props?J.props[o]:J.type.defaultProps[o],ue="hide"in J.props?J.props.hide:J.type.defaultProps.hide;return ae===N&&(S||!ue)}),x,u,!0);if(x==="number")U=MF(A,U,N,i,B),G&&(U=oF(G,U,b));else if(x==="category"&&G){var K=G,Y=U.every(function(J){return K.indexOf(J)>=0});Y&&(U=K)}}return we(we({},h),{},lt({},N,we(we({},y),{},{axisType:i,domain:U,categoricalDomain:V,duplicateDomain:P,originalDomain:(g=y.domain)!==null&&g!==void 0?g:W,isCategorical:f,layout:u})))},{})},Cxt=function(e,n){var r=n.graphicalItems,s=n.Axis,i=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,A=e.children,d=sN(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),f=d.length,h=ese(u,i),m=-1;return r.reduce(function(g,y){var x=y.type.defaultProps!==void 0?we(we({},y.type.defaultProps),y.props):y.props,v=x[o],b=xie("number");if(!g[v]){m++;var w;return h?w=xC(0,f):a&&a[v]&&a[v].hasStack?(w=ise(a[v].stackGroups,l,c),w=MF(A,w,v,i)):(w=oF(b,Zre(d,r.filter(function(C){var B,S,N=o in C.props?C.props[o]:(B=C.type.defaultProps)===null||B===void 0?void 0:B[o],k="hide"in C.props?C.props.hide:(S=C.type.defaultProps)===null||S===void 0?void 0:S.hide;return N===v&&!k}),"number",u),s.defaultProps.allowDataOverflow),w=MF(A,w,v,i)),we(we({},g),{},lt({},v,we(we({axisType:i},s.defaultProps),{},{hide:!0,orientation:Lo(yxt,"".concat(i,".").concat(m%2),null),domain:w,originalDomain:b,isCategorical:h,layout:u})))}return g},{})},Sxt=function(e,n){var r=n.axisType,s=r===void 0?"xAxis":r,i=n.AxisComp,o=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.children,A="".concat(s,"Id"),d=Sa(u,i),f={};return d&&d.length?f=wxt(e,{axes:d,graphicalItems:o,axisType:s,axisIdKey:A,stackGroups:a,dataStartIndex:l,dataEndIndex:c}):o&&o.length&&(f=Cxt(e,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:A,stackGroups:a,dataStartIndex:l,dataEndIndex:c})),f},Bxt=function(e){var n=nu(e),r=rc(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:lP(r,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:oC(n,r)}},Y7=function(e){var n=e.children,r=e.defaultShowTooltip,s=qi(n,_p),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},Nxt=function(e){return!e||!e.length?!1:e.some(function(n){var r=lc(n&&n.type);return r&&r.indexOf("Bar")>=0})},J7=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Ext=function(e,n){var r=e.props,s=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,a=e.yAxisMap,l=a===void 0?{}:a,c=r.width,u=r.height,A=r.children,d=r.margin||{},f=qi(A,_p),h=qi(A,ha),m=Object.keys(l).reduce(function(w,C){var B=l[C],S=B.orientation;return!B.mirror&&!B.hide?we(we({},w),{},lt({},S,w[S]+B.width)):w},{left:d.left||0,right:d.right||0}),g=Object.keys(o).reduce(function(w,C){var B=o[C],S=B.orientation;return!B.mirror&&!B.hide?we(we({},w),{},lt({},S,Lo(w,"".concat(S))+B.height)):w},{top:d.top||0,bottom:d.bottom||0}),y=we(we({},g),m),x=y.bottom;f&&(y.bottom+=f.props.height||_p.defaultProps.height),h&&n&&(y=jut(y,s,r,n));var v=c-y.left-y.right,b=u-y.top-y.bottom;return we(we({brushBottom:x},y),{},{width:Math.max(v,0),height:Math.max(b,0)})},Ixt=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},vie=function(e){var n=e.chartName,r=e.GraphicalChild,s=e.defaultTooltipEventType,i=s===void 0?"axis":s,o=e.validateTooltipEventTypes,a=o===void 0?["axis"]:o,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,A=e.defaultProps,d=function(y,x){var v=x.graphicalItems,b=x.stackGroups,w=x.offset,C=x.updateId,B=x.dataStartIndex,S=x.dataEndIndex,N=y.barSize,k=y.layout,O=y.barGap,U=y.barCategoryGap,P=y.maxBarSize,V=J7(k),W=V.numericAxisName,L=V.cateAxisName,G=Nxt(v),_=[];return v.forEach(function(j,K){var Y=sN(y.data,{graphicalItems:[j],dataStartIndex:B,dataEndIndex:S}),J=j.type.defaultProps!==void 0?we(we({},j.type.defaultProps),j.props):j.props,ae=J.dataKey,ue=J.maxBarSize,le=J["".concat(W,"Id")],fe=J["".concat(L,"Id")],Ie={},Re=l.reduce(function(Dt,rn){var As=x["".concat(rn.axisType,"Map")],yr=J["".concat(rn.axisType,"Id")];As&&As[yr]||rn.axisType==="zAxis"||sf();var Zn=As[yr];return we(we({},Dt),{},lt(lt({},rn.axisType,Zn),"".concat(rn.axisType,"Ticks"),rc(Zn)))},Ie),ge=Re[L],$e=Re["".concat(L,"Ticks")],Te=b&&b[le]&&b[le].hasStack&&qut(j,b[le].stackGroups),be=lc(j.type).indexOf("Bar")>=0,it=oC(ge,$e),et=[],st=G&&Put({barSize:N,stackGroups:b,totalSize:Ixt(Re,L)});if(be){var rt,ht,dt=Ht(ue)?P:ue,cn=(rt=(ht=oC(ge,$e,!0))!==null&&ht!==void 0?ht:dt)!==null&&rt!==void 0?rt:0;et=Uut({barGap:O,barCategoryGap:U,bandSize:cn!==it?cn:it,sizeList:st[fe],maxBarSize:dt}),cn!==it&&(et=et.map(function(Dt){return we(we({},Dt),{},{position:we(we({},Dt.position),{},{offset:Dt.position.offset-cn/2})})}))}var Yt=j&&j.type&&j.type.getComposedData;Yt&&_.push({props:we(we({},Yt(we(we({},Re),{},{displayedData:Y,props:y,dataKey:ae,item:j,bandSize:it,barPosition:et,offset:w,stackedData:Te,layout:k,dataStartIndex:B,dataEndIndex:S}))),{},lt(lt(lt({key:j.key||"item-".concat(K)},W,Re[W]),L,Re[L]),"animationId",C)),childIndex:RXe(j,y.children),item:j})}),_},f=function(y,x){var v=y.props,b=y.dataStartIndex,w=y.dataEndIndex,C=y.updateId;if(!fQ({props:v}))return null;var B=v.children,S=v.layout,N=v.stackOffset,k=v.data,O=v.reverseStackOrder,U=J7(S),P=U.numericAxisName,V=U.cateAxisName,W=Sa(B,r),L=Kut(k,W,"".concat(P,"Id"),"".concat(V,"Id"),N,O),G=l.reduce(function(J,ae){var ue="".concat(ae.axisType,"Map");return we(we({},J),{},lt({},ue,Sxt(v,we(we({},ae),{},{graphicalItems:W,stackGroups:ae.axisType===P&&L,dataStartIndex:b,dataEndIndex:w}))))},{}),_=Ext(we(we({},G),{},{props:v,graphicalItems:W}),x==null?void 0:x.legendBBox);Object.keys(G).forEach(function(J){G[J]=u(v,G[J],_,J.replace("Map",""),n)});var j=G["".concat(V,"Map")],K=Bxt(j),Y=d(v,we(we({},G),{},{dataStartIndex:b,dataEndIndex:w,updateId:C,graphicalItems:W,stackGroups:L,offset:_}));return we(we({formattedGraphicalItems:Y,graphicalItems:W,offset:_,stackGroups:L},K),G)},h=function(g){function y(x){var v,b,w;return axt(this,y),w=uxt(this,y,[x]),lt(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),lt(w,"accessibilityManager",new G0t),lt(w,"handleLegendBBoxUpdate",function(C){if(C){var B=w.state,S=B.dataStartIndex,N=B.dataEndIndex,k=B.updateId;w.setState(we({legendBBox:C},f({props:w.props,dataStartIndex:S,dataEndIndex:N,updateId:k},we(we({},w.state),{},{legendBBox:C}))))}}),lt(w,"handleReceiveSyncEvent",function(C,B,S){if(w.props.syncId===C){if(S===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(B)}}),lt(w,"handleBrushChange",function(C){var B=C.startIndex,S=C.endIndex;if(B!==w.state.dataStartIndex||S!==w.state.dataEndIndex){var N=w.state.updateId;w.setState(function(){return we({dataStartIndex:B,dataEndIndex:S},f({props:w.props,dataStartIndex:B,dataEndIndex:S,updateId:N},w.state))}),w.triggerSyncEvent({dataStartIndex:B,dataEndIndex:S})}}),lt(w,"handleMouseEnter",function(C){var B=w.getMouseInfo(C);if(B){var S=we(we({},B),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var N=w.props.onMouseEnter;xt(N)&&N(S,C)}}),lt(w,"triggeredAfterMouseMove",function(C){var B=w.getMouseInfo(C),S=B?we(we({},B),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(S),w.triggerSyncEvent(S);var N=w.props.onMouseMove;xt(N)&&N(S,C)}),lt(w,"handleItemMouseEnter",function(C){w.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),lt(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),lt(w,"handleMouseMove",function(C){C.persist(),w.throttleTriggeredAfterMouseMove(C)}),lt(w,"handleMouseLeave",function(C){w.throttleTriggeredAfterMouseMove.cancel();var B={isTooltipActive:!1};w.setState(B),w.triggerSyncEvent(B);var S=w.props.onMouseLeave;xt(S)&&S(B,C)}),lt(w,"handleOuterEvent",function(C){var B=DXe(C),S=Lo(w.props,"".concat(B));if(B&&xt(S)){var N,k;/.*touch.*/i.test(B)?k=w.getMouseInfo(C.changedTouches[0]):k=w.getMouseInfo(C),S((N=k)!==null&&N!==void 0?N:{},C)}}),lt(w,"handleClick",function(C){var B=w.getMouseInfo(C);if(B){var S=we(we({},B),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var N=w.props.onClick;xt(N)&&N(S,C)}}),lt(w,"handleMouseDown",function(C){var B=w.props.onMouseDown;if(xt(B)){var S=w.getMouseInfo(C);B(S,C)}}),lt(w,"handleMouseUp",function(C){var B=w.props.onMouseUp;if(xt(B)){var S=w.getMouseInfo(C);B(S,C)}}),lt(w,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),lt(w,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.handleMouseDown(C.changedTouches[0])}),lt(w,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.handleMouseUp(C.changedTouches[0])}),lt(w,"handleDoubleClick",function(C){var B=w.props.onDoubleClick;if(xt(B)){var S=w.getMouseInfo(C);B(S,C)}}),lt(w,"handleContextMenu",function(C){var B=w.props.onContextMenu;if(xt(B)){var S=w.getMouseInfo(C);B(S,C)}}),lt(w,"triggerSyncEvent",function(C){w.props.syncId!==void 0&&kE.emit(TE,w.props.syncId,C,w.eventEmitterSymbol)}),lt(w,"applySyncEvent",function(C){var B=w.props,S=B.layout,N=B.syncMethod,k=w.state.updateId,O=C.dataStartIndex,U=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)w.setState(we({dataStartIndex:O,dataEndIndex:U},f({props:w.props,dataStartIndex:O,dataEndIndex:U,updateId:k},w.state)));else if(C.activeTooltipIndex!==void 0){var P=C.chartX,V=C.chartY,W=C.activeTooltipIndex,L=w.state,G=L.offset,_=L.tooltipTicks;if(!G)return;if(typeof N=="function")W=N(_,C);else if(N==="value"){W=-1;for(var j=0;j<_.length;j++)if(_[j].value===C.activeLabel){W=j;break}}var K=we(we({},G),{},{x:G.left,y:G.top}),Y=Math.min(P,K.x+K.width),J=Math.min(V,K.y+K.height),ae=_[W]&&_[W].value,ue=zF(w.state,w.props.data,W),le=_[W]?{x:S==="horizontal"?_[W].coordinate:Y,y:S==="horizontal"?J:_[W].coordinate}:yie;w.setState(we(we({},C),{},{activeLabel:ae,activeCoordinate:le,activePayload:ue,activeTooltipIndex:W}))}else w.setState(C)}),lt(w,"renderCursor",function(C){var B,S=w.state,N=S.isTooltipActive,k=S.activeCoordinate,O=S.activePayload,U=S.offset,P=S.activeTooltipIndex,V=S.tooltipAxisBandSize,W=w.getTooltipEventType(),L=(B=C.props.active)!==null&&B!==void 0?B:N,G=w.props.layout,_=C.key||"_recharts-cursor";return ie.createElement(ext,{key:_,activeCoordinate:k,activePayload:O,activeTooltipIndex:P,chartName:n,element:C,isActive:L,layout:G,offset:U,tooltipAxisBandSize:V,tooltipEventType:W})}),lt(w,"renderPolarAxis",function(C,B,S){var N=Lo(C,"type.axisType"),k=Lo(w.state,"".concat(N,"Map")),O=C.type.defaultProps,U=O!==void 0?we(we({},O),C.props):C.props,P=k&&k[U["".concat(N,"Id")]];return Q.cloneElement(C,we(we({},P),{},{className:It(N,P.className),key:C.key||"".concat(B,"-").concat(S),ticks:rc(P,!0)}))}),lt(w,"renderPolarGrid",function(C){var B=C.props,S=B.radialLines,N=B.polarAngles,k=B.polarRadius,O=w.state,U=O.radiusAxisMap,P=O.angleAxisMap,V=nu(U),W=nu(P),L=W.cx,G=W.cy,_=W.innerRadius,j=W.outerRadius;return Q.cloneElement(C,{polarAngles:Array.isArray(N)?N:rc(W,!0).map(function(K){return K.coordinate}),polarRadius:Array.isArray(k)?k:rc(V,!0).map(function(K){return K.coordinate}),cx:L,cy:G,innerRadius:_,outerRadius:j,key:C.key||"polar-grid",radialLines:S})}),lt(w,"renderLegend",function(){var C=w.state.formattedGraphicalItems,B=w.props,S=B.children,N=B.width,k=B.height,O=w.props.margin||{},U=N-(O.left||0)-(O.right||0),P=Yre({children:S,formattedGraphicalItems:C,legendWidth:U,legendContent:c});if(!P)return null;var V=P.item,W=K7(P,txt);return Q.cloneElement(V,we(we({},W),{},{chartWidth:N,chartHeight:k,margin:O,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),lt(w,"renderTooltip",function(){var C,B=w.props,S=B.children,N=B.accessibilityLayer,k=qi(S,xi);if(!k)return null;var O=w.state,U=O.isTooltipActive,P=O.activeCoordinate,V=O.activePayload,W=O.activeLabel,L=O.offset,G=(C=k.props.active)!==null&&C!==void 0?C:U;return Q.cloneElement(k,{viewBox:we(we({},L),{},{x:L.left,y:L.top}),active:G,label:W,payload:G?V:[],coordinate:P,accessibilityLayer:N})}),lt(w,"renderBrush",function(C){var B=w.props,S=B.margin,N=B.data,k=w.state,O=k.offset,U=k.dataStartIndex,P=k.dataEndIndex,V=k.updateId;return Q.cloneElement(C,{key:C.key||"_recharts-brush",onChange:Ib(w.handleBrushChange,C.props.onChange),data:N,x:je(C.props.x)?C.props.x:O.left,y:je(C.props.y)?C.props.y:O.top+O.height+O.brushBottom-(S.bottom||0),width:je(C.props.width)?C.props.width:O.width,startIndex:U,endIndex:P,updateId:"brush-".concat(V)})}),lt(w,"renderReferenceElement",function(C,B,S){if(!C)return null;var N=w,k=N.clipPathId,O=w.state,U=O.xAxisMap,P=O.yAxisMap,V=O.offset,W=C.type.defaultProps||{},L=C.props,G=L.xAxisId,_=G===void 0?W.xAxisId:G,j=L.yAxisId,K=j===void 0?W.yAxisId:j;return Q.cloneElement(C,{key:C.key||"".concat(B,"-").concat(S),xAxis:U[_],yAxis:P[K],viewBox:{x:V.left,y:V.top,width:V.width,height:V.height},clipPathId:k})}),lt(w,"renderActivePoints",function(C){var B=C.item,S=C.activePoint,N=C.basePoint,k=C.childIndex,O=C.isRange,U=[],P=B.props.key,V=B.item.type.defaultProps!==void 0?we(we({},B.item.type.defaultProps),B.item.props):B.item.props,W=V.activeDot,L=V.dataKey,G=we(we({index:k,dataKey:L,cx:S.x,cy:S.y,r:4,fill:OP(B.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value},ut(W,!1)),_2(W));return U.push(y.renderActiveDot(W,G,"".concat(P,"-activePoint-").concat(k))),N?U.push(y.renderActiveDot(W,we(we({},G),{},{cx:N.x,cy:N.y}),"".concat(P,"-basePoint-").concat(k))):O&&U.push(null),U}),lt(w,"renderGraphicChild",function(C,B,S){var N=w.filterFormatItem(C,B,S);if(!N)return null;var k=w.getTooltipEventType(),O=w.state,U=O.isTooltipActive,P=O.tooltipAxis,V=O.activeTooltipIndex,W=O.activeLabel,L=w.props.children,G=qi(L,xi),_=N.props,j=_.points,K=_.isRange,Y=_.baseLine,J=N.item.type.defaultProps!==void 0?we(we({},N.item.type.defaultProps),N.item.props):N.item.props,ae=J.activeDot,ue=J.hide,le=J.activeBar,fe=J.activeShape,Ie=!!(!ue&&U&&G&&(ae||le||fe)),Re={};k!=="axis"&&G&&G.props.trigger==="click"?Re={onClick:Ib(w.handleItemMouseEnter,C.props.onClick)}:k!=="axis"&&(Re={onMouseLeave:Ib(w.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:Ib(w.handleItemMouseEnter,C.props.onMouseEnter)});var ge=Q.cloneElement(C,we(we({},N.props),Re));function $e(rn){return typeof P.dataKey=="function"?P.dataKey(rn.payload):null}if(Ie)if(V>=0){var Te,be;if(P.dataKey&&!P.allowDuplicatedCategory){var it=typeof P.dataKey=="function"?$e:"payload.".concat(P.dataKey.toString());Te=xT(j,it,W),be=K&&Y&&xT(Y,it,W)}else Te=j==null?void 0:j[V],be=K&&Y&&Y[V];if(fe||le){var et=C.props.activeIndex!==void 0?C.props.activeIndex:V;return[Q.cloneElement(C,we(we(we({},N.props),Re),{},{activeIndex:et})),null,null]}if(!Ht(Te))return[ge].concat(Qp(w.renderActivePoints({item:N,activePoint:Te,basePoint:be,childIndex:V,isRange:K})))}else{var st,rt=(st=w.getItemByXY(w.state.activeCoordinate))!==null&&st!==void 0?st:{graphicalItem:ge},ht=rt.graphicalItem,dt=ht.item,cn=dt===void 0?C:dt,Yt=ht.childIndex,Dt=we(we(we({},N.props),Re),{},{activeIndex:Yt});return[Q.cloneElement(cn,Dt),null,null]}return K?[ge,null,null]:[ge,null]}),lt(w,"renderCustomized",function(C,B,S){return Q.cloneElement(C,we(we({key:"recharts-customized-".concat(S)},w.props),w.state))}),lt(w,"renderMap",{CartesianGrid:{handler:_b,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:_b},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:_b},YAxis:{handler:_b},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((v=x.id)!==null&&v!==void 0?v:E3("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=Xne(w.triggeredAfterMouseMove,(b=x.throttleDelay)!==null&&b!==void 0?b:1e3/60),w.state={},w}return fxt(y,g),cxt(y,[{key:"componentDidMount",value:function(){var v,b;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(b=this.props.margin.top)!==null&&b!==void 0?b:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var v=this.props,b=v.children,w=v.data,C=v.height,B=v.layout,S=qi(b,xi);if(S){var N=S.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var k=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,O=zF(this.state,w,N,k),U=this.state.tooltipTicks[N].coordinate,P=(this.state.offset.top+C)/2,V=B==="horizontal",W=V?{x:U,y:P}:{y:U,x:P},L=this.state.formattedGraphicalItems.find(function(_){var j=_.item;return j.type.name==="Scatter"});L&&(W=we(we({},W),L.props.points[N].tooltipPosition),O=L.props.points[N].tooltipPayload);var G={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:k,activePayload:O,activeCoordinate:W};this.setState(G),this.renderCursor(S),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(v,b){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==b.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==v.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==v.margin){var w,C;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(v){bT([qi(v.children,xi)],[qi(this.props.children,xi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var v=qi(this.props.children,xi);if(v&&typeof v.props.shared=="boolean"){var b=v.props.shared?"axis":"item";return a.indexOf(b)>=0?b:i}return i}},{key:"getMouseInfo",value:function(v){if(!this.container)return null;var b=this.container,w=b.getBoundingClientRect(),C=uot(w),B={chartX:Math.round(v.pageX-C.left),chartY:Math.round(v.pageY-C.top)},S=w.width/b.offsetWidth||1,N=this.inRange(B.chartX,B.chartY,S);if(!N)return null;var k=this.state,O=k.xAxisMap,U=k.yAxisMap,P=this.getTooltipEventType(),V=q7(this.state,this.props.data,this.props.layout,N);if(P!=="axis"&&O&&U){var W=nu(O).scale,L=nu(U).scale,G=W&&W.invert?W.invert(B.chartX):null,_=L&&L.invert?L.invert(B.chartY):null;return we(we({},B),{},{xValue:G,yValue:_},V)}return V?we(we({},B),V):null}},{key:"inRange",value:function(v,b){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,B=v/w,S=b/w;if(C==="horizontal"||C==="vertical"){var N=this.state.offset,k=B>=N.left&&B<=N.left+N.width&&S>=N.top&&S<=N.top+N.height;return k?{x:B,y:S}:null}var O=this.state,U=O.angleAxisMap,P=O.radiusAxisMap;if(U&&P){var V=nu(U);return wH({x:B,y:S},V)}return null}},{key:"parseEventsOfWrapper",value:function(){var v=this.props.children,b=this.getTooltipEventType(),w=qi(v,xi),C={};w&&b==="axis"&&(w.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var B=_2(this.props,this.handleOuterEvent);return we(we({},B),C)}},{key:"addListener",value:function(){kE.on(TE,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){kE.removeListener(TE,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(v,b,w){for(var C=this.state.formattedGraphicalItems,B=0,S=C.length;B<S;B++){var N=C[B];if(N.item===v||N.props.key===v.key||b===lc(N.item.type)&&w===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var v=this.clipPathId,b=this.state.offset,w=b.left,C=b.top,B=b.height,S=b.width;return ie.createElement("defs",null,ie.createElement("clipPath",{id:v},ie.createElement("rect",{x:w,y:C,height:B,width:S})))}},{key:"getXScales",value:function(){var v=this.state.xAxisMap;return v?Object.entries(v).reduce(function(b,w){var C=G7(w,2),B=C[0],S=C[1];return we(we({},b),{},lt({},B,S.scale))},{}):null}},{key:"getYScales",value:function(){var v=this.state.yAxisMap;return v?Object.entries(v).reduce(function(b,w){var C=G7(w,2),B=C[0],S=C[1];return we(we({},b),{},lt({},B,S.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(v){var b;return(b=this.state.xAxisMap)===null||b===void 0||(b=b[v])===null||b===void 0?void 0:b.scale}},{key:"getYScaleByAxisId",value:function(v){var b;return(b=this.state.yAxisMap)===null||b===void 0||(b=b[v])===null||b===void 0?void 0:b.scale}},{key:"getItemByXY",value:function(v){var b=this.state,w=b.formattedGraphicalItems,C=b.activeItem;if(w&&w.length)for(var B=0,S=w.length;B<S;B++){var N=w[B],k=N.props,O=N.item,U=O.type.defaultProps!==void 0?we(we({},O.type.defaultProps),O.props):O.props,P=lc(O.type);if(P==="Bar"){var V=(k.data||[]).find(function(_){return Gft(v,_)});if(V)return{graphicalItem:N,payload:V}}else if(P==="RadialBar"){var W=(k.data||[]).find(function(_){return wH(v,_)});if(W)return{graphicalItem:N,payload:W}}else if(Y3(N,C)||J3(N,C)||L0(N,C)){var L=Wpt({graphicalItem:N,activeTooltipItem:C,itemData:U.data}),G=U.activeIndex===void 0?L:U.activeIndex;return{graphicalItem:we(we({},N),{},{childIndex:G}),payload:L0(N,C)?U.data[L]:N.props.data[L]}}}return null}},{key:"render",value:function(){var v=this;if(!fQ(this))return null;var b=this.props,w=b.children,C=b.className,B=b.width,S=b.height,N=b.style,k=b.compact,O=b.title,U=b.desc,P=K7(b,nxt),V=ut(P,!1);if(k)return ie.createElement($7,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ie.createElement(CT,gh({},V,{width:B,height:S,title:O,desc:U}),this.renderClipPath(),pQ(w,this.renderMap)));if(this.props.accessibilityLayer){var W,L;V.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,V.role=(L=this.props.role)!==null&&L!==void 0?L:"application",V.onKeyDown=function(_){v.accessibilityManager.keyboardEvent(_)},V.onFocus=function(){v.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return ie.createElement($7,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ie.createElement("div",gh({className:It("recharts-wrapper",C),style:we({position:"relative",cursor:"default",width:B,height:S},N)},G,{ref:function(j){v.container=j}}),ie.createElement(CT,gh({},V,{width:B,height:S,title:O,desc:U,style:xxt}),this.renderClipPath(),pQ(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(Q.Component);lt(h,"displayName",n),lt(h,"defaultProps",we({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},A)),lt(h,"getDerivedStateFromProps",function(g,y){var x=g.dataKey,v=g.data,b=g.children,w=g.width,C=g.height,B=g.layout,S=g.stackOffset,N=g.margin,k=y.dataStartIndex,O=y.dataEndIndex;if(y.updateId===void 0){var U=Y7(g);return we(we(we({},U),{},{updateId:0},f(we(we({props:g},U),{},{updateId:0}),y)),{},{prevDataKey:x,prevData:v,prevWidth:w,prevHeight:C,prevLayout:B,prevStackOffset:S,prevMargin:N,prevChildren:b})}if(x!==y.prevDataKey||v!==y.prevData||w!==y.prevWidth||C!==y.prevHeight||B!==y.prevLayout||S!==y.prevStackOffset||!Dh(N,y.prevMargin)){var P=Y7(g),V={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},W=we(we({},q7(y,v,B)),{},{updateId:y.updateId+1}),L=we(we(we({},P),V),W);return we(we(we({},L),f(we({props:g},L),y)),{},{prevDataKey:x,prevData:v,prevWidth:w,prevHeight:C,prevLayout:B,prevStackOffset:S,prevMargin:N,prevChildren:b})}if(!bT(b,y.prevChildren)){var G,_,j,K,Y=qi(b,_p),J=Y&&(G=(_=Y.props)===null||_===void 0?void 0:_.startIndex)!==null&&G!==void 0?G:k,ae=Y&&(j=(K=Y.props)===null||K===void 0?void 0:K.endIndex)!==null&&j!==void 0?j:O,ue=J!==k||ae!==O,le=!Ht(v),fe=le&&!ue?y.updateId:y.updateId+1;return we(we({updateId:fe},f(we(we({props:g},y),{},{updateId:fe,dataStartIndex:J,dataEndIndex:ae}),y)),{},{prevChildren:b,dataStartIndex:J,dataEndIndex:ae})}return null}),lt(h,"renderActiveDot",function(g,y,x){var v;return Q.isValidElement(g)?v=Q.cloneElement(g,y):xt(g)?v=g(y):v=ie.createElement(K3,y),ie.createElement(yn,{className:"recharts-active-dot",key:x},v)});var m=Q.forwardRef(function(y,x){return ie.createElement(h,gh({},y,{ref:x}))});return m.displayName=h.displayName,m},Ob=vie({chartName:"BarChart",GraphicalChild:gi,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:fd},{axisType:"yAxis",AxisComp:hd}],formatAxisMap:Fgt}),kxt=vie({chartName:"RadarChart",GraphicalChild:jv,axisComponents:[{axisType:"angleAxis",AxisComp:Uv},{axisType:"radiusAxis",AxisComp:Pv}],formatAxisMap:aAt,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Txt=()=>{const{sessionId:t}=oA(),e=is(),n=Q.useRef(null),[r,s]=Q.useState(!0),[i,o]=Q.useState(""),[a,l]=Q.useState(null),[c,u]=Q.useState(null),[A,d]=Q.useState([]),[f,h]=Q.useState(null),[m,g]=Q.useState(""),[y,x]=Q.useState(null);Q.useEffect(()=>{(async()=>{if(t)try{s(!0);const N=await _te(t);l(N.metrics),u(N.aiAnalysis),d(N.heatmapData),g(N.studentName),x(N.testDate),N.metrics.comparisonWithPeers&&h(N.metrics.comparisonWithPeers),s(!1)}catch(N){console.error("Failed to load report:",N),o("리포트를 불러오는데 실패했습니다."),s(!1)}})()},[t]),Q.useEffect(()=>{if(A.length===0||!n.current)return;const S=n.current,N=S.getContext("2d");if(!N)return;const k=A[0],{resolution:O,cells:U}=k;N.clearRect(0,0,S.width,S.height);const P=Math.max(...U.map(_=>_.intensity)),V=O.width,W=O.height,L=S.width/V,G=S.height/W;U.forEach(_=>{const j=P>0?_.intensity/P:0,K=270,Y=70,J=90-j*50;N.fillStyle=`hsl(${K}, ${Y}%, ${J}%)`,N.fillRect(_.x*L,_.y*G,L,G)}),N.strokeStyle="rgba(147, 51, 234, 0.1)",N.lineWidth=1;for(let _=0;_<=V;_++)N.beginPath(),N.moveTo(_*L,0),N.lineTo(_*L,S.height),N.stroke();for(let _=0;_<=W;_++)N.beginPath(),N.moveTo(0,_*G),N.lineTo(S.width,_*G),N.stroke()},[A]);const v=()=>a?[{name:"도약폭",value:a.averageSaccadeAmplitude,unit:"px",optimal:200},{name:"도약 변동성",value:a.saccadeVariability,unit:"px",optimal:50},{name:"도약 속도",value:a.averageSaccadeVelocity,unit:"px/s",optimal:1e3},{name:"최적 착지율",value:a.optimalLandingRate,unit:"%",optimal:70},{name:"줄바꿈 정확도",value:a.returnSweepAccuracy,unit:"%",optimal:80},{name:"경로 효율성",value:a.scanPathEfficiency*100,unit:"%",optimal:70}]:[],b=()=>a?[{name:"평균 응시시간",value:a.averageFixationDuration,unit:"ms",optimal:250},{name:"단어당 응시",value:a.fixationsPerWord,unit:"회",optimal:1.2},{name:"역행률",value:a.regressionRate,unit:"%",optimal:15},{name:"어휘 격차",value:a.vocabularyGapScore,unit:"점",optimal:30}]:[],w=()=>a?[{name:"읽기 속도",value:a.wordsPerMinute,unit:"WPM",optimal:150},{name:"리듬 규칙성",value:a.rhythmRegularity*100,unit:"%",optimal:70},{name:"체력 점수",value:a.staminaScore,unit:"점",optimal:70}]:[],C=()=>a?[{category:"도약 품질",value:a.averageSaccadeAmplitude/300*100,fullMark:100},{category:"응시 효율",value:250/a.averageFixationDuration*100,fullMark:100},{category:"읽기 속도",value:a.wordsPerMinute/200*100,fullMark:100},{category:"경로 효율",value:a.scanPathEfficiency*100,fullMark:100},{category:"이해도",value:(a.gazeComprehensionCorrelation+1)*50,fullMark:100}]:[],B=()=>{alert("PDF 내보내기 기능은 곧 추가될 예정입니다.")};return r?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),p.jsx("p",{className:"text-foreground",children:"리포트를 생성하는 중..."})]})}):i?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-destructive mb-4",children:i}),p.jsx("button",{onClick:()=>e("/student/dashboard"),className:"px-6 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90",children:"대시보드로 돌아가기"})]})}):!a||!c?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsx("p",{className:"text-foreground",children:"리포트 데이터를 찾을 수 없습니다."})}):p.jsx("div",{className:"min-h-screen bg-background py-8",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"mb-8",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Vision TEST 결과"}),p.jsxs("p",{className:"text-muted-foreground",children:[m," | ",y?new Date(y).toLocaleDateString("ko-KR"):""]})]}),p.jsx("button",{onClick:B,className:"px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:"PDF 내보내기"})]}),p.jsx("div",{className:"bg-gradient-to-br from-primary/10 to-primary/5 rounded-2xl p-8 border border-primary/20",children:p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"종합 시선 추적 점수"}),p.jsx("div",{className:"text-6xl font-bold text-primary mb-2",children:a.overallEyeTrackingScore.toFixed(1)}),p.jsx("p",{className:"text-muted-foreground",children:"/ 100점"})]})})]}),p.jsxs("div",{className:"mb-8",children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"AI 분석 결과"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[p.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center",children:[p.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"강점"]}),p.jsx("ul",{className:"space-y-2",children:c.strengths.map((S,N)=>p.jsxs("li",{className:"text-foreground text-sm flex items-start",children:[p.jsx("span",{className:"text-primary mr-2",children:"•"}),p.jsx("span",{children:S})]},N))})]}),p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[p.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center",children:[p.jsx("span",{className:"text-yellow-500 mr-2",children:"⚠"}),"개선점"]}),p.jsx("ul",{className:"space-y-2",children:c.weaknesses.map((S,N)=>p.jsxs("li",{className:"text-foreground text-sm flex items-start",children:[p.jsx("span",{className:"text-primary mr-2",children:"•"}),p.jsx("span",{children:S})]},N))})]}),p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[p.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center",children:[p.jsx("span",{className:"text-blue-500 mr-2",children:"💡"}),"추천 사항"]}),p.jsx("ul",{className:"space-y-2",children:c.recommendations.map((S,N)=>p.jsxs("li",{className:"text-foreground text-sm flex items-start",children:[p.jsx("span",{className:"text-primary mr-2",children:"•"}),p.jsx("span",{children:S})]},N))})]})]}),p.jsxs("div",{className:"mt-6 bg-card rounded-2xl p-6 shadow-lg",children:[p.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"읽기 전략 분석"}),p.jsx("p",{className:"text-foreground",children:c.readingStrategy})]})]}),p.jsxs("div",{className:"mb-8",children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"세부 메트릭"}),p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg mb-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"종합 성능 레이더"}),p.jsx(fg,{width:"100%",height:400,children:p.jsxs(kxt,{data:C(),children:[p.jsx(Sse,{stroke:"hsl(var(--border))"}),p.jsx(Uv,{dataKey:"category",tick:{fill:"hsl(var(--foreground))"}}),p.jsx(Pv,{angle:90,domain:[0,100],tick:{fill:"hsl(var(--muted-foreground))"}}),p.jsx(jv,{name:"내 점수",dataKey:"value",stroke:"hsl(var(--primary))",fill:"hsl(var(--primary))",fillOpacity:.3}),p.jsx(xi,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),p.jsx(ha,{})]})})]}),p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg mb-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"A. 눈 움직임 패턴"}),p.jsx(fg,{width:"100%",height:300,children:p.jsxs(Ob,{data:v(),children:[p.jsx(Vg,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),p.jsx(fd,{dataKey:"name",tick:{fill:"hsl(var(--foreground))"}}),p.jsx(hd,{tick:{fill:"hsl(var(--muted-foreground))"}}),p.jsx(xi,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},formatter:(S,N,k)=>[`${S.toFixed(1)} ${k.payload.unit}`,"현재 값"]}),p.jsx(ha,{}),p.jsx(gi,{dataKey:"value",fill:"hsl(var(--primary))",name:"현재 값"}),p.jsx(gi,{dataKey:"optimal",fill:"hsl(var(--muted))",name:"목표 값"})]})})]}),p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg mb-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"B. 응시 행동"}),p.jsx(fg,{width:"100%",height:300,children:p.jsxs(Ob,{data:b(),children:[p.jsx(Vg,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),p.jsx(fd,{dataKey:"name",tick:{fill:"hsl(var(--foreground))"}}),p.jsx(hd,{tick:{fill:"hsl(var(--muted-foreground))"}}),p.jsx(xi,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},formatter:(S,N,k)=>[`${S.toFixed(1)} ${k.payload.unit}`,"현재 값"]}),p.jsx(ha,{}),p.jsx(gi,{dataKey:"value",fill:"hsl(var(--primary))",name:"현재 값"}),p.jsx(gi,{dataKey:"optimal",fill:"hsl(var(--muted))",name:"목표 값"})]})})]}),p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg mb-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"C. 읽기 속도 & 리듬"}),p.jsx(fg,{width:"100%",height:300,children:p.jsxs(Ob,{data:w(),children:[p.jsx(Vg,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),p.jsx(fd,{dataKey:"name",tick:{fill:"hsl(var(--foreground))"}}),p.jsx(hd,{tick:{fill:"hsl(var(--muted-foreground))"}}),p.jsx(xi,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},formatter:(S,N,k)=>[`${S.toFixed(1)} ${k.payload.unit}`,"현재 값"]}),p.jsx(ha,{}),p.jsx(gi,{dataKey:"value",fill:"hsl(var(--primary))",name:"현재 값"}),p.jsx(gi,{dataKey:"optimal",fill:"hsl(var(--muted))",name:"목표 값"})]})})]})]}),p.jsxs("div",{className:"mb-8",children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"집중도 히트맵"}),p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[p.jsx("p",{className:"text-muted-foreground mb-4",children:"밝은 영역일수록 더 오래 응시한 부분입니다."}),p.jsx("div",{className:"flex justify-center",children:p.jsx("canvas",{ref:n,width:1280,height:720,className:"max-w-full h-auto border border-border rounded-lg"})})]})]}),f&&p.jsxs("div",{className:"mb-8",children:[p.jsxs("h2",{className:"text-2xl font-bold text-foreground mb-4",children:["또래 비교 (학년: ",f.grade,")"]}),p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[p.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["백분위: ",f.percentileRank,"% | 비교 대상: ",f.sampleSize,"명"]}),p.jsx(fg,{width:"100%",height:400,children:p.jsxs(Ob,{data:Object.entries(f.metricsComparison).map(([S,N])=>({metric:S,myValue:N.studentValue,peerAverage:N.peerAverage})),children:[p.jsx(Vg,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),p.jsx(fd,{dataKey:"metric",tick:{fill:"hsl(var(--foreground))"}}),p.jsx(hd,{tick:{fill:"hsl(var(--muted-foreground))"}}),p.jsx(xi,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),p.jsx(ha,{}),p.jsx(gi,{dataKey:"myValue",fill:"hsl(var(--primary))",name:"내 점수"}),p.jsx(gi,{dataKey:"peerAverage",fill:"hsl(var(--muted))",name:"또래 평균"})]})})]})]}),p.jsxs("div",{className:"flex gap-4 justify-center",children:[p.jsx("button",{onClick:()=>e("/student/dashboard"),className:"px-6 py-3 bg-muted text-foreground rounded-lg hover:bg-muted/80 transition-colors",children:"대시보드로"}),p.jsx("button",{onClick:B,className:"px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:"PDF 다운로드"})]})]})})},Fxt=()=>{const t=is(),[e,n]=Q.useState([]),[r,s]=Q.useState(!0),[i,o]=Q.useState(""),[a,l]=Q.useState("all"),[c,u]=Q.useState("all"),[A,d]=Q.useState("");Q.useEffect(()=>{(async()=>{try{s(!0);const m=await vt.get("/api/v1/vision/admin/sessions");n(m.data.sessions),s(!1)}catch(m){console.error("Failed to load sessions:",m),o("세션 목록을 불러오는데 실패했습니다."),s(!1)}})()},[]);const f=e.filter(h=>!(a!=="all"&&h.studentGrade!==parseInt(a,10)||c!=="all"&&h.status!==c||A&&!h.studentName.toLowerCase().includes(A.toLowerCase())));return r?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),p.jsx("p",{className:"text-foreground",children:"세션 목록을 로딩하는 중..."})]})}):i?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-destructive mb-4",children:i}),p.jsx("button",{onClick:()=>t("/admin/dashboard"),className:"px-6 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90",children:"대시보드로"})]})}):p.jsx("div",{className:"min-h-screen bg-background py-8",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"mb-8",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Vision TEST 세션 관리"}),p.jsxs("p",{className:"text-muted-foreground",children:["전체 ",e.length,"개 세션"]})]}),p.jsx("button",{onClick:()=>t("/admin/dashboard"),className:"px-6 py-3 bg-muted text-foreground rounded-lg hover:bg-muted/80 transition-colors",children:"대시보드로"})]}),p.jsx("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"학생 이름 검색"}),p.jsx("input",{type:"text",value:A,onChange:h=>d(h.target.value),placeholder:"이름 입력...",className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"학년"}),p.jsxs("select",{value:a,onChange:h=>l(h.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",children:[p.jsx("option",{value:"all",children:"전체"}),p.jsx("option",{value:"1",children:"초등 1학년"}),p.jsx("option",{value:"2",children:"초등 2학년"}),p.jsx("option",{value:"3",children:"초등 3학년"}),p.jsx("option",{value:"4",children:"초등 4학년"}),p.jsx("option",{value:"5",children:"초등 5학년"}),p.jsx("option",{value:"6",children:"초등 6학년"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"상태"}),p.jsxs("select",{value:c,onChange:h=>u(h.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",children:[p.jsx("option",{value:"all",children:"전체"}),p.jsx("option",{value:"completed",children:"완료"}),p.jsx("option",{value:"in_progress",children:"진행중"}),p.jsx("option",{value:"failed",children:"실패"})]})]}),p.jsx("div",{className:"flex items-end",children:p.jsxs("div",{className:"w-full px-4 py-2 bg-muted/50 rounded-lg",children:[p.jsx("p",{className:"text-sm text-muted-foreground",children:"검색 결과"}),p.jsxs("p",{className:"text-xl font-bold text-foreground",children:[f.length,"개"]})]})})]})})]}),p.jsx("div",{className:"bg-card rounded-2xl shadow-lg overflow-hidden",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{className:"bg-muted/50",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"학생"}),p.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"학년"}),p.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"테스트 날짜"}),p.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"종합 점수"}),p.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"캘리브레이션"}),p.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"상태"}),p.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"작업"})]})}),p.jsx("tbody",{className:"divide-y divide-border",children:f.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-muted-foreground",children:"검색 결과가 없습니다."})}):f.map(h=>p.jsxs("tr",{className:"hover:bg-muted/30 transition-colors cursor-pointer",onClick:()=>t(`/admin/vision-session/${h.sessionId}`),children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("div",{className:"text-sm font-medium text-foreground",children:h.studentName})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsxs("div",{className:"text-sm text-foreground",children:["초등 ",h.studentGrade,"학년"]})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("div",{className:"text-sm text-foreground",children:new Date(h.testDate).toLocaleDateString("ko-KR")})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:`text-sm font-bold ${h.overallScore>=80?"text-green-500":h.overallScore>=60?"text-yellow-500":"text-red-500"}`,children:h.overallScore.toFixed(1)}),p.jsx("div",{className:"text-xs text-muted-foreground",children:"/ 100"})]})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsxs("div",{className:"text-sm text-foreground",children:[h.calibrationScore.toFixed(1),"%"]})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${h.status==="completed"?"bg-green-100 text-green-800":h.status==="in_progress"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:h.status==="completed"?"완료":h.status==="in_progress"?"진행중":"실패"})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:p.jsx("button",{onClick:m=>{m.stopPropagation(),t(`/admin/vision-session/${h.sessionId}`)},className:"text-primary hover:text-primary/80 font-medium",children:"상세보기"})})]},h.id))})]})})})]})})},$xt=({gazeData:t,passageText:e,width:n=1280,height:r=720,onPlaybackComplete:s})=>{var W,L,G;const i=Q.useRef(null),o=Q.useRef(null),[a,l]=Q.useState(!1),[c,u]=Q.useState(0),[A,d]=Q.useState(1),[f,h]=Q.useState(!0),[m,g]=Q.useState(!0),[y,x]=Q.useState(!0),v=t.length,b=Q.useCallback(_=>{_.fillStyle="#ffffff",_.fillRect(0,0,n,r),_.fillStyle="#1f2937",_.font='16px "Plus Jakarta Sans", sans-serif';const j=e.split(`
`),K=24,Y=40;j.forEach((J,ae)=>{_.fillText(J,Y,Y+ae*K,n-Y*2)})},[e,n,r]),w=Q.useCallback((_,j,K=1)=>{const Y=j.x*n,J=j.y*r;let ae="",ue=0;switch(j.type){case mi.FIXATION:ae=`rgba(147, 51, 234, ${K})`,ue=12;break;case mi.SACCADE:ae=`rgba(59, 130, 246, ${K})`,ue=6;break;case mi.OFF_PAGE:ae=`rgba(239, 68, 68, ${K})`,ue=8;break;case mi.BLINK:ae=`rgba(156, 163, 175, ${K})`,ue=4;break}_.beginPath(),_.arc(Y,J,ue,0,2*Math.PI),_.fillStyle=ae,_.fill(),j.type===mi.FIXATION&&(_.strokeStyle=`rgba(147, 51, 234, ${K*.5})`,_.lineWidth=2,_.stroke())},[n,r]),C=Q.useCallback((_,j,K)=>{if(!(j.length<2||K<1)){_.lineWidth=2;for(let Y=1;Y<=K;Y++){const J=j[Y-1],ae=j[Y],ue=J.x*n,le=J.y*r,fe=ae.x*n,Ie=ae.y*r,Re=Ie<le-20||Math.abs(Ie-le)<20&&fe<ue;let ge="";ae.type===mi.OFF_PAGE?ge="rgba(239, 68, 68, 0.3)":Re?ge="rgba(251, 146, 60, 0.5)":ge="rgba(147, 51, 234, 0.3)",_.strokeStyle=ge,_.beginPath(),_.moveTo(ue,le),_.lineTo(fe,Ie),_.stroke()}}},[n,r]),B=Q.useCallback((_,j,K)=>{const Y=[];let J=[];for(let ae=0;ae<=K;ae++){const ue=j[ae];if(ue.type===mi.FIXATION)J.push(ue);else if(J.length>0){const le=J.reduce((Re,ge)=>Re+ge.x,0)/J.length,fe=J.reduce((Re,ge)=>Re+ge.y,0)/J.length,Ie=J[J.length-1].timestamp-J[0].timestamp;Y.push({points:[...J],x:le,y:fe,duration:Ie}),J=[]}}Y.forEach(ae=>{const ue=ae.x*n,le=ae.y*r,fe=50,Ie=1e3,Re=15,ge=50,$e=Math.max(fe,Math.min(Ie,ae.duration)),Te=Re+($e-fe)/(Ie-fe)*(ge-Re);_.beginPath(),_.arc(ue,le,Te,0,2*Math.PI),_.fillStyle="rgba(147, 51, 234, 0.15)",_.fill(),_.strokeStyle="rgba(147, 51, 234, 0.4)",_.lineWidth=2,_.stroke(),_.fillStyle="rgba(147, 51, 234, 0.8)",_.font='12px "Plus Jakarta Sans", sans-serif',_.textAlign="center",_.textBaseline="middle",_.fillText(`${ae.duration}ms`,ue,le)})},[n,r]),S=Q.useCallback(_=>{var J;const j=i.current;if(!j)return;const K=j.getContext("2d");if(!K)return;b(K),y&&C(K,t,_),f&&B(K,t,_);const Y=Math.max(0,_-30);for(let ae=Y;ae<=_;ae++){const ue=t[ae];if(!f&&ue.type===mi.FIXATION||!m&&ue.type===mi.SACCADE)continue;const le=_-ae,fe=Math.max(.2,1-le/30);w(K,ue,fe)}if(_<t.length){const ae=t[_],ue=ae.x*n,le=ae.y*r;K.beginPath(),K.arc(ue,le,20,0,2*Math.PI),K.strokeStyle="rgba(251, 191, 36, 0.8)",K.lineWidth=3,K.stroke()}K.fillStyle="rgba(0, 0, 0, 0.7)",K.fillRect(10,10,200,60),K.fillStyle="#ffffff",K.font='14px "Plus Jakarta Sans", sans-serif',K.textAlign="left",K.fillText(`Frame: ${_+1} / ${v}`,20,30),K.fillText(`Time: ${(((J=t[_])==null?void 0:J.timestamp)||0).toFixed(0)}ms`,20,50)},[t,v,n,r,y,f,m,b,C,B,w]);Q.useEffect(()=>{if(!a)return;const _=33/A;let j=Date.now();const K=()=>{const Y=Date.now();Y-j>=_&&(u(ae=>{const ue=ae+1;return ue>=v?(l(!1),s&&s(),ae):ue}),j=Y),o.current=requestAnimationFrame(K)};return o.current=requestAnimationFrame(K),()=>{o.current&&cancelAnimationFrame(o.current)}},[a,A,v,s]),Q.useEffect(()=>{S(c)},[c,S]);const N=()=>{l(!a)},k=()=>{l(!1),u(0)},O=_=>{const j=parseInt(_.target.value,10);u(j),l(!1)},U=_=>{d(_)},P=()=>{u(_=>Math.min(_+1,v-1)),l(!1)},V=()=>{u(_=>Math.max(_-1,0)),l(!1)};return p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[p.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"시선 재생"}),p.jsx("div",{className:"mb-4 border border-border rounded-lg overflow-hidden",children:p.jsx("canvas",{ref:i,width:n,height:r,className:"w-full h-auto"})}),p.jsxs("div",{className:"mb-4",children:[p.jsx("input",{type:"range",min:"0",max:v-1,value:c,onChange:O,className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"}),p.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[p.jsxs("span",{children:[(((W=t[0])==null?void 0:W.timestamp)||0).toFixed(0),"ms"]}),p.jsxs("span",{children:[(((L=t[c])==null?void 0:L.timestamp)||0).toFixed(0),"ms"]}),p.jsxs("span",{children:[(((G=t[v-1])==null?void 0:G.timestamp)||0).toFixed(0),"ms"]})]})]}),p.jsxs("div",{className:"flex items-center justify-between gap-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:N,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:a?"⏸ 일시정지":"▶ 재생"}),p.jsx("button",{onClick:k,className:"px-4 py-2 bg-muted text-foreground rounded-lg hover:bg-muted/80 transition-colors",children:"⏹ 정지"}),p.jsx("button",{onClick:V,disabled:c===0,className:"px-3 py-2 bg-muted text-foreground rounded-lg hover:bg-muted/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"⏮ 이전"}),p.jsx("button",{onClick:P,disabled:c>=v-1,className:"px-3 py-2 bg-muted text-foreground rounded-lg hover:bg-muted/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"⏭ 다음"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-sm text-muted-foreground",children:"속도:"}),[.5,1,2,4].map(_=>p.jsxs("button",{onClick:()=>U(_),className:`px-3 py-1 rounded-lg transition-colors ${A===_?"bg-primary text-primary-foreground":"bg-muted text-foreground hover:bg-muted/80"}`,children:[_,"x"]},_))]})]}),p.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-border",children:[p.jsx("span",{className:"text-sm text-muted-foreground",children:"표시:"}),p.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:y,onChange:_=>x(_.target.checked),className:"w-4 h-4 accent-primary"}),p.jsx("span",{className:"text-sm text-foreground",children:"경로"})]}),p.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:f,onChange:_=>h(_.target.checked),className:"w-4 h-4 accent-primary"}),p.jsx("span",{className:"text-sm text-foreground",children:"응시점"})]}),p.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:m,onChange:_=>g(_.target.checked),className:"w-4 h-4 accent-primary"}),p.jsx("span",{className:"text-sm text-foreground",children:"도약"})]})]}),p.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[p.jsx("p",{className:"text-sm font-semibold text-foreground mb-2",children:"범례:"}),p.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 rounded-full bg-primary"}),p.jsx("span",{className:"text-muted-foreground",children:"응시 (Fixation)"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),p.jsx("span",{className:"text-muted-foreground",children:"도약 (Saccade)"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),p.jsx("span",{className:"text-muted-foreground",children:"화면 밖 (Off-page)"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 rounded-full bg-orange-500"}),p.jsx("span",{className:"text-muted-foreground",children:"역행 (Regression)"})]})]})]})]})},_xt=()=>{const{sessionId:t}=oA(),e=is(),[n,r]=Q.useState(!0),[s,i]=Q.useState(""),[o,a]=Q.useState(null),[l,c]=Q.useState(null),[u,A]=Q.useState([]),[d,f]=Q.useState(""),[h,m]=Q.useState(null),[g,y]=Q.useState(""),[x,v]=Q.useState("replay");return Q.useEffect(()=>{(async()=>{if(t)try{r(!0);const w=await _te(t);a(w.metrics),c(w.aiAnalysis),f(w.studentName),m(w.testDate);const C=await HVe(t);A(C.gazePoints),y(C.passageText||"샘플 지문 텍스트입니다..."),r(!1)}catch(w){console.error("Failed to load session:",w),i("세션 데이터를 불러오는데 실패했습니다."),r(!1)}})()},[t]),n?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),p.jsx("p",{className:"text-foreground",children:"세션 데이터를 로딩하는 중..."})]})}):s?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-destructive mb-4",children:s}),p.jsx("button",{onClick:()=>e("/admin/vision-sessions"),className:"px-6 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90",children:"목록으로 돌아가기"})]})}):p.jsx("div",{className:"min-h-screen bg-background py-8",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"mb-8",children:[p.jsx("button",{onClick:()=>e("/admin/vision-sessions"),className:"mb-4 text-primary hover:text-primary/80 flex items-center gap-2",children:"← 목록으로"}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Vision TEST 세션 상세"}),p.jsxs("p",{className:"text-muted-foreground",children:[d," | ",h?new Date(h).toLocaleDateString("ko-KR"):""]})]}),o&&p.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-primary/5 rounded-2xl px-6 py-4 border border-primary/20",children:[p.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"종합 점수"}),p.jsx("p",{className:"text-3xl font-bold text-primary",children:o.overallEyeTrackingScore.toFixed(1)})]})]})]}),p.jsx("div",{className:"mb-6 border-b border-border",children:p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{onClick:()=>v("replay"),className:`px-6 py-3 font-medium transition-colors border-b-2 ${x==="replay"?"text-primary border-primary":"text-muted-foreground border-transparent hover:text-foreground"}`,children:"시선 재생"}),p.jsx("button",{onClick:()=>v("metrics"),className:`px-6 py-3 font-medium transition-colors border-b-2 ${x==="metrics"?"text-primary border-primary":"text-muted-foreground border-transparent hover:text-foreground"}`,children:"메트릭"}),p.jsx("button",{onClick:()=>v("analysis"),className:`px-6 py-3 font-medium transition-colors border-b-2 ${x==="analysis"?"text-primary border-primary":"text-muted-foreground border-transparent hover:text-foreground"}`,children:"AI 분석"})]})}),x==="replay"&&u.length>0&&p.jsx($xt,{gazeData:u,passageText:g,width:1280,height:720}),x==="metrics"&&o&&p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[p.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"A. 눈 움직임 패턴"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[p.jsx(Gs,{label:"평균 도약폭",value:o.averageSaccadeAmplitude,unit:"px",optimal:200}),p.jsx(Gs,{label:"도약 변동성",value:o.saccadeVariability,unit:"px",optimal:50}),p.jsx(Gs,{label:"도약 속도",value:o.averageSaccadeVelocity,unit:"px/s",optimal:1e3}),p.jsx(Gs,{label:"최적 착지율",value:o.optimalLandingRate,unit:"%",optimal:70}),p.jsx(Gs,{label:"줄바꿈 정확도",value:o.returnSweepAccuracy,unit:"%",optimal:80}),p.jsx(Gs,{label:"경로 효율성",value:o.scanPathEfficiency*100,unit:"%",optimal:70})]})]}),p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[p.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"B. 응시 행동"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx(Gs,{label:"평균 응시시간",value:o.averageFixationDuration,unit:"ms",optimal:250}),p.jsx(Gs,{label:"단어당 응시",value:o.fixationsPerWord,unit:"회",optimal:1.2}),p.jsx(Gs,{label:"역행률",value:o.regressionRate,unit:"%",optimal:15}),p.jsx(Gs,{label:"어휘 격차",value:o.vocabularyGapScore,unit:"점",optimal:30})]})]}),p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[p.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"C. 읽기 속도 & 리듬"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsx(Gs,{label:"읽기 속도",value:o.wordsPerMinute,unit:"WPM",optimal:150}),p.jsx(Gs,{label:"리듬 규칙성",value:o.rhythmRegularity*100,unit:"%",optimal:70}),p.jsx(Gs,{label:"체력 점수",value:o.staminaScore,unit:"점",optimal:70})]})]}),p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[p.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"D. 이해도 & 인지"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsx(Gs,{label:"시선-이해 상관",value:(o.gazeComprehensionCorrelation+1)*50,unit:"%",optimal:70}),p.jsx(Gs,{label:"인지 부하",value:o.cognitiveLoadIndex,unit:"점",optimal:50})]})]})]}),x==="analysis"&&l&&p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[p.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"읽기 전략"}),p.jsx("p",{className:"text-foreground",children:l.readingStrategy})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[p.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center",children:[p.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"강점"]}),p.jsx("ul",{className:"space-y-2",children:l.strengths.map((b,w)=>p.jsxs("li",{className:"text-foreground text-sm flex items-start",children:[p.jsx("span",{className:"text-primary mr-2",children:"•"}),p.jsx("span",{children:b})]},w))})]}),p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[p.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center",children:[p.jsx("span",{className:"text-yellow-500 mr-2",children:"⚠"}),"개선점"]}),p.jsx("ul",{className:"space-y-2",children:l.weaknesses.map((b,w)=>p.jsxs("li",{className:"text-foreground text-sm flex items-start",children:[p.jsx("span",{className:"text-primary mr-2",children:"•"}),p.jsx("span",{children:b})]},w))})]}),p.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[p.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center",children:[p.jsx("span",{className:"text-blue-500 mr-2",children:"💡"}),"추천 사항"]}),p.jsx("ul",{className:"space-y-2",children:l.recommendations.map((b,w)=>p.jsxs("li",{className:"text-foreground text-sm flex items-start",children:[p.jsx("span",{className:"text-primary mr-2",children:"•"}),p.jsx("span",{children:b})]},w))})]})]})]})]})})},Gs=({label:t,value:e,unit:n,optimal:r})=>{const i=Math.abs(e-r)/r*100;let o="",a="";return i<10?(o="text-green-500",a="우수"):i<30?(o="text-yellow-500",a="보통"):(o="text-red-500",a="개선 필요"),p.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[p.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:t}),p.jsxs("div",{className:"flex items-baseline gap-2",children:[p.jsx("p",{className:"text-2xl font-bold text-foreground",children:e.toFixed(1)}),p.jsx("span",{className:"text-sm text-muted-foreground",children:n})]}),p.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs",children:[p.jsxs("span",{className:"text-muted-foreground",children:["목표: ",r," ",n]}),p.jsx("span",{className:`font-medium ${o}`,children:a})]})]})},Oxt=new Cce({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});function Dxt(){return p.jsx(Bce,{client:Oxt,children:p.jsx(Kle,{children:p.jsxs(Mle,{children:[p.jsx(Tn,{path:"/login",element:p.jsx(OAe,{})}),p.jsx(Tn,{path:"/register",element:p.jsx(DAe,{})}),p.jsx(Tn,{path:"/unauthorized",element:p.jsx(x1e,{})}),p.jsx(Tn,{path:"/dashboard",element:p.jsx(Or,{allowedRoles:["student"],children:p.jsx(RAe,{})})}),p.jsx(Tn,{path:"/test/start/:templateCode",element:p.jsx(Or,{allowedRoles:["student"],children:p.jsx(PAe,{})})}),p.jsx(Tn,{path:"/test/survey/:sessionId",element:p.jsx(Or,{allowedRoles:["student"],children:p.jsx(UAe,{})})}),p.jsx(Tn,{path:"/test/session/:sessionId",element:p.jsx(Or,{allowedRoles:["student"],children:p.jsx(LAe,{})})}),p.jsx(Tn,{path:"/test/result/:sessionId",element:p.jsx(Or,{allowedRoles:["student","admin","parent","teacher"],children:p.jsx(Pme,{})})}),p.jsx(Tn,{path:"/student/vision/test/:sessionId",element:p.jsx(Or,{allowedRoles:["student"],children:p.jsx(VVe,{})})}),p.jsx(Tn,{path:"/student/vision/result/:sessionId",element:p.jsx(Or,{allowedRoles:["student","admin","parent","teacher"],children:p.jsx(Txt,{})})}),p.jsx(Tn,{path:"/parent/dashboard",element:p.jsx(Or,{allowedRoles:["parent"],children:p.jsx(Vme,{})})}),p.jsx(Tn,{path:"/admin/dashboard",element:p.jsx(Or,{allowedRoles:["admin"],children:p.jsx(Lme,{})})}),p.jsx(Tn,{path:"/admin/questions",element:p.jsx(Or,{allowedRoles:["admin"],children:p.jsx(Ume,{})})}),p.jsx(Tn,{path:"/admin/question-analytics",element:p.jsx(Or,{allowedRoles:["admin"],children:p.jsx(jme,{})})}),p.jsx(Tn,{path:"/admin/grading",element:p.jsx(Or,{allowedRoles:["admin"],children:p.jsx(Mme,{})})}),p.jsx(Tn,{path:"/admin/bulk-upload",element:p.jsx(Or,{allowedRoles:["admin"],children:p.jsx(Qme,{})})}),p.jsx(Tn,{path:"/admin/reports",element:p.jsx(Or,{allowedRoles:["admin"],children:p.jsx(Hme,{})})}),p.jsx(Tn,{path:"/admin/users",element:p.jsx(Or,{allowedRoles:["admin"],children:p.jsx(zme,{})})}),p.jsx(Tn,{path:"/admin/vision-sessions",element:p.jsx(Or,{allowedRoles:["admin"],children:p.jsx(Fxt,{})})}),p.jsx(Tn,{path:"/admin/vision-session/:sessionId",element:p.jsx(Or,{allowedRoles:["admin"],children:p.jsx(_xt,{})})}),p.jsx(Tn,{path:"/report/:resultId",element:p.jsx(Or,{allowedRoles:["student","parent","teacher","admin"],children:p.jsx(y1e,{})})}),p.jsx(Tn,{path:"/teacher/dashboard",element:p.jsx(Or,{allowedRoles:["teacher"],children:p.jsx(Wme,{})})}),p.jsx(Tn,{path:"/",element:p.jsx(xj,{})}),p.jsx(Tn,{path:"*",element:p.jsx(xj,{})})]})})})}_E.createRoot(document.getElementById("root")).render(p.jsx(ie.StrictMode,{children:p.jsx(Dxt,{})}));
//# sourceMappingURL=index-dpNdAh0Q.js.map

var xie=Object.defineProperty;var VP=t=>{throw TypeError(t)};var vie=(t,e,n)=>e in t?xie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ye=(t,e,n)=>vie(t,typeof e!="symbol"?e+"":e,n),pN=(t,e,n)=>e.has(t)||VP("Cannot "+n);var Be=(t,e,n)=>(pN(t,e,"read from private field"),n?n.call(t):e.get(t)),Mt=(t,e,n)=>e.has(t)?VP("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),gt=(t,e,n,r)=>(pN(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ss=(t,e,n)=>(pN(t,e,"access private method"),n);var t1=(t,e,n,r)=>({set _(s){gt(t,e,s,n)},get _(){return Be(t,e,r)}});function a9(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var bi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function bie(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var l9={exports:{}},FC={},c9={exports:{}},Ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0=Symbol.for("react.element"),wie=Symbol.for("react.portal"),Cie=Symbol.for("react.fragment"),Sie=Symbol.for("react.strict_mode"),Bie=Symbol.for("react.profiler"),Nie=Symbol.for("react.provider"),Eie=Symbol.for("react.context"),Iie=Symbol.for("react.forward_ref"),kie=Symbol.for("react.suspense"),Tie=Symbol.for("react.memo"),Fie=Symbol.for("react.lazy"),WP=Symbol.iterator;function $ie(t){return t===null||typeof t!="object"?null:(t=WP&&t[WP]||t["@@iterator"],typeof t=="function"?t:null)}var u9={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A9=Object.assign,d9={};function Mp(t,e,n){this.props=t,this.context=e,this.refs=d9,this.updater=n||u9}Mp.prototype.isReactComponent={};Mp.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mp.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function f9(){}f9.prototype=Mp.prototype;function VF(t,e,n){this.props=t,this.context=e,this.refs=d9,this.updater=n||u9}var WF=VF.prototype=new f9;WF.constructor=VF;A9(WF,Mp.prototype);WF.isPureReactComponent=!0;var GP=Array.isArray,h9=Object.prototype.hasOwnProperty,GF={current:null},p9={key:!0,ref:!0,__self:!0,__source:!0};function m9(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)h9.call(e,r)&&!p9.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:X0,type:t,key:i,ref:o,props:s,_owner:GF.current}}function _ie(t,e){return{$$typeof:X0,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function KF(t){return typeof t=="object"&&t!==null&&t.$$typeof===X0}function Oie(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var KP=/\/+/g;function mN(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Oie(""+t.key):e.toString(36)}function Ob(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case X0:case wie:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+mN(o,0):r,GP(s)?(n="",t!=null&&(n=t.replace(KP,"$&/")+"/"),Ob(s,e,n,"",function(c){return c})):s!=null&&(KF(s)&&(s=_ie(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(KP,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",GP(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+mN(i,a);o+=Ob(i,e,n,l,s)}else if(l=$ie(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+mN(i,a++),o+=Ob(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function n1(t,e,n){if(t==null)return t;var r=[],s=0;return Ob(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Die(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ai={current:null},Db={transition:null},Rie={ReactCurrentDispatcher:ai,ReactCurrentBatchConfig:Db,ReactCurrentOwner:GF};function g9(){throw Error("act(...) is not supported in production builds of React.")}Ot.Children={map:n1,forEach:function(t,e,n){n1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return n1(t,function(){e++}),e},toArray:function(t){return n1(t,function(e){return e})||[]},only:function(t){if(!KF(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ot.Component=Mp;Ot.Fragment=Cie;Ot.Profiler=Bie;Ot.PureComponent=VF;Ot.StrictMode=Sie;Ot.Suspense=kie;Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rie;Ot.act=g9;Ot.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=A9({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=GF.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)h9.call(e,l)&&!p9.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:X0,type:t.type,key:s,ref:i,props:r,_owner:o}};Ot.createContext=function(t){return t={$$typeof:Eie,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Nie,_context:t},t.Consumer=t};Ot.createElement=m9;Ot.createFactory=function(t){var e=m9.bind(null,t);return e.type=t,e};Ot.createRef=function(){return{current:null}};Ot.forwardRef=function(t){return{$$typeof:Iie,render:t}};Ot.isValidElement=KF;Ot.lazy=function(t){return{$$typeof:Fie,_payload:{_status:-1,_result:t},_init:Die}};Ot.memo=function(t,e){return{$$typeof:Tie,type:t,compare:e===void 0?null:e}};Ot.startTransition=function(t){var e=Db.transition;Db.transition={};try{t()}finally{Db.transition=e}};Ot.unstable_act=g9;Ot.useCallback=function(t,e){return ai.current.useCallback(t,e)};Ot.useContext=function(t){return ai.current.useContext(t)};Ot.useDebugValue=function(){};Ot.useDeferredValue=function(t){return ai.current.useDeferredValue(t)};Ot.useEffect=function(t,e){return ai.current.useEffect(t,e)};Ot.useId=function(){return ai.current.useId()};Ot.useImperativeHandle=function(t,e,n){return ai.current.useImperativeHandle(t,e,n)};Ot.useInsertionEffect=function(t,e){return ai.current.useInsertionEffect(t,e)};Ot.useLayoutEffect=function(t,e){return ai.current.useLayoutEffect(t,e)};Ot.useMemo=function(t,e){return ai.current.useMemo(t,e)};Ot.useReducer=function(t,e,n){return ai.current.useReducer(t,e,n)};Ot.useRef=function(t){return ai.current.useRef(t)};Ot.useState=function(t){return ai.current.useState(t)};Ot.useSyncExternalStore=function(t,e,n){return ai.current.useSyncExternalStore(t,e,n)};Ot.useTransition=function(){return ai.current.useTransition()};Ot.version="18.3.1";c9.exports=Ot;var z=c9.exports;const ie=Gt(z),Pie=a9({__proto__:null,default:ie},[z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uie=z,Lie=Symbol.for("react.element"),jie=Symbol.for("react.fragment"),Mie=Object.prototype.hasOwnProperty,Qie=Uie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hie={key:!0,ref:!0,__self:!0,__source:!0};function y9(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Mie.call(e,r)&&!Hie.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Lie,type:t,key:i,ref:o,props:s,_owner:Qie.current}}FC.Fragment=jie;FC.jsx=y9;FC.jsxs=y9;l9.exports=FC;var g=l9.exports,$E={},x9={exports:{}},so={},v9={exports:{}},b9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,M){var q=D.length;D.push(M);e:for(;0<q;){var Z=q-1>>>1,te=D[Z];if(0<s(te,M))D[Z]=M,D[q]=te,q=Z;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var M=D[0],q=D.pop();if(q!==M){D[0]=q;e:for(var Z=0,te=D.length,ue=te>>>1;Z<ue;){var de=2*(Z+1)-1,le=D[de],he=de+1,ke=D[he];if(0>s(le,q))he<te&&0>s(ke,le)?(D[Z]=ke,D[he]=q,Z=he):(D[Z]=le,D[de]=q,Z=de);else if(he<te&&0>s(ke,q))D[Z]=ke,D[he]=q,Z=he;else break e}}return M}function s(D,M){var q=D.sortIndex-M.sortIndex;return q!==0?q:D.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,A=null,d=3,f=!1,h=!1,p=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var M=n(c);M!==null;){if(M.callback===null)r(c);else if(M.startTime<=D)r(c),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(c)}}function b(D){if(p=!1,v(D),!h)if(n(l)!==null)h=!0,j(w);else{var M=n(c);M!==null&&G(b,M.startTime-D)}}function w(D,M){h=!1,p&&(p=!1,y(S),S=-1),f=!0;var q=d;try{for(v(M),A=n(l);A!==null&&(!(A.expirationTime>M)||D&&!O());){var Z=A.callback;if(typeof Z=="function"){A.callback=null,d=A.priorityLevel;var te=Z(A.expirationTime<=M);M=t.unstable_now(),typeof te=="function"?A.callback=te:A===n(l)&&r(l),v(M)}else r(l);A=n(l)}if(A!==null)var ue=!0;else{var de=n(c);de!==null&&G(b,de.startTime-M),ue=!1}return ue}finally{A=null,d=q,f=!1}}var C=!1,B=null,S=-1,N=5,k=-1;function O(){return!(t.unstable_now()-k<N)}function U(){if(B!==null){var D=t.unstable_now();k=D;var M=!0;try{M=B(!0,D)}finally{M?P():(C=!1,B=null)}}else C=!1}var P;if(typeof x=="function")P=function(){x(U)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,W=V.port2;V.port1.onmessage=U,P=function(){W.postMessage(null)}}else P=function(){m(U,0)};function j(D){B=D,C||(C=!0,P())}function G(D,M){S=m(function(){D(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){h||f||(h=!0,j(w))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(d){case 1:case 2:case 3:var M=3;break;default:M=d}var q=d;d=M;try{return D()}finally{d=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,M){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var q=d;d=D;try{return M()}finally{d=q}},t.unstable_scheduleCallback=function(D,M,q){var Z=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Z+q:Z):q=Z,D){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=q+te,D={id:u++,callback:M,priorityLevel:D,startTime:q,expirationTime:te,sortIndex:-1},q>Z?(D.sortIndex=q,e(c,D),n(l)===null&&D===n(c)&&(p?(y(S),S=-1):p=!0,G(b,q-Z))):(D.sortIndex=te,e(l,D),h||f||(h=!0,j(w))),D},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(D){var M=d;return function(){var q=d;d=M;try{return D.apply(this,arguments)}finally{d=q}}}})(b9);v9.exports=b9;var zie=v9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vie=z,to=zie;function _e(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w9=new Set,my={};function rf(t,e){zh(t,e),zh(t+"Capture",e)}function zh(t,e){for(my[t]=e,t=0;t<e.length;t++)w9.add(e[t])}var lc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_E=Object.prototype.hasOwnProperty,Wie=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,XP={},qP={};function Gie(t){return _E.call(qP,t)?!0:_E.call(XP,t)?!1:Wie.test(t)?qP[t]=!0:(XP[t]=!0,!1)}function Kie(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Xie(t,e,n,r){if(e===null||typeof e>"u"||Kie(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function li(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var xs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xs[t]=new li(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xs[e]=new li(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xs[t]=new li(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xs[t]=new li(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xs[t]=new li(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xs[t]=new li(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xs[t]=new li(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xs[t]=new li(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xs[t]=new li(t,5,!1,t.toLowerCase(),null,!1,!1)});var XF=/[\-:]([a-z])/g;function qF(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(XF,qF);xs[e]=new li(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(XF,qF);xs[e]=new li(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(XF,qF);xs[e]=new li(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xs[t]=new li(t,1,!1,t.toLowerCase(),null,!1,!1)});xs.xlinkHref=new li("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xs[t]=new li(t,1,!1,t.toLowerCase(),null,!0,!0)});function YF(t,e,n,r){var s=xs.hasOwnProperty(e)?xs[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Xie(e,n,s,r)&&(n=null),r||s===null?Gie(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sc=Vie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,r1=Symbol.for("react.element"),Yf=Symbol.for("react.portal"),Jf=Symbol.for("react.fragment"),JF=Symbol.for("react.strict_mode"),OE=Symbol.for("react.profiler"),C9=Symbol.for("react.provider"),S9=Symbol.for("react.context"),ZF=Symbol.for("react.forward_ref"),DE=Symbol.for("react.suspense"),RE=Symbol.for("react.suspense_list"),e$=Symbol.for("react.memo"),Wc=Symbol.for("react.lazy"),B9=Symbol.for("react.offscreen"),YP=Symbol.iterator;function Mm(t){return t===null||typeof t!="object"?null:(t=YP&&t[YP]||t["@@iterator"],typeof t=="function"?t:null)}var Yn=Object.assign,gN;function vg(t){if(gN===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gN=e&&e[1]||""}return`
`+gN+t}var yN=!1;function xN(t,e){if(!t||yN)return"";yN=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{yN=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?vg(t):""}function qie(t){switch(t.tag){case 5:return vg(t.type);case 16:return vg("Lazy");case 13:return vg("Suspense");case 19:return vg("SuspenseList");case 0:case 2:case 15:return t=xN(t.type,!1),t;case 11:return t=xN(t.type.render,!1),t;case 1:return t=xN(t.type,!0),t;default:return""}}function PE(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Jf:return"Fragment";case Yf:return"Portal";case OE:return"Profiler";case JF:return"StrictMode";case DE:return"Suspense";case RE:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case S9:return(t.displayName||"Context")+".Consumer";case C9:return(t._context.displayName||"Context")+".Provider";case ZF:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case e$:return e=t.displayName||null,e!==null?e:PE(t.type)||"Memo";case Wc:e=t._payload,t=t._init;try{return PE(t(e))}catch{}}return null}function Yie(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return PE(e);case 8:return e===JF?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Uu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function N9(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Jie(t){var e=N9(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function s1(t){t._valueTracker||(t._valueTracker=Jie(t))}function E9(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=N9(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function aw(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function UE(t,e){var n=e.checked;return Yn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function JP(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Uu(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function I9(t,e){e=e.checked,e!=null&&YF(t,"checked",e,!1)}function LE(t,e){I9(t,e);var n=Uu(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jE(t,e.type,n):e.hasOwnProperty("defaultValue")&&jE(t,e.type,Uu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ZP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jE(t,e,n){(e!=="number"||aw(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bg=Array.isArray;function mh(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Uu(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ME(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(_e(91));return Yn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eU(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(_e(92));if(bg(n)){if(1<n.length)throw Error(_e(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Uu(n)}}function k9(t,e){var n=Uu(e.value),r=Uu(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tU(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function T9(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function QE(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?T9(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var i1,F9=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(i1=i1||document.createElement("div"),i1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=i1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gy(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zie=["Webkit","ms","Moz","O"];Object.keys(Vg).forEach(function(t){Zie.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vg[e]=Vg[t]})});function $9(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vg.hasOwnProperty(t)&&Vg[t]?(""+e).trim():e+"px"}function _9(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$9(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var eoe=Yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function HE(t,e){if(e){if(eoe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(_e(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(_e(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(_e(61))}if(e.style!=null&&typeof e.style!="object")throw Error(_e(62))}}function zE(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VE=null;function t$(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var WE=null,gh=null,yh=null;function nU(t){if(t=J0(t)){if(typeof WE!="function")throw Error(_e(280));var e=t.stateNode;e&&(e=RC(e),WE(t.stateNode,t.type,e))}}function O9(t){gh?yh?yh.push(t):yh=[t]:gh=t}function D9(){if(gh){var t=gh,e=yh;if(yh=gh=null,nU(t),e)for(t=0;t<e.length;t++)nU(e[t])}}function R9(t,e){return t(e)}function P9(){}var vN=!1;function U9(t,e,n){if(vN)return t(e,n);vN=!0;try{return R9(t,e,n)}finally{vN=!1,(gh!==null||yh!==null)&&(P9(),D9())}}function yy(t,e){var n=t.stateNode;if(n===null)return null;var r=RC(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(_e(231,e,typeof n));return n}var GE=!1;if(lc)try{var Qm={};Object.defineProperty(Qm,"passive",{get:function(){GE=!0}}),window.addEventListener("test",Qm,Qm),window.removeEventListener("test",Qm,Qm)}catch{GE=!1}function toe(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Wg=!1,lw=null,cw=!1,KE=null,noe={onError:function(t){Wg=!0,lw=t}};function roe(t,e,n,r,s,i,o,a,l){Wg=!1,lw=null,toe.apply(noe,arguments)}function soe(t,e,n,r,s,i,o,a,l){if(roe.apply(this,arguments),Wg){if(Wg){var c=lw;Wg=!1,lw=null}else throw Error(_e(198));cw||(cw=!0,KE=c)}}function sf(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function L9(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rU(t){if(sf(t)!==t)throw Error(_e(188))}function ioe(t){var e=t.alternate;if(!e){if(e=sf(t),e===null)throw Error(_e(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return rU(s),t;if(i===r)return rU(s),e;i=i.sibling}throw Error(_e(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(_e(189))}}if(n.alternate!==r)throw Error(_e(190))}if(n.tag!==3)throw Error(_e(188));return n.stateNode.current===n?t:e}function j9(t){return t=ioe(t),t!==null?M9(t):null}function M9(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=M9(t);if(e!==null)return e;t=t.sibling}return null}var Q9=to.unstable_scheduleCallback,sU=to.unstable_cancelCallback,ooe=to.unstable_shouldYield,aoe=to.unstable_requestPaint,hr=to.unstable_now,loe=to.unstable_getCurrentPriorityLevel,n$=to.unstable_ImmediatePriority,H9=to.unstable_UserBlockingPriority,uw=to.unstable_NormalPriority,coe=to.unstable_LowPriority,z9=to.unstable_IdlePriority,$C=null,il=null;function uoe(t){if(il&&typeof il.onCommitFiberRoot=="function")try{il.onCommitFiberRoot($C,t,void 0,(t.current.flags&128)===128)}catch{}}var ma=Math.clz32?Math.clz32:foe,Aoe=Math.log,doe=Math.LN2;function foe(t){return t>>>=0,t===0?32:31-(Aoe(t)/doe|0)|0}var o1=64,a1=4194304;function wg(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Aw(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=wg(a):(i&=o,i!==0&&(r=wg(i)))}else o=n&~s,o!==0?r=wg(o):i!==0&&(r=wg(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ma(e),s=1<<n,r|=t[n],e&=~s;return r}function hoe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function poe(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ma(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=hoe(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function XE(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function V9(){var t=o1;return o1<<=1,!(o1&4194240)&&(o1=64),t}function bN(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function q0(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ma(e),t[e]=n}function moe(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ma(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function r$(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ma(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var on=0;function W9(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var G9,s$,K9,X9,q9,qE=!1,l1=[],xu=null,vu=null,bu=null,xy=new Map,vy=new Map,Jc=[],goe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iU(t,e){switch(t){case"focusin":case"focusout":xu=null;break;case"dragenter":case"dragleave":vu=null;break;case"mouseover":case"mouseout":bu=null;break;case"pointerover":case"pointerout":xy.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vy.delete(e.pointerId)}}function Hm(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=J0(e),e!==null&&s$(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function yoe(t,e,n,r,s){switch(e){case"focusin":return xu=Hm(xu,t,e,n,r,s),!0;case"dragenter":return vu=Hm(vu,t,e,n,r,s),!0;case"mouseover":return bu=Hm(bu,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return xy.set(i,Hm(xy.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,vy.set(i,Hm(vy.get(i)||null,t,e,n,r,s)),!0}return!1}function Y9(t){var e=JA(t.target);if(e!==null){var n=sf(e);if(n!==null){if(e=n.tag,e===13){if(e=L9(n),e!==null){t.blockedOn=e,q9(t.priority,function(){K9(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rb(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=YE(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);VE=r,n.target.dispatchEvent(r),VE=null}else return e=J0(n),e!==null&&s$(e),t.blockedOn=n,!1;e.shift()}return!0}function oU(t,e,n){Rb(t)&&n.delete(e)}function xoe(){qE=!1,xu!==null&&Rb(xu)&&(xu=null),vu!==null&&Rb(vu)&&(vu=null),bu!==null&&Rb(bu)&&(bu=null),xy.forEach(oU),vy.forEach(oU)}function zm(t,e){t.blockedOn===e&&(t.blockedOn=null,qE||(qE=!0,to.unstable_scheduleCallback(to.unstable_NormalPriority,xoe)))}function by(t){function e(s){return zm(s,t)}if(0<l1.length){zm(l1[0],t);for(var n=1;n<l1.length;n++){var r=l1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xu!==null&&zm(xu,t),vu!==null&&zm(vu,t),bu!==null&&zm(bu,t),xy.forEach(e),vy.forEach(e),n=0;n<Jc.length;n++)r=Jc[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Jc.length&&(n=Jc[0],n.blockedOn===null);)Y9(n),n.blockedOn===null&&Jc.shift()}var xh=Sc.ReactCurrentBatchConfig,dw=!0;function voe(t,e,n,r){var s=on,i=xh.transition;xh.transition=null;try{on=1,i$(t,e,n,r)}finally{on=s,xh.transition=i}}function boe(t,e,n,r){var s=on,i=xh.transition;xh.transition=null;try{on=4,i$(t,e,n,r)}finally{on=s,xh.transition=i}}function i$(t,e,n,r){if(dw){var s=YE(t,e,n,r);if(s===null)FN(t,e,r,fw,n),iU(t,r);else if(yoe(s,t,e,n,r))r.stopPropagation();else if(iU(t,r),e&4&&-1<goe.indexOf(t)){for(;s!==null;){var i=J0(s);if(i!==null&&G9(i),i=YE(t,e,n,r),i===null&&FN(t,e,r,fw,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else FN(t,e,r,null,n)}}var fw=null;function YE(t,e,n,r){if(fw=null,t=t$(r),t=JA(t),t!==null)if(e=sf(t),e===null)t=null;else if(n=e.tag,n===13){if(t=L9(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fw=t,null}function J9(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(loe()){case n$:return 1;case H9:return 4;case uw:case coe:return 16;case z9:return 536870912;default:return 16}default:return 16}}var au=null,o$=null,Pb=null;function Z9(){if(Pb)return Pb;var t,e=o$,n=e.length,r,s="value"in au?au.value:au.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Pb=s.slice(t,1<r?1-r:void 0)}function Ub(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function c1(){return!0}function aU(){return!1}function io(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?c1:aU,this.isPropagationStopped=aU,this}return Yn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=c1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=c1)},persist:function(){},isPersistent:c1}),e}var Qp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},a$=io(Qp),Y0=Yn({},Qp,{view:0,detail:0}),woe=io(Y0),wN,CN,Vm,_C=Yn({},Y0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:l$,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vm&&(Vm&&t.type==="mousemove"?(wN=t.screenX-Vm.screenX,CN=t.screenY-Vm.screenY):CN=wN=0,Vm=t),wN)},movementY:function(t){return"movementY"in t?t.movementY:CN}}),lU=io(_C),Coe=Yn({},_C,{dataTransfer:0}),Soe=io(Coe),Boe=Yn({},Y0,{relatedTarget:0}),SN=io(Boe),Noe=Yn({},Qp,{animationName:0,elapsedTime:0,pseudoElement:0}),Eoe=io(Noe),Ioe=Yn({},Qp,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),koe=io(Ioe),Toe=Yn({},Qp,{data:0}),cU=io(Toe),Foe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$oe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_oe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ooe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_oe[t])?!!e[t]:!1}function l$(){return Ooe}var Doe=Yn({},Y0,{key:function(t){if(t.key){var e=Foe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ub(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$oe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:l$,charCode:function(t){return t.type==="keypress"?Ub(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ub(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Roe=io(Doe),Poe=Yn({},_C,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uU=io(Poe),Uoe=Yn({},Y0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:l$}),Loe=io(Uoe),joe=Yn({},Qp,{propertyName:0,elapsedTime:0,pseudoElement:0}),Moe=io(joe),Qoe=Yn({},_C,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hoe=io(Qoe),zoe=[9,13,27,32],c$=lc&&"CompositionEvent"in window,Gg=null;lc&&"documentMode"in document&&(Gg=document.documentMode);var Voe=lc&&"TextEvent"in window&&!Gg,ez=lc&&(!c$||Gg&&8<Gg&&11>=Gg),AU=" ",dU=!1;function tz(t,e){switch(t){case"keyup":return zoe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nz(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zf=!1;function Woe(t,e){switch(t){case"compositionend":return nz(e);case"keypress":return e.which!==32?null:(dU=!0,AU);case"textInput":return t=e.data,t===AU&&dU?null:t;default:return null}}function Goe(t,e){if(Zf)return t==="compositionend"||!c$&&tz(t,e)?(t=Z9(),Pb=o$=au=null,Zf=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ez&&e.locale!=="ko"?null:e.data;default:return null}}var Koe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fU(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Koe[t.type]:e==="textarea"}function rz(t,e,n,r){O9(r),e=hw(e,"onChange"),0<e.length&&(n=new a$("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Kg=null,wy=null;function Xoe(t){hz(t,0)}function OC(t){var e=nh(t);if(E9(e))return t}function qoe(t,e){if(t==="change")return e}var sz=!1;if(lc){var BN;if(lc){var NN="oninput"in document;if(!NN){var hU=document.createElement("div");hU.setAttribute("oninput","return;"),NN=typeof hU.oninput=="function"}BN=NN}else BN=!1;sz=BN&&(!document.documentMode||9<document.documentMode)}function pU(){Kg&&(Kg.detachEvent("onpropertychange",iz),wy=Kg=null)}function iz(t){if(t.propertyName==="value"&&OC(wy)){var e=[];rz(e,wy,t,t$(t)),U9(Xoe,e)}}function Yoe(t,e,n){t==="focusin"?(pU(),Kg=e,wy=n,Kg.attachEvent("onpropertychange",iz)):t==="focusout"&&pU()}function Joe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return OC(wy)}function Zoe(t,e){if(t==="click")return OC(e)}function eae(t,e){if(t==="input"||t==="change")return OC(e)}function tae(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ca=typeof Object.is=="function"?Object.is:tae;function Cy(t,e){if(Ca(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!_E.call(e,s)||!Ca(t[s],e[s]))return!1}return!0}function mU(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gU(t,e){var n=mU(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mU(n)}}function oz(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oz(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function az(){for(var t=window,e=aw();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=aw(t.document)}return e}function u$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nae(t){var e=az(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oz(n.ownerDocument.documentElement,n)){if(r!==null&&u$(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=gU(n,i);var o=gU(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rae=lc&&"documentMode"in document&&11>=document.documentMode,eh=null,JE=null,Xg=null,ZE=!1;function yU(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ZE||eh==null||eh!==aw(r)||(r=eh,"selectionStart"in r&&u$(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xg&&Cy(Xg,r)||(Xg=r,r=hw(JE,"onSelect"),0<r.length&&(e=new a$("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=eh)))}function u1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var th={animationend:u1("Animation","AnimationEnd"),animationiteration:u1("Animation","AnimationIteration"),animationstart:u1("Animation","AnimationStart"),transitionend:u1("Transition","TransitionEnd")},EN={},lz={};lc&&(lz=document.createElement("div").style,"AnimationEvent"in window||(delete th.animationend.animation,delete th.animationiteration.animation,delete th.animationstart.animation),"TransitionEvent"in window||delete th.transitionend.transition);function DC(t){if(EN[t])return EN[t];if(!th[t])return t;var e=th[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lz)return EN[t]=e[n];return t}var cz=DC("animationend"),uz=DC("animationiteration"),Az=DC("animationstart"),dz=DC("transitionend"),fz=new Map,xU="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function eA(t,e){fz.set(t,e),rf(e,[t])}for(var IN=0;IN<xU.length;IN++){var kN=xU[IN],sae=kN.toLowerCase(),iae=kN[0].toUpperCase()+kN.slice(1);eA(sae,"on"+iae)}eA(cz,"onAnimationEnd");eA(uz,"onAnimationIteration");eA(Az,"onAnimationStart");eA("dblclick","onDoubleClick");eA("focusin","onFocus");eA("focusout","onBlur");eA(dz,"onTransitionEnd");zh("onMouseEnter",["mouseout","mouseover"]);zh("onMouseLeave",["mouseout","mouseover"]);zh("onPointerEnter",["pointerout","pointerover"]);zh("onPointerLeave",["pointerout","pointerover"]);rf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rf("onBeforeInput",["compositionend","keypress","textInput","paste"]);rf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oae=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cg));function vU(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,soe(r,e,void 0,t),t.currentTarget=null}function hz(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;vU(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;vU(s,a,c),i=l}}}if(cw)throw t=KE,cw=!1,KE=null,t}function kn(t,e){var n=e[sI];n===void 0&&(n=e[sI]=new Set);var r=t+"__bubble";n.has(r)||(pz(e,t,2,!1),n.add(r))}function TN(t,e,n){var r=0;e&&(r|=4),pz(n,t,r,e)}var A1="_reactListening"+Math.random().toString(36).slice(2);function Sy(t){if(!t[A1]){t[A1]=!0,w9.forEach(function(n){n!=="selectionchange"&&(oae.has(n)||TN(n,!1,t),TN(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[A1]||(e[A1]=!0,TN("selectionchange",!1,e))}}function pz(t,e,n,r){switch(J9(e)){case 1:var s=voe;break;case 4:s=boe;break;default:s=i$}n=s.bind(null,e,n,t),s=void 0,!GE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function FN(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=JA(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}U9(function(){var c=i,u=t$(n),A=[];e:{var d=fz.get(t);if(d!==void 0){var f=a$,h=t;switch(t){case"keypress":if(Ub(n)===0)break e;case"keydown":case"keyup":f=Roe;break;case"focusin":h="focus",f=SN;break;case"focusout":h="blur",f=SN;break;case"beforeblur":case"afterblur":f=SN;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=lU;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Soe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Loe;break;case cz:case uz:case Az:f=Eoe;break;case dz:f=Moe;break;case"scroll":f=woe;break;case"wheel":f=Hoe;break;case"copy":case"cut":case"paste":f=koe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=uU}var p=(e&4)!==0,m=!p&&t==="scroll",y=p?d!==null?d+"Capture":null:d;p=[];for(var x=c,v;x!==null;){v=x;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,y!==null&&(b=yy(x,y),b!=null&&p.push(By(x,b,v)))),m)break;x=x.return}0<p.length&&(d=new f(d,h,null,n,u),A.push({event:d,listeners:p}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==VE&&(h=n.relatedTarget||n.fromElement)&&(JA(h)||h[cc]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(h=n.relatedTarget||n.toElement,f=c,h=h?JA(h):null,h!==null&&(m=sf(h),h!==m||h.tag!==5&&h.tag!==6)&&(h=null)):(f=null,h=c),f!==h)){if(p=lU,b="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(p=uU,b="onPointerLeave",y="onPointerEnter",x="pointer"),m=f==null?d:nh(f),v=h==null?d:nh(h),d=new p(b,x+"leave",f,n,u),d.target=m,d.relatedTarget=v,b=null,JA(u)===c&&(p=new p(y,x+"enter",h,n,u),p.target=v,p.relatedTarget=m,b=p),m=b,f&&h)t:{for(p=f,y=h,x=0,v=p;v;v=Tf(v))x++;for(v=0,b=y;b;b=Tf(b))v++;for(;0<x-v;)p=Tf(p),x--;for(;0<v-x;)y=Tf(y),v--;for(;x--;){if(p===y||y!==null&&p===y.alternate)break t;p=Tf(p),y=Tf(y)}p=null}else p=null;f!==null&&bU(A,d,f,p,!1),h!==null&&m!==null&&bU(A,m,h,p,!0)}}e:{if(d=c?nh(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var w=qoe;else if(fU(d))if(sz)w=eae;else{w=Joe;var C=Yoe}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=Zoe);if(w&&(w=w(t,c))){rz(A,w,n,u);break e}C&&C(t,d,c),t==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&jE(d,"number",d.value)}switch(C=c?nh(c):window,t){case"focusin":(fU(C)||C.contentEditable==="true")&&(eh=C,JE=c,Xg=null);break;case"focusout":Xg=JE=eh=null;break;case"mousedown":ZE=!0;break;case"contextmenu":case"mouseup":case"dragend":ZE=!1,yU(A,n,u);break;case"selectionchange":if(rae)break;case"keydown":case"keyup":yU(A,n,u)}var B;if(c$)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Zf?tz(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(ez&&n.locale!=="ko"&&(Zf||S!=="onCompositionStart"?S==="onCompositionEnd"&&Zf&&(B=Z9()):(au=u,o$="value"in au?au.value:au.textContent,Zf=!0)),C=hw(c,S),0<C.length&&(S=new cU(S,t,null,n,u),A.push({event:S,listeners:C}),B?S.data=B:(B=nz(n),B!==null&&(S.data=B)))),(B=Voe?Woe(t,n):Goe(t,n))&&(c=hw(c,"onBeforeInput"),0<c.length&&(u=new cU("onBeforeInput","beforeinput",null,n,u),A.push({event:u,listeners:c}),u.data=B))}hz(A,e)})}function By(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hw(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=yy(t,n),i!=null&&r.unshift(By(t,i,s)),i=yy(t,e),i!=null&&r.push(By(t,i,s))),t=t.return}return r}function Tf(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function bU(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=yy(n,i),l!=null&&o.unshift(By(n,l,a))):s||(l=yy(n,i),l!=null&&o.push(By(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var aae=/\r\n?/g,lae=/\u0000|\uFFFD/g;function wU(t){return(typeof t=="string"?t:""+t).replace(aae,`
`).replace(lae,"")}function d1(t,e,n){if(e=wU(e),wU(t)!==e&&n)throw Error(_e(425))}function pw(){}var eI=null,tI=null;function nI(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rI=typeof setTimeout=="function"?setTimeout:void 0,cae=typeof clearTimeout=="function"?clearTimeout:void 0,CU=typeof Promise=="function"?Promise:void 0,uae=typeof queueMicrotask=="function"?queueMicrotask:typeof CU<"u"?function(t){return CU.resolve(null).then(t).catch(Aae)}:rI;function Aae(t){setTimeout(function(){throw t})}function $N(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),by(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);by(e)}function wu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function SU(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Hp=Math.random().toString(36).slice(2),el="__reactFiber$"+Hp,Ny="__reactProps$"+Hp,cc="__reactContainer$"+Hp,sI="__reactEvents$"+Hp,dae="__reactListeners$"+Hp,fae="__reactHandles$"+Hp;function JA(t){var e=t[el];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cc]||n[el]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=SU(t);t!==null;){if(n=t[el])return n;t=SU(t)}return e}t=n,n=t.parentNode}return null}function J0(t){return t=t[el]||t[cc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function nh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(_e(33))}function RC(t){return t[Ny]||null}var iI=[],rh=-1;function tA(t){return{current:t}}function $n(t){0>rh||(t.current=iI[rh],iI[rh]=null,rh--)}function Bn(t,e){rh++,iI[rh]=t.current,t.current=e}var Lu={},Us=tA(Lu),Ei=tA(!1),Td=Lu;function Vh(t,e){var n=t.type.contextTypes;if(!n)return Lu;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ii(t){return t=t.childContextTypes,t!=null}function mw(){$n(Ei),$n(Us)}function BU(t,e,n){if(Us.current!==Lu)throw Error(_e(168));Bn(Us,e),Bn(Ei,n)}function mz(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(_e(108,Yie(t)||"Unknown",s));return Yn({},n,r)}function gw(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Lu,Td=Us.current,Bn(Us,t),Bn(Ei,Ei.current),!0}function NU(t,e,n){var r=t.stateNode;if(!r)throw Error(_e(169));n?(t=mz(t,e,Td),r.__reactInternalMemoizedMergedChildContext=t,$n(Ei),$n(Us),Bn(Us,t)):$n(Ei),Bn(Ei,n)}var Ul=null,PC=!1,_N=!1;function gz(t){Ul===null?Ul=[t]:Ul.push(t)}function hae(t){PC=!0,gz(t)}function nA(){if(!_N&&Ul!==null){_N=!0;var t=0,e=on;try{var n=Ul;for(on=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ul=null,PC=!1}catch(s){throw Ul!==null&&(Ul=Ul.slice(t+1)),Q9(n$,nA),s}finally{on=e,_N=!1}}return null}var sh=[],ih=0,yw=null,xw=0,vo=[],bo=0,Fd=null,Wl=1,Gl="";function UA(t,e){sh[ih++]=xw,sh[ih++]=yw,yw=t,xw=e}function yz(t,e,n){vo[bo++]=Wl,vo[bo++]=Gl,vo[bo++]=Fd,Fd=t;var r=Wl;t=Gl;var s=32-ma(r)-1;r&=~(1<<s),n+=1;var i=32-ma(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Wl=1<<32-ma(e)+s|n<<s|r,Gl=i+t}else Wl=1<<i|n<<s|r,Gl=t}function A$(t){t.return!==null&&(UA(t,1),yz(t,1,0))}function d$(t){for(;t===yw;)yw=sh[--ih],sh[ih]=null,xw=sh[--ih],sh[ih]=null;for(;t===Fd;)Fd=vo[--bo],vo[bo]=null,Gl=vo[--bo],vo[bo]=null,Wl=vo[--bo],vo[bo]=null}var eo=null,Ji=null,Ln=!1,ca=null;function xz(t,e){var n=So(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function EU(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,eo=t,Ji=wu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,eo=t,Ji=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Fd!==null?{id:Wl,overflow:Gl}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=So(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,eo=t,Ji=null,!0):!1;default:return!1}}function oI(t){return(t.mode&1)!==0&&(t.flags&128)===0}function aI(t){if(Ln){var e=Ji;if(e){var n=e;if(!EU(t,e)){if(oI(t))throw Error(_e(418));e=wu(n.nextSibling);var r=eo;e&&EU(t,e)?xz(r,n):(t.flags=t.flags&-4097|2,Ln=!1,eo=t)}}else{if(oI(t))throw Error(_e(418));t.flags=t.flags&-4097|2,Ln=!1,eo=t}}}function IU(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;eo=t}function f1(t){if(t!==eo)return!1;if(!Ln)return IU(t),Ln=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nI(t.type,t.memoizedProps)),e&&(e=Ji)){if(oI(t))throw vz(),Error(_e(418));for(;e;)xz(t,e),e=wu(e.nextSibling)}if(IU(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(_e(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ji=wu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ji=null}}else Ji=eo?wu(t.stateNode.nextSibling):null;return!0}function vz(){for(var t=Ji;t;)t=wu(t.nextSibling)}function Wh(){Ji=eo=null,Ln=!1}function f$(t){ca===null?ca=[t]:ca.push(t)}var pae=Sc.ReactCurrentBatchConfig;function Wm(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_e(309));var r=n.stateNode}if(!r)throw Error(_e(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(_e(284));if(!n._owner)throw Error(_e(290,t))}return t}function h1(t,e){throw t=Object.prototype.toString.call(e),Error(_e(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function kU(t){var e=t._init;return e(t._payload)}function bz(t){function e(y,x){if(t){var v=y.deletions;v===null?(y.deletions=[x],y.flags|=16):v.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function s(y,x){return y=Nu(y,x),y.index=0,y.sibling=null,y}function i(y,x,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<x?(y.flags|=2,x):v):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,x,v,b){return x===null||x.tag!==6?(x=jN(v,y.mode,b),x.return=y,x):(x=s(x,v),x.return=y,x)}function l(y,x,v,b){var w=v.type;return w===Jf?u(y,x,v.props.children,b,v.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Wc&&kU(w)===x.type)?(b=s(x,v.props),b.ref=Wm(y,x,v),b.return=y,b):(b=Vb(v.type,v.key,v.props,null,y.mode,b),b.ref=Wm(y,x,v),b.return=y,b)}function c(y,x,v,b){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=MN(v,y.mode,b),x.return=y,x):(x=s(x,v.children||[]),x.return=y,x)}function u(y,x,v,b,w){return x===null||x.tag!==7?(x=xd(v,y.mode,b,w),x.return=y,x):(x=s(x,v),x.return=y,x)}function A(y,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return x=jN(""+x,y.mode,v),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case r1:return v=Vb(x.type,x.key,x.props,null,y.mode,v),v.ref=Wm(y,null,x),v.return=y,v;case Yf:return x=MN(x,y.mode,v),x.return=y,x;case Wc:var b=x._init;return A(y,b(x._payload),v)}if(bg(x)||Mm(x))return x=xd(x,y.mode,v,null),x.return=y,x;h1(y,x)}return null}function d(y,x,v,b){var w=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return w!==null?null:a(y,x,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case r1:return v.key===w?l(y,x,v,b):null;case Yf:return v.key===w?c(y,x,v,b):null;case Wc:return w=v._init,d(y,x,w(v._payload),b)}if(bg(v)||Mm(v))return w!==null?null:u(y,x,v,b,null);h1(y,v)}return null}function f(y,x,v,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(v)||null,a(x,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case r1:return y=y.get(b.key===null?v:b.key)||null,l(x,y,b,w);case Yf:return y=y.get(b.key===null?v:b.key)||null,c(x,y,b,w);case Wc:var C=b._init;return f(y,x,v,C(b._payload),w)}if(bg(b)||Mm(b))return y=y.get(v)||null,u(x,y,b,w,null);h1(x,b)}return null}function h(y,x,v,b){for(var w=null,C=null,B=x,S=x=0,N=null;B!==null&&S<v.length;S++){B.index>S?(N=B,B=null):N=B.sibling;var k=d(y,B,v[S],b);if(k===null){B===null&&(B=N);break}t&&B&&k.alternate===null&&e(y,B),x=i(k,x,S),C===null?w=k:C.sibling=k,C=k,B=N}if(S===v.length)return n(y,B),Ln&&UA(y,S),w;if(B===null){for(;S<v.length;S++)B=A(y,v[S],b),B!==null&&(x=i(B,x,S),C===null?w=B:C.sibling=B,C=B);return Ln&&UA(y,S),w}for(B=r(y,B);S<v.length;S++)N=f(B,y,S,v[S],b),N!==null&&(t&&N.alternate!==null&&B.delete(N.key===null?S:N.key),x=i(N,x,S),C===null?w=N:C.sibling=N,C=N);return t&&B.forEach(function(O){return e(y,O)}),Ln&&UA(y,S),w}function p(y,x,v,b){var w=Mm(v);if(typeof w!="function")throw Error(_e(150));if(v=w.call(v),v==null)throw Error(_e(151));for(var C=w=null,B=x,S=x=0,N=null,k=v.next();B!==null&&!k.done;S++,k=v.next()){B.index>S?(N=B,B=null):N=B.sibling;var O=d(y,B,k.value,b);if(O===null){B===null&&(B=N);break}t&&B&&O.alternate===null&&e(y,B),x=i(O,x,S),C===null?w=O:C.sibling=O,C=O,B=N}if(k.done)return n(y,B),Ln&&UA(y,S),w;if(B===null){for(;!k.done;S++,k=v.next())k=A(y,k.value,b),k!==null&&(x=i(k,x,S),C===null?w=k:C.sibling=k,C=k);return Ln&&UA(y,S),w}for(B=r(y,B);!k.done;S++,k=v.next())k=f(B,y,S,k.value,b),k!==null&&(t&&k.alternate!==null&&B.delete(k.key===null?S:k.key),x=i(k,x,S),C===null?w=k:C.sibling=k,C=k);return t&&B.forEach(function(U){return e(y,U)}),Ln&&UA(y,S),w}function m(y,x,v,b){if(typeof v=="object"&&v!==null&&v.type===Jf&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case r1:e:{for(var w=v.key,C=x;C!==null;){if(C.key===w){if(w=v.type,w===Jf){if(C.tag===7){n(y,C.sibling),x=s(C,v.props.children),x.return=y,y=x;break e}}else if(C.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Wc&&kU(w)===C.type){n(y,C.sibling),x=s(C,v.props),x.ref=Wm(y,C,v),x.return=y,y=x;break e}n(y,C);break}else e(y,C);C=C.sibling}v.type===Jf?(x=xd(v.props.children,y.mode,b,v.key),x.return=y,y=x):(b=Vb(v.type,v.key,v.props,null,y.mode,b),b.ref=Wm(y,x,v),b.return=y,y=b)}return o(y);case Yf:e:{for(C=v.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){n(y,x.sibling),x=s(x,v.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=MN(v,y.mode,b),x.return=y,y=x}return o(y);case Wc:return C=v._init,m(y,x,C(v._payload),b)}if(bg(v))return h(y,x,v,b);if(Mm(v))return p(y,x,v,b);h1(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,x!==null&&x.tag===6?(n(y,x.sibling),x=s(x,v),x.return=y,y=x):(n(y,x),x=jN(v,y.mode,b),x.return=y,y=x),o(y)):n(y,x)}return m}var Gh=bz(!0),wz=bz(!1),vw=tA(null),bw=null,oh=null,h$=null;function p$(){h$=oh=bw=null}function m$(t){var e=vw.current;$n(vw),t._currentValue=e}function lI(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vh(t,e){bw=t,h$=oh=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wi=!0),t.firstContext=null)}function Lo(t){var e=t._currentValue;if(h$!==t)if(t={context:t,memoizedValue:e,next:null},oh===null){if(bw===null)throw Error(_e(308));oh=t,bw.dependencies={lanes:0,firstContext:t}}else oh=oh.next=t;return e}var ZA=null;function g$(t){ZA===null?ZA=[t]:ZA.push(t)}function Cz(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,g$(e)):(n.next=s.next,s.next=n),e.interleaved=n,uc(t,r)}function uc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gc=!1;function y$(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sz(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function tc(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Vt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,uc(t,n)}return s=r.interleaved,s===null?(e.next=e,g$(r)):(e.next=s.next,s.next=e),r.interleaved=e,uc(t,n)}function Lb(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,r$(t,n)}}function TU(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ww(t,e,n,r){var s=t.updateQueue;Gc=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var A=s.baseState;o=0,u=c=l=null,a=i;do{var d=a.lane,f=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var h=t,p=a;switch(d=e,f=n,p.tag){case 1:if(h=p.payload,typeof h=="function"){A=h.call(f,A,d);break e}A=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=p.payload,d=typeof h=="function"?h.call(f,A,d):h,d==null)break e;A=Yn({},A,d);break e;case 2:Gc=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=A):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(u===null&&(l=A),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);_d|=o,t.lanes=o,t.memoizedState=A}}function FU(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(_e(191,s));s.call(r)}}}var Z0={},ol=tA(Z0),Ey=tA(Z0),Iy=tA(Z0);function ed(t){if(t===Z0)throw Error(_e(174));return t}function x$(t,e){switch(Bn(Iy,e),Bn(Ey,t),Bn(ol,Z0),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:QE(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=QE(e,t)}$n(ol),Bn(ol,e)}function Kh(){$n(ol),$n(Ey),$n(Iy)}function Bz(t){ed(Iy.current);var e=ed(ol.current),n=QE(e,t.type);e!==n&&(Bn(Ey,t),Bn(ol,n))}function v$(t){Ey.current===t&&($n(ol),$n(Ey))}var Gn=tA(0);function Cw(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ON=[];function b$(){for(var t=0;t<ON.length;t++)ON[t]._workInProgressVersionPrimary=null;ON.length=0}var jb=Sc.ReactCurrentDispatcher,DN=Sc.ReactCurrentBatchConfig,$d=0,Xn=null,Rr=null,Yr=null,Sw=!1,qg=!1,ky=0,mae=0;function Bs(){throw Error(_e(321))}function w$(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ca(t[n],e[n]))return!1;return!0}function C$(t,e,n,r,s,i){if($d=i,Xn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jb.current=t===null||t.memoizedState===null?vae:bae,t=n(r,s),qg){i=0;do{if(qg=!1,ky=0,25<=i)throw Error(_e(301));i+=1,Yr=Rr=null,e.updateQueue=null,jb.current=wae,t=n(r,s)}while(qg)}if(jb.current=Bw,e=Rr!==null&&Rr.next!==null,$d=0,Yr=Rr=Xn=null,Sw=!1,e)throw Error(_e(300));return t}function S$(){var t=ky!==0;return ky=0,t}function za(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yr===null?Xn.memoizedState=Yr=t:Yr=Yr.next=t,Yr}function jo(){if(Rr===null){var t=Xn.alternate;t=t!==null?t.memoizedState:null}else t=Rr.next;var e=Yr===null?Xn.memoizedState:Yr.next;if(e!==null)Yr=e,Rr=t;else{if(t===null)throw Error(_e(310));Rr=t,t={memoizedState:Rr.memoizedState,baseState:Rr.baseState,baseQueue:Rr.baseQueue,queue:Rr.queue,next:null},Yr===null?Xn.memoizedState=Yr=t:Yr=Yr.next=t}return Yr}function Ty(t,e){return typeof e=="function"?e(t):e}function RN(t){var e=jo(),n=e.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=t;var r=Rr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if(($d&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var A={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=A,o=r):l=l.next=A,Xn.lanes|=u,_d|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Ca(r,e.memoizedState)||(wi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Xn.lanes|=i,_d|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function PN(t){var e=jo(),n=e.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ca(i,e.memoizedState)||(wi=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Nz(){}function Ez(t,e){var n=Xn,r=jo(),s=e(),i=!Ca(r.memoizedState,s);if(i&&(r.memoizedState=s,wi=!0),r=r.queue,B$(Tz.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Yr!==null&&Yr.memoizedState.tag&1){if(n.flags|=2048,Fy(9,kz.bind(null,n,r,s,e),void 0,null),es===null)throw Error(_e(349));$d&30||Iz(n,e,s)}return s}function Iz(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xn.updateQueue,e===null?(e={lastEffect:null,stores:null},Xn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kz(t,e,n,r){e.value=n,e.getSnapshot=r,Fz(e)&&$z(t)}function Tz(t,e,n){return n(function(){Fz(e)&&$z(t)})}function Fz(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ca(t,n)}catch{return!0}}function $z(t){var e=uc(t,1);e!==null&&ga(e,t,1,-1)}function $U(t){var e=za();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ty,lastRenderedState:t},e.queue=t,t=t.dispatch=xae.bind(null,Xn,t),[e.memoizedState,t]}function Fy(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xn.updateQueue,e===null?(e={lastEffect:null,stores:null},Xn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _z(){return jo().memoizedState}function Mb(t,e,n,r){var s=za();Xn.flags|=t,s.memoizedState=Fy(1|e,n,void 0,r===void 0?null:r)}function UC(t,e,n,r){var s=jo();r=r===void 0?null:r;var i=void 0;if(Rr!==null){var o=Rr.memoizedState;if(i=o.destroy,r!==null&&w$(r,o.deps)){s.memoizedState=Fy(e,n,i,r);return}}Xn.flags|=t,s.memoizedState=Fy(1|e,n,i,r)}function _U(t,e){return Mb(8390656,8,t,e)}function B$(t,e){return UC(2048,8,t,e)}function Oz(t,e){return UC(4,2,t,e)}function Dz(t,e){return UC(4,4,t,e)}function Rz(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Pz(t,e,n){return n=n!=null?n.concat([t]):null,UC(4,4,Rz.bind(null,e,t),n)}function N$(){}function Uz(t,e){var n=jo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&w$(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Lz(t,e){var n=jo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&w$(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jz(t,e,n){return $d&21?(Ca(n,e)||(n=V9(),Xn.lanes|=n,_d|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wi=!0),t.memoizedState=n)}function gae(t,e){var n=on;on=n!==0&&4>n?n:4,t(!0);var r=DN.transition;DN.transition={};try{t(!1),e()}finally{on=n,DN.transition=r}}function Mz(){return jo().memoizedState}function yae(t,e,n){var r=Bu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qz(t))Hz(e,n);else if(n=Cz(t,e,n,r),n!==null){var s=ri();ga(n,t,r,s),zz(n,e,r)}}function xae(t,e,n){var r=Bu(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qz(t))Hz(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ca(a,o)){var l=e.interleaved;l===null?(s.next=s,g$(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Cz(t,e,s,r),n!==null&&(s=ri(),ga(n,t,r,s),zz(n,e,r))}}function Qz(t){var e=t.alternate;return t===Xn||e!==null&&e===Xn}function Hz(t,e){qg=Sw=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zz(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,r$(t,n)}}var Bw={readContext:Lo,useCallback:Bs,useContext:Bs,useEffect:Bs,useImperativeHandle:Bs,useInsertionEffect:Bs,useLayoutEffect:Bs,useMemo:Bs,useReducer:Bs,useRef:Bs,useState:Bs,useDebugValue:Bs,useDeferredValue:Bs,useTransition:Bs,useMutableSource:Bs,useSyncExternalStore:Bs,useId:Bs,unstable_isNewReconciler:!1},vae={readContext:Lo,useCallback:function(t,e){return za().memoizedState=[t,e===void 0?null:e],t},useContext:Lo,useEffect:_U,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Mb(4194308,4,Rz.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Mb(4194308,4,t,e)},useInsertionEffect:function(t,e){return Mb(4,2,t,e)},useMemo:function(t,e){var n=za();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=za();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=yae.bind(null,Xn,t),[r.memoizedState,t]},useRef:function(t){var e=za();return t={current:t},e.memoizedState=t},useState:$U,useDebugValue:N$,useDeferredValue:function(t){return za().memoizedState=t},useTransition:function(){var t=$U(!1),e=t[0];return t=gae.bind(null,t[1]),za().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xn,s=za();if(Ln){if(n===void 0)throw Error(_e(407));n=n()}else{if(n=e(),es===null)throw Error(_e(349));$d&30||Iz(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,_U(Tz.bind(null,r,i,t),[t]),r.flags|=2048,Fy(9,kz.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=za(),e=es.identifierPrefix;if(Ln){var n=Gl,r=Wl;n=(r&~(1<<32-ma(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ky++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mae++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bae={readContext:Lo,useCallback:Uz,useContext:Lo,useEffect:B$,useImperativeHandle:Pz,useInsertionEffect:Oz,useLayoutEffect:Dz,useMemo:Lz,useReducer:RN,useRef:_z,useState:function(){return RN(Ty)},useDebugValue:N$,useDeferredValue:function(t){var e=jo();return jz(e,Rr.memoizedState,t)},useTransition:function(){var t=RN(Ty)[0],e=jo().memoizedState;return[t,e]},useMutableSource:Nz,useSyncExternalStore:Ez,useId:Mz,unstable_isNewReconciler:!1},wae={readContext:Lo,useCallback:Uz,useContext:Lo,useEffect:B$,useImperativeHandle:Pz,useInsertionEffect:Oz,useLayoutEffect:Dz,useMemo:Lz,useReducer:PN,useRef:_z,useState:function(){return PN(Ty)},useDebugValue:N$,useDeferredValue:function(t){var e=jo();return Rr===null?e.memoizedState=t:jz(e,Rr.memoizedState,t)},useTransition:function(){var t=PN(Ty)[0],e=jo().memoizedState;return[t,e]},useMutableSource:Nz,useSyncExternalStore:Ez,useId:Mz,unstable_isNewReconciler:!1};function ra(t,e){if(t&&t.defaultProps){e=Yn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function cI(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Yn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var LC={isMounted:function(t){return(t=t._reactInternals)?sf(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ri(),s=Bu(t),i=tc(r,s);i.payload=e,n!=null&&(i.callback=n),e=Cu(t,i,s),e!==null&&(ga(e,t,s,r),Lb(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ri(),s=Bu(t),i=tc(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Cu(t,i,s),e!==null&&(ga(e,t,s,r),Lb(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ri(),r=Bu(t),s=tc(n,r);s.tag=2,e!=null&&(s.callback=e),e=Cu(t,s,r),e!==null&&(ga(e,t,r,n),Lb(e,t,r))}};function OU(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Cy(n,r)||!Cy(s,i):!0}function Vz(t,e,n){var r=!1,s=Lu,i=e.contextType;return typeof i=="object"&&i!==null?i=Lo(i):(s=Ii(e)?Td:Us.current,r=e.contextTypes,i=(r=r!=null)?Vh(t,s):Lu),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=LC,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function DU(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&LC.enqueueReplaceState(e,e.state,null)}function uI(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},y$(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Lo(i):(i=Ii(e)?Td:Us.current,s.context=Vh(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(cI(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&LC.enqueueReplaceState(s,s.state,null),ww(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Xh(t,e){try{var n="",r=e;do n+=qie(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function UN(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function AI(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Cae=typeof WeakMap=="function"?WeakMap:Map;function Wz(t,e,n){n=tc(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ew||(Ew=!0,bI=r),AI(t,e)},n}function Gz(t,e,n){n=tc(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){AI(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){AI(t,e),typeof r!="function"&&(Su===null?Su=new Set([this]):Su.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function RU(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Cae;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Pae.bind(null,t,e,n),e.then(t,t))}function PU(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function UU(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=tc(-1,1),e.tag=2,Cu(n,e,1))),n.lanes|=1),t)}var Sae=Sc.ReactCurrentOwner,wi=!1;function qs(t,e,n,r){e.child=t===null?wz(e,null,n,r):Gh(e,t.child,n,r)}function LU(t,e,n,r,s){n=n.render;var i=e.ref;return vh(e,s),r=C$(t,e,n,r,i,s),n=S$(),t!==null&&!wi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ac(t,e,s)):(Ln&&n&&A$(e),e.flags|=1,qs(t,e,r,s),e.child)}function jU(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!O$(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Kz(t,e,i,r,s)):(t=Vb(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Cy,n(o,r)&&t.ref===e.ref)return Ac(t,e,s)}return e.flags|=1,t=Nu(i,r),t.ref=e.ref,t.return=e,e.child=t}function Kz(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Cy(i,r)&&t.ref===e.ref)if(wi=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(wi=!0);else return e.lanes=t.lanes,Ac(t,e,s)}return dI(t,e,n,r,s)}function Xz(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bn(lh,Gi),Gi|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Bn(lh,Gi),Gi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Bn(lh,Gi),Gi|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Bn(lh,Gi),Gi|=r;return qs(t,e,s,n),e.child}function qz(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function dI(t,e,n,r,s){var i=Ii(n)?Td:Us.current;return i=Vh(e,i),vh(e,s),n=C$(t,e,n,r,i,s),r=S$(),t!==null&&!wi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ac(t,e,s)):(Ln&&r&&A$(e),e.flags|=1,qs(t,e,n,s),e.child)}function MU(t,e,n,r,s){if(Ii(n)){var i=!0;gw(e)}else i=!1;if(vh(e,s),e.stateNode===null)Qb(t,e),Vz(e,n,r),uI(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Lo(c):(c=Ii(n)?Td:Us.current,c=Vh(e,c));var u=n.getDerivedStateFromProps,A=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";A||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&DU(e,o,r,c),Gc=!1;var d=e.memoizedState;o.state=d,ww(e,r,o,s),l=e.memoizedState,a!==r||d!==l||Ei.current||Gc?(typeof u=="function"&&(cI(e,n,u,r),l=e.memoizedState),(a=Gc||OU(e,n,a,r,d,l,c))?(A||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Sz(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ra(e.type,a),o.props=c,A=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Lo(l):(l=Ii(n)?Td:Us.current,l=Vh(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==A||d!==l)&&DU(e,o,r,l),Gc=!1,d=e.memoizedState,o.state=d,ww(e,r,o,s);var h=e.memoizedState;a!==A||d!==h||Ei.current||Gc?(typeof f=="function"&&(cI(e,n,f,r),h=e.memoizedState),(c=Gc||OU(e,n,c,r,d,h,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,h,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,h,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=h),o.props=r,o.state=h,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return fI(t,e,n,r,i,s)}function fI(t,e,n,r,s,i){qz(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&NU(e,n,!1),Ac(t,e,i);r=e.stateNode,Sae.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Gh(e,t.child,null,i),e.child=Gh(e,null,a,i)):qs(t,e,a,i),e.memoizedState=r.state,s&&NU(e,n,!0),e.child}function Yz(t){var e=t.stateNode;e.pendingContext?BU(t,e.pendingContext,e.pendingContext!==e.context):e.context&&BU(t,e.context,!1),x$(t,e.containerInfo)}function QU(t,e,n,r,s){return Wh(),f$(s),e.flags|=256,qs(t,e,n,r),e.child}var hI={dehydrated:null,treeContext:null,retryLane:0};function pI(t){return{baseLanes:t,cachePool:null,transitions:null}}function Jz(t,e,n){var r=e.pendingProps,s=Gn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Bn(Gn,s&1),t===null)return aI(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=QC(o,r,0,null),t=xd(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=pI(n),e.memoizedState=hI,t):E$(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Bae(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Nu(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Nu(a,i):(i=xd(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?pI(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=hI,r}return i=t.child,t=i.sibling,r=Nu(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function E$(t,e){return e=QC({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function p1(t,e,n,r){return r!==null&&f$(r),Gh(e,t.child,null,n),t=E$(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Bae(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=UN(Error(_e(422))),p1(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=QC({mode:"visible",children:r.children},s,0,null),i=xd(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Gh(e,t.child,null,o),e.child.memoizedState=pI(o),e.memoizedState=hI,i);if(!(e.mode&1))return p1(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(_e(419)),r=UN(i,r,void 0),p1(t,e,o,r)}if(a=(o&t.childLanes)!==0,wi||a){if(r=es,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,uc(t,s),ga(r,t,s,-1))}return _$(),r=UN(Error(_e(421))),p1(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Uae.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ji=wu(s.nextSibling),eo=e,Ln=!0,ca=null,t!==null&&(vo[bo++]=Wl,vo[bo++]=Gl,vo[bo++]=Fd,Wl=t.id,Gl=t.overflow,Fd=e),e=E$(e,r.children),e.flags|=4096,e)}function HU(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lI(t.return,e,n)}function LN(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Zz(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(qs(t,e,r.children,n),r=Gn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&HU(t,n,e);else if(t.tag===19)HU(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Bn(Gn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Cw(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),LN(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Cw(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}LN(e,!0,n,null,i);break;case"together":LN(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qb(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ac(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),_d|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(_e(153));if(e.child!==null){for(t=e.child,n=Nu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Nu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Nae(t,e,n){switch(e.tag){case 3:Yz(e),Wh();break;case 5:Bz(e);break;case 1:Ii(e.type)&&gw(e);break;case 4:x$(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Bn(vw,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Bn(Gn,Gn.current&1),e.flags|=128,null):n&e.child.childLanes?Jz(t,e,n):(Bn(Gn,Gn.current&1),t=Ac(t,e,n),t!==null?t.sibling:null);Bn(Gn,Gn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Zz(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Bn(Gn,Gn.current),r)break;return null;case 22:case 23:return e.lanes=0,Xz(t,e,n)}return Ac(t,e,n)}var eV,mI,tV,nV;eV=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mI=function(){};tV=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ed(ol.current);var i=null;switch(n){case"input":s=UE(t,s),r=UE(t,r),i=[];break;case"select":s=Yn({},s,{value:void 0}),r=Yn({},r,{value:void 0}),i=[];break;case"textarea":s=ME(t,s),r=ME(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=pw)}HE(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(my.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(my.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&kn("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};nV=function(t,e,n,r){n!==r&&(e.flags|=4)};function Gm(t,e){if(!Ln)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ns(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Eae(t,e,n){var r=e.pendingProps;switch(d$(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ns(e),null;case 1:return Ii(e.type)&&mw(),Ns(e),null;case 3:return r=e.stateNode,Kh(),$n(Ei),$n(Us),b$(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(f1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ca!==null&&(SI(ca),ca=null))),mI(t,e),Ns(e),null;case 5:v$(e);var s=ed(Iy.current);if(n=e.type,t!==null&&e.stateNode!=null)tV(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(_e(166));return Ns(e),null}if(t=ed(ol.current),f1(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[el]=e,r[Ny]=i,t=(e.mode&1)!==0,n){case"dialog":kn("cancel",r),kn("close",r);break;case"iframe":case"object":case"embed":kn("load",r);break;case"video":case"audio":for(s=0;s<Cg.length;s++)kn(Cg[s],r);break;case"source":kn("error",r);break;case"img":case"image":case"link":kn("error",r),kn("load",r);break;case"details":kn("toggle",r);break;case"input":JP(r,i),kn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},kn("invalid",r);break;case"textarea":eU(r,i),kn("invalid",r)}HE(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&d1(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&d1(r.textContent,a,t),s=["children",""+a]):my.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&kn("scroll",r)}switch(n){case"input":s1(r),ZP(r,i,!0);break;case"textarea":s1(r),tU(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=pw)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=T9(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[el]=e,t[Ny]=r,eV(t,e,!1,!1),e.stateNode=t;e:{switch(o=zE(n,r),n){case"dialog":kn("cancel",t),kn("close",t),s=r;break;case"iframe":case"object":case"embed":kn("load",t),s=r;break;case"video":case"audio":for(s=0;s<Cg.length;s++)kn(Cg[s],t);s=r;break;case"source":kn("error",t),s=r;break;case"img":case"image":case"link":kn("error",t),kn("load",t),s=r;break;case"details":kn("toggle",t),s=r;break;case"input":JP(t,r),s=UE(t,r),kn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Yn({},r,{value:void 0}),kn("invalid",t);break;case"textarea":eU(t,r),s=ME(t,r),kn("invalid",t);break;default:s=r}HE(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?_9(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&F9(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&gy(t,l):typeof l=="number"&&gy(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(my.hasOwnProperty(i)?l!=null&&i==="onScroll"&&kn("scroll",t):l!=null&&YF(t,i,l,o))}switch(n){case"input":s1(t),ZP(t,r,!1);break;case"textarea":s1(t),tU(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Uu(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?mh(t,!!r.multiple,i,!1):r.defaultValue!=null&&mh(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=pw)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ns(e),null;case 6:if(t&&e.stateNode!=null)nV(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(_e(166));if(n=ed(Iy.current),ed(ol.current),f1(e)){if(r=e.stateNode,n=e.memoizedProps,r[el]=e,(i=r.nodeValue!==n)&&(t=eo,t!==null))switch(t.tag){case 3:d1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&d1(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[el]=e,e.stateNode=r}return Ns(e),null;case 13:if($n(Gn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ln&&Ji!==null&&e.mode&1&&!(e.flags&128))vz(),Wh(),e.flags|=98560,i=!1;else if(i=f1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(_e(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(_e(317));i[el]=e}else Wh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ns(e),i=!1}else ca!==null&&(SI(ca),ca=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Gn.current&1?Lr===0&&(Lr=3):_$())),e.updateQueue!==null&&(e.flags|=4),Ns(e),null);case 4:return Kh(),mI(t,e),t===null&&Sy(e.stateNode.containerInfo),Ns(e),null;case 10:return m$(e.type._context),Ns(e),null;case 17:return Ii(e.type)&&mw(),Ns(e),null;case 19:if($n(Gn),i=e.memoizedState,i===null)return Ns(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Gm(i,!1);else{if(Lr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cw(t),o!==null){for(e.flags|=128,Gm(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Bn(Gn,Gn.current&1|2),e.child}t=t.sibling}i.tail!==null&&hr()>qh&&(e.flags|=128,r=!0,Gm(i,!1),e.lanes=4194304)}else{if(!r)if(t=Cw(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Gm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ln)return Ns(e),null}else 2*hr()-i.renderingStartTime>qh&&n!==1073741824&&(e.flags|=128,r=!0,Gm(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=hr(),e.sibling=null,n=Gn.current,Bn(Gn,r?n&1|2:n&1),e):(Ns(e),null);case 22:case 23:return $$(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gi&1073741824&&(Ns(e),e.subtreeFlags&6&&(e.flags|=8192)):Ns(e),null;case 24:return null;case 25:return null}throw Error(_e(156,e.tag))}function Iae(t,e){switch(d$(e),e.tag){case 1:return Ii(e.type)&&mw(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Kh(),$n(Ei),$n(Us),b$(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return v$(e),null;case 13:if($n(Gn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(_e(340));Wh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $n(Gn),null;case 4:return Kh(),null;case 10:return m$(e.type._context),null;case 22:case 23:return $$(),null;case 24:return null;default:return null}}var m1=!1,_s=!1,kae=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function ah(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tr(t,e,r)}else n.current=null}function gI(t,e,n){try{n()}catch(r){tr(t,e,r)}}var zU=!1;function Tae(t,e){if(eI=dw,t=az(),u$(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,A=t,d=null;t:for(;;){for(var f;A!==n||s!==0&&A.nodeType!==3||(a=o+s),A!==i||r!==0&&A.nodeType!==3||(l=o+r),A.nodeType===3&&(o+=A.nodeValue.length),(f=A.firstChild)!==null;)d=A,A=f;for(;;){if(A===t)break t;if(d===n&&++c===s&&(a=o),d===i&&++u===r&&(l=o),(f=A.nextSibling)!==null)break;A=d,d=A.parentNode}A=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(tI={focusedElem:t,selectionRange:n},dw=!1,Xe=e;Xe!==null;)if(e=Xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Xe=t;else for(;Xe!==null;){e=Xe;try{var h=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var p=h.memoizedProps,m=h.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?p:ra(e.type,p),m);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_e(163))}}catch(b){tr(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Xe=t;break}Xe=e.return}return h=zU,zU=!1,h}function Yg(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&gI(e,n,i)}s=s.next}while(s!==r)}}function jC(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function yI(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rV(t){var e=t.alternate;e!==null&&(t.alternate=null,rV(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[el],delete e[Ny],delete e[sI],delete e[dae],delete e[fae])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sV(t){return t.tag===5||t.tag===3||t.tag===4}function VU(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sV(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xI(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=pw));else if(r!==4&&(t=t.child,t!==null))for(xI(t,e,n),t=t.sibling;t!==null;)xI(t,e,n),t=t.sibling}function vI(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vI(t,e,n),t=t.sibling;t!==null;)vI(t,e,n),t=t.sibling}var fs=null,aa=!1;function Lc(t,e,n){for(n=n.child;n!==null;)iV(t,e,n),n=n.sibling}function iV(t,e,n){if(il&&typeof il.onCommitFiberUnmount=="function")try{il.onCommitFiberUnmount($C,n)}catch{}switch(n.tag){case 5:_s||ah(n,e);case 6:var r=fs,s=aa;fs=null,Lc(t,e,n),fs=r,aa=s,fs!==null&&(aa?(t=fs,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:fs!==null&&(aa?(t=fs,n=n.stateNode,t.nodeType===8?$N(t.parentNode,n):t.nodeType===1&&$N(t,n),by(t)):$N(fs,n.stateNode));break;case 4:r=fs,s=aa,fs=n.stateNode.containerInfo,aa=!0,Lc(t,e,n),fs=r,aa=s;break;case 0:case 11:case 14:case 15:if(!_s&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&gI(n,e,o),s=s.next}while(s!==r)}Lc(t,e,n);break;case 1:if(!_s&&(ah(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){tr(n,e,a)}Lc(t,e,n);break;case 21:Lc(t,e,n);break;case 22:n.mode&1?(_s=(r=_s)||n.memoizedState!==null,Lc(t,e,n),_s=r):Lc(t,e,n);break;default:Lc(t,e,n)}}function WU(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kae),e.forEach(function(r){var s=Lae.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:fs=a.stateNode,aa=!1;break e;case 3:fs=a.stateNode.containerInfo,aa=!0;break e;case 4:fs=a.stateNode.containerInfo,aa=!0;break e}a=a.return}if(fs===null)throw Error(_e(160));iV(i,o,s),fs=null,aa=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){tr(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oV(e,t),e=e.sibling}function oV(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jo(e,t),La(t),r&4){try{Yg(3,t,t.return),jC(3,t)}catch(p){tr(t,t.return,p)}try{Yg(5,t,t.return)}catch(p){tr(t,t.return,p)}}break;case 1:Jo(e,t),La(t),r&512&&n!==null&&ah(n,n.return);break;case 5:if(Jo(e,t),La(t),r&512&&n!==null&&ah(n,n.return),t.flags&32){var s=t.stateNode;try{gy(s,"")}catch(p){tr(t,t.return,p)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&I9(s,i),zE(a,o);var c=zE(a,i);for(o=0;o<l.length;o+=2){var u=l[o],A=l[o+1];u==="style"?_9(s,A):u==="dangerouslySetInnerHTML"?F9(s,A):u==="children"?gy(s,A):YF(s,u,A,c)}switch(a){case"input":LE(s,i);break;case"textarea":k9(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?mh(s,!!i.multiple,f,!1):d!==!!i.multiple&&(i.defaultValue!=null?mh(s,!!i.multiple,i.defaultValue,!0):mh(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ny]=i}catch(p){tr(t,t.return,p)}}break;case 6:if(Jo(e,t),La(t),r&4){if(t.stateNode===null)throw Error(_e(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(p){tr(t,t.return,p)}}break;case 3:if(Jo(e,t),La(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{by(e.containerInfo)}catch(p){tr(t,t.return,p)}break;case 4:Jo(e,t),La(t);break;case 13:Jo(e,t),La(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(T$=hr())),r&4&&WU(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(_s=(c=_s)||u,Jo(e,t),_s=c):Jo(e,t),La(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Xe=t,u=t.child;u!==null;){for(A=Xe=u;Xe!==null;){switch(d=Xe,f=d.child,d.tag){case 0:case 11:case 14:case 15:Yg(4,d,d.return);break;case 1:ah(d,d.return);var h=d.stateNode;if(typeof h.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,h.props=e.memoizedProps,h.state=e.memoizedState,h.componentWillUnmount()}catch(p){tr(r,n,p)}}break;case 5:ah(d,d.return);break;case 22:if(d.memoizedState!==null){KU(A);continue}}f!==null?(f.return=d,Xe=f):KU(A)}u=u.sibling}e:for(u=null,A=t;;){if(A.tag===5){if(u===null){u=A;try{s=A.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=A.stateNode,l=A.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$9("display",o))}catch(p){tr(t,t.return,p)}}}else if(A.tag===6){if(u===null)try{A.stateNode.nodeValue=c?"":A.memoizedProps}catch(p){tr(t,t.return,p)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===t)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===t)break e;for(;A.sibling===null;){if(A.return===null||A.return===t)break e;u===A&&(u=null),A=A.return}u===A&&(u=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:Jo(e,t),La(t),r&4&&WU(t);break;case 21:break;default:Jo(e,t),La(t)}}function La(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sV(n)){var r=n;break e}n=n.return}throw Error(_e(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(gy(s,""),r.flags&=-33);var i=VU(t);vI(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=VU(t);xI(t,a,o);break;default:throw Error(_e(161))}}catch(l){tr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Fae(t,e,n){Xe=t,aV(t)}function aV(t,e,n){for(var r=(t.mode&1)!==0;Xe!==null;){var s=Xe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||m1;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||_s;a=m1;var c=_s;if(m1=o,(_s=l)&&!c)for(Xe=s;Xe!==null;)o=Xe,l=o.child,o.tag===22&&o.memoizedState!==null?XU(s):l!==null?(l.return=o,Xe=l):XU(s);for(;i!==null;)Xe=i,aV(i),i=i.sibling;Xe=s,m1=a,_s=c}GU(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Xe=i):GU(t)}}function GU(t){for(;Xe!==null;){var e=Xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_s||jC(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_s)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ra(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&FU(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}FU(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var A=u.dehydrated;A!==null&&by(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_e(163))}_s||e.flags&512&&yI(e)}catch(d){tr(e,e.return,d)}}if(e===t){Xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Xe=n;break}Xe=e.return}}function KU(t){for(;Xe!==null;){var e=Xe;if(e===t){Xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Xe=n;break}Xe=e.return}}function XU(t){for(;Xe!==null;){var e=Xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{jC(4,e)}catch(l){tr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){tr(e,s,l)}}var i=e.return;try{yI(e)}catch(l){tr(e,i,l)}break;case 5:var o=e.return;try{yI(e)}catch(l){tr(e,o,l)}}}catch(l){tr(e,e.return,l)}if(e===t){Xe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Xe=a;break}Xe=e.return}}var $ae=Math.ceil,Nw=Sc.ReactCurrentDispatcher,I$=Sc.ReactCurrentOwner,Do=Sc.ReactCurrentBatchConfig,Vt=0,es=null,Cr=null,gs=0,Gi=0,lh=tA(0),Lr=0,$y=null,_d=0,MC=0,k$=0,Jg=null,yi=null,T$=0,qh=1/0,Rl=null,Ew=!1,bI=null,Su=null,g1=!1,lu=null,Iw=0,Zg=0,wI=null,Hb=-1,zb=0;function ri(){return Vt&6?hr():Hb!==-1?Hb:Hb=hr()}function Bu(t){return t.mode&1?Vt&2&&gs!==0?gs&-gs:pae.transition!==null?(zb===0&&(zb=V9()),zb):(t=on,t!==0||(t=window.event,t=t===void 0?16:J9(t.type)),t):1}function ga(t,e,n,r){if(50<Zg)throw Zg=0,wI=null,Error(_e(185));q0(t,n,r),(!(Vt&2)||t!==es)&&(t===es&&(!(Vt&2)&&(MC|=n),Lr===4&&Zc(t,gs)),ki(t,r),n===1&&Vt===0&&!(e.mode&1)&&(qh=hr()+500,PC&&nA()))}function ki(t,e){var n=t.callbackNode;poe(t,e);var r=Aw(t,t===es?gs:0);if(r===0)n!==null&&sU(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&sU(n),e===1)t.tag===0?hae(qU.bind(null,t)):gz(qU.bind(null,t)),uae(function(){!(Vt&6)&&nA()}),n=null;else{switch(W9(r)){case 1:n=n$;break;case 4:n=H9;break;case 16:n=uw;break;case 536870912:n=z9;break;default:n=uw}n=pV(n,lV.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lV(t,e){if(Hb=-1,zb=0,Vt&6)throw Error(_e(327));var n=t.callbackNode;if(bh()&&t.callbackNode!==n)return null;var r=Aw(t,t===es?gs:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=kw(t,r);else{e=r;var s=Vt;Vt|=2;var i=uV();(es!==t||gs!==e)&&(Rl=null,qh=hr()+500,yd(t,e));do try{Dae();break}catch(a){cV(t,a)}while(!0);p$(),Nw.current=i,Vt=s,Cr!==null?e=0:(es=null,gs=0,e=Lr)}if(e!==0){if(e===2&&(s=XE(t),s!==0&&(r=s,e=CI(t,s))),e===1)throw n=$y,yd(t,0),Zc(t,r),ki(t,hr()),n;if(e===6)Zc(t,r);else{if(s=t.current.alternate,!(r&30)&&!_ae(s)&&(e=kw(t,r),e===2&&(i=XE(t),i!==0&&(r=i,e=CI(t,i))),e===1))throw n=$y,yd(t,0),Zc(t,r),ki(t,hr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(_e(345));case 2:LA(t,yi,Rl);break;case 3:if(Zc(t,r),(r&130023424)===r&&(e=T$+500-hr(),10<e)){if(Aw(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ri(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=rI(LA.bind(null,t,yi,Rl),e);break}LA(t,yi,Rl);break;case 4:if(Zc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ma(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=hr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$ae(r/1960))-r,10<r){t.timeoutHandle=rI(LA.bind(null,t,yi,Rl),r);break}LA(t,yi,Rl);break;case 5:LA(t,yi,Rl);break;default:throw Error(_e(329))}}}return ki(t,hr()),t.callbackNode===n?lV.bind(null,t):null}function CI(t,e){var n=Jg;return t.current.memoizedState.isDehydrated&&(yd(t,e).flags|=256),t=kw(t,e),t!==2&&(e=yi,yi=n,e!==null&&SI(e)),t}function SI(t){yi===null?yi=t:yi.push.apply(yi,t)}function _ae(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ca(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zc(t,e){for(e&=~k$,e&=~MC,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ma(e),r=1<<n;t[n]=-1,e&=~r}}function qU(t){if(Vt&6)throw Error(_e(327));bh();var e=Aw(t,0);if(!(e&1))return ki(t,hr()),null;var n=kw(t,e);if(t.tag!==0&&n===2){var r=XE(t);r!==0&&(e=r,n=CI(t,r))}if(n===1)throw n=$y,yd(t,0),Zc(t,e),ki(t,hr()),n;if(n===6)throw Error(_e(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,LA(t,yi,Rl),ki(t,hr()),null}function F$(t,e){var n=Vt;Vt|=1;try{return t(e)}finally{Vt=n,Vt===0&&(qh=hr()+500,PC&&nA())}}function Od(t){lu!==null&&lu.tag===0&&!(Vt&6)&&bh();var e=Vt;Vt|=1;var n=Do.transition,r=on;try{if(Do.transition=null,on=1,t)return t()}finally{on=r,Do.transition=n,Vt=e,!(Vt&6)&&nA()}}function $$(){Gi=lh.current,$n(lh)}function yd(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cae(n)),Cr!==null)for(n=Cr.return;n!==null;){var r=n;switch(d$(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mw();break;case 3:Kh(),$n(Ei),$n(Us),b$();break;case 5:v$(r);break;case 4:Kh();break;case 13:$n(Gn);break;case 19:$n(Gn);break;case 10:m$(r.type._context);break;case 22:case 23:$$()}n=n.return}if(es=t,Cr=t=Nu(t.current,null),gs=Gi=e,Lr=0,$y=null,k$=MC=_d=0,yi=Jg=null,ZA!==null){for(e=0;e<ZA.length;e++)if(n=ZA[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ZA=null}return t}function cV(t,e){do{var n=Cr;try{if(p$(),jb.current=Bw,Sw){for(var r=Xn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Sw=!1}if($d=0,Yr=Rr=Xn=null,qg=!1,ky=0,I$.current=null,n===null||n.return===null){Lr=1,$y=e,Cr=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=gs,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,A=u.tag;if(!(u.mode&1)&&(A===0||A===11||A===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=PU(o);if(f!==null){f.flags&=-257,UU(f,o,a,i,e),f.mode&1&&RU(i,c,e),e=f,l=c;var h=e.updateQueue;if(h===null){var p=new Set;p.add(l),e.updateQueue=p}else h.add(l);break e}else{if(!(e&1)){RU(i,c,e),_$();break e}l=Error(_e(426))}}else if(Ln&&a.mode&1){var m=PU(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),UU(m,o,a,i,e),f$(Xh(l,a));break e}}i=l=Xh(l,a),Lr!==4&&(Lr=2),Jg===null?Jg=[i]:Jg.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=Wz(i,l,e);TU(i,y);break e;case 1:a=l;var x=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Su===null||!Su.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=Gz(i,a,e);TU(i,b);break e}}i=i.return}while(i!==null)}dV(n)}catch(w){e=w,Cr===n&&n!==null&&(Cr=n=n.return);continue}break}while(!0)}function uV(){var t=Nw.current;return Nw.current=Bw,t===null?Bw:t}function _$(){(Lr===0||Lr===3||Lr===2)&&(Lr=4),es===null||!(_d&268435455)&&!(MC&268435455)||Zc(es,gs)}function kw(t,e){var n=Vt;Vt|=2;var r=uV();(es!==t||gs!==e)&&(Rl=null,yd(t,e));do try{Oae();break}catch(s){cV(t,s)}while(!0);if(p$(),Vt=n,Nw.current=r,Cr!==null)throw Error(_e(261));return es=null,gs=0,Lr}function Oae(){for(;Cr!==null;)AV(Cr)}function Dae(){for(;Cr!==null&&!ooe();)AV(Cr)}function AV(t){var e=hV(t.alternate,t,Gi);t.memoizedProps=t.pendingProps,e===null?dV(t):Cr=e,I$.current=null}function dV(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Iae(n,e),n!==null){n.flags&=32767,Cr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Lr=6,Cr=null;return}}else if(n=Eae(n,e,Gi),n!==null){Cr=n;return}if(e=e.sibling,e!==null){Cr=e;return}Cr=e=t}while(e!==null);Lr===0&&(Lr=5)}function LA(t,e,n){var r=on,s=Do.transition;try{Do.transition=null,on=1,Rae(t,e,n,r)}finally{Do.transition=s,on=r}return null}function Rae(t,e,n,r){do bh();while(lu!==null);if(Vt&6)throw Error(_e(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(_e(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(moe(t,i),t===es&&(Cr=es=null,gs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||g1||(g1=!0,pV(uw,function(){return bh(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Do.transition,Do.transition=null;var o=on;on=1;var a=Vt;Vt|=4,I$.current=null,Tae(t,n),oV(n,t),nae(tI),dw=!!eI,tI=eI=null,t.current=n,Fae(n),aoe(),Vt=a,on=o,Do.transition=i}else t.current=n;if(g1&&(g1=!1,lu=t,Iw=s),i=t.pendingLanes,i===0&&(Su=null),uoe(n.stateNode),ki(t,hr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ew)throw Ew=!1,t=bI,bI=null,t;return Iw&1&&t.tag!==0&&bh(),i=t.pendingLanes,i&1?t===wI?Zg++:(Zg=0,wI=t):Zg=0,nA(),null}function bh(){if(lu!==null){var t=W9(Iw),e=Do.transition,n=on;try{if(Do.transition=null,on=16>t?16:t,lu===null)var r=!1;else{if(t=lu,lu=null,Iw=0,Vt&6)throw Error(_e(331));var s=Vt;for(Vt|=4,Xe=t.current;Xe!==null;){var i=Xe,o=i.child;if(Xe.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Xe=c;Xe!==null;){var u=Xe;switch(u.tag){case 0:case 11:case 15:Yg(8,u,i)}var A=u.child;if(A!==null)A.return=u,Xe=A;else for(;Xe!==null;){u=Xe;var d=u.sibling,f=u.return;if(rV(u),u===c){Xe=null;break}if(d!==null){d.return=f,Xe=d;break}Xe=f}}}var h=i.alternate;if(h!==null){var p=h.child;if(p!==null){h.child=null;do{var m=p.sibling;p.sibling=null,p=m}while(p!==null)}}Xe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Xe=o;else e:for(;Xe!==null;){if(i=Xe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Yg(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Xe=y;break e}Xe=i.return}}var x=t.current;for(Xe=x;Xe!==null;){o=Xe;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Xe=v;else e:for(o=x;Xe!==null;){if(a=Xe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:jC(9,a)}}catch(w){tr(a,a.return,w)}if(a===o){Xe=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,Xe=b;break e}Xe=a.return}}if(Vt=s,nA(),il&&typeof il.onPostCommitFiberRoot=="function")try{il.onPostCommitFiberRoot($C,t)}catch{}r=!0}return r}finally{on=n,Do.transition=e}}return!1}function YU(t,e,n){e=Xh(n,e),e=Wz(t,e,1),t=Cu(t,e,1),e=ri(),t!==null&&(q0(t,1,e),ki(t,e))}function tr(t,e,n){if(t.tag===3)YU(t,t,n);else for(;e!==null;){if(e.tag===3){YU(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Su===null||!Su.has(r))){t=Xh(n,t),t=Gz(e,t,1),e=Cu(e,t,1),t=ri(),e!==null&&(q0(e,1,t),ki(e,t));break}}e=e.return}}function Pae(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ri(),t.pingedLanes|=t.suspendedLanes&n,es===t&&(gs&n)===n&&(Lr===4||Lr===3&&(gs&130023424)===gs&&500>hr()-T$?yd(t,0):k$|=n),ki(t,e)}function fV(t,e){e===0&&(t.mode&1?(e=a1,a1<<=1,!(a1&130023424)&&(a1=4194304)):e=1);var n=ri();t=uc(t,e),t!==null&&(q0(t,e,n),ki(t,n))}function Uae(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fV(t,n)}function Lae(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(_e(314))}r!==null&&r.delete(e),fV(t,n)}var hV;hV=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ei.current)wi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wi=!1,Nae(t,e,n);wi=!!(t.flags&131072)}else wi=!1,Ln&&e.flags&1048576&&yz(e,xw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Qb(t,e),t=e.pendingProps;var s=Vh(e,Us.current);vh(e,n),s=C$(null,e,r,t,s,n);var i=S$();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ii(r)?(i=!0,gw(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,y$(e),s.updater=LC,e.stateNode=s,s._reactInternals=e,uI(e,r,t,n),e=fI(null,e,r,!0,i,n)):(e.tag=0,Ln&&i&&A$(e),qs(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Qb(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Mae(r),t=ra(r,t),s){case 0:e=dI(null,e,r,t,n);break e;case 1:e=MU(null,e,r,t,n);break e;case 11:e=LU(null,e,r,t,n);break e;case 14:e=jU(null,e,r,ra(r.type,t),n);break e}throw Error(_e(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ra(r,s),dI(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ra(r,s),MU(t,e,r,s,n);case 3:e:{if(Yz(e),t===null)throw Error(_e(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Sz(t,e),ww(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Xh(Error(_e(423)),e),e=QU(t,e,r,n,s);break e}else if(r!==s){s=Xh(Error(_e(424)),e),e=QU(t,e,r,n,s);break e}else for(Ji=wu(e.stateNode.containerInfo.firstChild),eo=e,Ln=!0,ca=null,n=wz(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wh(),r===s){e=Ac(t,e,n);break e}qs(t,e,r,n)}e=e.child}return e;case 5:return Bz(e),t===null&&aI(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,nI(r,s)?o=null:i!==null&&nI(r,i)&&(e.flags|=32),qz(t,e),qs(t,e,o,n),e.child;case 6:return t===null&&aI(e),null;case 13:return Jz(t,e,n);case 4:return x$(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Gh(e,null,r,n):qs(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ra(r,s),LU(t,e,r,s,n);case 7:return qs(t,e,e.pendingProps,n),e.child;case 8:return qs(t,e,e.pendingProps.children,n),e.child;case 12:return qs(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Bn(vw,r._currentValue),r._currentValue=o,i!==null)if(Ca(i.value,o)){if(i.children===s.children&&!Ei.current){e=Ac(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=tc(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),lI(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(_e(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),lI(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}qs(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,vh(e,n),s=Lo(s),r=r(s),e.flags|=1,qs(t,e,r,n),e.child;case 14:return r=e.type,s=ra(r,e.pendingProps),s=ra(r.type,s),jU(t,e,r,s,n);case 15:return Kz(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ra(r,s),Qb(t,e),e.tag=1,Ii(r)?(t=!0,gw(e)):t=!1,vh(e,n),Vz(e,r,s),uI(e,r,s,n),fI(null,e,r,!0,t,n);case 19:return Zz(t,e,n);case 22:return Xz(t,e,n)}throw Error(_e(156,e.tag))};function pV(t,e){return Q9(t,e)}function jae(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function So(t,e,n,r){return new jae(t,e,n,r)}function O$(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mae(t){if(typeof t=="function")return O$(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ZF)return 11;if(t===e$)return 14}return 2}function Nu(t,e){var n=t.alternate;return n===null?(n=So(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vb(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")O$(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Jf:return xd(n.children,s,i,e);case JF:o=8,s|=8;break;case OE:return t=So(12,n,e,s|2),t.elementType=OE,t.lanes=i,t;case DE:return t=So(13,n,e,s),t.elementType=DE,t.lanes=i,t;case RE:return t=So(19,n,e,s),t.elementType=RE,t.lanes=i,t;case B9:return QC(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C9:o=10;break e;case S9:o=9;break e;case ZF:o=11;break e;case e$:o=14;break e;case Wc:o=16,r=null;break e}throw Error(_e(130,t==null?t:typeof t,""))}return e=So(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function xd(t,e,n,r){return t=So(7,t,r,e),t.lanes=n,t}function QC(t,e,n,r){return t=So(22,t,r,e),t.elementType=B9,t.lanes=n,t.stateNode={isHidden:!1},t}function jN(t,e,n){return t=So(6,t,null,e),t.lanes=n,t}function MN(t,e,n){return e=So(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Qae(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bN(0),this.expirationTimes=bN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bN(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function D$(t,e,n,r,s,i,o,a,l){return t=new Qae(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=So(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},y$(i),t}function Hae(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yf,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mV(t){if(!t)return Lu;t=t._reactInternals;e:{if(sf(t)!==t||t.tag!==1)throw Error(_e(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ii(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(_e(171))}if(t.tag===1){var n=t.type;if(Ii(n))return mz(t,n,e)}return e}function gV(t,e,n,r,s,i,o,a,l){return t=D$(n,r,!0,t,s,i,o,a,l),t.context=mV(null),n=t.current,r=ri(),s=Bu(n),i=tc(r,s),i.callback=e??null,Cu(n,i,s),t.current.lanes=s,q0(t,s,r),ki(t,r),t}function HC(t,e,n,r){var s=e.current,i=ri(),o=Bu(s);return n=mV(n),e.context===null?e.context=n:e.pendingContext=n,e=tc(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Cu(s,e,o),t!==null&&(ga(t,s,o,i),Lb(t,s,o)),o}function Tw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function JU(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function R$(t,e){JU(t,e),(t=t.alternate)&&JU(t,e)}function zae(){return null}var yV=typeof reportError=="function"?reportError:function(t){console.error(t)};function P$(t){this._internalRoot=t}zC.prototype.render=P$.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(_e(409));HC(t,e,null,null)};zC.prototype.unmount=P$.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Od(function(){HC(null,t,null,null)}),e[cc]=null}};function zC(t){this._internalRoot=t}zC.prototype.unstable_scheduleHydration=function(t){if(t){var e=X9();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Jc.length&&e!==0&&e<Jc[n].priority;n++);Jc.splice(n,0,t),n===0&&Y9(t)}};function U$(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function VC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ZU(){}function Vae(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Tw(o);i.call(c)}}var o=gV(e,r,t,0,null,!1,!1,"",ZU);return t._reactRootContainer=o,t[cc]=o.current,Sy(t.nodeType===8?t.parentNode:t),Od(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Tw(l);a.call(c)}}var l=D$(t,0,!1,null,null,!1,!1,"",ZU);return t._reactRootContainer=l,t[cc]=l.current,Sy(t.nodeType===8?t.parentNode:t),Od(function(){HC(e,l,n,r)}),l}function WC(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Tw(o);a.call(l)}}HC(e,o,t,s)}else o=Vae(n,e,t,s,r);return Tw(o)}G9=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wg(e.pendingLanes);n!==0&&(r$(e,n|1),ki(e,hr()),!(Vt&6)&&(qh=hr()+500,nA()))}break;case 13:Od(function(){var r=uc(t,1);if(r!==null){var s=ri();ga(r,t,1,s)}}),R$(t,1)}};s$=function(t){if(t.tag===13){var e=uc(t,134217728);if(e!==null){var n=ri();ga(e,t,134217728,n)}R$(t,134217728)}};K9=function(t){if(t.tag===13){var e=Bu(t),n=uc(t,e);if(n!==null){var r=ri();ga(n,t,e,r)}R$(t,e)}};X9=function(){return on};q9=function(t,e){var n=on;try{return on=t,e()}finally{on=n}};WE=function(t,e,n){switch(e){case"input":if(LE(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=RC(r);if(!s)throw Error(_e(90));E9(r),LE(r,s)}}}break;case"textarea":k9(t,n);break;case"select":e=n.value,e!=null&&mh(t,!!n.multiple,e,!1)}};R9=F$;P9=Od;var Wae={usingClientEntryPoint:!1,Events:[J0,nh,RC,O9,D9,F$]},Km={findFiberByHostInstance:JA,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gae={bundleType:Km.bundleType,version:Km.version,rendererPackageName:Km.rendererPackageName,rendererConfig:Km.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=j9(t),t===null?null:t.stateNode},findFiberByHostInstance:Km.findFiberByHostInstance||zae,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var y1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!y1.isDisabled&&y1.supportsFiber)try{$C=y1.inject(Gae),il=y1}catch{}}so.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wae;so.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!U$(e))throw Error(_e(200));return Hae(t,e,null,n)};so.createRoot=function(t,e){if(!U$(t))throw Error(_e(299));var n=!1,r="",s=yV;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=D$(t,1,!1,null,null,n,!1,r,s),t[cc]=e.current,Sy(t.nodeType===8?t.parentNode:t),new P$(e)};so.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(_e(188)):(t=Object.keys(t).join(","),Error(_e(268,t)));return t=j9(e),t=t===null?null:t.stateNode,t};so.flushSync=function(t){return Od(t)};so.hydrate=function(t,e,n){if(!VC(e))throw Error(_e(200));return WC(null,t,e,!0,n)};so.hydrateRoot=function(t,e,n){if(!U$(t))throw Error(_e(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=yV;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=gV(e,null,t,1,n??null,s,!1,i,o),t[cc]=e.current,Sy(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new zC(e)};so.render=function(t,e,n){if(!VC(e))throw Error(_e(200));return WC(null,t,e,!1,n)};so.unmountComponentAtNode=function(t){if(!VC(t))throw Error(_e(40));return t._reactRootContainer?(Od(function(){WC(null,null,t,!1,function(){t._reactRootContainer=null,t[cc]=null})}),!0):!1};so.unstable_batchedUpdates=F$;so.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!VC(n))throw Error(_e(200));if(t==null||t._reactInternals===void 0)throw Error(_e(38));return WC(t,e,n,!1,r)};so.version="18.3.1-next-f1338f8080-20240426";function xV(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xV)}catch(t){console.error(t)}}xV(),x9.exports=so;var Kae=x9.exports,eL=Kae;$E.createRoot=eL.createRoot,$E.hydrateRoot=eL.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _y(){return _y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_y.apply(this,arguments)}var cu;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(cu||(cu={}));const tL="popstate";function Xae(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return BI("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Fw(s)}return Yae(e,n,null,t)}function gr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vV(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qae(){return Math.random().toString(36).substr(2,8)}function nL(t,e){return{usr:t.state,key:t.key,idx:e}}function BI(t,e,n,r){return n===void 0&&(n=null),_y({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?zp(e):e,{state:n,key:e&&e.key||r||qae()})}function Fw(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function zp(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Yae(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=cu.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(_y({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function A(){a=cu.Pop;let m=u(),y=m==null?null:m-c;c=m,l&&l({action:a,location:p.location,delta:y})}function d(m,y){a=cu.Push;let x=BI(p.location,m,y);c=u()+1;let v=nL(x,c),b=p.createHref(x);try{o.pushState(v,"",b)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;s.location.assign(b)}i&&l&&l({action:a,location:p.location,delta:1})}function f(m,y){a=cu.Replace;let x=BI(p.location,m,y);c=u();let v=nL(x,c),b=p.createHref(x);o.replaceState(v,"",b),i&&l&&l({action:a,location:p.location,delta:0})}function h(m){let y=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof m=="string"?m:Fw(m);return x=x.replace(/ $/,"%20"),gr(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let p={get action(){return a},get location(){return t(s,o)},listen(m){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(tL,A),l=m,()=>{s.removeEventListener(tL,A),l=null}},createHref(m){return e(s,m)},createURL:h,encodeLocation(m){let y=h(m);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:f,go(m){return o.go(m)}};return p}var rL;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(rL||(rL={}));function Jae(t,e,n){return n===void 0&&(n="/"),Zae(t,e,n)}function Zae(t,e,n,r){let s=typeof e=="string"?zp(e):e,i=L$(s.pathname||"/",n);if(i==null)return null;let o=bV(t);ele(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=dle(i);a=cle(o[l],c)}return a}function bV(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(gr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Eu([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(gr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),bV(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:ale(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of wV(i.path))s(i,o,l)}),e}function wV(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=wV(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function ele(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:lle(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const tle=/^:[\w-]+$/,nle=3,rle=2,sle=1,ile=10,ole=-2,sL=t=>t==="*";function ale(t,e){let n=t.split("/"),r=n.length;return n.some(sL)&&(r+=ole),e&&(r+=rle),n.filter(s=>!sL(s)).reduce((s,i)=>s+(tle.test(i)?nle:i===""?sle:ile),r)}function lle(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function cle(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",A=ule({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!A)return null;Object.assign(s,A.params),o.push({params:s,pathname:Eu([i,A.pathname]),pathnameBase:mle(Eu([i,A.pathnameBase])),route:d}),A.pathnameBase!=="/"&&(i=Eu([i,A.pathnameBase]))}return o}function ule(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Ale(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,A)=>{let{paramName:d,isOptional:f}=u;if(d==="*"){let p=a[A]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const h=a[A];return f&&!h?c[d]=void 0:c[d]=(h||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function Ale(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),vV(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function dle(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vV(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function L$(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function fle(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?zp(t):t;return{pathname:n?n.startsWith("/")?n:hle(n,e):e,search:gle(r),hash:yle(s)}}function hle(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function QN(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ple(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function j$(t,e){let n=ple(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function M$(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=zp(t):(s=_y({},t),gr(!s.pathname||!s.pathname.includes("?"),QN("?","pathname","search",s)),gr(!s.pathname||!s.pathname.includes("#"),QN("#","pathname","hash",s)),gr(!s.search||!s.search.includes("#"),QN("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let A=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),A-=1;s.pathname=d.join("/")}a=A>=0?e[A]:"/"}let l=fle(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Eu=t=>t.join("/").replace(/\/\/+/g,"/"),mle=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gle=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,yle=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function xle(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const CV=["post","put","patch","delete"];new Set(CV);const vle=["get",...CV];new Set(vle);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oy(){return Oy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oy.apply(this,arguments)}const Q$=z.createContext(null),ble=z.createContext(null),rA=z.createContext(null),GC=z.createContext(null),Bc=z.createContext({outlet:null,matches:[],isDataRoute:!1}),SV=z.createContext(null);function wle(t,e){let{relative:n}=e===void 0?{}:e;Vp()||gr(!1);let{basename:r,navigator:s}=z.useContext(rA),{hash:i,pathname:o,search:a}=NV(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Eu([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Vp(){return z.useContext(GC)!=null}function ex(){return Vp()||gr(!1),z.useContext(GC).location}function BV(t){z.useContext(rA).static||z.useLayoutEffect(t)}function Qs(){let{isDataRoute:t}=z.useContext(Bc);return t?Dle():Cle()}function Cle(){Vp()||gr(!1);let t=z.useContext(Q$),{basename:e,future:n,navigator:r}=z.useContext(rA),{matches:s}=z.useContext(Bc),{pathname:i}=ex(),o=JSON.stringify(j$(s,n.v7_relativeSplatPath)),a=z.useRef(!1);return BV(()=>{a.current=!0}),z.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let A=M$(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(A.pathname=A.pathname==="/"?e:Eu([e,A.pathname])),(u.replace?r.replace:r.push)(A,u.state,u)},[e,r,o,i,t])}function of(){let{matches:t}=z.useContext(Bc),e=t[t.length-1];return e?e.params:{}}function NV(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=z.useContext(rA),{matches:s}=z.useContext(Bc),{pathname:i}=ex(),o=JSON.stringify(j$(s,r.v7_relativeSplatPath));return z.useMemo(()=>M$(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Sle(t,e){return Ble(t,e)}function Ble(t,e,n,r){Vp()||gr(!1);let{navigator:s}=z.useContext(rA),{matches:i}=z.useContext(Bc),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ex(),u;if(e){var A;let m=typeof e=="string"?zp(e):e;l==="/"||(A=m.pathname)!=null&&A.startsWith(l)||gr(!1),u=m}else u=c;let d=u.pathname||"/",f=d;if(l!=="/"){let m=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(m.length).join("/")}let h=Jae(t,{pathname:f}),p=Tle(h&&h.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:Eu([l,s.encodeLocation?s.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?l:Eu([l,s.encodeLocation?s.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,n,r);return e&&p?z.createElement(GC.Provider,{value:{location:Oy({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:cu.Pop}},p):p}function Nle(){let t=Ole(),e=xle(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),n?z.createElement("pre",{style:s},n):null,null)}const Ele=z.createElement(Nle,null);class Ile extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?z.createElement(Bc.Provider,{value:this.props.routeContext},z.createElement(SV.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kle(t){let{routeContext:e,match:n,children:r}=t,s=z.useContext(Q$);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),z.createElement(Bc.Provider,{value:e},r)}function Tle(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(A=>A.route.id&&(a==null?void 0:a[A.route.id])!==void 0);u>=0||gr(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let A=o[u];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(c=u),A.route.id){let{loaderData:d,errors:f}=n,h=A.route.loader&&d[A.route.id]===void 0&&(!f||f[A.route.id]===void 0);if(A.route.lazy||h){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,A,d)=>{let f,h=!1,p=null,m=null;n&&(f=a&&A.route.id?a[A.route.id]:void 0,p=A.route.errorElement||Ele,l&&(c<0&&d===0?(Rle("route-fallback"),h=!0,m=null):c===d&&(h=!0,m=A.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,d+1)),x=()=>{let v;return f?v=p:h?v=m:A.route.Component?v=z.createElement(A.route.Component,null):A.route.element?v=A.route.element:v=u,z.createElement(kle,{match:A,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:v})};return n&&(A.route.ErrorBoundary||A.route.errorElement||d===0)?z.createElement(Ile,{location:n.location,revalidation:n.revalidation,component:p,error:f,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var EV=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(EV||{}),IV=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(IV||{});function Fle(t){let e=z.useContext(Q$);return e||gr(!1),e}function $le(t){let e=z.useContext(ble);return e||gr(!1),e}function _le(t){let e=z.useContext(Bc);return e||gr(!1),e}function kV(t){let e=_le(),n=e.matches[e.matches.length-1];return n.route.id||gr(!1),n.route.id}function Ole(){var t;let e=z.useContext(SV),n=$le(),r=kV();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Dle(){let{router:t}=Fle(EV.UseNavigateStable),e=kV(IV.UseNavigateStable),n=z.useRef(!1);return BV(()=>{n.current=!0}),z.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Oy({fromRouteId:e},i)))},[t,e])}const iL={};function Rle(t,e,n){iL[t]||(iL[t]=!0)}function Ple(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Xi(t){let{to:e,replace:n,state:r,relative:s}=t;Vp()||gr(!1);let{future:i,static:o}=z.useContext(rA),{matches:a}=z.useContext(Bc),{pathname:l}=ex(),c=Qs(),u=M$(e,j$(a,i.v7_relativeSplatPath),l,s==="path"),A=JSON.stringify(u);return z.useEffect(()=>c(JSON.parse(A),{replace:n,state:r,relative:s}),[c,A,s,n,r]),null}function Vn(t){gr(!1)}function Ule(t){let{basename:e="/",children:n=null,location:r,navigationType:s=cu.Pop,navigator:i,static:o=!1,future:a}=t;Vp()&&gr(!1);let l=e.replace(/^\/*/,"/"),c=z.useMemo(()=>({basename:l,navigator:i,static:o,future:Oy({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=zp(r));let{pathname:u="/",search:A="",hash:d="",state:f=null,key:h="default"}=r,p=z.useMemo(()=>{let m=L$(u,l);return m==null?null:{location:{pathname:m,search:A,hash:d,state:f,key:h},navigationType:s}},[l,u,A,d,f,h,s]);return p==null?null:z.createElement(rA.Provider,{value:c},z.createElement(GC.Provider,{children:n,value:p}))}function Lle(t){let{children:e,location:n}=t;return Sle(NI(e),n)}new Promise(()=>{});function NI(t,e){e===void 0&&(e=[]);let n=[];return z.Children.forEach(t,(r,s)=>{if(!z.isValidElement(r))return;let i=[...e,s];if(r.type===z.Fragment){n.push.apply(n,NI(r.props.children,i));return}r.type!==Vn&&gr(!1),!r.props.index||!r.props.children||gr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=NI(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function EI(){return EI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EI.apply(this,arguments)}function jle(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Mle(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Qle(t,e){return t.button===0&&(!e||e==="_self")&&!Mle(t)}const Hle=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zle="6";try{window.__reactRouterVersion=zle}catch{}const Vle="startTransition",oL=Pie[Vle];function Wle(t){let{basename:e,children:n,future:r,window:s}=t,i=z.useRef();i.current==null&&(i.current=Xae({window:s,v5Compat:!0}));let o=i.current,[a,l]=z.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=z.useCallback(A=>{c&&oL?oL(()=>l(A)):l(A)},[l,c]);return z.useLayoutEffect(()=>o.listen(u),[o,u]),z.useEffect(()=>Ple(r),[r]),z.createElement(Ule,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Gle=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Kle=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kc=z.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:A}=e,d=jle(e,Hle),{basename:f}=z.useContext(rA),h,p=!1;if(typeof c=="string"&&Kle.test(c)&&(h=c,Gle))try{let v=new URL(window.location.href),b=c.startsWith("//")?new URL(v.protocol+c):new URL(c),w=L$(b.pathname,f);b.origin===v.origin&&w!=null?c=w+b.search+b.hash:p=!0}catch{}let m=wle(c,{relative:s}),y=Xle(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:A});function x(v){r&&r(v),v.defaultPrevented||y(v)}return z.createElement("a",EI({},d,{href:h||m,onClick:p||i?r:x,ref:n,target:l}))});var aL;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(aL||(aL={}));var lL;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(lL||(lL={}));function Xle(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Qs(),c=ex(),u=NV(t,{relative:o});return z.useCallback(A=>{if(Qle(A,n)){A.preventDefault();let d=r!==void 0?r:Fw(c)===Fw(u);l(t,{replace:d,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}var KC=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},qle={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},tu,zF,J7,Yle=(J7=class{constructor(){Mt(this,tu,qle);Mt(this,zF,!1)}setTimeoutProvider(t){gt(this,tu,t)}setTimeout(t,e){return Be(this,tu).setTimeout(t,e)}clearTimeout(t){Be(this,tu).clearTimeout(t)}setInterval(t,e){return Be(this,tu).setInterval(t,e)}clearInterval(t){Be(this,tu).clearInterval(t)}},tu=new WeakMap,zF=new WeakMap,J7),II=new Yle;function Jle(t){setTimeout(t,0)}var XC=typeof window>"u"||"Deno"in globalThis;function sa(){}function Zle(t,e){return typeof t=="function"?t(e):t}function ece(t){return typeof t=="number"&&t>=0&&t!==1/0}function tce(t,e){return Math.max(t+(e||0)-Date.now(),0)}function kI(t,e){return typeof t=="function"?t(e):t}function nce(t,e){return typeof t=="function"?t(e):t}function cL(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==H$(o,e.options))return!1}else if(!Ry(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function uL(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Dy(e.options.mutationKey)!==Dy(i))return!1}else if(!Ry(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function H$(t,e){return((e==null?void 0:e.queryKeyHashFn)||Dy)(t)}function Dy(t){return JSON.stringify(t,(e,n)=>TI(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ry(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Ry(t[n],e[n])):!1}var rce=Object.prototype.hasOwnProperty;function TV(t,e){if(t===e)return t;const n=AL(t)&&AL(e);if(!n&&!(TI(t)&&TI(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const u=n?c:i[c],A=t[u],d=e[u];if(A===d){a[u]=A,(n?c<s:rce.call(t,u))&&l++;continue}if(A===null||d===null||typeof A!="object"||typeof d!="object"){a[u]=d;continue}const f=TV(A,d);a[u]=f,f===A&&l++}return s===o&&l===s?t:a}function AL(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function TI(t){if(!dL(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!dL(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function dL(t){return Object.prototype.toString.call(t)==="[object Object]"}function sce(t){return new Promise(e=>{II.setTimeout(e,t)})}function ice(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?TV(t,e):e}function oce(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function ace(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var z$=Symbol();function FV(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===z$?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var dd,nu,Rh,Z7,lce=(Z7=class extends KC{constructor(){super();Mt(this,dd);Mt(this,nu);Mt(this,Rh);gt(this,Rh,e=>{if(!XC&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Be(this,nu)||this.setEventListener(Be(this,Rh))}onUnsubscribe(){var e;this.hasListeners()||((e=Be(this,nu))==null||e.call(this),gt(this,nu,void 0))}setEventListener(e){var n;gt(this,Rh,e),(n=Be(this,nu))==null||n.call(this),gt(this,nu,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Be(this,dd)!==e&&(gt(this,dd,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Be(this,dd)=="boolean"?Be(this,dd):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},dd=new WeakMap,nu=new WeakMap,Rh=new WeakMap,Z7),$V=new lce;function cce(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var uce=Jle;function Ace(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=uce;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Js=Ace(),Ph,ru,Uh,e9,dce=(e9=class extends KC{constructor(){super();Mt(this,Ph,!0);Mt(this,ru);Mt(this,Uh);gt(this,Uh,e=>{if(!XC&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Be(this,ru)||this.setEventListener(Be(this,Uh))}onUnsubscribe(){var e;this.hasListeners()||((e=Be(this,ru))==null||e.call(this),gt(this,ru,void 0))}setEventListener(e){var n;gt(this,Uh,e),(n=Be(this,ru))==null||n.call(this),gt(this,ru,e(this.setOnline.bind(this)))}setOnline(e){Be(this,Ph)!==e&&(gt(this,Ph,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Be(this,Ph)}},Ph=new WeakMap,ru=new WeakMap,Uh=new WeakMap,e9),$w=new dce;function fce(t){return Math.min(1e3*2**t,3e4)}function _V(t){return(t??"online")==="online"?$w.isOnline():!0}var FI=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function OV(t){let e=!1,n=0,r;const s=cce(),i=()=>s.status!=="pending",o=p=>{var m;if(!i()){const y=new FI(p);d(y),(m=t.onCancel)==null||m.call(t,y)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>$V.isFocused()&&(t.networkMode==="always"||$w.isOnline())&&t.canRun(),u=()=>_V(t.networkMode)&&t.canRun(),A=p=>{i()||(r==null||r(),s.resolve(p))},d=p=>{i()||(r==null||r(),s.reject(p))},f=()=>new Promise(p=>{var m;r=y=>{(i()||c())&&p(y)},(m=t.onPause)==null||m.call(t)}).then(()=>{var p;r=void 0,i()||(p=t.onContinue)==null||p.call(t)}),h=()=>{if(i())return;let p;const m=n===0?t.initialPromise:void 0;try{p=m??t.fn()}catch(y){p=Promise.reject(y)}Promise.resolve(p).then(A).catch(y=>{var C;if(i())return;const x=t.retry??(XC?0:3),v=t.retryDelay??fce,b=typeof v=="function"?v(n,y):v,w=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,y);if(e||!w){d(y);return}n++,(C=t.onFail)==null||C.call(t,n,y),sce(b).then(()=>c()?void 0:f()).then(()=>{e?d(y):h()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?h():f().then(h),s)}}var fd,t9,DV=(t9=class{constructor(){Mt(this,fd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ece(this.gcTime)&&gt(this,fd,II.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(XC?1/0:5*60*1e3))}clearGcTimeout(){Be(this,fd)&&(II.clearTimeout(Be(this,fd)),gt(this,fd,void 0))}},fd=new WeakMap,t9),hd,Lh,yo,pd,Xr,W0,md,ia,_l,n9,hce=(n9=class extends DV{constructor(e){super();Mt(this,ia);Mt(this,hd);Mt(this,Lh);Mt(this,yo);Mt(this,pd);Mt(this,Xr);Mt(this,W0);Mt(this,md);gt(this,md,!1),gt(this,W0,e.defaultOptions),this.setOptions(e.options),this.observers=[],gt(this,pd,e.client),gt(this,yo,Be(this,pd).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,gt(this,hd,fL(this.options)),this.state=e.state??Be(this,hd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Be(this,Xr))==null?void 0:e.promise}setOptions(e){if(this.options={...Be(this,W0),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=fL(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),gt(this,hd,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Be(this,yo).remove(this)}setData(e,n){const r=ice(this.state.data,e,this.options);return Ss(this,ia,_l).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Ss(this,ia,_l).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=Be(this,Xr))==null?void 0:r.promise;return(s=Be(this,Xr))==null||s.cancel(e),n?n.then(sa).catch(sa):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Be(this,hd))}isActive(){return this.observers.some(e=>nce(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===z$||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>kI(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!tce(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=Be(this,Xr))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=Be(this,Xr))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Be(this,yo).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(Be(this,Xr)&&(Be(this,md)?Be(this,Xr).cancel({revert:!0}):Be(this,Xr).cancelRetry()),this.scheduleGc()),Be(this,yo).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ss(this,ia,_l).call(this,{type:"invalidate"})}async fetch(e,n){var l,c,u,A,d,f,h,p,m,y,x,v;if(this.state.fetchStatus!=="idle"&&((l=Be(this,Xr))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Be(this,Xr))return Be(this,Xr).continueRetry(),Be(this,Xr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const b=this.observers.find(w=>w.options.queryFn);b&&this.setOptions(b.options)}const r=new AbortController,s=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(gt(this,md,!0),r.signal)})},i=()=>{const b=FV(this.options,n),C=(()=>{const B={client:Be(this,pd),queryKey:this.queryKey,meta:this.meta};return s(B),B})();return gt(this,md,!1),this.options.persister?this.options.persister(b,C,this):b(C)},a=(()=>{const b={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Be(this,pd),state:this.state,fetchFn:i};return s(b),b})();(c=this.options.behavior)==null||c.onFetch(a,this),gt(this,Lh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Ss(this,ia,_l).call(this,{type:"fetch",meta:(A=a.fetchOptions)==null?void 0:A.meta}),gt(this,Xr,OV({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:b=>{b instanceof FI&&b.revert&&this.setState({...Be(this,Lh),fetchStatus:"idle"}),r.abort()},onFail:(b,w)=>{Ss(this,ia,_l).call(this,{type:"failed",failureCount:b,error:w})},onPause:()=>{Ss(this,ia,_l).call(this,{type:"pause"})},onContinue:()=>{Ss(this,ia,_l).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const b=await Be(this,Xr).start();if(b===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(b),(f=(d=Be(this,yo).config).onSuccess)==null||f.call(d,b,this),(p=(h=Be(this,yo).config).onSettled)==null||p.call(h,b,this.state.error,this),b}catch(b){if(b instanceof FI){if(b.silent)return Be(this,Xr).promise;if(b.revert){if(this.state.data===void 0)throw b;return this.state.data}}throw Ss(this,ia,_l).call(this,{type:"error",error:b}),(y=(m=Be(this,yo).config).onError)==null||y.call(m,b,this),(v=(x=Be(this,yo).config).onSettled)==null||v.call(x,this.state.data,b,this),b}finally{this.scheduleGc()}}},hd=new WeakMap,Lh=new WeakMap,yo=new WeakMap,pd=new WeakMap,Xr=new WeakMap,W0=new WeakMap,md=new WeakMap,ia=new WeakSet,_l=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...pce(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return gt(this,Lh,e.manual?s:void 0),s;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Js.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Be(this,yo).notify({query:this,type:"updated",action:e})})},n9);function pce(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:_V(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function fL(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function hL(t){return{onFetch:(e,n)=>{var u,A,d,f,h;const r=e.options,s=(d=(A=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:A.fetchMore)==null?void 0:d.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((h=e.state.data)==null?void 0:h.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let p=!1;const m=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},y=FV(e.options,e.fetchOptions),x=async(v,b,w)=>{if(p)return Promise.reject();if(b==null&&v.pages.length)return Promise.resolve(v);const B=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:b,direction:w?"backward":"forward",meta:e.options.meta};return m(O),O})(),S=await y(B),{maxPages:N}=e.options,k=w?ace:oce;return{pages:k(v.pages,S,N),pageParams:k(v.pageParams,b,N)}};if(s&&i.length){const v=s==="backward",b=v?mce:pL,w={pages:i,pageParams:o},C=b(r,w);a=await x(w,C,v)}else{const v=t??i.length;do{const b=l===0?o[0]??r.initialPageParam:pL(r,a);if(l>0&&b==null)break;a=await x(a,b),l++}while(l<v)}return a};e.options.persister?e.fetchFn=()=>{var p,m;return(m=(p=e.options).persister)==null?void 0:m.call(p,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function pL(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function mce(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var G0,Ga,Gs,gd,Ka,Hc,r9,gce=(r9=class extends DV{constructor(e){super();Mt(this,Ka);Mt(this,G0);Mt(this,Ga);Mt(this,Gs);Mt(this,gd);gt(this,G0,e.client),this.mutationId=e.mutationId,gt(this,Gs,e.mutationCache),gt(this,Ga,[]),this.state=e.state||yce(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Be(this,Ga).includes(e)||(Be(this,Ga).push(e),this.clearGcTimeout(),Be(this,Gs).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){gt(this,Ga,Be(this,Ga).filter(n=>n!==e)),this.scheduleGc(),Be(this,Gs).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Be(this,Ga).length||(this.state.status==="pending"?this.scheduleGc():Be(this,Gs).remove(this))}continue(){var e;return((e=Be(this,gd))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,c,u,A,d,f,h,p,m,y,x,v,b,w,C,B,S,N;const n=()=>{Ss(this,Ka,Hc).call(this,{type:"continue"})},r={client:Be(this,G0),meta:this.options.meta,mutationKey:this.options.mutationKey};gt(this,gd,OV({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(k,O)=>{Ss(this,Ka,Hc).call(this,{type:"failed",failureCount:k,error:O})},onPause:()=>{Ss(this,Ka,Hc).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Be(this,Gs).canRun(this)}));const s=this.state.status==="pending",i=!Be(this,gd).canStart();try{if(s)n();else{Ss(this,Ka,Hc).call(this,{type:"pending",variables:e,isPaused:i}),await((a=(o=Be(this,Gs).config).onMutate)==null?void 0:a.call(o,e,this,r));const O=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e,r));O!==this.state.context&&Ss(this,Ka,Hc).call(this,{type:"pending",context:O,variables:e,isPaused:i})}const k=await Be(this,gd).start();return await((A=(u=Be(this,Gs).config).onSuccess)==null?void 0:A.call(u,k,e,this.state.context,this,r)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,k,e,this.state.context,r)),await((p=(h=Be(this,Gs).config).onSettled)==null?void 0:p.call(h,k,null,this.state.variables,this.state.context,this,r)),await((y=(m=this.options).onSettled)==null?void 0:y.call(m,k,null,e,this.state.context,r)),Ss(this,Ka,Hc).call(this,{type:"success",data:k}),k}catch(k){try{throw await((v=(x=Be(this,Gs).config).onError)==null?void 0:v.call(x,k,e,this.state.context,this,r)),await((w=(b=this.options).onError)==null?void 0:w.call(b,k,e,this.state.context,r)),await((B=(C=Be(this,Gs).config).onSettled)==null?void 0:B.call(C,void 0,k,this.state.variables,this.state.context,this,r)),await((N=(S=this.options).onSettled)==null?void 0:N.call(S,void 0,k,e,this.state.context,r)),k}finally{Ss(this,Ka,Hc).call(this,{type:"error",error:k})}}finally{Be(this,Gs).runNext(this)}}},G0=new WeakMap,Ga=new WeakMap,Gs=new WeakMap,gd=new WeakMap,Ka=new WeakSet,Hc=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Js.batch(()=>{Be(this,Ga).forEach(r=>{r.onMutationUpdate(e)}),Be(this,Gs).notify({mutation:this,type:"updated",action:e})})},r9);function yce(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Hl,oa,K0,s9,xce=(s9=class extends KC{constructor(e={}){super();Mt(this,Hl);Mt(this,oa);Mt(this,K0);this.config=e,gt(this,Hl,new Set),gt(this,oa,new Map),gt(this,K0,0)}build(e,n,r){const s=new gce({client:e,mutationCache:this,mutationId:++t1(this,K0)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){Be(this,Hl).add(e);const n=x1(e);if(typeof n=="string"){const r=Be(this,oa).get(n);r?r.push(e):Be(this,oa).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Be(this,Hl).delete(e)){const n=x1(e);if(typeof n=="string"){const r=Be(this,oa).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&Be(this,oa).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=x1(e);if(typeof n=="string"){const r=Be(this,oa).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=x1(e);if(typeof n=="string"){const s=(r=Be(this,oa).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Js.batch(()=>{Be(this,Hl).forEach(e=>{this.notify({type:"removed",mutation:e})}),Be(this,Hl).clear(),Be(this,oa).clear()})}getAll(){return Array.from(Be(this,Hl))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>uL(n,r))}findAll(e={}){return this.getAll().filter(n=>uL(e,n))}notify(e){Js.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Js.batch(()=>Promise.all(e.map(n=>n.continue().catch(sa))))}},Hl=new WeakMap,oa=new WeakMap,K0=new WeakMap,s9);function x1(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Xa,i9,vce=(i9=class extends KC{constructor(e={}){super();Mt(this,Xa);this.config=e,gt(this,Xa,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??H$(s,n);let o=this.get(i);return o||(o=new hce({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){Be(this,Xa).has(e.queryHash)||(Be(this,Xa).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Be(this,Xa).get(e.queryHash);n&&(e.destroy(),n===e&&Be(this,Xa).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Js.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Be(this,Xa).get(e)}getAll(){return[...Be(this,Xa).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>cL(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>cL(e,r)):n}notify(e){Js.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Js.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Js.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Xa=new WeakMap,i9),er,su,iu,jh,Mh,ou,Qh,Hh,o9,bce=(o9=class{constructor(t={}){Mt(this,er);Mt(this,su);Mt(this,iu);Mt(this,jh);Mt(this,Mh);Mt(this,ou);Mt(this,Qh);Mt(this,Hh);gt(this,er,t.queryCache||new vce),gt(this,su,t.mutationCache||new xce),gt(this,iu,t.defaultOptions||{}),gt(this,jh,new Map),gt(this,Mh,new Map),gt(this,ou,0)}mount(){t1(this,ou)._++,Be(this,ou)===1&&(gt(this,Qh,$V.subscribe(async t=>{t&&(await this.resumePausedMutations(),Be(this,er).onFocus())})),gt(this,Hh,$w.subscribe(async t=>{t&&(await this.resumePausedMutations(),Be(this,er).onOnline())})))}unmount(){var t,e;t1(this,ou)._--,Be(this,ou)===0&&((t=Be(this,Qh))==null||t.call(this),gt(this,Qh,void 0),(e=Be(this,Hh))==null||e.call(this),gt(this,Hh,void 0))}isFetching(t){return Be(this,er).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Be(this,su).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Be(this,er).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Be(this,er).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(kI(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Be(this,er).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Be(this,er).get(r.queryHash),i=s==null?void 0:s.state.data,o=Zle(e,i);if(o!==void 0)return Be(this,er).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Js.batch(()=>Be(this,er).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Be(this,er).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Be(this,er);Js.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Be(this,er);return Js.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Js.batch(()=>Be(this,er).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(sa).catch(sa)}invalidateQueries(t,e={}){return Js.batch(()=>(Be(this,er).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Js.batch(()=>Be(this,er).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(sa)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(sa)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Be(this,er).build(this,e);return n.isStaleByTime(kI(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(sa).catch(sa)}fetchInfiniteQuery(t){return t.behavior=hL(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(sa).catch(sa)}ensureInfiniteQueryData(t){return t.behavior=hL(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return $w.isOnline()?Be(this,su).resumePausedMutations():Promise.resolve()}getQueryCache(){return Be(this,er)}getMutationCache(){return Be(this,su)}getDefaultOptions(){return Be(this,iu)}setDefaultOptions(t){gt(this,iu,t)}setQueryDefaults(t,e){Be(this,jh).set(Dy(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Be(this,jh).values()],n={};return e.forEach(r=>{Ry(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Be(this,Mh).set(Dy(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Be(this,Mh).values()],n={};return e.forEach(r=>{Ry(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Be(this,iu).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=H$(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===z$&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Be(this,iu).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Be(this,er).clear(),Be(this,su).clear()}},er=new WeakMap,su=new WeakMap,iu=new WeakMap,jh=new WeakMap,Mh=new WeakMap,ou=new WeakMap,Qh=new WeakMap,Hh=new WeakMap,o9),wce=z.createContext(void 0),Cce=({client:t,children:e})=>(z.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),g.jsx(wce.Provider,{value:t,children:e}));const Sce={},mL=t=>{let e;const n=new Set,r=(u,A)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const f=e;e=A??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(h=>h(e,f))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(Sce?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,s,l);return l},Bce=t=>t?mL(t):mL;var RV={exports:{}},PV={},UV={exports:{}},LV={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yh=z;function Nce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ece=typeof Object.is=="function"?Object.is:Nce,Ice=Yh.useState,kce=Yh.useEffect,Tce=Yh.useLayoutEffect,Fce=Yh.useDebugValue;function $ce(t,e){var n=e(),r=Ice({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Tce(function(){s.value=n,s.getSnapshot=e,HN(s)&&i({inst:s})},[t,n,e]),kce(function(){return HN(s)&&i({inst:s}),t(function(){HN(s)&&i({inst:s})})},[t]),Fce(n),n}function HN(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ece(t,n)}catch{return!0}}function _ce(t,e){return e()}var Oce=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_ce:$ce;LV.useSyncExternalStore=Yh.useSyncExternalStore!==void 0?Yh.useSyncExternalStore:Oce;UV.exports=LV;var Dce=UV.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qC=z,Rce=Dce;function Pce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Uce=typeof Object.is=="function"?Object.is:Pce,Lce=Rce.useSyncExternalStore,jce=qC.useRef,Mce=qC.useEffect,Qce=qC.useMemo,Hce=qC.useDebugValue;PV.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=jce(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Qce(function(){function l(f){if(!c){if(c=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var h=o.value;if(s(h,f))return A=h}return A=f}if(h=A,Uce(u,f))return h;var p=r(f);return s!==void 0&&s(h,p)?(u=f,h):(u=f,A=p)}var c=!1,u,A,d=n===void 0?null:n;return[function(){return l(e())},d===null?void 0:function(){return l(d())}]},[e,n,r,s]);var a=Lce(t,i[0],i[1]);return Mce(function(){o.hasValue=!0,o.value=a},[a]),Hce(a),a};RV.exports=PV;var zce=RV.exports;const Vce=Gt(zce),jV={},{useDebugValue:Wce}=ie,{useSyncExternalStoreWithSelector:Gce}=Vce;let gL=!1;const Kce=t=>t;function Xce(t,e=Kce,n){(jV?"production":void 0)!=="production"&&n&&!gL&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),gL=!0);const r=Gce(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Wce(r),r}const qce=t=>{(jV?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Bce(t):t,n=(r,s)=>Xce(e,r,s);return Object.assign(n,e),n},Yce=t=>qce,Jce={};function Zce(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=l=>l===null?null:JSON.parse(l,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Py=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Py(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Py(r)(n)}}}},eue=(t,e)=>(n,r,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:m=>m,version:0,merge:(m,y)=>({...y,...m}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=i.getStorage()}catch{}if(!c)return t((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...m)},r,s);const u=Py(i.serialize),A=()=>{const m=i.partialize({...r()});let y;const x=u({state:m,version:i.version}).then(v=>c.setItem(i.name,v)).catch(v=>{y=v});if(y)throw y;return x},d=s.setState;s.setState=(m,y)=>{d(m,y),A()};const f=t((...m)=>{n(...m),A()},r,s);let h;const p=()=>{var m;if(!c)return;o=!1,a.forEach(x=>x(r()));const y=((m=i.onRehydrateStorage)==null?void 0:m.call(i,r()))||void 0;return Py(c.getItem.bind(c))(i.name).then(x=>{if(x)return i.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var v;return h=i.merge(x,(v=r())!=null?v:f),n(h,!0),A()}).then(()=>{y==null||y(h,void 0),o=!0,l.forEach(x=>x(h))}).catch(x=>{y==null||y(void 0,x)})};return s.persist={setOptions:m=>{i={...i,...m},m.getStorage&&(c=m.getStorage())},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(l.add(m),()=>{l.delete(m)})},p(),h||f},tue=(t,e)=>(n,r,s)=>{let i={storage:Zce(()=>localStorage),partialize:p=>p,version:0,merge:(p,m)=>({...m,...p}),...e},o=!1;const a=new Set,l=new Set;let c=i.storage;if(!c)return t((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...p)},r,s);const u=()=>{const p=i.partialize({...r()});return c.setItem(i.name,{state:p,version:i.version})},A=s.setState;s.setState=(p,m)=>{A(p,m),u()};const d=t((...p)=>{n(...p),u()},r,s);s.getInitialState=()=>d;let f;const h=()=>{var p,m;if(!c)return;o=!1,a.forEach(x=>{var v;return x((v=r())!=null?v:d)});const y=((m=i.onRehydrateStorage)==null?void 0:m.call(i,(p=r())!=null?p:d))||void 0;return Py(c.getItem.bind(c))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return[!0,i.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var v;const[b,w]=x;if(f=i.merge(w,(v=r())!=null?v:d),n(f,!0),b)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,l.forEach(x=>x(f))}).catch(x=>{y==null||y(void 0,x)})};return s.persist={setOptions:p=>{i={...i,...p},p.storage&&(c=p.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>h(),hasHydrated:()=>o,onHydrate:p=>(a.add(p),()=>{a.delete(p)}),onFinishHydration:p=>(l.add(p),()=>{l.delete(p)})},i.skipHydration||h(),f||d},nue=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Jce?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),eue(t,e)):tue(t,e),rue=nue,Wo=Yce()(rue(t=>({user:null,token:null,isAuthenticated:!1,login:(e,n)=>t({user:e,token:n,isAuthenticated:!0}),logout:()=>t({user:null,token:null,isAuthenticated:!1}),updateUser:e=>t(n=>({user:n.user?{...n.user,...e}:null}))}),{name:"auth-storage"}));function As({children:t,allowedRoles:e,redirectTo:n}){const{isAuthenticated:r,user:s}=Wo();if(!r||!s)return g.jsx(Xi,{to:"/login",replace:!0});if(e&&!e.includes(s.role)){if(n)return g.jsx(Xi,{to:n,replace:!0});switch(s.role){case"student":return g.jsx(Xi,{to:"/dashboard",replace:!0});case"parent":return g.jsx(Xi,{to:"/parent/dashboard",replace:!0});case"admin":return g.jsx(Xi,{to:"/admin/dashboard",replace:!0});case"teacher":return g.jsx(Xi,{to:"/teacher/dashboard",replace:!0});default:return g.jsx(Xi,{to:"/unauthorized",replace:!0})}}return g.jsx(g.Fragment,{children:t})}function yL(){const{isAuthenticated:t,user:e}=Wo();if(!t||!e)return g.jsx(Xi,{to:"/login",replace:!0});switch(e.role){case"student":return g.jsx(Xi,{to:"/dashboard",replace:!0});case"parent":return g.jsx(Xi,{to:"/parent/dashboard",replace:!0});case"admin":return g.jsx(Xi,{to:"/admin/dashboard",replace:!0});case"teacher":return g.jsx(Xi,{to:"/teacher/dashboard",replace:!0});default:return g.jsx(Xi,{to:"/login",replace:!0})}}function MV(t,e){return function(){return t.apply(e,arguments)}}const{toString:sue}=Object.prototype,{getPrototypeOf:V$}=Object,{iterator:YC,toStringTag:QV}=Symbol,JC=(t=>e=>{const n=sue.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ka=t=>(t=t.toLowerCase(),e=>JC(e)===t),ZC=t=>e=>typeof e===t,{isArray:Wp}=Array,Jh=ZC("undefined");function tx(t){return t!==null&&!Jh(t)&&t.constructor!==null&&!Jh(t.constructor)&&Ti(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const HV=ka("ArrayBuffer");function iue(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&HV(t.buffer),e}const oue=ZC("string"),Ti=ZC("function"),zV=ZC("number"),nx=t=>t!==null&&typeof t=="object",aue=t=>t===!0||t===!1,Wb=t=>{if(JC(t)!=="object")return!1;const e=V$(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(QV in t)&&!(YC in t)},lue=t=>{if(!nx(t)||tx(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},cue=ka("Date"),uue=ka("File"),Aue=ka("Blob"),due=ka("FileList"),fue=t=>nx(t)&&Ti(t.pipe),hue=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ti(t.append)&&((e=JC(t))==="formdata"||e==="object"&&Ti(t.toString)&&t.toString()==="[object FormData]"))},pue=ka("URLSearchParams"),[mue,gue,yue,xue]=["ReadableStream","Request","Response","Headers"].map(ka),vue=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function rx(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Wp(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(tx(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function VV(t,e){if(tx(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const td=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,WV=t=>!Jh(t)&&t!==td;function $I(){const{caseless:t,skipUndefined:e}=WV(this)&&this||{},n={},r=(s,i)=>{const o=t&&VV(n,i)||i;Wb(n[o])&&Wb(s)?n[o]=$I(n[o],s):Wb(s)?n[o]=$I({},s):Wp(s)?n[o]=s.slice():(!e||!Jh(s))&&(n[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&rx(arguments[s],r);return n}const bue=(t,e,n,{allOwnKeys:r}={})=>(rx(e,(s,i)=>{n&&Ti(s)?t[i]=MV(s,n):t[i]=s},{allOwnKeys:r}),t),wue=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Cue=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Sue=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&V$(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Bue=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Nue=t=>{if(!t)return null;if(Wp(t))return t;let e=t.length;if(!zV(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Eue=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&V$(Uint8Array)),Iue=(t,e)=>{const r=(t&&t[YC]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},kue=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Tue=ka("HTMLFormElement"),Fue=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),xL=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),$ue=ka("RegExp"),GV=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};rx(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},_ue=t=>{GV(t,(e,n)=>{if(Ti(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Ti(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Oue=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Wp(t)?r(t):r(String(t).split(e)),n},Due=()=>{},Rue=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Pue(t){return!!(t&&Ti(t.append)&&t[QV]==="FormData"&&t[YC])}const Uue=t=>{const e=new Array(10),n=(r,s)=>{if(nx(r)){if(e.indexOf(r)>=0)return;if(tx(r))return r;if(!("toJSON"in r)){e[s]=r;const i=Wp(r)?[]:{};return rx(r,(o,a)=>{const l=n(o,s+1);!Jh(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},Lue=ka("AsyncFunction"),jue=t=>t&&(nx(t)||Ti(t))&&Ti(t.then)&&Ti(t.catch),KV=((t,e)=>t?setImmediate:e?((n,r)=>(td.addEventListener("message",({source:s,data:i})=>{s===td&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),td.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ti(td.postMessage)),Mue=typeof queueMicrotask<"u"?queueMicrotask.bind(td):typeof process<"u"&&process.nextTick||KV,Que=t=>t!=null&&Ti(t[YC]),ye={isArray:Wp,isArrayBuffer:HV,isBuffer:tx,isFormData:hue,isArrayBufferView:iue,isString:oue,isNumber:zV,isBoolean:aue,isObject:nx,isPlainObject:Wb,isEmptyObject:lue,isReadableStream:mue,isRequest:gue,isResponse:yue,isHeaders:xue,isUndefined:Jh,isDate:cue,isFile:uue,isBlob:Aue,isRegExp:$ue,isFunction:Ti,isStream:fue,isURLSearchParams:pue,isTypedArray:Eue,isFileList:due,forEach:rx,merge:$I,extend:bue,trim:vue,stripBOM:wue,inherits:Cue,toFlatObject:Sue,kindOf:JC,kindOfTest:ka,endsWith:Bue,toArray:Nue,forEachEntry:Iue,matchAll:kue,isHTMLForm:Tue,hasOwnProperty:xL,hasOwnProp:xL,reduceDescriptors:GV,freezeMethods:_ue,toObjectSet:Oue,toCamelCase:Fue,noop:Due,toFiniteNumber:Rue,findKey:VV,global:td,isContextDefined:WV,isSpecCompliantForm:Pue,toJSONObject:Uue,isAsyncFn:Lue,isThenable:jue,setImmediate:KV,asap:Mue,isIterable:Que};function wt(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}ye.inherits(wt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ye.toJSONObject(this.config),code:this.code,status:this.status}}});const XV=wt.prototype,qV={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{qV[t]={value:t}});Object.defineProperties(wt,qV);Object.defineProperty(XV,"isAxiosError",{value:!0});wt.from=(t,e,n,r,s,i)=>{const o=Object.create(XV);ye.toFlatObject(t,o,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return wt.call(o,a,l,n,r,s),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const Hue=null;function _I(t){return ye.isPlainObject(t)||ye.isArray(t)}function YV(t){return ye.endsWith(t,"[]")?t.slice(0,-2):t}function vL(t,e,n){return t?t.concat(e).map(function(s,i){return s=YV(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function zue(t){return ye.isArray(t)&&!t.some(_I)}const Vue=ye.toFlatObject(ye,{},null,function(e){return/^is[A-Z]/.test(e)});function eS(t,e,n){if(!ye.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=ye.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,m){return!ye.isUndefined(m[p])});const r=n.metaTokens,s=n.visitor||u,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&ye.isSpecCompliantForm(e);if(!ye.isFunction(s))throw new TypeError("visitor must be a function");function c(h){if(h===null)return"";if(ye.isDate(h))return h.toISOString();if(ye.isBoolean(h))return h.toString();if(!l&&ye.isBlob(h))throw new wt("Blob is not supported. Use a Buffer instead.");return ye.isArrayBuffer(h)||ye.isTypedArray(h)?l&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function u(h,p,m){let y=h;if(h&&!m&&typeof h=="object"){if(ye.endsWith(p,"{}"))p=r?p:p.slice(0,-2),h=JSON.stringify(h);else if(ye.isArray(h)&&zue(h)||(ye.isFileList(h)||ye.endsWith(p,"[]"))&&(y=ye.toArray(h)))return p=YV(p),y.forEach(function(v,b){!(ye.isUndefined(v)||v===null)&&e.append(o===!0?vL([p],b,i):o===null?p:p+"[]",c(v))}),!1}return _I(h)?!0:(e.append(vL(m,p,i),c(h)),!1)}const A=[],d=Object.assign(Vue,{defaultVisitor:u,convertValue:c,isVisitable:_I});function f(h,p){if(!ye.isUndefined(h)){if(A.indexOf(h)!==-1)throw Error("Circular reference detected in "+p.join("."));A.push(h),ye.forEach(h,function(y,x){(!(ye.isUndefined(y)||y===null)&&s.call(e,y,ye.isString(x)?x.trim():x,p,d))===!0&&f(y,p?p.concat(x):[x])}),A.pop()}}if(!ye.isObject(t))throw new TypeError("data must be an object");return f(t),e}function bL(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function W$(t,e){this._pairs=[],t&&eS(t,this,e)}const JV=W$.prototype;JV.append=function(e,n){this._pairs.push([e,n])};JV.toString=function(e){const n=e?function(r){return e.call(this,r,bL)}:bL;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Wue(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ZV(t,e,n){if(!e)return t;const r=n&&n.encode||Wue;ye.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=ye.isURLSearchParams(e)?e.toString():new W$(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class wL{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ye.forEach(this.handlers,function(r){r!==null&&e(r)})}}const eW={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Gue=typeof URLSearchParams<"u"?URLSearchParams:W$,Kue=typeof FormData<"u"?FormData:null,Xue=typeof Blob<"u"?Blob:null,que={isBrowser:!0,classes:{URLSearchParams:Gue,FormData:Kue,Blob:Xue},protocols:["http","https","file","blob","url","data"]},G$=typeof window<"u"&&typeof document<"u",OI=typeof navigator=="object"&&navigator||void 0,Yue=G$&&(!OI||["ReactNative","NativeScript","NS"].indexOf(OI.product)<0),Jue=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Zue=G$&&window.location.href||"http://localhost",eAe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:G$,hasStandardBrowserEnv:Yue,hasStandardBrowserWebWorkerEnv:Jue,navigator:OI,origin:Zue},Symbol.toStringTag,{value:"Module"})),Rs={...eAe,...que};function tAe(t,e){return eS(t,new Rs.classes.URLSearchParams,{visitor:function(n,r,s,i){return Rs.isNode&&ye.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function nAe(t){return ye.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function rAe(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function tW(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&ye.isArray(s)?s.length:o,l?(ye.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!ye.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&ye.isArray(s[o])&&(s[o]=rAe(s[o])),!a)}if(ye.isFormData(t)&&ye.isFunction(t.entries)){const n={};return ye.forEachEntry(t,(r,s)=>{e(nAe(r),s,n,0)}),n}return null}function sAe(t,e,n){if(ye.isString(t))try{return(e||JSON.parse)(t),ye.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const sx={transitional:eW,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=ye.isObject(e);if(i&&ye.isHTMLForm(e)&&(e=new FormData(e)),ye.isFormData(e))return s?JSON.stringify(tW(e)):e;if(ye.isArrayBuffer(e)||ye.isBuffer(e)||ye.isStream(e)||ye.isFile(e)||ye.isBlob(e)||ye.isReadableStream(e))return e;if(ye.isArrayBufferView(e))return e.buffer;if(ye.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return tAe(e,this.formSerializer).toString();if((a=ye.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return eS(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),sAe(e)):e}],transformResponse:[function(e){const n=this.transitional||sx.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(ye.isResponse(e)||ye.isReadableStream(e))return e;if(e&&ye.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?wt.from(a,wt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Rs.classes.FormData,Blob:Rs.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ye.forEach(["delete","get","head","post","put","patch"],t=>{sx.headers[t]={}});const iAe=ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oAe=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&iAe[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},CL=Symbol("internals");function Xm(t){return t&&String(t).trim().toLowerCase()}function Gb(t){return t===!1||t==null?t:ye.isArray(t)?t.map(Gb):String(t)}function aAe(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const lAe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function zN(t,e,n,r,s){if(ye.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!ye.isString(e)){if(ye.isString(r))return e.indexOf(r)!==-1;if(ye.isRegExp(r))return r.test(e)}}function cAe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function uAe(t,e){const n=ye.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let Fi=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const u=Xm(l);if(!u)throw new Error("header name must be a non-empty string");const A=ye.findKey(s,u);(!A||s[A]===void 0||c===!0||c===void 0&&s[A]!==!1)&&(s[A||l]=Gb(a))}const o=(a,l)=>ye.forEach(a,(c,u)=>i(c,u,l));if(ye.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(ye.isString(e)&&(e=e.trim())&&!lAe(e))o(oAe(e),n);else if(ye.isObject(e)&&ye.isIterable(e)){let a={},l,c;for(const u of e){if(!ye.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?ye.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=Xm(e),e){const r=ye.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return aAe(s);if(ye.isFunction(n))return n.call(this,s,r);if(ye.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Xm(e),e){const r=ye.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||zN(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Xm(o),o){const a=ye.findKey(r,o);a&&(!n||zN(r,r[a],a,n))&&(delete r[a],s=!0)}}return ye.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||zN(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return ye.forEach(this,(s,i)=>{const o=ye.findKey(r,i);if(o){n[o]=Gb(s),delete n[i];return}const a=e?cAe(i):String(i).trim();a!==i&&delete n[i],n[a]=Gb(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return ye.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&ye.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[CL]=this[CL]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=Xm(o);r[a]||(uAe(s,o),r[a]=!0)}return ye.isArray(e)?e.forEach(i):i(e),this}};Fi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ye.reduceDescriptors(Fi.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});ye.freezeMethods(Fi);function VN(t,e){const n=this||sx,r=e||n,s=Fi.from(r.headers);let i=r.data;return ye.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function nW(t){return!!(t&&t.__CANCEL__)}function Gp(t,e,n){wt.call(this,t??"canceled",wt.ERR_CANCELED,e,n),this.name="CanceledError"}ye.inherits(Gp,wt,{__CANCEL__:!0});function rW(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new wt("Request failed with status code "+n.status,[wt.ERR_BAD_REQUEST,wt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function AAe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function dAe(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[i];o||(o=c),n[s]=l,r[s]=c;let A=i,d=0;for(;A!==s;)d+=n[A++],A=A%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const f=u&&c-u;return f?Math.round(d*1e3/f):void 0}}function fAe(t,e){let n=0,r=1e3/e,s,i;const o=(c,u=Date.now())=>{n=u,s=null,i&&(clearTimeout(i),i=null),t(...c)};return[(...c)=>{const u=Date.now(),A=u-n;A>=r?o(c,u):(s=c,i||(i=setTimeout(()=>{i=null,o(s)},r-A)))},()=>s&&o(s)]}const _w=(t,e,n=3)=>{let r=0;const s=dAe(50,250);return fAe(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-r,c=s(l),u=o<=a;r=o;const A={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(A)},n)},SL=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},BL=t=>(...e)=>ye.asap(()=>t(...e)),hAe=Rs.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Rs.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Rs.origin),Rs.navigator&&/(msie|trident)/i.test(Rs.navigator.userAgent)):()=>!0,pAe=Rs.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const o=[t+"="+encodeURIComponent(e)];ye.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),ye.isString(r)&&o.push("path="+r),ye.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function mAe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function gAe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function sW(t,e,n){let r=!mAe(e);return t&&(r||n==!1)?gAe(t,e):e}const NL=t=>t instanceof Fi?{...t}:t;function Dd(t,e){e=e||{};const n={};function r(c,u,A,d){return ye.isPlainObject(c)&&ye.isPlainObject(u)?ye.merge.call({caseless:d},c,u):ye.isPlainObject(u)?ye.merge({},u):ye.isArray(u)?u.slice():u}function s(c,u,A,d){if(ye.isUndefined(u)){if(!ye.isUndefined(c))return r(void 0,c,A,d)}else return r(c,u,A,d)}function i(c,u){if(!ye.isUndefined(u))return r(void 0,u)}function o(c,u){if(ye.isUndefined(u)){if(!ye.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,A){if(A in e)return r(c,u);if(A in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,A)=>s(NL(c),NL(u),A,!0)};return ye.forEach(Object.keys({...t,...e}),function(u){const A=l[u]||s,d=A(t[u],e[u],u);ye.isUndefined(d)&&A!==a||(n[u]=d)}),n}const iW=t=>{const e=Dd({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;if(e.headers=o=Fi.from(o),e.url=ZV(sW(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),ye.isFormData(n)){if(Rs.hasStandardBrowserEnv||Rs.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ye.isFunction(n.getHeaders)){const l=n.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,A])=>{c.includes(u.toLowerCase())&&o.set(u,A)})}}if(Rs.hasStandardBrowserEnv&&(r&&ye.isFunction(r)&&(r=r(e)),r||r!==!1&&hAe(e.url))){const l=s&&i&&pAe.read(i);l&&o.set(s,l)}return e},yAe=typeof XMLHttpRequest<"u",xAe=yAe&&function(t){return new Promise(function(n,r){const s=iW(t);let i=s.data;const o=Fi.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,u,A,d,f,h;function p(){f&&f(),h&&h(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let m=new XMLHttpRequest;m.open(s.method.toUpperCase(),s.url,!0),m.timeout=s.timeout;function y(){if(!m)return;const v=Fi.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),w={data:!a||a==="text"||a==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:v,config:t,request:m};rW(function(B){n(B),p()},function(B){r(B),p()},w),m=null}"onloadend"in m?m.onloadend=y:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(y)},m.onabort=function(){m&&(r(new wt("Request aborted",wt.ECONNABORTED,t,m)),m=null)},m.onerror=function(b){const w=b&&b.message?b.message:"Network Error",C=new wt(w,wt.ERR_NETWORK,t,m);C.event=b||null,r(C),m=null},m.ontimeout=function(){let b=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const w=s.transitional||eW;s.timeoutErrorMessage&&(b=s.timeoutErrorMessage),r(new wt(b,w.clarifyTimeoutError?wt.ETIMEDOUT:wt.ECONNABORTED,t,m)),m=null},i===void 0&&o.setContentType(null),"setRequestHeader"in m&&ye.forEach(o.toJSON(),function(b,w){m.setRequestHeader(w,b)}),ye.isUndefined(s.withCredentials)||(m.withCredentials=!!s.withCredentials),a&&a!=="json"&&(m.responseType=s.responseType),c&&([d,h]=_w(c,!0),m.addEventListener("progress",d)),l&&m.upload&&([A,f]=_w(l),m.upload.addEventListener("progress",A),m.upload.addEventListener("loadend",f)),(s.cancelToken||s.signal)&&(u=v=>{m&&(r(!v||v.type?new Gp(null,t,m):v),m.abort(),m=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const x=AAe(s.url);if(x&&Rs.protocols.indexOf(x)===-1){r(new wt("Unsupported protocol "+x+":",wt.ERR_BAD_REQUEST,t));return}m.send(i||null)})},vAe=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(c){if(!s){s=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof wt?u:new Gp(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,i(new wt(`timeout ${e} of ms exceeded`,wt.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>ye.asap(a),l}},bAe=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},wAe=async function*(t,e){for await(const n of CAe(t))yield*bAe(n,e)},CAe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},EL=(t,e,n,r)=>{const s=wAe(t,e);let i=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await s.next();if(c){a(),l.close();return}let A=u.byteLength;if(n){let d=i+=A;n(d)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},IL=64*1024,{isFunction:v1}=ye,SAe=(({Request:t,Response:e})=>({Request:t,Response:e}))(ye.global),{ReadableStream:kL,TextEncoder:TL}=ye.global,FL=(t,...e)=>{try{return!!t(...e)}catch{return!1}},BAe=t=>{t=ye.merge.call({skipUndefined:!0},SAe,t);const{fetch:e,Request:n,Response:r}=t,s=e?v1(e):typeof fetch=="function",i=v1(n),o=v1(r);if(!s)return!1;const a=s&&v1(kL),l=s&&(typeof TL=="function"?(h=>p=>h.encode(p))(new TL):async h=>new Uint8Array(await new n(h).arrayBuffer())),c=i&&a&&FL(()=>{let h=!1;const p=new n(Rs.origin,{body:new kL,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!p}),u=o&&a&&FL(()=>ye.isReadableStream(new r("").body)),A={stream:u&&(h=>h.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!A[h]&&(A[h]=(p,m)=>{let y=p&&p[h];if(y)return y.call(p);throw new wt(`Response type '${h}' is not supported`,wt.ERR_NOT_SUPPORT,m)})});const d=async h=>{if(h==null)return 0;if(ye.isBlob(h))return h.size;if(ye.isSpecCompliantForm(h))return(await new n(Rs.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(ye.isArrayBufferView(h)||ye.isArrayBuffer(h))return h.byteLength;if(ye.isURLSearchParams(h)&&(h=h+""),ye.isString(h))return(await l(h)).byteLength},f=async(h,p)=>{const m=ye.toFiniteNumber(h.getContentLength());return m??d(p)};return async h=>{let{url:p,method:m,data:y,signal:x,cancelToken:v,timeout:b,onDownloadProgress:w,onUploadProgress:C,responseType:B,headers:S,withCredentials:N="same-origin",fetchOptions:k}=iW(h),O=e||fetch;B=B?(B+"").toLowerCase():"text";let U=vAe([x,v&&v.toAbortSignal()],b),P=null;const V=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let W;try{if(C&&c&&m!=="get"&&m!=="head"&&(W=await f(S,y))!==0){let Z=new n(p,{method:"POST",body:y,duplex:"half"}),te;if(ye.isFormData(y)&&(te=Z.headers.get("content-type"))&&S.setContentType(te),Z.body){const[ue,de]=SL(W,_w(BL(C)));y=EL(Z.body,IL,ue,de)}}ye.isString(N)||(N=N?"include":"omit");const j=i&&"credentials"in n.prototype,G={...k,signal:U,method:m.toUpperCase(),headers:S.normalize().toJSON(),body:y,duplex:"half",credentials:j?N:void 0};P=i&&new n(p,G);let D=await(i?O(P,k):O(p,G));const M=u&&(B==="stream"||B==="response");if(u&&(w||M&&V)){const Z={};["status","statusText","headers"].forEach(le=>{Z[le]=D[le]});const te=ye.toFiniteNumber(D.headers.get("content-length")),[ue,de]=w&&SL(te,_w(BL(w),!0))||[];D=new r(EL(D.body,IL,ue,()=>{de&&de(),V&&V()}),Z)}B=B||"text";let q=await A[ye.findKey(A,B)||"text"](D,h);return!M&&V&&V(),await new Promise((Z,te)=>{rW(Z,te,{data:q,headers:Fi.from(D.headers),status:D.status,statusText:D.statusText,config:h,request:P})})}catch(j){throw V&&V(),j&&j.name==="TypeError"&&/Load failed|fetch/i.test(j.message)?Object.assign(new wt("Network Error",wt.ERR_NETWORK,h,P),{cause:j.cause||j}):wt.from(j,j&&j.code,h,P)}}},NAe=new Map,oW=t=>{let e=t?t.env:{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let o=i.length,a=o,l,c,u=NAe;for(;a--;)l=i[a],c=u.get(l),c===void 0&&u.set(l,c=a?new Map:BAe(e)),u=c;return c};oW();const DI={http:Hue,xhr:xAe,fetch:{get:oW}};ye.forEach(DI,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const $L=t=>`- ${t}`,EAe=t=>ye.isFunction(t)||t===null||t===!1,aW={getAdapter:(t,e)=>{t=ye.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let o=0;o<n;o++){r=t[o];let a;if(s=r,!EAe(r)&&(s=DI[(a=String(r)).toLowerCase()],s===void 0))throw new wt(`Unknown adapter '${a}'`);if(s&&(ye.isFunction(s)||(s=s.get(e))))break;i[a||"#"+o]=s}if(!s){const o=Object.entries(i).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=n?o.length>1?`since :
`+o.map($L).join(`
`):" "+$L(o[0]):"as no adapter specified";throw new wt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s},adapters:DI};function WN(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Gp(null,t)}function _L(t){return WN(t),t.headers=Fi.from(t.headers),t.data=VN.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),aW.getAdapter(t.adapter||sx.adapter,t)(t).then(function(r){return WN(t),r.data=VN.call(t,t.transformResponse,r),r.headers=Fi.from(r.headers),r},function(r){return nW(r)||(WN(t),r&&r.response&&(r.response.data=VN.call(t,t.transformResponse,r.response),r.response.headers=Fi.from(r.response.headers))),Promise.reject(r)})}const lW="1.12.2",tS={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{tS[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const OL={};tS.transitional=function(e,n,r){function s(i,o){return"[Axios v"+lW+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new wt(s(o," has been removed"+(n?" in "+n:"")),wt.ERR_DEPRECATED);return n&&!OL[o]&&(OL[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};tS.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function IAe(t,e,n){if(typeof t!="object")throw new wt("options must be an object",wt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new wt("option "+i+" must be "+l,wt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new wt("Unknown option "+i,wt.ERR_BAD_OPTION)}}const Kb={assertOptions:IAe,validators:tS},ja=Kb.validators;let vd=class{constructor(e){this.defaults=e||{},this.interceptors={request:new wL,response:new wL}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Dd(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Kb.assertOptions(r,{silentJSONParsing:ja.transitional(ja.boolean),forcedJSONParsing:ja.transitional(ja.boolean),clarifyTimeoutError:ja.transitional(ja.boolean)},!1),s!=null&&(ye.isFunction(s)?n.paramsSerializer={serialize:s}:Kb.assertOptions(s,{encode:ja.function,serialize:ja.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Kb.assertOptions(n,{baseUrl:ja.spelling("baseURL"),withXsrfToken:ja.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&ye.merge(i.common,i[n.method]);i&&ye.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),n.headers=Fi.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(n)===!1||(l=l&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});const c=[];this.interceptors.response.forEach(function(p){c.push(p.fulfilled,p.rejected)});let u,A=0,d;if(!l){const h=[_L.bind(this),void 0];for(h.unshift(...a),h.push(...c),d=h.length,u=Promise.resolve(n);A<d;)u=u.then(h[A++],h[A++]);return u}d=a.length;let f=n;for(;A<d;){const h=a[A++],p=a[A++];try{f=h(f)}catch(m){p.call(this,m);break}}try{u=_L.call(this,f)}catch(h){return Promise.reject(h)}for(A=0,d=c.length;A<d;)u=u.then(c[A++],c[A++]);return u}getUri(e){e=Dd(this.defaults,e);const n=sW(e.baseURL,e.url,e.allowAbsoluteUrls);return ZV(n,e.params,e.paramsSerializer)}};ye.forEach(["delete","get","head","options"],function(e){vd.prototype[e]=function(n,r){return this.request(Dd(r||{},{method:e,url:n,data:(r||{}).data}))}});ye.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Dd(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}vd.prototype[e]=n(),vd.prototype[e+"Form"]=n(!0)});let kAe=class cW{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Gp(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new cW(function(s){e=s}),cancel:e}}};function TAe(t){return function(n){return t.apply(null,n)}}function FAe(t){return ye.isObject(t)&&t.isAxiosError===!0}const RI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(RI).forEach(([t,e])=>{RI[e]=t});function uW(t){const e=new vd(t),n=MV(vd.prototype.request,e);return ye.extend(n,vd.prototype,e,{allOwnKeys:!0}),ye.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return uW(Dd(t,s))},n}const ir=uW(sx);ir.Axios=vd;ir.CanceledError=Gp;ir.CancelToken=kAe;ir.isCancel=nW;ir.VERSION=lW;ir.toFormData=eS;ir.AxiosError=wt;ir.Cancel=ir.CanceledError;ir.all=function(e){return Promise.all(e)};ir.spread=TAe;ir.isAxiosError=FAe;ir.mergeConfig=Dd;ir.AxiosHeaders=Fi;ir.formToJSON=t=>tW(ye.isHTMLForm(t)?new FormData(t):t);ir.getAdapter=aW.getAdapter;ir.HttpStatusCode=RI;ir.default=ir;const{Axios:Oxt,AxiosError:Dxt,CanceledError:Rxt,isCancel:Pxt,CancelToken:Uxt,VERSION:Lxt,all:jxt,Cancel:Mxt,isAxiosError:Qxt,spread:Hxt,toFormData:zxt,AxiosHeaders:Vxt,HttpStatusCode:Wxt,formToJSON:Gxt,getAdapter:Kxt,mergeConfig:Xxt}=ir,bt=ir.create({baseURL:"https://literacy-backend-mdbn.onrender.com",timeout:18e4,headers:{"Content-Type":"application/json"}});bt.interceptors.request.use(t=>{const e=Wo.getState().token;return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));bt.interceptors.response.use(t=>t,t=>{var e;return((e=t.response)==null?void 0:e.status)===401&&(Wo.getState().logout(),window.location.href="/login"),Promise.reject(t)});function $Ae(){const[t,e]=z.useState(""),[n,r]=z.useState(""),[s,i]=z.useState(""),[o,a]=z.useState(!1),l=Qs(),{login:c}=Wo(),u=async A=>{var d,f;A.preventDefault(),i(""),a(!0);try{const h=await bt.post("/api/v1/auth/login",{email:t,password:n}),{user:p,token:m}=h.data.data;c(p,m),l("/dashboard")}catch(h){i(((f=(d=h.response)==null?void 0:d.data)==null?void 0:f.message)||"로그인에 실패했습니다.")}finally{a(!1)}};return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:g.jsxs("div",{className:"max-w-md w-full",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("h1",{className:"text-4xl font-bold text-primary mb-2",children:"문해력 진단 평가"}),g.jsx("p",{className:"text-muted-foreground",children:"초등 1학년부터 중등 3학년까지"})]}),g.jsxs("div",{className:"bg-card rounded-lg shadow-lg p-8",children:[g.jsx("h2",{className:"text-2xl font-semibold mb-6 text-card-foreground",children:"로그인"}),s&&g.jsx("div",{className:"mb-4 p-3 bg-destructive/10 border border-destructive/20 rounded-md text-destructive text-sm",children:s}),g.jsxs("form",{onSubmit:u,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-card-foreground mb-1",children:"이메일"}),g.jsx("input",{type:"email",id:"email",value:t,onChange:A=>e(A.target.value),required:!0,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"your@email.com"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-card-foreground mb-1",children:"비밀번호"}),g.jsx("input",{type:"password",id:"password",value:n,onChange:A=>r(A.target.value),required:!0,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"••••••••"})]}),g.jsx("button",{type:"submit",disabled:o,className:"w-full bg-primary text-primary-foreground py-2 px-4 rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:o?"로그인 중...":"로그인"})]}),g.jsx("div",{className:"mt-6 text-center",children:g.jsxs("p",{className:"text-sm text-muted-foreground",children:["계정이 없으신가요?"," ",g.jsx(Kc,{to:"/register",className:"text-primary hover:underline font-medium",children:"회원가입"})]})})]}),g.jsx("div",{className:"mt-6 text-center text-xs text-muted-foreground",children:g.jsx("p",{children:"© 2025 문해력 진단 평가 시스템. All rights reserved."})})]})})}function _Ae(){const[t,e]=z.useState({email:"",password:"",confirmPassword:"",name:"",role:"student",grade:1,schoolName:"",parentPhone:""}),[n,r]=z.useState(""),[s,i]=z.useState(!1),o=Qs(),a=c=>{e({...t,[c.target.name]:c.target.value})},l=async c=>{var u,A;if(c.preventDefault(),r(""),t.password!==t.confirmPassword){r("비밀번호가 일치하지 않습니다.");return}i(!0);try{await bt.post("/api/v1/auth/register",{email:t.email,password:t.password,name:t.name,role:t.role,grade:t.role==="student"?t.grade:void 0,schoolName:t.role==="student"?t.schoolName:void 0,parentPhone:t.role==="student"?t.parentPhone:void 0}),alert("회원가입이 완료되었습니다. 로그인해주세요."),o("/login")}catch(d){r(((A=(u=d.response)==null?void 0:u.data)==null?void 0:A.message)||"회원가입에 실패했습니다.")}finally{i(!1)}};return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4 py-12",children:g.jsxs("div",{className:"max-w-md w-full",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("h1",{className:"text-4xl font-bold text-primary mb-2",children:"문해력 진단 평가"}),g.jsx("p",{className:"text-muted-foreground",children:"회원가입"})]}),g.jsxs("div",{className:"bg-card rounded-lg shadow-lg p-8",children:[g.jsx("h2",{className:"text-2xl font-semibold mb-6 text-card-foreground",children:"계정 만들기"}),n&&g.jsx("div",{className:"mb-4 p-3 bg-destructive/10 border border-destructive/20 rounded-md text-destructive text-sm",children:n}),g.jsxs("form",{onSubmit:l,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"이름"}),g.jsx("input",{type:"text",name:"name",value:t.name,onChange:a,required:!0,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"홍길동"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"이메일"}),g.jsx("input",{type:"email",name:"email",value:t.email,onChange:a,required:!0,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"your@email.com"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"역할"}),g.jsxs("select",{name:"role",value:t.role,onChange:a,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",children:[g.jsx("option",{value:"student",children:"학생"}),g.jsx("option",{value:"parent",children:"학부모"}),g.jsx("option",{value:"teacher",children:"교사"})]})]}),t.role==="student"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"학년"}),g.jsxs("select",{name:"grade",value:t.grade,onChange:a,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",children:[[1,2,3,4,5,6].map(c=>g.jsxs("option",{value:c,children:["초등 ",c,"학년"]},c)),[7,8,9].map(c=>g.jsxs("option",{value:c,children:["중등 ",c-6,"학년"]},c))]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"학교명"}),g.jsx("input",{type:"text",name:"schoolName",value:t.schoolName,onChange:a,required:!0,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"예: 서울초등학교"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"학부모 휴대폰 번호"}),g.jsx("input",{type:"tel",name:"parentPhone",value:t.parentPhone,onChange:a,required:!0,pattern:"[0-9]{3}-[0-9]{4}-[0-9]{4}",className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"010-1234-5678"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"비밀번호"}),g.jsx("input",{type:"password",name:"password",value:t.password,onChange:a,required:!0,minLength:8,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"8자 이상"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"비밀번호 확인"}),g.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:a,required:!0,className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"비밀번호 재입력"})]}),g.jsx("button",{type:"submit",disabled:s,className:"w-full bg-primary text-primary-foreground py-2 px-4 rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:s?"가입 중...":"회원가입"})]}),g.jsx("div",{className:"mt-6 text-center",children:g.jsxs("p",{className:"text-sm text-muted-foreground",children:["이미 계정이 있으신가요?"," ",g.jsx(Kc,{to:"/login",className:"text-primary hover:underline font-medium",children:"로그인"})]})})]})]})})}function OAe(){const{logout:t}=Wo(),e=Qs(),[n,r]=z.useState([]),[s,i]=z.useState(null),[o,a]=z.useState(null),[l,c]=z.useState(!0);z.useEffect(()=>{u()},[]);const u=async()=>{var m,y,x;try{c(!0),console.log("Fetching student profile...");const v=await bt.get("/api/v1/students/me/profile");console.log("Profile response:",v.data);const b=v.data.data;i(b);const w=await bt.get("/api/v1/students/me/stats");a(w.data.data);const S=(await bt.get("/api/v1/templates")).data.data.filter(N=>N.grade===b.grade);r(S)}catch(v){console.error("데이터 조회 실패:",v),console.error("Error details:",(m=v.response)==null?void 0:m.data),alert(`데이터 조회 실패: ${((x=(y=v.response)==null?void 0:y.data)==null?void 0:x.message)||v.message}`)}finally{c(!1)}},A=m=>{e(`/test/start/${m}`)},d=()=>{t(),e("/login")},f=async m=>{if(confirm("이 테스트를 삭제하시겠습니까?"))try{await bt.delete(`/api/v1/sessions/${m}`),alert("테스트가 삭제되었습니다."),u()}catch(y){console.error("테스트 삭제 실패:",y),alert("테스트 삭제에 실패했습니다.")}},h=m=>m<=6?`초등 ${m}학년`:`중등 ${m-6}학년`,p=m=>{const y={pending:{text:"대기중",className:"bg-muted text-muted-foreground"},in_progress:{text:"진행중",className:"bg-primary text-primary-foreground"},completed:{text:"완료",className:"bg-accent text-accent-foreground"},scored:{text:"채점완료",className:"bg-chart-1 text-primary-foreground"}},x=y[m]||y.pending;return g.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${x.className}`,children:x.text})};return l?g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),g.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})]})}):g.jsxs("div",{className:"min-h-screen bg-background",children:[g.jsx("header",{className:"bg-card shadow-sm border-b border-border",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold text-primary",children:"문해력 진단 평가"}),g.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["안녕하세요, ",g.jsx("span",{className:"font-medium text-foreground",children:s==null?void 0:s.user.name}),"님",s&&g.jsxs("span",{className:"ml-2",children:["(",h(s.grade),s.schoolName&&`, ${s.schoolName}`,s.className&&` ${s.className}`,")"]})]})]}),g.jsx("div",{className:"flex gap-3",children:g.jsx("button",{onClick:d,className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-card-foreground",children:"로그아웃"})})]})})}),g.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o&&g.jsxs("section",{className:"mb-8",children:[g.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"내 학습 현황"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"총 테스트"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:o.totalSessions})]}),g.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"📝"})})]})}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"완료한 테스트"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:o.completedSessions})]}),g.jsx("div",{className:"w-12 h-12 bg-chart-1/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"✅"})})]})}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"채점 완료"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:o.scoredSessions})]}),g.jsx("div",{className:"w-12 h-12 bg-chart-2/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"📊"})})]})}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"평균 점수"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:o.averageScore>0?`${o.averageScore}%`:"-"})]}),g.jsx("div",{className:"w-12 h-12 bg-chart-3/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"🎯"})})]})})]})]}),g.jsxs("section",{className:"mb-12",children:[g.jsxs("h2",{className:"text-2xl font-bold mb-6 text-foreground",children:["내 학년 테스트 (",s&&h(s.grade),")"]}),n.length===0?g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:g.jsx("p",{className:"text-muted-foreground",children:"현재 학년에 맞는 테스트가 없습니다."})}):g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(m=>g.jsxs("div",{className:"bg-card rounded-lg shadow-md hover:shadow-lg transition-shadow p-6 border border-border",children:[g.jsxs("div",{className:"flex justify-between items-start mb-4",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:h(m.grade)}),g.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:m.title})]}),g.jsx("span",{className:"px-3 py-1 bg-accent text-accent-foreground rounded-full text-xs font-medium",children:m.templateCode})]}),g.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-muted-foreground",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("span",{children:"📝"}),g.jsxs("span",{children:[m.totalQuestions,"문항"]})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("span",{children:"⏱️"}),g.jsxs("span",{children:[m.timeLimit,"분"]})]})]}),g.jsx("button",{onClick:()=>A(m.templateCode),className:"w-full bg-primary text-primary-foreground py-2 px-4 rounded-lg hover:bg-primary/90 transition-colors font-medium",children:"시작하기"})]},m.id))})]}),g.jsxs("section",{children:[g.jsx("h2",{className:"text-2xl font-bold mb-6 text-foreground",children:"최근 테스트 결과"}),!o||o.recentSessions.length===0?g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:g.jsx("p",{className:"text-muted-foreground",children:"아직 진행한 테스트가 없습니다."})}):g.jsx("div",{className:"bg-card rounded-lg shadow-md overflow-hidden border border-border",children:g.jsxs("table",{className:"min-w-full divide-y divide-border",children:[g.jsx("thead",{className:"bg-muted",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"테스트"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"상태"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"점수"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"등급"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"날짜"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"작업"})]})}),g.jsx("tbody",{className:"bg-card divide-y divide-border",children:o.recentSessions.map(m=>g.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[g.jsx("div",{className:"text-sm font-medium text-card-foreground",children:m.template.title}),g.jsx("div",{className:"text-xs text-muted-foreground",children:h(m.template.grade)})]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p(m.status)}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:m.result?`${m.result.percentage.toFixed(1)}%`:"-"}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:m.result?`${m.result.gradeLevel}등급`:"-"}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:new Date(m.createdAt).toLocaleDateString("ko-KR")}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsxs("div",{className:"flex items-center gap-2",children:[m.status==="in_progress"&&g.jsx("button",{onClick:()=>e(`/test/session/${m.id}`),className:"text-primary hover:underline text-sm font-medium",children:"계속하기"}),(m.status==="scored"||m.status==="completed")&&m.result&&g.jsx("button",{onClick:()=>e(`/test/result/${m.id}`),className:"text-primary hover:underline text-sm font-medium",children:"결과보기"}),g.jsx("button",{onClick:()=>f(m.id),className:"text-destructive hover:underline text-sm font-medium ml-2",children:"삭제"})]})})]},m.id))})]})})]})]})]})}function DAe(){const{templateCode:t}=of(),e=Qs(),{user:n}=Wo(),[r,s]=z.useState(null),[i,o]=z.useState(!0),[a,l]=z.useState(!1);z.useEffect(()=>{c()},[t]);const c=async()=>{try{o(!0);const d=await bt.get(`/api/v1/templates/${t}`);s(d.data.data)}catch(d){console.error("템플릿 조회 실패:",d),alert("테스트 정보를 불러올 수 없습니다."),e("/dashboard")}finally{o(!1)}},u=async()=>{var d,f;if(r)try{l(!0);const p=(await bt.post("/api/v1/sessions/start",{templateId:r.id})).data.data.sessionId;e(`/test/survey/${p}`)}catch(h){console.error("테스트 시작 실패:",h),alert(((f=(d=h.response)==null?void 0:d.data)==null?void 0:f.message)||"테스트를 시작할 수 없습니다.")}finally{l(!1)}},A=d=>d<=6?`초등 ${d}학년`:`중등 ${d-6}학년`;return i?g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:g.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})}):r?g.jsx("div",{className:"min-h-screen bg-background",children:g.jsx("div",{className:"max-w-4xl mx-auto px-4 py-12",children:g.jsxs("div",{className:"bg-card rounded-lg shadow-lg p-8 border border-border",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("h1",{className:"text-3xl font-bold text-primary mb-2",children:r.title}),g.jsx("p",{className:"text-lg text-muted-foreground",children:A(r.grade)})]}),g.jsxs("div",{className:"bg-muted rounded-lg p-6 mb-8",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-foreground",children:"테스트 정보"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"📝"})}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-muted-foreground",children:"문항 수"}),g.jsxs("div",{className:"text-lg font-semibold text-foreground",children:[r.totalQuestions,"문항"]})]})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"⏱️"})}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-muted-foreground",children:"제한 시간"}),g.jsxs("div",{className:"text-lg font-semibold text-foreground",children:[r.timeLimit,"분"]})]})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"📊"})}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-muted-foreground",children:"평가 영역"}),g.jsx("div",{className:"text-lg font-semibold text-foreground",children:"4개 영역"})]})]})]})]}),g.jsxs("div",{className:"bg-accent/50 rounded-lg p-6 mb-8 border border-accent",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-accent-foreground",children:"⚠️ 테스트 전 확인사항"}),g.jsxs("ul",{className:"space-y-3 text-accent-foreground",children:[g.jsxs("li",{className:"flex items-start gap-2",children:[g.jsx("span",{className:"text-primary mt-1",children:"•"}),g.jsxs("span",{children:["테스트는 총 ",g.jsxs("strong",{children:[r.timeLimit,"분"]})," 동안 진행됩니다."]})]}),g.jsxs("li",{className:"flex items-start gap-2",children:[g.jsx("span",{className:"text-primary mt-1",children:"•"}),g.jsxs("span",{children:[g.jsxs("strong",{children:[r.totalQuestions,"개"]}),"의 문항에 답해주세요."]})]}),g.jsxs("li",{className:"flex items-start gap-2",children:[g.jsx("span",{className:"text-primary mt-1",children:"•"}),g.jsx("span",{children:"테스트는 어휘력, 독해력, 문법, 추론 영역과 독서 습관 설문으로 구성되어 있습니다."})]}),g.jsxs("li",{className:"flex items-start gap-2",children:[g.jsx("span",{className:"text-primary mt-1",children:"•"}),g.jsxs("span",{children:["한 번 시작하면 ",g.jsx("strong",{children:"중간 저장이 가능"}),"하며, 나중에 이어서 할 수 있습니다."]})]}),g.jsxs("li",{className:"flex items-start gap-2",children:[g.jsx("span",{className:"text-primary mt-1",children:"•"}),g.jsx("span",{children:"모든 문항에 성실히 답변해주세요. 결과는 즉시 확인할 수 있습니다."})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[g.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[g.jsx("h3",{className:"font-semibold text-primary mb-2",children:"📚 문해력 평가"}),g.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[g.jsx("li",{children:"• 어휘력 (단어와 한자성어 이해)"}),g.jsx("li",{children:"• 독해력 (글의 내용 파악)"}),g.jsx("li",{children:"• 문법/어법 (언어 규칙 이해)"}),g.jsx("li",{children:"• 추론/사고력 (논리적 사고)"})]})]}),g.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[g.jsx("h3",{className:"font-semibold text-primary mb-2",children:"📖 독서 습관 설문"}),g.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[g.jsx("li",{children:"• 읽기/쓰기 동기"}),g.jsx("li",{children:"• 가정 독서 환경"}),g.jsx("li",{children:"• 평소 독서 습관"}),g.jsx("li",{children:"• 선호 장르 파악"})]})]})]}),g.jsx("div",{className:"bg-muted rounded-lg p-4 mb-8",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-muted-foreground",children:"응시자"}),g.jsx("div",{className:"font-semibold text-foreground",children:n==null?void 0:n.name})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-muted-foreground",children:"이메일"}),g.jsx("div",{className:"font-semibold text-foreground",children:n==null?void 0:n.email})]})]})}),g.jsxs("div",{className:"flex gap-4",children:[g.jsx("button",{onClick:()=>e("/dashboard"),className:"flex-1 border border-border py-3 px-6 rounded-lg hover:bg-muted transition-colors text-foreground font-medium",children:"취소"}),g.jsx("button",{onClick:u,disabled:a,className:"flex-1 bg-primary text-primary-foreground py-3 px-6 rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-bold",children:a?"시작 준비 중...":"테스트 시작하기"})]})]})})}):null}function RAe(){const{sessionId:t}=of(),e=Qs(),[n,r]=z.useState([]),[s,i]=z.useState({}),[o,a]=z.useState(!0),[l,c]=z.useState(!1);z.useEffect(()=>{u()},[t]);const u=async()=>{try{a(!0);const v=await bt.get(`/api/v1/sessions/${t}/survey`);r(v.data.data.questions)}catch(v){console.error("설문 조회 실패:",v),alert("설문을 불러올 수 없습니다."),e("/dashboard")}finally{a(!1)}},A=(v,b)=>{i(w=>({...w,[v]:b}))},d=async()=>{const v=n.filter(b=>!s[b.id]);if(v.length>0){alert(`모든 질문에 답해주세요. (남은 문항: ${v.length}개)`);return}try{c(!0);const b=n.map(w=>({questionId:w.id,questionNumber:w.questionNumber,response:s[w.id]}));await bt.post(`/api/v1/sessions/${t}/survey`,{responses:b}),alert("설문이 완료되었습니다. 이제 테스트를 시작합니다."),e(`/test/session/${t}`)}catch(b){console.error("설문 제출 실패:",b),alert("설문 제출에 실패했습니다.")}finally{c(!1)}},f=v=>({reading_motivation:"읽기 동기",reading_environment:"독서 환경",reading_habit:"독서 습관",writing_motivation:"글쓰기 동기",reading_preference:"선호 장르",digital_literacy:"디지털 리터러시",critical_thinking:"비판적 사고",reading_attitude:"독서 태도"})[v]||v,h=v=>({reading_motivation:"from-blue-500 to-blue-600",reading_environment:"from-green-500 to-green-600",reading_habit:"from-purple-500 to-purple-600",writing_motivation:"from-orange-500 to-orange-600",reading_preference:"from-pink-500 to-pink-600",digital_literacy:"from-indigo-500 to-indigo-600",critical_thinking:"from-teal-500 to-teal-600",reading_attitude:"from-cyan-500 to-cyan-600"})[v]||"from-gray-500 to-gray-600";if(o)return g.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),g.jsx("p",{className:"text-gray-600 text-lg",children:"설문 문항을 불러오는 중..."})]})});const p=n.reduce((v,b)=>(v[b.category]||(v[b.category]=[]),v[b.category].push(b),v),{}),m=Object.keys(s).length,y=n.length,x=y>0?m/y*100:0;return g.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 py-8",children:g.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[g.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-6",children:[g.jsxs("div",{className:"text-center mb-6",children:[g.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"📚 독서 습관 및 환경 설문"}),g.jsx("p",{className:"text-gray-600",children:"테스트 시작 전에 여러분의 독서 습관과 환경에 대해 알려주세요."}),g.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["이 설문은 ",g.jsx("strong",{children:"시간 제한이 없으며"}),", 설문 완료 후 실제 테스트가 시작됩니다."]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[g.jsx("span",{children:"진행률"}),g.jsxs("span",{className:"font-semibold",children:[m," / ",y," 문항"]})]}),g.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:g.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-full transition-all duration-300 ease-out",style:{width:`${x}%`}})})]})]}),g.jsx("div",{className:"space-y-6",children:Object.entries(p).map(([v,b])=>g.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[g.jsx("div",{className:`bg-gradient-to-r ${h(v)} text-white px-6 py-4`,children:g.jsxs("h2",{className:"text-xl font-bold flex items-center",children:[g.jsx("span",{className:"text-2xl mr-2",children:v==="reading_motivation"?"📖":v==="reading_environment"?"🏠":v==="reading_habit"?"⏰":v==="writing_motivation"?"✍️":"🎯"}),f(v)]})}),g.jsx("div",{className:"p-6 space-y-6",children:b.map((w,C)=>g.jsxs("div",{className:"pb-6 border-b border-gray-200 last:border-b-0 last:pb-0",children:[g.jsx("div",{className:"mb-4",children:g.jsxs("div",{className:"flex items-start mb-3",children:[g.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-700 rounded-full font-bold text-sm mr-3 flex-shrink-0",children:C+1}),g.jsx("p",{className:"text-gray-800 font-medium text-lg flex-1",children:w.questionText})]})}),w.questionType==="likert_scale"&&g.jsx("div",{className:"grid grid-cols-5 gap-2",children:w.options.map(B=>g.jsxs("button",{onClick:()=>A(w.id,String(B.id)),className:`p-3 rounded-lg border-2 text-center transition-all ${s[w.id]===String(B.id)?"border-blue-600 bg-blue-50 text-blue-700 font-semibold shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-blue-50"}`,children:[g.jsx("div",{className:"text-2xl mb-1",children:B.id===1?"😞":B.id===2?"😐":B.id===3?"🙂":B.id===4?"😊":"😄"}),g.jsx("div",{className:"text-sm",children:B.text})]},B.id))}),w.questionType==="choice"&&g.jsx("div",{className:"space-y-2",children:w.options.map(B=>g.jsx("button",{onClick:()=>A(w.id,String(B.id)),className:`w-full p-4 rounded-lg border-2 text-left transition-all ${s[w.id]===String(B.id)?"border-blue-600 bg-blue-50 text-blue-700 font-semibold shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:`w-6 h-6 rounded-full border-2 mr-3 flex items-center justify-center ${s[w.id]===String(B.id)?"border-blue-600 bg-blue-600":"border-gray-300"}`,children:s[w.id]===String(B.id)&&g.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),g.jsx("span",{children:B.text})]})},B.id))})]},w.id))})]},v))}),g.jsxs("div",{className:"mt-8 bg-white rounded-2xl shadow-xl p-6",children:[g.jsx("button",{onClick:d,disabled:m<y||l,className:`w-full py-4 rounded-xl font-bold text-lg transition-all ${m<y||l?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg transform hover:scale-105"}`,children:l?g.jsxs("span",{className:"flex items-center justify-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"제출 중..."]}):m<y?`모든 질문에 답해주세요 (${m}/${y})`:"설문 완료하고 테스트 시작하기 →"}),g.jsx("p",{className:"text-center text-sm text-gray-500 mt-3",children:"설문 완료 후 즉시 테스트가 시작됩니다. (타이머 작동)"})]})]})})}function PAe({isOpen:t,totalQuestions:e,currentQuestion:n,stage:r,error:s}){const[i,o]=z.useState("");if(z.useEffect(()=>{if(r==="error"||r==="complete")return;const u=setInterval(()=>{o(A=>A.length>=3?"":A+".")},500);return()=>clearInterval(u)},[r]),!t)return null;const l=(()=>{switch(r){case"submitting":return{title:"제출 중",message:"답안을 서버에 전송하고 있습니다",icon:"📤",color:"text-blue-600"};case"grading":return{title:"AI 채점 중",message:`${n}/${e} 문제 채점 중`,icon:"🤖",color:"text-purple-600"};case"calculating":return{title:"결과 계산 중",message:"최종 점수와 등급을 계산하고 있습니다",icon:"📊",color:"text-green-600"};case"complete":return{title:"완료!",message:"채점이 완료되었습니다",icon:"✅",color:"text-green-600"};case"error":return{title:"오류 발생",message:s||"채점 중 문제가 발생했습니다",icon:"❌",color:"text-red-600"}}})(),c=r==="grading"?n/e*100:0;return g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:g.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4 animate-in fade-in zoom-in duration-300",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-7xl mb-4 animate-bounce",children:l.icon}),g.jsxs("h2",{className:`text-2xl font-bold mb-2 ${l.color}`,children:[l.title,r!=="error"&&r!=="complete"&&i]}),g.jsx("p",{className:"text-gray-600 mb-6",children:l.message}),r==="grading"&&g.jsxs("div",{className:"mb-6",children:[g.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:g.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-full transition-all duration-500 ease-out",style:{width:`${c}%`}})}),g.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[Math.round(c),"% 완료"]})]}),r!=="grading"&&r!=="error"&&r!=="complete"&&g.jsx("div",{className:"mb-6",children:g.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-purple-600"})}),r!=="error"&&r!=="complete"&&g.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:g.jsxs("p",{className:"text-sm text-blue-800",children:[g.jsx("span",{className:"font-semibold",children:"잠시만 기다려주세요!"}),g.jsx("br",{}),"AI가 답안을 채점하는 데 최대 2분 정도 소요될 수 있습니다."]})}),r==="error"&&s&&g.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mt-4",children:g.jsx("p",{className:"text-sm text-red-800",children:s})})]})})})}function UAe(){const{sessionId:t}=of(),e=Qs(),[n,r]=z.useState([]),[s,i]=z.useState(0),[o,a]=z.useState({}),[l,c]=z.useState(0),[u,A]=z.useState(!0),[d,f]=z.useState(!1),[h,p]=z.useState("submitting"),[m,y]=z.useState(0),[x,v]=z.useState("");z.useEffect(()=>{b()},[t]),z.useEffect(()=>{if(l===0&&!u&&n.length>0&&!d){N();return}if(l<=0)return;const j=setInterval(()=>{c(G=>G<=1?0:G-1)},1e3);return()=>clearInterval(j)},[l,u,n.length,d]);const b=async()=>{var j,G;try{A(!0);let M=(await bt.get(`/api/v1/sessions/${t}`)).data.data;if(!M.surveyCompletedAt){alert("먼저 설문을 완료해주세요."),e(`/test/survey/${t}`);return}if(!((j=M.template)!=null&&j.questions)||M.template.questions.length===0)throw new Error("테스트 문제를 찾을 수 없습니다.");const q=M.template.questions.filter(he=>!["reading_motivation","reading_environment","reading_habit","writing_motivation","reading_preference","digital_literacy","critical_thinking","reading_attitude"].includes(he.category));r(q);const Z={};(G=M.answers)==null||G.forEach(he=>{Z[he.questionId]=he.studentAnswer||""}),a(Z),(!M.startedAt||M.status==="pending")&&(M=(await bt.patch(`/api/v1/sessions/${t}/status`,{status:"in_progress"})).data.data);const te=new Date(M.startedAt),de=(new Date().getTime()-te.getTime())/1e3/60,le=Math.max(0,M.template.timeLimit-de);c(Math.floor(le*60))}catch(D){console.error("세션 조회 실패:",D),alert("테스트 정보를 불러올 수 없습니다."),e("/dashboard")}finally{A(!1)}},w=(j,G)=>{a(D=>({...D,[j]:G}))},C=async()=>{var j,G,D;try{const M=Object.entries(o).filter(([Z,te])=>te&&te.trim()!=="").map(([Z,te])=>({questionId:Z,answer:te}));if(console.log("Attempting to save answers:",M),console.log("Session ID:",t),M.length===0){alert("저장할 답안이 없습니다.");return}const q=await bt.post(`/api/v1/sessions/${t}/answers`,{answers:M},{timeout:15e4});console.log("Save response:",q.data),alert(`✅ ${M.length}개의 답안이 저장되었습니다.`)}catch(M){console.error("저장 실패:",M),console.error("Error response:",M.response),console.error("Error message:",M.message),console.error("Error details:",(j=M.response)==null?void 0:j.data);let q="답안 저장에 실패했습니다.";M.code==="ECONNABORTED"?q+=`

⏱️ 시간 초과: 네트워크 연결을 확인해주세요.`:(D=(G=M.response)==null?void 0:G.data)!=null&&D.message?q+=`

${M.response.data.message}`:M.message&&(q+=`

${M.message}`),alert(q)}},B=async()=>{confirm("테스트를 제출하시겠습니까? 제출 후에는 수정할 수 없습니다.")&&await k()},S=()=>{confirm(`테스트를 종료하시겠습니까?

⚠️ 경고: 모든 문제 풀이 내용이 삭제되며 복구할 수 없습니다.

임시저장 버튼을 눌러 답안을 저장한 후 나가는 것을 권장합니다.`)&&e("/dashboard")},N=async()=>{alert("시간이 종료되었습니다. 테스트가 자동 제출됩니다."),await k()},k=async()=>{var j,G,D;try{f(!0),p("submitting"),v("");const M=n.map(Z=>({questionId:Z.id,answer:o[Z.id]||""}));await new Promise(Z=>setTimeout(Z,500)),p("grading");const q=setInterval(()=>{y(Z=>Z>=n.length?(clearInterval(q),n.length):Z+1)},12e4/n.length);await bt.post(`/api/v1/sessions/${t}/submit`,{answers:M},{timeout:15e4}),clearInterval(q),y(n.length),p("calculating"),await new Promise(Z=>setTimeout(Z,1500)),p("complete"),await new Promise(Z=>setTimeout(Z,1e3)),e(`/test/result/${t}`)}catch(M){console.error("제출 실패:",M),console.error("Error response:",M.response),console.error("Error message:",M.message),console.error("Error details:",(j=M.response)==null?void 0:j.data),p("error"),v(((D=(G=M.response)==null?void 0:G.data)==null?void 0:D.message)||M.message||"알 수 없는 오류가 발생했습니다"),setTimeout(()=>{f(!1)},3e3)}},O=j=>{const G=Math.floor(j/60),D=j%60;return`${G}:${D.toString().padStart(2,"0")}`},U=j=>({vocabulary:"어휘력",reading:"독해력",grammar:"문법/어법",reasoning:"추론/사고력",reading_motivation:"읽기 동기",writing_motivation:"글쓰기 동기",reading_environment:"독서 환경",reading_habit:"독서 습관",reading_preference:"선호 장르"})[j]||j;if(u)return g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:g.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})});if(!n||n.length===0)return g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:g.jsx("div",{className:"text-xl text-muted-foreground",children:"문제를 불러올 수 없습니다."})});const P=n[s];if(!P)return null;const V=(s+1)/n.length*100,W=Object.keys(o).length;return g.jsxs(g.Fragment,{children:[g.jsx(PAe,{isOpen:d,totalQuestions:n.length,currentQuestion:m,stage:h,error:x}),g.jsxs("div",{className:"min-h-screen bg-background",children:[g.jsx("header",{className:"bg-card shadow-sm border-b border-border sticky top-0 z-10",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("h1",{className:"text-xl font-bold text-primary",children:"문해력 진단 평가"}),g.jsxs("span",{className:"text-sm text-muted-foreground",children:[s+1," / ",n.length]})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("div",{className:"text-sm text-muted-foreground",children:["답변: ",W," / ",n.length]}),g.jsxs("div",{className:`text-lg font-bold ${l<300?"text-destructive":"text-primary"}`,children:["⏱️ ",O(l)]}),g.jsx("button",{onClick:C,disabled:d,className:"px-4 py-2 border border-border rounded-md hover:bg-muted transition-colors text-sm disabled:opacity-50",children:"💾 임시저장"}),g.jsx("button",{onClick:S,disabled:d,className:"px-4 py-2 border border-destructive text-destructive rounded-md hover:bg-destructive hover:text-destructive-foreground transition-colors text-sm disabled:opacity-50",children:"🚪 나가기"})]})]}),g.jsx("div",{className:"mt-3",children:g.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:g.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${V}%`}})})})]})}),g.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[g.jsxs("div",{className:"bg-card rounded-lg shadow-lg p-8 border border-border",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-sm font-medium",children:U(P.category)}),g.jsxs("span",{className:"text-sm text-muted-foreground",children:[P.points,"점"]})]}),g.jsxs("div",{className:"text-2xl font-bold text-primary",children:["문제 ",P.questionNumber]})]}),P.passage&&g.jsxs("div",{className:"bg-muted rounded-lg p-6 mb-6",children:[g.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"지문"}),g.jsx("div",{className:"text-foreground whitespace-pre-wrap leading-relaxed",children:P.passage})]}),P.imageUrl&&g.jsx("div",{className:"mb-6",children:g.jsx("img",{src:P.imageUrl.startsWith("http")?P.imageUrl:`https://literacy-backend-mdbn.onrender.com${P.imageUrl}`,alt:"문제 이미지",className:"max-w-full h-auto rounded-lg border border-border",onError:j=>{console.error("Image failed to load:",P.imageUrl),j.target.style.display="none";const G=j.target.parentElement;if(G&&!G.querySelector(".image-error-message")){const D=document.createElement("div");D.className="image-error-message p-4 bg-muted rounded-lg text-muted-foreground text-sm",D.textContent="📷 이미지를 불러올 수 없습니다.",G.appendChild(D)}}})}),g.jsxs("div",{className:"mb-8",children:[g.jsx("div",{className:"text-lg font-semibold text-foreground mb-6",children:P.questionText}),(P.questionType==="choice"||P.questionType==="likert_scale")&&P.options&&g.jsx("div",{className:"space-y-3",children:P.options.map(j=>g.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${o[P.id]===j.id.toString()?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[g.jsx("input",{type:"radio",name:P.id,value:j.id,checked:o[P.id]===j.id.toString(),onChange:G=>w(P.id,G.target.value),className:"mt-1 accent-primary"}),g.jsx("span",{className:"text-foreground",children:j.text})]},j.id))}),P.questionType==="short_answer"&&g.jsx("input",{type:"text",value:o[P.id]||"",onChange:j=>w(P.id,j.target.value),placeholder:"답을 입력하세요",className:"w-full px-4 py-3 border-2 border-border rounded-lg focus:outline-none focus:border-primary bg-input text-foreground"}),P.questionType==="essay"&&g.jsx("textarea",{value:o[P.id]||"",onChange:j=>w(P.id,j.target.value),placeholder:"답을 입력하세요",rows:6,className:"w-full px-4 py-3 border-2 border-border rounded-lg focus:outline-none focus:border-primary bg-input text-foreground resize-none"})]}),g.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-border",children:[g.jsx("button",{onClick:()=>i(j=>Math.max(0,j-1)),disabled:s===0||d,className:"px-6 py-2 border border-border rounded-md hover:bg-muted transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"← 이전"}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("label",{htmlFor:"question-select",className:"text-sm text-muted-foreground",children:"문제 이동:"}),g.jsx("select",{id:"question-select",value:s,onChange:j=>i(Number(j.target.value)),disabled:d,className:"px-4 py-2 border border-border rounded-md bg-card text-foreground focus:outline-none focus:border-primary disabled:opacity-50",children:n.map((j,G)=>g.jsxs("option",{value:G,children:["문제 ",G+1," ",o[j.id]?"✓":""]},j.id))})]}),s===n.length-1?g.jsx("button",{onClick:B,disabled:d,className:"px-6 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-bold",children:d?"제출 중...":"제출하기"}):g.jsx("button",{onClick:()=>i(j=>Math.min(n.length-1,j+1)),disabled:d,className:"px-6 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50",children:"다음 →"})]})]}),g.jsxs("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:[g.jsx("p",{children:"모든 문항에 답변한 후 '제출하기' 버튼을 눌러주세요."}),g.jsx("p",{className:"mt-1",children:"임시저장을 하면 나중에 이어서 풀 수 있습니다."}),l<300&&g.jsx("p",{className:"mt-2 text-destructive font-bold",children:"⚠️ 남은 시간이 5분 미만입니다!"})]})]})]})]})}const jc={BALANCED:{code:"BALANCED",name:"종합 균형형",emoji:"⚖️",description:"네 가지 영역이 고르게 발달한 이상적인 문해력 유형입니다. 다양한 텍스트를 효과적으로 이해하고 표현할 수 있습니다.",strengths:["다양한 장르의 글을 자유롭게 읽고 이해","복잡한 개념도 쉽게 설명 가능","논리적 사고와 창의적 표현의 조화","문맥 파악과 세부 내용 이해 동시 가능"],weaknesses:["특정 분야의 심화 학습 필요","속도보다 정확성 우선 시 시간 소요"],recommendations:["전문 분야 서적으로 깊이 있는 독서","토론과 글쓰기로 사고력 확장","다양한 장르의 비평적 읽기","프로젝트 기반 통합 학습"],careers:["저널리스트","작가","교육자","연구원","기획자"],color:"from-purple-500 to-pink-500"},LINGUISTIC:{code:"LINGUISTIC",name:"언어 감각형",emoji:"📚",description:"풍부한 어휘력과 뛰어난 독해력으로 언어를 자유자재로 다룹니다. 문학적 감수성이 뛰어나고 표현이 풍부합니다.",strengths:["다양한 어휘를 정확하게 구사","문학 작품의 깊이 있는 이해","은유와 상징의 해석 능력","창의적이고 감성적인 표현"],weaknesses:["논리적 구조화에 어려움","문법 규칙 체계화 필요","분석적 사고 훈련 필요"],recommendations:["문학 작품 깊이 있게 감상하기","어휘 노트 작성으로 표현력 확장","논리적 글쓰기 연습 (논설문, 보고서)","문법 규칙 체계적으로 정리"],careers:["작가","시인","문학평론가","카피라이터","번역가"],color:"from-blue-500 to-cyan-500"},ANALYTICAL:{code:"ANALYTICAL",name:"논리 분석형",emoji:"🧮",description:"정확한 문법 지식과 뛰어난 추론 능력으로 복잡한 정보를 논리적으로 분석합니다. 비판적 사고가 뛰어납니다.",strengths:["논리적 구조와 인과관계 파악","정확한 문법으로 명확한 표현","비판적 분석과 평가 능력","복잡한 개념의 체계적 이해"],weaknesses:["어휘의 다양성 부족","문학적 감수성 개발 필요","창의적 표현력 향상 필요"],recommendations:["다양한 어휘 학습으로 표현력 확장","시와 소설로 문학적 감수성 기르기","토론과 논쟁으로 논리력 강화","비판적 독서와 글쓰기"],careers:["과학자","엔지니어","변호사","분석가","프로그래머"],color:"from-green-500 to-teal-500"},READER:{code:"READER",name:"독해 집중형",emoji:"📖",description:"뛰어난 독해력으로 복잡한 텍스트의 핵심을 빠르게 파악합니다. 정보 처리 능력이 탁월합니다.",strengths:["긴 글의 핵심 내용 빠른 파악","문맥을 통한 의미 추론","다양한 관점 이해와 통합","정보의 구조화와 요약"],weaknesses:["어휘력 확장 필요","문법적 정확성 향상 필요","논리적 추론 훈련 필요"],recommendations:["어휘 학습으로 이해의 폭 넓히기","문법 규칙으로 정확성 높이기","논리적 사고 퍼즐과 게임","속독과 정독의 균형 잡기"],careers:["편집자","리서처","정보분석가","사서","큐레이터"],color:"from-indigo-500 to-purple-500"},WORDSMITH:{code:"WORDSMITH",name:"어휘 전문형",emoji:"✍️",description:"풍부한 어휘로 정교하고 세련된 표현을 구사합니다. 언어의 뉘앙스를 정확히 파악하고 활용합니다.",strengths:["다양하고 정확한 어휘 사용","세밀한 뉘앙스 표현","창의적 언어 활용","풍부한 표현력"],weaknesses:["전체 맥락 파악 훈련 필요","논리적 구조화 능력 향상 필요","추론 능력 개발 필요"],recommendations:["긴 글 읽기로 독해력 향상","논리적 글쓰기 연습","추론 문제 풀이","문법 체계 학습"],careers:["카피라이터","시인","번역가","언어학자","콘텐츠 크리에이터"],color:"from-yellow-500 to-orange-500"},THINKER:{code:"THINKER",name:"추론 사고형",emoji:"🤔",description:"뛰어난 추론 능력으로 숨겨진 의미와 논리를 찾아냅니다. 비판적 사고와 문제 해결 능력이 탁월합니다.",strengths:["논리적 추론과 분석","숨은 의미와 의도 파악","비판적 평가 능력","창의적 문제 해결"],weaknesses:["어휘력 확장 필요","독해 속도 향상 필요","문법 정확성 개선 필요"],recommendations:["다양한 어휘 학습","다독으로 독해력 향상","문법 규칙 체계적 학습","논리 퍼즐과 게임"],careers:["철학자","과학자","전략 기획자","컨설턴트","발명가"],color:"from-red-500 to-pink-500"},GRAMMARIAN:{code:"GRAMMARIAN",name:"문법 정밀형",emoji:"📝",description:"정확한 문법 지식으로 오류 없는 문장을 구사합니다. 체계적이고 정밀한 표현이 강점입니다.",strengths:["문법적으로 완벽한 문장","명확하고 정확한 표현","체계적 문장 구조","편집과 교정 능력"],weaknesses:["어휘의 다양성 부족","독해 속도 향상 필요","추론 능력 개발 필요"],recommendations:["다양한 어휘 학습","다양한 장르 독서","추론 문제 연습","창의적 글쓰기"],careers:["편집자","교정자","언어 교사","기술 작가","법률 문서 작성자"],color:"from-emerald-500 to-green-500"},EXPLORER:{code:"EXPLORER",name:"발전 탐색형",emoji:"🌱",description:"아직 특정 강점이 뚜렷하지 않지만, 모든 영역에서 성장 가능성이 큰 유형입니다. 꾸준한 학습으로 발전할 수 있습니다.",strengths:["다양한 분야 학습 의욕","성장 가능성","열린 태도","노력하는 자세"],weaknesses:["전반적인 기초 실력 향상 필요","학습 전략 수립 필요","꾸준한 연습 필요"],recommendations:["매일 조금씩 독서 습관 들이기","기초 어휘와 문법 체계적 학습","쉬운 책부터 시작해 난이도 높이기","학습 멘토나 선생님의 도움 받기","독서 일기로 이해도 확인","꾸준한 연습과 복습"],careers:["모든 분야에 가능성 열려있음","자신만의 강점 발견 중"],color:"from-pink-500 to-rose-500"}};function LAe(t){const{vocabulary:e,reading:n,grammar:r,reasoning:s}=t,i=Math.max(e,n,r,s,1),o=e/i*100,a=n/i*100,l=r/i*100,c=s/i*100,u=o>=70&&a>=70&&l>=70&&c>=70,A=Math.max(o,a,l,c)-Math.min(o,a,l,c);return u&&A<=15?jc.BALANCED:o>=70&&a>=70?jc.LINGUISTIC:l>=70&&c>=70?jc.ANALYTICAL:a===Math.max(o,a,l,c)&&a>=65?jc.READER:o===Math.max(o,a,l,c)&&o>=65?jc.WORDSMITH:c===Math.max(o,a,l,c)&&c>=65?jc.THINKER:l===Math.max(o,a,l,c)&&l>=65?jc.GRAMMARIAN:jc.EXPLORER}const jAe=[{level:1,label:"최우수",percentage:4,color:"#8b5cf6",description:"상위 4% - 탁월한 문해력"},{level:2,label:"우수",percentage:7,color:"#a78bfa",description:"상위 11% - 매우 뛰어난 수준"},{level:3,label:"양호",percentage:12,color:"#c4b5fd",description:"상위 23% - 우수한 수준"},{level:4,label:"보통 상",percentage:17,color:"#ddd6fe",description:"상위 40% - 평균 이상"},{level:5,label:"보통",percentage:20,color:"#e9d5ff",description:"중위 50% - 평균 수준"},{level:6,label:"보통 하",percentage:17,color:"#f3e8ff",description:"하위 40% - 평균 이하"},{level:7,label:"노력 요함",percentage:12,color:"#fae8ff",description:"하위 23% - 개선 필요"},{level:8,label:"많은 노력",percentage:7,color:"#fdf4ff",description:"하위 11% - 집중 학습"},{level:9,label:"특별 지도",percentage:4,color:"#fdf2f8",description:"하위 4% - 맞춤 지도"}];function MAe({currentGrade:t,className:e=""}){const n=[{grade:1,percentage:5,label:"최상위"},{grade:2,percentage:10,label:"상위"},{grade:3,percentage:20,label:"중상"},{grade:4,percentage:30,label:"중위"},{grade:5,percentage:20,label:"중하"},{grade:6,percentage:10,label:"하위"},{grade:7,percentage:5,label:"최하위"}];return g.jsxs("div",{className:`${e}`,children:[g.jsx("style",{children:`
        @media print {
          .distribution-bar {
            print-color-adjust: exact !important;
            -webkit-print-color-adjust: exact !important;
          }
        }
      `}),g.jsx("div",{className:"space-y-2",children:n.map(r=>{const s=r.grade===t,i=jAe[r.grade-1];return g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("div",{className:`w-16 text-right text-sm font-semibold ${s?"text-violet-800":"text-gray-700"}`,children:[r.grade,"등급"]}),g.jsx("div",{className:"flex-1 relative",children:g.jsx("div",{className:"h-8 bg-gray-100 rounded-lg overflow-hidden relative",children:g.jsx("div",{className:`distribution-bar h-full transition-all duration-500 ${s?"ring-2 ring-violet-800":""}`,style:{width:`${r.percentage*3}%`,backgroundColor:(i==null?void 0:i.color)||"#9333EA"},children:s&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("span",{className:"text-white text-xs font-bold",children:"내 등급"})})})})}),g.jsxs("div",{className:`w-12 text-right text-xs ${s?"font-bold text-violet-800":"text-gray-600"}`,children:[r.percentage,"%"]})]},r.grade)})}),g.jsx("div",{className:"mt-4 text-center",children:g.jsxs("p",{className:"text-xs text-gray-600",children:["전체 응시자 중 상위 ",g.jsxs("span",{className:"font-bold text-violet-800",children:[n.slice(0,t-1).reduce((r,s)=>r+s.percentage,0)+n[t-1].percentage/2,"%"]})]})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ix(t){return t+.5|0}const uu=(t,e,n)=>Math.max(Math.min(t,n),e);function Sg(t){return uu(ix(t*2.55),0,255)}function Iu(t){return uu(ix(t*255),0,255)}function Ll(t){return uu(ix(t/2.55)/100,0,1)}function DL(t){return uu(ix(t*100),0,100)}const co={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},PI=[..."0123456789ABCDEF"],QAe=t=>PI[t&15],HAe=t=>PI[(t&240)>>4]+PI[t&15],b1=t=>(t&240)>>4===(t&15),zAe=t=>b1(t.r)&&b1(t.g)&&b1(t.b)&&b1(t.a);function VAe(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&co[t[1]]*17,g:255&co[t[2]]*17,b:255&co[t[3]]*17,a:e===5?co[t[4]]*17:255}:(e===7||e===9)&&(n={r:co[t[1]]<<4|co[t[2]],g:co[t[3]]<<4|co[t[4]],b:co[t[5]]<<4|co[t[6]],a:e===9?co[t[7]]<<4|co[t[8]]:255})),n}const WAe=(t,e)=>t<255?e(t):"";function GAe(t){var e=zAe(t)?QAe:HAe;return t?"#"+e(t.r)+e(t.g)+e(t.b)+WAe(t.a,e):void 0}const KAe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function AW(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function XAe(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function qAe(t,e,n){const r=AW(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function YAe(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function K$(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=YAe(n,r,s,u,i),l=l*60+.5),[l|0,c||0,a]}function X$(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Iu)}function q$(t,e,n){return X$(AW,t,e,n)}function JAe(t,e,n){return X$(qAe,t,e,n)}function ZAe(t,e,n){return X$(XAe,t,e,n)}function dW(t){return(t%360+360)%360}function ede(t){const e=KAe.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Sg(+e[5]):Iu(+e[5]));const s=dW(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=JAe(s,i,o):e[1]==="hsv"?r=ZAe(s,i,o):r=q$(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function tde(t,e){var n=K$(t);n[0]=dW(n[0]+e),n=q$(n),t.r=n[0],t.g=n[1],t.b=n[2]}function nde(t){if(!t)return;const e=K$(t),n=e[0],r=DL(e[1]),s=DL(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Ll(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const RL={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},PL={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function rde(){const t={},e=Object.keys(PL),n=Object.keys(RL);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,RL[i]);i=parseInt(PL[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let w1;function sde(t){w1||(w1=rde(),w1.transparent=[0,0,0,0]);const e=w1[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const ide=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ode(t){const e=ide.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Sg(o):uu(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Sg(r):uu(r,0,255)),s=255&(e[4]?Sg(s):uu(s,0,255)),i=255&(e[6]?Sg(i):uu(i,0,255)),{r,g:s,b:i,a:n}}}function ade(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ll(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const GN=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ff=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function lde(t,e,n){const r=Ff(Ll(t.r)),s=Ff(Ll(t.g)),i=Ff(Ll(t.b));return{r:Iu(GN(r+n*(Ff(Ll(e.r))-r))),g:Iu(GN(s+n*(Ff(Ll(e.g))-s))),b:Iu(GN(i+n*(Ff(Ll(e.b))-i))),a:t.a+n*(e.a-t.a)}}function C1(t,e,n){if(t){let r=K$(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=q$(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function fW(t,e){return t&&Object.assign(e||{},t)}function UL(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Iu(t[3]))):(e=fW(t,{r:0,g:0,b:0,a:1}),e.a=Iu(e.a)),e}function cde(t){return t.charAt(0)==="r"?ode(t):ede(t)}let hW=class UI{constructor(e){if(e instanceof UI)return e;const n=typeof e;let r;n==="object"?r=UL(e):n==="string"&&(r=VAe(e)||sde(e)||cde(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=fW(this._rgb);return e&&(e.a=Ll(e.a)),e}set rgb(e){this._rgb=UL(e)}rgbString(){return this._valid?ade(this._rgb):void 0}hexString(){return this._valid?GAe(this._rgb):void 0}hslString(){return this._valid?nde(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=lde(this._rgb,e._rgb,n)),this}clone(){return new UI(this.rgb)}alpha(e){return this._rgb.a=Iu(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=ix(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return C1(this._rgb,2,e),this}darken(e){return C1(this._rgb,2,-e),this}saturate(e){return C1(this._rgb,1,e),this}desaturate(e){return C1(this._rgb,1,-e),this}rotate(e){return tde(this._rgb,e),this}};/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function kl(){}const ude=(()=>{let t=0;return()=>t++})();function tn(t){return t==null}function jn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Pt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ts(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ma(t,e){return ts(t)?t:e}function Nt(t,e){return typeof t>"u"?e:t}const Ade=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,pW=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function wn(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function sn(t,e,n,r){let s,i,o;if(jn(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(Pt(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function Ow(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Dw(t){if(jn(t))return t.map(Dw);if(Pt(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=Dw(t[n[s]]);return e}return t}function mW(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function dde(t,e,n,r){if(!mW(t))return;const s=e[t],i=n[t];Pt(s)&&Pt(i)?Uy(s,i,r):e[t]=Dw(i)}function Uy(t,e,n){const r=jn(e)?e:[e],s=r.length;if(!Pt(t))return t;n=n||{};const i=n.merger||dde;let o;for(let a=0;a<s;++a){if(o=r[a],!Pt(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function ey(t,e){return Uy(t,e,{merger:fde})}function fde(t,e,n){if(!mW(t))return;const r=e[t],s=n[t];Pt(r)&&Pt(s)?ey(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Dw(s))}const LL={"":t=>t,x:t=>t.x,y:t=>t.y};function hde(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function pde(t){const e=hde(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function ju(t,e){return(LL[e]||(LL[e]=pde(e)))(t)}function Y$(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ly=t=>typeof t<"u",Mu=t=>typeof t=="function",jL=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function mde(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Xt=Math.PI,_n=2*Xt,gde=_n+Xt,Rw=Number.POSITIVE_INFINITY,yde=Xt/180,pr=Xt/2,EA=Xt/4,ML=Xt*2/3,gW=Math.log10,al=Math.sign;function ty(t,e,n){return Math.abs(t-e)<n}function QL(t){const e=Math.round(t);t=ty(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(gW(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function xde(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function vde(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Pw(t){return!vde(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function bde(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function wde(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function tl(t){return t*(Xt/180)}function J$(t){return t*(180/Xt)}function HL(t){if(!ts(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function yW(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Xt&&(i+=_n),{angle:i,distance:s}}function LI(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Cde(t,e){return(t-e+gde)%_n-Xt}function Ts(t){return(t%_n+_n)%_n}function jy(t,e,n,r){const s=Ts(t),i=Ts(e),o=Ts(n),a=Ts(i-s),l=Ts(o-s),c=Ts(s-i),u=Ts(s-o);return s===i||s===o||r&&i===o||a>l&&c<u}function Ci(t,e,n){return Math.max(e,Math.min(n,t))}function Sde(t){return Ci(t,-32768,32767)}function Kl(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Z$(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const jI=(t,e,n,r)=>Z$(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),Bde=(t,e,n)=>Z$(t,n,r=>t[r][e]>=n);function Nde(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const xW=["push","pop","shift","splice","unshift"];function Ede(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),xW.forEach(n=>{const r="_onData"+Y$(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function zL(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(xW.forEach(i=>{delete t[i]}),delete t._chartjs)}function vW(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const bW=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function wW(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,bW.call(window,()=>{r=!1,t.apply(e,n)}))}}function Ide(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const e_=t=>t==="start"?"left":t==="end"?"right":"center",Is=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,kde=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e,S1=t=>t===0||t===1,VL=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*_n/n)),WL=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*_n/n)+1,ny={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*pr)+1,easeOutSine:t=>Math.sin(t*pr),easeInOutSine:t=>-.5*(Math.cos(Xt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>S1(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>S1(t)?t:VL(t,.075,.3),easeOutElastic:t=>S1(t)?t:WL(t,.075,.3),easeInOutElastic(t){return S1(t)?t:t<.5?.5*VL(t*2,.1125,.45):.5+.5*WL(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ny.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ny.easeInBounce(t*2)*.5:ny.easeOutBounce(t*2-1)*.5+.5};function t_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function GL(t){return t_(t)?t:new hW(t)}function KN(t){return t_(t)?t:new hW(t).saturate(.5).darken(.1).hexString()}const Tde=["x","y","borderWidth","radius","tension"],Fde=["color","borderColor","backgroundColor"];function $de(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Fde},numbers:{type:"number",properties:Tde}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function _de(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const KL=new Map;function Ode(t,e){e=e||{};const n=t+JSON.stringify(e);let r=KL.get(n);return r||(r=new Intl.NumberFormat(t,e),KL.set(n,r)),r}function n_(t,e,n){return Ode(e,n).format(t)}const Dde={values(t){return jn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=Rde(t,n)}const o=gW(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),n_(t,r,l)}};function Rde(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var r_={formatters:Dde};function Pde(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:r_.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Rd=Object.create(null),MI=Object.create(null);function ry(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function XN(t,e,n){return typeof e=="string"?Uy(ry(t,e),n):Uy(ry(t,""),e)}class Ude{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>KN(s.backgroundColor),this.hoverBorderColor=(r,s)=>KN(s.borderColor),this.hoverColor=(r,s)=>KN(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return XN(this,e,n)}get(e){return ry(this,e)}describe(e,n){return XN(MI,e,n)}override(e,n){return XN(Rd,e,n)}route(e,n,r,s){const i=ry(this,e),o=ry(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return Pt(l)?Object.assign({},c,l):Nt(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var rr=new Ude({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[$de,_de,Pde]);function Lde(t){return!t||tn(t.size)||tn(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Uw(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function jde(t,e,n,r){r=r||{};let s=r.data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(s=r.data={},i=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,A,d;for(l=0;l<a;l++)if(A=n[l],A!=null&&!jn(A))o=Uw(t,s,i,o,A);else if(jn(A))for(c=0,u=A.length;c<u;c++)d=A[c],d!=null&&!jn(d)&&(o=Uw(t,s,i,o,d));t.restore();const f=i.length/2;if(f>n.length){for(l=0;l<f;l++)delete s[i[l]];i.splice(0,f)}return o}function IA(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function XL(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function QI(t,e,n,r){CW(t,e,n,r,null)}function CW(t,e,n,r,s){let i,o,a,l,c,u,A,d;const f=e.pointStyle,h=e.rotation,p=e.radius;let m=(h||0)*yde;if(f&&typeof f=="object"&&(i=f.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(p)||p<=0)){switch(t.beginPath(),f){default:s?t.ellipse(n,r,s/2,p,0,0,_n):t.arc(n,r,p,0,_n),t.closePath();break;case"triangle":u=s?s/2:p,t.moveTo(n+Math.sin(m)*u,r-Math.cos(m)*p),m+=ML,t.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*p),m+=ML,t.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*p),t.closePath();break;case"rectRounded":c=p*.516,l=p-c,o=Math.cos(m+EA)*l,A=Math.cos(m+EA)*(s?s/2-c:l),a=Math.sin(m+EA)*l,d=Math.sin(m+EA)*(s?s/2-c:l),t.arc(n-A,r-a,c,m-Xt,m-pr),t.arc(n+d,r-o,c,m-pr,m),t.arc(n+A,r+a,c,m,m+pr),t.arc(n-d,r+o,c,m+pr,m+Xt),t.closePath();break;case"rect":if(!h){l=Math.SQRT1_2*p,u=s?s/2:l,t.rect(n-u,r-l,2*u,2*l);break}m+=EA;case"rectRot":A=Math.cos(m)*(s?s/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(s?s/2:p),t.moveTo(n-A,r-a),t.lineTo(n+d,r-o),t.lineTo(n+A,r+a),t.lineTo(n-d,r+o),t.closePath();break;case"crossRot":m+=EA;case"cross":A=Math.cos(m)*(s?s/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(s?s/2:p),t.moveTo(n-A,r-a),t.lineTo(n+A,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o);break;case"star":A=Math.cos(m)*(s?s/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(s?s/2:p),t.moveTo(n-A,r-a),t.lineTo(n+A,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o),m+=EA,A=Math.cos(m)*(s?s/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(s?s/2:p),t.moveTo(n-A,r-a),t.lineTo(n+A,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o);break;case"line":o=s?s/2:Math.cos(m)*p,a=Math.sin(m)*p,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(m)*(s?s/2:p),r+Math.sin(m)*p);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Xl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function nS(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function rS(t){t.restore()}function Mde(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Qde(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Hde(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),tn(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function zde(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Vde(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Pd(t,e,n,r,s,i={}){const o=jn(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,Hde(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&Vde(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),tn(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),zde(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function My(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Xt,Xt,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,Xt,pr,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,pr,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-pr,!0),t.lineTo(n+o.topLeft,r)}const Wde=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Gde=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Kde(t,e){const n=(""+t).match(Wde);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Xde=t=>+t||0;function s_(t,e){const n={},r=Pt(e),s=r?Object.keys(e):e,i=Pt(t)?r?o=>Nt(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=Xde(i(o));return n}function SW(t){return s_(t,{top:"y",right:"x",bottom:"y",left:"x"})}function bd(t){return s_(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ls(t){const e=SW(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function jr(t,e){t=t||{},e=e||rr.font;let n=Nt(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Nt(t.style,e.style);r&&!(""+r).match(Gde)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:Nt(t.family,e.family),lineHeight:Kde(Nt(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Nt(t.weight,e.weight),string:""};return s.string=Lde(s),s}function B1(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function qde(t,e,n){const{min:r,max:s}=t,i=pW(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function sA(t,e){return Object.assign(Object.create(t),e)}function i_(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=IW("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>i_([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return NW(a,l,()=>sfe(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return YL(a).includes(l)},ownKeys(a){return YL(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function Zh(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:BW(t,r),setContext:i=>Zh(t,i,n,r),override:i=>Zh(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return NW(i,o,()=>Jde(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function BW(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Mu(n)?n:()=>n,isIndexable:Mu(r)?r:()=>r}}const Yde=(t,e)=>t?t+Y$(e):e,o_=(t,e)=>Pt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function NW(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function Jde(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return Mu(a)&&o.isScriptable(e)&&(a=Zde(e,a,t,n)),jn(a)&&a.length&&(a=efe(e,a,t,o.isIndexable)),o_(e,a)&&(a=Zh(a,s,i&&i[e],o)),a}function Zde(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),o_(t,l)&&(l=a_(s._scopes,s,t,l)),l}function efe(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(Pt(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const A=a_(c,s,t,u);e.push(Zh(A,i,o&&o[t],a))}}return e}function EW(t,e,n){return Mu(t)?t(e,n):t}const tfe=(t,e)=>t===!0?e:typeof t=="string"?ju(e,t):void 0;function nfe(t,e,n,r,s){for(const i of e){const o=tfe(n,i);if(o){t.add(o);const a=EW(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function a_(t,e,n,r){const s=e._rootScopes,i=EW(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=qL(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=qL(a,o,i,l,r),l===null)?!1:i_(Array.from(a),[""],s,i,()=>rfe(e,n,r))}function qL(t,e,n,r,s){for(;n;)n=nfe(t,e,n,r,s);return n}function rfe(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return jn(s)&&Pt(n)?n:s||{}}function sfe(t,e,n,r){let s;for(const i of e)if(s=IW(Yde(i,t),n),typeof s<"u")return o_(t,s)?a_(n,r,t,s):s}function IW(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function YL(t){let e=t._keys;return e||(e=t._keys=ife(t._scopes)),e}function ife(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}function ofe(t,e,n,r){const{iScale:s}=t,{key:i="r"}=this._parsing,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],o[a]={r:s.parse(ju(u,i),c)};return o}const afe=Number.EPSILON||1e-14,ep=(t,e)=>e<t.length&&!t[e].skip&&t[e],kW=t=>t==="x"?"y":"x";function lfe(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=LI(i,s),l=LI(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const A=r*c,d=r*u;return{previous:{x:i.x-A*(o.x-s.x),y:i.y-A*(o.y-s.y)},next:{x:i.x+d*(o.x-s.x),y:i.y+d*(o.y-s.y)}}}function cfe(t,e,n){const r=t.length;let s,i,o,a,l,c=ep(t,0);for(let u=0;u<r-1;++u)if(l=c,c=ep(t,u+1),!(!l||!c)){if(ty(e[u],0,afe)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=i*o*e[u])}}function ufe(t,e,n="x"){const r=kW(n),s=t.length;let i,o,a,l=ep(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=ep(t,c+1),!a)continue;const u=a[n],A=a[r];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${r}`]=A-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${r}`]=A+i*e[c])}}function Afe(t,e="x"){const n=kW(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=ep(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=ep(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?al(s[o-1])!==al(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}cfe(t,s,i),ufe(t,i,e)}function N1(t,e,n){return Math.max(Math.min(t,n),e)}function dfe(t,e){let n,r,s,i,o,a=Xl(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&Xl(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=N1(s.cp1x,e.left,e.right),s.cp1y=N1(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=N1(s.cp2x,e.left,e.right),s.cp2y=N1(s.cp2y,e.top,e.bottom)))}function ffe(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")Afe(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=lfe(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&dfe(t,n)}function l_(){return typeof window<"u"&&typeof document<"u"}function c_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Lw(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const sS=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function hfe(t,e){return sS(t).getPropertyValue(e)}const pfe=["top","right","bottom","left"];function wd(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=pfe[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const mfe=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function gfe(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(mfe(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function jA(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=sS(n),i=s.boxSizing==="border-box",o=wd(s,"padding"),a=wd(s,"border","width"),{x:l,y:c,box:u}=gfe(t,n),A=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:h}=e;return i&&(f-=o.width+a.width,h-=o.height+a.height),{x:Math.round((l-A)/f*n.width/r),y:Math.round((c-d)/h*n.height/r)}}function yfe(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&c_(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=sS(i),l=wd(a,"border","width"),c=wd(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Lw(a.maxWidth,i,"clientWidth"),s=Lw(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||Rw,maxHeight:s||Rw}}const E1=t=>Math.round(t*10)/10;function xfe(t,e,n,r){const s=sS(t),i=wd(s,"margin"),o=Lw(s.maxWidth,t,"clientWidth")||Rw,a=Lw(s.maxHeight,t,"clientHeight")||Rw,l=yfe(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const d=wd(s,"border","width"),f=wd(s,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=E1(Math.min(c,o,l.maxWidth)),u=E1(Math.min(u,a,l.maxHeight)),c&&!u&&(u=E1(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=E1(Math.floor(u*r))),{width:c,height:u}}function JL(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const vfe=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};l_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function ZL(t,e){const n=hfe(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function MA(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function bfe(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function wfe(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=MA(t,s,n),a=MA(s,i,n),l=MA(i,e,n),c=MA(o,a,n),u=MA(a,l,n);return MA(c,u,n)}const Cfe=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},Sfe=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function wh(t,e,n){return t?Cfe(e,n):Sfe()}function TW(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function FW(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function $W(t){return t==="angle"?{between:jy,compare:Cde,normalize:Ts}:{between:Kl,compare:(e,n)=>e-n,normalize:e=>e}}function ej({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function Bfe(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=$W(r),l=e.length;let{start:c,end:u,loop:A}=t,d,f;if(A){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(e[c%l][r]),s,i);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:A,style:t.style}}function _W(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=$W(r),{start:u,end:A,loop:d,style:f}=Bfe(t,e,n),h=[];let p=!1,m=null,y,x,v;const b=()=>l(s,v,y)&&a(s,v)!==0,w=()=>a(i,y)===0||l(i,v,y),C=()=>p||b(),B=()=>!p||w();for(let S=u,N=u;S<=A;++S)x=e[S%o],!x.skip&&(y=c(x[r]),y!==v&&(p=l(y,s,i),m===null&&C()&&(m=a(y,s)===0?S:N),m!==null&&B()&&(h.push(ej({start:m,end:S,loop:d,count:o,style:f})),m=null),N=S,v=y));return m!==null&&h.push(ej({start:m,end:A,loop:d,count:o,style:f})),h}function OW(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=_W(r[s],t.points,e);i.length&&n.push(...i)}return n}function Nfe(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function Efe(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function Ife(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=Nfe(n,s,i,r);if(r===!0)return tj(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return tj(t,Efe(n,o,l,c),n,e)}function tj(t,e,n,r){return!r||!r.setContext||!n?e:kfe(t,e,n,r)}function kfe(t,e,n,r){const s=t._chart.getContext(),i=nj(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,A=e[0].start,d=A;function f(h,p,m,y){const x=a?-1:1;if(h!==p){for(h+=l;n[h%l].skip;)h-=x;for(;n[p%l].skip;)p+=x;h%l!==p%l&&(c.push({start:h%l,end:p%l,loop:m,style:y}),u=y,A=p%l)}}for(const h of e){A=a?A:h.start;let p=n[A%l],m;for(d=A+1;d<=h.end;d++){const y=n[d%l];m=nj(r.setContext(sA(s,{type:"segment",p0:p,p1:y,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),Tfe(m,u)&&f(A,d-1,h.loop,u),p=y,u=m}A<d-1&&f(A,d-1,h.loop,u)}return c}function nj(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Tfe(t,e){if(!e)return!1;const n=[],r=function(s,i){return t_(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function I1(t,e,n){return t.options.clip?t[n]:e[n]}function Ffe(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:I1(n,e,"left"),right:I1(n,e,"right"),top:I1(r,e,"top"),bottom:I1(r,e,"bottom")}:e}function DW(t,e){const n=e._clip;if(n.disabled)return!1;const r=Ffe(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class $fe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=bW.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ol=new $fe;const rj="transparent",_fe={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=GL(t||rj),s=r.valid&&GL(e||rj);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Ofe{constructor(e,n,r,s){const i=n[r];s=B1([e.to,s,i,e.from]);const o=B1([e.from,i,s]);this._active=!0,this._fn=e.fn||_fe[e.type||typeof o],this._easing=ny[e.easing]||ny.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=B1([e.to,n,s,e.from]),this._from=B1([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class RW{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Pt(e))return;const n=Object.keys(rr.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!Pt(i))return;const o={};for(const a of n)o[a]=i[a];(jn(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=Rfe(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&Dfe(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let A=i[c];const d=r.get(c);if(A)if(d&&A.active()){A.update(d,u,a);continue}else A.cancel();if(!d||!d.duration){e[c]=u;continue}i[c]=A=new Ofe(d,e,c,u),s.push(A)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Ol.add(this._chart,r),!0}}function Dfe(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function Rfe(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function sj(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function Pfe(t,e,n){if(n===!1)return!1;const r=sj(t,n),s=sj(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function Ufe(t){let e,n,r,s;return Pt(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function PW(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function ij(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],ts(c)&&(i||e===0||al(e)===al(c))&&(e+=c)}return!u&&!r.all?0:e}function Lfe(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[i]:t[u]};return a}function qN(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function jfe(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Mfe(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function Qfe(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function oj(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function aj(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,u=jfe(i,o,r),A=e.length;let d;for(let f=0;f<A;++f){const h=e[f],{[l]:p,[c]:m}=h,y=h._stacks||(h._stacks={});d=y[c]=Qfe(s,u,p),d[a]=m,d._top=oj(d,o,!0,r.type),d._bottom=oj(d,o,!1,r.type);const x=d._visualValues||(d._visualValues={});x[a]=m}}function YN(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function Hfe(t,e){return sA(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function zfe(t,e,n){return sA(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function qm(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const JN=t=>t==="reset"||t==="none",lj=(t,e)=>e?t:Object.assign({},t),Vfe=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:PW(n,!0),values:null};class Cd{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=qN(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&qm(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(A,d,f,h)=>A==="x"?d:A==="r"?h:f,i=n.xAxisID=Nt(r.xAxisID,YN(e,"x")),o=n.yAxisID=Nt(r.yAxisID,YN(e,"y")),a=n.rAxisID=Nt(r.rAxisID,YN(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),u=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&zL(this._data,this),e._stacked&&qm(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Pt(n)){const s=this._cachedMeta;this._data=Lfe(n,s)}else if(r!==n){if(r){zL(r,this);const s=this._cachedMeta;qm(s),s._parsed=[]}n&&Object.isExtensible(n)&&Ede(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=qN(n.vScale,n),n.stack!==r.stack&&(s=!0,qm(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(aj(this,n._parsed),n._stacked=qN(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,A,d;if(this._parsing===!1)r._parsed=s,r._sorted=!0,d=s;else{jn(s[e])?d=this.parseArrayData(r,s,e,n):Pt(s[e])?d=this.parseObjectData(r,s,e,n):d=this.parsePrimitiveData(r,s,e,n);const f=()=>A[a]===null||c&&A[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=A=d[u],l&&(f()&&(l=!1),c=A);r._sorted=l}o&&aj(this,d)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,A=new Array(s);let d,f,h;for(d=0,f=s;d<f;++d)h=d+r,A[d]={[a]:u||i.parse(c[h],h),[l]:o.parse(n[h],h)};return A}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,u,A;for(l=0,c=s;l<c;++l)u=l+r,A=n[u],a[l]={x:i.parse(A[0],u),y:o.parse(A[1],u)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,A,d,f;for(u=0,A=s;u<A;++u)d=u+r,f=n[d],c[u]={x:i.parse(ju(f,a),d),y:o.parse(ju(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:PW(s,!0),values:n._stacks[e.axis]._visualValues};return ij(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=ij(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=Vfe(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:A}=Mfe(a);let d,f;function h(){f=s[d];const p=f[a.axis];return!ts(f[e.axis])||u>p||A<p}for(d=0;d<o&&!(!h()&&(this.updateRangeFromParsed(c,e,f,l),i));++d);if(i){for(d=o-1;d>=0;--d)if(!h()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],ts(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Ufe(Nt(this.options.clip,Pfe(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const A=s[u];A.hidden||(A.active&&c?o.push(A):A.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=zfe(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Hfe(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&Ly(r);if(a)return lj(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),A=s?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(rr.elements[e]),h=()=>this.getContext(r,s,n),p=c.resolveNamedOptions(d,f,h,A);return p.$shared&&(p.$shared=l,i[o]=Object.freeze(lj(p,l))),p}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,A=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),A);l=u.createResolver(d,this.getContext(e,r,n))}const c=new RW(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||JN(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){JN(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!JN(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&qm(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ye(Cd,"defaults",{}),Ye(Cd,"datasetElementType",null),Ye(Cd,"dataElementType",null);function Wfe(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let s=0,i=n.length;s<i;s++)r=r.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=vW(r.sort((s,i)=>s-i))}return t._cache.$bar}function Gfe(t){const e=t.iScale,n=Wfe(e,t.type);let r=e._length,s,i,o,a;const l=()=>{o===32767||o===-32768||(Ly(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(s=0,i=n.length;s<i;++s)o=e.getPixelForValue(n[s]),l();for(a=void 0,s=0,i=e.ticks.length;s<i;++s)o=e.getPixelForTick(s),l();return r}function Kfe(t,e,n,r){const s=n.barThickness;let i,o;return tn(s)?(i=e.min*n.categoryPercentage,o=n.barPercentage):(i=s*r,o=1),{chunk:i/r,ratio:o,start:e.pixels[t]-i/2}}function Xfe(t,e,n,r){const s=e.pixels,i=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;o===null&&(o=i-(a===null?e.end-e.start:a-i)),a===null&&(a=i+i-o);const c=i-(i-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function qfe(t,e,n,r){const s=n.parse(t[0],r),i=n.parse(t[1],r),o=Math.min(s,i),a=Math.max(s,i);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:i,min:o,max:a}}function UW(t,e,n,r){return jn(t)?qfe(t,e,n,r):e[n.axis]=n.parse(t,r),e}function cj(t,e,n,r){const s=t.iScale,i=t.vScale,o=s.getLabels(),a=s===i,l=[];let c,u,A,d;for(c=n,u=n+r;c<u;++c)d=e[c],A={},A[s.axis]=a||s.parse(o[c],c),l.push(UW(d,A,i,c));return l}function ZN(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Yfe(t,e,n){return t!==0?al(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function Jfe(t){let e,n,r,s,i;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:e,top:s,bottom:i}}function Zfe(t,e,n,r){let s=e.borderSkipped;const i={};if(!s){t.borderSkipped=i;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=Jfe(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?s=c:(n._bottom||0)===r?s=u:(i[uj(u,o,a,l)]=!0,s=c)),i[uj(s,o,a,l)]=!0,t.borderSkipped=i}function uj(t,e,n,r){return r?(t=ehe(t,e,n),t=Aj(t,n,e)):t=Aj(t,e,n),t}function ehe(t,e,n){return t===e?n:t===n?e:t}function Aj(t,e,n){return t==="start"?e:t==="end"?n:t}function the(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Xb extends Cd{parsePrimitiveData(e,n,r,s){return cj(e,n,r,s)}parseArrayData(e,n,r,s){return cj(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:i,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=i.axis==="x"?a:l,u=o.axis==="x"?a:l,A=[];let d,f,h,p;for(d=r,f=r+s;d<f;++d)p=n[d],h={},h[i.axis]=i.parse(ju(p,c),d),A.push(UW(ju(p,u),h,o,d));return A}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const i=r._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,i=this.getParsed(e),o=i._custom,a=ZN(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const i=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:A,includeOptions:d}=this._getSharedOptions(n,s);for(let f=n;f<n+r;f++){const h=this.getParsed(f),p=i||tn(h[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,u),y=(h._stacks||{})[a.axis],x={horizontal:c,base:p.base,enableBorderRadius:!y||ZN(h._custom)||o===y._top||o===y._bottom,x:c?p.head:m.center,y:c?m.center:p.head,height:c?m.size:Math.abs(p.size),width:c?Math.abs(p.size):m.size};d&&(x.options=A||this.resolveDataElementOptions(f,e[f].active?"active":s));const v=x.options||e[f].options;Zfe(x,v,y,o),the(x,v,u.ratio),this.updateElement(e[f],f,x,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const A=u._parsed.find(f=>f[r.axis]===l),d=A&&A[u.vScale.axis];if(tn(d)||isNaN(d))return!0};for(const u of s)if(!(n!==void 0&&c(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[Nt(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const s=this._getStacks(e,r),i=n!==void 0?s.indexOf(n):-1;return i===-1?s.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let i,o;for(i=0,o=n.data.length;i<o;++i)s.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const a=e.barThickness;return{min:a||Gfe(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:i,minBarLength:o}}=this,a=i||0,l=this.getParsed(e),c=l._custom,u=ZN(c);let A=l[n.axis],d=0,f=r?this.applyStack(n,l,r):A,h,p;f!==A&&(d=f-A,f=A),u&&(A=c.barStart,f=c.barEnd-c.barStart,A!==0&&al(A)!==al(c.barEnd)&&(d=0),d+=A);const m=!tn(i)&&!u?i:d;let y=n.getPixelForValue(m);if(this.chart.getDataVisibility(e)?h=n.getPixelForValue(d+f):h=y,p=h-y,Math.abs(p)<o){p=Yfe(p,n,a)*o,A===a&&(y-=p/2);const x=n.getPixelForDecimal(0),v=n.getPixelForDecimal(1),b=Math.min(x,v),w=Math.max(x,v);y=Math.max(Math.min(y,w),b),h=y+p,r&&!u&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(h)-n.getValueForPixel(y))}if(y===n.getPixelForValue(a)){const x=al(p)*n.getLineWidthForValue(a)/2;y+=x,p-=x}return{size:p,base:y,head:h,center:h+p/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,i=s.skipNull,o=Nt(s.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const u=i?this._getStackCount(e):n.stackCount,A=s.barThickness==="flex"?Xfe(e,n,s,u*c):Kfe(e,n,s,u*c),d=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(Nt(d,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+f;a=A.start+A.chunk*h+A.chunk/2,l=Math.min(o,A.chunk*A.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let i=0;for(;i<s;++i)this.getParsed(i)[n.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}Ye(Xb,"id","bar"),Ye(Xb,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ye(Xb,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function nhe(t,e,n){let r=1,s=1,i=0,o=0;if(e<_n){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),A=Math.cos(l),d=Math.sin(l),f=(v,b,w)=>jy(v,a,l,!0)?1:Math.max(b,b*n,w,w*n),h=(v,b,w)=>jy(v,a,l,!0)?-1:Math.min(b,b*n,w,w*n),p=f(0,c,A),m=f(pr,u,d),y=h(Xt,c,A),x=h(Xt+pr,u,d);r=(p-y)/2,s=(m-x)/2,i=-(p+y)/2,o=-(m+x)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:o}}class Bg extends Cd{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=l=>+r[l];if(Pt(r[e])){const{key:l="value"}=this._parsing;i=c=>+ju(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)s._parsed[o]=i(o)}}_getRotation(){return tl(this.options.rotation-90)}_getCircumference(){return tl(this.options.circumference)}_getRotationExtents(){let e=_n,n=-_n;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),o=s._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(Ade(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:A}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:h,offsetY:p}=nhe(A,u,l),m=(r.width-o)/d,y=(r.height-o)/f,x=Math.max(Math.min(m,y)/2,0),v=pW(this.options.radius,x),b=Math.max(v*l,0),w=(v-b)/this._getVisibleDatasetWeightTotal();this.offsetX=h*v,this.offsetY=p*v,s.total=this.calculateTotal(),this.outerRadius=v-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/_n)}updateElements(e,n,r,s){const i=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,A=(a.top+a.bottom)/2,d=i&&c.animateScale,f=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:p,includeOptions:m}=this._getSharedOptions(n,s);let y=this._getRotation(),x;for(x=0;x<n;++x)y+=this._circumference(x,i);for(x=n;x<n+r;++x){const v=this._circumference(x,i),b=e[x],w={x:u+this.offsetX,y:A+this.offsetY,startAngle:y,endAngle:y+v,circumference:v,outerRadius:h,innerRadius:f};m&&(w.options=p||this.resolveDataElementOptions(x,b.active?"active":s)),y+=v,this.updateElement(b,x,w,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,s;for(s=0;s<n.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?_n*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=n_(n._parsed[e],r.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,i,o,a,l;if(!e){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){o=r.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Nt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ye(Bg,"id","doughnut"),Ye(Bg,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ye(Bg,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ye(Bg,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:s}}=e.legend.options;return n.labels.map((i,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class qb extends Cd{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,s){return ofe.bind(this)(e,n,r,s)}update(e){const n=this._cachedMeta,r=n.dataset,s=n.data||[],i=n.iScale.getLabels();if(r.points=s,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:i.length===s.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(s,0,s.length,e)}updateElements(e,n,r,s){const i=this._cachedMeta.rScale,o=s==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":s),u=i.getPointPositionForValue(a,this.getParsed(a).r),A=o?i.xCenter:u.x,d=o?i.yCenter:u.y,f={x:A,y:d,angle:u.angle,skip:isNaN(A)||isNaN(d),options:c};this.updateElement(l,a,f,s)}}}Ye(qb,"id","radar"),Ye(qb,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Ye(qb,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});function kA(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class u_{constructor(e){Ye(this,"options");this.options=e||{}}static override(e){Object.assign(u_.prototype,e)}init(){}formats(){return kA()}parse(){return kA()}format(){return kA()}add(){return kA()}diff(){return kA()}startOf(){return kA()}endOf(){return kA()}}var rhe={_date:u_};function she(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?Bde:jI;if(r){if(s._sharedOptions){const u=i[0],A=typeof u.getRange=="function"&&u.getRange(e);if(A){const d=c(i,e,n-A),f=c(i,e,n+A);return{lo:d.lo,hi:f.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:A}=s._cachedMeta,{_parsed:d}=t,f=d.slice(0,u.lo+1).reverse().findIndex(p=>!tn(p[A.axis]));u.lo-=Math.max(0,f);const h=d.slice(u.hi).findIndex(p=>!tn(p[A.axis]));u.hi+=Math.max(0,h)}return u}}return{lo:0,hi:i.length-1}}function iS(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:A,hi:d}=she(i[a],e,o,s);for(let f=A;f<=d;++f){const h=u[f];h.skip||r(h,c,f)}}}function ihe(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function e4(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||iS(t,n,e,function(a,l,c){!s&&!Xl(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function ohe(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:A}=yW(o,{x:e.x,y:e.y});jy(A,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return iS(t,n,e,i),s}function ahe(t,e,n,r,s,i){let o=[];const a=ihe(n);let l=Number.POSITIVE_INFINITY;function c(u,A,d){const f=u.inRange(e.x,e.y,s);if(r&&!f)return;const h=u.getCenterPoint(s);if(!(!!i||t.isPointInArea(h))&&!f)return;const m=a(e,h);m<l?(o=[{element:u,datasetIndex:A,index:d}],l=m):m===l&&o.push({element:u,datasetIndex:A,index:d})}return iS(t,n,e,c),o}function t4(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?ohe(t,e,n,s):ahe(t,e,n,r,s,i)}function dj(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return iS(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var lhe={modes:{index(t,e,n,r){const s=jA(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?e4(t,s,i,r,o):t4(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,A=c.data[u];A&&!A.skip&&l.push({element:A,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const s=jA(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?e4(t,s,i,r,o):t4(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const s=jA(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return e4(t,s,i,r,o)},nearest(t,e,n,r){const s=jA(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return t4(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=jA(e,t);return dj(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=jA(e,t);return dj(t,s,"y",n.intersect,r)}}};const LW=["left","top","right","bottom"];function Ym(t,e){return t.filter(n=>n.pos===e)}function fj(t,e){return t.filter(n=>LW.indexOf(n.pos)===-1&&n.box.axis===e)}function Jm(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function che(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function uhe(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!LW.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function Ahe(t,e){const n=uhe(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=u?u*s:l&&e.availableHeight)}return n}function dhe(t){const e=che(t),n=Jm(e.filter(c=>c.box.fullSize),!0),r=Jm(Ym(e,"left"),!0),s=Jm(Ym(e,"right")),i=Jm(Ym(e,"top"),!0),o=Jm(Ym(e,"bottom")),a=fj(e,"x"),l=fj(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Ym(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function hj(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function jW(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function fhe(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!Pt(s)){n.size&&(t[s]-=n.size);const A=r[n.stack]||{size:0,count:1};A.size=Math.max(A.size,n.horizontal?i.height:i.width),n.size=A.size/A.count,t[s]+=n.size}i.getPadding&&jW(o,i.getPadding());const a=Math.max(0,e.outerWidth-hj(o,t,"left","right")),l=Math.max(0,e.outerHeight-hj(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function hhe(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function phe(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function Ng(t,e,n,r){const s=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,phe(a.horizontal,e));const{same:A,other:d}=fhe(e,n,a,r);c|=A&&s.length,u=u||d,l.fullSize||s.push(a)}return c&&Ng(s,e,n,r)||u}function k1(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function pj(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const A=e.w*u,d=c.size||l.height;Ly(c.start)&&(o=c.start),l.fullSize?k1(l,s.left,o,n.outerWidth-s.right-s.left,d):k1(l,e.left+c.placed,o,A,d),c.start=o,c.placed+=A,o=l.bottom}else{const A=e.h*u,d=c.size||l.width;Ly(c.start)&&(i=c.start),l.fullSize?k1(l,i,s.top,d,n.outerHeight-s.bottom-s.top):k1(l,i,e.top+c.placed,d,A),c.start=i,c.placed+=A,i=l.right}}e.x=i,e.y=o}var Bo={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=Ls(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=dhe(t.boxes),l=a.vertical,c=a.horizontal;sn(t.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const u=l.reduce((p,m)=>m.box.options&&m.box.options.display===!1?p:p+1,0)||1,A=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},s);jW(d,Ls(r));const f=Object.assign({maxPadding:d,w:i,h:o,x:s.left,y:s.top},s),h=Ahe(l.concat(c),A);Ng(a.fullSize,f,A,h),Ng(l,f,A,h),Ng(c,f,A,h)&&Ng(l,f,A,h),hhe(f),pj(a.leftAndTop,f,A,h),f.x+=f.w,f.y+=f.h,pj(a.rightAndBottom,f,A,h),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},sn(a.chartArea,p=>{const m=p.box;Object.assign(m,t.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class MW{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class mhe extends MW{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Yb="$chartjs",ghe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},mj=t=>t===null||t==="";function yhe(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[Yb]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",mj(s)){const i=ZL(t,"width");i!==void 0&&(t.width=i)}if(mj(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=ZL(t,"height");i!==void 0&&(t.height=i)}return t}const QW=vfe?{passive:!0}:!1;function xhe(t,e,n){t&&t.addEventListener(e,n,QW)}function vhe(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,QW)}function bhe(t,e){const n=ghe[t.type]||t.type,{x:r,y:s}=jA(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function jw(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function whe(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||jw(a.addedNodes,r),o=o&&!jw(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function Che(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||jw(a.removedNodes,r),o=o&&!jw(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Qy=new Map;let gj=0;function HW(){const t=window.devicePixelRatio;t!==gj&&(gj=t,Qy.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function She(t,e){Qy.size||window.addEventListener("resize",HW),Qy.set(t,e)}function Bhe(t){Qy.delete(t),Qy.size||window.removeEventListener("resize",HW)}function Nhe(t,e,n){const r=t.canvas,s=r&&c_(r);if(!s)return;const i=wW((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(s),She(t,i),o}function n4(t,e,n){n&&n.disconnect(),e==="resize"&&Bhe(t)}function Ehe(t,e,n){const r=t.canvas,s=wW(i=>{t.ctx!==null&&n(bhe(i,t))},t);return xhe(r,e,s),s}class Ihe extends MW{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(yhe(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Yb])return!1;const r=n[Yb].initial;["height","width"].forEach(i=>{const o=r[i];tn(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Yb],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:whe,detach:Che,resize:Nhe}[n]||Ehe;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:n4,detach:n4,resize:n4}[n]||vhe)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return xfe(e,n,r,s)}isAttached(e){const n=e&&c_(e);return!!(n&&n.isConnected)}}function khe(t){return!l_()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?mhe:Ihe}class Sa{constructor(){Ye(this,"x");Ye(this,"y");Ye(this,"active",!1);Ye(this,"options");Ye(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Pw(this.x)&&Pw(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}Ye(Sa,"defaults",{}),Ye(Sa,"defaultRoutes");function The(t,e){const n=t.options.ticks,r=Fhe(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?_he(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return Ohe(e,c,i,o/s),c;const u=$he(i,e,s);if(o>0){let A,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(T1(e,c,u,tn(f)?0:a-f,a),A=0,d=o-1;A<d;A++)T1(e,c,u,i[A],i[A+1]);return T1(e,c,u,l,tn(f)?e.length:l+f),c}return T1(e,c,u),c}function Fhe(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function $he(t,e,n){const r=Dhe(t),s=e.length/n;if(!r)return Math.max(s,1);const i=xde(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function _he(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function Ohe(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function T1(t,e,n,r,s){const i=Nt(r,0),o=Math.min(Nt(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function Dhe(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const Rhe=t=>t==="left"?"right":t==="right"?"left":t,yj=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,xj=(t,e)=>Math.min(e||t,t);function vj(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function Phe(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function Uhe(t,e){sn(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function Zm(t){return t.drawTicks?t.tickLength:0}function bj(t,e){if(!t.display)return 0;const n=jr(t.font,e),r=Ls(t.padding);return(jn(t.text)?t.text.length:1)*n.lineHeight+r.height}function Lhe(t,e){return sA(t,{scale:e,type:"scale"})}function jhe(t,e,n){return sA(t,{tick:n,index:e,type:"tick"})}function Mhe(t,e,n){let r=e_(t);return(n&&e!=="right"||!n&&e==="right")&&(r=Rhe(r)),r}function Qhe(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let A=0,d,f,h;const p=o-s,m=a-i;if(t.isHorizontal()){if(f=Is(r,i,a),Pt(n)){const y=Object.keys(n)[0],x=n[y];h=u[y].getPixelForValue(x)+p-e}else n==="center"?h=(c.bottom+c.top)/2+p-e:h=yj(t,n,e);d=a-i}else{if(Pt(n)){const y=Object.keys(n)[0],x=n[y];f=u[y].getPixelForValue(x)-m+e}else n==="center"?f=(c.left+c.right)/2-m+e:f=yj(t,n,e);h=Is(r,o,s),A=n==="left"?-pr:pr}return{titleX:f,titleY:h,maxWidth:d,rotation:A}}class Kp extends Sa{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Ma(e,Number.POSITIVE_INFINITY),n=Ma(n,Number.NEGATIVE_INFINITY),r=Ma(r,Number.POSITIVE_INFINITY),s=Ma(s,Number.NEGATIVE_INFINITY),{min:Ma(e,r),max:Ma(n,s),minDefined:ts(e),maxDefined:ts(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Ma(n,Ma(r,n)),max:Ma(r,Ma(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){wn(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=qde(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?vj(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=The(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){wn(this.options.afterUpdate,[this])}beforeSetDimensions(){wn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){wn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),wn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){wn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=wn(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){wn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){wn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=xj(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),A=u.widest.width,d=u.highest.height,f=Ci(this.chart.width-A,0,this.maxWidth);a=e.offset?this.maxWidth/r:f/(r-1),A+6>a&&(a=f/(r-(e.offset?.5:1)),l=this.maxHeight-Zm(e.grid)-n.padding-bj(e.title,this.chart.options.font),c=Math.sqrt(A*A+d*d),o=J$(Math.min(Math.asin(Ci((u.highest.height+6)/a,-1,1)),Math.asin(Ci(l/c,-1,1))-Math.asin(Ci(d/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){wn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){wn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=bj(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Zm(i)+l):(e.height=this.maxHeight,e.width=Zm(i)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:A,highest:d}=this._getLabelSizes(),f=r.padding*2,h=tl(this.labelRotation),p=Math.cos(h),m=Math.sin(h);if(a){const y=r.mirror?0:m*A.width+p*d.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{const y=r.mirror?0:p*A.width+m*d.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(c,u,m,p)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,A=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=s*e.width,f=r*n.height):(d=r*e.height,f=s*n.width):i==="start"?f=n.width:i==="end"?d=e.width:i!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-A+o)*this.width/(this.width-A),0)}else{let u=n.height/2,A=e.height/2;i==="start"?(u=0,A=e.height):i==="end"&&(u=n.height,A=0),this.paddingTop=u+o,this.paddingBottom=A+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){wn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)tn(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=vj(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/xj(n,r));let c=0,u=0,A,d,f,h,p,m,y,x,v,b,w;for(A=0;A<n;A+=l){if(h=e[A].label,p=this._resolveTickFontOptions(A),s.font=m=p.string,y=i[m]=i[m]||{data:{},gc:[]},x=p.lineHeight,v=b=0,!tn(h)&&!jn(h))v=Uw(s,y.data,y.gc,v,h),b=x;else if(jn(h))for(d=0,f=h.length;d<f;++d)w=h[d],!tn(w)&&!jn(w)&&(v=Uw(s,y.data,y.gc,v,w),b+=x);o.push(v),a.push(b),c=Math.max(v,c),u=Math.max(b,u)}Uhe(i,n);const C=o.indexOf(c),B=a.indexOf(u),S=N=>({width:o[N]||0,height:a[N]||0});return{first:S(0),last:S(n-1),widest:S(C),highest:S(B),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Sde(this._alignToPixels?IA(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=jhe(this.getContext(),e,r))}return this.$context||(this.$context=Lhe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=tl(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),A=this.ticks.length+(l?1:0),d=Zm(i),f=[],h=a.setContext(this.getContext()),p=h.display?h.width:0,m=p/2,y=function(j){return IA(r,j,p)};let x,v,b,w,C,B,S,N,k,O,U,P;if(o==="top")x=y(this.bottom),B=this.bottom-d,N=x-m,O=y(e.top)+m,P=e.bottom;else if(o==="bottom")x=y(this.top),O=e.top,P=y(e.bottom)-m,B=x+m,N=this.top+d;else if(o==="left")x=y(this.right),C=this.right-d,S=x-m,k=y(e.left)+m,U=e.right;else if(o==="right")x=y(this.left),k=e.left,U=y(e.right)-m,C=x+m,S=this.left+d;else if(n==="x"){if(o==="center")x=y((e.top+e.bottom)/2+.5);else if(Pt(o)){const j=Object.keys(o)[0],G=o[j];x=y(this.chart.scales[j].getPixelForValue(G))}O=e.top,P=e.bottom,B=x+m,N=B+d}else if(n==="y"){if(o==="center")x=y((e.left+e.right)/2);else if(Pt(o)){const j=Object.keys(o)[0],G=o[j];x=y(this.chart.scales[j].getPixelForValue(G))}C=x-m,S=C-d,k=e.left,U=e.right}const V=Nt(s.ticks.maxTicksLimit,A),W=Math.max(1,Math.ceil(A/V));for(v=0;v<A;v+=W){const j=this.getContext(v),G=i.setContext(j),D=a.setContext(j),M=G.lineWidth,q=G.color,Z=D.dash||[],te=D.dashOffset,ue=G.tickWidth,de=G.tickColor,le=G.tickBorderDash||[],he=G.tickBorderDashOffset;b=Phe(this,v,l),b!==void 0&&(w=IA(r,b,M),c?C=S=k=U=w:B=N=O=P=w,f.push({tx1:C,ty1:B,tx2:S,ty2:N,x1:k,y1:O,x2:U,y2:P,width:M,color:q,borderDash:Z,borderDashOffset:te,tickWidth:ue,tickColor:de,tickBorderDash:le,tickBorderDashOffset:he}))}return this._ticksLength=A,this._borderValue=x,f}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:A}=i,d=Zm(r.grid),f=d+u,h=A?-u:f,p=-tl(this.labelRotation),m=[];let y,x,v,b,w,C,B,S,N,k,O,U,P="middle";if(s==="top")C=this.bottom-h,B=this._getXAxisLabelAlignment();else if(s==="bottom")C=this.top+h,B=this._getXAxisLabelAlignment();else if(s==="left"){const W=this._getYAxisLabelAlignment(d);B=W.textAlign,w=W.x}else if(s==="right"){const W=this._getYAxisLabelAlignment(d);B=W.textAlign,w=W.x}else if(n==="x"){if(s==="center")C=(e.top+e.bottom)/2+f;else if(Pt(s)){const W=Object.keys(s)[0],j=s[W];C=this.chart.scales[W].getPixelForValue(j)+f}B=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")w=(e.left+e.right)/2-f;else if(Pt(s)){const W=Object.keys(s)[0],j=s[W];w=this.chart.scales[W].getPixelForValue(j)}B=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?P="top":l==="end"&&(P="bottom"));const V=this._getLabelSizes();for(y=0,x=a.length;y<x;++y){v=a[y],b=v.label;const W=i.setContext(this.getContext(y));S=this.getPixelForTick(y)+i.labelOffset,N=this._resolveTickFontOptions(y),k=N.lineHeight,O=jn(b)?b.length:1;const j=O/2,G=W.color,D=W.textStrokeColor,M=W.textStrokeWidth;let q=B;o?(w=S,B==="inner"&&(y===x-1?q=this.options.reverse?"left":"right":y===0?q=this.options.reverse?"right":"left":q="center"),s==="top"?c==="near"||p!==0?U=-O*k+k/2:c==="center"?U=-V.highest.height/2-j*k+k:U=-V.highest.height+k/2:c==="near"||p!==0?U=k/2:c==="center"?U=V.highest.height/2-j*k:U=V.highest.height-O*k,A&&(U*=-1),p!==0&&!W.showLabelBackdrop&&(w+=k/2*Math.sin(p))):(C=S,U=(1-O)*k/2);let Z;if(W.showLabelBackdrop){const te=Ls(W.backdropPadding),ue=V.heights[y],de=V.widths[y];let le=U-te.top,he=0-te.left;switch(P){case"middle":le-=ue/2;break;case"bottom":le-=ue;break}switch(B){case"center":he-=de/2;break;case"right":he-=de;break;case"inner":y===x-1?he-=de:y>0&&(he-=de/2);break}Z={left:he,top:le,width:de+te.width,height:ue+te.height,color:W.backdropColor}}m.push({label:b,font:N,textOffset:U,options:{rotation:p,color:G,strokeColor:D,strokeWidth:M,textAlign:q,textBaseline:P,translation:[w,C],backdrop:Z}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-tl(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+i,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+i,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,A,d;this.isHorizontal()?(c=IA(e,this.left,o)-o/2,u=IA(e,this.right,a)+a/2,A=d=l):(A=IA(e,this.top,o)-o/2,d=IA(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,A),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&nS(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Pd(r,c,0,u,l,a)}s&&rS(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=jr(r.font),o=Ls(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Pt(n)?(l+=o.bottom,jn(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:A,rotation:d}=Qhe(this,l,n,a);Pd(e,r.text,0,0,i,{color:r.color,maxWidth:A,rotation:d,textAlign:Mhe(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Nt(e.grid&&e.grid.z,-1),s=Nt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Kp.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return jr(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class F1{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;Vhe(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,Hhe(e,o,r),this.override&&rr.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in rr[s]&&(delete rr[s][r],this.override&&delete Rd[r])}}function Hhe(t,e,n){const r=Uy(Object.create(null),[n?rr.get(n):{},rr.get(e),t.defaults]);rr.set(e,r),t.defaultRoutes&&zhe(e,t.defaultRoutes),t.descriptors&&rr.describe(e,t.descriptors)}function zhe(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");rr.route(i,s,l,a)})}function Vhe(t){return"id"in t&&"defaults"in t}class Whe{constructor(){this.controllers=new F1(Cd,"datasets",!0),this.elements=new F1(Sa,"elements"),this.plugins=new F1(Object,"plugins"),this.scales=new F1(Kp,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):sn(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=Y$(e);wn(r["before"+s],[],r),n[e](r),wn(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var Va=new Whe;class Ghe{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(wn(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){tn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=Nt(r.options&&r.options.plugins,{}),i=Khe(r);return s===!1&&!n?[]:qhe(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function Khe(t){const e={},n=[],r=Object.keys(Va.plugins.items);for(let i=0;i<r.length;i++)n.push(Va.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function Xhe(t,e){return!e&&t===!1?null:t===!0?{}:t}function qhe(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=Xhe(r[l],s);c!==null&&i.push({plugin:a,options:Yhe(t.config,{plugin:a,local:n[l]},c,o)})}return i}function Yhe(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function HI(t,e){const n=rr.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Jhe(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Zhe(t,e){return t===e?"_index_":"_value_"}function wj(t){if(t==="x"||t==="y"||t==="r")return t}function epe(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function zI(t,...e){if(wj(t))return t;for(const n of e){const r=n.axis||epe(n.position)||t.length>1&&wj(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Cj(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function tpe(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Cj(t,"x",n[0])||Cj(t,"y",n[0])}return{}}function npe(t,e){const n=Rd[t.type]||{scales:{}},r=e.scales||{},s=HI(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Pt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=zI(o,a,tpe(o,t),rr.scales[a.type]),c=Zhe(l,s),u=n.scales||{};i[o]=ey(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||HI(a,e),u=(Rd[a]||{}).scales||{};Object.keys(u).forEach(A=>{const d=Jhe(A,l),f=o[d+"AxisID"]||d;i[f]=i[f]||Object.create(null),ey(i[f],[{axis:d},r[f],u[A]])})}),Object.keys(i).forEach(o=>{const a=i[o];ey(a,[rr.scales[a.type],rr.scale])}),i}function zW(t){const e=t.options||(t.options={});e.plugins=Nt(e.plugins,{}),e.scales=npe(t,e)}function VW(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function rpe(t){return t=t||{},t.data=VW(t.data),zW(t),t}const Sj=new Map,WW=new Set;function $1(t,e){let n=Sj.get(t);return n||(n=e(),Sj.set(t,n),WW.add(n)),n}const eg=(t,e,n)=>{const r=ju(e,n);r!==void 0&&t.add(r)};class spe{constructor(e){this._config=rpe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=VW(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),zW(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return $1(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return $1(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return $1(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return $1(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(A=>eg(l,e,A))),u.forEach(A=>eg(l,s,A)),u.forEach(A=>eg(l,Rd[i]||{},A)),u.forEach(A=>eg(l,rr,A)),u.forEach(A=>eg(l,MI,A))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),WW.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Rd[n]||{},rr.datasets[n]||{},{type:n},rr,MI]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=Bj(this._resolverCache,e,s);let l=o;if(ope(o,n)){i.$shared=!1,r=Mu(r)?r():r;const c=this.createResolver(e,r,a);l=Zh(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=Bj(this._resolverCache,e,r);return Pt(n)?Zh(i,n,void 0,s):i}}function Bj(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:i_(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const ipe=t=>Pt(t)&&Object.getOwnPropertyNames(t).some(e=>Mu(t[e]));function ope(t,e){const{isScriptable:n,isIndexable:r}=BW(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(Mu(a)||ipe(a))||o&&jn(a))return!0}return!1}var ape="4.5.0";const lpe=["top","bottom","left","right","chartArea"];function Nj(t,e){return t==="top"||t==="bottom"||lpe.indexOf(t)===-1&&e==="x"}function Ej(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Ij(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),wn(n&&n.onComplete,[t],e)}function cpe(t){const e=t.chart,n=e.options.animation;wn(n&&n.onProgress,[t],e)}function GW(t){return l_()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Jb={},kj=t=>{const e=GW(t);return Object.values(Jb).filter(n=>n.canvas===e).pop()};function upe(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function Ape(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Qc;let Xp=(Qc=class{static register(...e){Va.add(...e),Tj()}static unregister(...e){Va.remove(...e),Tj()}constructor(e,n){const r=this.config=new spe(n),s=GW(e),i=kj(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||khe(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=ude(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Ghe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Ide(A=>this.update(A),o.resizeDelay||0),this._dataChanges=[],Jb[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ol.listen(this,"complete",Ij),Ol.listen(this,"progress",cpe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return tn(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Va}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():JL(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return XL(this.canvas,this.ctx),this}stop(){return Ol.stop(this),this}resize(e,n){Ol.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,JL(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),wn(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};sn(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=zI(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),sn(i,o=>{const a=o.options,l=a.id,c=zI(l,a),u=Nt(a.type,o.dtype);(a.position===void 0||Nj(a.position,c)!==Nj(o.dposition))&&(a.position=o.dposition),s[l]=!0;let A=null;if(l in r&&r[l].type===u)A=r[l];else{const d=Va.getScale(u);A=new d({id:l,type:u,ctx:this.ctx,chart:this}),r[A.id]=A}A.init(a,e)}),sn(s,(o,a)=>{o||delete r[a]}),sn(r,o=>{Bo.configure(this,o,o.options),Bo.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Ej("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||HI(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Va.getController(a),{datasetElementType:c,dataElementType:u}=rr.datasets[a];Object.assign(l,{dataElementType:Va.getElement(u),datasetElementType:c&&Va.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){sn(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:A}=this.getDatasetMeta(c),d=!s&&i.indexOf(A)===-1;A.buildOrUpdateElements(d),o=Math.max(+A.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||sn(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Ej("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){sn(this.scales,e=>{Bo.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!jL(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;upe(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!jL(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Bo.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],sn(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Mu(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ol.has(this)?this.attached&&!Ol.running(this)&&Ol.start(this):(this.draw(),Ij({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=DW(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&nS(n,s),e.controller.draw(),s&&rS(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Xl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=lhe.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=sA(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);Ly(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ol.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),XL(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Jb[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};sn(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){sn(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},sn(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Ow(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(A=>u.datasetIndex===A.datasetIndex&&u.index===A.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=mde(e),c=Ape(e,this._lastEvent,r,l);r&&(this._lastEvent=null,wn(i.onHover,[e,a,this],this),l&&wn(i.onClick,[e,a,this],this));const u=!Ow(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},Ye(Qc,"defaults",rr),Ye(Qc,"instances",Jb),Ye(Qc,"overrides",Rd),Ye(Qc,"registry",Va),Ye(Qc,"version",ape),Ye(Qc,"getChart",kj),Qc);function Tj(){return sn(Xp.instances,t=>t._plugins.invalidate())}function dpe(t,e,n){const{startAngle:r,x:s,y:i,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,A=Math.min(c/o,Ts(r-n));if(t.beginPath(),t.arc(s,i,o-c/2,r+A/2,n-A/2),a>0){const d=Math.min(c/a,Ts(r-n));t.arc(s,i,a+c/2,n-d/2,r+d/2,!0)}else{const d=Math.min(c/2,o*Ts(r-n));if(u==="round")t.arc(s,i,d,n-Xt/2,r+Xt/2,!0);else if(u==="bevel"){const f=2*d*d,h=-f*Math.cos(n+Xt/2)+s,p=-f*Math.sin(n+Xt/2)+i,m=f*Math.cos(r+Xt/2)+s,y=f*Math.sin(r+Xt/2)+i;t.lineTo(h,p),t.lineTo(m,y)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function fpe(t,e,n){const{startAngle:r,pixelMargin:s,x:i,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;t.beginPath(),t.arc(i,o,a,r-c,n+c),l>s?(c=s/l,t.arc(i,o,l,n+c,r-c,!0)):t.arc(i,o,s,n+pr,r-pr),t.closePath(),t.clip()}function hpe(t){return s_(t,["outerStart","outerEnd","innerStart","innerEnd"])}function ppe(t,e,n,r){const s=hpe(t.options.borderRadius),i=(n-e)/2,o=Math.min(i,r*e/2),a=l=>{const c=(n-Math.min(i,l))*r/2;return Ci(l,0,Math.min(i,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Ci(s.innerStart,0,o),innerEnd:Ci(s.innerEnd,0,o)}}function $f(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Mw(t,e,n,r,s,i){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,A=Math.max(e.outerRadius+r+n-c,0),d=u>0?u+r+n+c:0;let f=0;const h=s-l;if(r){const W=u>0?u-r:0,j=A>0?A-r:0,G=(W+j)/2,D=G!==0?h*G/(G+r):h;f=(h-D)/2}const p=Math.max(.001,h*A-n/Xt)/A,m=(h-p)/2,y=l+m+f,x=s-m-f,{outerStart:v,outerEnd:b,innerStart:w,innerEnd:C}=ppe(e,d,A,x-y),B=A-v,S=A-b,N=y+v/B,k=x-b/S,O=d+w,U=d+C,P=y+w/O,V=x-C/U;if(t.beginPath(),i){const W=(N+k)/2;if(t.arc(o,a,A,N,W),t.arc(o,a,A,W,k),b>0){const M=$f(S,k,o,a);t.arc(M.x,M.y,b,k,x+pr)}const j=$f(U,x,o,a);if(t.lineTo(j.x,j.y),C>0){const M=$f(U,V,o,a);t.arc(M.x,M.y,C,x+pr,V+Math.PI)}const G=(x-C/d+(y+w/d))/2;if(t.arc(o,a,d,x-C/d,G,!0),t.arc(o,a,d,G,y+w/d,!0),w>0){const M=$f(O,P,o,a);t.arc(M.x,M.y,w,P+Math.PI,y-pr)}const D=$f(B,y,o,a);if(t.lineTo(D.x,D.y),v>0){const M=$f(B,N,o,a);t.arc(M.x,M.y,v,y-pr,N)}}else{t.moveTo(o,a);const W=Math.cos(N)*A+o,j=Math.sin(N)*A+a;t.lineTo(W,j);const G=Math.cos(k)*A+o,D=Math.sin(k)*A+a;t.lineTo(G,D)}t.closePath()}function mpe(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a}=e;let l=e.endAngle;if(i){Mw(t,e,n,r,l,s);for(let c=0;c<i;++c)t.fill();isNaN(a)||(l=o+(a%_n||_n))}return Mw(t,e,n,r,l,s),t.fill(),l}function gpe(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:A,borderDashOffset:d,borderRadius:f}=l,h=l.borderAlign==="inner";if(!c)return;t.setLineDash(A||[]),t.lineDashOffset=d,h?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let p=e.endAngle;if(i){Mw(t,e,n,r,p,s);for(let m=0;m<i;++m)t.stroke();isNaN(a)||(p=o+(a%_n||_n))}h&&fpe(t,e,p),l.selfJoin&&p-o>=Xt&&f===0&&u!=="miter"&&dpe(t,e,p),i||(Mw(t,e,n,r,p,s),t.stroke())}class Eg extends Sa{constructor(n){super();Ye(this,"circumference");Ye(this,"endAngle");Ye(this,"fullCircles");Ye(this,"innerRadius");Ye(this,"outerRadius");Ye(this,"pixelMargin");Ye(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.getProps(["x","y"],s),{angle:o,distance:a}=yW(i,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:A,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=(this.options.spacing+this.options.borderWidth)/2,h=Nt(d,c-l),p=jy(o,l,c)&&l!==c,m=h>=_n||p,y=Kl(a,u+f,A+f);return m&&y}getCenterPoint(n){const{x:r,y:s,startAngle:i,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,A=(i+o)/2,d=(a+l+u+c)/2;return{x:r+Math.cos(A)*d,y:s+Math.sin(A)*d}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:s}=this,i=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=s>_n?Math.floor(s/_n):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const c=1-Math.sin(Math.min(Xt,s||0)),u=i*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,mpe(n,this,u,o,a),gpe(n,this,u,o,a),n.restore()}}Ye(Eg,"id","arc"),Ye(Eg,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Ye(Eg,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ye(Eg,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function KW(t,e,n=e){t.lineCap=Nt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Nt(n.borderDash,e.borderDash)),t.lineDashOffset=Nt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Nt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Nt(n.borderWidth,e.borderWidth),t.strokeStyle=Nt(n.borderColor,e.borderColor)}function ype(t,e,n){t.lineTo(n.x,n.y)}function xpe(t){return t.stepped?Mde:t.tension||t.cubicInterpolationMode==="monotone"?Qde:ype}function XW(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),u=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function vpe(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=XW(s,n,r),u=xpe(i);let{move:A=!0,reverse:d}=r||{},f,h,p;for(f=0;f<=c;++f)h=s[(a+(d?c-f:f))%o],!h.skip&&(A?(t.moveTo(h.x,h.y),A=!1):u(t,p,h,d,i.stepped),p=h);return l&&(h=s[(a+(d?c:0))%o],u(t,p,h,d,i.stepped)),!!l}function bpe(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=XW(s,n,r),{move:l=!0,reverse:c}=r||{};let u=0,A=0,d,f,h,p,m,y;const x=b=>(o+(c?a-b:b))%i,v=()=>{p!==m&&(t.lineTo(u,m),t.lineTo(u,p),t.lineTo(u,y))};for(l&&(f=s[x(0)],t.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=s[x(d)],f.skip)continue;const b=f.x,w=f.y,C=b|0;C===h?(w<p?p=w:w>m&&(m=w),u=(A*u+b)/++A):(v(),t.lineTo(b,w),h=C,A=0,p=m=w),y=w}v()}function VI(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?bpe:vpe}function wpe(t){return t.stepped?bfe:t.tension||t.cubicInterpolationMode==="monotone"?wfe:MA}function Cpe(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),KW(t,e.options),t.stroke(s)}function Spe(t,e,n,r){const{segments:s,options:i}=e,o=VI(e);for(const a of s)KW(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const Bpe=typeof Path2D=="function";function Npe(t,e,n,r){Bpe&&!e.options.segment?Cpe(t,e,n,r):Spe(t,e,n,r)}class nl extends Sa{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;ffe(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Ife(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=OW(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=wpe(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:A,end:d}=o[c],f=i[A],h=i[d];if(f===h){a.push(f);continue}const p=Math.abs((s-f[n])/(h[n]-f[n])),m=l(f,h,p,r.stepped);m[n]=e[n],a.push(m)}return a.length===1?a[0]:a}pathSegment(e,n,r){return VI(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=VI(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),Npe(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ye(nl,"id","line"),Ye(nl,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ye(nl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ye(nl,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Fj(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class Ch extends Sa{constructor(n){super();Ye(this,"parsed");Ye(this,"skip");Ye(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return Fj(this,n,"x",r)}inYRange(n,r){return Fj(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!Xl(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,QI(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Ye(Ch,"id","point"),Ye(Ch,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ye(Ch,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function qW(t,e){const{x:n,y:r,base:s,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,A;return t.horizontal?(A=o/2,a=Math.min(n,s),l=Math.max(n,s),c=r-A,u=r+A):(A=i/2,a=n-A,l=n+A,c=Math.min(r,s),u=Math.max(r,s)),{left:a,top:c,right:l,bottom:u}}function Au(t,e,n,r){return t?0:Ci(e,n,r)}function Epe(t,e,n){const r=t.options.borderWidth,s=t.borderSkipped,i=SW(r);return{t:Au(s.top,i.top,0,n),r:Au(s.right,i.right,0,e),b:Au(s.bottom,i.bottom,0,n),l:Au(s.left,i.left,0,e)}}function Ipe(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,i=bd(s),o=Math.min(e,n),a=t.borderSkipped,l=r||Pt(s);return{topLeft:Au(!l||a.top||a.left,i.topLeft,0,o),topRight:Au(!l||a.top||a.right,i.topRight,0,o),bottomLeft:Au(!l||a.bottom||a.left,i.bottomLeft,0,o),bottomRight:Au(!l||a.bottom||a.right,i.bottomRight,0,o)}}function kpe(t){const e=qW(t),n=e.right-e.left,r=e.bottom-e.top,s=Epe(t,n/2,r/2),i=Ipe(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:i},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function r4(t,e,n,r){const s=e===null,i=n===null,a=t&&!(s&&i)&&qW(t,r);return a&&(s||Kl(e,a.left,a.right))&&(i||Kl(n,a.top,a.bottom))}function Tpe(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Fpe(t,e){t.rect(e.x,e.y,e.w,e.h)}function s4(t,e,n={}){const r=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+i,h:t.h+o,radius:t.radius}}class Sh extends Sa{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:i,outer:o}=kpe(this),a=Tpe(o.radius)?My:Fpe;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),a(e,s4(o,n,i)),e.clip(),a(e,s4(i,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,s4(i,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,r){return r4(this,e,n,r)}inXRange(e,n){return r4(this,e,null,n)}inYRange(e,n){return r4(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:s,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+s)/2:n,y:i?r:(r+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Ye(Sh,"id","bar"),Ye(Sh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ye(Sh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function $pe(t,e,n){const r=t.segments,s=t.points,i=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=oS(l,c,s);const u=WI(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const A=OW(e,u);for(const d of A){const f=WI(n,i[d.start],i[d.end],d.loop),h=_W(a,s,f);for(const p of h)o.push({source:p,target:d,start:{[n]:$j(u,f,"start",Math.max)},end:{[n]:$j(u,f,"end",Math.min)}})}}return o}function WI(t,e,n,r){if(r)return;let s=e[t],i=n[t];return t==="angle"&&(s=Ts(s),i=Ts(i)),{property:t,start:s,end:i}}function _pe(t,e){const{x:n=null,y:r=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=oS(o,a,s);const l=s[o],c=s[a];r!==null?(i.push({x:l.x,y:r}),i.push({x:c.x,y:r})):n!==null&&(i.push({x:n,y:l.y}),i.push({x:n,y:c.y}))}),i}function oS(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function $j(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function YW(t,e){let n=[],r=!1;return jn(t)?(r=!0,n=t):n=_pe(t,e),n.length?new nl({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function _j(t){return t&&t.fill!==!1}function Ope(t,e,n){let s=t[e].fill;const i=[e];let o;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!ts(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function Dpe(t,e,n){const r=Lpe(t);if(Pt(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return ts(s)&&Math.floor(s)===s?Rpe(r[0],e,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Rpe(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function Ppe(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Pt(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function Upe(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Pt(t)?r=t.value:r=e.getBaseValue(),r}function Lpe(t){const e=t.options,n=e.fill;let r=Nt(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function jpe(t){const{scale:e,index:n,line:r}=t,s=[],i=r.segments,o=r.points,a=Mpe(e,n);a.push(YW({x:null,y:e.bottom},r));for(let l=0;l<i.length;l++){const c=i[l];for(let u=c.start;u<=c.end;u++)Qpe(s,o[u],a)}return new nl({points:s,options:{}})}function Mpe(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function Qpe(t,e,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:o,last:a,point:l}=Hpe(i,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function Hpe(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const s=r[n],i=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<i.length;c++){const u=i[c],A=o[u.start][n],d=o[u.end][n];if(Kl(s,A,d)){a=s===A,l=s===d;break}}return{first:a,last:l,point:r}}class JW{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:s,y:i,radius:o}=this;return n=n||{start:0,end:_n},e.arc(s,i,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:s}=this,i=e.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function zpe(t){const{chart:e,fill:n,line:r}=t;if(ts(n))return Vpe(e,n);if(n==="stack")return jpe(t);if(n==="shape")return!0;const s=Wpe(t);return s instanceof JW?s:YW(s,r)}function Vpe(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function Wpe(t){return(t.scale||{}).getPointPositionForValue?Kpe(t):Gpe(t)}function Gpe(t){const{scale:e={},fill:n}=t,r=Ppe(n,e);if(ts(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function Kpe(t){const{scale:e,fill:n}=t,r=e.options,s=e.getLabels().length,i=r.reverse?e.max:e.min,o=Upe(n,e,i),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,i);return new JW({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function i4(t,e,n){const r=zpe(e),{chart:s,index:i,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,A=c.backgroundColor,{above:d=A,below:f=A}=u||{},h=s.getDatasetMeta(i),p=DW(s,h);r&&o.points.length&&(nS(t,n),Xpe(t,{line:o,target:r,above:d,below:f,area:n,scale:a,axis:l,clip:p}),rS(t))}function Xpe(t,e){const{line:n,target:r,above:s,below:i,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=i;i!==s&&(c==="x"?(Oj(t,r,o.top),o4(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),Oj(t,r,o.bottom)):c==="y"&&(Dj(t,r,o.left),o4(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),Dj(t,r,o.right),u=s)),o4(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}function Oj(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],A=s[oS(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(A.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Dj(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],A=s[oS(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,A.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function o4(t,e){const{line:n,target:r,property:s,color:i,scale:o,clip:a}=e,l=$pe(n,r,s);for(const{source:c,target:u,start:A,end:d}of l){const{style:{backgroundColor:f=i}={}}=c,h=r!==!0;t.save(),t.fillStyle=f,qpe(t,o,a,h&&WI(s,A,d)),t.beginPath();const p=!!n.pathSegment(t,c);let m;if(h){p?t.closePath():Rj(t,r,d,s);const y=!!r.pathSegment(t,u,{move:p,reverse:!0});m=p&&y,m||Rj(t,r,A,s)}t.closePath(),t.fill(m?"evenodd":"nonzero"),t.restore()}}function qpe(t,e,n,r){const s=e.chart.chartArea,{property:i,start:o,end:a}=r||{};if(i==="x"||i==="y"){let l,c,u,A;i==="x"?(l=o,c=s.top,u=a,A=s.bottom):(l=s.left,c=o,u=s.right,A=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),A=Math.min(A,n.bottom)),t.rect(l,c,u-l,A-c),t.clip()}}function Rj(t,e,n,r){const s=e.interpolate(n,r);s&&t.lineTo(s.x,s.y)}var ZW={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,s=[];let i,o,a,l;for(o=0;o<r;++o)i=t.getDatasetMeta(o),a=i.dataset,l=null,a&&a.options&&a instanceof nl&&(l={visible:t.isDatasetVisible(o),index:o,fill:Dpe(a,o,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=l,s.push(l);for(o=0;o<r;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=Ope(s,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),r&&a.fill&&i4(t.ctx,a,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;_j(i)&&i4(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!_j(r)||n.drawTime!=="beforeDatasetDraw"||i4(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Pj=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Ype=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;let Uj=class extends Sa{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=wn(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=jr(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Pj(r,i);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let A=e;i.textAlign="left",i.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((h,p)=>{const m=r+n/2+i.measureText(h.text).width;(p===0||c[c.length-1]+m+2*a>o)&&(A+=u,c[c.length-(p>0?0:1)]=0,f+=u,d++),l[p]={left:0,top:f,row:d,width:m,height:s},c[c.length-1]+=m+a}),A}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let A=a,d=0,f=0,h=0,p=0;return this.legendItems.forEach((m,y)=>{const{itemWidth:x,itemHeight:v}=Jpe(r,n,i,m,s);y>0&&f+v+2*a>u&&(A+=d+a,c.push({width:d,height:f}),h+=d+a,p++,d=f=0),l[y]={left:h,top:f,col:p,width:x,height:v},d=Math.max(d,x),f+=v+a}),A+=d,c.push({width:d,height:f}),A}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=wh(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=Is(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Is(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Is(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Is(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;nS(e,this),this._draw(),rS(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=rr.color,l=wh(e.rtl,this.left,this.width),c=jr(o.font),{padding:u}=o,A=c.size,d=A/2;let f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:h,boxHeight:p,itemHeight:m}=Pj(o,A),y=function(C,B,S){if(isNaN(h)||h<=0||isNaN(p)||p<0)return;s.save();const N=Nt(S.lineWidth,1);if(s.fillStyle=Nt(S.fillStyle,a),s.lineCap=Nt(S.lineCap,"butt"),s.lineDashOffset=Nt(S.lineDashOffset,0),s.lineJoin=Nt(S.lineJoin,"miter"),s.lineWidth=N,s.strokeStyle=Nt(S.strokeStyle,a),s.setLineDash(Nt(S.lineDash,[])),o.usePointStyle){const k={radius:p*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:N},O=l.xPlus(C,h/2),U=B+d;CW(s,k,O,U,o.pointStyleWidth&&h)}else{const k=B+Math.max((A-p)/2,0),O=l.leftForLtr(C,h),U=bd(S.borderRadius);s.beginPath(),Object.values(U).some(P=>P!==0)?My(s,{x:O,y:k,w:h,h:p,radius:U}):s.rect(O,k,h,p),s.fill(),N!==0&&s.stroke()}s.restore()},x=function(C,B,S){Pd(s,S.text,C,B+m/2,c,{strikethrough:S.hidden,textAlign:l.textAlign(S.textAlign)})},v=this.isHorizontal(),b=this._computeTitleHeight();v?f={x:Is(i,this.left+u,this.right-r[0]),y:this.top+u+b,line:0}:f={x:this.left+u,y:Is(i,this.top+b+u,this.bottom-n[0].height),line:0},TW(this.ctx,e.textDirection);const w=m+u;this.legendItems.forEach((C,B)=>{s.strokeStyle=C.fontColor,s.fillStyle=C.fontColor;const S=s.measureText(C.text).width,N=l.textAlign(C.textAlign||(C.textAlign=o.textAlign)),k=h+d+S;let O=f.x,U=f.y;l.setWidth(this.width),v?B>0&&O+k+u>this.right&&(U=f.y+=w,f.line++,O=f.x=Is(i,this.left+u,this.right-r[f.line])):B>0&&U+w>this.bottom&&(O=f.x=O+n[f.line].width+u,f.line++,U=f.y=Is(i,this.top+b+u,this.bottom-n[f.line].height));const P=l.x(O);if(y(P,U,C),O=kde(N,O+h+d,v?O+k:this.right,e.rtl),x(l.x(O),U,C),v)f.x+=k+u;else if(typeof C.text!="string"){const V=c.lineHeight;f.y+=eG(C,V)+u}else f.y+=w}),FW(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=jr(n.font),s=Ls(n.padding);if(!n.display)return;const i=wh(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let u,A=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,A=Is(e.align,A,this.right-d);else{const h=this.columnSizes.reduce((p,m)=>Math.max(p,m.height),0);u=c+Is(e.align,this.top,this.bottom-h-e.labels.padding-this._computeTitleHeight())}const f=Is(a,A,A+d);o.textAlign=i.textAlign(e_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Pd(o,n.text,f,u,r)}_computeTitleHeight(){const e=this.options.title,n=jr(e.font),r=Ls(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(Kl(e,this.left,this.right)&&Kl(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],Kl(e,s.left,s.left+s.width)&&Kl(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!tme(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=Ype(s,r);s&&!i&&wn(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&wn(n.onHover,[e,r,this],this)}else r&&wn(n.onClick,[e,r,this],this)}};function Jpe(t,e,n,r,s){const i=Zpe(r,t,e,n),o=eme(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function Zpe(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function eme(t,e,n){let r=t;return typeof e.text!="string"&&(r=eG(e,n)),r}function eG(t,e){const n=t.text?t.text.length:0;return e*n}function tme(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var A_={id:"legend",_element:Uj,start(t,e,n){const r=t.legend=new Uj({ctx:t.ctx,options:n,chart:t});Bo.configure(t,r,n),Bo.addBox(t,r)},stop(t){Bo.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Bo.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Ls(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class tG extends Sa{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=jn(r.text)?r.text.length:1;this._padding=Ls(r.padding);const i=s*jr(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let l=0,c,u,A;return this.isHorizontal()?(u=Is(a,r,i),A=n+e,c=i-r):(o.position==="left"?(u=r+e,A=Is(a,s,n),l=Xt*-.5):(u=i-e,A=Is(a,n,s),l=Xt*.5),c=s-n),{titleX:u,titleY:A,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=jr(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);Pd(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:e_(n.align),textBaseline:"middle",translation:[o,a]})}}function nme(t,e){const n=new tG({ctx:t.ctx,options:e,chart:t});Bo.configure(t,n,e),Bo.addBox(t,n),t.titleBlock=n}var d_={id:"title",_element:tG,start(t,e,n){nme(t,n)},stop(t){const e=t.titleBlock;Bo.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Bo.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ig={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=LI(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Ha(t,e){return e&&(jn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Dl(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function rme(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function Lj(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=jr(e.bodyFont),c=jr(e.titleFont),u=jr(e.footerFont),A=i.length,d=s.length,f=r.length,h=Ls(e.padding);let p=h.height,m=0,y=r.reduce((b,w)=>b+w.before.length+w.lines.length+w.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,A&&(p+=A*c.lineHeight+(A-1)*e.titleSpacing+e.titleMarginBottom),y){const b=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;p+=f*b+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}d&&(p+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let x=0;const v=function(b){m=Math.max(m,n.measureText(b).width+x)};return n.save(),n.font=c.string,sn(t.title,v),n.font=l.string,sn(t.beforeBody.concat(t.afterBody),v),x=e.displayColors?o+2+e.boxPadding:0,sn(r,b=>{sn(b.before,v),sn(b.lines,v),sn(b.after,v)}),x=0,n.font=u.string,sn(t.footer,v),n.restore(),m+=h.width,{width:m,height:p}}function sme(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function ime(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function ome(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),ime(c,t,e,n)&&(c="center"),c}function jj(t,e,n){const r=n.yAlign||e.yAlign||sme(t,n);return{xAlign:n.xAlign||e.xAlign||ome(t,e,n,r),yAlign:r}}function ame(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function lme(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function Mj(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:u,topRight:A,bottomLeft:d,bottomRight:f}=bd(o);let h=ame(e,a);const p=lme(e,l,c);return l==="center"?a==="left"?h+=c:a==="right"&&(h-=c):a==="left"?h-=Math.max(u,d)+s:a==="right"&&(h+=Math.max(A,f)+s),{x:Ci(h,0,r.width-e.width),y:Ci(p,0,r.height-e.height)}}function _1(t,e,n){const r=Ls(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Qj(t){return Ha([],Dl(t))}function cme(t,e,n){return sA(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Hj(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const nG={beforeTitle:kl,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:kl,beforeBody:kl,beforeLabel:kl,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return tn(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:kl,afterBody:kl,beforeFooter:kl,footer:kl,afterFooter:kl};function Ai(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?nG[e].call(n,r):s}var FE;let zj=(FE=class extends Sa{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new RW(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=cme(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Ai(r,"beforeTitle",this,e),i=Ai(r,"title",this,e),o=Ai(r,"afterTitle",this,e);let a=[];return a=Ha(a,Dl(s)),a=Ha(a,Dl(i)),a=Ha(a,Dl(o)),a}getBeforeBody(e,n){return Qj(Ai(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return sn(e,i=>{const o={before:[],lines:[],after:[]},a=Hj(r,i);Ha(o.before,Dl(Ai(a,"beforeLabel",this,i))),Ha(o.lines,Ai(a,"label",this,i)),Ha(o.after,Dl(Ai(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return Qj(Ai(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Ai(r,"beforeFooter",this,e),i=Ai(r,"footer",this,e),o=Ai(r,"afterFooter",this,e);let a=[];return a=Ha(a,Dl(s)),a=Ha(a,Dl(i)),a=Ha(a,Dl(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(rme(this.chart,n[l]));return e.filter&&(a=a.filter((u,A,d)=>e.filter(u,A,d,r))),e.itemSort&&(a=a.sort((u,A)=>e.itemSort(u,A,r))),sn(a,u=>{const A=Hj(e.callbacks,u);s.push(Ai(A,"labelColor",this,u)),i.push(Ai(A,"labelPointStyle",this,u)),o.push(Ai(A,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=Ig[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=Lj(this,r),c=Object.assign({},a,l),u=jj(this.chart,r,c),A=Mj(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:A.x,y:A.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:A}=bd(a),{x:d,y:f}=e,{width:h,height:p}=n;let m,y,x,v,b,w;return i==="center"?(b=f+p/2,s==="left"?(m=d,y=m-o,v=b+o,w=b-o):(m=d+h,y=m+o,v=b-o,w=b+o),x=m):(s==="left"?y=d+Math.max(l,u)+o:s==="right"?y=d+h-Math.max(c,A)-o:y=this.caretX,i==="top"?(v=f,b=v-o,m=y-o,x=y+o):(v=f+p,b=v+o,m=y+o,x=y-o),w=v),{x1:m,x2:y,x3:x,y1:v,y2:b,y3:w}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=wh(r.rtl,this.x,this.width);for(e.x=_1(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=jr(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,u=jr(i.bodyFont),A=_1(this,"left",i),d=s.x(A),f=l<u.lineHeight?(u.lineHeight-l)/2:0,h=n.y+f;if(i.usePointStyle){const p={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=s.leftForLtr(d,c)+c/2,y=h+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,QI(e,p,m,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,QI(e,p,m,y)}else{e.lineWidth=Pt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const p=s.leftForLtr(d,c),m=s.leftForLtr(s.xPlus(d,1),c-2),y=bd(o.borderRadius);Object.values(y).some(x=>x!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,My(e,{x:p,y:h,w:c,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),My(e,{x:m,y:h+1,w:c-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(p,h,c,l),e.strokeRect(p,h,c,l),e.fillStyle=o.backgroundColor,e.fillRect(m,h+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,A=jr(r.bodyFont);let d=A.lineHeight,f=0;const h=wh(r.rtl,this.x,this.width),p=function(S){n.fillText(S,h.x(e.x+f),e.y+d/2),e.y+=d+i},m=h.textAlign(o);let y,x,v,b,w,C,B;for(n.textAlign=o,n.textBaseline="middle",n.font=A.string,e.x=_1(this,m,r),n.fillStyle=r.bodyColor,sn(this.beforeBody,p),f=a&&m!=="right"?o==="center"?c/2+u:c+2+u:0,b=0,C=s.length;b<C;++b){for(y=s[b],x=this.labelTextColors[b],n.fillStyle=x,sn(y.before,p),v=y.lines,a&&v.length&&(this._drawColorBox(n,e,b,h,r),d=Math.max(A.lineHeight,l)),w=0,B=v.length;w<B;++w)p(v[w]),d=A.lineHeight;sn(y.after,p)}f=0,d=A.lineHeight,sn(this.afterBody,p),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=wh(r.rtl,this.x,this.width);for(e.x=_1(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=jr(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:A,topRight:d,bottomLeft:f,bottomRight:h}=bd(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+A,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+u-h),n.quadraticCurveTo(a+c,l+u,a+c-h,l+u),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+A),n.quadraticCurveTo(a,l,a+A,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Ig[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Lj(this,e),l=Object.assign({},o,this._size),c=jj(n,e,l),u=Mj(e,l,c,n);(s._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Ls(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),TW(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),FW(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Ow(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!Ow(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Ig[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}},Ye(FE,"positioners",Ig),FE);var f_={id:"tooltip",_element:zj,positioners:Ig,afterInit(t,e,n){n&&(t.tooltip=new zj({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:nG},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const ume=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Ame(t,e,n,r){const s=t.indexOf(e);if(s===-1)return ume(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const dme=(t,e)=>t===null?null:Ci(Math.round(t),0,e);function Vj(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Hy extends Kp{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(tn(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:Ame(r,e,Nt(n,e),this._addedLabels),dme(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return Vj.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ye(Hy,"id","category"),Ye(Hy,"defaults",{ticks:{callback:Vj}});function fme(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:A,includeBounds:d}=t,f=i||1,h=u-1,{min:p,max:m}=e,y=!tn(o),x=!tn(a),v=!tn(c),b=(m-p)/(A+1);let w=QL((m-p)/h/f)*f,C,B,S,N;if(w<1e-14&&!y&&!x)return[{value:p},{value:m}];N=Math.ceil(m/w)-Math.floor(p/w),N>h&&(w=QL(N*w/h/f)*f),tn(l)||(C=Math.pow(10,l),w=Math.ceil(w*C)/C),s==="ticks"?(B=Math.floor(p/w)*w,S=Math.ceil(m/w)*w):(B=p,S=m),y&&x&&i&&bde((a-o)/i,w/1e3)?(N=Math.round(Math.min((a-o)/w,u)),w=(a-o)/N,B=o,S=a):v?(B=y?o:B,S=x?a:S,N=c-1,w=(S-B)/N):(N=(S-B)/w,ty(N,Math.round(N),w/1e3)?N=Math.round(N):N=Math.ceil(N));const k=Math.max(HL(w),HL(B));C=Math.pow(10,tn(l)?k:l),B=Math.round(B*C)/C,S=Math.round(S*C)/C;let O=0;for(y&&(d&&B!==o?(n.push({value:o}),B<o&&O++,ty(Math.round((B+O*w)*C)/C,o,Wj(o,b,t))&&O++):B<o&&O++);O<N;++O){const U=Math.round((B+O*w)*C)/C;if(x&&U>a)break;n.push({value:U})}return x&&d&&S!==a?n.length&&ty(n[n.length-1].value,a,Wj(a,b,t))?n[n.length-1].value=a:n.push({value:a}):(!x||S===a)&&n.push({value:S}),n}function Wj(t,e,{horizontal:n,minRotation:r}){const s=tl(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class GI extends Kp{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return tn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=al(s),c=al(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=fme(s,i);return e.bounds==="ticks"&&wde(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return n_(e,this.chart.options.locale,this.options.ticks.format)}}class zy extends GI{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ts(e)?e:0,this.max=ts(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=tl(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ye(zy,"id","linear"),Ye(zy,"defaults",{ticks:{callback:r_.formatters.numeric}});function KI(t){const e=t.ticks;if(e.display&&t.display){const n=Ls(e.backdropPadding);return Nt(e.font&&e.font.size,rr.font.size)+n.height}return 0}function hme(t,e,n){return n=jn(n)?n:[n],{w:jde(t,e.string,n),h:n.length*e.lineHeight}}function Gj(t,e,n,r,s){return t===r||t===s?{start:e-n/2,end:e+n/2}:t<r||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function pme(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],s=[],i=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Xt/i:0;for(let l=0;l<i;l++){const c=o.setContext(t.getPointLabelContext(l));s[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+s[l],a),A=jr(c.font),d=hme(t.ctx,A,t._pointLabels[l]);r[l]=d;const f=Ts(t.getIndexAngle(l)+a),h=Math.round(J$(f)),p=Gj(h,u.x,d.w,0,180),m=Gj(h,u.y,d.h,90,270);mme(n,e,f,p,m)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=xme(t,r,s)}function mme(t,e,n,r,s){const i=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/i,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/i,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function gme(t,e,n){const r=t.drawingArea,{extra:s,additionalAngle:i,padding:o,size:a}=n,l=t.getPointPosition(e,r+s+o,i),c=Math.round(J$(Ts(l.angle+pr))),u=wme(l.y,a.h,c),A=vme(c),d=bme(l.x,a.w,A);return{visible:!0,x:l.x,y:u,textAlign:A,left:d,top:u,right:d+a.w,bottom:u+a.h}}function yme(t,e){if(!e)return!0;const{left:n,top:r,right:s,bottom:i}=t;return!(Xl({x:n,y:r},e)||Xl({x:n,y:i},e)||Xl({x:s,y:r},e)||Xl({x:s,y:i},e))}function xme(t,e,n){const r=[],s=t._pointLabels.length,i=t.options,{centerPointLabels:o,display:a}=i.pointLabels,l={extra:KI(i)/2,additionalAngle:o?Xt/s:0};let c;for(let u=0;u<s;u++){l.padding=n[u],l.size=e[u];const A=gme(t,u,l);r.push(A),a==="auto"&&(A.visible=yme(A,c),A.visible&&(c=A))}return r}function vme(t){return t===0||t===180?"center":t<180?"left":"right"}function bme(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function wme(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function Cme(t,e,n){const{left:r,top:s,right:i,bottom:o}=n,{backdropColor:a}=e;if(!tn(a)){const l=bd(e.borderRadius),c=Ls(e.backdropPadding);t.fillStyle=a;const u=r-c.left,A=s-c.top,d=i-r+c.width,f=o-s+c.height;Object.values(l).some(h=>h!==0)?(t.beginPath(),My(t,{x:u,y:A,w:d,h:f,radius:l}),t.fill()):t.fillRect(u,A,d,f)}}function Sme(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let s=e-1;s>=0;s--){const i=t._pointLabelItems[s];if(!i.visible)continue;const o=r.setContext(t.getPointLabelContext(s));Cme(n,o,i);const a=jr(o.font),{x:l,y:c,textAlign:u}=i;Pd(n,t._pointLabels[s],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function rG(t,e,n,r){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,_n);else{let i=t.getPointPosition(0,e);s.moveTo(i.x,i.y);for(let o=1;o<r;o++)i=t.getPointPosition(o,e),s.lineTo(i.x,i.y)}}function Bme(t,e,n,r,s){const i=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(i.save(),i.strokeStyle=a,i.lineWidth=l,i.setLineDash(s.dash||[]),i.lineDashOffset=s.dashOffset,i.beginPath(),rG(t,n,o,r),i.closePath(),i.stroke(),i.restore())}function Nme(t,e,n){return sA(t,{label:n,index:e,type:"pointLabel"})}class ch extends GI{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ls(KI(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=ts(e)&&!isNaN(e)?e:0,this.max=ts(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/KI(this.options))}generateTickLabels(e){GI.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const s=wn(this.options.pointLabels.callback,[n,r],this);return s||s===0?s:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?pme(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,s){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,s))}getIndexAngle(e){const n=_n/(this._pointLabels.length||1),r=this.options.startAngle||0;return Ts(e*n+tl(r))}getDistanceFromCenterForValue(e){if(tn(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(tn(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return Nme(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const s=this.getIndexAngle(e)-pr+r;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:s,bottom:i}=this._pointLabelItems[e];return{left:n,top:r,right:s,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),rG(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:s,border:i}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&Sme(this,o),s.display&&this.ticks.forEach((u,A)=>{if(A!==0||A===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(A),f=s.setContext(d),h=i.setContext(d);Bme(this,f,l,o,h)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const u=r.setContext(this.getPointLabelContext(a)),{color:A,lineWidth:d}=u;!d||!A||(e.lineWidth=d,e.strokeStyle=A,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const s=this.getIndexAngle(0);let i,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),u=jr(c.font);if(i=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const A=Ls(c.backdropPadding);e.fillRect(-o/2-A.left,-i-u.size/2-A.top,o+A.width,u.size+A.height)}Pd(e,a.label,0,-i,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Ye(ch,"id","radialLinear"),Ye(ch,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:r_.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Ye(ch,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ye(ch,"descriptors",{angleLines:{_fallback:"grid"}});const aS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},xi=Object.keys(aS);function Kj(t,e){return t-e}function Xj(t,e){if(tn(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),ts(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Pw(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function qj(t,e,n,r){const s=xi.length;for(let i=xi.indexOf(t);i<s-1;++i){const o=aS[xi[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return xi[i]}return xi[s-1]}function Eme(t,e,n,r,s){for(let i=xi.length-1;i>=xi.indexOf(n);i--){const o=xi[i];if(aS[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return xi[n?xi.indexOf(n):0]}function Ime(t){for(let e=xi.indexOf(t)+1,n=xi.length;e<n;++e)if(aS[xi[e]].common)return xi[e]}function Yj(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=Z$(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function kme(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function Jj(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:kme(t,r,s,n)}class Qw extends Kp{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new rhe._date(e.adapters.date);s.init(n),ey(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Xj(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=ts(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=ts(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=Nde(s,i,o);return this._unit=n.unit||(r.autoSkip?qj(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):Eme(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Ime(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),Jj(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ci(n,0,o),r=Ci(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||qj(i.minUnit,n,r,this._getLabelCapacity(n)),a=Nt(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=Pw(l)||l===!0,u={};let A=n,d,f;if(c&&(A=+e.startOf(A,"isoWeek",l)),A=+e.startOf(A,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const h=s.ticks.source==="data"&&this.getDataTimestamps();for(d=A,f=0;d<r;d=+e.add(d,a,o),f++)Yj(u,d,h);return(d===r||s.bounds==="ticks"||f===1)&&Yj(u,d,h),Object.keys(u).sort(Kj).map(p=>+p)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return wn(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],A=c&&a[c],d=r[n],f=c&&A&&d&&d.major;return this._adapter.format(e,s||(f?A:u))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=tl(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,Jj(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(Xj(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return vW(e.sort(Kj))}}Ye(Qw,"id","time"),Ye(Qw,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function O1(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=jI(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=jI(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class Zj extends Qw{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=O1(n,this.min),this._tableRange=O1(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(O1(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return O1(this._table,r*this._tableRange+this._minPos,!0)}}Ye(Zj,"id","timeseries"),Ye(Zj,"defaults",Qw.defaults);const sG="label";function eM(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Tme(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function iG(t,e){t.labels=e}function oG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:sG;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function Fme(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sG;const n={labels:[],datasets:[]};return iG(n,t.labels),oG(n,t.datasets,e),n}function $me(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:A,...d}=t,f=z.useRef(null),h=z.useRef(null),p=()=>{f.current&&(h.current=new Xp(f.current,{type:o,data:Fme(a,i),options:l&&{...l},plugins:c}),eM(e,h.current))},m=()=>{eM(e,null),h.current&&(h.current.destroy(),h.current=null)};return z.useEffect(()=>{!s&&h.current&&l&&Tme(h.current,l)},[s,l]),z.useEffect(()=>{!s&&h.current&&iG(h.current.config.data,a.labels)},[s,a.labels]),z.useEffect(()=>{!s&&h.current&&a.datasets&&oG(h.current.config.data,a.datasets,i)},[s,a.datasets]),z.useEffect(()=>{h.current&&(s?(m(),setTimeout(p)):h.current.update(A))},[s,l,a.labels,a.datasets,A]),z.useEffect(()=>{h.current&&(m(),setTimeout(p))},[o]),z.useEffect(()=>(p(),()=>m()),[]),ie.createElement("canvas",{ref:f,role:"img",height:n,width:r,...d},u)}const _me=z.forwardRef($me);function h_(t,e){return Xp.register(e),z.forwardRef((n,r)=>ie.createElement(_me,{...n,ref:r,type:t}))}const Hw=h_("bar",Xb),aG=h_("radar",qb),Ome=h_("doughnut",Bg);Xp.register(Hy,zy,Ch,nl,Sh,d_,f_,A_,ZW,ch);const Dme=()=>{var V,W,j,G;const{sessionId:t}=of(),e=Qs(),[n,r]=z.useState(null),[s,i]=z.useState(!0),[o,a]=z.useState(null),[l,c]=z.useState(!1);z.useEffect(()=>{t&&(async()=>{var M,q;try{const Z=await bt.get(`/api/v1/sessions/${t}/result`);Z.data.success&&r(Z.data.data)}catch(Z){console.error("Fetch error:",Z),a(((q=(M=Z.response)==null?void 0:M.data)==null?void 0:q.message)||"결과를 불러오는 데 실패했습니다.")}finally{i(!1)}})()},[t]);const u=()=>{const D=window.location.href;navigator.clipboard.writeText(D).then(()=>{c(!0),setTimeout(()=>c(!1),3e3)})};if(s)return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-violet-800 mb-4"}),g.jsx("p",{className:"text-lg font-medium text-gray-700",children:"결과를 불러오는 중..."})]})});if(o||!n)return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:g.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full border border-gray-200",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-6xl mb-4",children:"❌"}),g.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"오류 발생"}),g.jsx("p",{className:"text-gray-600 mb-6",children:o||"결과를 찾을 수 없습니다."}),g.jsx("button",{onClick:()=>e("/dashboard"),className:"px-6 py-3 bg-violet-800 text-white rounded-lg hover:bg-violet-800 transition-colors",children:"대시보드로 돌아가기"})]})})});const A=n.result.categoryScores||[],d=((V=A.find(D=>D.category==="vocabulary"))==null?void 0:V.percentage)||0,f=((W=A.find(D=>D.category==="reading"))==null?void 0:W.percentage)||0,h=((j=A.find(D=>D.category==="grammar"))==null?void 0:j.percentage)||0,p=((G=A.find(D=>D.category==="reasoning"))==null?void 0:G.percentage)||0,y=LAe({vocabulary:d,reading:f,grammar:h,reasoning:p}),x={labels:["어휘력","독해력","문법/어법","추론/사고력"],datasets:[{label:"내 점수",data:[d,f,h,p],backgroundColor:"rgba(91, 33, 182, 0.2)",borderColor:"rgb(91, 33, 182)",borderWidth:2,pointBackgroundColor:"rgb(91, 33, 182)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(91, 33, 182)",pointRadius:4,pointHoverRadius:6}]},v={responsive:!0,maintainAspectRatio:!0,animation:{duration:1e3},scales:{r:{beginAtZero:!0,max:100,min:0,ticks:{stepSize:20,font:{size:11},color:"#6b7280",backdropColor:"transparent"},grid:{color:"#e5e7eb",circular:!0},angleLines:{color:"#e5e7eb"},pointLabels:{font:{size:13,weight:"bold"},color:"#374151"}}},plugins:{legend:{display:!1},tooltip:{enabled:!0,callbacks:{label:D=>{var M;return`${((M=D.parsed.r)==null?void 0:M.toFixed(1))||0}%`}}}}},b={labels:["어휘력","독해력","문법/어법","추론/사고력"],datasets:[{label:"점수 (%)",data:[d,f,h,p],backgroundColor:"rgba(91, 33, 182, 0.8)",borderColor:"rgb(91, 33, 182)",borderWidth:1,borderRadius:6}]},w={responsive:!0,maintainAspectRatio:!0,indexAxis:"y",animation:{duration:1e3},scales:{x:{beginAtZero:!0,max:100,min:0,ticks:{callback:D=>`${D}%`,font:{size:11},color:"#6b7280"},grid:{color:"#f3f4f6"}},y:{ticks:{font:{size:12,weight:"bold"},color:"#374151"},grid:{display:!1}}},plugins:{legend:{display:!1},tooltip:{enabled:!0,callbacks:{label:D=>{var M;return`${((M=D.parsed.x)==null?void 0:M.toFixed(1))||0}%`}}}}},C=D=>({vocabulary:"어휘력",reading:"독해력",grammar:"문법/어법",reasoning:"추론/사고력"})[D]||D,B=D=>({1:"최우수 (상위 4%)",2:"우수 (상위 11%)",3:"양호 (상위 23%)",4:"보통 상 (상위 40%)",5:"보통 (중위 50%)",6:"보통 하 (하위 40%)",7:"노력 요함 (하위 23%)",8:"많은 노력 (하위 11%)",9:"특별 지도 (하위 4%)"})[D]||`${D}등급`,S=()=>{const D=[];return d<60&&D.push({title:"어휘 이해의 어려움",description:"새로운 단어를 만났을 때 의미를 파악하기 어렵고, 문장 속 낯선 어휘 때문에 전체 내용을 이해하는 데 막힘을 느낍니다. 이는 학습 자료 이해와 시험 문제 해석에 직접적인 영향을 줍니다."}),f<60&&D.push({title:"긴 글 이해의 어려움",description:"여러 문단으로 이루어진 긴 지문을 읽을 때 앞부분 내용을 잊어버리거나, 글의 전체 흐름을 파악하기 어렵습니다. 교과서나 참고서를 읽을 때 쉽게 지치고 집중력이 떨어질 수 있습니다."}),h<60&&D.push({title:"문장 구조 파악의 어려움",description:"복잡한 문장 구조를 만났을 때 주어와 서술어, 수식 관계를 정확히 파악하기 어렵습니다. 이로 인해 글쓰기에서도 문법적 오류가 자주 발생하고, 자신의 생각을 명확하게 표현하는 데 어려움을 겪을 수 있습니다."}),p<60&&D.push({title:"논리적 사고의 어려움",description:"글에서 직접적으로 드러나지 않은 내용을 추론하거나, 원인과 결과를 연결하여 이해하기 어렵습니다. 수학 문장제나 과학 실험 결과 해석 등에서 어려움을 겪으며, 비판적으로 글을 읽고 판단하는 능력이 부족할 수 있습니다."}),D.length===0&&D.push({title:"균형 잡힌 문해력",description:"전반적으로 양호한 문해력을 보이고 있습니다. 현재 수준을 유지하면서 더 다양한 글을 접하고 깊이 있는 사고를 연습한다면 더욱 향상될 수 있습니다."}),D},N=D=>({reading_motivation:"읽기 동기",writing_motivation:"글쓰기 동기",reading_environment:"독서 환경",reading_habit:"독서 습관",reading_preference:"읽기 선호도",digital_literacy:"디지털 문해력",critical_thinking:"비판적 사고",reading_attitude:"독서 태도"})[D]||D,k=()=>{if(!(n!=null&&n.surveyResponses)||n.surveyResponses.length===0)return null;const D={};return n.surveyResponses.forEach(M=>{const q=parseFloat(M.response);!isNaN(q)&&q>=1&&q<=5&&(D[M.category]||(D[M.category]={sum:0,count:0,average:0}),D[M.category].sum+=q,D[M.category].count+=1)}),Object.keys(D).forEach(M=>{const q=D[M];q.average=q.sum/q.count}),D},O=D=>{const M=[];return Object.entries(D).forEach(([q,Z])=>{const te=Z.average,ue=N(q);let de="",le="";q==="reading_motivation"?te>=4?(de="읽기에 대한 흥미와 동기가 매우 높습니다. 스스로 책을 찾아 읽으며 독서를 즐기는 습관이 잘 형성되어 있습니다.",le="다양한 장르의 책을 접하며 읽기 범위를 넓히고, 독후감이나 독서 토론을 통해 깊이 있는 독서를 시도해보세요."):te>=3?(de="읽기에 대한 기본적인 흥미는 있으나 일관성이 부족합니다. 특정 주제나 상황에서만 읽기 동기가 발생합니다.",le="자신이 좋아하는 주제의 책부터 시작하여 성공 경험을 쌓고, 짧은 시간이라도 매일 읽는 습관을 만들어보세요."):(de="읽기에 대한 흥미가 낮고 독서를 회피하는 경향이 있습니다. 읽기를 부담스러운 과제로 느끼고 있을 가능성이 높습니다.",le="흥미로운 만화나 그림책부터 시작하여 읽기에 대한 부담을 줄이고, 부모님과 함께 책을 읽으며 즐거운 경험을 만들어보세요."):q==="writing_motivation"?te>=4?(de="글쓰기에 대한 동기와 자신감이 높습니다. 자신의 생각을 글로 표현하는 것을 즐기며 적극적으로 글쓰기에 참여합니다.",le="다양한 형식의 글쓰기(수필, 논설문, 창작)를 시도하고, 글쓰기 대회나 독후감 공모전 참가를 고려해보세요."):te>=3?(de="글쓰기에 대한 기본적인 동기는 있으나 어려움을 느끼거나 자신감이 부족합니다.",le="짧은 일기나 메모부터 시작하여 글쓰기 부담을 줄이고, 선생님이나 부모님께 피드백을 받으며 성취감을 쌓아보세요."):(de="글쓰기에 대한 동기가 매우 낮고 글쓰기를 어렵고 부담스러운 과제로 인식합니다.",le="생각을 그림이나 마인드맵으로 표현하는 것부터 시작하고, 짧은 문장으로 일상을 기록하며 글쓰기에 익숙해지도록 해보세요."):q==="reading_environment"?te>=4?(de="독서하기에 좋은 환경이 잘 갖춰져 있습니다. 집에 다양한 책이 있고 독서할 시간과 공간이 충분합니다.",le="현재의 독서 환경을 잘 활용하여 정기적인 독서 시간을 만들고, 가족과 함께 독서하는 문화를 만들어보세요."):te>=3?(de="기본적인 독서 환경은 갖춰져 있으나 개선의 여지가 있습니다.",le="집에 작은 독서 공간을 마련하고, 도서관을 정기적으로 방문하여 다양한 책을 접할 기회를 늘려보세요."):(de="독서 환경이 부족합니다. 집에 책이 적고 독서할 시간이나 공간이 충분하지 않습니다.",le="학교나 지역 도서관을 적극 활용하고, 전자책이나 오디오북을 통해 독서 접근성을 높여보세요."):q==="reading_habit"?te>=4?(de="규칙적이고 지속적인 독서 습관이 잘 형성되어 있습니다. 매일 일정한 시간 독서하는 루틴이 있습니다.",le="현재의 독서 습관을 유지하면서, 독서록을 작성하거나 독서 목표를 세워 더욱 체계적으로 독서를 관리해보세요."):te>=3?(de="간헐적으로 독서하지만 규칙적인 습관이 부족합니다.",le="매일 10-15분씩 짧은 독서 시간을 정하고, 취침 전이나 등교 전 등 특정 시간에 독서하는 습관을 만들어보세요."):(de="독서 습관이 거의 형성되어 있지 않습니다. 독서를 거의 하지 않거나 매우 불규칙적입니다.",le="하루 5분부터 시작하여 점진적으로 독서 시간을 늘리고, 흥미로운 책을 선택하여 독서에 대한 긍정적 경험을 쌓아보세요."):q==="reading_preference"&&(te>=4?(de="다양한 장르의 책을 폭넓게 읽으며 독서 취향이 발달되어 있습니다.",le="좋아하는 장르를 더 깊이 파고들거나, 새로운 장르에도 도전하여 독서 폭을 넓혀보세요."):te>=3?(de="특정 장르나 주제의 책만 선호하는 경향이 있습니다.",le="친구나 선생님의 추천을 받아 다양한 장르의 책을 접해보고, 독서 모임에 참여하여 새로운 책을 발견해보세요."):(de="읽기 선호도가 매우 제한적이거나 거의 없습니다.",le="만화나 그림책, 잡지 등 부담 없는 읽을거리부터 시작하여 점차 다양한 형태의 글을 접해보세요.")),M.push({category:q,name:ue,score:Math.round(te*10)/10,analysis:de,recommendation:le})}),M},U=k(),P=U?O(U):null;return g.jsxs("div",{className:"min-h-screen bg-white py-8 px-4",children:[g.jsx("style",{children:`
        @media print {
          /* === 기본 설정 === */
          * {
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
            color-adjust: exact !important;
            box-sizing: border-box !important;
          }

          @page {
            size: A4;
            margin: 15mm;
          }

          html, body {
            margin: 0 !important;
            padding: 0 !important;
            width: 210mm;
            background: white !important;
          }

          body {
            font-size: 10pt;
          }

          /* === 화면 전용 요소 숨김 === */
          .no-print,
          button,
          .fixed,
          nav,
          header:not(.print-header),
          footer:not(.print-footer) {
            display: none !important;
          }

          /* === 페이지 구조 === */
          .print-page-1,
          .print-page-2,
          .print-page-3 {
            width: 100%;
            margin: 0;
            padding: 0;
            page-break-inside: avoid;
            break-inside: avoid;
          }

          .print-page-1,
          .print-page-2 {
            page-break-after: always;
            break-after: page;
          }

          .print-page-3 {
            page-break-after: avoid;
            break-after: avoid;
          }

          /* === 컨테이너 === */
          .max-w-6xl,
          .container {
            max-width: 100% !important;
            width: 100% !important;
            margin: 0 !important;
            padding: 0 !important;
          }

          .space-y-6 {
            gap: 0 !important;
          }

          .space-y-6 > * + * {
            margin-top: 0 !important;
          }

          /* === 카드 스타일 === */
          .bg-white,
          .bg-violet-50,
          .bg-gradient-to-r {
            page-break-inside: avoid;
            break-inside: avoid;
            margin-bottom: 6pt !important;
            padding: 8pt !important;
            border: 0.5pt solid #e5e7eb !important;
            border-radius: 2pt !important;
            box-shadow: none !important;
            background: white !important;
          }

          .bg-violet-50 {
            background: #f5f3ff !important;
            border-color: #c4b5fd !important;
          }

          .rounded-xl,
          .rounded-lg {
            border-radius: 2pt !important;
          }

          .shadow-sm,
          .shadow,
          .shadow-lg {
            box-shadow: none !important;
          }

          /* === 타이포그래피 === */
          h1 {
            font-size: 14pt !important;
            margin-bottom: 6pt !important;
            margin-top: 0 !important;
            page-break-after: avoid;
          }

          h2 {
            font-size: 11pt !important;
            margin-bottom: 4pt !important;
            margin-top: 6pt !important;
            page-break-after: avoid;
          }

          h3 {
            font-size: 9pt !important;
            margin-bottom: 3pt !important;
            margin-top: 4pt !important;
            page-break-after: avoid;
          }

          p, li, span, div {
            font-size: 8.5pt !important;
            line-height: 1.3 !important;
          }

          /* === 레이아웃 === */
          .grid {
            display: grid !important;
            gap: 4pt !important;
            page-break-inside: avoid;
            break-inside: avoid;
            max-width: 100% !important;
          }

          .grid-cols-2 {
            grid-template-columns: 1fr 1fr !important;
          }

          .grid-cols-3 {
            grid-template-columns: 1fr 1fr 1fr !important;
          }

          .grid > * {
            min-width: 0 !important;
            min-height: 0 !important;
            overflow: hidden !important;
          }

          /* === 간격 조정 === */
          .space-y-2 > * + * {
            margin-top: 2pt !important;
          }

          .space-y-3 > * + * {
            margin-top: 3pt !important;
          }

          .space-y-4 > * + * {
            margin-top: 4pt !important;
          }

          .mb-2 {
            margin-bottom: 2pt !important;
          }

          .mb-3 {
            margin-bottom: 3pt !important;
          }

          .mb-4 {
            margin-bottom: 4pt !important;
          }

          .mb-6 {
            margin-bottom: 6pt !important;
          }

          .p-4 {
            padding: 6pt !important;
          }

          .p-6 {
            padding: 8pt !important;
          }

          /* === 차트 최적화 === */
          .chart-container {
            page-break-inside: avoid;
            break-inside: avoid;
          }

          .h-32 {
            height: 100pt !important;
          }

          .h-64 {
            height: 140pt !important;
          }

          canvas {
            max-width: 100% !important;
            max-height: 140pt !important;
            width: auto !important;
            height: auto !important;
            object-fit: contain;
          }

          svg {
            max-width: 100% !important;
            max-height: 120pt !important;
            width: auto !important;
            height: auto !important;
          }

          /* 영역별 분석 차트 높이 증가 */
          .area-analysis-section .h-64 {
            height: 180pt !important;
          }

          .area-analysis-section canvas {
            max-height: 180pt !important;
          }

          /* Pyramid 높이 최적화 */
          .print-page-1 svg {
            max-height: 140pt !important;
          }

          /* === 이모지 크기 === */
          .text-5xl {
            font-size: 24pt !important;
          }

          .text-3xl {
            font-size: 18pt !important;
          }

          .text-2xl {
            font-size: 14pt !important;
          }

          .text-xl {
            font-size: 12pt !important;
          }

          /* === Page 3 최적화 === */
          .print-page-3 .bg-white,
          .print-page-3 .bg-violet-50,
          .print-page-3 .bg-gradient-to-r {
            padding: 4pt !important;
            margin-bottom: 2pt !important;
          }

          .print-page-3 .grid.lg\\:grid-cols-2 {
            grid-template-columns: 1fr 1fr !important;
            gap: 4pt !important;
          }

          /* 독서 태도 섹션 최적화 */
          .print-page-3 h2 {
            font-size: 10pt !important;
            margin-bottom: 3pt !important;
          }

          .print-page-3 h3 {
            font-size: 8pt !important;
            margin-bottom: 2pt !important;
          }

          .print-page-3 p,
          .print-page-3 div {
            font-size: 7.5pt !important;
            line-height: 1.2 !important;
          }

          /* 막대 그래프 최적화 */
          .print-page-3 .h-2 {
            height: 1pt !important;
          }

          /* 분석 카드 간격 축소 */
          .print-page-3 .space-y-3 > * + * {
            margin-top: 2pt !important;
          }

          .print-page-3 .gap-4 {
            gap: 2pt !important;
          }

          /* === 리스트 === */
          ul, ol {
            margin: 2pt 0 !important;
            padding-left: 12pt !important;
          }

          li {
            margin: 1pt 0 !important;
          }

          /* === 색상 보존 === */
          .bg-green-50,
          .bg-red-50,
          .bg-blue-50,
          .bg-yellow-50,
          .bg-purple-50 {
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
        }
      `}),g.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[l&&g.jsx("div",{className:"fixed top-4 right-4 bg-violet-800 text-white px-6 py-3 rounded-lg shadow-lg z-50 no-print",children:"✅ URL이 클립보드에 복사되었습니다!"}),g.jsxs("div",{className:"print-page-1",children:[g.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 personal-info",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"문해력 진단 결과"}),g.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"학생 이름"}),g.jsx("div",{className:"student-name text-lg font-semibold text-gray-900",children:n.student.name})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"학년"}),g.jsx("div",{className:"grade-info text-base font-medium text-gray-900",children:n.student.grade?n.student.grade<=6?`초등 ${n.student.grade}학년`:`중등 ${n.student.grade-6}학년`:"미등록"})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"제출 일시"}),g.jsx("div",{className:"text-base font-medium text-gray-900",children:new Date(n.result.completedAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})}),g.jsx("div",{className:"text-sm text-gray-600 mt-1",children:new Date(n.result.completedAt).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!0})})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[g.jsxs("div",{className:"bg-violet-50 rounded-lg p-3 border border-violet-200",children:[g.jsx("div",{className:"text-xs font-medium text-violet-800 mb-1",children:"종합 점수"}),g.jsxs("div",{className:"text-2xl font-bold text-violet-900",children:[n.result.totalScore,"점 ",g.jsxs("span",{className:"text-sm font-normal",children:["/ ",n.result.categoryScores.reduce((D,M)=>D+M.maxScore,0),"점"]})]})]}),g.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[g.jsx("div",{className:"text-xs font-medium text-gray-700 mb-1",children:"종합 등급"}),g.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[n.result.grade,"등급 ",g.jsxs("span",{className:"text-sm font-normal text-gray-600",children:["(",B(n.result.grade),")"]})]})]})]}),g.jsxs("div",{className:"ai-summary",children:[g.jsx("div",{className:"text-sm font-semibold text-gray-800 mb-2",children:"📊 전반적인 결과 요약"}),g.jsx("p",{className:"text-gray-700",children:n.result.aiSummary||"AI 요약 생성 중..."})]})]}),g.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 border border-gray-200",children:[g.jsx("h2",{className:"text-base font-bold text-gray-900 mb-3",children:"등급 분포도"}),g.jsx(MAe,{currentGrade:n.result.grade})]}),g.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 border border-gray-200 area-analysis-section",children:[g.jsx("h2",{className:"text-base font-bold text-gray-900 mb-3",children:"영역별 분석"}),A.length>0?g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-xs font-semibold text-gray-700 mb-2 text-center",children:"종합 분석"}),g.jsx("div",{className:"h-64 flex items-center justify-center",children:x.datasets[0].data.some(D=>D>0)?g.jsx(aG,{data:x,options:{...v,maintainAspectRatio:!0}}):g.jsx("p",{className:"text-gray-500 text-xs",children:"데이터 없음"})})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-xs font-semibold text-gray-700 mb-2 text-center",children:"점수 비교"}),g.jsx("div",{className:"h-64 flex items-center justify-center",children:b.datasets[0].data.some(D=>D>0)?g.jsx(Hw,{data:b,options:{...w,maintainAspectRatio:!0}}):g.jsx("p",{className:"text-gray-500 text-xs",children:"데이터 없음"})})]})]}):g.jsx("div",{className:"text-center py-8",children:g.jsx("p",{className:"text-gray-500 text-xs",children:"영역별 데이터가 없습니다."})})]})]}),g.jsxs("div",{className:"print-page-2",children:[g.jsxs("div",{className:"bg-violet-50 rounded-xl shadow-sm p-6 border border-violet-200",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[g.jsx("span",{className:"text-5xl",children:y.emoji}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-gray-900",children:y.name}),g.jsx("p",{className:"text-sm text-gray-600",children:"내 문해력 유형"})]})]}),g.jsx("p",{className:"text-sm text-gray-700 leading-relaxed mb-4",children:y.description}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[g.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"💪 강점"}),g.jsx("ul",{className:"space-y-2",children:y.strengths.map((D,M)=>g.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[g.jsx("span",{className:"text-violet-800 mt-0.5",children:"✓"}),g.jsx("span",{children:D})]},M))})]}),g.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"🎯 개선 영역"}),g.jsx("ul",{className:"space-y-2",children:y.weaknesses.map((D,M)=>g.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[g.jsx("span",{className:"text-gray-500 mt-0.5",children:"•"}),g.jsx("span",{children:D})]},M))})]})]}),g.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"📚 맞춤 학습 전략"}),g.jsx("div",{className:"space-y-2",children:y.recommendations.map((D,M)=>g.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-700",children:[g.jsxs("span",{className:"text-violet-800 font-semibold",children:[M+1,"."]}),g.jsx("span",{children:D})]},M))})]})]}),g.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[g.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"⚠️ 약점으로 인한 어려움"}),g.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"현재 문해력 수준에서 겪을 수 있는 구체적인 어려움입니다."}),g.jsx("div",{className:"space-y-3",children:S().map((D,M)=>g.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-2",children:D.title}),g.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:D.description})]},M))})]})]}),g.jsxs("div",{className:"print-page-3",children:[P&&P.length>0&&g.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 page-break",children:[g.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"📝 독서 태도 및 환경 분석"}),g.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"설문 조사 결과를 바탕으로 독서 동기, 습관, 환경을 분석했습니다."}),g.jsxs("div",{className:"mb-6",children:[g.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"영역별 점수 (5점 만점)"}),g.jsx("div",{className:"space-y-3",children:P.map((D,M)=>g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-center mb-1",children:[g.jsx("span",{className:"text-sm font-medium text-gray-900",children:D.name}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("div",{className:"text-xs text-gray-600",children:[D.score," / 5.0"]}),g.jsx("div",{className:`text-sm font-bold min-w-[50px] text-right ${D.score>=4?"text-green-700":D.score>=3?"text-blue-700":"text-orange-700"}`,children:D.score>=4?"우수":D.score>=3?"양호":"노력"})]})]}),g.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:g.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${D.score>=3?"bg-violet-600":"bg-red-800"}`,style:{width:`${D.score/5*100}%`}})})]},M))})]}),g.jsx("div",{className:"grid grid-cols-1 gap-4",children:P.map((D,M)=>g.jsx("div",{className:"bg-gradient-to-r from-violet-50 to-blue-50 rounded-lg p-4 border border-violet-200",children:g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("span",{className:"text-2xl",children:D.score>=4?"🌟":D.score>=3?"📚":"💪"}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-2",children:D.name}),g.jsxs("div",{className:"bg-white rounded p-3 mb-2 border border-gray-200",children:[g.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-1",children:"📊 분석"}),g.jsx("div",{className:"text-xs text-gray-700 leading-relaxed",children:D.analysis})]}),g.jsxs("div",{className:"bg-white rounded p-3 border border-violet-300",children:[g.jsx("div",{className:"text-xs font-semibold text-violet-900 mb-1",children:"💡 맞춤 조언"}),g.jsx("div",{className:"text-xs text-gray-700 leading-relaxed",children:D.recommendation})]})]})]})},M))})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.result.weaknesses.length>0&&g.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[g.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"📈 개선 포인트"}),g.jsx("ul",{className:"space-y-3",children:n.result.weaknesses.map((D,M)=>g.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[g.jsx("span",{className:"text-gray-500 mt-0.5",children:"→"}),g.jsx("span",{children:D})]},M))})]}),n.result.recommendations.length>0&&g.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[g.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"💡 학습 가이드"}),g.jsx("div",{className:"space-y-3",children:n.result.recommendations.map((D,M)=>g.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-700",children:[g.jsx("span",{className:"text-violet-800 font-semibold",children:M+1}),g.jsx("span",{children:D})]},M))})]})]}),n.answers&&n.answers.length>0&&g.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[g.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"✍️ 서술형 피드백"}),g.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"틀린 서술형 문제에 대한 분석입니다."}),g.jsx("div",{className:"space-y-4",children:n.answers.map((D,M)=>g.jsx("div",{className:"bg-violet-50 rounded-lg p-4 border border-violet-200",children:g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("span",{className:"text-2xl",children:"💡"}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"text-sm font-semibold text-gray-900 mb-2",children:["문제 ",D.questionNumber,"번 - ",C(D.question.category)]}),D.question.passage&&g.jsxs("div",{className:"text-xs text-gray-700 mb-2 bg-white rounded p-2 border border-gray-200",children:[g.jsx("span",{className:"font-semibold",children:"지문:"}),g.jsx("p",{className:"mt-1 whitespace-pre-wrap",children:D.question.passage})]}),g.jsxs("div",{className:"text-xs text-gray-700 mb-2 bg-white rounded p-2 border border-gray-200",children:[g.jsx("span",{className:"font-semibold",children:"질문:"})," ",D.question.questionText]}),g.jsxs("div",{className:"text-xs text-gray-700 mb-1",children:[g.jsxs("span",{className:"font-semibold",children:[n.student.name," 학생 답변:"]})," ",D.studentAnswer||"(미응답)"]}),g.jsxs("div",{className:"text-xs text-gray-700 mb-2",children:[g.jsx("span",{className:"font-semibold",children:"정답 예시:"})," ",D.question.correctAnswer]}),D.feedback&&g.jsxs("div",{className:"bg-white rounded p-3 border border-violet-300",children:[g.jsx("div",{className:"text-xs font-semibold text-violet-900 mb-1",children:"선생님 피드백"}),g.jsx("div",{className:"text-xs text-gray-700 leading-relaxed",children:D.feedback.replace(/학생/g,`${n.student.name} 학생`)})]})]})]})},M))})]})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4 no-print",children:[g.jsx("button",{onClick:u,className:"px-8 py-3 bg-white text-violet-800 rounded-lg font-semibold hover:bg-violet-50 transition-colors shadow-sm border-2 border-violet-800",children:"🔗 학부모에게 URL 공유"}),g.jsx("button",{onClick:()=>window.print(),className:"px-8 py-3 bg-white text-violet-800 rounded-lg font-semibold hover:bg-violet-50 transition-colors shadow-sm border-2 border-violet-800",children:"📄 인쇄하기"}),g.jsx("button",{onClick:()=>e("/dashboard"),className:"px-8 py-3 bg-violet-800 text-white rounded-lg font-semibold hover:bg-violet-800 transition-colors shadow-sm",children:"대시보드로 돌아가기"})]})]})]})},Rme=()=>{const[t,e]=z.useState([]),[n,r]=z.useState(null),[s,i]=z.useState(!1),[o,a]=z.useState(!1),[l,c]=z.useState(!1),[u,A]=z.useState(!1),[d,f]=z.useState(""),[h,p]=z.useState(""),[m,y]=z.useState({templateCode:"",questionNumber:1,category:"vocabulary",questionType:"choice",questionText:"",passage:"",imageUrl:"",options:["","","",""],correctAnswer:"",points:10,difficulty:"medium",explanation:""});z.useEffect(()=>{x()},[d,h]);const x=async()=>{try{c(!0);const S={};if(d){const k=parseInt(d);k<=6?S.templateCode=`ELEM${d}-V1`:S.templateCode=`MIDDLE${k-6}-V1`}h&&(S.category=h);const N=await bt.get("/api/v1/admin/questions",{params:{...S,limit:1e3}});e(N.data.data.questions)}catch(S){console.error("문항 조회 실패:",S),alert("문항을 불러오는데 실패했습니다.")}finally{c(!1)}},v=S=>{r(S),i(!0)},b=async()=>{if(n)try{await bt.put(`/api/v1/admin/questions/${n.id}`,n),alert("문항이 수정되었습니다."),i(!1),r(null),x()}catch(S){console.error("문항 수정 실패:",S),alert("문항 수정에 실패했습니다.")}},w=async S=>{var N,k;if(confirm("정말 이 문항을 삭제하시겠습니까?"))try{await bt.delete(`/api/v1/admin/questions/${S}`),alert("문항이 삭제되었습니다."),x()}catch(O){console.error("문항 삭제 실패:",O),alert(((k=(N=O.response)==null?void 0:N.data)==null?void 0:k.message)||"문항 삭제에 실패했습니다.")}},C=async(S,N=!1)=>{var k,O;if(console.log("=== Frontend Image Upload ==="),console.log("File info:",{name:S.name,type:S.type,size:S.size,isEdit:N}),!S.type.match(/^image\/(png|jpeg|jpg)$/)){alert("PNG 또는 JPEG 형식의 이미지만 업로드 가능합니다.");return}if(S.size>5*1024*1024){alert("이미지 크기는 5MB 이하여야 합니다.");return}try{A(!0);const U=new FormData;U.append("image",S),console.log("Sending FormData to /api/v1/admin/questions/upload-image");const P=await bt.post("/api/v1/admin/questions/upload-image",U,{headers:{"Content-Type":"multipart/form-data"}});console.log("Upload response:",P.data);const V=P.data.data.imageUrl;console.log("Image URL received:",V),N&&n?(console.log("Updating selectedQuestion with imageUrl"),r({...n,imageUrl:V})):(console.log("Updating newQuestion with imageUrl"),y({...m,imageUrl:V})),alert(`✅ 이미지가 업로드되었습니다.

이미지 URL: `+V)}catch(U){console.error("이미지 업로드 실패:",U),console.error("Error response:",U.response),alert(((O=(k=U.response)==null?void 0:k.data)==null?void 0:O.message)||"이미지 업로드에 실패했습니다.")}finally{A(!1)}},B=async()=>{var S,N;if(!m.templateCode||!m.questionText){alert("템플릿과 문제 텍스트는 필수 항목입니다.");return}if(m.questionType==="choice"&&m.options&&m.options.filter(O=>O.trim()).length<2){alert("객관식은 최소 2개의 선택지가 필요합니다.");return}try{await bt.post("/api/v1/admin/questions",m),alert("새 문항이 생성되었습니다."),a(!1),y({templateCode:"",questionNumber:1,category:"vocabulary",questionType:"choice",questionText:"",passage:"",imageUrl:"",options:["","","",""],correctAnswer:"",points:10,difficulty:"medium",explanation:""}),x()}catch(k){console.error("문항 생성 실패:",k),alert(((N=(S=k.response)==null?void 0:S.data)==null?void 0:N.message)||"문항 생성에 실패했습니다.")}};return g.jsx("div",{className:"min-h-screen bg-background",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"문항 관리"}),g.jsx("button",{onClick:()=>a(!0),className:"px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium shadow-sm",children:"➕ 새 문항 추가"})]}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 mb-6 border border-border",children:g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("select",{value:d,onChange:S=>f(S.target.value),className:"border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[g.jsx("option",{value:"",children:"전체 학년"}),[1,2,3,4,5,6].map(S=>g.jsxs("option",{value:S,children:["초등 ",S,"학년"]},S)),[7,8,9].map(S=>g.jsxs("option",{value:S,children:["중등 ",S-6,"학년"]},S))]}),g.jsxs("select",{value:h,onChange:S=>p(S.target.value),className:"border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[g.jsx("option",{value:"",children:"전체 영역"}),g.jsx("option",{value:"vocabulary",children:"어휘력"}),g.jsx("option",{value:"reading",children:"독해력"}),g.jsx("option",{value:"grammar",children:"문법/어법"}),g.jsx("option",{value:"reasoning",children:"추론/사고력"})]})]})}),l?g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),g.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})]}):g.jsxs("div",{className:"bg-card rounded-lg shadow-md border border-border",children:[g.jsx("div",{className:"px-6 py-3 bg-muted/50 border-b border-border",children:g.jsxs("p",{className:"text-sm text-muted-foreground",children:["전체 ",g.jsx("span",{className:"font-bold text-primary",children:t.length}),"개의 문항"]})}),g.jsx("div",{className:"overflow-auto max-h-[calc(100vh-350px)]",children:g.jsxs("table",{className:"min-w-full divide-y divide-border",children:[g.jsx("thead",{className:"bg-muted sticky top-0 z-10",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"학년"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"문항번호"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"영역"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"문제"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"난이도"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"작업"})]})}),g.jsx("tbody",{className:"bg-card divide-y divide-border",children:t.map(S=>g.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:[S.template.grade,"학년"]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:S.questionNumber}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:S.category}),g.jsx("td",{className:"px-6 py-4",children:g.jsx("div",{className:"max-w-md truncate text-sm text-card-foreground",children:S.questionText})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${S.difficulty==="easy"?"bg-chart-1/20 text-chart-1":S.difficulty==="medium"?"bg-chart-3/20 text-chart-3":"bg-destructive/20 text-destructive"}`,children:S.difficulty==="easy"?"쉬움":S.difficulty==="medium"?"보통":"어려움"})}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[g.jsx("button",{onClick:()=>v(S),className:"text-primary hover:text-primary/80 font-medium mr-4 transition-colors",children:"수정"}),g.jsx("button",{onClick:()=>w(S.id),className:"text-destructive hover:text-destructive/80 font-medium transition-colors",children:"삭제"})]})]},S.id))})]})})]}),s&&n&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-card rounded-lg p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-xl border border-border",children:[g.jsx("h2",{className:"text-2xl font-bold mb-6 text-foreground",children:"문항 수정"}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"문제 번호"}),g.jsx("input",{type:"number",value:n.questionNumber,onChange:S=>r({...n,questionNumber:parseInt(S.target.value)}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"문제 텍스트"}),g.jsx("textarea",{value:n.questionText,onChange:S=>r({...n,questionText:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-3 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",rows:3})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"지문 (선택)"}),g.jsx("textarea",{value:n.passage||"",onChange:S=>r({...n,passage:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-3 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",rows:3})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"이미지 (선택)"}),g.jsxs("div",{className:"space-y-3",children:[n.imageUrl&&g.jsxs("div",{className:"relative inline-block",children:[g.jsx("img",{src:n.imageUrl.startsWith("http")?n.imageUrl:`https://literacy-backend-mdbn.onrender.com${n.imageUrl}`,alt:"문제 이미지",className:"max-w-md max-h-64 rounded-lg border border-border",onError:S=>{console.error("이미지 로드 실패:",n.imageUrl),S.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect fill="%23eee" width="200" height="200"/><text x="50%" y="50%" text-anchor="middle" dy=".3em" fill="%23999">이미지 없음</text></svg>'}}),g.jsx("button",{onClick:()=>r({...n,imageUrl:""}),className:"absolute top-2 right-2 bg-destructive text-destructive-foreground rounded-full p-2 hover:bg-destructive/90 transition-colors shadow-md",children:"✕"})]}),g.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:S=>{var k;const N=(k=S.target.files)==null?void 0:k[0];N&&C(N,!0)},disabled:u,className:"block w-full text-sm text-muted-foreground file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-primary file:text-primary-foreground hover:file:bg-primary/90 file:cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),u&&g.jsx("p",{className:"text-sm text-muted-foreground",children:"이미지 업로드 중..."}),g.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG 또는 JPEG 형식, 최대 5MB"})]})]}),n.questionType==="choice"&&n.options&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-3",children:"선택지"}),g.jsx("div",{className:"space-y-3",children:Array.isArray(n.options)&&n.options.map((S,N)=>g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("span",{className:"font-medium text-muted-foreground w-8",children:[N+1,"."]}),g.jsx("input",{type:"text",value:typeof S=="object"?S.text:S,onChange:k=>{const O=[...n.options];typeof O[N]=="object"?O[N]={...O[N],text:k.target.value}:O[N]=k.target.value,r({...n,options:O})},className:"flex-1 border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:`선택지 ${N+1}`})]},N))})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"정답"}),g.jsx("input",{type:"text",value:n.correctAnswer,onChange:S=>r({...n,correctAnswer:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"카테고리"}),g.jsxs("select",{value:n.category,onChange:S=>r({...n,category:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[g.jsx("option",{value:"vocabulary",children:"어휘력"}),g.jsx("option",{value:"reading",children:"독해력"}),g.jsx("option",{value:"grammar",children:"문법/어법"}),g.jsx("option",{value:"reasoning",children:"추론/사고력"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"난이도"}),g.jsxs("select",{value:n.difficulty,onChange:S=>r({...n,difficulty:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[g.jsx("option",{value:"easy",children:"쉬움"}),g.jsx("option",{value:"medium",children:"보통"}),g.jsx("option",{value:"hard",children:"어려움"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"배점"}),g.jsx("input",{type:"number",value:n.points,onChange:S=>r({...n,points:parseInt(S.target.value)}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"해설"}),g.jsx("textarea",{value:n.explanation||"",onChange:S=>r({...n,explanation:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-3 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",rows:3})]})]}),g.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[g.jsx("button",{onClick:()=>{i(!1),r(null)},className:"px-6 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-foreground font-medium",children:"취소"}),g.jsx("button",{onClick:b,className:"px-6 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium shadow-sm",children:"저장"})]})]})}),o&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-card rounded-lg p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-xl border border-border",children:[g.jsx("h2",{className:"text-2xl font-bold mb-6 text-foreground",children:"새 문항 추가"}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"템플릿 코드 *"}),g.jsxs("select",{value:m.templateCode,onChange:S=>y({...m,templateCode:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[g.jsx("option",{value:"",children:"템플릿 선택"}),[1,2,3,4,5,6].map(S=>g.jsxs("option",{value:`ELEM${S}-V1`,children:["초등 ",S,"학년 (ELEM",S,"-V1)"]},`elem-${S}`)),[7,8,9].map(S=>g.jsxs("option",{value:`MIDDLE${S-6}-V1`,children:["중등 ",S-6,"학년 (MIDDLE",S-6,"-V1)"]},`middle-${S}`))]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"문제 번호 *"}),g.jsx("input",{type:"number",value:m.questionNumber,onChange:S=>y({...m,questionNumber:parseInt(S.target.value)}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"영역 *"}),g.jsxs("select",{value:m.category,onChange:S=>y({...m,category:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[g.jsx("option",{value:"vocabulary",children:"어휘력"}),g.jsx("option",{value:"reading",children:"독해력"}),g.jsx("option",{value:"grammar",children:"문법/어법"}),g.jsx("option",{value:"reasoning",children:"추론/사고력"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"문제 유형 *"}),g.jsxs("select",{value:m.questionType,onChange:S=>y({...m,questionType:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[g.jsx("option",{value:"choice",children:"객관식"}),g.jsx("option",{value:"short_answer",children:"주관식"}),g.jsx("option",{value:"essay",children:"서술형"}),g.jsx("option",{value:"likert_scale",children:"리커트 척도"})]})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"문제 텍스트 *"}),g.jsx("textarea",{value:m.questionText,onChange:S=>y({...m,questionText:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-3 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",rows:3})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"지문 (선택)"}),g.jsx("textarea",{value:m.passage||"",onChange:S=>y({...m,passage:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-3 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",rows:3})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"이미지 (선택)"}),g.jsxs("div",{className:"space-y-3",children:[m.imageUrl&&g.jsxs("div",{className:"relative inline-block",children:[g.jsx("img",{src:m.imageUrl.startsWith("http")?m.imageUrl:`https://literacy-backend-mdbn.onrender.com${m.imageUrl}`,alt:"문제 이미지",className:"max-w-md max-h-64 rounded-lg border border-border",onError:S=>{console.error("이미지 로드 실패:",m.imageUrl),S.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect fill="%23eee" width="200" height="200"/><text x="50%" y="50%" text-anchor="middle" dy=".3em" fill="%23999">이미지 없음</text></svg>'}}),g.jsx("button",{onClick:()=>y({...m,imageUrl:""}),className:"absolute top-2 right-2 bg-destructive text-destructive-foreground rounded-full p-2 hover:bg-destructive/90 transition-colors shadow-md",children:"✕"})]}),g.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:S=>{var k;const N=(k=S.target.files)==null?void 0:k[0];N&&C(N,!1)},disabled:u,className:"block w-full text-sm text-muted-foreground file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-primary file:text-primary-foreground hover:file:bg-primary/90 file:cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),u&&g.jsx("p",{className:"text-sm text-muted-foreground",children:"이미지 업로드 중..."}),g.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG 또는 JPEG 형식, 최대 5MB"})]})]}),m.questionType==="choice"&&m.options&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-3",children:"선택지 *"}),g.jsx("div",{className:"space-y-3",children:m.options.map((S,N)=>g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("span",{className:"font-medium text-muted-foreground w-8",children:[N+1,"."]}),g.jsx("input",{type:"text",value:S,onChange:k=>{const O=[...m.options||[]];O[N]=k.target.value,y({...m,options:O})},className:"flex-1 border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:`선택지 ${N+1}`})]},N))})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"정답 *"}),g.jsx("input",{type:"text",value:m.correctAnswer,onChange:S=>y({...m,correctAnswer:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"객관식은 선택지 번호 (1, 2, 3...), 주관식/서술형은 모범답안"})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"난이도 *"}),g.jsxs("select",{value:m.difficulty,onChange:S=>y({...m,difficulty:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[g.jsx("option",{value:"easy",children:"쉬움"}),g.jsx("option",{value:"medium",children:"보통"}),g.jsx("option",{value:"hard",children:"어려움"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"배점 *"}),g.jsx("input",{type:"number",value:m.points,onChange:S=>y({...m,points:parseInt(S.target.value)}),className:"w-full border border-border rounded-lg px-4 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),g.jsx("div",{})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"해설 (선택)"}),g.jsx("textarea",{value:m.explanation||"",onChange:S=>y({...m,explanation:S.target.value}),className:"w-full border border-border rounded-lg px-4 py-3 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",rows:3})]})]}),g.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[g.jsx("button",{onClick:()=>{a(!1),y({templateCode:"",questionNumber:1,category:"vocabulary",questionType:"choice",questionText:"",passage:"",imageUrl:"",options:["","","",""],correctAnswer:"",points:10,difficulty:"medium",explanation:""})},className:"px-6 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-foreground font-medium",children:"취소"}),g.jsx("button",{onClick:B,className:"px-6 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium shadow-sm",children:"생성"})]})]})})]})})};Xp.register(Hy,zy,Sh,nl,Ch,d_,f_,A_);const Pme=()=>{const[t,e]=z.useState([]),[n,r]=z.useState([]),[s,i]=z.useState(!0),[o,a]=z.useState("all"),[l,c]=z.useState("all"),[u,A]=z.useState("correctRate"),[d,f]=z.useState("asc"),[h,p]=z.useState(null),[m,y]=z.useState(!1);z.useEffect(()=>{x()},[]);const x=async()=>{var S,N;try{i(!0);const[k,O]=await Promise.all([bt.get("/api/v1/admin/question-analytics"),bt.get("/api/v1/admin/question-analytics/templates")]);console.log("Questions response:",k.data),console.log("Templates response:",O.data),e(k.data.data||[]),r(O.data.data||[])}catch(k){console.error("Failed to fetch analytics:",k),console.error("Error details:",(S=k.response)==null?void 0:S.data),console.error("Error status:",(N=k.response)==null?void 0:N.status),e([]),r([]),alert("데이터를 불러오는데 실패했습니다. 콘솔을 확인해주세요.")}finally{i(!1)}},v=S=>{const N={excellent:{bg:"bg-green-100",text:"text-green-800",label:"우수"},good:{bg:"bg-blue-100",text:"text-blue-800",label:"양호"},review:{bg:"bg-yellow-100",text:"text-yellow-800",label:"검토"},revise:{bg:"bg-red-100",text:"text-red-800",label:"수정필요"},insufficient:{bg:"bg-gray-100",text:"text-gray-800",label:"응시수 부족"}},k=N[S]||N.good;return g.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k.bg} ${k.text}`,children:k.label})},b=S=>({vocabulary:"어휘력",reading:"독해력",grammar:"문법/어법",reasoning:"추론/사고력"})[S]||S,w=t.filter(S=>o==="all"||S.templateCode===o).filter(S=>l==="all"||S.qualityFlag===l).sort((S,N)=>{let k,O;return u==="attempts"?(k=S.totalAttempts,O=N.totalAttempts):u==="correctRate"?(k=S.correctRate,O=N.correctRate):(k=S.discrimination,O=N.discrimination),d==="asc"?k-O:O-k}),C={excellent:0,good:0,review:0,revise:0,insufficient:0};t.forEach(S=>{C[S.qualityFlag]++});const B={labels:["우수","양호","검토","수정필요","응시수 부족"],datasets:[{label:"문항 수",data:[C.excellent,C.good,C.review,C.revise,C.insufficient],backgroundColor:["#10b981","#3b82f6","#f59e0b","#ef4444","#9ca3af"]}]};return s?g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),g.jsx("div",{className:"text-xl text-muted-foreground",children:"데이터 로딩 중..."})]})}):g.jsxs("div",{className:"min-h-screen bg-background",children:[g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:"mb-8",children:[g.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"📊 문항 품질 분석"}),g.jsx("p",{className:"text-muted-foreground",children:"문항별 통계 데이터를 기반으로 품질을 분석하고 개선점을 확인하세요."})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[g.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:[g.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"전체 문항 수"}),g.jsx("div",{className:"text-3xl font-bold text-foreground",children:t.length})]}),g.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:[g.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"평균 정답률"}),g.jsxs("div",{className:"text-3xl font-bold text-chart-1",children:[t.length>0?(t.reduce((S,N)=>S+N.correctRate,0)/t.length).toFixed(1):0,"%"]})]}),g.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:[g.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"평균 변별도"}),g.jsx("div",{className:"text-3xl font-bold text-chart-2",children:t.length>0?(t.reduce((S,N)=>S+N.discrimination,0)/t.length).toFixed(2):0})]}),g.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:[g.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"수정 필요"}),g.jsx("div",{className:"text-3xl font-bold text-destructive",children:t.filter(S=>S.qualityFlag==="revise").length})]})]}),g.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border mb-8",children:[g.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"품질 분포"}),g.jsx("div",{className:"h-64",children:g.jsx(Hw,{data:B,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})})]}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-4 sm:p-6 border border-border mb-6",children:g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"테스트 템플릿"}),g.jsxs("select",{value:o,onChange:S=>a(S.target.value),className:"w-full border border-border rounded-lg px-3 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[g.jsx("option",{value:"all",children:"전체"}),n.map(S=>g.jsx("option",{value:S.templateCode,children:S.title},S.templateCode))]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"품질 필터"}),g.jsxs("select",{value:l,onChange:S=>c(S.target.value),className:"w-full border border-border rounded-lg px-3 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[g.jsx("option",{value:"all",children:"전체"}),g.jsx("option",{value:"excellent",children:"우수"}),g.jsx("option",{value:"good",children:"양호"}),g.jsx("option",{value:"review",children:"검토"}),g.jsx("option",{value:"revise",children:"수정필요"}),g.jsx("option",{value:"insufficient",children:"응시수 부족"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"정렬 기준"}),g.jsxs("select",{value:u,onChange:S=>A(S.target.value),className:"w-full border border-border rounded-lg px-3 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[g.jsx("option",{value:"correctRate",children:"정답률"}),g.jsx("option",{value:"discrimination",children:"변별도"}),g.jsx("option",{value:"attempts",children:"응시 횟수"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"정렬 순서"}),g.jsxs("select",{value:d,onChange:S=>f(S.target.value),className:"w-full border border-border rounded-lg px-3 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[g.jsx("option",{value:"asc",children:"오름차순"}),g.jsx("option",{value:"desc",children:"내림차순"})]})]})]})}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm border border-border overflow-hidden",children:g.jsx("div",{className:"overflow-x-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:g.jsxs("table",{className:"min-w-full divide-y divide-border",style:{minWidth:"800px"},children:[g.jsx("thead",{className:"bg-muted",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"문항"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"내용"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"영역"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"응시수"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"정답률"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"변별도"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"품질"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"액션"})]})}),g.jsx("tbody",{className:"bg-card divide-y divide-border",children:w.map(S=>g.jsxs("tr",{className:"hover:bg-muted/50",children:[g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-foreground",children:["#",S.questionNumber]}),g.jsx("td",{className:"px-6 py-4 text-sm text-foreground max-w-md truncate",children:S.questionText}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-foreground",children:b(S.category)}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-foreground",children:[S.totalAttempts,"회"]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-foreground",children:g.jsx("div",{className:"flex items-center gap-2",children:g.jsxs("span",{className:`font-semibold ${S.correctRate>=70?"text-green-600":S.correctRate>=40?"text-yellow-600":"text-red-600"}`,children:[S.correctRate.toFixed(1),"%"]})})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-foreground",children:S.totalAttempts<30?g.jsx("span",{className:"text-gray-500 text-xs",children:"(응시수 부족)"}):g.jsx("span",{className:`font-semibold ${S.discrimination>=.4?"text-green-600":S.discrimination>=.2?"text-yellow-600":"text-red-600"}`,children:S.discrimination.toFixed(2)})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v(S.qualityFlag)}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:g.jsx("button",{onClick:()=>{p(S),y(!0)},className:"text-primary hover:text-primary/80 font-medium",children:"상세보기"})})]},S.id))})]})})}),g.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"📖 품질 지표 설명"}),g.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[g.jsxs("div",{children:[g.jsx("strong",{children:"정답률:"})," 해당 문항을 맞춘 학생의 비율. 90% 이상이면 너무 쉽고, 10% 이하면 너무 어렵습니다."]}),g.jsxs("div",{children:[g.jsx("strong",{children:"변별도:"})," 상위권과 하위권 학생의 정답률 차이. 0.4 이상이면 우수, 0.2 미만이면 변별력이 낮습니다."]}),g.jsxs("div",{children:[g.jsx("strong",{children:"품질 플래그:"}),g.jsxs("ul",{className:"ml-6 mt-1 space-y-1",children:[g.jsx("li",{children:"• 우수: 정답률 40-80%, 변별도 0.4 이상"}),g.jsx("li",{children:"• 양호: 정답률 30-90%, 변별도 0.2 이상"}),g.jsx("li",{children:"• 검토: 정답률이 너무 높거나(90% 이상) 낮음(30% 이하)"}),g.jsx("li",{children:"• 수정필요: 변별도 0.2 미만 또는 극단적 정답률(10% 이하, 95% 이상)"})]})]})]})]})]}),m&&h&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:g.jsxs("div",{className:"bg-card rounded-lg shadow-xl max-w-4xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:[g.jsxs("div",{className:"sticky top-0 bg-card border-b border-border px-4 sm:px-6 py-3 sm:py-4 flex items-center justify-between",children:[g.jsxs("h2",{className:"text-lg sm:text-2xl font-bold text-foreground",children:["문항 #",h.questionNumber," 상세"]}),g.jsx("button",{onClick:()=>y(!1),className:"text-muted-foreground hover:text-foreground text-2xl",children:"×"})]}),g.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[g.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[g.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"문항 내용"}),g.jsx("p",{className:"text-foreground",children:h.questionText}),g.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm text-muted-foreground",children:[g.jsxs("span",{children:["영역: ",b(h.category)]}),g.jsxs("span",{children:["난이도: ",h.difficulty]}),g.jsxs("span",{children:["템플릿: ",h.templateTitle]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[g.jsx("div",{className:"text-sm text-blue-600 mb-1",children:"총 응시 횟수"}),g.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[h.totalAttempts,"회"]})]}),g.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[g.jsx("div",{className:"text-sm text-green-600 mb-1",children:"정답률"}),g.jsxs("div",{className:"text-2xl font-bold text-green-900",children:[h.correctRate.toFixed(1),"%"]}),g.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[h.correctAttempts,"/",h.totalAttempts," 정답"]})]}),g.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[g.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"변별도"}),g.jsx("div",{className:"text-2xl font-bold text-purple-900",children:h.discrimination.toFixed(2)})]})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"text-sm font-medium text-foreground",children:"품질 평가:"}),v(h.qualityFlag)]}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"집단별 성취도"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[g.jsx("div",{className:"text-sm text-green-600 mb-1",children:"상위 27% 학생"}),g.jsxs("div",{className:"text-xl font-bold text-green-900",children:[h.topStudentsCorrectRate.toFixed(1),"%"]})]}),g.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[g.jsx("div",{className:"text-sm text-orange-600 mb-1",children:"하위 27% 학생"}),g.jsxs("div",{className:"text-xl font-bold text-orange-900",children:[h.bottomStudentsCorrectRate.toFixed(1),"%"]})]})]}),g.jsxs("div",{className:"mt-3 text-sm text-muted-foreground",children:["💡 변별도 = (상위집단 정답률 - 하위집단 정답률) = ",h.discrimination.toFixed(2)]})]}),h.commonWrongAnswers.length>0&&g.jsxs("div",{children:[g.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"많이 틀린 오답 (Top 5)"}),g.jsx("div",{className:"space-y-2",children:h.commonWrongAnswers.map((S,N)=>g.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("span",{className:"font-medium text-red-900",children:S.answer}),g.jsxs("span",{className:"text-sm text-red-600 ml-2",children:["(",S.count,"명)"]})]}),g.jsxs("div",{className:"text-sm font-semibold text-red-700",children:[S.percentage.toFixed(1),"%"]})]},N))})]}),h.lastUsed&&g.jsxs("div",{className:"text-sm text-muted-foreground",children:["최근 사용: ",new Date(h.lastUsed).toLocaleDateString("ko-KR")]})]}),g.jsx("div",{className:"sticky bottom-0 bg-card border-t border-border px-6 py-4",children:g.jsx("button",{onClick:()=>y(!1),className:"w-full bg-primary text-primary-foreground py-2 px-4 rounded-lg hover:bg-primary/90 font-medium",children:"닫기"})})]})})]})};function Ume(){const{user:t,logout:e}=Wo(),n=Qs(),[r,s]=z.useState(null),[i,o]=z.useState([]),[a,l]=z.useState([]),[c,u]=z.useState(!0);z.useEffect(()=>{A()},[]);const A=async()=>{try{u(!0);const[p,m,y]=await Promise.all([bt.get("/api/v1/admin/dashboard/stats"),bt.get("/api/v1/admin/users/recent?limit=5"),bt.get("/api/v1/admin/stats/by-grade")]);s(p.data.data),o(m.data.data),l(y.data.data)}catch(p){console.error("데이터 조회 실패:",p)}finally{u(!1)}},d=()=>{e(),n("/login")},f=p=>p<=6?`초등 ${p}학년`:`중등 ${p-6}학년`,h=p=>{const m={student:{text:"학생",className:"bg-primary text-primary-foreground"},parent:{text:"학부모",className:"bg-chart-2 text-primary-foreground"},teacher:{text:"교사",className:"bg-chart-3 text-primary-foreground"},admin:{text:"관리자",className:"bg-destructive text-destructive-foreground"}},y=m[p]||m.student;return g.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${y.className}`,children:y.text})};return c?g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),g.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})]})}):g.jsxs("div",{className:"min-h-screen bg-background",children:[g.jsx("header",{className:"bg-card shadow-sm border-b border-border",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 sm:py-4",children:g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-primary",children:"관리자 대시보드"}),g.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:["안녕하세요, ",g.jsx("span",{className:"font-medium text-foreground",children:t==null?void 0:t.name}),"님"]})]}),g.jsx("button",{onClick:d,className:"px-3 sm:px-4 py-1.5 sm:py-2 border border-border rounded-lg hover:bg-muted transition-colors text-card-foreground text-sm",children:"로그아웃"})]})})}),g.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r&&g.jsxs("section",{className:"mb-8",children:[g.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"시스템 현황"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"전체 사용자"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.users.total}),g.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["최근 7일: +",r.users.recentRegistrations]})]}),g.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"👥"})})]})}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"학생"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.users.students}),g.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["학부모: ",r.users.parents]})]}),g.jsx("div",{className:"w-12 h-12 bg-chart-1/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"🎓"})})]})}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"테스트 템플릿"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.templates.total})]}),g.jsx("div",{className:"w-12 h-12 bg-chart-2/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"📝"})})]})}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"총 테스트 세션"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.sessions.total}),g.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["최근 7일: ",r.sessions.recentSessions]})]}),g.jsx("div",{className:"w-12 h-12 bg-chart-3/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"📊"})})]})})]})]}),r&&g.jsxs("section",{className:"mb-8",children:[g.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"테스트 통계"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"완료된 테스트"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.sessions.completed})]}),g.jsx("div",{className:"w-12 h-12 bg-chart-1/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"✅"})})]})}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"채점 완료"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.sessions.scored})]}),g.jsx("div",{className:"w-12 h-12 bg-chart-2/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"💯"})})]})}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"평균 점수"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:r.sessions.averageScore>0?`${r.sessions.averageScore}%`:"-"})]}),g.jsx("div",{className:"w-12 h-12 bg-chart-3/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"🎯"})})]})})]})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[g.jsxs("section",{children:[g.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"최근 가입 사용자"}),i.length===0?g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:g.jsx("p",{className:"text-muted-foreground",children:"최근 가입한 사용자가 없습니다."})}):g.jsx("div",{className:"bg-card rounded-lg shadow-md overflow-hidden border border-border",children:g.jsx("div",{className:"max-h-96 overflow-y-auto",children:g.jsxs("table",{className:"min-w-full divide-y divide-border",children:[g.jsx("thead",{className:"bg-muted sticky top-0",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"이름"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"역할"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"가입일"})]})}),g.jsx("tbody",{className:"bg-card divide-y divide-border",children:i.map(p=>g.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[g.jsx("div",{className:"text-sm font-medium text-card-foreground",children:p.name}),g.jsx("div",{className:"text-xs text-muted-foreground",children:p.email})]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h(p.role)}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:new Date(p.createdAt).toLocaleDateString("ko-KR")})]},p.id))})]})})})]}),g.jsxs("section",{children:[g.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"학년별 통계"}),a.length===0?g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:g.jsx("p",{className:"text-muted-foreground",children:"학년별 통계 데이터가 없습니다."})}):g.jsx("div",{className:"bg-card rounded-lg shadow-md overflow-hidden border border-border",children:g.jsxs("table",{className:"min-w-full divide-y divide-border",children:[g.jsx("thead",{className:"bg-muted",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"학년"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"학생 수"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"완료 테스트"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"평균 점수"})]})}),g.jsx("tbody",{className:"bg-card divide-y divide-border",children:a.map(p=>g.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"text-sm font-medium text-card-foreground",children:f(p.grade)})}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:[p.studentCount,"명"]}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:[p.completedSessions," / ",p.totalSessions]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:p.averageScore>0?`${p.averageScore}%`:"-"})]},p.grade))})]})})]})]}),g.jsxs("section",{className:"mt-8",children:[g.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"빠른 작업"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[g.jsx(Kc,{to:"/admin/questions",className:"bg-card rounded-lg shadow-sm p-6 border border-border hover:border-primary transition-colors",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"📚"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-semibold text-foreground",children:"문항 관리"}),g.jsx("p",{className:"text-sm text-muted-foreground",children:"문항 추가 및 수정"})]})]})}),g.jsx(Kc,{to:"/admin/question-analytics",className:"bg-card rounded-lg shadow-sm p-6 border border-border hover:border-primary transition-colors",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-violet-100 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"📊"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-semibold text-foreground",children:"문항 품질 분석"}),g.jsx("p",{className:"text-sm text-muted-foreground",children:"정답률 및 변별도 분석"})]})]})}),g.jsx(Kc,{to:"/admin/grading",className:"bg-card rounded-lg shadow-sm p-6 border border-border hover:border-primary transition-colors",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-chart-1/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"✅"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-semibold text-foreground",children:"채점 관리"}),g.jsx("p",{className:"text-sm text-muted-foreground",children:"자동 채점 및 관리"})]})]})}),g.jsx(Kc,{to:"/admin/bulk-upload",className:"bg-card rounded-lg shadow-sm p-6 border border-border hover:border-primary transition-colors",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-chart-2/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"📤"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-semibold text-foreground",children:"대량 업로드"}),g.jsx("p",{className:"text-sm text-muted-foreground",children:"엑셀로 학생 데이터 일괄 등록"})]})]})}),g.jsx(Kc,{to:"/admin/reports",className:"bg-card rounded-lg shadow-sm p-6 border border-border hover:border-primary transition-colors",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-chart-3/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"📊"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-semibold text-foreground",children:"학생 리포트"}),g.jsx("p",{className:"text-sm text-muted-foreground",children:"학생별 상세 리포트 조회"})]})]})}),g.jsx(Kc,{to:"/admin/users",className:"bg-card rounded-lg shadow-sm p-6 border border-border hover:border-primary transition-colors",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"👥"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-semibold text-foreground",children:"전체 회원 관리"}),g.jsx("p",{className:"text-sm text-muted-foreground",children:"사용자 정보 조회 및 수정"})]})]})}),g.jsx("button",{onClick:A,className:"bg-card rounded-lg shadow-sm p-6 border border-border hover:border-primary transition-colors text-left",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-chart-4/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"🔄"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-semibold text-foreground",children:"통계 새로고침"}),g.jsx("p",{className:"text-sm text-muted-foreground",children:"최신 데이터 불러오기"})]})]})})]})]})]})]})}function Lme(){const{user:t,logout:e}=Wo(),n=Qs(),[r,s]=z.useState([]),[i,o]=z.useState(null),[a,l]=z.useState(!0),[c,u]=z.useState(!1);z.useEffect(()=>{A()},[]);const A=async()=>{try{l(!0);const p=await bt.get("/api/v1/admin/grading/sessions/pending");s(p.data.data)}catch(p){console.error("채점 대기 세션 조회 실패:",p)}finally{l(!1)}},d=async p=>{var m,y;if(confirm("자동 채점을 진행하시겠습니까? AI가 서술형 문제를 채점합니다."))try{u(!0);const x=await bt.post(`/api/v1/admin/grading/sessions/${p}/auto-grade`);alert(`채점 완료!
총점: ${x.data.data.totalScore}점
정답률: ${x.data.data.percentage.toFixed(1)}%`),A(),o(null)}catch(x){console.error("자동 채점 실패:",x),alert(((y=(m=x.response)==null?void 0:m.data)==null?void 0:y.message)||"자동 채점에 실패했습니다.")}finally{u(!1)}},f=p=>p<=6?`초등 ${p}학년`:`중등 ${p-6}학년`,h=()=>{e(),n("/login")};return a?g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),g.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})]})}):g.jsxs("div",{className:"min-h-screen bg-background",children:[g.jsx("header",{className:"bg-card shadow-sm border-b border-border",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold text-primary",children:"채점 관리"}),g.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["완료된 테스트를 채점하세요 - ",g.jsx("span",{className:"font-medium text-foreground",children:t==null?void 0:t.name}),"님"]})]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:()=>n("/admin/dashboard"),className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-card-foreground",children:"대시보드"}),g.jsx("button",{onClick:h,className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-card-foreground",children:"로그아웃"})]})]})})}),g.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.length===0?g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:g.jsx("p",{className:"text-muted-foreground",children:"채점 대기 중인 테스트가 없습니다."})}):g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[g.jsxs("section",{children:[g.jsxs("h2",{className:"text-xl font-bold mb-4 text-foreground",children:["채점 대기 목록 (",r.length,")"]}),g.jsx("div",{className:"space-y-4",children:r.map(p=>g.jsxs("div",{onClick:()=>o(p),className:`bg-card rounded-lg shadow-sm p-6 border cursor-pointer transition-all ${(i==null?void 0:i.id)===p.id?"border-primary ring-2 ring-primary/20":"border-border hover:border-primary/50"}`,children:[g.jsxs("div",{className:"flex items-start justify-between mb-3",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"font-semibold text-foreground",children:p.student.user.name}),g.jsx("p",{className:"text-xs text-muted-foreground",children:p.student.user.email})]}),g.jsx("span",{className:"px-3 py-1 bg-accent text-accent-foreground rounded-full text-xs font-medium",children:f(p.template.grade)})]}),g.jsxs("div",{className:"space-y-1 text-sm",children:[g.jsxs("p",{className:"text-muted-foreground",children:[g.jsx("span",{className:"font-medium",children:"테스트:"})," ",p.template.title]}),g.jsxs("p",{className:"text-muted-foreground",children:[g.jsx("span",{className:"font-medium",children:"완료 시간:"})," ",new Date(p.completedAt).toLocaleString("ko-KR")]}),g.jsxs("p",{className:"text-muted-foreground",children:[g.jsx("span",{className:"font-medium",children:"문항 수:"})," ",p.answers.length,"문제"]})]})]},p.id))})]}),i&&g.jsx("section",{children:g.jsxs("div",{className:"sticky top-4",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-xl font-bold text-foreground",children:"답안 상세"}),g.jsx("button",{onClick:()=>d(i.id),disabled:c,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"채점 중...":"🤖 자동 채점"})]}),g.jsxs("div",{className:"bg-card rounded-lg shadow-sm border border-border max-h-[calc(100vh-12rem)] overflow-y-auto",children:[g.jsxs("div",{className:"p-6 border-b border-border bg-muted/50",children:[g.jsx("h3",{className:"font-semibold text-foreground mb-2",children:i.template.title}),g.jsxs("p",{className:"text-sm text-muted-foreground",children:["학생: ",i.student.user.name," (",f(i.template.grade),")"]})]}),g.jsx("div",{className:"divide-y divide-border",children:i.answers.map(p=>g.jsxs("div",{className:"p-6",children:[g.jsxs("div",{className:"flex items-start justify-between mb-3",children:[g.jsxs("h4",{className:"font-medium text-foreground",children:["문제 ",p.questionNumber,"번",g.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:["(",p.question.points,"점)"]})]}),g.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${p.question.questionType==="multiple-choice"?"bg-chart-1/10 text-chart-1":"bg-chart-2/10 text-chart-2"}`,children:p.question.questionType==="multiple-choice"?"객관식":"주관식"})]}),g.jsxs("div",{className:"space-y-3 text-sm",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-muted-foreground font-medium mb-1",children:"문제:"}),g.jsx("p",{className:"text-foreground",children:p.question.questionText})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-muted-foreground font-medium mb-1",children:"모범 답안:"}),g.jsx("p",{className:"text-foreground bg-muted/50 p-2 rounded",children:p.question.correctAnswer})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-muted-foreground font-medium mb-1",children:"학생 답안:"}),g.jsx("p",{className:"text-foreground bg-primary/5 p-2 rounded border border-primary/20",children:p.studentAnswer})]})]})]},p.id))})]})]})})]})})]})}const jme=()=>{const[t,e]=z.useState(null),[n,r]=z.useState(!1),[s,i]=z.useState(!1),[o,a]=z.useState([]),[l,c]=z.useState(""),u=async()=>{var f,h;try{i(!0);const p=await bt.get("/api/v1/admin/bulk-upload/template",{responseType:"blob"}),m=window.URL.createObjectURL(new Blob([p.data])),y=document.createElement("a");y.href=m,y.setAttribute("download","literacy_test_universal_template.xlsx"),document.body.appendChild(y),y.click(),y.remove(),window.URL.revokeObjectURL(m)}catch(p){console.error("템플릿 다운로드 실패:",p),alert(((h=(f=p.response)==null?void 0:f.data)==null?void 0:h.message)||"템플릿 다운로드에 실패했습니다.")}finally{i(!1)}},A=f=>{f.target.files&&f.target.files[0]&&(e(f.target.files[0]),c(""))},d=async()=>{var f,h;if(!t){c("파일을 선택하세요.");return}try{r(!0),c(""),a([]);const p=new FormData;p.append("file",t);const m=await bt.post("/api/v1/admin/bulk-upload/upload",p,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5});a(m.data.results),alert(`업로드 성공! ${m.data.results.length}명의 학생 데이터가 생성되었습니다.`),e(null)}catch(p){console.error("업로드 실패:",p),c(((h=(f=p.response)==null?void 0:f.data)==null?void 0:h.message)||"업로드에 실패했습니다.")}finally{r(!1)}};return g.jsx("div",{className:"min-h-screen bg-background",children:g.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsx("h1",{className:"text-3xl font-bold mb-6 text-foreground",children:"학생 데이터 대량 업로드"}),g.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 mb-6 border border-border",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-foreground",children:"1. 통합 엑셀 템플릿 다운로드"}),g.jsx("div",{className:"mb-4",children:g.jsx("button",{onClick:u,disabled:s,className:"w-full px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:s?"다운로드 중...":"📥 통합 템플릿 다운로드"})}),g.jsxs("div",{className:"bg-muted/30 rounded-lg p-4 space-y-2",children:[g.jsx("p",{className:"text-sm text-foreground font-medium",children:"✨ 통합 템플릿 특징:"}),g.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4",children:[g.jsx("li",{children:"• 한 파일로 모든 학년 학생 데이터 입력 가능"}),g.jsx("li",{children:"• 각 행에 학년과 템플릿코드를 입력하여 여러 학년을 한번에 처리"}),g.jsx("li",{children:"• 최대 50개 문항까지 지원 (Q1~Q50)"}),g.jsx("li",{children:"• 사용 안내 시트 포함"})]}),g.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"템플릿 코드: ELEM1-V1 ~ ELEM6-V1 (초등 1~6학년), MIDDLE1-V1 ~ MIDDLE3-V1 (중등 1~3학년)"})]})]}),g.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 mb-6 border border-border",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-foreground",children:"2. 작성한 엑셀 파일 업로드"}),g.jsxs("div",{className:"mb-4",children:[g.jsx("input",{type:"file",accept:".xlsx, .xls",onChange:A,className:"block w-full text-sm text-foreground file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-primary file:text-primary-foreground hover:file:bg-primary/90 file:cursor-pointer border border-border rounded-lg"}),t&&g.jsxs("p",{className:"mt-2 text-sm text-muted-foreground",children:["선택된 파일: ",t.name]})]}),l&&g.jsx("div",{className:"mb-4 p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:g.jsx("p",{className:"text-destructive text-sm",children:l})}),g.jsx("button",{onClick:d,disabled:!t||n,className:"w-full px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:n?"업로드 중...":"📤 업로드 및 자동 채점 시작"}),g.jsx("p",{className:"mt-2 text-xs text-muted-foreground text-center",children:"* 주관식/서술형은 AI(GPT-4o-mini)가 자동 채점합니다"})]}),o.length>0&&g.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-foreground",children:"업로드 결과"}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"min-w-full divide-y divide-border",children:[g.jsx("thead",{className:"bg-muted",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase",children:"행"}),g.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase",children:"학생명"}),g.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase",children:"이메일"}),g.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase",children:"점수"}),g.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase",children:"상태"})]})}),g.jsx("tbody",{className:"bg-card divide-y divide-border",children:o.map((f,h)=>g.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[g.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-card-foreground",children:f.row}),g.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-card-foreground",children:f.studentName}),g.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-card-foreground",children:f.studentEmail}),g.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-card-foreground",children:f.score}),g.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:g.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${f.status==="success"?"bg-chart-1/20 text-chart-1":"bg-destructive/20 text-destructive"}`,children:f.status==="success"?"성공":"실패"})})]},h))})]})})]})]})})},Mme=()=>{const[t,e]=z.useState([]),[n,r]=z.useState(null),[s,i]=z.useState(!1),[o,a]=z.useState(!1);z.useEffect(()=>{l()},[]);const l=async()=>{try{i(!0);const d=await bt.get("/api/v1/admin/reports/sessions");e(d.data.data)}catch(d){console.error("세션 목록 조회 실패:",d),alert("세션 목록을 불러오는데 실패했습니다.")}finally{i(!1)}},c=async d=>{try{a(!0);const f=await bt.get(`/api/v1/admin/reports/sessions/${d}`);r(f.data.data)}catch(f){console.error("리포트 조회 실패:",f),alert("리포트를 불러오는데 실패했습니다.")}finally{a(!1)}},u=d=>({vocabulary:"어휘력",reading:"독해력",grammar:"문법/어법",reasoning:"추론/사고력",reading_motivation:"독서 동기",writing_motivation:"쓰기 동기",reading_environment:"독서 환경",reading_habit:"독서 습관",reading_preference:"독서 선호도"})[d]||d,A=d=>`${d}등급`;return g.jsx("div",{className:"min-h-screen bg-background",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsx("h1",{className:"text-3xl font-bold mb-6 text-foreground",children:"학생 리포트"}),s?g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),g.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})]}):g.jsx("div",{className:"bg-card rounded-lg shadow-md overflow-hidden border border-border mb-6",children:g.jsx("div",{className:"overflow-x-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:g.jsxs("table",{className:"w-full divide-y divide-border",children:[g.jsx("thead",{className:"bg-muted",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"학생명"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"이메일"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"학년"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"템플릿"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"점수"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"등급"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"응시 일시"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"작업"})]})}),g.jsx("tbody",{className:"bg-card divide-y divide-border",children:t.map(d=>{var f;return g.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:d.studentName}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:d.studentEmail}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:[d.grade,"학년"]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:d.templateCode}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:[d.score," (",(f=d.percentage)==null?void 0:f.toFixed(1),"%)"]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${d.gradeLevel<=3?"bg-chart-1/20 text-chart-1":d.gradeLevel<=6?"bg-chart-3/20 text-chart-3":"bg-destructive/20 text-destructive"}`,children:A(d.gradeLevel)})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:d.completedAt?g.jsxs(g.Fragment,{children:[g.jsx("div",{children:new Date(d.completedAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})}),g.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(d.completedAt).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!0})})]}):g.jsx("span",{className:"text-muted-foreground text-xs",children:"일정 데이터 없음"})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:g.jsx("button",{onClick:()=>c(d.id),className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"상세보기"})})]},d.id)})})]})})}),n&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:g.jsx("div",{className:"bg-card rounded-lg p-8 max-w-6xl w-full max-h-[90vh] overflow-y-auto shadow-xl border border-border",children:o?g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),g.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex justify-between items-start mb-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"학생 리포트 상세"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>{n!=null&&n.sessionId&&window.open(`/test/result/${n.sessionId}`,"_blank")},className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium",children:"📄 학생 레포트 보기"}),g.jsx("button",{onClick:()=>{r(null)},className:"text-muted-foreground hover:text-foreground text-2xl font-bold",children:"×"})]})]}),g.jsxs("div",{className:"bg-muted/30 rounded-lg p-6 mb-6",children:[g.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"학생 정보"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("span",{className:"text-muted-foreground text-sm",children:"이름:"}),g.jsx("span",{className:"ml-2 text-foreground font-medium",children:n.student.name})]}),g.jsxs("div",{children:[g.jsx("span",{className:"text-muted-foreground text-sm",children:"이메일:"}),g.jsx("span",{className:"ml-2 text-foreground font-medium",children:n.student.email})]}),g.jsxs("div",{children:[g.jsx("span",{className:"text-muted-foreground text-sm",children:"학년:"}),g.jsxs("span",{className:"ml-2 text-foreground font-medium",children:[n.student.grade,"학년"]})]}),n.student.schoolName&&g.jsxs("div",{children:[g.jsx("span",{className:"text-muted-foreground text-sm",children:"학교:"}),g.jsx("span",{className:"ml-2 text-foreground font-medium",children:n.student.schoolName})]}),g.jsxs("div",{children:[g.jsx("span",{className:"text-muted-foreground text-sm",children:"제출 일시:"}),g.jsxs("span",{className:"ml-2 text-foreground font-medium",children:[new Date(n.test.completedAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})," ",new Date(n.test.completedAt).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!0})]})]})]})]}),g.jsxs("div",{className:"bg-muted/30 rounded-lg p-6 mb-6",children:[g.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"종합 점수"}),g.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[g.jsxs("div",{className:"text-center",children:[g.jsxs("div",{className:"text-3xl font-bold text-primary",children:[n.overall.totalScore,"/",n.overall.totalPossible]}),g.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"총점"})]}),g.jsxs("div",{className:"text-center",children:[g.jsxs("div",{className:"text-3xl font-bold text-chart-3",children:[n.overall.percentage.toFixed(1),"%"]}),g.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"정답률"})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-3xl font-bold text-chart-1",children:A(n.overall.gradeLevel)}),g.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"등급"})]})]})]}),g.jsxs("div",{className:"bg-muted/30 rounded-lg p-6 mb-6",children:[g.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"영역별 점수"}),g.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(n.categoryScores).map(([d,f])=>g.jsxs("div",{className:"flex justify-between items-center p-3 bg-card rounded-lg",children:[g.jsx("span",{className:"font-medium text-foreground",children:u(d)}),g.jsxs("span",{className:"text-muted-foreground",children:[f.earned,"/",f.total," (",(f.earned/f.total*100).toFixed(1),"%)"]})]},d))})]}),g.jsxs("div",{className:"bg-muted/30 rounded-lg p-6",children:[g.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"문항별 상세"}),g.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:n.answers.map(d=>g.jsxs("div",{className:`p-4 rounded-lg border ${d.isCorrect?"border-chart-1/30 bg-chart-1/5":"border-destructive/30 bg-destructive/5"}`,children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsxs("span",{className:"font-semibold text-foreground",children:[d.questionNumber,". ",u(d.category)]}),g.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.isCorrect?"bg-chart-1/20 text-chart-1":"bg-destructive/20 text-destructive"}`,children:[d.isCorrect?"정답":"오답"," (",d.isCorrect?d.totalPoints:d.pointsEarned,"/",d.totalPoints,"점)"]})]}),g.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:d.questionText}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[g.jsxs("div",{children:[g.jsx("span",{className:"text-muted-foreground",children:"학생 답변:"}),g.jsx("span",{className:"ml-2 text-foreground",children:d.studentAnswer||"(미제출)"})]}),g.jsxs("div",{children:[g.jsx("span",{className:"text-muted-foreground",children:"정답:"}),g.jsx("span",{className:"ml-2 text-chart-1",children:d.correctAnswer})]})]}),d.feedback&&g.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:[g.jsx("span",{className:"font-medium",children:"피드백:"})," ",d.feedback]})]},d.questionNumber))})]}),n.surveyResponses&&n.surveyResponses.length>0&&g.jsxs("div",{className:"bg-muted/30 rounded-lg p-6",children:[g.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"설문 응답"}),g.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:n.surveyResponses.map(d=>g.jsxs("div",{className:"p-4 rounded-lg border border-muted bg-background",children:[g.jsx("div",{className:"flex justify-between items-start mb-2",children:g.jsxs("span",{className:"font-semibold text-foreground",children:[d.questionNumber,". ",u(d.category)]})}),g.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:d.questionText}),g.jsxs("div",{className:"text-sm",children:[g.jsx("span",{className:"text-muted-foreground",children:"응답:"}),g.jsx("span",{className:"ml-2 text-foreground font-medium",children:d.response||"(미응답)"})]})]},d.questionNumber))})]})]})})})]})})};function Qme(){const[t,e]=z.useState([]),[n,r]=z.useState(!0),[s,i]=z.useState(null),[o,a]=z.useState({name:"",email:"",phone:""}),[l,c]=z.useState("all"),[u,A]=z.useState(""),[d,f]=z.useState(new Set),[h,p]=z.useState(!1);z.useEffect(()=>{m()},[]);const m=async()=>{try{r(!0);const N=await bt.get("/api/v1/admin/users");e(N.data.data||[])}catch(N){console.error("사용자 목록 조회 실패:",N),alert("사용자 목록을 불러오는데 실패했습니다.")}finally{r(!1)}},y=N=>{var k,O,U;i(N),a({name:N.name,email:N.email,phone:N.phone||"",grade:(k=N.student)==null?void 0:k.grade,schoolName:((O=N.student)==null?void 0:O.schoolName)||"",parentPhone:((U=N.student)==null?void 0:U.parentPhone)||""})},x=async()=>{var N,k;if(s)try{await bt.put(`/api/v1/admin/users/${s.id}`,o),alert("사용자 정보가 수정되었습니다."),i(null),m()}catch(O){console.error("사용자 정보 수정 실패:",O),alert(((k=(N=O.response)==null?void 0:N.data)==null?void 0:k.message)||"사용자 정보 수정에 실패했습니다.")}},v=async N=>{var k,O;if(confirm("정말로 이 사용자를 삭제하시겠습니까?"))try{await bt.delete(`/api/v1/admin/users/${N}`),alert("사용자가 삭제되었습니다."),m()}catch(U){console.error("사용자 삭제 실패:",U),alert(((O=(k=U.response)==null?void 0:k.data)==null?void 0:O.message)||"사용자 삭제에 실패했습니다.")}},b=()=>{if(h)f(new Set);else{const N=new Set(S.map(k=>k.id));f(N)}p(!h)},w=N=>{const k=new Set(d);k.has(N)?k.delete(N):k.add(N),f(k),p(k.size===S.length)},C=async()=>{if(d.size===0){alert("삭제할 사용자를 선택해주세요.");return}if(confirm(`선택한 ${d.size}명의 사용자를 삭제하시겠습니까?`))try{const N=Array.from(d).map(k=>bt.delete(`/api/v1/admin/users/${k}`));await Promise.all(N),alert(`${d.size}명의 사용자가 삭제되었습니다.`),f(new Set),p(!1),m()}catch(N){console.error("일괄 삭제 실패:",N),alert("일부 사용자 삭제에 실패했습니다."),m()}},B=N=>({student:"학생",teacher:"교사",parent:"학부모",admin:"관리자"})[N]||N,S=t.filter(N=>{const k=l==="all"||N.role===l,O=N.name.toLowerCase().includes(u.toLowerCase())||N.email.toLowerCase().includes(u.toLowerCase());return k&&O});return n?g.jsx("div",{className:"flex justify-center items-center h-64",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):g.jsx("div",{className:"min-h-screen bg-background p-4 sm:p-6 lg:p-8",children:g.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:"전체 회원 관리"}),g.jsx("p",{className:"text-muted-foreground mt-2",children:"모든 사용자의 정보를 조회하고 관리합니다."})]}),g.jsx("div",{className:"bg-card rounded-lg shadow p-4 border border-border",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-2",children:"역할 필터"}),g.jsxs("select",{value:l,onChange:N=>c(N.target.value),className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",children:[g.jsx("option",{value:"all",children:"전체"}),g.jsx("option",{value:"student",children:"학생"}),g.jsx("option",{value:"teacher",children:"교사"}),g.jsx("option",{value:"parent",children:"학부모"}),g.jsx("option",{value:"admin",children:"관리자"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-2",children:"검색"}),g.jsx("input",{type:"text",value:u,onChange:N=>A(N.target.value),placeholder:"이름 또는 이메일로 검색",className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground"})]})]})}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{className:"text-sm text-muted-foreground",children:["총 ",S.length,"명의 사용자",d.size>0&&g.jsxs("span",{className:"ml-2 text-primary font-medium",children:["(",d.size,"명 선택됨)"]})]}),d.size>0&&g.jsxs("button",{onClick:C,className:"px-4 py-2 bg-destructive text-destructive-foreground rounded-lg hover:bg-destructive/90 transition-colors font-medium",children:["선택한 회원 삭제 (",d.size,")"]})]}),g.jsx("div",{className:"bg-card rounded-lg shadow overflow-hidden border border-border",children:g.jsx("div",{className:"overflow-x-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:g.jsxs("table",{className:"w-full divide-y divide-border",children:[g.jsx("thead",{className:"bg-muted",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left",children:g.jsx("input",{type:"checkbox",checked:h,onChange:b,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary"})}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"이름"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"이메일"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"역할"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"전화번호"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"추가 정보"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"가입일"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"작업"})]})}),g.jsx("tbody",{className:"bg-card divide-y divide-border",children:S.map(N=>g.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("input",{type:"checkbox",checked:d.has(N.id),onChange:()=>w(N.id),className:"w-4 h-4 text-primary border-border rounded focus:ring-primary"})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"text-sm font-medium text-foreground",children:N.name})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"text-sm text-muted-foreground",children:N.email})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-primary/10 text-primary",children:B(N.role)})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:N.phone||"-"}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:N.student?g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{children:["학년: ",N.student.grade]}),N.student.schoolName&&g.jsxs("div",{children:["학교: ",N.student.schoolName]}),N.student.parentPhone&&g.jsxs("div",{children:["학부모: ",N.student.parentPhone]})]}):"-"}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:new Date(N.createdAt).toLocaleDateString("ko-KR")}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[g.jsx("button",{onClick:()=>y(N),className:"text-primary hover:text-primary/80 transition-colors",children:"수정"}),g.jsx("button",{onClick:()=>v(N.id),className:"text-destructive hover:text-destructive/80 transition-colors",children:"삭제"})]})]},N.id))})]})})}),s&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-card rounded-lg shadow-xl p-6 max-w-md w-full border border-border",children:[g.jsx("h2",{className:"text-xl font-bold text-card-foreground mb-4",children:"사용자 정보 수정"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"이름"}),g.jsx("input",{type:"text",value:o.name,onChange:N=>a({...o,name:N.target.value}),className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"이메일"}),g.jsx("input",{type:"email",value:o.email,onChange:N=>a({...o,email:N.target.value}),className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"전화번호"}),g.jsx("input",{type:"tel",value:o.phone,onChange:N=>a({...o,phone:N.target.value}),className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"010-1234-5678"})]}),s.role==="student"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"학년"}),g.jsxs("select",{value:o.grade,onChange:N=>a({...o,grade:parseInt(N.target.value)}),className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",children:[[1,2,3,4,5,6].map(N=>g.jsxs("option",{value:N,children:["초등 ",N,"학년"]},N)),[7,8,9].map(N=>g.jsxs("option",{value:N,children:["중등 ",N-6,"학년"]},N))]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"학교명"}),g.jsx("input",{type:"text",value:o.schoolName,onChange:N=>a({...o,schoolName:N.target.value}),className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"예: 서울초등학교"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"학부모 휴대폰 번호"}),g.jsx("input",{type:"tel",value:o.parentPhone,onChange:N=>a({...o,parentPhone:N.target.value}),className:"w-full px-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"010-1234-5678"})]})]})]}),g.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[g.jsx("button",{onClick:()=>i(null),className:"px-4 py-2 border border-border rounded-md hover:bg-muted transition-colors text-foreground",children:"취소"}),g.jsx("button",{onClick:x,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:"저장"})]})]})})]})})}function Hme(){const{user:t,logout:e}=Wo(),n=Qs(),[r,s]=z.useState([]),[i,o]=z.useState(null),[a,l]=z.useState(null),[c,u]=z.useState(!0),[A,d]=z.useState(!1);z.useEffect(()=>{f()},[]),z.useEffect(()=>{i&&h(i)},[i]);const f=async()=>{try{u(!0);const b=(await bt.get("/api/v1/parents/me/children")).data.data;s(b),b.length>0&&!i&&o(b[0].id)}catch(v){console.error("자녀 목록 조회 실패:",v)}finally{u(!1)}},h=async v=>{try{d(!0);const b=await bt.get(`/api/v1/parents/children/${v}/stats`);l(b.data.data)}catch(b){console.error("자녀 통계 조회 실패:",b)}finally{d(!1)}},p=()=>{e(),n("/login")},m=v=>v<=6?`초등 ${v}학년`:`중등 ${v-6}학년`,y=v=>{const b={pending:{text:"대기중",className:"bg-muted text-muted-foreground"},in_progress:{text:"진행중",className:"bg-primary text-primary-foreground"},completed:{text:"완료",className:"bg-accent text-accent-foreground"},scored:{text:"채점완료",className:"bg-chart-1 text-primary-foreground"}},w=b[v]||b.pending;return g.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${w.className}`,children:w.text})};if(c)return g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),g.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})]})});if(r.length===0)return g.jsxs("div",{className:"min-h-screen bg-background",children:[g.jsx("header",{className:"bg-card shadow-sm border-b border-border",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold text-primary",children:"학부모 대시보드"}),g.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["안녕하세요, ",g.jsx("span",{className:"font-medium text-foreground",children:t==null?void 0:t.name}),"님"]})]}),g.jsx("button",{onClick:p,className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-card-foreground",children:"로그아웃"})]})})}),g.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:g.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:[g.jsx("p",{className:"text-muted-foreground",children:"등록된 자녀가 없습니다."}),g.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"관리자에게 문의하여 자녀를 등록해 주세요."})]})})]});const x=r.find(v=>v.id===i);return g.jsxs("div",{className:"min-h-screen bg-background",children:[g.jsx("header",{className:"bg-card shadow-sm border-b border-border",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold text-primary",children:"학부모 대시보드"}),g.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["안녕하세요, ",g.jsx("span",{className:"font-medium text-foreground",children:t==null?void 0:t.name}),"님"]})]}),g.jsx("button",{onClick:p,className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-card-foreground",children:"로그아웃"})]})})}),g.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("section",{className:"mb-8",children:[g.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"자녀 선택"}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(v=>g.jsxs("button",{onClick:()=>o(v.id),className:`text-left p-6 rounded-lg border-2 transition-all ${i===v.id?"border-primary bg-primary/5":"border-border bg-card hover:border-primary/50"}`,children:[g.jsxs("div",{className:"flex items-start justify-between mb-2",children:[g.jsx("h3",{className:"text-lg font-semibold text-foreground",children:v.user.name}),g.jsx("span",{className:"px-3 py-1 bg-accent text-accent-foreground rounded-full text-xs font-medium",children:m(v.grade)})]}),v.schoolName&&g.jsxs("p",{className:"text-sm text-muted-foreground",children:[v.schoolName,v.className&&` ${v.className}`]})]},v.id))})]}),x&&g.jsx(g.Fragment,{children:A?g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),g.jsx("div",{className:"text-xl text-muted-foreground",children:"통계 로딩 중..."})]}):a?g.jsxs(g.Fragment,{children:[g.jsxs("section",{className:"mb-8",children:[g.jsxs("h2",{className:"text-xl font-bold mb-4 text-foreground",children:[a.student.name,"님의 학습 현황"]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"총 테스트"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.statistics.totalSessions})]}),g.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"📝"})})]})}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"완료한 테스트"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.statistics.completedSessions})]}),g.jsx("div",{className:"w-12 h-12 bg-chart-1/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"✅"})})]})}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"채점 완료"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.statistics.scoredSessions})]}),g.jsx("div",{className:"w-12 h-12 bg-chart-2/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"📊"})})]})}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"평균 점수"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:a.statistics.averageScore>0?`${a.statistics.averageScore}%`:"-"})]}),g.jsx("div",{className:"w-12 h-12 bg-chart-3/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"🎯"})})]})})]})]}),a.scoreTrend.length>0&&g.jsxs("section",{className:"mb-8",children:[g.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"점수 추이"}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsx("div",{className:"space-y-4",children:a.scoreTrend.map((v,b)=>g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-32 text-sm text-muted-foreground",children:new Date(v.date).toLocaleDateString("ko-KR")}),g.jsx("div",{className:"flex-1",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("div",{className:"flex-1 bg-muted rounded-full h-8 relative overflow-hidden",children:[g.jsx("div",{className:"absolute inset-y-0 left-0 bg-primary rounded-full transition-all",style:{width:`${v.score}%`}}),g.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-sm font-medium text-foreground",children:[v.score.toFixed(1),"%"]})]}),g.jsx("div",{className:"w-48 text-sm text-muted-foreground truncate",children:v.templateTitle})]})})]},b))})})]}),g.jsxs("section",{children:[g.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"최근 테스트 결과"}),a.recentSessions.length===0?g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:g.jsx("p",{className:"text-muted-foreground",children:"아직 진행한 테스트가 없습니다."})}):g.jsx("div",{className:"bg-card rounded-lg shadow-md overflow-hidden border border-border",children:g.jsxs("table",{className:"min-w-full divide-y divide-border",children:[g.jsx("thead",{className:"bg-muted",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"테스트"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"상태"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"점수"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"등급"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"날짜"})]})}),g.jsx("tbody",{className:"bg-card divide-y divide-border",children:a.recentSessions.map(v=>g.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[g.jsx("div",{className:"text-sm font-medium text-card-foreground",children:v.template.title}),g.jsx("div",{className:"text-xs text-muted-foreground",children:m(v.template.grade)})]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y(v.status)}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:v.result?`${v.result.percentage.toFixed(1)}%`:"-"}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:v.result?`${v.result.gradeLevel}등급`:"-"}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:new Date(v.createdAt).toLocaleDateString("ko-KR")})]},v.id))})]})})]})]}):null})]})]})}function zme(){const{user:t,logout:e}=Wo(),n=Qs(),[r,s]=z.useState([]),[i,o]=z.useState(null),[a,l]=z.useState(!0),[c,u]=z.useState(null);z.useEffect(()=>{A()},[]);const A=async()=>{try{l(!0);const[m,y]=await Promise.all([bt.get("/api/v1/teachers/me/students"),bt.get("/api/v1/teachers/me/class-stats")]);s(m.data.data),o(y.data.data)}catch(m){console.error("데이터 조회 실패:",m)}finally{l(!1)}},d=()=>{e(),n("/login")},f=m=>m<=6?`초등 ${m}학년`:`중등 ${m-6}학년`,h=c?r.filter(m=>m.grade===c):r,p=Array.from(new Set(r.map(m=>m.grade))).sort((m,y)=>m-y);return a?g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),g.jsx("div",{className:"text-xl text-muted-foreground",children:"로딩 중..."})]})}):r.length===0?g.jsxs("div",{className:"min-h-screen bg-background",children:[g.jsx("header",{className:"bg-card shadow-sm border-b border-border",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold text-primary",children:"선생님 대시보드"}),g.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["안녕하세요, ",g.jsx("span",{className:"font-medium text-foreground",children:t==null?void 0:t.name}),"님"]})]}),g.jsx("button",{onClick:d,className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-card-foreground",children:"로그아웃"})]})})}),g.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:g.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:[g.jsx("p",{className:"text-muted-foreground",children:"담당하는 학생이 없습니다."}),g.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"관리자에게 문의하여 학생을 배정받으세요."})]})})]}):g.jsxs("div",{className:"min-h-screen bg-background",children:[g.jsx("header",{className:"bg-card shadow-sm border-b border-border",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold text-primary",children:"선생님 대시보드"}),g.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["안녕하세요, ",g.jsx("span",{className:"font-medium text-foreground",children:t==null?void 0:t.name}),"님"]})]}),g.jsx("button",{onClick:d,className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-card-foreground",children:"로그아웃"})]})})}),g.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i&&g.jsxs("section",{className:"mb-8",children:[g.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"전체 학급 현황"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"담당 학생"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:i.overall.totalStudents})]}),g.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"👥"})})]})}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"총 테스트"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:i.overall.totalSessions})]}),g.jsx("div",{className:"w-12 h-12 bg-chart-1/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"📝"})})]})}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"완료 테스트"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:i.overall.completedSessions})]}),g.jsx("div",{className:"w-12 h-12 bg-chart-2/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"✅"})})]})}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"채점 완료"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:i.overall.scoredSessions})]}),g.jsx("div",{className:"w-12 h-12 bg-chart-3/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"💯"})})]})}),g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"학급 평균"}),g.jsx("p",{className:"text-3xl font-bold text-foreground",children:i.overall.averageScore>0?`${i.overall.averageScore}%`:"-"})]}),g.jsx("div",{className:"w-12 h-12 bg-chart-4/10 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-2xl",children:"🎯"})})]})})]})]}),i&&i.byGrade.length>0&&g.jsxs("section",{className:"mb-8",children:[g.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:"학년별 통계"}),g.jsx("div",{className:"bg-card rounded-lg shadow-md overflow-hidden border border-border",children:g.jsxs("table",{className:"min-w-full divide-y divide-border",children:[g.jsx("thead",{className:"bg-muted",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"학년"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"학생 수"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"총 테스트"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"평균 점수"})]})}),g.jsx("tbody",{className:"bg-card divide-y divide-border",children:i.byGrade.map(m=>g.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"text-sm font-medium text-card-foreground",children:f(m.grade)})}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:[m.studentCount,"명"]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:m.totalSessions}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-card-foreground",children:m.averageScore>0?`${m.averageScore}%`:"-"})]},m.grade))})]})})]}),g.jsxs("section",{children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-xl font-bold text-foreground",children:"담당 학생 목록"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>u(null),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c===null?"bg-primary text-primary-foreground":"bg-card border border-border text-card-foreground hover:bg-muted"}`,children:"전체"}),p.map(m=>g.jsx("button",{onClick:()=>u(m),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c===m?"bg-primary text-primary-foreground":"bg-card border border-border text-card-foreground hover:bg-muted"}`,children:f(m)},m))]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(m=>g.jsxs("div",{className:"bg-card rounded-lg shadow-sm p-6 border border-border hover:border-primary transition-colors",children:[g.jsxs("div",{className:"flex items-start justify-between mb-3",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-foreground",children:m.user.name}),g.jsx("p",{className:"text-xs text-muted-foreground",children:m.user.email})]}),g.jsx("span",{className:"px-3 py-1 bg-accent text-accent-foreground rounded-full text-xs font-medium",children:f(m.grade)})]}),m.schoolName&&g.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:[m.schoolName,m.className&&` ${m.className}`]}),g.jsxs("div",{className:"border-t border-border pt-3 space-y-2",children:[g.jsxs("div",{className:"flex justify-between text-sm",children:[g.jsx("span",{className:"text-muted-foreground",children:"총 테스트"}),g.jsx("span",{className:"font-medium text-foreground",children:m.stats.totalSessions})]}),g.jsxs("div",{className:"flex justify-between text-sm",children:[g.jsx("span",{className:"text-muted-foreground",children:"완료 테스트"}),g.jsx("span",{className:"font-medium text-foreground",children:m.stats.completedSessions})]}),g.jsxs("div",{className:"flex justify-between text-sm",children:[g.jsx("span",{className:"text-muted-foreground",children:"평균 점수"}),g.jsx("span",{className:"font-medium text-foreground",children:m.stats.averageScore>0?`${m.stats.averageScore}%`:"-"})]})]})]},m.id))}),h.length===0&&g.jsx("div",{className:"bg-card rounded-lg shadow-sm p-8 text-center border border-border",children:g.jsx("p",{className:"text-muted-foreground",children:c?`${f(c)} 학생이 없습니다.`:"학생이 없습니다."})})]})]})]})}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var XI=function(t,e){return XI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},XI(t,e)};function Ta(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");XI(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var qI=function(){return qI=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qI.apply(this,arguments)};function Ks(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(A){o(A)}}function l(u){try{c(r.throw(u))}catch(A){o(A)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,[])).next())})}function Es(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function D1(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||e)}var dc=function(){function t(e,n,r,s){this.left=e,this.top=n,this.width=r,this.height=s}return t.prototype.add=function(e,n,r,s){return new t(this.left+e,this.top+n,this.width+r,this.height+s)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),lS=function(t,e){return dc.fromClientRect(t,e.getBoundingClientRect())},Vme=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),s=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new dc(0,0,r,s)},cS=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=t.charCodeAt(n++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},fr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var o=t[s];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},tM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wme=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var R1=0;R1<tM.length;R1++)Wme[tM.charCodeAt(R1)]=R1;var nM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var P1=0;P1<nM.length;P1++)kg[nM.charCodeAt(P1)]=P1;var Gme=function(t){var e=t.length*.75,n=t.length,r,s=0,i,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)i=kg[t.charCodeAt(r)],o=kg[t.charCodeAt(r+1)],a=kg[t.charCodeAt(r+2)],l=kg[t.charCodeAt(r+3)],u[s++]=i<<2|o>>4,u[s++]=(o&15)<<4|a>>2,u[s++]=(a&3)<<6|l&63;return c},Kme=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},Xme=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Sd=5,p_=11,a4=2,qme=p_-Sd,lG=65536>>Sd,Yme=1<<Sd,l4=Yme-1,Jme=1024>>Sd,Zme=lG+Jme,ege=Zme,tge=32,nge=ege+tge,rge=65536>>p_,sge=1<<qme,ige=sge-1,rM=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},oge=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},age=function(t,e){var n=Gme(t),r=Array.isArray(n)?Xme(n):new Uint32Array(n),s=Array.isArray(n)?Kme(n):new Uint16Array(n),i=24,o=rM(s,i/2,r[4]/2),a=r[5]===2?rM(s,(i+r[4])/2):oge(r,Math.ceil((i+r[4])/4));return new lge(r[0],r[1],r[2],r[3],o,a)},lge=function(){function t(e,n,r,s,i,o){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=i,this.data=o}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Sd],n=(n<<a4)+(e&l4),this.data[n];if(e<=65535)return n=this.index[lG+(e-55296>>Sd)],n=(n<<a4)+(e&l4),this.data[n];if(e<this.highStart)return n=nge-rge+(e>>p_),n=this.index[n],n+=e>>Sd&ige,n=this.index[n],n=(n<<a4)+(e&l4),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),sM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cge=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var U1=0;U1<sM.length;U1++)cge[sM.charCodeAt(U1)]=U1;var uge="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",iM=50,Age=1,cG=2,uG=3,dge=4,fge=5,oM=7,AG=8,aM=9,du=10,YI=11,lM=12,JI=13,hge=14,Tg=15,ZI=16,L1=17,tg=18,pge=19,cM=20,ek=21,ng=22,c4=23,_f=24,Vi=25,Fg=26,$g=27,Of=28,mge=29,WA=30,gge=31,j1=32,M1=33,tk=34,nk=35,rk=36,Vy=37,sk=38,Zb=39,ew=40,u4=41,dG=42,yge=43,xge=[9001,65288],fG="!",Rt="×",Q1="÷",ik=age(uge),Tl=[WA,rk],ok=[Age,cG,uG,fge],hG=[du,AG],uM=[$g,Fg],vge=ok.concat(hG),AM=[sk,Zb,ew,tk,nk],bge=[Tg,JI],wge=function(t,e){e===void 0&&(e="strict");var n=[],r=[],s=[];return t.forEach(function(i,o){var a=ik.get(i);if(a>iM?(s.push(!0),a-=iM):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return r.push(o),n.push(ZI);if(a===dge||a===YI){if(o===0)return r.push(o),n.push(WA);var l=n[o-1];return vge.indexOf(l)===-1?(r.push(r[o-1]),n.push(l)):(r.push(o),n.push(WA))}if(r.push(o),a===gge)return n.push(e==="strict"?ek:Vy);if(a===dG||a===mge)return n.push(WA);if(a===yge)return i>=131072&&i<=196605||i>=196608&&i<=262141?n.push(Vy):n.push(WA);n.push(a)}),[r,n,s]},A4=function(t,e,n,r){var s=r[n];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var i=n;i<=r.length;){i++;var o=r[i];if(o===e)return!0;if(o!==du)break}if(s===du)for(var i=n;i>0;){i--;var a=r[i];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var l=n;l<=r.length;){l++;var o=r[l];if(o===e)return!0;if(o!==du)break}if(a!==du)break}return!1},dM=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===du)n--;else return r}return 0},Cge=function(t,e,n,r,s){if(n[r]===0)return Rt;var i=r-1;if(Array.isArray(s)&&s[i]===!0)return Rt;var o=i-1,a=i+1,l=e[i],c=o>=0?e[o]:0,u=e[a];if(l===cG&&u===uG)return Rt;if(ok.indexOf(l)!==-1)return fG;if(ok.indexOf(u)!==-1||hG.indexOf(u)!==-1)return Rt;if(dM(i,e)===AG)return Q1;if(ik.get(t[i])===YI||(l===j1||l===M1)&&ik.get(t[a])===YI||l===oM||u===oM||l===aM||[du,JI,Tg].indexOf(l)===-1&&u===aM||[L1,tg,pge,_f,Of].indexOf(u)!==-1||dM(i,e)===ng||A4(c4,ng,i,e)||A4([L1,tg],ek,i,e)||A4(lM,lM,i,e))return Rt;if(l===du)return Q1;if(l===c4||u===c4)return Rt;if(u===ZI||l===ZI)return Q1;if([JI,Tg,ek].indexOf(u)!==-1||l===hge||c===rk&&bge.indexOf(l)!==-1||l===Of&&u===rk||u===cM||Tl.indexOf(u)!==-1&&l===Vi||Tl.indexOf(l)!==-1&&u===Vi||l===$g&&[Vy,j1,M1].indexOf(u)!==-1||[Vy,j1,M1].indexOf(l)!==-1&&u===Fg||Tl.indexOf(l)!==-1&&uM.indexOf(u)!==-1||uM.indexOf(l)!==-1&&Tl.indexOf(u)!==-1||[$g,Fg].indexOf(l)!==-1&&(u===Vi||[ng,Tg].indexOf(u)!==-1&&e[a+1]===Vi)||[ng,Tg].indexOf(l)!==-1&&u===Vi||l===Vi&&[Vi,Of,_f].indexOf(u)!==-1)return Rt;if([Vi,Of,_f,L1,tg].indexOf(u)!==-1)for(var A=i;A>=0;){var d=e[A];if(d===Vi)return Rt;if([Of,_f].indexOf(d)!==-1)A--;else break}if([$g,Fg].indexOf(u)!==-1)for(var A=[L1,tg].indexOf(l)!==-1?o:i;A>=0;){var d=e[A];if(d===Vi)return Rt;if([Of,_f].indexOf(d)!==-1)A--;else break}if(sk===l&&[sk,Zb,tk,nk].indexOf(u)!==-1||[Zb,tk].indexOf(l)!==-1&&[Zb,ew].indexOf(u)!==-1||[ew,nk].indexOf(l)!==-1&&u===ew||AM.indexOf(l)!==-1&&[cM,Fg].indexOf(u)!==-1||AM.indexOf(u)!==-1&&l===$g||Tl.indexOf(l)!==-1&&Tl.indexOf(u)!==-1||l===_f&&Tl.indexOf(u)!==-1||Tl.concat(Vi).indexOf(l)!==-1&&u===ng&&xge.indexOf(t[a])===-1||Tl.concat(Vi).indexOf(u)!==-1&&l===tg)return Rt;if(l===u4&&u===u4){for(var f=n[i],h=1;f>0&&(f--,e[f]===u4);)h++;if(h%2!==0)return Rt}return l===j1&&u===M1?Rt:Q1},Sge=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=wge(t,e.lineBreak),r=n[0],s=n[1],i=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(a){return[Vi,WA,dG].indexOf(a)!==-1?Vy:a}));var o=e.wordBreak==="keep-all"?i.map(function(a,l){return a&&t[l]>=19968&&t[l]<=40959}):void 0;return[r,s,o]},Bge=function(){function t(e,n,r,s){this.codePoints=e,this.required=n===fG,this.start=r,this.end=s}return t.prototype.slice=function(){return fr.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),Nge=function(t,e){var n=cS(t),r=Sge(n,e),s=r[0],i=r[1],o=r[2],a=n.length,l=0,c=0;return{next:function(){if(c>=a)return{done:!0,value:null};for(var u=Rt;c<a&&(u=Cge(n,i,s,++c,o))===Rt;);if(u!==Rt||c===a){var A=new Bge(n,u,l,c);return l=c,{value:A,done:!1}}return{done:!0,value:null}}}},Ege=1,Ige=2,ox=4,fM=8,zw=10,hM=47,sy=92,kge=9,Tge=32,H1=34,rg=61,Fge=35,$ge=36,_ge=37,z1=39,V1=40,sg=41,Oge=95,mi=45,Dge=33,Rge=60,Pge=62,Uge=64,Lge=91,jge=93,Mge=61,Qge=123,W1=63,Hge=125,pM=124,zge=126,Vge=128,mM=65533,d4=42,nd=43,Wge=44,Gge=58,Kge=59,Wy=46,Xge=0,qge=8,Yge=11,Jge=14,Zge=31,eye=127,Qa=-1,pG=48,mG=97,gG=101,tye=102,nye=117,rye=122,yG=65,xG=69,vG=70,sye=85,iye=90,Fs=function(t){return t>=pG&&t<=57},oye=function(t){return t>=55296&&t<=57343},Df=function(t){return Fs(t)||t>=yG&&t<=vG||t>=mG&&t<=tye},aye=function(t){return t>=mG&&t<=rye},lye=function(t){return t>=yG&&t<=iye},cye=function(t){return aye(t)||lye(t)},uye=function(t){return t>=Vge},G1=function(t){return t===zw||t===kge||t===Tge},Vw=function(t){return cye(t)||uye(t)||t===Oge},gM=function(t){return Vw(t)||Fs(t)||t===mi},Aye=function(t){return t>=Xge&&t<=qge||t===Yge||t>=Jge&&t<=Zge||t===eye},Xc=function(t,e){return t!==sy?!1:e!==zw},K1=function(t,e,n){return t===mi?Vw(e)||Xc(e,n):Vw(t)?!0:!!(t===sy&&Xc(t,e))},f4=function(t,e,n){return t===nd||t===mi?Fs(e)?!0:e===Wy&&Fs(n):Fs(t===Wy?e:t)},dye=function(t){var e=0,n=1;(t[e]===nd||t[e]===mi)&&(t[e]===mi&&(n=-1),e++);for(var r=[];Fs(t[e]);)r.push(t[e++]);var s=r.length?parseInt(fr.apply(void 0,r),10):0;t[e]===Wy&&e++;for(var i=[];Fs(t[e]);)i.push(t[e++]);var o=i.length,a=o?parseInt(fr.apply(void 0,i),10):0;(t[e]===xG||t[e]===gG)&&e++;var l=1;(t[e]===nd||t[e]===mi)&&(t[e]===mi&&(l=-1),e++);for(var c=[];Fs(t[e]);)c.push(t[e++]);var u=c.length?parseInt(fr.apply(void 0,c),10):0;return n*(s+a*Math.pow(10,-o))*Math.pow(10,l*u)},fye={type:2},hye={type:3},pye={type:4},mye={type:13},gye={type:8},yye={type:21},xye={type:9},vye={type:10},bye={type:11},wye={type:12},Cye={type:14},X1={type:23},Sye={type:1},Bye={type:25},Nye={type:24},Eye={type:26},Iye={type:27},kye={type:28},Tye={type:29},Fye={type:31},ak={type:32},bG=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(cS(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==ak;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case H1:return this.consumeStringToken(H1);case Fge:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(gM(n)||Xc(r,s)){var i=K1(n,r,s)?Ige:Ege,o=this.consumeName();return{type:5,value:o,flags:i}}break;case $ge:if(this.peekCodePoint(0)===rg)return this.consumeCodePoint(),mye;break;case z1:return this.consumeStringToken(z1);case V1:return fye;case sg:return hye;case d4:if(this.peekCodePoint(0)===rg)return this.consumeCodePoint(),Cye;break;case nd:if(f4(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Wge:return pye;case mi:var a=e,l=this.peekCodePoint(0),c=this.peekCodePoint(1);if(f4(a,l,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(K1(a,l,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===mi&&c===Pge)return this.consumeCodePoint(),this.consumeCodePoint(),Nye;break;case Wy:if(f4(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case hM:if(this.peekCodePoint(0)===d4)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===d4&&(u=this.consumeCodePoint(),u===hM))return this.consumeToken();if(u===Qa)return this.consumeToken()}break;case Gge:return Eye;case Kge:return Iye;case Rge:if(this.peekCodePoint(0)===Dge&&this.peekCodePoint(1)===mi&&this.peekCodePoint(2)===mi)return this.consumeCodePoint(),this.consumeCodePoint(),Bye;break;case Uge:var A=this.peekCodePoint(0),d=this.peekCodePoint(1),f=this.peekCodePoint(2);if(K1(A,d,f)){var o=this.consumeName();return{type:7,value:o}}break;case Lge:return kye;case sy:if(Xc(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case jge:return Tye;case Mge:if(this.peekCodePoint(0)===rg)return this.consumeCodePoint(),gye;break;case Qge:return bye;case Hge:return wye;case nye:case sye:var h=this.peekCodePoint(0),p=this.peekCodePoint(1);return h===nd&&(Df(p)||p===W1)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case pM:if(this.peekCodePoint(0)===rg)return this.consumeCodePoint(),xye;if(this.peekCodePoint(0)===pM)return this.consumeCodePoint(),yye;break;case zge:if(this.peekCodePoint(0)===rg)return this.consumeCodePoint(),vye;break;case Qa:return ak}return G1(e)?(this.consumeWhiteSpace(),Fye):Fs(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Vw(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:fr(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();Df(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===W1&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(fr.apply(void 0,e.map(function(l){return l===W1?pG:l})),16),i=parseInt(fr.apply(void 0,e.map(function(l){return l===W1?vG:l})),16);return{type:30,start:s,end:i}}var o=parseInt(fr.apply(void 0,e),16);if(this.peekCodePoint(0)===mi&&Df(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var a=[];Df(n)&&a.length<6;)a.push(n),n=this.consumeCodePoint();var i=parseInt(fr.apply(void 0,a),16);return{type:30,start:o,end:i}}else return{type:30,start:o,end:o}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===V1?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===V1?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Qa)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===z1||n===H1){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Qa||this.peekCodePoint(0)===sg)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),X1)}for(;;){var s=this.consumeCodePoint();if(s===Qa||s===sg)return{type:22,value:fr.apply(void 0,e)};if(G1(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Qa||this.peekCodePoint(0)===sg?(this.consumeCodePoint(),{type:22,value:fr.apply(void 0,e)}):(this.consumeBadUrlRemnants(),X1);if(s===H1||s===z1||s===V1||Aye(s))return this.consumeBadUrlRemnants(),X1;if(s===sy)if(Xc(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),X1;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;G1(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===sg||e===Qa)return;Xc(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var s=Math.min(n,e);r+=fr.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var s=this._value[r];if(s===Qa||s===void 0||s===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===zw)return this._value.splice(0,r),Sye;if(s===sy){var i=this._value[r+1];i!==Qa&&i!==void 0&&(i===zw?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):Xc(s,i)&&(n+=this.consumeStringSlice(r),n+=fr(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=ox,r=this.peekCodePoint(0);for((r===nd||r===mi)&&e.push(this.consumeCodePoint());Fs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===Wy&&Fs(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=fM;Fs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((r===xG||r===gG)&&((s===nd||s===mi)&&Fs(i)||Fs(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=fM;Fs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[dye(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],s=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if(K1(s,i,o)){var a=this.consumeName();return{type:15,number:n,flags:r,unit:a}}return s===_ge?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Df(e)){for(var n=fr(e);Df(this.peekCodePoint(0))&&n.length<6;)n+=fr(this.consumeCodePoint());G1(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||oye(r)||r>1114111?mM:r}return e===Qa?mM:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(gM(n))e+=fr(n);else if(Xc(n,this.peekCodePoint(0)))e+=fr(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),wG=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new bG;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||_ye(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?ak:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),ax=function(t){return t.type===15},qp=function(t){return t.type===17},dn=function(t){return t.type===20},$ye=function(t){return t.type===0},lk=function(t,e){return dn(t)&&t.value===e},CG=function(t){return t.type!==31},tp=function(t){return t.type!==31&&t.type!==4},yl=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},_ye=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Qu=function(t){return t.type===17||t.type===15},br=function(t){return t.type===16||Qu(t)},SG=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},ms={type:17,number:0,flags:ox},m_={type:16,number:50,flags:ox},fu={type:16,number:100,flags:ox},_g=function(t,e,n){var r=t[0],s=t[1];return[Sn(r,e),Sn(typeof s<"u"?s:r,n)]},Sn=function(t,e){if(t.type===16)return t.number/100*e;if(ax(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},BG="deg",NG="grad",EG="rad",IG="turn",uS={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case BG:return Math.PI*e.number/180;case NG:return Math.PI/200*e.number;case EG:return e.number;case IG:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},kG=function(t){return t.type===15&&(t.unit===BG||t.unit===NG||t.unit===EG||t.unit===IG)},TG=function(t){var e=t.filter(dn).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ms,ms];case"to top":case"bottom":return No(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ms,fu];case"to right":case"left":return No(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[fu,fu];case"to bottom":case"top":return No(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[fu,ms];case"to left":case"right":return No(270)}return 0},No=function(t){return Math.PI*t/180},ku={name:"color",parse:function(t,e){if(e.type===18){var n=Oye[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3);return hu(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3),o=e.value.substring(3,4);return hu(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6);return hu(parseInt(r,16),parseInt(s,16),parseInt(i,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6),o=e.value.substring(6,8);return hu(parseInt(r,16),parseInt(s,16),parseInt(i,16),parseInt(o,16)/255)}}if(e.type===20){var a=nc[e.value.toUpperCase()];if(typeof a<"u")return a}return nc.TRANSPARENT}},Tu=function(t){return(255&t)===0},Kr=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+r+","+n+","+e/255+")":"rgb("+s+","+r+","+n+")"},hu=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},yM=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},xM=function(t,e){var n=e.filter(tp);if(n.length===3){var r=n.map(yM),s=r[0],i=r[1],o=r[2];return hu(s,i,o,1)}if(n.length===4){var a=n.map(yM),s=a[0],i=a[1],o=a[2],l=a[3];return hu(s,i,o,l)}return 0};function h4(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var vM=function(t,e){var n=e.filter(tp),r=n[0],s=n[1],i=n[2],o=n[3],a=(r.type===17?No(r.number):uS.parse(t,r))/(Math.PI*2),l=br(s)?s.number/100:0,c=br(i)?i.number/100:0,u=typeof o<"u"&&br(o)?Sn(o,1):1;if(l===0)return hu(c*255,c*255,c*255,1);var A=c<=.5?c*(l+1):c+l-c*l,d=c*2-A,f=h4(d,A,a+1/3),h=h4(d,A,a),p=h4(d,A,a-1/3);return hu(f*255,h*255,p*255,u)},Oye={hsl:vM,hsla:vM,rgb:xM,rgba:xM},iy=function(t,e){return ku.parse(t,wG.create(e).parseComponentValue())},nc={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Dye={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(dn(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Rye={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},AS=function(t,e){var n=ku.parse(t,e[0]),r=e[1];return r&&br(r)?{color:n,stop:r}:{color:n,stop:null}},bM=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=ms),r.stop===null&&(r.stop=fu);for(var s=[],i=0,o=0;o<t.length;o++){var a=t[o].stop;if(a!==null){var l=Sn(a,e);l>i?s.push(l):s.push(i),i=l}else s.push(null)}for(var c=null,o=0;o<s.length;o++){var u=s[o];if(u===null)c===null&&(c=o);else if(c!==null){for(var A=o-c,d=s[c-1],f=(u-d)/(A+1),h=1;h<=A;h++)s[c+h-1]=f*h;c=null}}return t.map(function(p,m){var y=p.color;return{color:y,stop:Math.max(Math.min(1,s[m]/e),0)}})},Pye=function(t,e,n){var r=e/2,s=n/2,i=Sn(t[0],e)-r,o=s-Sn(t[1],n);return(Math.atan2(o,i)+Math.PI*2)%(Math.PI*2)},Uye=function(t,e,n){var r=typeof t=="number"?t:Pye(t,e,n),s=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),i=e/2,o=n/2,a=s/2,l=Math.sin(r-Math.PI/2)*a,c=Math.cos(r-Math.PI/2)*a;return[s,i-c,i+c,o-l,o+l]},ta=function(t,e){return Math.sqrt(t*t+e*e)},wM=function(t,e,n,r,s){var i=[[0,0],[0,e],[t,0],[t,e]];return i.reduce(function(o,a){var l=a[0],c=a[1],u=ta(n-l,r-c);return(s?u<o.optimumDistance:u>o.optimumDistance)?{optimumCorner:a,optimumDistance:u}:o},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},Lye=function(t,e,n,r,s){var i=0,o=0;switch(t.size){case 0:t.shape===0?i=o=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-r)),o=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(t.shape===0)i=o=Math.min(ta(e,n),ta(e,n-s),ta(e-r,n),ta(e-r,n-s));else if(t.shape===1){var a=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(e),Math.abs(e-r)),l=wM(r,s,e,n,!0),c=l[0],u=l[1];i=ta(c-e,(u-n)/a),o=a*i}break;case 1:t.shape===0?i=o=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-r)),o=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(t.shape===0)i=o=Math.max(ta(e,n),ta(e,n-s),ta(e-r,n),ta(e-r,n-s));else if(t.shape===1){var a=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(e),Math.abs(e-r)),A=wM(r,s,e,n,!1),c=A[0],u=A[1];i=ta(c-e,(u-n)/a),o=a*i}break}return Array.isArray(t.size)&&(i=Sn(t.size[0],r),o=t.size.length===2?Sn(t.size[1],s):i),[i,o]},jye=function(t,e){var n=No(180),r=[];return yl(e).forEach(function(s,i){if(i===0){var o=s[0];if(o.type===20&&o.value==="to"){n=TG(s);return}else if(kG(o)){n=uS.parse(t,o);return}}var a=AS(t,s);r.push(a)}),{angle:n,stops:r,type:1}},q1=function(t,e){var n=No(180),r=[];return yl(e).forEach(function(s,i){if(i===0){var o=s[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){n=TG(s);return}else if(kG(o)){n=(uS.parse(t,o)+No(270))%No(360);return}}var a=AS(t,s);r.push(a)}),{angle:n,stops:r,type:1}},Mye=function(t,e){var n=No(180),r=[],s=1,i=0,o=3,a=[];return yl(e).forEach(function(l,c){var u=l[0];if(c===0){if(dn(u)&&u.value==="linear"){s=1;return}else if(dn(u)&&u.value==="radial"){s=2;return}}if(u.type===18){if(u.name==="from"){var A=ku.parse(t,u.values[0]);r.push({stop:ms,color:A})}else if(u.name==="to"){var A=ku.parse(t,u.values[0]);r.push({stop:fu,color:A})}else if(u.name==="color-stop"){var d=u.values.filter(tp);if(d.length===2){var A=ku.parse(t,d[1]),f=d[0];qp(f)&&r.push({stop:{type:16,number:f.number*100,flags:f.flags},color:A})}}}}),s===1?{angle:(n+No(180))%No(360),stops:r,type:s}:{size:o,shape:i,stops:r,position:a,type:s}},FG="closest-side",$G="farthest-side",_G="closest-corner",OG="farthest-corner",DG="circle",RG="ellipse",PG="cover",UG="contain",Qye=function(t,e){var n=0,r=3,s=[],i=[];return yl(e).forEach(function(o,a){var l=!0;if(a===0){var c=!1;l=o.reduce(function(A,d){if(c)if(dn(d))switch(d.value){case"center":return i.push(m_),A;case"top":case"left":return i.push(ms),A;case"right":case"bottom":return i.push(fu),A}else(br(d)||Qu(d))&&i.push(d);else if(dn(d))switch(d.value){case DG:return n=0,!1;case RG:return n=1,!1;case"at":return c=!0,!1;case FG:return r=0,!1;case PG:case $G:return r=1,!1;case UG:case _G:return r=2,!1;case OG:return r=3,!1}else if(Qu(d)||br(d))return Array.isArray(r)||(r=[]),r.push(d),!1;return A},l)}if(l){var u=AS(t,o);s.push(u)}}),{size:r,shape:n,stops:s,position:i,type:2}},Y1=function(t,e){var n=0,r=3,s=[],i=[];return yl(e).forEach(function(o,a){var l=!0;if(a===0?l=o.reduce(function(u,A){if(dn(A))switch(A.value){case"center":return i.push(m_),!1;case"top":case"left":return i.push(ms),!1;case"right":case"bottom":return i.push(fu),!1}else if(br(A)||Qu(A))return i.push(A),!1;return u},l):a===1&&(l=o.reduce(function(u,A){if(dn(A))switch(A.value){case DG:return n=0,!1;case RG:return n=1,!1;case UG:case FG:return r=0,!1;case $G:return r=1,!1;case _G:return r=2,!1;case PG:case OG:return r=3,!1}else if(Qu(A)||br(A))return Array.isArray(r)||(r=[]),r.push(A),!1;return u},l)),l){var c=AS(t,o);s.push(c)}}),{size:r,shape:n,stops:s,position:i,type:2}},Hye=function(t){return t.type===1},zye=function(t){return t.type===2},g_={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=LG[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function Vye(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!LG[t.name])}var LG={"linear-gradient":jye,"-moz-linear-gradient":q1,"-ms-linear-gradient":q1,"-o-linear-gradient":q1,"-webkit-linear-gradient":q1,"radial-gradient":Qye,"-moz-radial-gradient":Y1,"-ms-radial-gradient":Y1,"-o-radial-gradient":Y1,"-webkit-radial-gradient":Y1,"-webkit-gradient":Mye},Wye={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return tp(r)&&Vye(r)}).map(function(r){return g_.parse(t,r)})}},Gye={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(dn(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Kye={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return yl(e).map(function(n){return n.filter(br)}).map(SG)}},Xye={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return yl(e).map(function(n){return n.filter(dn).map(function(r){return r.value}).join(" ")}).map(qye)}},qye=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Bh;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Bh||(Bh={}));var Yye={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return yl(e).map(function(n){return n.filter(Jye)})}},Jye=function(t){return dn(t)||br(t)},dS=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Zye=dS("top"),e0e=dS("right"),t0e=dS("bottom"),n0e=dS("left"),fS=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return SG(n.filter(br))}}},r0e=fS("top-left"),s0e=fS("top-right"),i0e=fS("bottom-right"),o0e=fS("bottom-left"),hS=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},a0e=hS("top"),l0e=hS("right"),c0e=hS("bottom"),u0e=hS("left"),pS=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return ax(n)?n.number:0}}},A0e=pS("top"),d0e=pS("right"),f0e=pS("bottom"),h0e=pS("left"),p0e={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},m0e={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},g0e={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(dn).reduce(function(n,r){return n|y0e(r.value)},0)}},y0e=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},x0e={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},v0e={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Ww;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Ww||(Ww={}));var b0e={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Ww.STRICT;case"normal":default:return Ww.NORMAL}}},w0e={name:"line-height",initialValue:"normal",prefix:!1,type:4},CM=function(t,e){return dn(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:br(t)?Sn(t,e):e},C0e={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:g_.parse(t,e)}},S0e={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},ck={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},mS=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},B0e=mS("top"),N0e=mS("right"),E0e=mS("bottom"),I0e=mS("left"),k0e={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(dn).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},T0e={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},gS=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},F0e=gS("top"),$0e=gS("right"),_0e=gS("bottom"),O0e=gS("left"),D0e={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},R0e={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},P0e={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&lk(e[0],"none")?[]:yl(e).map(function(n){for(var r={color:nc.TRANSPARENT,offsetX:ms,offsetY:ms,blur:ms},s=0,i=0;i<n.length;i++){var o=n[i];Qu(o)?(s===0?r.offsetX=o:s===1?r.offsetY=o:r.blur=o,s++):r.color=ku.parse(t,o)}return r})}},U0e={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},L0e={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=Q0e[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},j0e=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},M0e=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),n=e[0],r=e[1];e[2],e[3];var s=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],a=e[13];return e[14],e[15],e.length===16?[n,r,s,i,o,a]:null},Q0e={matrix:j0e,matrix3d:M0e},SM={type:16,number:50,flags:ox},H0e=[SM,SM],z0e={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(br);return n.length!==2?H0e:[n[0],n[1]]}},V0e={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},oy;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(oy||(oy={}));var W0e={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return oy.BREAK_ALL;case"keep-all":return oy.KEEP_ALL;case"normal":default:return oy.NORMAL}}},G0e={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(qp(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},jG={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},K0e={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return qp(e)?e.number:1}},X0e={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},q0e={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(dn).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},Y0e={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},J0e={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Z0e={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(qp(e))return e.number;if(dn(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},exe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(dn).map(function(n){return n.value})}},txe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Pr=function(t,e){return(t&e)!==0},nxe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},rxe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=e.filter(CG),i=0;i<s.length;i++){var o=s[i],a=s[i+1];if(o.type===20){var l=a&&qp(a)?a.number:1;r.push({counter:o.value,increment:l})}}return r}},sxe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(CG),s=0;s<r.length;s++){var i=r[s],o=r[s+1];if(dn(i)&&i.value!=="none"){var a=o&&qp(o)?o.number:0;n.push({counter:i.value,reset:a})}}return n}},ixe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(ax).map(function(n){return jG.parse(t,n)})}},oxe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],s=e.filter($ye);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var o=s[i].value,a=s[i+1].value;r.push({open:o,close:a})}return r}},BM=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},axe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&lk(e[0],"none")?[]:yl(e).map(function(n){for(var r={color:255,offsetX:ms,offsetY:ms,blur:ms,spread:ms,inset:!1},s=0,i=0;i<n.length;i++){var o=n[i];lk(o,"inset")?r.inset=!0:Qu(o)?(s===0?r.offsetX=o:s===1?r.offsetY=o:s===2?r.blur=o:r.spread=o,s++):r.color=ku.parse(t,o)}return r})}},lxe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(dn).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},cxe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},uxe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return ax(e)?e.number:0}},Axe=function(){function t(e,n){var r,s;this.animationDuration=Ke(e,ixe,n.animationDuration),this.backgroundClip=Ke(e,Dye,n.backgroundClip),this.backgroundColor=Ke(e,Rye,n.backgroundColor),this.backgroundImage=Ke(e,Wye,n.backgroundImage),this.backgroundOrigin=Ke(e,Gye,n.backgroundOrigin),this.backgroundPosition=Ke(e,Kye,n.backgroundPosition),this.backgroundRepeat=Ke(e,Xye,n.backgroundRepeat),this.backgroundSize=Ke(e,Yye,n.backgroundSize),this.borderTopColor=Ke(e,Zye,n.borderTopColor),this.borderRightColor=Ke(e,e0e,n.borderRightColor),this.borderBottomColor=Ke(e,t0e,n.borderBottomColor),this.borderLeftColor=Ke(e,n0e,n.borderLeftColor),this.borderTopLeftRadius=Ke(e,r0e,n.borderTopLeftRadius),this.borderTopRightRadius=Ke(e,s0e,n.borderTopRightRadius),this.borderBottomRightRadius=Ke(e,i0e,n.borderBottomRightRadius),this.borderBottomLeftRadius=Ke(e,o0e,n.borderBottomLeftRadius),this.borderTopStyle=Ke(e,a0e,n.borderTopStyle),this.borderRightStyle=Ke(e,l0e,n.borderRightStyle),this.borderBottomStyle=Ke(e,c0e,n.borderBottomStyle),this.borderLeftStyle=Ke(e,u0e,n.borderLeftStyle),this.borderTopWidth=Ke(e,A0e,n.borderTopWidth),this.borderRightWidth=Ke(e,d0e,n.borderRightWidth),this.borderBottomWidth=Ke(e,f0e,n.borderBottomWidth),this.borderLeftWidth=Ke(e,h0e,n.borderLeftWidth),this.boxShadow=Ke(e,axe,n.boxShadow),this.color=Ke(e,p0e,n.color),this.direction=Ke(e,m0e,n.direction),this.display=Ke(e,g0e,n.display),this.float=Ke(e,x0e,n.cssFloat),this.fontFamily=Ke(e,Y0e,n.fontFamily),this.fontSize=Ke(e,J0e,n.fontSize),this.fontStyle=Ke(e,txe,n.fontStyle),this.fontVariant=Ke(e,exe,n.fontVariant),this.fontWeight=Ke(e,Z0e,n.fontWeight),this.letterSpacing=Ke(e,v0e,n.letterSpacing),this.lineBreak=Ke(e,b0e,n.lineBreak),this.lineHeight=Ke(e,w0e,n.lineHeight),this.listStyleImage=Ke(e,C0e,n.listStyleImage),this.listStylePosition=Ke(e,S0e,n.listStylePosition),this.listStyleType=Ke(e,ck,n.listStyleType),this.marginTop=Ke(e,B0e,n.marginTop),this.marginRight=Ke(e,N0e,n.marginRight),this.marginBottom=Ke(e,E0e,n.marginBottom),this.marginLeft=Ke(e,I0e,n.marginLeft),this.opacity=Ke(e,K0e,n.opacity);var i=Ke(e,k0e,n.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=Ke(e,T0e,n.overflowWrap),this.paddingTop=Ke(e,F0e,n.paddingTop),this.paddingRight=Ke(e,$0e,n.paddingRight),this.paddingBottom=Ke(e,_0e,n.paddingBottom),this.paddingLeft=Ke(e,O0e,n.paddingLeft),this.paintOrder=Ke(e,lxe,n.paintOrder),this.position=Ke(e,R0e,n.position),this.textAlign=Ke(e,D0e,n.textAlign),this.textDecorationColor=Ke(e,X0e,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=Ke(e,q0e,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=Ke(e,P0e,n.textShadow),this.textTransform=Ke(e,U0e,n.textTransform),this.transform=Ke(e,L0e,n.transform),this.transformOrigin=Ke(e,z0e,n.transformOrigin),this.visibility=Ke(e,V0e,n.visibility),this.webkitTextStrokeColor=Ke(e,cxe,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ke(e,uxe,n.webkitTextStrokeWidth),this.wordBreak=Ke(e,W0e,n.wordBreak),this.zIndex=Ke(e,G0e,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Tu(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Pr(this.display,4)||Pr(this.display,33554432)||Pr(this.display,268435456)||Pr(this.display,536870912)||Pr(this.display,67108864)||Pr(this.display,134217728)},t}(),dxe=function(){function t(e,n){this.content=Ke(e,nxe,n.content),this.quotes=Ke(e,oxe,n.quotes)}return t}(),NM=function(){function t(e,n){this.counterIncrement=Ke(e,rxe,n.counterIncrement),this.counterReset=Ke(e,sxe,n.counterReset)}return t}(),Ke=function(t,e,n){var r=new bG,s=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(s);var i=new wG(r.read());switch(e.type){case 2:var o=i.parseComponentValue();return e.parse(t,dn(o)?o.value:e.initialValue);case 0:return e.parse(t,i.parseComponentValue());case 1:return e.parse(t,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return uS.parse(t,i.parseComponentValue());case"color":return ku.parse(t,i.parseComponentValue());case"image":return g_.parse(t,i.parseComponentValue());case"length":var a=i.parseComponentValue();return Qu(a)?a:ms;case"length-percentage":var l=i.parseComponentValue();return br(l)?l:ms;case"time":return jG.parse(t,i.parseComponentValue())}break}},fxe="data-html2canvas-debug",hxe=function(t){var e=t.getAttribute(fxe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},uk=function(t,e){var n=hxe(t);return n===1||e===n},xl=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,uk(n,3))debugger;this.styles=new Axe(e,window.getComputedStyle(n,null)),fk(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=lS(this.context,n),uk(n,4)&&(this.flags|=16)}return t}(),pxe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",EM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Og=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var J1=0;J1<EM.length;J1++)Og[EM.charCodeAt(J1)]=J1;var mxe=function(t){var e=t.length*.75,n=t.length,r,s=0,i,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)i=Og[t.charCodeAt(r)],o=Og[t.charCodeAt(r+1)],a=Og[t.charCodeAt(r+2)],l=Og[t.charCodeAt(r+3)],u[s++]=i<<2|o>>4,u[s++]=(o&15)<<4|a>>2,u[s++]=(a&3)<<6|l&63;return c},gxe=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},yxe=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Bd=5,y_=11,p4=2,xxe=y_-Bd,MG=65536>>Bd,vxe=1<<Bd,m4=vxe-1,bxe=1024>>Bd,wxe=MG+bxe,Cxe=wxe,Sxe=32,Bxe=Cxe+Sxe,Nxe=65536>>y_,Exe=1<<xxe,Ixe=Exe-1,IM=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},kxe=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},Txe=function(t,e){var n=mxe(t),r=Array.isArray(n)?yxe(n):new Uint32Array(n),s=Array.isArray(n)?gxe(n):new Uint16Array(n),i=24,o=IM(s,i/2,r[4]/2),a=r[5]===2?IM(s,(i+r[4])/2):kxe(r,Math.ceil((i+r[4])/4));return new Fxe(r[0],r[1],r[2],r[3],o,a)},Fxe=function(){function t(e,n,r,s,i,o){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=i,this.data=o}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Bd],n=(n<<p4)+(e&m4),this.data[n];if(e<=65535)return n=this.index[MG+(e-55296>>Bd)],n=(n<<p4)+(e&m4),this.data[n];if(e<this.highStart)return n=Bxe-Nxe+(e>>y_),n=this.index[n],n+=e>>Bd&Ixe,n=this.index[n],n=(n<<p4)+(e&m4),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),kM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$xe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Z1=0;Z1<kM.length;Z1++)$xe[kM.charCodeAt(Z1)]=Z1;var _xe=1,g4=2,y4=3,TM=4,FM=5,Oxe=7,$M=8,x4=9,v4=10,_M=11,OM=12,DM=13,RM=14,b4=15,Dxe=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=t.charCodeAt(n++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},Rxe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var o=t[s];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},Pxe=Txe(pxe),mo="×",w4="÷",Uxe=function(t){return Pxe.get(t)},Lxe=function(t,e,n){var r=n-2,s=e[r],i=e[n-1],o=e[n];if(i===g4&&o===y4)return mo;if(i===g4||i===y4||i===TM||o===g4||o===y4||o===TM)return w4;if(i===$M&&[$M,x4,_M,OM].indexOf(o)!==-1||(i===_M||i===x4)&&(o===x4||o===v4)||(i===OM||i===v4)&&o===v4||o===DM||o===FM||o===Oxe||i===_xe)return mo;if(i===DM&&o===RM){for(;s===FM;)s=e[--r];if(s===RM)return mo}if(i===b4&&o===b4){for(var a=0;s===b4;)a++,s=e[--r];if(a%2===0)return mo}return w4},jxe=function(t){var e=Dxe(t),n=e.length,r=0,s=0,i=e.map(Uxe);return{next:function(){if(r>=n)return{done:!0,value:null};for(var o=mo;r<n&&(o=Lxe(e,i,++r))===mo;);if(o!==mo||r===n){var a=Rxe.apply(null,e.slice(s,r));return s=r,{value:a,done:!1}}return{done:!0,value:null}}}},Mxe=function(t){for(var e=jxe(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},Qxe=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),i=Math.round(s.height);if(t.body.removeChild(r),i===e)return!0}}return!1},Hxe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,s=cS(r.data).map(function(l){return fr(l)}),i=0,o={},a=s.every(function(l,c){n.setStart(r,i),n.setEnd(r,i+l.length);var u=n.getBoundingClientRect();i+=l.length;var A=u.x>o.x||u.y>o.y;return o=u,c===0?!0:A});return t.body.removeChild(e),a},zxe=function(){return typeof new Image().crossOrigin<"u"},Vxe=function(){return typeof new XMLHttpRequest().responseType=="string"},Wxe=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},PM=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},Gxe=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,i=e.toDataURL();s.src=i;var o=Ak(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),UM(o).then(function(a){r.drawImage(a,0,0);var l=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var c=t.createElement("div");return c.style.backgroundImage="url("+i+")",c.style.height=n+"px",PM(l)?UM(Ak(n,n,0,0,c)):Promise.reject(!1)}).then(function(a){return r.drawImage(a,0,0),PM(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},Ak=function(t,e,n,r,s){var i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",n.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(a),a.appendChild(s),o},UM=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},hs={get SUPPORT_RANGE_BOUNDS(){var t=Qxe(document);return Object.defineProperty(hs,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=hs.SUPPORT_RANGE_BOUNDS&&Hxe(document);return Object.defineProperty(hs,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Wxe(document);return Object.defineProperty(hs,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?Gxe(document):Promise.resolve(!1);return Object.defineProperty(hs,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=zxe();return Object.defineProperty(hs,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Vxe();return Object.defineProperty(hs,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(hs,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(hs,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},ay=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),Kxe=function(t,e,n,r){var s=Yxe(e,n),i=[],o=0;return s.forEach(function(a){if(n.textDecorationLine.length||a.trim().length>0)if(hs.SUPPORT_RANGE_BOUNDS){var l=LM(r,o,a.length).getClientRects();if(l.length>1){var c=x_(a),u=0;c.forEach(function(d){i.push(new ay(d,dc.fromDOMRectList(t,LM(r,u+o,d.length).getClientRects()))),u+=d.length})}else i.push(new ay(a,dc.fromDOMRectList(t,l)))}else{var A=r.splitText(a.length);i.push(new ay(a,Xxe(t,r))),r=A}else hs.SUPPORT_RANGE_BOUNDS||(r=r.splitText(a.length));o+=a.length}),i},Xxe=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(r,e);var i=lS(t,r);return r.firstChild&&s.replaceChild(r.firstChild,r),i}}return dc.EMPTY},LM=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(t,e),s.setEnd(t,e+n),s},x_=function(t){if(hs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return Mxe(t)},qxe=function(t,e){if(hs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return Zxe(t,e)},Yxe=function(t,e){return e.letterSpacing!==0?x_(t):qxe(t,e)},Jxe=[32,160,4961,65792,65793,4153,4241],Zxe=function(t,e){for(var n=Nge(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],s,i=function(){if(s.value){var o=s.value.slice(),a=cS(o),l="";a.forEach(function(c){Jxe.indexOf(c)===-1?l+=fr(c):(l.length&&r.push(l),r.push(fr(c)),l="")}),l.length&&r.push(l)}};!(s=n.next()).done;)i();return r},eve=function(){function t(e,n,r){this.text=tve(n.data,r.textTransform),this.textBounds=Kxe(e,this.text,r,n)}return t}(),tve=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(nve,rve);case 2:return t.toUpperCase();default:return t}},nve=/(^|\s|:|-|\(|\))([a-z])/g,rve=function(t,e,n){return t.length>0?e+n.toUpperCase():t},QG=function(t){Ta(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return e}(xl),HG=function(t){Ta(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return e}(xl),zG=function(t){Ta(e,t);function e(n,r){var s=t.call(this,n,r)||this,i=new XMLSerializer,o=lS(n,r);return r.setAttribute("width",o.width+"px"),r.setAttribute("height",o.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(xl),VG=function(t){Ta(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(xl),dk=function(t){Ta(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return e}(xl),sve=[{type:15,flags:0,unit:"px",number:3}],ive=[{type:16,flags:0,number:50}],ove=function(t){return t.width>t.height?new dc(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new dc(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},ave=function(t){var e=t.type===lve?new Array(t.value.length+1).join("•"):t.value;return e.length===0?t.placeholder||"":e},Gw="checkbox",Kw="radio",lve="password",jM=707406591,v_=function(t){Ta(e,t);function e(n,r){var s=t.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=ave(r),(s.type===Gw||s.type===Kw)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=ove(s.bounds)),s.type){case Gw:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=sve;break;case Kw:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=ive;break}return s}return e}(xl),WG=function(t){Ta(e,t);function e(n,r){var s=t.call(this,n,r)||this,i=r.options[r.selectedIndex||0];return s.value=i&&i.text||"",s}return e}(xl),GG=function(t){Ta(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(xl),KG=function(t){Ta(e,t);function e(n,r){var s=t.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=qG(n,r.contentWindow.document.documentElement);var i=r.contentWindow.document.documentElement?iy(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):nc.TRANSPARENT,o=r.contentWindow.document.body?iy(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):nc.TRANSPARENT;s.backgroundColor=Tu(i)?Tu(o)?s.styles.backgroundColor:o:i}}catch{}return s}return e}(xl),cve=["OL","UL","MENU"],tw=function(t,e,n,r){for(var s=e.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,YG(s)&&s.data.trim().length>0)n.textNodes.push(new eve(t,s,n.styles));else if(uh(s))if(tK(s)&&s.assignedNodes)s.assignedNodes().forEach(function(a){return tw(t,a,n,r)});else{var o=XG(t,s);o.styles.isVisible()&&(uve(s,o,r)?o.flags|=4:Ave(o.styles)&&(o.flags|=2),cve.indexOf(s.tagName)!==-1&&(o.flags|=8),n.elements.push(o),s.slot,s.shadowRoot?tw(t,s.shadowRoot,o,r):!Xw(s)&&!JG(s)&&!qw(s)&&tw(t,s,o,r))}},XG=function(t,e){return hk(e)?new QG(t,e):ZG(e)?new HG(t,e):JG(e)?new zG(t,e):dve(e)?new VG(t,e):fve(e)?new dk(t,e):hve(e)?new v_(t,e):qw(e)?new WG(t,e):Xw(e)?new GG(t,e):eK(e)?new KG(t,e):new xl(t,e)},qG=function(t,e){var n=XG(t,e);return n.flags|=4,tw(t,e,n,n),n},uve=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||b_(t)&&n.styles.isTransparent()},Ave=function(t){return t.isPositioned()||t.isFloating()},YG=function(t){return t.nodeType===Node.TEXT_NODE},uh=function(t){return t.nodeType===Node.ELEMENT_NODE},fk=function(t){return uh(t)&&typeof t.style<"u"&&!nw(t)},nw=function(t){return typeof t.className=="object"},dve=function(t){return t.tagName==="LI"},fve=function(t){return t.tagName==="OL"},hve=function(t){return t.tagName==="INPUT"},pve=function(t){return t.tagName==="HTML"},JG=function(t){return t.tagName==="svg"},b_=function(t){return t.tagName==="BODY"},ZG=function(t){return t.tagName==="CANVAS"},MM=function(t){return t.tagName==="VIDEO"},hk=function(t){return t.tagName==="IMG"},eK=function(t){return t.tagName==="IFRAME"},QM=function(t){return t.tagName==="STYLE"},mve=function(t){return t.tagName==="SCRIPT"},Xw=function(t){return t.tagName==="TEXTAREA"},qw=function(t){return t.tagName==="SELECT"},tK=function(t){return t.tagName==="SLOT"},HM=function(t){return t.tagName.indexOf("-")>0},gve=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,s=e.counterReset,i=!0;r!==null&&r.forEach(function(a){var l=n.counters[a.counter];l&&a.increment!==0&&(i=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=a.increment)});var o=[];return i&&s.forEach(function(a){var l=n.counters[a.counter];o.push(a.counter),l||(l=n.counters[a.counter]=[]),l.push(a.reset)}),o},t}(),zM={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},VM={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},yve={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},xve={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Rf=function(t,e,n,r,s,i){return t<e||t>n?Gy(t,s,i.length>0):r.integers.reduce(function(o,a,l){for(;t>=a;)t-=a,o+=r.values[l];return o},"")+i},nK=function(t,e,n,r){var s="";do n||t--,s=r(t)+s,t/=e;while(t*e>=e);return s},dr=function(t,e,n,r,s){var i=n-e+1;return(t<0?"-":"")+(nK(Math.abs(t),i,r,function(o){return fr(Math.floor(o%i)+e)})+s)},TA=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return nK(Math.abs(t),r,!1,function(s){return e[Math.floor(s%r)]})+n},Vf=1,zc=2,Vc=4,Dg=8,Fl=function(t,e,n,r,s,i){if(t<-9999||t>9999)return Gy(t,4,s.length>0);var o=Math.abs(t),a=s;if(o===0)return e[0]+a;for(var l=0;o>0&&l<=4;l++){var c=o%10;c===0&&Pr(i,Vf)&&a!==""?a=e[c]+a:c>1||c===1&&l===0||c===1&&l===1&&Pr(i,zc)||c===1&&l===1&&Pr(i,Vc)&&t>100||c===1&&l>1&&Pr(i,Dg)?a=e[c]+(l>0?n[l-1]:"")+a:c===1&&l>0&&(a=n[l-1]+a),o=Math.floor(o/10)}return(t<0?r:"")+a},WM="十百千萬",GM="拾佰仟萬",KM="マイナス",C4="마이너스",Gy=function(t,e,n){var r=n?". ":"",s=n?"、":"",i=n?", ":"",o=n?" ":"";switch(e){case 0:return"•"+o;case 1:return"◦"+o;case 2:return"◾"+o;case 5:var a=dr(t,48,57,!0,r);return a.length<4?"0"+a:a;case 4:return TA(t,"〇一二三四五六七八九",s);case 6:return Rf(t,1,3999,zM,3,r).toLowerCase();case 7:return Rf(t,1,3999,zM,3,r);case 8:return dr(t,945,969,!1,r);case 9:return dr(t,97,122,!1,r);case 10:return dr(t,65,90,!1,r);case 11:return dr(t,1632,1641,!0,r);case 12:case 49:return Rf(t,1,9999,VM,3,r);case 35:return Rf(t,1,9999,VM,3,r).toLowerCase();case 13:return dr(t,2534,2543,!0,r);case 14:case 30:return dr(t,6112,6121,!0,r);case 15:return TA(t,"子丑寅卯辰巳午未申酉戌亥",s);case 16:return TA(t,"甲乙丙丁戊己庚辛壬癸",s);case 17:case 48:return Fl(t,"零一二三四五六七八九",WM,"負",s,zc|Vc|Dg);case 47:return Fl(t,"零壹貳參肆伍陸柒捌玖",GM,"負",s,Vf|zc|Vc|Dg);case 42:return Fl(t,"零一二三四五六七八九",WM,"负",s,zc|Vc|Dg);case 41:return Fl(t,"零壹贰叁肆伍陆柒捌玖",GM,"负",s,Vf|zc|Vc|Dg);case 26:return Fl(t,"〇一二三四五六七八九","十百千万",KM,s,0);case 25:return Fl(t,"零壱弐参四伍六七八九","拾百千万",KM,s,Vf|zc|Vc);case 31:return Fl(t,"영일이삼사오육칠팔구","십백천만",C4,i,Vf|zc|Vc);case 33:return Fl(t,"零一二三四五六七八九","十百千萬",C4,i,0);case 32:return Fl(t,"零壹貳參四五六七八九","拾百千",C4,i,Vf|zc|Vc);case 18:return dr(t,2406,2415,!0,r);case 20:return Rf(t,1,19999,xve,3,r);case 21:return dr(t,2790,2799,!0,r);case 22:return dr(t,2662,2671,!0,r);case 22:return Rf(t,1,10999,yve,3,r);case 23:return TA(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return TA(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return dr(t,3302,3311,!0,r);case 28:return TA(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",s);case 29:return TA(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",s);case 34:return dr(t,3792,3801,!0,r);case 37:return dr(t,6160,6169,!0,r);case 38:return dr(t,4160,4169,!0,r);case 39:return dr(t,2918,2927,!0,r);case 40:return dr(t,1776,1785,!0,r);case 43:return dr(t,3046,3055,!0,r);case 44:return dr(t,3174,3183,!0,r);case 45:return dr(t,3664,3673,!0,r);case 46:return dr(t,3872,3881,!0,r);case 3:default:return dr(t,48,57,!0,r)}},rK="data-html2canvas-ignore",XM=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new gve,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,s=vve(e,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,a=s.contentWindow,l=a.document,c=Cve(s).then(function(){return Ks(r,void 0,void 0,function(){var u,A;return Es(this,function(d){switch(d.label){case 0:return this.scrolledElements.forEach(Eve),a&&(a.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==n.top||a.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-n.left,a.scrollY-n.top,0,0))),u=this.options.onclone,A=this.clonedReferenceElement,typeof A>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:d.sent(),d.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,wve(l)]:[3,4];case 3:d.sent(),d.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(l,A)}).then(function(){return s})]:[2,s]}})})});return l.open(),l.write(Bve(document.doctype)+"<html></html>"),Nve(this.referenceElement.ownerDocument,i,o),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),c},t.prototype.createElementClone=function(e){if(uk(e,2))debugger;if(ZG(e))return this.createCanvasClone(e);if(MM(e))return this.createVideoClone(e);if(QM(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return hk(n)&&(hk(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),HM(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return S4(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(i,o){return o&&typeof o.cssText=="string"?i+o.cssText:i},""),s=e.cloneNode(!1);return s.textContent=r,s}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var i=e.getContext("2d"),o=s.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var a=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(a){var l=a.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,n,r){(!uh(n)||!mve(n)&&!n.hasAttribute(rK)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!uh(n)||!QM(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var s=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(uh(i)&&tK(i)&&typeof i.assignedNodes=="function"){var o=i.assignedNodes();o.length&&o.forEach(function(a){return s.appendChildNode(n,a,r)})}else this.appendChildNode(n,i,r)},t.prototype.cloneNode=function(e,n){if(YG(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&uh(e)&&(fk(e)||nw(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var i=r.getComputedStyle(e),o=r.getComputedStyle(e,":before"),a=r.getComputedStyle(e,":after");this.referenceElement===e&&fk(s)&&(this.clonedReferenceElement=s),b_(s)&&Tve(s);var l=this.counters.parse(new NM(this.context,i)),c=this.resolvePseudoContent(e,s,o,ly.BEFORE);HM(e)&&(n=!0),MM(e)||this.cloneChildNodes(e,s,n),c&&s.insertBefore(c,s.firstChild);var u=this.resolvePseudoContent(e,s,a,ly.AFTER);return u&&s.appendChild(u),this.counters.pop(l),(i&&(this.options.copyStyles||nw(e))&&!eK(e)||n)&&S4(i,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(Xw(e)||qw(e))&&(Xw(s)||qw(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,s){var i=this;if(r){var o=r.content,a=n.ownerDocument;if(!(!a||!o||o==="none"||o==="-moz-alt-content"||r.display==="none")){this.counters.parse(new NM(this.context,r));var l=new dxe(this.context,r),c=a.createElement("html2canvaspseudoelement");S4(r,c),l.content.forEach(function(A){if(A.type===0)c.appendChild(a.createTextNode(A.value));else if(A.type===22){var d=a.createElement("img");d.src=A.value,d.style.opacity="1",c.appendChild(d)}else if(A.type===18){if(A.name==="attr"){var f=A.values.filter(dn);f.length&&c.appendChild(a.createTextNode(e.getAttribute(f[0].value)||""))}else if(A.name==="counter"){var h=A.values.filter(tp),p=h[0],m=h[1];if(p&&dn(p)){var y=i.counters.getCounterValue(p.value),x=m&&dn(m)?ck.parse(i.context,m.value):3;c.appendChild(a.createTextNode(Gy(y,x,!1)))}}else if(A.name==="counters"){var v=A.values.filter(tp),p=v[0],b=v[1],m=v[2];if(p&&dn(p)){var w=i.counters.getCounterValues(p.value),C=m&&dn(m)?ck.parse(i.context,m.value):3,B=b&&b.type===0?b.value:"",S=w.map(function(O){return Gy(O,C,!1)}).join(B);c.appendChild(a.createTextNode(S))}}}else if(A.type===20)switch(A.value){case"open-quote":c.appendChild(a.createTextNode(BM(l.quotes,i.quoteDepth++,!0)));break;case"close-quote":c.appendChild(a.createTextNode(BM(l.quotes,--i.quoteDepth,!1)));break;default:c.appendChild(a.createTextNode(A.value))}}),c.className=pk+" "+mk;var u=s===ly.BEFORE?" "+pk:" "+mk;return nw(n)?n.className.baseValue+=u:n.className+=u,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),ly;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(ly||(ly={}));var vve=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(rK,"true"),t.body.appendChild(n),n},bve=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},wve=function(t){return Promise.all([].slice.call(t.images,0).map(bve))},Cve=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var i=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(i),e(t))},50)}})},Sve=["all","d","content"],S4=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);Sve.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},Bve=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},Nve=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},Eve=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},Ive=":before",kve=":after",pk="___html2canvas___pseudoelement_before",mk="___html2canvas___pseudoelement_after",qM=`{
    content: "" !important;
    display: none !important;
}`,Tve=function(t){Fve(t,"."+pk+Ive+qM+`
         .`+mk+kve+qM)},Fve=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},sK=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),$ve=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(N4(e)||Rve(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Ks(this,void 0,void 0,function(){var n,r,s,i,o=this;return Es(this,function(a){switch(a.label){case 0:return n=sK.isSameOrigin(e),r=!B4(e)&&this._options.useCORS===!0&&hs.SUPPORT_CORS_IMAGES&&!n,s=!B4(e)&&!n&&!N4(e)&&typeof this._options.proxy=="string"&&hs.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!B4(e)&&!N4(e)&&!s&&!r?[2]:(i=e,s?[4,this.proxy(i)]:[3,2]);case 1:i=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,c){var u=new Image;u.onload=function(){return l(u)},u.onerror=c,(Pve(i)||r)&&(u.crossOrigin="anonymous"),u.src=i,u.complete===!0&&setTimeout(function(){return l(u)},500),o._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(i,o){var a=hs.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(a==="text")i(l.response);else{var A=new FileReader;A.addEventListener("load",function(){return i(A.result)},!1),A.addEventListener("error",function(d){return o(d)},!1),A.readAsDataURL(l.response)}else o("Failed to proxy resource "+s+" with status code "+l.status)},l.onerror=o;var c=r.indexOf("?")>-1?"&":"?";if(l.open("GET",""+r+c+"url="+encodeURIComponent(e)+"&responseType="+a),a!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=a),n._options.imageTimeout){var u=n._options.imageTimeout;l.timeout=u,l.ontimeout=function(){return o("Timed out ("+u+"ms) proxying "+s)}}l.send()})},t}(),_ve=/^data:image\/svg\+xml/i,Ove=/^data:image\/.*;base64,/i,Dve=/^data:image\/.*/i,Rve=function(t){return hs.SUPPORT_SVG_DRAWING||!Uve(t)},B4=function(t){return Dve.test(t)},Pve=function(t){return Ove.test(t)},N4=function(t){return t.substr(0,4)==="blob"},Uve=function(t){return t.substr(-3).toLowerCase()==="svg"||_ve.test(t)},Ve=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),Pf=function(t,e,n){return new Ve(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},eb=function(){function t(e,n,r,s){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=s}return t.prototype.subdivide=function(e,n){var r=Pf(this.start,this.startControl,e),s=Pf(this.startControl,this.endControl,e),i=Pf(this.endControl,this.end,e),o=Pf(r,s,e),a=Pf(s,i,e),l=Pf(o,a,e);return n?new t(this.start,r,o,l):new t(l,a,i,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),wo=function(t){return t.type===1},Lve=function(){function t(e){var n=e.styles,r=e.bounds,s=_g(n.borderTopLeftRadius,r.width,r.height),i=s[0],o=s[1],a=_g(n.borderTopRightRadius,r.width,r.height),l=a[0],c=a[1],u=_g(n.borderBottomRightRadius,r.width,r.height),A=u[0],d=u[1],f=_g(n.borderBottomLeftRadius,r.width,r.height),h=f[0],p=f[1],m=[];m.push((i+l)/r.width),m.push((h+A)/r.width),m.push((o+p)/r.height),m.push((c+d)/r.height);var y=Math.max.apply(Math,m);y>1&&(i/=y,o/=y,l/=y,c/=y,A/=y,d/=y,h/=y,p/=y);var x=r.width-l,v=r.height-d,b=r.width-A,w=r.height-p,C=n.borderTopWidth,B=n.borderRightWidth,S=n.borderBottomWidth,N=n.borderLeftWidth,k=Sn(n.paddingTop,e.bounds.width),O=Sn(n.paddingRight,e.bounds.width),U=Sn(n.paddingBottom,e.bounds.width),P=Sn(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?Pn(r.left+N/3,r.top+C/3,i-N/3,o-C/3,Zt.TOP_LEFT):new Ve(r.left+N/3,r.top+C/3),this.topRightBorderDoubleOuterBox=i>0||o>0?Pn(r.left+x,r.top+C/3,l-B/3,c-C/3,Zt.TOP_RIGHT):new Ve(r.left+r.width-B/3,r.top+C/3),this.bottomRightBorderDoubleOuterBox=A>0||d>0?Pn(r.left+b,r.top+v,A-B/3,d-S/3,Zt.BOTTOM_RIGHT):new Ve(r.left+r.width-B/3,r.top+r.height-S/3),this.bottomLeftBorderDoubleOuterBox=h>0||p>0?Pn(r.left+N/3,r.top+w,h-N/3,p-S/3,Zt.BOTTOM_LEFT):new Ve(r.left+N/3,r.top+r.height-S/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?Pn(r.left+N*2/3,r.top+C*2/3,i-N*2/3,o-C*2/3,Zt.TOP_LEFT):new Ve(r.left+N*2/3,r.top+C*2/3),this.topRightBorderDoubleInnerBox=i>0||o>0?Pn(r.left+x,r.top+C*2/3,l-B*2/3,c-C*2/3,Zt.TOP_RIGHT):new Ve(r.left+r.width-B*2/3,r.top+C*2/3),this.bottomRightBorderDoubleInnerBox=A>0||d>0?Pn(r.left+b,r.top+v,A-B*2/3,d-S*2/3,Zt.BOTTOM_RIGHT):new Ve(r.left+r.width-B*2/3,r.top+r.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=h>0||p>0?Pn(r.left+N*2/3,r.top+w,h-N*2/3,p-S*2/3,Zt.BOTTOM_LEFT):new Ve(r.left+N*2/3,r.top+r.height-S*2/3),this.topLeftBorderStroke=i>0||o>0?Pn(r.left+N/2,r.top+C/2,i-N/2,o-C/2,Zt.TOP_LEFT):new Ve(r.left+N/2,r.top+C/2),this.topRightBorderStroke=i>0||o>0?Pn(r.left+x,r.top+C/2,l-B/2,c-C/2,Zt.TOP_RIGHT):new Ve(r.left+r.width-B/2,r.top+C/2),this.bottomRightBorderStroke=A>0||d>0?Pn(r.left+b,r.top+v,A-B/2,d-S/2,Zt.BOTTOM_RIGHT):new Ve(r.left+r.width-B/2,r.top+r.height-S/2),this.bottomLeftBorderStroke=h>0||p>0?Pn(r.left+N/2,r.top+w,h-N/2,p-S/2,Zt.BOTTOM_LEFT):new Ve(r.left+N/2,r.top+r.height-S/2),this.topLeftBorderBox=i>0||o>0?Pn(r.left,r.top,i,o,Zt.TOP_LEFT):new Ve(r.left,r.top),this.topRightBorderBox=l>0||c>0?Pn(r.left+x,r.top,l,c,Zt.TOP_RIGHT):new Ve(r.left+r.width,r.top),this.bottomRightBorderBox=A>0||d>0?Pn(r.left+b,r.top+v,A,d,Zt.BOTTOM_RIGHT):new Ve(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=h>0||p>0?Pn(r.left,r.top+w,h,p,Zt.BOTTOM_LEFT):new Ve(r.left,r.top+r.height),this.topLeftPaddingBox=i>0||o>0?Pn(r.left+N,r.top+C,Math.max(0,i-N),Math.max(0,o-C),Zt.TOP_LEFT):new Ve(r.left+N,r.top+C),this.topRightPaddingBox=l>0||c>0?Pn(r.left+Math.min(x,r.width-B),r.top+C,x>r.width+B?0:Math.max(0,l-B),Math.max(0,c-C),Zt.TOP_RIGHT):new Ve(r.left+r.width-B,r.top+C),this.bottomRightPaddingBox=A>0||d>0?Pn(r.left+Math.min(b,r.width-N),r.top+Math.min(v,r.height-S),Math.max(0,A-B),Math.max(0,d-S),Zt.BOTTOM_RIGHT):new Ve(r.left+r.width-B,r.top+r.height-S),this.bottomLeftPaddingBox=h>0||p>0?Pn(r.left+N,r.top+Math.min(w,r.height-S),Math.max(0,h-N),Math.max(0,p-S),Zt.BOTTOM_LEFT):new Ve(r.left+N,r.top+r.height-S),this.topLeftContentBox=i>0||o>0?Pn(r.left+N+P,r.top+C+k,Math.max(0,i-(N+P)),Math.max(0,o-(C+k)),Zt.TOP_LEFT):new Ve(r.left+N+P,r.top+C+k),this.topRightContentBox=l>0||c>0?Pn(r.left+Math.min(x,r.width+N+P),r.top+C+k,x>r.width+N+P?0:l-N+P,c-(C+k),Zt.TOP_RIGHT):new Ve(r.left+r.width-(B+O),r.top+C+k),this.bottomRightContentBox=A>0||d>0?Pn(r.left+Math.min(b,r.width-(N+P)),r.top+Math.min(v,r.height+C+k),Math.max(0,A-(B+O)),d-(S+U),Zt.BOTTOM_RIGHT):new Ve(r.left+r.width-(B+O),r.top+r.height-(S+U)),this.bottomLeftContentBox=h>0||p>0?Pn(r.left+N+P,r.top+w,Math.max(0,h-(N+P)),p-(S+U),Zt.BOTTOM_LEFT):new Ve(r.left+N+P,r.top+r.height-(S+U))}return t}(),Zt;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Zt||(Zt={}));var Pn=function(t,e,n,r,s){var i=4*((Math.sqrt(2)-1)/3),o=n*i,a=r*i,l=t+n,c=e+r;switch(s){case Zt.TOP_LEFT:return new eb(new Ve(t,c),new Ve(t,c-a),new Ve(l-o,e),new Ve(l,e));case Zt.TOP_RIGHT:return new eb(new Ve(t,e),new Ve(t+o,e),new Ve(l,c-a),new Ve(l,c));case Zt.BOTTOM_RIGHT:return new eb(new Ve(l,e),new Ve(l,e+a),new Ve(t+o,c),new Ve(t,c));case Zt.BOTTOM_LEFT:default:return new eb(new Ve(l,c),new Ve(l-o,c),new Ve(t,e+a),new Ve(t,e))}},Yw=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},jve=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Jw=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},Mve=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),tb=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),Qve=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),Hve=function(t){return t.type===0},iK=function(t){return t.type===1},zve=function(t){return t.type===2},YM=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},Vve=function(t,e,n,r,s){return t.map(function(i,o){switch(o){case 0:return i.add(e,n);case 1:return i.add(e+r,n);case 2:return i.add(e+r,n+s);case 3:return i.add(e,n+s)}return i})},oK=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),aK=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new Lve(this.container),this.container.styles.opacity<1&&this.effects.push(new Qve(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new Mve(r,s,i))}if(this.container.styles.overflowX!==0){var o=Yw(this.curves),a=Jw(this.curves);YM(o,a)?this.effects.push(new tb(o,6)):(this.effects.push(new tb(o,2)),this.effects.push(new tb(a,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var i=r.effects.filter(function(l){return!iK(l)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,i),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var o=Yw(r.curves),a=Jw(r.curves);YM(o,a)||s.unshift(new tb(a,6))}}else s.unshift.apply(s,i);r=r.parent}return s.filter(function(l){return Pr(l.target,e)})},t}(),gk=function(t,e,n,r){t.container.elements.forEach(function(s){var i=Pr(s.flags,4),o=Pr(s.flags,2),a=new aK(s,t);Pr(s.styles.display,2048)&&r.push(a);var l=Pr(s.flags,8)?[]:r;if(i||o){var c=i||s.styles.isPositioned()?n:e,u=new oK(a);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var A=s.styles.zIndex.order;if(A<0){var d=0;c.negativeZIndex.some(function(h,p){return A>h.element.container.styles.zIndex.order?(d=p,!1):d>0}),c.negativeZIndex.splice(d,0,u)}else if(A>0){var f=0;c.positiveZIndex.some(function(h,p){return A>=h.element.container.styles.zIndex.order?(f=p+1,!1):f>0}),c.positiveZIndex.splice(f,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else s.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);gk(a,u,i?u:n,l)}else s.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),gk(a,e,n,l);Pr(s.flags,8)&&lK(s,l)})},lK=function(t,e){for(var n=t instanceof dk?t.start:1,r=t instanceof dk?t.reversed:!1,s=0;s<e.length;s++){var i=e[s];i.container instanceof VG&&typeof i.container.value=="number"&&i.container.value!==0&&(n=i.container.value),i.listValue=Gy(n,i.container.styles.listStyleType,!0),n+=r?-1:1}},Wve=function(t){var e=new aK(t,null),n=new oK(e),r=[];return gk(e,n,n,r),lK(e.container,r),n},JM=function(t,e){switch(e){case 0:return Eo(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Eo(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Eo(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Eo(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},Gve=function(t,e){switch(e){case 0:return Eo(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Eo(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Eo(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Eo(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},Kve=function(t,e){switch(e){case 0:return Eo(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Eo(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Eo(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Eo(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},Xve=function(t,e){switch(e){case 0:return nb(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return nb(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return nb(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return nb(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},nb=function(t,e){var n=[];return wo(t)?n.push(t.subdivide(.5,!1)):n.push(t),wo(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},Eo=function(t,e,n,r){var s=[];return wo(t)?s.push(t.subdivide(.5,!1)):s.push(t),wo(n)?s.push(n.subdivide(.5,!0)):s.push(n),wo(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),wo(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},cK=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Zw=function(t){var e=t.styles,n=t.bounds,r=Sn(e.paddingLeft,n.width),s=Sn(e.paddingRight,n.width),i=Sn(e.paddingTop,n.width),o=Sn(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+s),-(e.borderTopWidth+e.borderBottomWidth+i+o))},qve=function(t,e){return t===0?e.bounds:t===2?Zw(e):cK(e)},Yve=function(t,e){return t===0?e.bounds:t===2?Zw(e):cK(e)},E4=function(t,e,n){var r=qve(Wf(t.styles.backgroundOrigin,e),t),s=Yve(Wf(t.styles.backgroundClip,e),t),i=Jve(Wf(t.styles.backgroundSize,e),n,r),o=i[0],a=i[1],l=_g(Wf(t.styles.backgroundPosition,e),r.width-o,r.height-a),c=Zve(Wf(t.styles.backgroundRepeat,e),l,i,r,s),u=Math.round(r.left+l[0]),A=Math.round(r.top+l[1]);return[c,u,A,o,a]},Uf=function(t){return dn(t)&&t.value===Bh.AUTO},rb=function(t){return typeof t=="number"},Jve=function(t,e,n){var r=e[0],s=e[1],i=e[2],o=t[0],a=t[1];if(!o)return[0,0];if(br(o)&&a&&br(a))return[Sn(o,n.width),Sn(a,n.height)];var l=rb(i);if(dn(o)&&(o.value===Bh.CONTAIN||o.value===Bh.COVER)){if(rb(i)){var c=n.width/n.height;return c<i!=(o.value===Bh.COVER)?[n.width,n.width/i]:[n.height*i,n.height]}return[n.width,n.height]}var u=rb(r),A=rb(s),d=u||A;if(Uf(o)&&(!a||Uf(a))){if(u&&A)return[r,s];if(!l&&!d)return[n.width,n.height];if(d&&l){var f=u?r:s*i,h=A?s:r/i;return[f,h]}var p=u?r:n.width,m=A?s:n.height;return[p,m]}if(l){var y=0,x=0;return br(o)?y=Sn(o,n.width):br(a)&&(x=Sn(a,n.height)),Uf(o)?y=x*i:(!a||Uf(a))&&(x=y/i),[y,x]}var v=null,b=null;if(br(o)?v=Sn(o,n.width):a&&br(a)&&(b=Sn(a,n.height)),v!==null&&(!a||Uf(a))&&(b=u&&A?v/r*s:n.height),b!==null&&Uf(o)&&(v=u&&A?b/s*r:n.width),v!==null&&b!==null)return[v,b];throw new Error("Unable to calculate background-size for element")},Wf=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},Zve=function(t,e,n,r,s){var i=e[0],o=e[1],a=n[0],l=n[1];switch(t){case 2:return[new Ve(Math.round(r.left),Math.round(r.top+o)),new Ve(Math.round(r.left+r.width),Math.round(r.top+o)),new Ve(Math.round(r.left+r.width),Math.round(l+r.top+o)),new Ve(Math.round(r.left),Math.round(l+r.top+o))];case 3:return[new Ve(Math.round(r.left+i),Math.round(r.top)),new Ve(Math.round(r.left+i+a),Math.round(r.top)),new Ve(Math.round(r.left+i+a),Math.round(r.height+r.top)),new Ve(Math.round(r.left+i),Math.round(r.height+r.top))];case 1:return[new Ve(Math.round(r.left+i),Math.round(r.top+o)),new Ve(Math.round(r.left+i+a),Math.round(r.top+o)),new Ve(Math.round(r.left+i+a),Math.round(r.top+o+l)),new Ve(Math.round(r.left+i),Math.round(r.top+o+l))];default:return[new Ve(Math.round(s.left),Math.round(s.top)),new Ve(Math.round(s.left+s.width),Math.round(s.top)),new Ve(Math.round(s.left+s.width),Math.round(s.height+s.top)),new Ve(Math.round(s.left),Math.round(s.height+s.top))]}},e1e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",ZM="Hidden Text",t1e=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",o.appendChild(r),s.src=e1e,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=n,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(ZM)),r.appendChild(i),r.appendChild(s);var a=s.offsetTop-i.offsetTop+2;r.removeChild(i),r.appendChild(this._document.createTextNode(ZM)),r.style.lineHeight="normal",s.style.verticalAlign="super";var l=s.offsetTop-r.offsetTop+2;return o.removeChild(r),{baseline:a,middle:l}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),uK=function(){function t(e,n){this.context=e,this.options=n}return t}(),n1e=1e4,r1e=function(t){Ta(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new t1e(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},e.prototype.applyEffect=function(n){this.ctx.save(),zve(n)&&(this.ctx.globalAlpha=n.opacity),Hve(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),iK(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Ks(this,void 0,void 0,function(){var r;return Es(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Ks(this,void 0,void 0,function(){return Es(this,function(r){switch(r.label){case 0:if(Pr(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,s){var i=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var o=x_(n.text);o.reduce(function(a,l){return i.ctx.fillText(l,a,n.bounds.top+s),a+i.ctx.measureText(l).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),s=l1e(n.fontFamily).join(", "),i=ax(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,i,s].join(" "),s,i]},e.prototype.renderTextNode=function(n,r){return Ks(this,void 0,void 0,function(){var s,i,o,a,l,c,u,A,d=this;return Es(this,function(f){return s=this.createFontStyle(r),i=s[0],o=s[1],a=s[2],this.ctx.font=i,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(o,a),c=l.baseline,u=l.middle,A=r.paintOrder,n.textBounds.forEach(function(h){A.forEach(function(p){switch(p){case 0:d.ctx.fillStyle=Kr(r.color),d.renderTextWithLetterSpacing(h,r.letterSpacing,c);var m=r.textShadow;m.length&&h.text.trim().length&&(m.slice(0).reverse().forEach(function(y){d.ctx.shadowColor=Kr(y.color),d.ctx.shadowOffsetX=y.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=y.offsetY.number*d.options.scale,d.ctx.shadowBlur=y.blur.number,d.renderTextWithLetterSpacing(h,r.letterSpacing,c)}),d.ctx.shadowColor="",d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),r.textDecorationLine.length&&(d.ctx.fillStyle=Kr(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(y){switch(y){case 1:d.ctx.fillRect(h.bounds.left,Math.round(h.bounds.top+c),h.bounds.width,1);break;case 2:d.ctx.fillRect(h.bounds.left,Math.round(h.bounds.top),h.bounds.width,1);break;case 3:d.ctx.fillRect(h.bounds.left,Math.ceil(h.bounds.top+u),h.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&h.text.trim().length&&(d.ctx.strokeStyle=Kr(r.webkitTextStrokeColor),d.ctx.lineWidth=r.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?"miter":"round",d.ctx.strokeText(h.text,h.bounds.left,h.bounds.top+c)),d.ctx.strokeStyle="",d.ctx.lineWidth=0,d.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var i=Zw(n),o=Jw(r);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Ks(this,void 0,void 0,function(){var r,s,i,o,a,l,x,x,c,u,A,d,b,f,h,w,p,m,y,x,v,b,w;return Es(this,function(C){switch(C.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,i=r.styles,o=0,a=r.textNodes,C.label=1;case 1:return o<a.length?(l=a[o],[4,this.renderTextNode(l,i)]):[3,4];case 2:C.sent(),C.label=3;case 3:return o++,[3,1];case 4:if(!(r instanceof QG))return[3,8];C.label=5;case 5:return C.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return x=C.sent(),this.renderReplacedElement(r,s,x),[3,8];case 7:return C.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof HG&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof zG))return[3,12];C.label=9;case 9:return C.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return x=C.sent(),this.renderReplacedElement(r,s,x),[3,12];case 11:return C.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof KG&&r.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,c.render(r.tree)]):[3,14];case 13:u=C.sent(),r.width&&r.height&&this.ctx.drawImage(u,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),C.label=14;case 14:if(r instanceof v_&&(A=Math.min(r.bounds.width,r.bounds.height),r.type===Gw?r.checked&&(this.ctx.save(),this.path([new Ve(r.bounds.left+A*.39363,r.bounds.top+A*.79),new Ve(r.bounds.left+A*.16,r.bounds.top+A*.5549),new Ve(r.bounds.left+A*.27347,r.bounds.top+A*.44071),new Ve(r.bounds.left+A*.39694,r.bounds.top+A*.5649),new Ve(r.bounds.left+A*.72983,r.bounds.top+A*.23),new Ve(r.bounds.left+A*.84,r.bounds.top+A*.34085),new Ve(r.bounds.left+A*.39363,r.bounds.top+A*.79)]),this.ctx.fillStyle=Kr(jM),this.ctx.fill(),this.ctx.restore()):r.type===Kw&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+A/2,r.bounds.top+A/2,A/4,0,Math.PI*2,!0),this.ctx.fillStyle=Kr(jM),this.ctx.fill(),this.ctx.restore())),s1e(r)&&r.value.length){switch(d=this.createFontStyle(i),b=d[0],f=d[1],h=this.fontMetrics.getMetrics(b,f).baseline,this.ctx.font=b,this.ctx.fillStyle=Kr(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=o1e(r.styles.textAlign),w=Zw(r),p=0,r.styles.textAlign){case 1:p+=w.width/2;break;case 2:p+=w.width;break}m=w.add(p,0,0,-w.height/2+1),this.ctx.save(),this.path([new Ve(w.left,w.top),new Ve(w.left+w.width,w.top),new Ve(w.left+w.width,w.top+w.height),new Ve(w.left,w.top+w.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new ay(r.value,m),i.letterSpacing,h),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Pr(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(y=r.styles.listStyleImage,y.type!==0)return[3,18];x=void 0,v=y.url,C.label=15;case 15:return C.trys.push([15,17,,18]),[4,this.context.cache.match(v)];case 16:return x=C.sent(),this.ctx.drawImage(x,r.bounds.left-(x.width+10),r.bounds.top),[3,18];case 17:return C.sent(),this.context.logger.error("Error loading list-style-image "+v),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(b=this.createFontStyle(i)[0],this.ctx.font=b,this.ctx.fillStyle=Kr(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",w=new dc(r.bounds.left,r.bounds.top+Sn(r.styles.paddingTop,r.bounds.width),r.bounds.width,CM(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new ay(n.listValue,w),i.letterSpacing,CM(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),C.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Ks(this,void 0,void 0,function(){var r,s,y,i,o,y,a,l,y,c,u,y,A,d,y,f,h,y,p,m,y;return Es(this,function(x){switch(x.label){case 0:if(Pr(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:x.sent(),r=0,s=n.negativeZIndex,x.label=2;case 2:return r<s.length?(y=s[r],[4,this.renderStack(y)]):[3,5];case 3:x.sent(),x.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:x.sent(),i=0,o=n.nonInlineLevel,x.label=7;case 7:return i<o.length?(y=o[i],[4,this.renderNode(y)]):[3,10];case 8:x.sent(),x.label=9;case 9:return i++,[3,7];case 10:a=0,l=n.nonPositionedFloats,x.label=11;case 11:return a<l.length?(y=l[a],[4,this.renderStack(y)]):[3,14];case 12:x.sent(),x.label=13;case 13:return a++,[3,11];case 14:c=0,u=n.nonPositionedInlineLevel,x.label=15;case 15:return c<u.length?(y=u[c],[4,this.renderStack(y)]):[3,18];case 16:x.sent(),x.label=17;case 17:return c++,[3,15];case 18:A=0,d=n.inlineLevel,x.label=19;case 19:return A<d.length?(y=d[A],[4,this.renderNode(y)]):[3,22];case 20:x.sent(),x.label=21;case 21:return A++,[3,19];case 22:f=0,h=n.zeroOrAutoZIndexOrTransformedOrOpacity,x.label=23;case 23:return f<h.length?(y=h[f],[4,this.renderStack(y)]):[3,26];case 24:x.sent(),x.label=25;case 25:return f++,[3,23];case 26:p=0,m=n.positiveZIndex,x.label=27;case 27:return p<m.length?(y=m[p],[4,this.renderStack(y)]):[3,30];case 28:x.sent(),x.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(s,i){var o=wo(s)?s.start:s;i===0?r.ctx.moveTo(o.x,o.y):r.ctx.lineTo(o.x,o.y),wo(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(n,r,s,i){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},e.prototype.resizeImage=function(n,r,s){var i;if(n.width===r&&n.height===s)return n;var o=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,a=o.createElement("canvas");a.width=Math.max(1,r),a.height=Math.max(1,s);var l=a.getContext("2d");return l.drawImage(n,0,0,n.width,n.height,0,0,r,s),a},e.prototype.renderBackgroundImage=function(n){return Ks(this,void 0,void 0,function(){var r,s,i,o,a,l;return Es(this,function(c){switch(c.label){case 0:r=n.styles.backgroundImage.length-1,s=function(u){var A,d,f,k,j,G,P,V,S,h,k,j,G,P,V,p,m,y,x,v,b,w,C,B,S,N,k,O,U,P,V,W,j,G,D,M,q,Z,te,ue,de,le;return Es(this,function(he){switch(he.label){case 0:if(u.type!==0)return[3,5];A=void 0,d=u.url,he.label=1;case 1:return he.trys.push([1,3,,4]),[4,i.context.cache.match(d)];case 2:return A=he.sent(),[3,4];case 3:return he.sent(),i.context.logger.error("Error loading background-image "+d),[3,4];case 4:return A&&(f=E4(n,r,[A.width,A.height,A.width/A.height]),k=f[0],j=f[1],G=f[2],P=f[3],V=f[4],S=i.ctx.createPattern(i.resizeImage(A,P,V),"repeat"),i.renderRepeat(k,S,j,G)),[3,6];case 5:Hye(u)?(h=E4(n,r,[null,null,null]),k=h[0],j=h[1],G=h[2],P=h[3],V=h[4],p=Uye(u.angle,P,V),m=p[0],y=p[1],x=p[2],v=p[3],b=p[4],w=document.createElement("canvas"),w.width=P,w.height=V,C=w.getContext("2d"),B=C.createLinearGradient(y,v,x,b),bM(u.stops,m).forEach(function(ke){return B.addColorStop(ke.stop,Kr(ke.color))}),C.fillStyle=B,C.fillRect(0,0,P,V),P>0&&V>0&&(S=i.ctx.createPattern(w,"repeat"),i.renderRepeat(k,S,j,G))):zye(u)&&(N=E4(n,r,[null,null,null]),k=N[0],O=N[1],U=N[2],P=N[3],V=N[4],W=u.position.length===0?[m_]:u.position,j=Sn(W[0],P),G=Sn(W[W.length-1],V),D=Lye(u,j,G,P,V),M=D[0],q=D[1],M>0&&q>0&&(Z=i.ctx.createRadialGradient(O+j,U+G,0,O+j,U+G,M),bM(u.stops,M*2).forEach(function(ke){return Z.addColorStop(ke.stop,Kr(ke.color))}),i.path(k),i.ctx.fillStyle=Z,M!==q?(te=n.bounds.left+.5*n.bounds.width,ue=n.bounds.top+.5*n.bounds.height,de=q/M,le=1/de,i.ctx.save(),i.ctx.translate(te,ue),i.ctx.transform(1,0,0,de,0,0),i.ctx.translate(-te,-ue),i.ctx.fillRect(O,le*(U-ue)+ue,P,V*le),i.ctx.restore()):i.ctx.fill())),he.label=6;case 6:return r--,[2]}})},i=this,o=0,a=n.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return o<a.length?(l=a[o],[5,s(l)]):[3,4];case 2:c.sent(),c.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,s){return Ks(this,void 0,void 0,function(){return Es(this,function(i){return this.path(JM(s,r)),this.ctx.fillStyle=Kr(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,s,i){return Ks(this,void 0,void 0,function(){var o,a;return Es(this,function(l){switch(l.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,i)]:[3,2];case 1:return l.sent(),[2];case 2:return o=Gve(i,s),this.path(o),this.ctx.fillStyle=Kr(n),this.ctx.fill(),a=Kve(i,s),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Ks(this,void 0,void 0,function(){var r,s,i,o,a,l,c,u,A=this;return Es(this,function(d){switch(d.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!Tu(r.backgroundColor)||r.backgroundImage.length,i=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],o=i1e(Wf(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),Tu(r.backgroundColor)||(this.ctx.fillStyle=Kr(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:d.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(f){A.ctx.save();var h=Yw(n.curves),p=f.inset?0:n1e,m=Vve(h,-p+(f.inset?1:-1)*f.spread.number,(f.inset?1:-1)*f.spread.number,f.spread.number*(f.inset?-2:2),f.spread.number*(f.inset?-2:2));f.inset?(A.path(h),A.ctx.clip(),A.mask(m)):(A.mask(h),A.ctx.clip(),A.path(m)),A.ctx.shadowOffsetX=f.offsetX.number+p,A.ctx.shadowOffsetY=f.offsetY.number,A.ctx.shadowColor=Kr(f.color),A.ctx.shadowBlur=f.blur.number,A.ctx.fillStyle=f.inset?Kr(f.color):"rgba(0,0,0,1)",A.ctx.fill(),A.ctx.restore()}),d.label=2;case 2:a=0,l=0,c=i,d.label=3;case 3:return l<c.length?(u=c[l],u.style!==0&&!Tu(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,a,n.curves,2)]:[3,11]):[3,13];case 4:return d.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,a,n.curves,3)];case 6:return d.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,a,n.curves)];case 8:return d.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,a,n.curves)];case 10:d.sent(),d.label=11;case 11:a++,d.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,s,i,o){return Ks(this,void 0,void 0,function(){var a,l,c,u,A,d,f,h,p,m,y,x,v,b,w,C,w,C;return Es(this,function(B){return this.ctx.save(),a=Xve(i,s),l=JM(i,s),o===2&&(this.path(l),this.ctx.clip()),wo(l[0])?(c=l[0].start.x,u=l[0].start.y):(c=l[0].x,u=l[0].y),wo(l[1])?(A=l[1].end.x,d=l[1].end.y):(A=l[1].x,d=l[1].y),s===0||s===2?f=Math.abs(c-A):f=Math.abs(u-d),this.ctx.beginPath(),o===3?this.formatPath(a):this.formatPath(l.slice(0,2)),h=r<3?r*3:r*2,p=r<3?r*2:r,o===3&&(h=r,p=r),m=!0,f<=h*2?m=!1:f<=h*2+p?(y=f/(2*h+p),h*=y,p*=y):(x=Math.floor((f+p)/(h+p)),v=(f-x*h)/(x-1),b=(f-(x+1)*h)/x,p=b<=0||Math.abs(p-v)<Math.abs(p-b)?v:b),m&&(o===3?this.ctx.setLineDash([0,h+p]):this.ctx.setLineDash([h,p])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Kr(n),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(wo(l[0])&&(w=l[3],C=l[0],this.ctx.beginPath(),this.formatPath([new Ve(w.end.x,w.end.y),new Ve(C.start.x,C.start.y)]),this.ctx.stroke()),wo(l[1])&&(w=l[1],C=l[2],this.ctx.beginPath(),this.formatPath([new Ve(w.end.x,w.end.y),new Ve(C.start.x,C.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Ks(this,void 0,void 0,function(){var r;return Es(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Kr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=Wve(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(uK),s1e=function(t){return t instanceof GG||t instanceof WG?!0:t instanceof v_&&t.type!==Kw&&t.type!==Gw},i1e=function(t,e){switch(t){case 0:return Yw(e);case 2:return jve(e);case 1:default:return Jw(e)}},o1e=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},a1e=["-apple-system","system-ui"],l1e=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return a1e.indexOf(e)===-1}):t},c1e=function(t){Ta(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return e.prototype.render=function(n){return Ks(this,void 0,void 0,function(){var r,s;return Es(this,function(i){switch(i.label){case 0:return r=Ak(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,u1e(r)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Kr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(uK),u1e=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},A1e=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,D1([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,D1([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,D1([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,D1([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),d1e=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new A1e({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new $ve(this,e)}return t.instanceCount=1,t}(),f1e=function(t,e){return e===void 0&&(e={}),h1e(t,e)};typeof window<"u"&&sK.setContext(window);var h1e=function(t,e){return Ks(void 0,void 0,void 0,function(){var n,r,s,i,o,a,l,c,u,A,d,f,h,p,m,y,x,v,b,w,B,C,B,S,N,k,O,U,P,V,W,j,G,D,M,q,Z,te,ue,de;return Es(this,function(le){switch(le.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(S=e.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(N=e.imageTimeout)!==null&&N!==void 0?N:15e3,proxy:e.proxy,useCORS:(k=e.useCORS)!==null&&k!==void 0?k:!1},i=qI({logging:(O=e.logging)!==null&&O!==void 0?O:!0,cache:e.cache},s),o={windowWidth:(U=e.windowWidth)!==null&&U!==void 0?U:r.innerWidth,windowHeight:(P=e.windowHeight)!==null&&P!==void 0?P:r.innerHeight,scrollX:(V=e.scrollX)!==null&&V!==void 0?V:r.pageXOffset,scrollY:(W=e.scrollY)!==null&&W!==void 0?W:r.pageYOffset},a=new dc(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),l=new d1e(i,a),c=(j=e.foreignObjectRendering)!==null&&j!==void 0?j:!1,u={allowTaint:(G=e.allowTaint)!==null&&G!==void 0?G:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},l.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),A=new XM(l,t,u),d=A.clonedReferenceElement,d?[4,A.toIFrame(n,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return f=le.sent(),h=b_(d)||pve(d)?Vme(d.ownerDocument):lS(l,d),p=h.width,m=h.height,y=h.left,x=h.top,v=p1e(l,d,e.backgroundColor),b={canvas:e.canvas,backgroundColor:v,scale:(M=(D=e.scale)!==null&&D!==void 0?D:r.devicePixelRatio)!==null&&M!==void 0?M:1,x:((q=e.x)!==null&&q!==void 0?q:0)+y,y:((Z=e.y)!==null&&Z!==void 0?Z:0)+x,width:(te=e.width)!==null&&te!==void 0?te:Math.ceil(p),height:(ue=e.height)!==null&&ue!==void 0?ue:Math.ceil(m)},c?(l.logger.debug("Document cloned, using foreign object rendering"),B=new c1e(l,b),[4,B.render(d)]):[3,3];case 2:return w=le.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+y+","+x+" with size "+p+"x"+m+" using computed rendering"),l.logger.debug("Starting DOM parsing"),C=qG(l,d),v===C.styles.backgroundColor&&(C.styles.backgroundColor=nc.TRANSPARENT),l.logger.debug("Starting renderer for element at "+b.x+","+b.y+" with size "+b.width+"x"+b.height),B=new r1e(l,b),[4,B.render(C)];case 4:w=le.sent(),le.label=5;case 5:return(!((de=e.removeContainer)!==null&&de!==void 0)||de)&&(XM.destroy(f)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,w]}})})},p1e=function(t,e,n){var r=e.ownerDocument,s=r.documentElement?iy(t,getComputedStyle(r.documentElement).backgroundColor):nc.TRANSPARENT,i=r.body?iy(t,getComputedStyle(r.body).backgroundColor):nc.TRANSPARENT,o=typeof n=="string"?iy(t,n):n===null?nc.TRANSPARENT:4294967295;return e===r.documentElement?Tu(s)?Tu(i)?o:i:s:o};const I4=({children:t,pageNumber:e,totalPages:n,title:r,onExportImage:s})=>{const i=z.useRef(null),o=async()=>{if(i.current)try{const l=(await f1e(i.current,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff"})).toDataURL("image/png");if(s)s(l,e);else{const c=document.createElement("a");c.download=`${r}-page-${e}.png`,c.href=l,c.click()}}catch(a){console.error("이미지 내보내기 실패:",a),alert("이미지 내보내기에 실패했습니다.")}};return g.jsxs("div",{className:"relative",children:[g.jsxs("div",{ref:i,className:"bg-white mx-auto shadow-lg",style:{width:"210mm",height:"297mm",padding:"20mm",boxSizing:"border-box",position:"relative",overflow:"hidden"},children:[g.jsxs("div",{className:"border-b-2 border-gray-300 pb-3 mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:r}),g.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Page ",e," of ",n]})]}),g.jsx("div",{className:"report-content",children:t}),g.jsxs("div",{className:"absolute bottom-5 left-5 right-5 text-center text-xs text-gray-400 border-t border-gray-200 pt-2",children:["문해력 평가 시스템 | 생성일: ",new Date().toLocaleDateString("ko-KR")]})]}),g.jsx("div",{className:"flex justify-center mt-4 gap-2 print:hidden",children:g.jsxs("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:["📸 이미지로 저장 (Page ",e,")"]})})]})};Xp.register(ch,Ch,nl,ZW,f_,A_,Eg,Hy,zy,Sh,d_);function m1e(){const{resultId:t}=of(),[e,n]=z.useState(null),[r,s]=z.useState(!0);z.useEffect(()=>{i()},[t]);const i=async()=>{try{s(!0);const p=await bt.get(`/api/v1/reports/results/${t}/detailed`);n(p.data.data)}catch(p){console.error("레포트 조회 실패:",p),alert("레포트를 불러오는데 실패했습니다.")}finally{s(!1)}};if(r)return g.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),g.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"레포트 생성 중..."})]})});if(!e)return g.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-red-50 to-orange-50",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-6xl mb-4",children:"📋"}),g.jsx("p",{className:"text-red-600 text-xl font-semibold",children:"레포트를 찾을 수 없습니다."})]})});const o=e.categoryScores.slice(0,4),a={labels:o.map(p=>p.categoryName),datasets:[{label:"학생",data:o.map(p=>p.percentage),backgroundColor:"rgba(59, 130, 246, 0.3)",borderColor:"rgb(59, 130, 246)",borderWidth:3,pointBackgroundColor:"rgb(59, 130, 246)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(59, 130, 246)",pointRadius:5,pointHoverRadius:7},{label:"또래평균",data:o.map(p=>p.peerAverage),backgroundColor:"rgba(239, 68, 68, 0.2)",borderColor:"rgb(239, 68, 68)",borderWidth:2,borderDash:[5,5],pointBackgroundColor:"rgb(239, 68, 68)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(239, 68, 68)",pointRadius:4,pointHoverRadius:6}]},l={responsive:!0,maintainAspectRatio:!0,scales:{r:{beginAtZero:!0,max:100,ticks:{stepSize:20,font:{size:12}},pointLabels:{font:{size:14,weight:"bold"}},grid:{color:"rgba(0, 0, 0, 0.1)"}}},plugins:{legend:{display:!0,position:"top",labels:{font:{size:14,weight:"bold"},padding:15}},tooltip:{callbacks:{label:function(p){return`${p.dataset.label}: ${p.parsed.r.toFixed(1)}%`}}}}},c={labels:o.map(p=>p.categoryName),datasets:[{label:"백분위 (상위 %)",data:o.map(p=>100-p.percentile),backgroundColor:o.map(p=>{const m=100-p.percentile;return m<=25?"rgba(34, 197, 94, 0.8)":m<=50?"rgba(59, 130, 246, 0.8)":m<=75?"rgba(251, 146, 60, 0.8)":"rgba(239, 68, 68, 0.8)"}),borderColor:o.map(p=>{const m=100-p.percentile;return m<=25?"rgb(34, 197, 94)":m<=50?"rgb(59, 130, 246)":m<=75?"rgb(251, 146, 60)":"rgb(239, 68, 68)"}),borderWidth:2,borderRadius:8}]},u={indexAxis:"y",responsive:!0,maintainAspectRatio:!0,scales:{x:{beginAtZero:!0,max:100,ticks:{callback:function(p){return`상위 ${p}%`},font:{size:11}},grid:{color:"rgba(0, 0, 0, 0.05)"}},y:{ticks:{font:{size:12,weight:"bold"}}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(p){return`상위 ${p.parsed.x.toFixed(1)}%`}}}}},A={labels:["정답","오답"],datasets:[{data:[e.overall.correctAnswers,e.overall.incorrectAnswers],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(239, 68, 68, 0.4)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)"],borderWidth:2,hoverOffset:10}]},d={responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"bottom",labels:{font:{size:13,weight:"bold"},padding:15}},tooltip:{callbacks:{label:function(p){const m=p.dataset.data.reduce((x,v)=>x+v,0),y=(p.parsed/m*100).toFixed(1);return`${p.label}: ${p.parsed}개 (${y}%)`}}}}},f={labels:e.categoryScores.map(p=>p.categoryName),datasets:[{label:"학생",data:e.categoryScores.map(p=>p.percentage),backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgb(59, 130, 246)",borderWidth:2,borderRadius:6},{label:"또래평균",data:e.categoryScores.map(p=>p.peerAverage),backgroundColor:"rgba(156, 163, 175, 0.6)",borderColor:"rgb(156, 163, 175)",borderWidth:2,borderRadius:6}]},h={responsive:!0,maintainAspectRatio:!0,scales:{y:{beginAtZero:!0,max:100,ticks:{callback:function(p){return`${p}%`},font:{size:11}},grid:{color:"rgba(0, 0, 0, 0.05)"}},x:{ticks:{font:{size:11,weight:"bold"}}}},plugins:{legend:{position:"top",labels:{font:{size:13,weight:"bold"},padding:12}},tooltip:{callbacks:{label:function(p){return`${p.dataset.label}: ${p.parsed.y.toFixed(1)}%`}}}}};return g.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 py-8",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[g.jsxs(I4,{pageNumber:1,totalPages:3,title:"문해력 평가 상세 레포트",children:[g.jsxs("div",{className:"mb-8 bg-gradient-to-r from-blue-100 to-purple-100 p-6 rounded-xl shadow-md border border-blue-200",children:[g.jsxs("h2",{className:"text-xl font-bold mb-3 text-blue-900 flex items-center",children:[g.jsx("span",{className:"text-2xl mr-2",children:"👤"})," 수험자 정보"]}),g.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[g.jsxs("div",{className:"bg-white bg-opacity-70 p-3 rounded-lg",children:[g.jsx("span",{className:"font-semibold text-gray-700",children:"이름:"})," ",g.jsx("span",{className:"text-blue-900 font-bold",children:e.student.name})]}),g.jsxs("div",{className:"bg-white bg-opacity-70 p-3 rounded-lg",children:[g.jsx("span",{className:"font-semibold text-gray-700",children:"학년:"})," ",g.jsxs("span",{className:"text-blue-900 font-bold",children:[e.student.grade,"학년"]})]}),g.jsxs("div",{className:"bg-white bg-opacity-70 p-3 rounded-lg",children:[g.jsx("span",{className:"font-semibold text-gray-700",children:"반:"})," ",g.jsx("span",{className:"text-blue-900 font-bold",children:e.student.className||"-"})]})]}),g.jsxs("div",{className:"mt-3 text-sm bg-white bg-opacity-70 p-3 rounded-lg",children:[g.jsx("span",{className:"font-semibold text-gray-700",children:"평가명:"})," ",g.jsx("span",{className:"text-blue-900 font-bold",children:e.test.title})]}),g.jsxs("div",{className:"mt-2 text-sm bg-white bg-opacity-70 p-3 rounded-lg",children:[g.jsx("span",{className:"font-semibold text-gray-700",children:"평가일:"})," ",g.jsxs("span",{className:"text-blue-900 font-bold",children:[new Date(e.test.date).toLocaleDateString("ko-KR"),e.test.duration&&` (소요시간: ${e.test.duration}분)`]})]})]}),g.jsxs("div",{className:"mb-8",children:[g.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center text-gray-800",children:[g.jsx("span",{className:"text-2xl mr-2",children:"📊"})," 종합 성적"]}),g.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[g.jsxs("div",{className:"col-span-1 bg-gradient-to-br from-blue-500 to-blue-700 text-white p-8 rounded-2xl shadow-xl text-center transform hover:scale-105 transition-transform",children:[g.jsxs("div",{className:"text-6xl font-extrabold mb-2",children:[e.overall.percentage.toFixed(1),"%"]}),g.jsx("div",{className:"text-lg font-medium",children:"정답률"}),g.jsxs("div",{className:"text-sm mt-3 opacity-90",children:[e.overall.totalScore," / ",e.overall.totalPossible,"점"]})]}),g.jsxs("div",{className:"col-span-1 bg-gradient-to-br from-purple-500 to-purple-700 text-white p-8 rounded-2xl shadow-xl text-center transform hover:scale-105 transition-transform",children:[g.jsx("div",{className:"text-6xl font-extrabold mb-2",children:e.overall.gradeLevel}),g.jsx("div",{className:"text-lg font-medium",children:"등급"}),g.jsx("div",{className:"text-sm mt-3 opacity-90",children:"9등급 체계"})]}),g.jsx("div",{className:"col-span-1",children:g.jsx("div",{className:"h-full",children:g.jsx(Ome,{data:A,options:d})})})]})]}),g.jsxs("div",{children:[g.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center text-gray-800",children:[g.jsx("span",{className:"text-2xl mr-2",children:"📈"})," 영역별 또래 비교"]}),g.jsx("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:g.jsx("div",{style:{height:"350px"},children:g.jsx(aG,{data:a,options:l})})})]})]}),g.jsx("div",{className:"h-8 print:hidden"}),g.jsxs(I4,{pageNumber:2,totalPages:3,title:"문해력 평가 상세 레포트",children:[g.jsxs("div",{className:"mb-8",children:[g.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center text-gray-800",children:[g.jsx("span",{className:"text-2xl mr-2",children:"📊"})," 영역별 상세 분석"]}),g.jsx("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:g.jsx("div",{style:{height:"280px"},children:g.jsx(Hw,{data:f,options:h})})})]}),g.jsxs("div",{className:"mb-8",children:[g.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center text-gray-800",children:[g.jsx("span",{className:"text-2xl mr-2",children:"🎯"})," 백분위 순위"]}),g.jsx("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:g.jsx("div",{style:{height:"220px"},children:g.jsx(Hw,{data:c,options:u})})})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[g.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-5 rounded-xl shadow-md border-2 border-green-200",children:[g.jsxs("h3",{className:"font-bold text-lg mb-3 text-green-800 flex items-center",children:[g.jsx("span",{className:"text-2xl mr-2",children:"💪"})," 강점"]}),g.jsx("ul",{className:"text-sm space-y-2",children:e.analysis.strengths.length>0?e.analysis.strengths.map((p,m)=>g.jsxs("li",{className:"flex items-start",children:[g.jsx("span",{className:"text-green-600 mr-2 font-bold",children:"✓"}),g.jsx("span",{className:"text-green-700",children:p})]},m)):g.jsx("li",{className:"text-gray-400 italic",children:"분석 데이터 없음"})})]}),g.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 p-5 rounded-xl shadow-md border-2 border-orange-200",children:[g.jsxs("h3",{className:"font-bold text-lg mb-3 text-orange-800 flex items-center",children:[g.jsx("span",{className:"text-2xl mr-2",children:"📚"})," 보완 영역"]}),g.jsx("ul",{className:"text-sm space-y-2",children:e.analysis.weaknesses.length>0?e.analysis.weaknesses.map((p,m)=>g.jsxs("li",{className:"flex items-start",children:[g.jsx("span",{className:"text-orange-600 mr-2 font-bold",children:"→"}),g.jsx("span",{className:"text-orange-700",children:p})]},m)):g.jsx("li",{className:"text-gray-400 italic",children:"분석 데이터 없음"})})]})]})]}),g.jsx("div",{className:"h-8 print:hidden"}),g.jsxs(I4,{pageNumber:3,totalPages:3,title:"문해력 평가 상세 레포트",children:[g.jsxs("div",{className:"mb-8",children:[g.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center text-gray-800",children:[g.jsx("span",{className:"text-2xl mr-2",children:"💡"})," 맞춤형 학습 제안"]}),g.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 p-6 rounded-xl shadow-md border-2 border-yellow-200",children:g.jsx("ul",{className:"space-y-3",children:e.recommendations.map((p,m)=>g.jsxs("li",{className:"flex items-start bg-white bg-opacity-60 p-3 rounded-lg",children:[g.jsx("span",{className:"inline-flex items-center justify-center w-7 h-7 bg-yellow-500 text-white rounded-full font-bold mr-3 flex-shrink-0 text-sm",children:m+1}),g.jsx("span",{className:"text-gray-700 font-medium",children:p})]},m))})})]}),g.jsxs("div",{children:[g.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center text-gray-800",children:[g.jsx("span",{className:"text-2xl mr-2",children:"❌"})," 오답 분석 (주요 문항)"]}),g.jsxs("div",{className:"space-y-3",children:[e.incorrectAnswers.slice(0,5).map((p,m)=>g.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 p-4 rounded-xl border-l-4 border-red-500 shadow-md",children:[g.jsxs("div",{className:"flex items-center mb-2",children:[g.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-red-500 text-white rounded-full font-bold mr-3 text-sm",children:p.questionNumber}),g.jsx("span",{className:"text-sm font-bold text-red-700",children:p.categoryName})]}),g.jsxs("div",{className:"text-sm text-gray-700 ml-11",children:[g.jsx("span",{className:"font-semibold",children:"학생 답변:"})," ",p.studentAnswer||"(미응답)"]}),g.jsxs("div",{className:"text-sm text-gray-700 ml-11 mt-1",children:[g.jsx("span",{className:"font-semibold",children:"정답:"})," ",p.correctAnswer]}),p.feedback&&g.jsx("div",{className:"text-sm text-blue-700 mt-2 ml-11 bg-blue-50 p-3 rounded-lg border-l-4 border-blue-400",children:g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx("span",{className:"text-lg",children:"🤖"}),g.jsxs("div",{children:[g.jsx("div",{className:"font-bold mb-1",children:"AI 피드백"}),g.jsx("div",{children:p.feedback})]})]})}),p.explanation&&g.jsxs("div",{className:"text-sm text-gray-600 mt-2 ml-11 bg-white bg-opacity-70 p-2 rounded",children:["💬 ",p.explanation]})]},m)),e.incorrectAnswers.length===0&&g.jsxs("div",{className:"text-center bg-gradient-to-r from-green-50 to-emerald-50 py-8 rounded-xl border-2 border-green-200",children:[g.jsx("div",{className:"text-6xl mb-3",children:"🎉"}),g.jsx("p",{className:"text-green-700 font-bold text-lg",children:"모든 문제를 정답으로 맞췄습니다!"}),g.jsx("p",{className:"text-green-600 text-sm mt-2",children:"완벽한 성과입니다"})]})]})]})]}),g.jsx("div",{className:"text-center mt-8 print:hidden",children:g.jsx("button",{onClick:()=>window.print(),className:"px-8 py-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all font-bold text-lg shadow-xl transform hover:scale-105",children:"🖨️ 전체 레포트 인쇄"})})]})})}function g1e(){const t=Qs(),{user:e,logout:n}=Wo(),r=()=>{switch(e==null?void 0:e.role){case"student":t("/dashboard");break;case"parent":t("/parent/dashboard");break;case"admin":t("/admin/dashboard");break;case"teacher":t("/teacher/dashboard");break;default:t("/login")}},s=()=>{n(),t("/login")};return g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:g.jsxs("div",{className:"max-w-md w-full bg-card rounded-lg shadow-lg p-8 border border-border text-center",children:[g.jsxs("div",{className:"mb-6",children:[g.jsx("div",{className:"mx-auto w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center mb-4",children:g.jsx("svg",{className:"w-8 h-8 text-destructive",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),g.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"접근 권한이 없습니다"}),g.jsx("p",{className:"text-muted-foreground",children:"이 페이지에 접근할 수 있는 권한이 없습니다."}),e&&g.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["현재 로그인: ",g.jsx("span",{className:"font-medium",children:e.name})," (",e.role,")"]})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("button",{onClick:r,className:"w-full bg-primary text-primary-foreground py-2 px-4 rounded-lg hover:bg-primary/90 transition-colors font-medium",children:"홈으로 돌아가기"}),g.jsx("button",{onClick:s,className:"w-full border border-border py-2 px-4 rounded-lg hover:bg-muted transition-colors text-foreground font-medium",children:"로그아웃"})]})]})})}var y1e={};(function(){var t;function e(I){var F=0;return function(){return F<I.length?{done:!1,value:I[F++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(I,F,_){return I==Array.prototype||I==Object.prototype||(I[F]=_.value),I};function r(I){I=[typeof globalThis=="object"&&globalThis,I,typeof window=="object"&&window,typeof self=="object"&&self,typeof bi=="object"&&bi];for(var F=0;F<I.length;++F){var _=I[F];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=r(this);function i(I,F){if(F)e:{var _=s;I=I.split(".");for(var Y=0;Y<I.length-1;Y++){var Ae=I[Y];if(!(Ae in _))break e;_=_[Ae]}I=I[I.length-1],Y=_[I],F=F(Y),F!=Y&&F!=null&&n(_,I,{configurable:!0,writable:!0,value:F})}}i("Symbol",function(I){function F(Ce){if(this instanceof F)throw new TypeError("Symbol is not a constructor");return new _(Y+(Ce||"")+"_"+Ae++,Ce)}function _(Ce,pe){this.g=Ce,n(this,"description",{configurable:!0,writable:!0,value:pe})}if(I)return I;_.prototype.toString=function(){return this.g};var Y="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Ae=0;return F}),i("Symbol.iterator",function(I){if(I)return I;I=Symbol("Symbol.iterator");for(var F="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),_=0;_<F.length;_++){var Y=s[F[_]];typeof Y=="function"&&typeof Y.prototype[I]!="function"&&n(Y.prototype,I,{configurable:!0,writable:!0,value:function(){return o(e(this))}})}return I});function o(I){return I={next:I},I[Symbol.iterator]=function(){return this},I}function a(I){var F=typeof Symbol<"u"&&Symbol.iterator&&I[Symbol.iterator];return F?F.call(I):{next:e(I)}}function l(I){if(!(I instanceof Array)){I=a(I);for(var F,_=[];!(F=I.next()).done;)_.push(F.value);I=_}return I}var c=typeof Object.create=="function"?Object.create:function(I){function F(){}return F.prototype=I,new F},u;if(typeof Object.setPrototypeOf=="function")u=Object.setPrototypeOf;else{var A;e:{var d={a:!0},f={};try{f.__proto__=d,A=f.a;break e}catch{}A=!1}u=A?function(I,F){if(I.__proto__=F,I.__proto__!==F)throw new TypeError(I+" is not extensible");return I}:null}var h=u;function p(I,F){if(I.prototype=c(F.prototype),I.prototype.constructor=I,h)h(I,F);else for(var _ in F)if(_!="prototype")if(Object.defineProperties){var Y=Object.getOwnPropertyDescriptor(F,_);Y&&Object.defineProperty(I,_,Y)}else I[_]=F[_];I.ea=F.prototype}function m(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function y(I){if(I.l)throw new TypeError("Generator is already running");I.l=!0}m.prototype.o=function(I){this.h=I};function x(I,F){I.j={U:F,V:!0},I.g=I.m||I.s}m.prototype.return=function(I){this.j={return:I},this.g=this.s};function v(I,F,_){return I.g=_,{value:F}}function b(I){this.g=new m,this.h=I}function w(I,F){y(I.g);var _=I.g.i;return _?C(I,"return"in _?_.return:function(Y){return{value:Y,done:!0}},F,I.g.return):(I.g.return(F),B(I))}function C(I,F,_,Y){try{var Ae=F.call(I.g.i,_);if(!(Ae instanceof Object))throw new TypeError("Iterator result "+Ae+" is not an object");if(!Ae.done)return I.g.l=!1,Ae;var Ce=Ae.value}catch(pe){return I.g.i=null,x(I.g,pe),B(I)}return I.g.i=null,Y.call(I.g,Ce),B(I)}function B(I){for(;I.g.g;)try{var F=I.h(I.g);if(F)return I.g.l=!1,{value:F.value,done:!1}}catch(_){I.g.h=void 0,x(I.g,_)}if(I.g.l=!1,I.g.j){if(F=I.g.j,I.g.j=null,F.V)throw F.U;return{value:F.return,done:!0}}return{value:void 0,done:!0}}function S(I){this.next=function(F){return y(I.g),I.g.i?F=C(I,I.g.i.next,F,I.g.o):(I.g.o(F),F=B(I)),F},this.throw=function(F){return y(I.g),I.g.i?F=C(I,I.g.i.throw,F,I.g.o):(x(I.g,F),F=B(I)),F},this.return=function(F){return w(I,F)},this[Symbol.iterator]=function(){return this}}function N(I,F){return F=new S(new b(F)),h&&I.prototype&&h(F,I.prototype),F}function k(I,F){I instanceof String&&(I+="");var _=0,Y=!1,Ae={next:function(){if(!Y&&_<I.length){var Ce=_++;return{value:F(Ce,I[Ce]),done:!1}}return Y=!0,{done:!0,value:void 0}}};return Ae[Symbol.iterator]=function(){return Ae},Ae}var O=typeof Object.assign=="function"?Object.assign:function(I,F){for(var _=1;_<arguments.length;_++){var Y=arguments[_];if(Y)for(var Ae in Y)Object.prototype.hasOwnProperty.call(Y,Ae)&&(I[Ae]=Y[Ae])}return I};i("Object.assign",function(I){return I||O}),i("Promise",function(I){function F(pe){this.h=0,this.i=void 0,this.g=[],this.o=!1;var Ne=this.j();try{pe(Ne.resolve,Ne.reject)}catch(Oe){Ne.reject(Oe)}}function _(){this.g=null}function Y(pe){return pe instanceof F?pe:new F(function(Ne){Ne(pe)})}if(I)return I;_.prototype.h=function(pe){if(this.g==null){this.g=[];var Ne=this;this.i(function(){Ne.l()})}this.g.push(pe)};var Ae=s.setTimeout;_.prototype.i=function(pe){Ae(pe,0)},_.prototype.l=function(){for(;this.g&&this.g.length;){var pe=this.g;this.g=[];for(var Ne=0;Ne<pe.length;++Ne){var Oe=pe[Ne];pe[Ne]=null;try{Oe()}catch(Ge){this.j(Ge)}}}this.g=null},_.prototype.j=function(pe){this.i(function(){throw pe})},F.prototype.j=function(){function pe(Ge){return function(pt){Oe||(Oe=!0,Ge.call(Ne,pt))}}var Ne=this,Oe=!1;return{resolve:pe(this.C),reject:pe(this.l)}},F.prototype.C=function(pe){if(pe===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(pe instanceof F)this.F(pe);else{e:switch(typeof pe){case"object":var Ne=pe!=null;break e;case"function":Ne=!0;break e;default:Ne=!1}Ne?this.u(pe):this.m(pe)}},F.prototype.u=function(pe){var Ne=void 0;try{Ne=pe.then}catch(Oe){this.l(Oe);return}typeof Ne=="function"?this.G(Ne,pe):this.m(pe)},F.prototype.l=function(pe){this.s(2,pe)},F.prototype.m=function(pe){this.s(1,pe)},F.prototype.s=function(pe,Ne){if(this.h!=0)throw Error("Cannot settle("+pe+", "+Ne+"): Promise already settled in state"+this.h);this.h=pe,this.i=Ne,this.h===2&&this.D(),this.A()},F.prototype.D=function(){var pe=this;Ae(function(){if(pe.B()){var Ne=s.console;typeof Ne<"u"&&Ne.error(pe.i)}},1)},F.prototype.B=function(){if(this.o)return!1;var pe=s.CustomEvent,Ne=s.Event,Oe=s.dispatchEvent;return typeof Oe>"u"?!0:(typeof pe=="function"?pe=new pe("unhandledrejection",{cancelable:!0}):typeof Ne=="function"?pe=new Ne("unhandledrejection",{cancelable:!0}):(pe=s.document.createEvent("CustomEvent"),pe.initCustomEvent("unhandledrejection",!1,!0,pe)),pe.promise=this,pe.reason=this.i,Oe(pe))},F.prototype.A=function(){if(this.g!=null){for(var pe=0;pe<this.g.length;++pe)Ce.h(this.g[pe]);this.g=null}};var Ce=new _;return F.prototype.F=function(pe){var Ne=this.j();pe.J(Ne.resolve,Ne.reject)},F.prototype.G=function(pe,Ne){var Oe=this.j();try{pe.call(Ne,Oe.resolve,Oe.reject)}catch(Ge){Oe.reject(Ge)}},F.prototype.then=function(pe,Ne){function Oe(Et,yt){return typeof Et=="function"?function(nt){try{Ge(Et(nt))}catch(E){pt(E)}}:yt}var Ge,pt,jt=new F(function(Et,yt){Ge=Et,pt=yt});return this.J(Oe(pe,Ge),Oe(Ne,pt)),jt},F.prototype.catch=function(pe){return this.then(void 0,pe)},F.prototype.J=function(pe,Ne){function Oe(){switch(Ge.h){case 1:pe(Ge.i);break;case 2:Ne(Ge.i);break;default:throw Error("Unexpected state: "+Ge.h)}}var Ge=this;this.g==null?Ce.h(Oe):this.g.push(Oe),this.o=!0},F.resolve=Y,F.reject=function(pe){return new F(function(Ne,Oe){Oe(pe)})},F.race=function(pe){return new F(function(Ne,Oe){for(var Ge=a(pe),pt=Ge.next();!pt.done;pt=Ge.next())Y(pt.value).J(Ne,Oe)})},F.all=function(pe){var Ne=a(pe),Oe=Ne.next();return Oe.done?Y([]):new F(function(Ge,pt){function jt(nt){return function(E){Et[nt]=E,yt--,yt==0&&Ge(Et)}}var Et=[],yt=0;do Et.push(void 0),yt++,Y(Oe.value).J(jt(Et.length-1),pt),Oe=Ne.next();while(!Oe.done)})},F}),i("Object.is",function(I){return I||function(F,_){return F===_?F!==0||1/F===1/_:F!==F&&_!==_}}),i("Array.prototype.includes",function(I){return I||function(F,_){var Y=this;Y instanceof String&&(Y=String(Y));var Ae=Y.length;for(_=_||0,0>_&&(_=Math.max(_+Ae,0));_<Ae;_++){var Ce=Y[_];if(Ce===F||Object.is(Ce,F))return!0}return!1}}),i("String.prototype.includes",function(I){return I||function(F,_){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(F instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(F,_||0)!==-1}}),i("Array.prototype.keys",function(I){return I||function(){return k(this,function(F){return F})}});var U=this||self;function P(I,F){I=I.split(".");var _=U;I[0]in _||typeof _.execScript>"u"||_.execScript("var "+I[0]);for(var Y;I.length&&(Y=I.shift());)I.length||F===void 0?_[Y]&&_[Y]!==Object.prototype[Y]?_=_[Y]:_=_[Y]={}:_[Y]=F}function V(I,F){return F=String.fromCharCode.apply(null,F),I==null?F:I+F}var W,j=typeof TextDecoder<"u",G,D=typeof TextEncoder<"u";function M(I){if(D)I=(G||(G=new TextEncoder)).encode(I);else{var F=void 0;F=F===void 0?!1:F;for(var _=0,Y=new Uint8Array(3*I.length),Ae=0;Ae<I.length;Ae++){var Ce=I.charCodeAt(Ae);if(128>Ce)Y[_++]=Ce;else{if(2048>Ce)Y[_++]=Ce>>6|192;else{if(55296<=Ce&&57343>=Ce){if(56319>=Ce&&Ae<I.length){var pe=I.charCodeAt(++Ae);if(56320<=pe&&57343>=pe){Ce=1024*(Ce-55296)+pe-56320+65536,Y[_++]=Ce>>18|240,Y[_++]=Ce>>12&63|128,Y[_++]=Ce>>6&63|128,Y[_++]=Ce&63|128;continue}else Ae--}if(F)throw Error("Found an unpaired surrogate");Ce=65533}Y[_++]=Ce>>12|224,Y[_++]=Ce>>6&63|128}Y[_++]=Ce&63|128}}I=Y.subarray(0,_)}return I}var q={},Z=null;function te(I,F){F===void 0&&(F=0),le(),F=q[F];for(var _=Array(Math.floor(I.length/3)),Y=F[64]||"",Ae=0,Ce=0;Ae<I.length-2;Ae+=3){var pe=I[Ae],Ne=I[Ae+1],Oe=I[Ae+2],Ge=F[pe>>2];pe=F[(pe&3)<<4|Ne>>4],Ne=F[(Ne&15)<<2|Oe>>6],Oe=F[Oe&63],_[Ce++]=Ge+pe+Ne+Oe}switch(Ge=0,Oe=Y,I.length-Ae){case 2:Ge=I[Ae+1],Oe=F[(Ge&15)<<2]||Y;case 1:I=I[Ae],_[Ce]=F[I>>2]+F[(I&3)<<4|Ge>>4]+Oe+Y}return _.join("")}function ue(I){var F=I.length,_=3*F/4;_%3?_=Math.floor(_):"=.".indexOf(I[F-1])!=-1&&(_="=.".indexOf(I[F-2])!=-1?_-2:_-1);var Y=new Uint8Array(_),Ae=0;return de(I,function(Ce){Y[Ae++]=Ce}),Y.subarray(0,Ae)}function de(I,F){function _(Oe){for(;Y<I.length;){var Ge=I.charAt(Y++),pt=Z[Ge];if(pt!=null)return pt;if(!/^[\s\xa0]*$/.test(Ge))throw Error("Unknown base64 encoding at char: "+Ge)}return Oe}le();for(var Y=0;;){var Ae=_(-1),Ce=_(0),pe=_(64),Ne=_(64);if(Ne===64&&Ae===-1)break;F(Ae<<2|Ce>>4),pe!=64&&(F(Ce<<4&240|pe>>2),Ne!=64&&F(pe<<6&192|Ne))}}function le(){if(!Z){Z={};for(var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),F=["+/=","+/","-_=","-_.","-_"],_=0;5>_;_++){var Y=I.concat(F[_].split(""));q[_]=Y;for(var Ae=0;Ae<Y.length;Ae++){var Ce=Y[Ae];Z[Ce]===void 0&&(Z[Ce]=Ae)}}}}var he=typeof Uint8Array.prototype.slice=="function",ke;function Qe(I,F,_){return F===_?ke||(ke=new Uint8Array(0)):he?I.slice(F,_):new Uint8Array(I.subarray(F,_))}var xe=0,$e=0;function Fe(I,F){F=F===void 0?{}:F,F=F.v===void 0?!1:F.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=F,I&&be(this,I)}function be(I,F){F=F.constructor===Uint8Array?F:F.constructor===ArrayBuffer?new Uint8Array(F):F.constructor===Array?new Uint8Array(F):F.constructor===String?ue(F):F instanceof Uint8Array?new Uint8Array(F.buffer,F.byteOffset,F.byteLength):new Uint8Array(0),I.h=F,I.l=0,I.j=I.h.length,I.g=I.l}Fe.prototype.reset=function(){this.g=this.l};function it(I){for(var F=128,_=0,Y=0,Ae=0;4>Ae&&128<=F;Ae++)F=I.h[I.g++],_|=(F&127)<<7*Ae;if(128<=F&&(F=I.h[I.g++],_|=(F&127)<<28,Y|=(F&127)>>4),128<=F)for(Ae=0;5>Ae&&128<=F;Ae++)F=I.h[I.g++],Y|=(F&127)<<7*Ae+3;if(128>F)return I=_>>>0,F=Y>>>0,(Y=F&2147483648)&&(I=~I+1>>>0,F=~F>>>0,I==0&&(F=F+1>>>0)),I=4294967296*F+(I>>>0),Y?-I:I;I.m=!0}Fe.prototype.i=function(){var I=this.h,F=I[this.g],_=F&127;return 128>F?(this.g+=1,_):(F=I[this.g+1],_|=(F&127)<<7,128>F?(this.g+=2,_):(F=I[this.g+2],_|=(F&127)<<14,128>F?(this.g+=3,_):(F=I[this.g+3],_|=(F&127)<<21,128>F?(this.g+=4,_):(F=I[this.g+4],_|=(F&15)<<28,128>F?(this.g+=5,_>>>0):(this.g+=5,128<=I[this.g++]&&128<=I[this.g++]&&128<=I[this.g++]&&128<=I[this.g++]&&this.g++,_)))))},Fe.prototype.o=function(){var I=this.h[this.g],F=this.h[this.g+1],_=this.h[this.g+2],Y=this.h[this.g+3];return this.g+=4,_=(I<<0|F<<8|_<<16|Y<<24)>>>0,I=2*(_>>31)+1,F=_>>>23&255,_&=8388607,F==255?_?NaN:1/0*I:F==0?I*Math.pow(2,-149)*_:I*Math.pow(2,F-150)*(_+Math.pow(2,23))};var et=[];function st(){this.g=new Uint8Array(64),this.h=0}st.prototype.push=function(I){if(!(this.h+1<this.g.length)){var F=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(F)}this.g[this.h++]=I},st.prototype.length=function(){return this.h},st.prototype.end=function(){var I=this.g,F=this.h;return this.h=0,Qe(I,0,F)};function rt(I,F){for(;127<F;)I.push(F&127|128),F>>>=7;I.push(F)}function ht(I){var F={},_=F.N===void 0?!1:F.N;this.o={v:F.v===void 0?!1:F.v},this.N=_,F=this.o,et.length?(_=et.pop(),F&&(_.v=F.v),I&&be(_,I),I=_):I=new Fe(I,F),this.g=I,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}ht.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function dt(I){var F=I.g;if((F=F.g==F.j)||(F=I.j)||(F=I.g,F=F.m||0>F.g||F.g>F.j),F)return!1;I.m=I.g.g,F=I.g.i();var _=F&7;return _!=0&&_!=5&&_!=1&&_!=2&&_!=3&&_!=4?(I.j=!0,!1):(I.i=F,I.l=F>>>3,I.h=_,!0)}function cn(I){switch(I.h){case 0:if(I.h!=0)cn(I);else{for(I=I.g;I.h[I.g]&128;)I.g++;I.g++}break;case 1:I.h!=1?cn(I):(I=I.g,I.g+=8);break;case 2:if(I.h!=2)cn(I);else{var F=I.g.i();I=I.g,I.g+=F}break;case 5:I.h!=5?cn(I):(I=I.g,I.g+=4);break;case 3:F=I.l;do{if(!dt(I)){I.j=!0;break}if(I.h==4){I.l!=F&&(I.j=!0);break}cn(I)}while(!0);break;default:I.j=!0}}function Yt(I,F,_){var Y=I.g.j,Ae=I.g.i(),Ce=I.g.g+Ae;if(I.g.j=Ce,_(F,I),_=Ce-I.g.g,_!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+Ae+" bytes, instead read "+(Ae-_)+" bytes, either the data ended unexpectedly or the message misreported its own length");return I.g.g=Ce,I.g.j=Y,F}function Dt(I){return I.g.o()}function rn(I){var F=I.g.i();I=I.g;var _=I.g;I.g+=F,I=I.h;var Y;if(j)(Y=W)||(Y=W=new TextDecoder("utf-8",{fatal:!1})),Y=Y.decode(I.subarray(_,_+F));else{F=_+F;for(var Ae=[],Ce=null,pe,Ne,Oe;_<F;)pe=I[_++],128>pe?Ae.push(pe):224>pe?_>=F?Ae.push(65533):(Ne=I[_++],194>pe||(Ne&192)!==128?(_--,Ae.push(65533)):Ae.push((pe&31)<<6|Ne&63)):240>pe?_>=F-1?Ae.push(65533):(Ne=I[_++],(Ne&192)!==128||pe===224&&160>Ne||pe===237&&160<=Ne||((Y=I[_++])&192)!==128?(_--,Ae.push(65533)):Ae.push((pe&15)<<12|(Ne&63)<<6|Y&63)):244>=pe?_>=F-2?Ae.push(65533):(Ne=I[_++],(Ne&192)!==128||(pe<<28)+(Ne-144)>>30||((Y=I[_++])&192)!==128||((Oe=I[_++])&192)!==128?(_--,Ae.push(65533)):(pe=(pe&7)<<18|(Ne&63)<<12|(Y&63)<<6|Oe&63,pe-=65536,Ae.push((pe>>10&1023)+55296,(pe&1023)+56320))):Ae.push(65533),8192<=Ae.length&&(Ce=V(Ce,Ae),Ae.length=0);Y=V(Ce,Ae)}return Y}function cs(I,F,_){var Y=I.g.i();for(Y=I.g.g+Y;I.g.g<Y;)_.push(F.call(I.g))}function yr(I,F){I.h==2?cs(I,Fe.prototype.o,F):F.push(Dt(I))}function Zn(){this.h=[],this.i=0,this.g=new st}function ur(I,F){F.length!==0&&(I.h.push(F),I.i+=F.length)}function Cs(I){var F=I.i+I.g.length();if(F===0)return new Uint8Array(0);F=new Uint8Array(F);for(var _=I.h,Y=_.length,Ae=0,Ce=0;Ce<Y;Ce++){var pe=_[Ce];pe.length!==0&&(F.set(pe,Ae),Ae+=pe.length)}return _=I.g,Y=_.h,Y!==0&&(F.set(_.g.subarray(0,Y),Ae),_.h=0),I.h=[F],F}function zn(I,F,_){if(_!=null){rt(I.g,8*F+5),I=I.g;var Y=_;Y=(_=0>Y?1:0)?-Y:Y,Y===0?0<1/Y?xe=$e=0:($e=0,xe=2147483648):isNaN(Y)?($e=0,xe=2147483647):34028234663852886e22<Y?($e=0,xe=(_<<31|2139095040)>>>0):11754943508222875e-54>Y?(Y=Math.round(Y/Math.pow(2,-149)),$e=0,xe=(_<<31|Y)>>>0):(F=Math.floor(Math.log(Y)/Math.LN2),Y*=Math.pow(2,-F),Y=Math.round(8388608*Y),16777216<=Y&&++F,$e=0,xe=(_<<31|F+127<<23|Y&8388607)>>>0),_=xe,I.push(_>>>0&255),I.push(_>>>8&255),I.push(_>>>16&255),I.push(_>>>24&255)}}var Mi=typeof Uint8Array=="function";function Sl(I,F,_){if(I!=null)return typeof I=="object"?Mi&&I instanceof Uint8Array?_(I):Bl(I,F,_):F(I)}function Bl(I,F,_){if(Array.isArray(I)){for(var Y=Array(I.length),Ae=0;Ae<I.length;Ae++)Y[Ae]=Sl(I[Ae],F,_);return Array.isArray(I)&&I.W&&_r(Y),Y}Y={};for(Ae in I)Y[Ae]=Sl(I[Ae],F,_);return Y}function Cf(I){return typeof I=="number"?isFinite(I)?I:String(I):I}var Nl={W:{value:!0,configurable:!0}};function _r(I){return Array.isArray(I)&&!Object.isFrozen(I)&&Object.defineProperties(I,Nl),I}var Rn;function Ar(I,F,_){var Y=Rn;Rn=null,I||(I=Y),Y=this.constructor.ca,I||(I=Y?[Y]:[]),this.j=Y?0:-1,this.m=this.g=null,this.h=I;e:{if(Y=this.h.length,I=Y-1,Y&&(Y=this.h[I],!(Y===null||typeof Y!="object"||Array.isArray(Y)||Mi&&Y instanceof Uint8Array))){this.l=I-this.j,this.i=Y;break e}F!==void 0&&-1<F?(this.l=Math.max(F,I+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(_)for(F=0;F<_.length;F++)I=_[F],I<this.l?(I+=this.j,(Y=this.h[I])?_r(Y):this.h[I]=Vs):(bA(this),(Y=this.i[I])?_r(Y):this.i[I]=Vs)}var Vs=Object.freeze(_r([]));function bA(I){var F=I.l+I.j;I.h[F]||(I.i=I.h[F]={})}function mn(I,F,_){return F===-1?null:_!==void 0&&_||F>=I.l?I.i?I.i[F]:void 0:I.h[F+I.j]}function wA(I,F){var _=_===void 0?!1:_,Y=mn(I,F,_);return Y==null&&(Y=Vs),Y===Vs&&(Y=_r([]),Ft(I,F,Y,_)),Y}function Im(I){var F=wA(I,3);if(I.m||(I.m={}),!I.m[3]){for(var _=0;_<F.length;_++)F[_]=+F[_];I.m[3]=!0}return F}function Da(I,F,_){return I=mn(I,F),I??_}function Qi(I,F,_){return I=mn(I,F),I=I==null?I:+I,I??(_===void 0?0:_)}function Ft(I,F,_,Y){Y!==void 0&&Y||F>=I.l?(bA(I),I.i[F]=_):I.h[F+I.j]=_}function Lv(I,F,_){if(_===-1)return null;if(I.g||(I.g={}),!I.g[_]){var Y=mn(I,_,!1);Y&&(I.g[_]=new F(Y))}return I.g[_]}function Sf(I,F){I.g||(I.g={});var _=I.g[1];if(!_){var Y=wA(I,1);_=[];for(var Ae=0;Ae<Y.length;Ae++)_[Ae]=new F(Y[Ae]);I.g[1]=_}return _}function CA(I,F,_){var Y=Y===void 0?!1:Y;I.g||(I.g={});var Ae=_&&Ra(_);I.g[F]=_,Ft(I,F,Ae,Y)}function SA(I,F,_,Y){var Ae=Sf(I,_);F=F||new _,I=wA(I,1),Y!=null?(Ae.splice(Y,0,F),I.splice(Y,0,Ra(F))):(Ae.push(F),I.push(Ra(F)))}Ar.prototype.toJSON=function(){var I=Ra(this);return Bl(I,Cf,te)};function Ra(I,F){if(I.g)for(var _ in I.g){var Y=I.g[_];if(Array.isArray(Y))for(var Ae=0;Ae<Y.length;Ae++)Y[Ae]&&Ra(Y[Ae]);else Y&&Ra(Y)}return I.h}Ar.prototype.toString=function(){return Ra(this).toString()};function Bf(I,F){if(I=I.o){ur(F,F.g.end());for(var _=0;_<I.length;_++)ur(F,I[_])}}function Hi(I,F){if(F.h==4)return!1;var _=F.m;return cn(F),F.N||(F=Qe(F.g.h,_,F.g.g),(_=I.o)?_.push(F):I.o=[F]),!0}function Pa(I){Ar.call(this,I,-1,sN)}p(Pa,Ar),Pa.prototype.getRows=function(){return mn(this,1)},Pa.prototype.getCols=function(){return mn(this,2)},Pa.prototype.getPackedDataList=function(){return Im(this)},Pa.prototype.getLayout=function(){return Da(this,4,0)};function jv(I,F){for(;dt(F);)switch(F.i){case 8:var _=F.g.i();Ft(I,1,_);break;case 16:_=F.g.i(),Ft(I,2,_);break;case 29:case 26:yr(F,I.getPackedDataList());break;case 32:_=it(F.g),Ft(I,4,_);break;default:if(!Hi(I,F))return I}return I}var sN=[3];function Gr(I,F){var _=void 0;return new(_||(_=Promise))(function(Y,Ae){function Ce(Oe){try{Ne(F.next(Oe))}catch(Ge){Ae(Ge)}}function pe(Oe){try{Ne(F.throw(Oe))}catch(Ge){Ae(Ge)}}function Ne(Oe){Oe.done?Y(Oe.value):new _(function(Ge){Ge(Oe.value)}).then(Ce,pe)}Ne((F=F.apply(I,void 0)).next())})}function Ua(I){Ar.call(this,I)}p(Ua,Ar);function Mv(I,F){for(;dt(F);)switch(F.i){case 8:var _=F.g.i();Ft(I,1,_);break;case 21:_=Dt(F),Ft(I,2,_);break;case 26:_=rn(F),Ft(I,3,_);break;case 34:_=rn(F),Ft(I,4,_);break;default:if(!Hi(I,F))return I}return I}function Nf(I){Ar.call(this,I,-1,Qv)}p(Nf,Ar),Nf.prototype.addClassification=function(I,F){return SA(this,I,Ua,F),this};var Qv=[1];function Dc(I){Ar.call(this,I)}p(Dc,Ar);function iN(I,F){for(;dt(F);)switch(F.i){case 13:var _=Dt(F);Ft(I,1,_);break;case 21:_=Dt(F),Ft(I,2,_);break;case 29:_=Dt(F),Ft(I,3,_);break;case 37:_=Dt(F),Ft(I,4,_);break;case 45:_=Dt(F),Ft(I,5,_);break;default:if(!Hi(I,F))return I}return I}function Hv(I){Ar.call(this,I,-1,Vv)}p(Hv,Ar);function zv(I){e:{var F=new Hv;for(I=new ht(I);dt(I);)switch(I.i){case 10:var _=Yt(I,new Dc,iN);SA(F,_,Dc,void 0);break;default:if(!Hi(F,I))break e}}return F}var Vv=[1];function Ef(I){Ar.call(this,I)}p(Ef,Ar);function El(I){Ar.call(this,I,-1,aN)}p(El,Ar),El.prototype.getVertexType=function(){return Da(this,1,0)},El.prototype.getPrimitiveType=function(){return Da(this,2,0)},El.prototype.getVertexBufferList=function(){return Im(this)},El.prototype.getIndexBufferList=function(){return wA(this,4)};function oN(I,F){for(;dt(F);)switch(F.i){case 8:var _=it(F.g);Ft(I,1,_);break;case 16:_=it(F.g),Ft(I,2,_);break;case 29:case 26:yr(F,I.getVertexBufferList());break;case 32:case 34:_=F;var Y=I.getIndexBufferList();_.h==2?cs(_,Fe.prototype.i,Y):Y.push(_.g.i());break;default:if(!Hi(I,F))return I}return I}var aN=[3,4];function If(I){Ar.call(this,I)}p(If,Ar),If.prototype.getMesh=function(){return Lv(this,El,1)},If.prototype.getPoseTransformMatrix=function(){return Lv(this,Pa,2)};function Wv(I){e:{var F=new If;for(I=new ht(I);dt(I);)switch(I.i){case 10:var _=Yt(I,new El,oN);CA(F,1,_);break;case 18:_=Yt(I,new Pa,jv),CA(F,2,_);break;default:if(!Hi(F,I))break e}}return F}function km(I,F,_){if(_=I.createShader(_===0?I.VERTEX_SHADER:I.FRAGMENT_SHADER),I.shaderSource(_,F),I.compileShader(_),!I.getShaderParameter(_,I.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+I.getShaderInfoLog(_));return _}function Tm(I){return Sf(I,Ua).map(function(F){return{index:Da(F,1,0),Y:Qi(F,2),label:mn(F,3)!=null?Da(F,3,""):void 0,displayName:mn(F,4)!=null?Da(F,4,""):void 0}})}function Fm(I){return{x:Qi(I,1),y:Qi(I,2),z:Qi(I,3),visibility:mn(I,4)!=null?Qi(I,4):void 0}}function BA(I,F){this.h=I,this.g=F,this.l=0}function Rc(I,F,_){return zi(I,F),typeof I.g.canvas.transferToImageBitmap=="function"?Promise.resolve(I.g.canvas.transferToImageBitmap()):_?Promise.resolve(I.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(I.g.canvas):(I.i===void 0&&(I.i=document.createElement("canvas")),new Promise(function(Y){I.i.height=I.g.canvas.height,I.i.width=I.g.canvas.width,I.i.getContext("2d",{}).drawImage(I.g.canvas,0,0,I.g.canvas.width,I.g.canvas.height),Y(I.i)}))}function zi(I,F){var _=I.g;if(I.m===void 0){var Y=km(_,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),Ae=km(_,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Ce=_.createProgram();if(_.attachShader(Ce,Y),_.attachShader(Ce,Ae),_.linkProgram(Ce),!_.getProgramParameter(Ce,_.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+_.getProgramInfoLog(Ce));Y=I.m=Ce,_.useProgram(Y),Ae=_.getUniformLocation(Y,"sampler0"),I.j={I:_.getAttribLocation(Y,"aVertex"),H:_.getAttribLocation(Y,"aTex"),da:Ae},I.s=_.createBuffer(),_.bindBuffer(_.ARRAY_BUFFER,I.s),_.enableVertexAttribArray(I.j.I),_.vertexAttribPointer(I.j.I,2,_.FLOAT,!1,0,0),_.bufferData(_.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),_.STATIC_DRAW),_.bindBuffer(_.ARRAY_BUFFER,null),I.o=_.createBuffer(),_.bindBuffer(_.ARRAY_BUFFER,I.o),_.enableVertexAttribArray(I.j.H),_.vertexAttribPointer(I.j.H,2,_.FLOAT,!1,0,0),_.bufferData(_.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),_.STATIC_DRAW),_.bindBuffer(_.ARRAY_BUFFER,null),_.uniform1i(Ae,0)}Y=I.j,_.useProgram(I.m),_.canvas.width=F.width,_.canvas.height=F.height,_.viewport(0,0,F.width,F.height),_.activeTexture(_.TEXTURE0),I.h.bindTexture2d(F.glName),_.enableVertexAttribArray(Y.I),_.bindBuffer(_.ARRAY_BUFFER,I.s),_.vertexAttribPointer(Y.I,2,_.FLOAT,!1,0,0),_.enableVertexAttribArray(Y.H),_.bindBuffer(_.ARRAY_BUFFER,I.o),_.vertexAttribPointer(Y.H,2,_.FLOAT,!1,0,0),_.bindFramebuffer(_.DRAW_FRAMEBUFFER?_.DRAW_FRAMEBUFFER:_.FRAMEBUFFER,null),_.clearColor(0,0,0,0),_.clear(_.COLOR_BUFFER_BIT),_.colorMask(!0,!0,!0,!0),_.drawArrays(_.TRIANGLE_FAN,0,4),_.disableVertexAttribArray(Y.I),_.disableVertexAttribArray(Y.H),_.bindBuffer(_.ARRAY_BUFFER,null),I.h.bindTexture2d(0)}function lN(I){this.g=I}var cN=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Gv(I,F){return F+I}function $m(I,F){window[I]=F}function ci(I){var F=document.createElement("script");return F.setAttribute("src",I),F.setAttribute("crossorigin","anonymous"),new Promise(function(_){F.addEventListener("load",function(){_()},!1),F.addEventListener("error",function(){_()},!1),document.body.appendChild(F)})}function Kv(){return Gr(this,function I(){return N(I,function(F){switch(F.g){case 1:return F.m=2,v(F,WebAssembly.instantiate(cN),4);case 4:F.g=3,F.m=0;break;case 2:return F.m=0,F.j=null,F.return(!1);case 3:return F.return(!0)}})})}function Il(I){if(this.g=I,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=I&&I.locateFile||Gv,typeof window=="object")var F=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")F=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=F,I.options){F=a(Object.keys(I.options));for(var _=F.next();!_.done;_=F.next()){_=_.value;var Y=I.options[_].default;Y!==void 0&&(this.j[_]=typeof Y=="function"?Y():Y)}}}t=Il.prototype,t.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function Xv(I,F){return I.g.files===void 0?[]:typeof I.g.files=="function"?I.g.files(F):I.g.files}function _m(I){return Gr(I,function F(){var _=this,Y,Ae,Ce,pe,Ne,Oe,Ge,pt,jt,Et,yt;return N(F,function(nt){switch(nt.g){case 1:return Y=_,_.R?(Ae=Xv(_,_.j),v(nt,Kv(),2)):nt.return();case 2:if(Ce=nt.h,typeof window=="object")return $m("createMediapipeSolutionsWasm",{locateFile:_.locateFile}),$m("createMediapipeSolutionsPackedAssets",{locateFile:_.locateFile}),Oe=Ae.filter(function(E){return E.data!==void 0}),Ge=Ae.filter(function(E){return E.data===void 0}),pt=Promise.all(Oe.map(function(E){var $=Pc(Y,E.url);if(E.path!==void 0){var R=E.path;$=$.then(function(H){return Y.overrideFile(R,H),Promise.resolve(H)})}return $})),jt=Promise.all(Ge.map(function(E){return E.simd===void 0||E.simd&&Ce||!E.simd&&!Ce?ci(Y.locateFile(E.url,Y.S)):Promise.resolve()})).then(function(){return Gr(Y,function E(){var $,R,H=this;return N(E,function(X){if(X.g==1)return $=window.createMediapipeSolutionsWasm,R=window.createMediapipeSolutionsPackedAssets,v(X,$(R),2);H.h=X.h,X.g=0})})}),Et=function(){return Gr(Y,function E(){var $=this;return N(E,function(R){return $.g.graph&&$.g.graph.url?R=v(R,Pc($,$.g.graph.url),0):(R.g=0,R=void 0),R})})}(),v(nt,Promise.all([jt,pt,Et]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return pe=Ae.filter(function(E){return E.simd===void 0||E.simd&&Ce||!E.simd&&!Ce}).map(function(E){return Y.locateFile(E.url,Y.S)}),importScripts.apply(null,l(pe)),v(nt,createMediapipeSolutionsWasm(Module),6);case 6:_.h=nt.h,_.l=new OffscreenCanvas(1,1),_.h.canvas=_.l,Ne=_.h.GL.createContext(_.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),_.h.GL.makeContextCurrent(Ne),nt.g=4;break;case 7:if(_.l=document.createElement("canvas"),yt=_.l.getContext("webgl2",{}),!yt&&(yt=_.l.getContext("webgl",{}),!yt))return alert("Failed to create WebGL canvas context when passing video frame."),nt.return();_.D=yt,_.h.canvas=_.l,_.h.createContext(_.l,!0,!0,{});case 4:_.i=new _.h.SolutionWasm,_.R=!1,nt.g=0}})})}function uN(I){return Gr(I,function F(){var _=this,Y,Ae,Ce,pe,Ne,Oe,Ge,pt;return N(F,function(jt){if(jt.g==1){if(_.g.graph&&_.g.graph.url&&_.P===_.g.graph.url)return jt.return();if(_.o=!0,!_.g.graph||!_.g.graph.url){jt.g=2;return}return _.P=_.g.graph.url,v(jt,Pc(_,_.g.graph.url),3)}for(jt.g!=2&&(Y=jt.h,_.i.loadGraph(Y)),Ae=a(Object.keys(_.B)),Ce=Ae.next();!Ce.done;Ce=Ae.next())pe=Ce.value,_.i.overrideFile(pe,_.B[pe]);if(_.B={},_.g.listeners)for(Ne=a(_.g.listeners),Oe=Ne.next();!Oe.done;Oe=Ne.next())Ge=Oe.value,dN(_,Ge);pt=_.j,_.j={},_.setOptions(pt),jt.g=0})})}t.reset=function(){return Gr(this,function I(){var F=this;return N(I,function(_){F.i&&(F.i.reset(),F.m={},F.s={}),_.g=0})})},t.setOptions=function(I,F){var _=this;if(F=F||this.g.options){for(var Y=[],Ae=[],Ce={},pe=a(Object.keys(I)),Ne=pe.next();!Ne.done;Ce={K:Ce.K,L:Ce.L},Ne=pe.next()){var Oe=Ne.value;Oe in this.j&&this.j[Oe]===I[Oe]||(this.j[Oe]=I[Oe],Ne=F[Oe],Ne!==void 0&&(Ne.onChange&&(Ce.K=Ne.onChange,Ce.L=I[Oe],Y.push(function(Ge){return function(){return Gr(_,function pt(){var jt,Et=this;return N(pt,function(yt){if(yt.g==1)return v(yt,Ge.K(Ge.L),2);jt=yt.h,jt===!0&&(Et.o=!0),yt.g=0})})}}(Ce))),Ne.graphOptionXref&&(Oe={valueNumber:Ne.type===1?I[Oe]:0,valueBoolean:Ne.type===0?I[Oe]:!1,valueString:Ne.type===2?I[Oe]:""},Ne=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),Ne.graphOptionXref),Oe),Ae.push(Ne))))}(Y.length!==0||Ae.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(Ae),this.u=(this.u===void 0?[]:this.u).concat(Y))}};function AN(I){return Gr(I,function F(){var _=this,Y,Ae,Ce,pe,Ne,Oe,Ge;return N(F,function(pt){switch(pt.g){case 1:if(!_.o)return pt.return();if(!_.u){pt.g=2;break}Y=a(_.u),Ae=Y.next();case 3:if(Ae.done){pt.g=5;break}return Ce=Ae.value,v(pt,Ce(),4);case 4:Ae=Y.next(),pt.g=3;break;case 5:_.u=void 0;case 2:if(_.A){for(pe=new _.h.GraphOptionChangeRequestList,Ne=a(_.A),Oe=Ne.next();!Oe.done;Oe=Ne.next())Ge=Oe.value,pe.push_back(Ge);_.i.changeOptions(pe),pe.delete(),_.A=void 0}_.o=!1,pt.g=0}})})}t.initialize=function(){return Gr(this,function I(){var F=this;return N(I,function(_){return _.g==1?v(_,_m(F),2):_.g!=3?v(_,uN(F),3):v(_,AN(F),0)})})};function Pc(I,F){return Gr(I,function _(){var Y=this,Ae,Ce;return N(_,function(pe){return F in Y.F?pe.return(Y.F[F]):(Ae=Y.locateFile(F,""),Ce=fetch(Ae).then(function(Ne){return Ne.arrayBuffer()}),Y.F[F]=Ce,pe.return(Ce))})})}t.overrideFile=function(I,F){this.i?this.i.overrideFile(I,F):this.B[I]=F},t.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},t.send=function(I,F){return Gr(this,function _(){var Y=this,Ae,Ce,pe,Ne,Oe,Ge,pt,jt,Et;return N(_,function(yt){switch(yt.g){case 1:return Y.g.inputs?(Ae=1e3*(F??performance.now()),v(yt,Y.C,2)):yt.return();case 2:return v(yt,Y.initialize(),3);case 3:for(Ce=new Y.h.PacketDataList,pe=a(Object.keys(I)),Ne=pe.next();!Ne.done;Ne=pe.next())if(Oe=Ne.value,Ge=Y.g.inputs[Oe]){e:{var nt=Y,E=I[Oe];switch(Ge.type){case"video":var $=nt.m[Ge.stream];if($||($=new BA(nt.h,nt.D),nt.m[Ge.stream]=$),nt=$,nt.l===0&&(nt.l=nt.h.createTexture()),typeof HTMLVideoElement<"u"&&E instanceof HTMLVideoElement){var R=E.videoWidth;$=E.videoHeight}else typeof HTMLImageElement<"u"&&E instanceof HTMLImageElement?(R=E.naturalWidth,$=E.naturalHeight):(R=E.width,$=E.height);$={glName:nt.l,width:R,height:$},R=nt.g,R.canvas.width=$.width,R.canvas.height=$.height,R.activeTexture(R.TEXTURE0),nt.h.bindTexture2d(nt.l),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,E),nt.h.bindTexture2d(0),nt=$;break e;case"detections":for($=nt.m[Ge.stream],$||($=new lN(nt.h),nt.m[Ge.stream]=$),nt=$,nt.data||(nt.data=new nt.g.DetectionListData),nt.data.reset(E.length),$=0;$<E.length;++$){R=E[$];var H=nt.data,X=H.setBoundingBox,K=$,J=R.T,se=new Ef;Ft(se,1,J.Z),Ft(se,2,J.$),Ft(se,3,J.height),Ft(se,4,J.width),Ft(se,5,J.rotation),Ft(se,6,J.X);var me=J=new Zn;zn(me,1,mn(se,1)),zn(me,2,mn(se,2)),zn(me,3,mn(se,3)),zn(me,4,mn(se,4)),zn(me,5,mn(se,5));var Se=mn(se,6);if(Se!=null&&Se!=null){rt(me.g,48);var Ie=me.g,De=Se;Se=0>De,De=Math.abs(De);var Re=De>>>0;for(De=Math.floor((De-Re)/4294967296),De>>>=0,Se&&(De=~De>>>0,Re=(~Re>>>0)+1,4294967295<Re&&(Re=0,De++,4294967295<De&&(De=0))),xe=Re,$e=De,Se=xe,Re=$e;0<Re||127<Se;)Ie.push(Se&127|128),Se=(Se>>>7|Re<<25)>>>0,Re>>>=7;Ie.push(Se)}if(Bf(se,me),J=Cs(J),X.call(H,K,J),R.O)for(H=0;H<R.O.length;++H)se=R.O[H],me=!!se.visibility,X=nt.data,K=X.addNormalizedLandmark,J=$,se=Object.assign(Object.assign({},se),{visibility:me?se.visibility:0}),me=new Dc,Ft(me,1,se.x),Ft(me,2,se.y),Ft(me,3,se.z),se.visibility&&Ft(me,4,se.visibility),Ie=se=new Zn,zn(Ie,1,mn(me,1)),zn(Ie,2,mn(me,2)),zn(Ie,3,mn(me,3)),zn(Ie,4,mn(me,4)),zn(Ie,5,mn(me,5)),Bf(me,Ie),se=Cs(se),K.call(X,J,se);if(R.M)for(H=0;H<R.M.length;++H){if(X=nt.data,K=X.addClassification,J=$,se=R.M[H],me=new Ua,Ft(me,2,se.Y),se.index&&Ft(me,1,se.index),se.label&&Ft(me,3,se.label),se.displayName&&Ft(me,4,se.displayName),Ie=se=new Zn,Re=mn(me,1),Re!=null&&Re!=null)if(rt(Ie.g,8),Se=Ie.g,0<=Re)rt(Se,Re);else{for(De=0;9>De;De++)Se.push(Re&127|128),Re>>=7;Se.push(1)}zn(Ie,2,mn(me,2)),Se=mn(me,3),Se!=null&&(Se=M(Se),rt(Ie.g,26),rt(Ie.g,Se.length),ur(Ie,Ie.g.end()),ur(Ie,Se)),Se=mn(me,4),Se!=null&&(Se=M(Se),rt(Ie.g,34),rt(Ie.g,Se.length),ur(Ie,Ie.g.end()),ur(Ie,Se)),Bf(me,Ie),se=Cs(se),K.call(X,J,se)}}nt=nt.data;break e;default:nt={}}}switch(pt=nt,jt=Ge.stream,Ge.type){case"video":Ce.pushTexture2d(Object.assign(Object.assign({},pt),{stream:jt,timestamp:Ae}));break;case"detections":Et=pt,Et.stream=jt,Et.timestamp=Ae,Ce.pushDetectionList(Et);break;default:throw Error("Unknown input config type: '"+Ge.type+"'")}}return Y.i.send(Ce),v(yt,Y.C,4);case 4:Ce.delete(),yt.g=0}})})};function qv(I,F,_){return Gr(I,function Y(){var Ae,Ce,pe,Ne,Oe,Ge,pt=this,jt,Et,yt,nt,E,$,R,H;return N(Y,function(X){switch(X.g){case 1:if(!_)return X.return(F);for(Ae={},Ce=0,pe=a(Object.keys(_)),Ne=pe.next();!Ne.done;Ne=pe.next())Oe=Ne.value,Ge=_[Oe],typeof Ge!="string"&&Ge.type==="texture"&&F[Ge.stream]!==void 0&&++Ce;1<Ce&&(pt.G=!1),jt=a(Object.keys(_)),Ne=jt.next();case 2:if(Ne.done){X.g=4;break}if(Et=Ne.value,yt=_[Et],typeof yt=="string")return R=Ae,H=Et,v(X,Yv(pt,Et,F[yt]),14);if(nt=F[yt.stream],yt.type==="detection_list"){if(nt){for(var K=nt.getRectList(),J=nt.getLandmarksList(),se=nt.getClassificationsList(),me=[],Se=0;Se<K.size();++Se){var Ie=K.get(Se);e:{var De=new Ef;for(Ie=new ht(Ie);dt(Ie);)switch(Ie.i){case 13:var Re=Dt(Ie);Ft(De,1,Re);break;case 21:Re=Dt(Ie),Ft(De,2,Re);break;case 29:Re=Dt(Ie),Ft(De,3,Re);break;case 37:Re=Dt(Ie),Ft(De,4,Re);break;case 45:Re=Dt(Ie),Ft(De,5,Re);break;case 48:Re=it(Ie.g),Ft(De,6,Re);break;default:if(!Hi(De,Ie))break e}}De={Z:Qi(De,1),$:Qi(De,2),height:Qi(De,3),width:Qi(De,4),rotation:Qi(De,5,0),X:Da(De,6,0)},Ie=Sf(zv(J.get(Se)),Dc).map(Fm);var Me=se.get(Se);e:for(Re=new Nf,Me=new ht(Me);dt(Me);)switch(Me.i){case 10:Re.addClassification(Yt(Me,new Ua,Mv));break;default:if(!Hi(Re,Me))break e}De={T:De,O:Ie,M:Tm(Re)},me.push(De)}K=me}else K=[];Ae[Et]=K,X.g=7;break}if(yt.type==="proto_list"){if(nt){for(K=Array(nt.size()),J=0;J<nt.size();J++)K[J]=nt.get(J);nt.delete()}else K=[];Ae[Et]=K,X.g=7;break}if(nt===void 0){X.g=3;break}if(yt.type==="float_list"){Ae[Et]=nt,X.g=7;break}if(yt.type==="proto"){Ae[Et]=nt,X.g=7;break}if(yt.type!=="texture")throw Error("Unknown output config type: '"+yt.type+"'");return E=pt.s[Et],E||(E=new BA(pt.h,pt.D),pt.s[Et]=E),v(X,Rc(E,nt,pt.G),13);case 13:$=X.h,Ae[Et]=$;case 7:yt.transform&&Ae[Et]&&(Ae[Et]=yt.transform(Ae[Et])),X.g=3;break;case 14:R[H]=X.h;case 3:Ne=jt.next(),X.g=2;break;case 4:return X.return(Ae)}})})}function Yv(I,F,_){return Gr(I,function Y(){var Ae=this,Ce;return N(Y,function(pe){return typeof _=="number"||_ instanceof Uint8Array||_ instanceof Ae.h.Uint8BlobList?pe.return(_):_ instanceof Ae.h.Texture2dDataOut?(Ce=Ae.s[F],Ce||(Ce=new BA(Ae.h,Ae.D),Ae.s[F]=Ce),pe.return(Rc(Ce,_,Ae.G))):pe.return(void 0)})})}function dN(I,F){for(var _=F.name||"$",Y=[].concat(l(F.wants)),Ae=new I.h.StringList,Ce=a(F.wants),pe=Ce.next();!pe.done;pe=Ce.next())Ae.push_back(pe.value);Ce=I.h.PacketListener.implement({onResults:function(Ne){for(var Oe={},Ge=0;Ge<F.wants.length;++Ge)Oe[Y[Ge]]=Ne.get(Ge);var pt=I.listeners[_];pt&&(I.C=qv(I,Oe,F.outs).then(function(jt){jt=pt(jt);for(var Et=0;Et<F.wants.length;++Et){var yt=Oe[Y[Et]];typeof yt=="object"&&yt.hasOwnProperty&&yt.hasOwnProperty("delete")&&yt.delete()}jt&&(I.C=jt)}))}}),I.i.attachMultiListener(Ae,Ce),Ae.delete()}t.onResults=function(I,F){this.listeners[F||"$"]=I},P("Solution",Il),P("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function fN(I){I=Wv(I);var F=I.getMesh();if(!F)return I;var _=new Float32Array(F.getVertexBufferList());F.getVertexBufferList=function(){return _};var Y=new Uint32Array(F.getIndexBufferList());return F.getIndexBufferList=function(){return Y},I}var Om={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(I){return I.map(fN)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(I){return I.map(function(F){return Sf(zv(F),Dc).map(Fm)})}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},Dm=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],Rm=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],Pm=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Um=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Lm=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],jm=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],Jv=[].concat(l(Dm),l(Rm),l(Pm),l(Um),l(Lm),l(jm));function Zv(I){I=I||{},I=Object.assign(Object.assign({},Om),I),this.g=new Il(I)}t=Zv.prototype,t.close=function(){return this.g.close(),Promise.resolve()},t.onResults=function(I){this.g.onResults(I)},t.initialize=function(){return Gr(this,function I(){var F=this;return N(I,function(_){return v(_,F.g.initialize(),0)})})},t.reset=function(){this.g.reset()},t.send=function(I){return Gr(this,function F(){var _=this;return N(F,function(Y){return v(Y,_.g.send(I),0)})})},t.setOptions=function(I){this.g.setOptions(I)},P("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),P("FaceMesh",Zv),P("FACEMESH_LIPS",Dm),P("FACEMESH_LEFT_EYE",Rm),P("FACEMESH_LEFT_EYEBROW",Pm),P("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),P("FACEMESH_RIGHT_EYE",Um),P("FACEMESH_RIGHT_EYEBROW",Lm),P("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),P("FACEMESH_FACE_OVAL",jm),P("FACEMESH_CONTOURS",Jv),P("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),P("matrixDataToMatrix",function(I){for(var F=I.getCols(),_=I.getRows(),Y=I.getPackedDataList(),Ae=[],Ce=0;Ce<_;Ce++)Ae.push(Array(F));for(Ce=0;Ce<_;Ce++)for(var pe=0;pe<F;pe++){var Ne=I.getLayout()===1?Ce*F+pe:pe*_+Ce;Ae[Ce][pe]=Y[Ne]}return Ae}),P("VERSION","0.4.1633559619")}).call(bi);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x1e=1e-7,v1e=1e-4;class AK{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class w_{refCount(e){return di("refCount")}incRef(e){return di("incRef")}timerAvailable(){return!0}time(e){return di("time")}read(e){return di("read")}readSync(e){return di("readSync")}readToGPU(e,n){return di("readToGPU")}numDataIds(){return di("numDataIds")}disposeData(e,n){return di("disposeData")}write(e,n,r){return di("write")}move(e,n,r,s,i){return di("move")}createTensorFromGPUData(e,n,r){return di("createTensorFromGPUData")}memory(){return di("memory")}floatPrecision(){return di("floatPrecision")}epsilon(){return this.floatPrecision()===32?x1e:v1e}dispose(){return di("dispose")}}function di(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b1e(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Gf(t,e,n)}function Ud(t,e,n){return Math.max(t,Math.min(e,n))}function C_(t){return t%2===0?t:t+1}function Gf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function w1e(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function L(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Pi(t,e,n=""){L(_t(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Yp(t){L(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ge(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function C1e(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function _t(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function np(t){return t%1===0}function yk(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Nh(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function e6(t,e=s=>0,n,r){return new Promise((s,i)=>{let o=0;const a=()=>{if(t()){s();return}o++;const l=e(o);if(n!=null&&o>=n){i();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function dK(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function kt(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),L(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),L(t.every(r=>np(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function iA(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||s?null:kt(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(i!=null){if(i[o]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(i[o]==null||i[o]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),i[o]<=a&&o++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function ns(t,e){return sr(t,e)}function sr(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function S1e(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function B1e(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function fK(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function e2(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function N1e(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function lx(t){return typeof t=="string"||t instanceof String}function E1e(t){return typeof t=="boolean"}function xk(t){return typeof t=="number"}function Jp(t){return Array.isArray(t)?Jp(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":xk(t)?"float32":lx(t)?"string":E1e(t)?"bool":"float32"}function vk(t){return!!(t&&t.constructor&&t.call&&t.apply)}function bk(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function ot(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function hK(t,e,n,r=!1){const s=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let o=0;o<i;o++)s[o]=n[t+o]}else{const i=e[0],o=e.slice(1),a=o.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<i;l++)s[l]=hK(t+l*a,o,n,r)}return s}function Ro(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,i)=>s*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return hK(0,t,e,n)}function I1e(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function S_(t,e){const n=vs(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function vs(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function pK(t,e){const n=t.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return Ro(t,new Float32Array(n));if(e==="int32")return Ro(t,new Int32Array(n));if(e==="bool")return Ro(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function oo(t){t.forEach(e=>{L(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function ll(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function Zp(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function Ld(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t6="tfjsflags";class k1e{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=T1e,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Ld(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);t6 in e&&e[t6].split(",").forEach(r=>{const[s,i]=r.split(":");this.urlFlags[s]=$1e(s,i)})}}function T1e(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(F1e(e,r[0],r[1]),r.join("="))),e}function F1e(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function $1e(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function fe(){return mK}let mK=null;function _1e(t){mK=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let k4;function gK(){if(k4==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");k4=t}return k4}function O1e(){const t=gK();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function B_(t,e){const n=O1e();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const yS="Abs",cx="Acos",ux="Acosh",em="Add",xS="AddN",N_="All",E_="Any",vS="ArgMax",bS="ArgMin",Ax="Asin",dx="Asinh",fx="Atan",hx="Atanh",px="Atan2",wS="AvgPool",I_="AvgPoolGrad",CS="AvgPool3D",k_="AvgPool3DGrad",SS="BatchMatMul",BS="BatchToSpaceND",T_="Bincount",NS="BitwiseAnd",D1e="BroadcastTo",F_="BroadcastArgs",mx="Cast",gx="Ceil",yx="ClipByValue",$_="Complex",ES="ComplexAbs",IS="Concat",kS="Conv2D",__="Conv2DBackpropFilter",TS="Conv2DBackpropInput",FS="Conv3D",O_="Conv3DBackpropFilterV2",D_="Conv3DBackpropInputV2",xx="Cos",vx="Cosh",R_="Cumprod",$S="Cumsum",P_="CropAndResize",U_="DenseBincount",L_="DepthToSpace",_S="DepthwiseConv2dNative",j_="DepthwiseConv2dNativeBackpropFilter",M_="DepthwiseConv2dNativeBackpropInput",Q_="Diag",OS="Dilation2D",wk="Dilation2DBackpropInput",Ck="Dilation2DBackpropFilter",R1e="Draw",bx="RealDiv",H_="Einsum",wx="Elu",z_="EluGrad",Cx="Erf",DS="Equal",Sx="Exp",RS="ExpandDims",Bx="Expm1",V_="FFT",W_="Fill",G_="FlipLeftRight",Nx="Floor",Ex="FloorDiv",PS="FusedBatchNorm",US="GatherV2",K_="GatherNd",LS="Greater",Ix="GreaterEqual",kx="Identity",X_="IFFT",q_="Imag",Tx="IsFinite",Fx="IsInf",$x="IsNan",jS="LeakyRelu",MS="Less",QS="LessEqual",Y_="LinSpace",_x="Log",Ox="Log1p",HS="LogicalAnd",zS="LogicalNot",VS="LogicalOr",P1e="LogSoftmax",WS="LRN",J_="LRNGrad",GS="Max",Dx="Maximum",KS="MaxPool",Z_="MaxPoolGrad",XS="MaxPool3D",eO="MaxPool3DGrad",tO="MaxPoolWithArgmax",qS="Mean",YS="Min",Rx="Minimum",JS="MirrorPad",Px="Mod",nO="Multinomial",Ux="Multiply",ZS="Neg",eB="NotEqual",rO="NonMaxSuppressionV3",sO="NonMaxSuppressionV4",iO="NonMaxSuppressionV5",tB="OnesLike",nB="OneHot",rB="Pack",sB="PadV2",Lx="Pow",iB="Prelu",oB="Prod",oO="RaggedGather",aO="RaggedRange",lO="RaggedTensorToTensor",cO="Range",uO="Real",jx="Reciprocal",Mx="Relu",aB="Reshape",lB="ResizeNearestNeighbor",AO="ResizeNearestNeighborGrad",cB="ResizeBilinear",dO="ResizeBilinearGrad",Qx="Relu6",uB="Reverse",Hx="Round",zx="Rsqrt",fO="ScatterNd",hO="TensorScatterUpdate",pO="SearchSorted",AB="Select",Vx="Selu",dB="Slice",Wx="Sin",Gx="Sinh",Kx="Sign",Xx="Sigmoid",qx="Softplus",Yx="Sqrt",fB="Sum",hB="SpaceToBatchND",pB="SplitV",mB="Softmax",mO="SparseFillEmptyRows",gO="SparseReshape",yO="SparseSegmentMean",xO="SparseSegmentSum",vO="SparseToDense",Jx="SquaredDifference",bO="Square",gB="StaticRegexReplace",wO="StridedSlice",CO="StringNGrams",SO="StringSplit",BO="StringToHashBucketFast",Zx="Sub",ev="Tan",tv="Tanh",nv="Tile",NO="TopK",EO="Transform",Eh="Transpose",IO="Unique",yB="Unpack",xB="UnsortedSegmentSum",vB="ZerosLike",rv="Step",Sk="FromPixels",kO="RotateWithOffset",t2="_FusedMatMul",n2="FusedConv2D",r2="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qi(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(...t)}function U1e(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s2=B_("kernelRegistry",()=>new Map),Bk=B_("gradRegistry",()=>new Map);function Nk(t,e){const n=xK(t,e);return s2.get(n)}function n6(t){return Bk.get(t)}function r6(t){const e=s2.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[i,o]=s,[a]=i.split("_");a===t&&n.push(o)}return n}function yK(t){const{kernelName:e,backendName:n}=t,r=xK(e,n);s2.has(r)&&qi(`The kernel '${e}' for backend '${n}' is already registered`),s2.set(r,t)}function L1e(t){const{kernelName:e}=t;Bk.has(e)&&fe().getBool("DEBUG")&&qi(`Overriding the gradient for '${e}'`),Bk.set(e,t)}function xK(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vK(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var bK=Nn,Io=null;try{Io=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Nn(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Nn.prototype.__isLong__;Object.defineProperty(Nn.prototype,"__isLong__",{value:!0});function Ui(t){return(t&&t.__isLong__)===!0}Nn.isLong=Ui;var s6={},i6={};function af(t,e){var n,r,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(r=i6[t],r)?r:(n=En(t,(t|0)<0?-1:0,!0),s&&(i6[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(r=s6[t],r)?r:(n=En(t,t<0?-1:0,!1),s&&(s6[t]=n),n))}Nn.fromInt=af;function ko(t,e){if(isNaN(t))return e?rd:To;if(e){if(t<0)return rd;if(t>=wK)return BK}else{if(t<=-a6)return Si;if(t+1>=a6)return SK}return t<0?ko(-t,e).neg():En(t%rp|0,t/rp|0,e)}Nn.fromNumber=ko;function En(t,e,n){return new Nn(t,e,n)}Nn.fromBits=En;var i2=Math.pow;function TO(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return To;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return TO(t.substring(1),e,n).neg();for(var s=ko(i2(n,8)),i=To,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var c=ko(i2(n,a));i=i.mul(c).add(ko(l))}else i=i.mul(s),i=i.add(ko(l))}return i.unsigned=e,i}Nn.fromString=TO;function Fa(t,e){return typeof t=="number"?ko(t,e):typeof t=="string"?TO(t,e):En(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Nn.fromValue=Fa;var o6=65536,j1e=1<<24,rp=o6*o6,wK=rp*rp,a6=wK/2,l6=af(j1e),To=af(0);Nn.ZERO=To;var rd=af(0,!0);Nn.UZERO=rd;var Ah=af(1);Nn.ONE=Ah;var CK=af(1,!0);Nn.UONE=CK;var Ek=af(-1);Nn.NEG_ONE=Ek;var SK=En(-1,2147483647,!1);Nn.MAX_VALUE=SK;var BK=En(-1,-1,!0);Nn.MAX_UNSIGNED_VALUE=BK;var Si=En(0,-2147483648,!1);Nn.MIN_VALUE=Si;var je=Nn.prototype;je.toInt=function(){return this.unsigned?this.low>>>0:this.low};je.toNumber=function(){return this.unsigned?(this.high>>>0)*rp+(this.low>>>0):this.high*rp+(this.low>>>0)};je.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Si)){var n=ko(e),r=this.div(n),s=r.mul(n).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=ko(i2(e,6),this.unsigned),o=this,a="";;){var l=o.div(i),c=o.sub(l.mul(i)).toInt()>>>0,u=c.toString(e);if(o=l,o.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};je.getHighBits=function(){return this.high};je.getHighBitsUnsigned=function(){return this.high>>>0};je.getLowBits=function(){return this.low};je.getLowBitsUnsigned=function(){return this.low>>>0};je.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Si)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};je.isZero=function(){return this.high===0&&this.low===0};je.eqz=je.isZero;je.isNegative=function(){return!this.unsigned&&this.high<0};je.isPositive=function(){return this.unsigned||this.high>=0};je.isOdd=function(){return(this.low&1)===1};je.isEven=function(){return(this.low&1)===0};je.equals=function(e){return Ui(e)||(e=Fa(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};je.eq=je.equals;je.notEquals=function(e){return!this.eq(e)};je.neq=je.notEquals;je.ne=je.notEquals;je.lessThan=function(e){return this.comp(e)<0};je.lt=je.lessThan;je.lessThanOrEqual=function(e){return this.comp(e)<=0};je.lte=je.lessThanOrEqual;je.le=je.lessThanOrEqual;je.greaterThan=function(e){return this.comp(e)>0};je.gt=je.greaterThan;je.greaterThanOrEqual=function(e){return this.comp(e)>=0};je.gte=je.greaterThanOrEqual;je.ge=je.greaterThanOrEqual;je.compare=function(e){if(Ui(e)||(e=Fa(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};je.comp=je.compare;je.negate=function(){return!this.unsigned&&this.eq(Si)?Si:this.not().add(Ah)};je.neg=je.negate;je.add=function(e){Ui(e)||(e=Fa(e));var n=this.high>>>16,r=this.high&65535,s=this.low>>>16,i=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,A=0,d=0,f=0;return f+=i+c,d+=f>>>16,f&=65535,d+=s+l,A+=d>>>16,d&=65535,A+=r+a,u+=A>>>16,A&=65535,u+=n+o,u&=65535,En(d<<16|f,u<<16|A,this.unsigned)};je.subtract=function(e){return Ui(e)||(e=Fa(e)),this.add(e.neg())};je.sub=je.subtract;je.multiply=function(e){if(this.isZero())return To;if(Ui(e)||(e=Fa(e)),Io){var n=Io.mul(this.low,this.high,e.low,e.high);return En(n,Io.get_high(),this.unsigned)}if(e.isZero())return To;if(this.eq(Si))return e.isOdd()?Si:To;if(e.eq(Si))return this.isOdd()?Si:To;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(l6)&&e.lt(l6))return ko(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,i=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,A=0,d=0,f=0,h=0;return h+=o*u,f+=h>>>16,h&=65535,f+=i*u,d+=f>>>16,f&=65535,f+=o*c,d+=f>>>16,f&=65535,d+=s*u,A+=d>>>16,d&=65535,d+=i*c,A+=d>>>16,d&=65535,d+=o*l,A+=d>>>16,d&=65535,A+=r*u+s*c+i*l+o*a,A&=65535,En(f<<16|h,A<<16|d,this.unsigned)};je.mul=je.multiply;je.divide=function(e){if(Ui(e)||(e=Fa(e)),e.isZero())throw Error("division by zero");if(Io){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Io.div_u:Io.div_s)(this.low,this.high,e.low,e.high);return En(n,Io.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?rd:To;var r,s,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return rd;if(e.gt(this.shru(1)))return CK;i=rd}else{if(this.eq(Si)){if(e.eq(Ah)||e.eq(Ek))return Si;if(e.eq(Si))return Ah;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(To)?e.isNegative()?Ah:Ek:(s=this.sub(e.mul(r)),i=r.add(s.div(e)),i)}else if(e.eq(Si))return this.unsigned?rd:To;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=To}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:i2(2,a-48),c=ko(r),u=c.mul(e);u.isNegative()||u.gt(s);)r-=l,c=ko(r,this.unsigned),u=c.mul(e);c.isZero()&&(c=Ah),i=i.add(c),s=s.sub(u)}return i};je.div=je.divide;je.modulo=function(e){if(Ui(e)||(e=Fa(e)),Io){var n=(this.unsigned?Io.rem_u:Io.rem_s)(this.low,this.high,e.low,e.high);return En(n,Io.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};je.mod=je.modulo;je.rem=je.modulo;je.not=function(){return En(~this.low,~this.high,this.unsigned)};je.and=function(e){return Ui(e)||(e=Fa(e)),En(this.low&e.low,this.high&e.high,this.unsigned)};je.or=function(e){return Ui(e)||(e=Fa(e)),En(this.low|e.low,this.high|e.high,this.unsigned)};je.xor=function(e){return Ui(e)||(e=Fa(e)),En(this.low^e.low,this.high^e.high,this.unsigned)};je.shiftLeft=function(e){return Ui(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?En(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):En(0,this.low<<e-32,this.unsigned)};je.shl=je.shiftLeft;je.shiftRight=function(e){return Ui(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?En(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):En(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};je.shr=je.shiftRight;je.shiftRightUnsigned=function(e){if(Ui(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return En(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?En(n,0,this.unsigned):En(n>>>e-32,0,this.unsigned)};je.shru=je.shiftRightUnsigned;je.shr_u=je.shiftRightUnsigned;je.toSigned=function(){return this.unsigned?En(this.low,this.high,!1):this};je.toUnsigned=function(){return this.unsigned?this:En(this.low,this.high,!0)};je.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};je.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};je.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Nn.fromBytes=function(e,n,r){return r?Nn.fromBytesLE(e,n):Nn.fromBytesBE(e,n)};Nn.fromBytesLE=function(e,n){return new Nn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Nn.fromBytesBE=function(e,n){return new Nn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const NK=Gt(bK),M1e=a9({__proto__:null,default:NK},[bK]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GA=NK||M1e;function bB(t){return GA.fromString(t,!0,16)}const EK=bB("c3a5c85c97cb3127"),QA=bB("b492b66fbe98f273"),Os=bB("9ae16a3b2f90404f");function Ik(t){return t.xor(t.shru(47))}function IK(t,e,n){const r=t.slice(e,e+n);return GA.fromBytes(Array.from(r),!0,!0)}function gn(t,e){return IK(t,e,8)}function c6(t,e){return IK(t,e,4)}function Ur(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Fu(t,e,n=bB("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function Q1e(t,e,n,r,s,i){s=s.add(t),i=Ur(i.add(s).add(r),21);const o=s;return s=s.add(e),s=s.add(n),i=i.add(Ur(s,44)),[s.add(r),i.add(o)]}function sb(t,e,n,r){return Q1e(gn(t,e),gn(t,e+8),gn(t,e+16),gn(t,e+24),n,r)}function H1e(t,e=t.length){if(e>=8){const n=Os.add(e*2),r=gn(t,0).add(Os),s=gn(t,e-8),i=Ur(s,37).mul(n).add(r),o=Ur(r,25).add(s).mul(n);return Fu(i,o,n)}if(e>=4){const n=Os.add(e*2),r=c6(t,0);return Fu(r.shl(3).add(e),c6(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],i=n+(r<<8),o=e+(s<<2);return Ik(Os.mul(i).xor(EK.mul(o))).mul(Os)}return Os}function z1e(t,e=t.length){const n=Os.add(e*2),r=gn(t,0).mul(QA),s=gn(t,8),i=gn(t,e-8).mul(n),o=gn(t,e-16).mul(Os);return Fu(Ur(r.add(s),43).add(Ur(i,30)).add(o),r.add(Ur(s.add(Os),18)).add(i),n)}function V1e(t,e=t.length){const n=Os.add(e*2),r=gn(t,0).mul(Os),s=gn(t,8),i=gn(t,e-8).mul(n),o=gn(t,e-16).mul(Os),a=Ur(r.add(s),43).add(Ur(i,30)).add(o),l=Fu(a,r.add(Ur(s.add(Os),18)).add(i),n),c=gn(t,16).mul(n),u=gn(t,24),A=a.add(gn(t,e-32)).mul(n),d=l.add(gn(t,e-24)).mul(n);return Fu(Ur(c.add(u),43).add(Ur(A,30)).add(d),c.add(Ur(u.add(r),18)).add(A),n)}function W1e(t,e=t.length){const n=GA.fromNumber(81,!0);if(e<=32)return e<=16?H1e(t,e):z1e(t,e);if(e<=64)return V1e(t,e);let r=n,s=n.mul(QA).add(113),i=Ik(s.mul(Os).add(113)).mul(Os),o=[GA.UZERO,GA.UZERO],a=[GA.UZERO,GA.UZERO];r=r.mul(Os).add(gn(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=Ur(r.add(s).add(o[0]).add(gn(t,l+8)),37).mul(QA),s=Ur(s.add(o[1]).add(gn(t,l+48)),42).mul(QA),r=r.xor(a[1]),s=s.add(o[0]).add(gn(t,l+40)),i=Ur(i.add(a[0]),33).mul(QA),o=sb(t,l,o[1].mul(QA),r.add(a[0])),a=sb(t,l+32,i.add(a[1]),s.add(gn(t,l+16))),[i,r]=[r,i],l+=64;while(l!==c);const A=QA.add(i.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=Ur(r.add(s).add(o[0]).add(gn(t,l+8)),37).mul(A),s=Ur(s.add(o[1]).add(gn(t,l+48)),42).mul(A),r=r.xor(a[1].mul(9)),s=s.add(o[0].mul(9).add(gn(t,l+40))),i=Ur(i.add(a[0]),33).mul(A),o=sb(t,l,o[1].mul(A),r.add(a[0])),a=sb(t,l+32,i.add(a[1]),s.add(gn(t,l+16))),[i,r]=[r,i],Fu(Fu(o[0],a[0],A).add(Ik(s).mul(EK)).add(i),Fu(o[1],a[1],A).add(r),A)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oA(t,e){return e==="string"?$u(t):lf([t],e)}function G1e(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function lf(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=jd(t)),fe().getBool("DEBUG")&&S1e(t,e),G1e(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Ys(){return fe().platform.now()}function $u(t,e="utf-8"){return e=e||"utf-8",fe().platform.encode(t,e)}function Hu(t,e="utf-8"){return e=e||"utf-8",fe().platform.decode(t,e)}function Mo(t){return fe().platform.isTypedArray!=null?fe().platform.isTypedArray(t):vK(t)}function jd(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||Ld(t)||t==null||Mo(t)&&n)e.push(t);else if(Array.isArray(t)||Mo(t))for(let r=0;r<t.length;++r)jd(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)jd(t[s],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K1e{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new q1e)}profileKernel(e,n,r){let s;const i=()=>{s=r()};let o;const a=Ys();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const c of s)c.dataSync();o=Promise.resolve({kernelMs:Ys()-a})}if(fe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const u=s[c];u.data().then(A=>{X1e(A,u.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:o.then(c=>c.kernelMs),extraInfo:o.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:i,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),s,o]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],i,l[2])})})}}function X1e(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class q1e{logKernelProfile(e,n,r,s,i,o){const a=typeof s=="number"?Nh(`${s}ms`,9):s.error,l=Nh(e,25),c=n.rank,u=n.size,A=Nh(n.shape.toString(),14);let d="";for(const f in i){const h=i[f];if(h!=null){const p=h.shape||n.shape,m=p.length;d+=`${f}: ${m}D ${m>0?p:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${A}	%c${u}	%c${d}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y1e(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const A in u){const d=u[A];let f=!1;for(let h=0;h<e.length;h++)if(r[d.id]){c.outputs.forEach(p=>r[p.id]=!0),f=!0,s[c.id]=!0;break}if(f)break}}const i={};i[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let A=0;A<c.outputs.length;A++)if(i[c.outputs[A].id]){for(const d in u)i[u[d].id]=!0,o[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(s[c.id]&&o[c.id]){const u={};for(const d in c.inputs){const f=c.inputs[d];r[f.id]&&(u[d]=f)}const A=Object.assign({},c);A.inputs=u,A.outputs=c.outputs,a.push(A)}}return a}function J1e(t,e,n,r){for(let s=e.length-1;s>=0;s--){const i=e[s],o=[];if(i.outputs.forEach(l=>{const c=t[l.id];c!=null?o.push(c):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const a=i.gradient(o);for(const l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=i.inputs[l];if(!_t(c.shape,u.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const A=t[u.id];t[u.id]=r(A,c),A.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u6=20,ig=3,T4=7;function Z1e(t,e,n,r){const s=ot(e),i=ebe(t,e,n,s),o=e.length,a=rw(t,e,n,s,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function ebe(t,e,n,r){const s=ge(e),i=r[r.length-1],o=new Array(i).fill(0),a=e.length,l=n==="complex64"?Pg(t):t;if(a>1)for(let c=0;c<s/i;c++){const u=c*i;for(let A=0;A<i;A++)o[A]=Math.max(o[A],Rg(l[u+A],0,n).length)}return o}function Rg(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(T4))} + ${parseFloat(t[1].toFixed(T4))}j`:lx(t)?r=`'${t}'`:n==="bool"?r=kK(t):r=parseFloat(t.toFixed(T4)).toString(),Nh(r,e)}function kK(t){return t===0?"false":"true"}function rw(t,e,n,r,s,i=!0){const o=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const p=Pg(t);return[Rg(p[0],0,n)]}return n==="bool"?[kK(t[0])]:[t[0].toString()]}if(l===1){if(a>u6){const m=ig*o;let y=Array.from(t.slice(0,m)),x=Array.from(t.slice((a-ig)*o,a*o));return n==="complex64"&&(y=Pg(y),x=Pg(x)),["["+y.map((v,b)=>Rg(v,s[b],n)).join(", ")+", ..., "+x.map((v,b)=>Rg(v,s[a-ig+b],n)).join(", ")+"]"]}return["["+(n==="complex64"?Pg(t):Array.from(t)).map((m,y)=>Rg(m,s[y],n)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),A=r[0]*o,d=[];if(a>u6){for(let p=0;p<ig;p++){const m=p*A,y=m+A;d.push(...rw(t.slice(m,y),c,n,u,s,!1))}d.push("...");for(let p=a-ig;p<a;p++){const m=p*A,y=m+A;d.push(...rw(t.slice(m,y),c,n,u,s,p===a-1))}}else for(let p=0;p<a;p++){const m=p*A,y=m+A;d.push(...rw(t.slice(m,y),c,n,u,s,p===a-1))}const f=l===2?",":"";d[0]="["+(a>0?d[0]+f:"");for(let p=1;p<d.length-1;p++)d[p]=" "+d[p]+f;let h=`,
`;for(let p=2;p<l;p++)h+=`
`;return d[d.length-1]=" "+d[d.length-1]+"]"+(i?"":h),d}function Pg(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Er{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=ge(e),r!=null){const s=r.length;L(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||sr(n,this.size),this.strides=ot(e)}set(e,...n){n.length===0&&(n=[0]),L(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return ua().makeTensor(this.values,this.shape,this.dtype)}}let ua=null,Kf=null;function tbe(t){ua=t}function nbe(t){Kf=t}class qt{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=ge(e),this.strides=ot(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Kf.buffer(this.shape,this.dtype,e)}bufferSync(){return Kf.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Ro(this.shape,e,this.dtype==="complex64")}arraySync(){return Ro(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=ua().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Hu(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),ua().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=ua().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Hu(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await ua().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),ua().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Kf.print(this,e)}clone(){return this.throwIfDisposed(),Kf.clone(this)}toString(e=!1){const n=this.dataSync();return Z1e(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Kf.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),ua().makeVariable(this,e,n,r)}}Object.defineProperty(qt,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function ve(){return B_("Tensor",()=>qt)}ve();class o2 extends qt{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!_t(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);ua().disposeTensor(this),this.dataId=e.dataId,ua().incRef(this,null)}dispose(){ua().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(o2,Symbol.hasInstance,{value:t=>t instanceof qt&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var A6;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(A6||(A6={}));var kk;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(kk||(kk={}));var Tk;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(Tk||(Tk={}));var Fk;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(Fk||(Fk={}));var $k;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})($k||($k={}));const rbe={float32:Fk,int32:kk,bool:Tk,complex64:$k};function _i(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return rbe[t][e]}function FO(t){return _i(t,"int32")}function TK(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function FK(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jn(t,e){if(t.dtype===e.dtype)return[t,e];const n=_i(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function sbe(t,e){L(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function $K(t){const e=[];return _K(t,e,new Set),e}function _K(t,e,n){if(t==null)return;if(t instanceof qt){e.push(t);return}if(!ibe(t))return;const r=t;for(const s in r){const i=r[s];n.has(i)||(n.add(i),_K(i,e,n))}}function ibe(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F4(t){return t.kernelName!=null}class d6{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class sp{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new d6}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(qi(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new K1e(this.backendInstance),!0}setupRegisteredKernels(){r6(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){r6(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof w_)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,i=r.then(o=>s<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,qi(`Initialization of backend ${e} failed`),qi(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return qi(`Initialization of backend ${e} failed`),qi(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:i}=this.initializeBackend(r);if(i||s)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,i=this.readSync(n),o=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return sp.nextTensorId++}nextVariableId(){return sp.nextVariableId++}clone(e){const n=re.runKernel(kx,{x:e}),r={x:e},s=o=>({x:()=>{const a="float32",l={x:o},c={dtype:a};return re.runKernel(mx,l,c)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(Nk(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=s-n-i-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const c=F4(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(F4(e)){const{kernelName:h,inputs:p,attrs:m}=e;this.backendName==null&&this.backend;const y=Nk(h,this.backendName);L(y!=null,()=>`Cannot find registered kernel '${h}' for backend '${this.backendName}'`),a=()=>{const x=this.backend.numDataIds();l=y.kernelFunc({inputs:p,attrs:m,backend:this.backend});const v=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(h,x,v);const b=v.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(s){const w=this.getTensorsForGradient(h,p,b);r=this.saveTensorsForBackwardMode(w)}return b}}else{const{forwardFunc:h}=e,p=m=>{s&&(r=m.map(y=>this.keep(this.clone(y))))};a=()=>{const m=this.backend.numDataIds();l=this.tidy(()=>h(this.backend,p));const y=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,m,y),y}}const{inputs:u,attrs:A}=e,d=F4(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(f=this.profiler.profileKernel(c,u,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),s&&this.addTapeNode(c,u,n,d,r,A),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(h=>u[h]!=null?u[h].shape:null),outputShapes:n.map(h=>h.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=n6(e);if(s!=null){const i=s.inputsToSave||[],o=s.outputsToSave||[];let a;s.saveAllInputs?(L(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(c=>n[c])):a=i.map(c=>n[c]);const l=r.filter((c,u)=>o[u]);return a.concat(l)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let i=e;r==="string"&&lx(e[0])&&(i=e.map(l=>$u(l)));const o=s.write(i,n,r),a=new qt(n,r,o,this.nextTensorId());if(this.trackTensor(a,s),r==="string"){const l=this.state.tensorInfo.get(o),c=N1e(i);this.state.numBytes+=c-l.bytes,l.bytes=c}return a}makeTensorFromDataId(e,n,r,s){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:i}=e,o=new qt(s,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const i=new o2(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*e2(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof o2||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*e2(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,i,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=n6(e);l!=null&&(s=l.gradFunc),s!=null&&(a.gradient=c=>(c=c.map((u,A)=>{if(u==null){const d=r[A],f=vs(d.size,d.dtype);return this.makeTensor(f,d.shape,d.dtype)}return u}),s(c.length>1?c:c[0],i,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=$K(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(e,n,r,s=!1){if(L(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));L(i instanceof qt,()=>"The result y returned by f() must be a tensor.");const o=Y1e(this.state.activeTape,n,i);if(!s&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[i.id]=r??obe(i.shape),J1e(a,o,c=>this.tidy(c),abe);const l=n.map(c=>a[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return L(vk(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{L(n.every(a=>a instanceof qt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((a,l)=>{s[l]=a});const i=(a,l)=>(r=e(...n,l),L(r.value instanceof qt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),L(vk(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,l)=>{const c=r.gradFunc(a,l),u=Array.isArray(c)?c:[c];L(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),L(u.every(d=>d instanceof qt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const A={};return u.forEach((d,f)=>{A[f]=()=>d}),A};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Ys(),r=await this.backend.time(e);return r.wallMs=Ys()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new d6;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}sp.nextTensorId=0;sp.nextVariableId=0;function obe(t){const e=S_(ge(t),"float32");return re.makeTensor(e,t,"float32")}function OK(){const t=gK();if(t._tfengine==null){const e=new k1e(t);t._tfengine=new sp(e)}return _1e(t._tfengine.ENV),tbe(()=>t._tfengine),t._tfengine}const re=OK();function abe(t,e){const n={a:t,b:e};return re.runKernel(em,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lbe(){return typeof navigator<"u"&&navigator!=null}function DK(t){if(t||lbe()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function RK(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const si=fe();si.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});si.registerFlag("IS_BROWSER",()=>RK());si.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");si.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));si.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));si.registerFlag("PROD",()=>!1);si.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>si.getBool("DEBUG"));si.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);si.registerFlag("IS_TEST",()=>!1);si.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>si.getBool("DEBUG"));si.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);si.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);si.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aA(t,e){let n=t;if(Mo(t))return e==="string"?[]:[t.length];if(TK(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(FK(t))return[t.buffer.size/(e==null?4:e2(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Mo(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&fe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&PK(t,r,[]),r}function PK(t,e,n){if(n=n||[],!Array.isArray(t)&&!Mo(t)){L(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}L(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),L(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)PK(t[s],r,n.concat(s))}function f6(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function Q(t,e,n,r="numeric"){if(t instanceof ve())return f6(r,t.dtype,e,n),t;let s=Jp(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),f6(r,s,e,n),t==null||!Mo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const i=aA(t,s);!Mo(t)&&!Array.isArray(t)&&(t=[t]);const a=s!=="string"?lf(t,s):jd(t,[],!0);return re.makeTensor(a,i,s)}function a2(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,o)=>Q(i,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UK="__op";function ee(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+UK;const s=(...i)=>{re.startScope(n);try{const o=r(...i);return Ld(o)&&console.error("Cannot return a Promise inside of tidy."),re.endScope(o),o}catch(o){throw re.endScope(null),o}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cbe(t,e){const n=Q(t,"real","complex"),r=Q(e,"imag","complex");Pi(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return re.runKernel($_,s)}const zu=ee({complex_:cbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lA(t,e,n,r){if(r==null)r=Jp(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(FK(t)||TK(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return re.backend.createTensorFromGPUData(t,e||n,r)}if(!Mo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){oo(e);const s=ge(e),i=ge(n);L(s===i,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${i}`);for(let o=0;o<n.length;++o){const a=n[o],l=o===n.length-1?a!==ge(e.slice(o)):!0;L(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Mo(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?lf(t,r):jd(t,[],!0),re.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ya(t,e,n){const r=aA(t,n);return lA(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Md={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class $a{static join(e){return new $a(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Mo(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+s.byteLength;this.shards.push({buffer:s,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,i=new ArrayBuffer(s),o=new Uint8Array(i);let a=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],A=e+a-c.start,d=a,h=Math.min(n,c.end)-c.start,p=new Uint8Array(c.buffer,A,h-A);if(o.set(p,d),a+=p.length,n<c.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=ube(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function ube(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,i=e(t[s]);if(i===0)return s;i<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wa(){return re}function h6(){return re.memory()}function ce(t,e){return re.tidy(t,e)}function ft(t){$K(t).forEach(n=>n.dispose())}function Mr(t){return re.keep(t)}function Abe(){return re.ready()}function dbe(){return re.backendName}function LK(t,e,n=1){return re.registerBackend(t,e,n)}function jK(){return re.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vu=4;async function _k(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<s.length;++o){const a=s[o],l=Array.isArray(t)?t[o].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async A=>{const d=await l.bytes(),f=d.reduce((m,y)=>m+y.length,0)+Vu*d.length,h=new Uint8Array(f);let p=0;for(let m=0;m<d.length;m++){const y=d[m],x=new Uint8Array(new Uint32Array([y.length]).buffer);h.set(x,p),p+=Vu,h.set(y,p),p+=y.length}A(h)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const i=await Promise.all(r);return{data:pbe(i),specs:n}}function MK(t,e){const n=new $a(t),r={};let s=0;for(const i of e){const o=fbe(i,(a,l)=>n.slice(s+a,s+l));r[i.name]=QK(i,n.slice(s,s+o)),s+=o}return r}function fbe(t,e){const n=ge(t.shape);let r;if("quantization"in t){const s=t.quantization;r=Md[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=Vu+new Uint32Array(e(s,s+Vu))[0];return s}else r=Md[t.dtype];return n*r}async function hbe(t,e){const n=ge(t.shape);let r;if("quantization"in t){const s=t.quantization;r=Md[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=Vu+new Uint32Array(await e(s,s+Vu))[0];return s}else r=Md[t.dtype];return n*r}function QK(t,e){const n=t.name,r=t.dtype,s=t.shape,i=ge(s);let o,a=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=Md[l.dtype],u=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){o=new Float32Array(u.length);for(let A=0;A<u.length;A++){const d=u[A];o[A]=d*l.scale+l.min}}else if(l.dtype==="float16")o=bbe()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);o=new Int32Array(u.length);for(let A=0;A<u.length;A++){const d=u[A];o[A]=Math.round(d*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*c}else if(r==="string"){const l=ge(t.shape);o=[];for(let c=0;c<l;c++){const u=new Uint32Array(e.slice(a,a+Vu))[0];a+=Vu;const A=new Uint8Array(e.slice(a,a+u));o.push(A),a+=u}}else{const l=Md[r];if(r==="float32")o=new Float32Array(e);else if(r==="int32")o=new Int32Array(e);else if(r==="bool")o=new Uint8Array(e);else if(r==="complex64"){o=new Float32Array(e);const c=new Float32Array(o.length/2),u=new Float32Array(o.length/2);for(let h=0;h<c.length;h++)c[h]=o[h*2],u[h]=o[h*2+1];const A=ya(c,s,"float32"),d=ya(u,s,"float32"),f=zu(A,d);return A.dispose(),d.dispose(),f}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*l}return ya(o,s,r)}async function p6(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:s,value:i}=await t.read();if(s&&i==null){const a=n-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}const o=new Uint8Array(r.length+i.byteLength);o.set(r,0),o.set(new Uint8Array(i),r.length),r=o}return r.buffer}async function HK(t,e){const n={},r=t.getReader();let s=new ArrayBuffer(0);for(const i of e){const o=await hbe(i,async(c,u)=>(s=await p6(r,s,u),s.slice(c,u)));s=await p6(r,s,o);const a=s.slice(0,o);s=s.slice(o);const l=QK(i,a);if(n[i.name]=l,dbe()==="webgpu"){const c=jK();"uploadToGPU"in c&&ge(l.shape)>=fe().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return n}function pbe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),r.buffer}const $O=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function m6(t){return $O?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function mbe(t){if($O)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function gbe(t){if($O){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function zK(t){return $a.join(t)}function g6(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function VK(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function WK(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function _O(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),WK(t,n,r)}function sv(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:m6(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:m6(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new $a(t.weightData).byteLength}}function Ok(t){const e=[];for(const n of t)e.push(...n.weights);return e}function ybe(){const t=n=>{let r=n<<13,s=0;for(;!(r&8388608);)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function xbe(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function vbe(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function bbe(){const t=ybe(),e=xbe(),n=vbe();return r=>{const s=new ArrayBuffer(4*r.length),i=new Uint32Array(s);for(let o=0;o<r.length;o++){const a=r[o],l=t[n[a>>10]+(a&1023)]+e[a>>10];i[o]=l}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Un{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Un.instance==null&&(Un.instance=new Un),Un.instance}static registerSaveRouter(e){Un.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Un.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Un.getHandlers(e,"save")}static getLoadHandlers(e,n){return Un.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?Un.getInstance().loadRouters:Un.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&s.push(a)}),s}}const wbe=t=>Un.registerSaveRouter(t),Cbe=t=>Un.registerLoadRouter(t),GK=t=>Un.getSaveHandlers(t),Sbe=(t,e)=>Un.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dk="tensorflowjs",Rk=1,sd="models_store",pu="model_info_store";function KK(){if(!fe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Pk(t){const e=t.result;e.createObjectStore(sd,{keyPath:"modelPath"}),e.createObjectStore(pu,{keyPath:"modelPath"})}class Qd{constructor(e){if(this.indexedDB=KK(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const i=this.indexedDB.open(Dk,Rk);i.onupgradeneeded=()=>Pk(i),i.onsuccess=()=>{const o=i.result;if(n==null){const a=o.transaction(sd,"readonly"),c=a.objectStore(sd).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return o.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(o.close(),s(c.error)),a.oncomplete=()=>o.close()}else{n.weightData=$a.join(n.weightData);const a=sv(n),l=o.transaction(pu,"readwrite");let c=l.objectStore(pu),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(d){return s(d)}let A;u.onsuccess=()=>{A=o.transaction(sd,"readwrite");const d=A.objectStore(sd);let f;try{f=d.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(h){return s(h)}f.onsuccess=()=>r({modelArtifactsInfo:a}),f.onerror=h=>{c=l.objectStore(pu);const p=c.delete(this.modelPath);p.onsuccess=()=>(o.close(),s(f.error)),p.onerror=m=>(o.close(),s(f.error))}},u.onerror=d=>(o.close(),s(u.error)),l.oncomplete=()=>{A==null?o.close():A.oncomplete=()=>o.close()}}},i.onerror=o=>s(i.error)})}}Qd.URL_SCHEME="indexeddb://";const XK=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Qd.URL_SCHEME)?Bbe(t.slice(Qd.URL_SCHEME.length)):null;Un.registerSaveRouter(XK);Un.registerLoadRouter(XK);function Bbe(t){return new Qd(t)}function Nbe(t){return t.startsWith(Qd.URL_SCHEME)?t.slice(Qd.URL_SCHEME.length):t}class Ebe{constructor(){this.indexedDB=KK()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(Dk,Rk);r.onupgradeneeded=()=>Pk(r),r.onsuccess=()=>{const s=r.result,i=s.transaction(pu,"readonly"),a=i.objectStore(pu).getAll();a.onsuccess=()=>{const l={};for(const c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(s.close(),n(a.error)),i.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=Nbe(e),new Promise((n,r)=>{const s=this.indexedDB.open(Dk,Rk);s.onupgradeneeded=()=>Pk(s),s.onsuccess=()=>{const i=s.result,o=i.transaction(pu,"readwrite"),a=o.objectStore(pu),l=a.get(e);let c;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=a.delete(e),A=()=>{c=i.transaction(sd,"readwrite");const f=c.objectStore(sd).delete(e);f.onsuccess=()=>n(l.result.modelArtifactsInfo),f.onerror=h=>r(l.error)};u.onsuccess=A,u.onerror=d=>(A(),i.close(),r(l.error))}},l.onerror=u=>(i.close(),r(l.error)),o.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},s.onerror=i=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zl="/",Xf="tensorflowjs_models",qK="info",Ibe="model_topology",kbe="weight_specs",Tbe="weight_data",Fbe="model_metadata";function YK(t){return{info:[Xf,t,qK].join(zl),topology:[Xf,t,Ibe].join(zl),weightSpecs:[Xf,t,kbe].join(zl),weightData:[Xf,t,Tbe].join(zl),modelMetadata:[Xf,t,Fbe].join(zl)}}function JK(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function $be(t){const e=t.split(zl);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(zl)}function _be(t){return t.startsWith(Hd.URL_SCHEME)?t.slice(Hd.URL_SCHEME.length):t}class Hd{constructor(e){if(!fe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=YK(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=sv(e),i=$a.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,mbe(i));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:s}}catch{throw JK(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const a=JSON.parse(i);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=gbe(o),n}}Hd.URL_SCHEME="localstorage://";const ZK=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Hd.URL_SCHEME)?Obe(t.slice(Hd.URL_SCHEME.length)):null;Un.registerSaveRouter(ZK);Un.registerLoadRouter(ZK);function Obe(t){return new Hd(t)}class Dbe{constructor(){L(fe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),L(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Xf+zl,r=zl+qK;for(let s=0;s<this.LS.length;++s){const i=this.LS.key(s);if(i.startsWith(n)&&i.endsWith(r)){const o=$be(i);e[o]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=_be(e);const n=YK(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return JK(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ih="://";class $s{constructor(){this.managers={}}static getInstance(){return $s.instance==null&&($s.instance=new $s),$s.instance}static registerManager(e,n){L(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Ih)&&(e=e.slice(0,e.indexOf(Ih))),L(e.length>0,()=>"scheme must not be an empty string.");const r=$s.getInstance();L(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=$s.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys($s.getInstance().managers)}}function sw(t){if(t.indexOf(Ih)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${$s.getSchemes().join(",")}`);return{scheme:t.split(Ih)[0],path:t.split(Ih)[1]}}async function eX(t,e,n=!1){L(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Un.getLoadHandlers(t);L(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),L(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const s=r[0],i=Un.getSaveHandlers(e);L(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),L(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=i[0],a=sw(t).scheme,l=sw(t).path,c=a===sw(t).scheme,u=await s.load();n&&c&&await $s.getManager(a).removeModel(l);const A=await o.save(u);return n&&!c&&await $s.getManager(a).removeModel(l),A.modelArtifactsInfo}async function Rbe(){const t=$s.getSchemes(),e={};for(const n of t){const r=await $s.getManager(n).listModels();for(const s in r){const i=n+Ih+s;e[i]=r[s]}}return e}async function Pbe(t){const e=sw(t);return $s.getManager(e.scheme).removeModel(e.path)}async function Ube(t,e){return eX(t,e,!1)}async function Lbe(t,e){return eX(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jbe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!fe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return vK(e)}}if(fe().get("IS_BROWSER")){fe().setPlatform("browser",new jbe);try{$s.registerManager(Hd.URL_SCHEME,new Dbe)}catch{}try{$s.registerManager(Qd.URL_SCHEME,new Ebe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mbe={importFetch:()=>require("node-fetch")};let $4;class Qbe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return fe().global.fetch!=null?fe().global.fetch(e,n):($4==null&&($4=Mbe.importFetch()),$4(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}fe().get("IS_NODE")&&!fe().get("IS_BROWSER")&&fe().setPlatform("node",new Qbe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function St(t,e="float32",n){return e=e||"float32",oo(t),new Er(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hbe(t,e){const n=Q(t,"x","cast");if(!B1e(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return re.runKernel(mx,r,s)}const Pe=ee({cast_:Hbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zbe(t){const n={x:Q(t,"x","clone","string_or_numeric")};return re.runKernel(kx,n)}const rc=ee({clone_:zbe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tX(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */OK();const Vbe={buffer:St,cast:Pe,clone:rc,print:tX};nbe(Vbe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wbe(t,e){let n=Q(t,"a","add"),r=Q(e,"b","add");[n,r]=Jn(n,r);const s={a:n,b:r};return re.runKernel(em,s)}const Ee=ee({add_:Wbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gbe(t,e){let n=Q(t,"a","floorDiv"),r=Q(e,"b","floorDiv");[n,r]=Jn(n,r);const s={a:n,b:r};return re.runKernel(Ex,s)}const OO=ee({floorDiv_:Gbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kbe(t,e){let n=Q(t,"a","div"),r=Q(e,"b","div");if([n,r]=Jn(n,r),n.dtype==="int32"&&r.dtype==="int32")return OO(n,r);const s={a:n,b:r},i={};return re.runKernel(bx,s,i)}const ze=ee({div_:Kbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xbe(t,e){let n=Q(t,"a","mul"),r=Q(e,"b","mul");[n,r]=Jn(n,r);const s={a:n,b:r};return re.runKernel(Ux,s)}const ne=ee({mul_:Xbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qbe(t){const e=Q(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return re.runKernel(ES,n)}else{const n={x:e};return re.runKernel(yS,n)}}const vr=ee({abs_:qbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ybe(t){const n={x:Q(t,"x","acos")};return re.runKernel(cx,n)}const nX=ee({acos_:Ybe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jbe(t){const n={x:Q(t,"x","acosh")};return re.runKernel(ux,n)}const rX=ee({acosh_:Jbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zbe(t){L(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),L(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((s,i)=>Q(s,`tensors${i}`,"addN")),n=e[0];e.forEach(s=>{if(s.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(s=>{if(!_t(s.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return re.runKernel(xS,r)}const ewe=ee({addN_:Zbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function twe(t,e=null,n=!1){const s={x:Q(t,"x","all","bool")},i={axis:e,keepDims:n};return re.runKernel(N_,s,i)}const DO=ee({all_:twe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nwe(t,e=null,n=!1){const s={x:Q(t,"x","any","bool")},i={axis:e,keepDims:n};return re.runKernel(E_,s,i)}const l2=ee({any_:nwe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rwe(t,e=0){const r={x:Q(t,"x","argMax")},s={axis:e};return re.runKernel(vS,r,s)}const ip=ee({argMax_:rwe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function swe(t,e=0){const r={x:Q(t,"x","argMin")},s={axis:e};return re.runKernel(bS,r,s)}const sX=ee({argMin_:swe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iwe(t){const n={x:Q(t,"x","asin")};return re.runKernel(Ax,n)}const iX=ee({asin_:iwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function owe(t){const n={x:Q(t,"x","asinh")};return re.runKernel(dx,n)}const oX=ee({asinh_:owe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function awe(t){const n={x:Q(t,"x","atan")};return re.runKernel(fx,n)}const aX=ee({atan_:awe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lwe(t,e){let n=Q(t,"a","atan2"),r=Q(e,"b","atan2");[n,r]=Jn(n,r);const s={a:n,b:r};return re.runKernel(px,s)}const lX=ee({atan2_:lwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cwe(t){const n={x:Q(t,"x","atanh")};return re.runKernel(hx,n)}const cX=ee({atanh_:cwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iv(t,e,n,r,s="NHWC",i){const o=t[3],a=[...e,o],l=Ec(s);return zr(t,a,n,i,r,null,null,l)}function Go(t,e,n,r,s,i,o="channelsLast"){const[a,l]=Ky(e);let c;if(o==="channelsLast")c=[a,l,t[3],t[3]];else if(o==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return zr(t,c,n,r,s,i,!1,o)}function Nc(t,e,n,r,s,i,o="NDHWC"){const[a,l,c]=Uk(e);let u,A;if(o==="NDHWC")A="channelsLast",u=[a,l,c,t[4],t[4]];else if(o==="NCDHW")A="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return cA(t,u,n,r,s,!1,A,i)}function zr(t,e,n,r,s,i,o=!1,a="channelsLast"){let[l,c,u,A]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,A]=t;else if(a==="channelsFirst")[l,A,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);const[d,f,,h]=e,[p,m]=Ky(n),[y,x]=Ky(r),v=kh(d,y),b=kh(f,x),{padInfo:w,outHeight:C,outWidth:B}=dwe(s,c,u,p,m,v,b,i,a),S=o?h*A:h;let N;return a==="channelsFirst"?N=[l,S,C,B]:a==="channelsLast"&&(N=[l,C,B,S]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:A,outHeight:C,outWidth:B,outChannels:S,padInfo:w,strideHeight:p,strideWidth:m,filterHeight:d,filterWidth:f,effectiveFilterHeight:v,effectiveFilterWidth:b,dilationHeight:y,dilationWidth:x,inShape:t,outShape:N,filterShape:e}}function cA(t,e,n,r,s,i=!1,o="channelsLast",a){let[l,c,u,A,d]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,A,d]=t;else if(o==="channelsFirst")[l,d,c,u,A]=t;else throw new Error(`Unknown dataFormat ${o}`);const[f,h,p,,m]=e,[y,x,v]=Uk(n),[b,w,C]=Uk(r),B=kh(f,b),S=kh(h,w),N=kh(p,C),{padInfo:k,outDepth:O,outHeight:U,outWidth:P}=fwe(s,c,u,A,y,x,v,B,S,N,a),V=i?m*d:m;let W;return o==="channelsFirst"?W=[l,V,O,U,P]:o==="channelsLast"&&(W=[l,O,U,P,V]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:u,inWidth:A,inChannels:d,outDepth:O,outHeight:U,outWidth:P,outChannels:V,padInfo:k,strideDepth:y,strideHeight:x,strideWidth:v,filterDepth:f,filterHeight:h,filterWidth:p,effectiveFilterDepth:B,effectiveFilterHeight:S,effectiveFilterWidth:N,dilationDepth:b,dilationHeight:w,dilationWidth:C,inShape:t,outShape:W,filterShape:e}}function uwe(t,e,n,r,s){r==null&&(r=RO(t,e,n));const i=t[0],o=t[1],a=Xy((i-e+2*r)/n+1,s),l=Xy((o-e+2*r)/n+1,s);return[a,l]}function Awe(t,e,n,r,s,i){s==null&&(s=RO(t,e[0],r[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*s>=e[a]&&(o[a]=Xy((t[a]-e[a]+2*s)/r[a]+1,i));return o}function RO(t,e,n,r=1){const s=kh(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function Ky(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Uk(t){return typeof t=="number"?[t,t,t]:t}function kh(t,e){return e<=1?t:t+(t-1)*(e-1)}function dwe(t,e,n,r,s,i,o,a,l){let c,u,A;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const f=uwe([e,n],i,r,t,a);u=f[0],A=f[1]}else if(t==="same"){u=Math.ceil(e/r),A=Math.ceil(n/s);const d=Math.max(0,(u-1)*r+i-e),f=Math.max(0,(A-1)*s+o-n),h=Math.floor(d/2),p=d-h,m=Math.floor(f/2),y=f-m;c={top:h,bottom:p,left:m,right:y,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-i+1)/r),A=Math.ceil((n-o+1)/s);else if(typeof t=="object"){const d=l==="channelsLast"?t[1][0]:t[2][0],f=l==="channelsLast"?t[1][1]:t[2][1],h=l==="channelsLast"?t[2][0]:t[3][0],p=l==="channelsLast"?t[2][1]:t[3][1];c={top:d,bottom:f,left:h,right:p,type:d===0&&f===0&&h===0&&p===0?"VALID":"EXPLICIT"},u=Xy((e-i+d+f)/r+1,a),A=Xy((n-o+h+p)/s+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:A}}function fwe(t,e,n,r,s,i,o,a,l,c,u){let A,d,f,h;if(t==="valid"&&(t=0),typeof t=="number"){A={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const m=Awe([e,n,r,1],[a,l,c],1,[s,i,o],t,u);d=m[0],f=m[1],h=m[2]}else if(t==="same"){d=Math.ceil(e/s),f=Math.ceil(n/i),h=Math.ceil(r/o);const p=(d-1)*s+a-e,m=(f-1)*i+l-n,y=(h-1)*o+c-r,x=Math.floor(p/2),v=p-x,b=Math.floor(m/2),w=m-b,C=Math.floor(y/2),B=y-C;A={top:b,bottom:w,left:C,right:B,front:x,back:v,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:A,outDepth:d,outHeight:f,outWidth:h}}function Xy(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Wu(t){const[e,n,r]=Ky(t);return e===1&&n===1&&r===1}function ss(t,e){return Wu(t)||Wu(e)}function zd(t){return Ky(t).every(e=>e>0)}function Ec(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Hs(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")L(np(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{L(np(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hwe(t,e){const r={x:Q(t,"x","reshape","string_or_numeric")},s={shape:e};return re.runKernel(aB,r,s)}const oe=ee({reshape_:hwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pwe(t,e,n,r,s){const i=Q(t,"x","avgPool","float32"),o=1;L(ss(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=i,l=!1;i.rank===3&&(l=!0,a=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),L(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Hs("avgPool",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let A=re.runKernel(wS,c,u);return A=Pe(A,i.dtype),l?oe(A,[A.shape[1],A.shape[2],A.shape[3]]):A}const wB=ee({avgPool_:pwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mwe(t,e,n,r,s,i="NDHWC"){const o=Q(t,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),L(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),L(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),L(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Hs("avgPool3d",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i};let A=re.runKernel(CS,c,u);return A=Pe(A,a.dtype),l?oe(A,[A.shape[1],A.shape[2],A.shape[3],A.shape[4]]):A}const uX=ee({avgPool3d_:mwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gwe(t,e=0){L(t.length>=1,()=>"Pass at least one tensor to concat");const n=a2(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return rc(n[0]);const r=n,s={axis:e};return re.runKernel(IS,r,s)}const qn=ee({concat_:gwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ywe(t,e,n=!1,r=!1){let s=Q(t,"a","matMul"),i=Q(e,"b","matMul");[s,i]=Jn(s,i);const o={a:s,b:i},a={transposeA:n,transposeB:r};return re.runKernel(SS,o,a)}const $t=ee({matMul_:ywe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xwe(t){const n={x:Q(t,"x","sigmoid","float32")};return re.runKernel(Xx,n)}const xa=ee({sigmoid_:xwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vwe(t,e,n){const r=Q(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},i={begin:e,size:n};return re.runKernel(dB,s,i)}const ct=ee({slice_:vwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bwe(t){const n={x:Q(t,"x","tanh","float32")};return re.runKernel(tv,n)}const Vd=ee({tanh_:bwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wwe(t,e,n,r,s,i){const o=Q(t,"forgetBias","basicLSTMCell"),a=Q(e,"lstmKernel","basicLSTMCell"),l=Q(n,"lstmBias","basicLSTMCell"),c=Q(r,"data","basicLSTMCell"),u=Q(s,"c","basicLSTMCell"),A=Q(i,"h","basicLSTMCell"),d=qn([c,A],1),f=$t(d,a),h=Ee(f,l),p=h.shape[0],m=h.shape[1]/4,y=[p,m],x=ct(h,[0,0],y),v=ct(h,[0,m],y),b=ct(h,[0,m*2],y),w=ct(h,[0,m*3],y),C=Ee(ne(xa(x),Vd(v)),ne(u,xa(Ee(o,b)))),B=ne(Vd(C),xa(w));return[C,B]}const Cwe=ee({basicLSTMCell_:wwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Swe(t,e,n){const r=Q(t,"x","batchToSpaceND"),s=e.reduce((a,l)=>a*l);L(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),L(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),L(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const i={x:r},o={blockShape:e,crops:n};return re.runKernel(BS,i,o)}const CB=ee({batchToSpaceND_:Swe});function Bwe(t){let e;return t.rank===0||t.rank===1?e=oe(t,[1,1,1,t.size]):t.rank===2?e=oe(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nwe(t,e,n,r,s,i){i==null&&(i=.001);const o=Q(t,"x","batchNorm"),a=Q(e,"mean","batchNorm"),l=Q(n,"variance","batchNorm");let c;s!=null&&(c=Q(s,"scale","batchNorm"));let u;r!=null&&(u=Q(r,"offset","batchNorm")),L(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),L(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),L(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:Bwe(o),scale:c,offset:u,mean:a,variance:l},f={varianceEpsilon:i},h=re.runKernel(PS,d,f);return oe(h,o.shape)}const ov=ee({batchNorm_:Nwe});function Ewe(t,e,n,r,s,i){const o=Q(t,"x","batchNorm"),a=Q(e,"mean","batchNorm"),l=Q(n,"variance","batchNorm");let c;s!=null&&(c=Q(s,"scale","batchNorm"));let u;return r!=null&&(u=Q(r,"offset","batchNorm")),L(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),L(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),L(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&L(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&L(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),ov(o,a,l,u,c,i)}const AX=ee({batchNorm2d_:Ewe});function Iwe(t,e,n,r,s,i){const o=Q(t,"x","batchNorm"),a=Q(e,"mean","batchNorm"),l=Q(n,"variance","batchNorm");let c;s!=null&&(c=Q(s,"scale","batchNorm"));let u;return r!=null&&(u=Q(r,"offset","batchNorm")),L(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),L(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),L(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&L(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&L(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),ov(o,a,l,u,c,i)}const dX=ee({batchNorm3d_:Iwe});function kwe(t,e,n,r,s,i){const o=Q(t,"x","batchNorm"),a=Q(e,"mean","batchNorm"),l=Q(n,"variance","batchNorm");let c;s!=null&&(c=Q(s,"scale","batchNorm"));let u;return r!=null&&(u=Q(r,"offset","batchNorm")),L(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),L(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),L(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&L(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&L(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),ov(o,a,l,u,c,i)}const fX=ee({batchNorm4d_:kwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Twe(t,e,n){const r=Q(t,"x","bincount"),s=Q(e,"weights","bincount");L(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),L(n>=0,()=>`size must be non-negative, but got ${n}.`),L(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const i={x:r,weights:s},o={size:n};return re.runKernel(T_,i,o)}const hX=ee({bincount_:Twe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fwe(t,e){const n=Q(t,"x","bitwiseAnd"),r=Q(e,"y","bitwiseAnd");if(!_t(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const s={a:n,b:r};return re.runKernel(NS,s)}const $we=ee({bitwiseAnd_:Fwe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _we(t,e){const n=Q(t,"s0","broadcastArgs","int32"),r=Q(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:n,s1:r};return re.runKernel(F_,s)}const Owe=ee({broadcastArgs_:_we});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dwe(t,e){let n=Q(t,"broadcastTo","x");const r=n.shape;if(oo(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=oe(n,c)}const s=n.shape,i=Array.from(e);for(let c=e.length-1;c>=0;c--)if(s[c]===e[c])i[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return rc(n);const a={x:n},l={reps:i};return re.runKernel(nv,a,l)}const Th=ee({broadcastTo_:Dwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rwe(t){const n={x:Q(t,"x","ceil","float32")};return re.runKernel(gx,n)}const pX=ee({ceil_:Rwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tm(t,e,n){oo(t),n=n||Jp(e);const r={shape:t,value:e,dtype:n};return re.runKernel(W_,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pwe(t,e,n){const r=Q(t,"x","clipByValue");if(L(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return tm(r.shape,e,r.dtype);const s={x:r},i={clipValueMin:e,clipValueMax:n};return re.runKernel(yx,s,i)}const ii=ee({clipByValue_:Pwe});function Uwe(t){return qn(t,0)}const mX=ee({concat1d_:Uwe});function Lwe(t,e){return qn(t,e)}const gX=ee({concat2d_:Lwe});function jwe(t,e){return qn(t,e)}const yX=ee({concat3d_:jwe});function Mwe(t,e){return qn(t,e)}const xX=ee({concat4d_:Mwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qwe(t,e,n,r,s="NHWC",i=[1,1],o){const a=Q(t,"x","conv2d","float32"),l=Q(e,"filter","conv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),L(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),L(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Hs("conv2d",r,o);const A=s==="NHWC"?c.shape[3]:c.shape[1];L(A===l.shape[2],()=>`Error in conv2d: depth of input (${A}) must match input depth for filter ${l.shape[2]}.`),L(ss(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),L(zd(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),L(zd(n),()=>"Error in conv2D: Strides should be larger than 0.");const d={x:c,filter:l},f={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},h=re.runKernel(kS,d,f);return u?oe(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const Gu=ee({conv2d_:Qwe});function Hwe(t,e,n,r,s="NWC",i=1,o){const a=Q(t,"x","conv1d"),l=Q(e,"filter","conv1d");let c=a,u=!1;a.rank===2&&(u=!0,c=oe(a,[1,a.shape[0],a.shape[1]])),L(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),L(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Hs("conv1d",r,o),L(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),L(ss(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),L(zd(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),L(zd(n),()=>"Error in conv1D: Stride should be larger than 0."),L(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const A=oe(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=oe(c,[c.shape[0],1,c.shape[1],c.shape[2]]),m=Gu(d,A,[1,n],r,"NHWC",[1,i],o);return u?oe(m,[m.shape[2],m.shape[3]]):oe(m,[m.shape[0],m.shape[2],m.shape[3]])}const PO=ee({conv1d_:Hwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zwe(t,e,n,r,s,i="NHWC",o){L(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),L(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),L(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),L(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=i==="NHWC"?a[3]:a[1],A=i==="NHWC"?l.shape[3]:l.shape[1];L(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),L(A===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${A}) must match output depth for filter ${n.shape[3]}.`),Hs("conv2dDerInput",s,o);const d={dy:l,filter:n},f={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,inputShape:a},h=re.runKernel(TS,d,f);return c?oe(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const UO=ee({conv2DBackpropInput_:zwe});function Vwe(t,e,n,r,s,i){const o=Q(t,"x","conv2dTranspose"),a=Q(e,"filter","conv2dTranspose");return UO(n,o,a,r,s,"NHWC",i)}const LO=ee({conv2dTranspose_:Vwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wwe(t,e,n,r,s="NDHWC",i=[1,1,1]){const o=Q(t,"x","conv3d"),a=Q(e,"filter","conv3d");let l=o,c=!1;o.rank===4&&(c=!0,l=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),L(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),L(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),L(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),L(ss(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),L(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),L(zd(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),L(zd(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:a},A={strides:n,pad:r,dataFormat:s,dilations:i},d=re.runKernel(FS,u,A);return c?oe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const vX=ee({conv3d_:Wwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gwe(t,e,n,r,s){L(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,o=e,a=!1;e.rank===4&&(a=!0,o=oe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],c=o.shape[4];L(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),L(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),L(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),L(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),L(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:o,filter:n},A={pad:s,strides:r,inputShape:i},d=re.runKernel(D_,u,A);return a?oe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const bX=ee({conv3DBackpropInput_:Gwe});function Kwe(t,e,n,r,s){const i=Q(t,"x","conv3dTranspose"),o=Q(e,"filter","conv3dTranspose");return bX(n,i,o,r,s)}const wX=ee({conv3dTranspose_:Kwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xwe(t){const n={x:Q(t,"x","cos","float32")};return re.runKernel(xx,n)}const SB=ee({cos_:Xwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qwe(t){const n={x:Q(t,"x","cosh","float32")};return re.runKernel(vx,n)}const jO=ee({cosh_:qwe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ywe(t,e=0,n=!1,r=!1){const i={x:Q(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return re.runKernel(R_,i,o)}const c2=ee({cumprod_:Ywe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jwe(t,e=0,n=!1,r=!1){const i={x:Q(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return re.runKernel($S,i,o)}const MO=ee({cumsum_:Jwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zwe(t,e,n,r=!1){const s=Q(t,"x","denseBincount"),i=Q(e,"weights","denseBincount");L(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),L(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),L(n>=0,()=>`size must be non-negative, but got ${n}.`),L(i.size===s.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${i.shape}.`);const o={x:s,weights:i},a={size:n,binaryOutput:r};return re.runKernel(U_,o,a)}const Lk=ee({denseBincount_:Zwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e2e(t,e,n="NHWC"){const r=Q(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];L(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),L(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),L(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),L(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return re.runKernel(L_,a,l)}const CX=ee({depthToSpace_:e2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t2e(t,e,n,r,s="NHWC",i=[1,1],o){const a=Q(t,"x","depthwiseConv2d","float32"),l=Q(e,"filter","depthwiseConv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),L(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),L(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const A=s==="NHWC"?c.shape[3]:c.shape[1];L(A===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${A}) must match the inChannels dimension in filter ${l.shape[2]}.`),Hs("depthwiseConv2d",r,o);const d={x:c,filter:l},f={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},h=re.runKernel(_S,d,f);return u?oe(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const av=ee({depthwiseConv2d_:t2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n2e(t){const n={x:Q(t,"x","diag")};return re.runKernel(Q_,n)}const r2e=ee({diag_:n2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s2e(t,e,n,r,s=[1,1],i="NHWC"){const o=Q(t,"x","dilation2d"),a=Q(e,"filter","dilation2d");L(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),L(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),L(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=o,c=!1;o.rank===3&&(l=oe(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),L(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const u={x:l,filter:a},A={strides:n,pad:r,dilations:s},d=re.runKernel(OS,u,A);return c?oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const SX=ee({dilation2d_:s2e});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function op(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const i=n-1-s,o=t[i]||1;(e[e.length-1-s]||1)>1&&o===1&&r.unshift(i)}return r}function Fr(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],i=e.length-r-1,o=e[i];(s==null||s===1&&o>1)&&n.unshift(i)}return n}function vt(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let i=t[t.length-s-1];i==null&&(i=1);let o=e[e.length-s-1];if(o==null&&(o=1),i===1)r[n-s-1]=o;else if(o===1)r[n-s-1]=i;else if(i!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-s-1]=i}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i2e(t,e){let n=Q(t,"a","equal","string_or_numeric"),r=Q(e,"b","equal","string_or_numeric");[n,r]=Jn(n,r),vt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(DS,s)}const Ba=ee({equal_:i2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o2e(t,e,n){const r=Q(e,"a","where"),s=Q(n,"b","where"),i=Q(t,"condition","where","bool"),o=vt(vt(i.shape,r.shape),s.shape),a=Th(i,o),l=Th(r,o),c=Th(s,o),u={condition:a,t:l,e:c};return re.runKernel(AB,u)}const ys=ee({where_:o2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a2e(t){const n={x:Q(t,"x","zerosLike")};return re.runKernel(vB,n)}const Lt=ee({zerosLike_:a2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l2e(t,e){let n=Q(t,"a","div"),r=Q(e,"b","div");[n,r]=Jn(n,r);const s=ze(n,r),i=Lt(s),o=Ba(r,i);return ys(o,i,s)}const BX=ee({divNoNan_:l2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c2e(t,e){const n=Q(t,"t1","dot"),r=Q(e,"t2","dot");L((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(L(s===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${i}.`),n.rank===1&&r.rank===1){const o=oe(n,[1,-1]),a=oe(r,[-1,1]),l=$t(o,a);return oe(l,[])}else if(n.rank===1&&r.rank===2){const o=oe(n,[1,-1]),a=oe(r,[r.shape[0],r.shape[1]]),l=$t(o,a);return oe(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=oe(r,[-1,1]),a=$t(n,o);return oe(a,[a.size])}else{const o=oe(r,[r.shape[0],r.shape[1]]);return $t(n,o)}}const NX=ee({dot_:c2e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u2e(t,...e){const n=e.map((s,i)=>Q(s,`tensors${i}`,"einsum")),r={equation:t};return re.runKernel(H_,n,r)}const qf=ee({einsum_:u2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2e(t){const n={x:Q(t,"x","elu","float32")};return re.runKernel(wx,n)}const lv=ee({elu_:A2e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d2e(t,e){const n=Q(t,"x","ensureShape","string_or_numeric");if(!C1e(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const f2e=ee({ensureShape_:d2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h2e(t){let e=Q(t,"x","erf");L(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Pe(e,"float32"));const n={x:e};return re.runKernel(Cx,n)}const QO=ee({erf_:h2e});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HO(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function EX(t,e,n){const r=t.length+e.length,s=[];let i=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?s.push(t[i++]):s.push(e[o++]);return s}function Vr(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const s=e.map(i=>t[i]);return[n,s]}function or(t,e){const n=e.map(r=>1);return EX(t,n,e)}function is(t,e,n){L(HO(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Hn(t,e){if(HO(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function uA(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function ar(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p2e(t,e=null,n=!1){const s={x:Q(t,"x","max")},i={reductionIndices:e,keepDims:n};return re.runKernel(GS,s,i)}const Po=ee({max_:p2e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m2e(t,e=null,n=!1){const s={x:Q(t,"x","min")},i={axis:e,keepDims:n};return re.runKernel(YS,s,i)}const qy=ee({min_:m2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g2e(t,e){let n=Q(t,"base","pow"),r=Q(e,"exp","pow");[n,r]=Jn(n,r);const s={a:n,b:r};return re.runKernel(Lx,s)}const fc=ee({pow_:g2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function at(t,e){if((Mo(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Mo(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return lA(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y2e(t){const n={x:Q(t,"x","sqrt","float32")};return re.runKernel(Yx,n)}const rs=ee({sqrt_:y2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x2e(t){const e=Q(t,"x","square"),n={};return re.runKernel("Square",{x:e},n)}const fn=ee({square_:x2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2e(t,e=null,n=!1){let r=Q(t,"x","sum");r.dtype==="bool"&&(r=Pe(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return re.runKernel(fB,s,i)}const Je=ee({sum_:v2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2e(t,e="euclidean",n=null,r=!1){t=Q(t,"x","norm");const s=IX(t,e,n);let i=s.shape;if(r){const o=kt(n,t.shape);i=or(s.shape,o)}return oe(s,i)}function IX(t,e,n=null){if(t.rank===0)return vr(t);if(t.rank!==1&&n===null)return IX(oe(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Je(vr(t),n);if(e===1/0)return Po(vr(t),n);if(e===-1/0)return qy(vr(t),n);if(e==="euclidean"||e===2)return rs(Je(fc(vr(t),at(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Po(Je(vr(t),n[0]),n[1]-1);if(e===1/0)return Po(Je(vr(t),n[1]),n[0]);if(e===-1/0)return qy(Je(vr(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return rs(Je(fn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const cv=ee({norm_:b2e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w2e(t,e=null,n=!1){return cv(t,"euclidean",e,n)}const kX=ee({euclideanNorm_:w2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2e(t){const n={x:Q(t,"x","exp")};return re.runKernel(Sx,n)}const js=ee({exp_:C2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2e(t,e=0){const n=Q(t,"x","expandDims","string_or_numeric");L(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return re.runKernel(RS,r,s)}const wr=ee({expandDims_:S2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B2e(t){const n={x:Q(t,"x","expm1")};return re.runKernel(Bx,n)}const TX=ee({expm1_:B2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N2e(t,e){const n=Q(t,"x","tile","string_or_numeric");L(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return re.runKernel(nv,r,s)}const Fo=ee({tile_:N2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E2e(t,e,n,r="float32"){e==null&&(e=t);const s=St([t,e],r),i=t<=e?t:e;for(let a=0;a<i;++a)s.set(1,a,a);const o=oe(s.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return Fo(wr(o,0),[n[0],1,1]);if(n.length===2)return Fo(wr(wr(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return Fo(wr(wr(wr(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const zO=ee({eye_:E2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I2e(t){const n={x:Q(t,"x","floor","float32")};return re.runKernel(Nx,n)}const uv=ee({floor_:I2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2e(t,e,n=0,r=0){const s=Q(t,"x","gather"),i=Q(e,"indices","gather","int32"),o={x:s,indices:i},a={axis:n,batchDims:r};return re.runKernel(US,o,a)}const Av=ee({gather_:k2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T2e(t,e){let n=Q(t,"a","greater","string_or_numeric"),r=Q(e,"b","greater","string_or_numeric");[n,r]=Jn(n,r),vt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(LS,s)}const Li=ee({greater_:T2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F2e(t,e){let n=Q(t,"a","greaterEqual","string_or_numeric"),r=Q(e,"b","greaterEqual","string_or_numeric");[n,r]=Jn(n,r),vt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(Ix,s)}const AA=ee({greaterEqual_:F2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $2e(t){const n={input:Q(t,"input","imag")};return re.runKernel(q_,n)}const BB=ee({imag_:$2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _2e(t){const n={x:Q(t,"x","isFinite")};return re.runKernel(Tx,n)}const FX=ee({isFinite_:_2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O2e(t){const n={x:Q(t,"x","isInf")};return re.runKernel(Fx,n)}const $X=ee({isInf_:O2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2e(t){const n={x:Q(t,"x","isNaN")};return re.runKernel($x,n)}const _X=ee({isNaN_:D2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R2e(t,e=.2){const r={x:Q(t,"x","leakyRelu")},s={alpha:e};return re.runKernel(jS,r,s)}const NB=ee({leakyRelu_:R2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P2e(t,e){let n=Q(t,"a","less","string_or_numeric"),r=Q(e,"b","less","string_or_numeric");[n,r]=Jn(n,r),vt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(MS,s)}const Yy=ee({less_:P2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U2e(t,e){let n=Q(t,"a","lessEqual","string_or_numeric"),r=Q(e,"b","lessEqual","string_or_numeric");[n,r]=Jn(n,r),vt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(QS,s)}const cf=ee({lessEqual_:U2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L2e(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return re.runKernel(Y_,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j2e(t,e=5,n=1,r=1,s=.5){const i=Q(t,"x","localResponseNormalization");L(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),L(np(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=i,a=!1;i.rank===3&&(a=!0,o=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:o},c={depthRadius:e,bias:n,alpha:r,beta:s},u=re.runKernel(WS,l,c);return a?oe(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const OX=ee({localResponseNormalization_:j2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M2e(t){const n={x:Q(t,"x","log","float32")};return re.runKernel(_x,n)}const no=ee({log_:M2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q2e(t){const n={x:Q(t,"x","log1p")};return re.runKernel(Ox,n)}const EB=ee({log1p_:Q2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H2e(t,e){L(vk(t),()=>"The f passed in variableGrads(f) must be a function"),L(e==null||Array.isArray(e)&&e.every(c=>c instanceof o2),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in re.registeredVariables)e.push(re.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,s=e.length;e=e.filter(c=>c.trainable),L(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const i=!0,{value:o,grads:a}=re.gradients(t,e,null,i);L(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),L(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:o,grads:l}}function hc(t){return re.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z2e(t){const n={x:Q(t,"x","neg")};return re.runKernel(ZS,n)}const In=ee({neg_:z2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V2e(t){const n={x:Q(t,"x","softplus")};return re.runKernel(qx,n)}const nm=ee({softplus_:V2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W2e(t){const e=Q(t,"x","logSigmoid");return hc(r=>({value:In(nm(In(r))),gradFunc:o=>ne(o,xa(In(r)))}))(e)}const DX=ee({logSigmoid_:W2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G2e(t,e){let n=Q(t,"a","sub"),r=Q(e,"b","sub");[n,r]=Jn(n,r);const s={a:n,b:r};return re.runKernel(Zx,s)}const We=ee({sub_:G2e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K2e(t,e=-1){const n=Q(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return hc((s,i)=>{const a=Po(s,e,!0),l=We(s,a),c=We(Pe(l,"float32"),no(Je(js(l),e,!0)));return i([c]),{value:c,gradFunc:(A,d)=>{const[f]=d,h=!0,p=js(f);return We(A,ne(Je(A,e,h),p))}}})(n)}const VO=ee({logSoftmax_:K2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X2e(t,e=null,n=!1){const r=Q(t,"x","logSumExp"),s=kt(e,r.shape),i=Po(r,s,!0),o=We(r,i),a=js(o),l=Je(a,s),c=no(l),u=Ee(oe(i,c.shape),c);if(n){const A=or(u.shape,s);return oe(u,A)}return u}const IB=ee({logSumExp_:X2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q2e(t,e){const n=Q(t,"a","logicalAnd","bool"),r=Q(e,"b","logicalAnd","bool");vt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(HS,s)}const hl=ee({logicalAnd_:q2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y2e(t){const n={x:Q(t,"x","logicalNot","bool")};return re.runKernel(zS,n)}const kB=ee({logicalNot_:Y2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J2e(t,e){const n=Q(t,"a","logicalOr","bool"),r=Q(e,"b","logicalOr","bool");vt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(VS,s)}const WO=ee({logicalOr_:J2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z2e(t,e){const n=Q(t,"a","logicalXor","bool"),r=Q(e,"b","logicalXor","bool");return vt(n.shape,r.shape),hl(WO(t,e),kB(hl(t,e)))}const RX=ee({logicalXor_:Z2e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ib=2147483648;function eCe(t,e,n="left"){const r=Q(t,"sortedSequence","searchSorted"),s=Q(e,"values","searchSorted"),i=r.shape[r.shape.length-1],o=s.shape[s.shape.length-1],a=oe(r,[-1,i]),l=oe(s,[-1,o]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(ge(l.shape)>=ib)throw new Error(`values tensor size must less than ${ib}`);if(a.shape[1]>=ib)throw new Error(`trailing dim_size must less than ${ib} for int32 output type, was ${a.shape[1]}`);const c={sortedSequence:a,values:l},u={side:n};return re.runKernel(pO,c,u)}const GO=ee({searchSorted_:eCe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tCe(t,e){return GO(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nCe(t,e,n,r,s){const i=Q(t,"x","maxPool"),o=1;let a=i,l=!1;i.rank===3&&(l=!0,a=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),L(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),L(ss(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Hs("maxPool",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s},A=re.runKernel(KS,c,u);return l?oe(A,[A.shape[1],A.shape[2],A.shape[3]]):A}const TB=ee({maxPool_:nCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rCe(t,e=[1,1,1],n,r,s,i="NDHWC"){const o=Q(t,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),L(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),L(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Hs("maxPool3d",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i},A=re.runKernel(XS,c,u);return l?oe(A,[A.shape[1],A.shape[2],A.shape[3],A.shape[4]]):A}const PX=ee({maxPool3d_:rCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sCe(t,e,n,r,s=!1){const o={x:Q(t,"x","maxPoolWithArgmax")},a={filterSize:e,strides:n,pad:r,includeBatchInIndex:s},l=re.runKernel(tO,o,a);return{result:l[0],indexes:l[1]}}const iCe=ee({maxPoolWithArgmax_:sCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oCe(t,e){let n=Q(t,"a","maximum"),r=Q(e,"b","maximum");[n,r]=Jn(n,r),n.dtype==="bool"&&(n=Pe(n,"int32"),r=Pe(r,"int32")),vt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(Dx,s)}const Ic=ee({maximum_:oCe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aCe(t,e=null,n=!1){const s={x:Q(t,"x","mean")},i={axis:e,keepDims:n};return re.runKernel(qS,s,i)}const Kn=ee({mean_:aCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sr(t,e="float32"){if(oo(t),e==="complex64"){const r=Sr(t,"float32"),s=Sr(t,"float32");return zu(r,s)}const n=vs(ge(t),e);return re.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bi(t,e="float32"){if(oo(t),e==="complex64"){const r=Bi(t,"float32"),s=Sr(t,"float32");return zu(r,s)}const n=S_(ge(t),e);return re.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lCe(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=Q(t,"x","meshgrid",t instanceof qt?t.dtype:"float32");if(e===void 0)return[r];let s=Q(e,"y","meshgrid",e instanceof qt?e.dtype:"float32");const i=ge(r.shape),o=ge(s.shape);return n==="xy"?(r=oe(r,[1,-1]),s=oe(s,[-1,1]),[$t(Bi([o,1],r.dtype),r),$t(s,Bi([1,i],s.dtype))]):(r=oe(r,[-1,1]),s=oe(s,[1,-1]),[$t(r,Bi([1,o],r.dtype)),$t(Bi([i,1],s.dtype),s)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cCe(t,e){let n=Q(t,"a","minimum"),r=Q(e,"b","minimum");[n,r]=Jn(n,r),n.dtype==="bool"&&(n=Pe(n,"int32"),r=Pe(r,"int32")),vt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(Rx,s)}const Wd=ee({minimum_:cCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uCe(t,e,n){L(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=Q(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");L(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)L(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),L(e[a][0]>=0&&e[a][0]<=r.shape[a]-s&&e[a][1]>=0&&e[a][1]<=r.shape[a]-s,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-s} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},o={x:r};return re.runKernel(JS,o,i)}const UX=ee({mirrorPad_:uCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ACe(t,e){let n=Q(t,"a","mod"),r=Q(e,"b","mod");[n,r]=Jn(n,r);const s={a:n,b:r};return re.runKernel(Px,s)}const LX=ee({mod_:ACe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dCe(t,e=null,n=!1){t=Q(t,"x","moments");const r=kt(e,t.shape),s=Kn(t,r,n);let i=s.shape;n||(i=or(s.shape,r));const o=fn(We(Pe(t,"float32"),oe(s,i))),a=Kn(o,r,n);return{mean:s,variance:a}}const FB=ee({moments_:dCe});function fCe(t,e,n,r){const s=Q(e,"data","multiRNNCell"),i=a2(n,"c","multiRNNCell"),o=a2(r,"h","multiRNNCell");let a=s;const l=[];for(let A=0;A<t.length;A++){const d=t[A](a,i[A],o[A]);l.push(d[0]),l.push(d[1]),a=d[1]}const c=[],u=[];for(let A=0;A<l.length;A+=2)c.push(l[A]),u.push(l[A+1]);return[c,u]}const hCe=ee({multiRNNCell_:fCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pCe(t,e,n,r=!1){const s=Q(t,"logits","multinomial"),i=s.size,o=s.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const l={logits:o===1?oe(s,[1,-1]):s},c={numSamples:e,seed:n,normalized:r},u=re.runKernel(nO,l,c);return o===1?oe(u,[u.size]):u}const mCe=ee({multinomial_:pCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gCe(t,e){let n=Q(t,"a","notEqual","string_or_numeric"),r=Q(e,"b","notEqual","string_or_numeric");[n,r]=Jn(n,r),vt(n.shape,r.shape);const s={a:n,b:r};return re.runKernel(eB,s)}const ap=ee({notEqual_:gCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yCe(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:Q(t,"indices","oneHot","int32")},a={dtype:s,depth:e,onValue:n,offValue:r};return re.runKernel(nB,o,a)}const KO=ee({oneHot_:yCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xCe(t){const n={x:Q(t,"x","onesLike")};return re.runKernel(tB,n)}const ro=ee({onesLike_:xCe});function vCe(t,e){const n=Q(t,"v1","outerProduct"),r=Q(e,"v2","outerProduct");L(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const s=oe(n,[-1,1]),i=oe(r,[1,-1]);return $t(s,i)}const bCe=ee({outerProduct_:vCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wCe(t,e,n=0){const r=Q(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},i={x:r};return re.runKernel(sB,i,s)}const dA=ee({pad_:wCe});function CCe(t,e,n=0){return L(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),dA(t,[e],n)}const SCe=ee({pad1d_:CCe});function BCe(t,e,n=0){return L(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),dA(t,e,n)}const NCe=ee({pad2d_:BCe});function ECe(t,e,n=0){return L(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),dA(t,e,n)}const ICe=ee({pad3d_:ECe});function kCe(t,e,n=0){return L(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),dA(t,e,n)}const TCe=ee({pad4d_:kCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FCe(t,e,n){const r=Q(t,"x","spaceToBatchND");L(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),L(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),L(r.shape.reduce((o,a,l)=>l>0&&l<=e.length?o&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},i={blockShape:e,paddings:n};return re.runKernel(hB,s,i)}const $B=ee({spaceToBatchND_:FCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ce(t,e,n,r,s,i,o){s==null&&(s=[1,1]),i==null&&(i=1),r===0&&(r="valid");const a=Q(t,"x","maxPool");let l=a,c=!1;a.rank===3&&(c=!0,l=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),L(ss(i,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${s}'`);const u=Go(l.shape,e,i,s,r),A=[u.dilationHeight,u.dilationWidth];let d;r==="same"?d=OCe([u.filterHeight,u.filterWidth],A):d=[[0,0],[0,0]];const f=A[0]===1&&A[1]===1,[h,p]=_Ce([u.inHeight,u.inWidth],A,d),m=f?r:"valid",y=f?l:$B(l,A,h),v=(n==="avg"?()=>wB(y,e,i,m,o):()=>TB(y,e,i,m,o))(),b=f?v:CB(v,A,p);return c?oe(b,[b.shape[1],b.shape[2],b.shape[3]]):b}function _Ce(t,e,n){const r=n.map(u=>u[0]),s=n.map(u=>u[1]),i=t.concat(r,s),o=e.map((u,A)=>(u-i[A]%u)%u),a=s.map((u,A)=>u+o[A]),l=e.map((u,A)=>[r[A],a[A]]),c=e.map((u,A)=>[0,o[A]]);return[l,c]}function OCe(t,e){const r=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),s=r.map(o=>Math.floor(o/2)),i=r.map((o,a)=>o-s[a]);return r.map((o,a)=>[s[a],i[a]])}const jX=ee({pool_:$Ce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DCe(t,e){const n=Q(t,"x","prelu"),r=Q(e,"alpha","prelu"),s={x:n,alpha:r};return re.runKernel(iB,s)}const _B=ee({prelu_:DCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RCe(t,e=null,n=!1){let r=Q(t,"x","prod");r.dtype==="bool"&&(r=Pe(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return re.runKernel(oB,s,i)}const MX=ee({prod_:RCe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PCe(t,e,n,r){const s=t.map((u,A)=>Q(u,`tensors${A}`,"raggedGather","int32")),i=Q(e,"paramsDenseValues","raggedGather"),o=Q(n,"indices","raggedGather","int32"),a={paramsNestedSplits:s,paramsDenseValues:i,indices:o},l={outputRaggedRank:r},c=re.runKernel(oO,a,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}const UCe=ee({raggedGather_:PCe});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LCe(t,e,n){const r=Q(t,"starts","raggedRange"),s=Q(e,"limits","raggedRange",r.dtype),i=Q(n,"deltas","raggedRange",r.dtype),o={starts:r,limits:s,deltas:i},a=re.runKernel(aO,o);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}const jCe=ee({raggedRange_:LCe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MCe(t,e,n,r,s){const i=Q(t,"shape","raggedTensorToTensor","int32"),o=Q(e,"values","raggedTensorToTensor"),a=Q(n,"defaultValue","raggedTensorToTensor",o.dtype),l=r.map((A,d)=>Q(A,`tensors${d}`,"raggedTensorToTensor","int32")),c={shape:i,values:o,defaultValue:a,rowPartitionTensors:l},u={rowPartitionTypes:s};return re.runKernel(lO,c,u)}const QCe=ee({raggedTensorToTensor_:MCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HCe(t,e,n){oo(t);const r=ge(t);let s=null;if(n==null||n==="float32")s=new Float32Array(r);else if(n==="int32")s=new Int32Array(r);else if(n==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)s[i]=e();return re.makeTensor(s,t,n)}const zCe=ee({rand_:HCe});var XO={exports:{}};XO.exports;(function(t){(function(e,n,r){function s(l){var c=this,u=a();c.next=function(){var A=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=A-(c.c=A|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function i(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new s(l),A=c&&c.state,d=u.next;return d.int32=function(){return u.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,A&&(typeof A=="object"&&i(A,u),d.state=function(){return i(u,{})}),d}function a(){var l=4022871197,c=function(u){u=String(u);for(var A=0;A<u.length;A++){l+=u.charCodeAt(A);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=o:this.alea=o})(bi,t)})(XO);var VCe=XO.exports,qO={exports:{}};qO.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var A=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^A^A>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var c=new s(a),u=l&&l.state,A=function(){return(c.next()>>>0)/4294967296};return A.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},A.int32=c.next,A.quick=A,u&&(typeof u=="object"&&i(u,c),A.state=function(){return i(c,{})}),A}n&&n.exports?n.exports=o:this.xor128=o})(bi,t)})(qO);var WCe=qO.exports,YO={exports:{}};YO.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var A=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(A^A<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var c=new s(a),u=l&&l.state,A=function(){return(c.next()>>>0)/4294967296};return A.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},A.int32=c.next,A.quick=A,u&&(typeof u=="object"&&i(u,c),A.state=function(){return i(c,{})}),A}n&&n.exports?n.exports=o:this.xorwow=o})(bi,t)})(YO);var GCe=YO.exports,JO={exports:{}};JO.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var u=l.x,A=l.i,d,f;return d=u[A],d^=d>>>7,f=d^d<<24,d=u[A+1&7],f^=d^d>>>10,d=u[A+3&7],f^=d^d>>>3,d=u[A+4&7],f^=d^d<<7,d=u[A+7&7],d=d^d<<13,f^=d^d<<9,u[A]=f,l.i=A+1&7,f};function c(u,A){var d,f=[];if(A===(A|0))f[0]=A;else for(A=""+A,d=0;d<A.length;++d)f[d&7]=f[d&7]<<15^A.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],u.x=f,u.i=0,d=256;d>0;--d)u.next()}c(l,a)}function i(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,A=function(){return(c.next()>>>0)/4294967296};return A.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},A.int32=c.next,A.quick=A,u&&(u.x&&i(u,c),A.state=function(){return i(c,{})}),A}n&&n.exports?n.exports=o:this.xorshift7=o})(bi,t)})(JO);var KCe=JO.exports,ZO={exports:{}};ZO.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var u=l.w,A=l.X,d=l.i,f,h;return l.w=u=u+1640531527|0,h=A[d+34&127],f=A[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,h=A[d]=h^f,l.i=d,h+(u^u>>>16)|0};function c(u,A){var d,f,h,p,m,y=[],x=128;for(A===(A|0)?(f=A,A=null):(A=A+"\0",f=0,x=Math.max(x,A.length)),h=0,p=-32;p<x;++p)A&&(f^=A.charCodeAt((p+32)%A.length)),p===0&&(m=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,p>=0&&(m=m+1640531527|0,d=y[p&127]^=f+m,h=d==0?h+1:0);for(h>=128&&(y[(A&&A.length||0)&127]=-1),h=127,p=4*128;p>0;--p)f=y[h+34&127],d=y[h=h+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,y[h]=f^d;u.w=m,u.X=y,u.i=h}c(l,a)}function i(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,A=function(){return(c.next()>>>0)/4294967296};return A.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},A.int32=c.next,A.quick=A,u&&(u.X&&i(u,c),A.state=function(){return i(c,{})}),A}n&&n.exports?n.exports=o:this.xor4096=o})(bi,t)})(ZO);var XCe=ZO.exports,eD={exports:{}};eD.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var A=l.b,d=l.c,f=l.d,h=l.a;return A=A<<25^A>>>7^d,d=d-f|0,f=f<<24^f>>>8^h,h=h-A|0,l.b=A=A<<20^A>>>12^d,l.c=d=d-f|0,l.d=f<<16^d>>>16^h,l.a=h-A|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function i(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var c=new s(a),u=l&&l.state,A=function(){return(c.next()>>>0)/4294967296};return A.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},A.int32=c.next,A.quick=A,u&&(typeof u=="object"&&i(u,c),A.state=function(){return i(c,{})}),A}n&&n.exports?n.exports=o:this.tychei=o})(bi,t)})(eD);var qCe=eD.exports,QX={exports:{}};const YCe={},JCe=Object.freeze(Object.defineProperty({__proto__:null,default:YCe},Symbol.toStringTag,{value:"Module"})),ZCe=bie(JCe);(function(t){(function(e,n,r){var s=256,i=6,o=52,a="random",l=r.pow(s,i),c=r.pow(2,o),u=c*2,A=s-1,d;function f(b,w,C){var B=[];w=w==!0?{entropy:!0}:w||{};var S=y(m(w.entropy?[b,v(n)]:b??x(),3),B),N=new h(B),k=function(){for(var O=N.g(i),U=l,P=0;O<c;)O=(O+P)*s,U*=s,P=N.g(1);for(;O>=u;)O/=2,U/=2,P>>>=1;return(O+P)/U};return k.int32=function(){return N.g(4)|0},k.quick=function(){return N.g(4)/4294967296},k.double=k,y(v(N.S),n),(w.pass||C||function(O,U,P,V){return V&&(V.S&&p(V,N),O.state=function(){return p(N,{})}),P?(r[a]=O,U):O})(k,S,"global"in w?w.global:this==r,w.state)}function h(b){var w,C=b.length,B=this,S=0,N=B.i=B.j=0,k=B.S=[];for(C||(b=[C++]);S<s;)k[S]=S++;for(S=0;S<s;S++)k[S]=k[N=A&N+b[S%C]+(w=k[S])],k[N]=w;(B.g=function(O){for(var U,P=0,V=B.i,W=B.j,j=B.S;O--;)U=j[V=A&V+1],P=P*s+j[A&(j[V]=j[W=A&W+U])+(j[W]=U)];return B.i=V,B.j=W,P})(s)}function p(b,w){return w.i=b.i,w.j=b.j,w.S=b.S.slice(),w}function m(b,w){var C=[],B=typeof b,S;if(w&&B=="object")for(S in b)try{C.push(m(b[S],w-1))}catch{}return C.length?C:B=="string"?b:b+"\0"}function y(b,w){for(var C=b+"",B,S=0;S<C.length;)w[A&S]=A&(B^=w[A&S]*19)+C.charCodeAt(S++);return v(w)}function x(){try{var b;return d&&(b=d.randomBytes)?b=b(s):(b=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(b)),v(b)}catch{var w=e.navigator,C=w&&w.plugins;return[+new Date,e,C,e.screen,v(n)]}}function v(b){return String.fromCharCode.apply(0,b)}if(y(r.random(),n),t.exports){t.exports=f;try{d=ZCe}catch{}}else r["seed"+a]=f})(typeof self<"u"?self:bi,[],Math)})(QX);var eSe=QX.exports,tSe=VCe,nSe=WCe,rSe=GCe,sSe=KCe,iSe=XCe,oSe=qCe,uf=eSe;uf.alea=tSe;uf.xor128=nSe;uf.xorwow=rSe;uf.xorshift7=sSe;uf.xor4096=iSe;uf.tychei=oSe;var OB=uf;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tD{constructor(e,n,r,s,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=i||Math.random();this.random=OB.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,i,o;do s=2*this.random()-1,i=2*this.random()-1,o=s*s+i*i;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*s*a,n=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class aSe{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const i=s||Math.random();this.randu=OB.alea(i.toString()),this.randn=new tD(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,s,i,o;for(;;){do s=this.randn.nextValue(),o=1+this.c*s;while(o<=0);if(o*=o*o,e=s*s,n=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),i=this.randu(),i<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class lSe{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=OB.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cSe(t,e,n=1,r="float32",s){if(oo(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new aSe(e,n,r,s),o=St(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const uSe=ee({randomGamma_:cSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ASe(t,e=0,n=1,r,s){if(oo(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new tD(e,n,r,!1,s),o=St(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const nD=ee({randomNormal_:ASe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dSe(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return nD(t,0,1,e,n)}const fSe=ee({randomStandardNormal_:dSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hSe(t,e=0,n=1,r="float32",s){oo(t);const i=St(t,r),o=new lSe(e,n,null,s);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const Af=ee({randomUniform_:hSe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pSe(t,e,n,r){return Af(t,e,n,"int32",r)}const mSe=ee({randomUniformInt_:pSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lp(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return re.runKernel(cO,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gSe(t){const n={input:Q(t,"input","real")};return re.runKernel(uO,n)}const Jy=ee({real_:gSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ySe(t){const n={x:Q(t,"x","reciprocal")};return re.runKernel(jx,n)}const HX=ee({reciprocal_:ySe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xSe(t){const n={x:Q(t,"x","relu")};return re.runKernel(Mx,n)}const vl=ee({relu_:xSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vSe(t){const n={x:Q(t,"x","relu6")};return re.runKernel(Qx,n)}const rD=ee({relu6_:vSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bSe(t,e){const r={x:Q(t,"x","reverse")},s={dims:e};return re.runKernel(uB,r,s)}const Qo=ee({reverse_:bSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wSe(t){const e=Q(t,"x","reverse");return L(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Qo(e,0)}const CSe=ee({reverse1d_:wSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SSe(t,e){const n=Q(t,"x","reverse");return L(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Qo(n,e)}const BSe=ee({reverse2d_:SSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NSe(t,e){const n=Q(t,"x","reverse");return L(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Qo(n,e)}const ESe=ee({reverse3d_:NSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ISe(t,e){const n=Q(t,"x","reverse");return L(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Qo(n,e)}const kSe=ee({reverse4d_:ISe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TSe(t){const n={x:Q(t,"x","round")};return re.runKernel(Hx,n)}const sD=ee({round_:TSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FSe(t){const n={x:Q(t,"x","rsqrt","float32")};return re.runKernel(zx,n)}const iD=ee({rsqrt_:FSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Se(t){const n={x:Q(t,"x","selu")};return re.runKernel(Vx,n)}const oD=ee({selu_:$Se});function _Se(t,e,n,r,s,i=[1,1],o="NHWC"){const a=Q(t,"x","separableConv2d"),l=Q(e,"depthwiseFilter","separableConv2d"),c=Q(n,"pointwiseFilter","separableConv2d");let u=a,A=!1;if(a.rank===3&&(A=!0,u=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");L(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),L(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),L(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),L(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),L(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const d=l.shape[2],f=l.shape[3];L(c.shape[2]===d*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*f}, but got ${c.shape[2]}.`);const h=av(u,l,r,s,o,i),m=Gu(h,c,1,"valid",o);return A?oe(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const aD=ee({separableConv2d_:_Se});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function OSe(t,e){const n=Q(t,"x","setdiff1d"),r=Q(e,"y","setdiff1d");L(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),L(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),L(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await n.data(),i=await r.data(),o=new Set(i);let a=0;for(let u=0;u<s.length;u++)o.has(s[u])||a++;const l=new Er([a],n.dtype),c=new Er([a],"int32");for(let u=0,A=0;u<s.length;u++)o.has(s[u])||(l.values[A]=s[u],c.values[A]=u,A++);return[l.toTensor(),c.toTensor()]}const DSe=OSe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RSe(t){const n={x:Q(t,"x","sign")};return re.runKernel(Kx,n)}const zX=ee({sign_:RSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PSe(t){const n={x:Q(t,"x","sin","float32")};return re.runKernel(Wx,n)}const lD=ee({sin_:PSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function USe(t){const n={x:Q(t,"x","sinh")};return re.runKernel(Gx,n)}const cD=ee({sinh_:USe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LSe(t,e,n){const r=Q(t,"x","slice1d");return L(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),ct(r,[e],[n])}const DB=ee({slice1d_:LSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jSe(t,e,n){const r=Q(t,"x","slice2d");return L(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),ct(r,e,n)}const uD=ee({slice2d_:jSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MSe(t,e,n){const r=Q(t,"x","slice3d");return L(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),ct(r,e,n)}const RB=ee({slice3d_:MSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QSe(t,e,n){const r=Q(t,"x","slice4d");return L(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),ct(r,e,n)}const Zy=ee({slice4d_:QSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HSe(t,e=-1){const n=Q(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return re.runKernel(mB,r,s)}const PB=ee({softmax_:HSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zSe(t){L(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return re.runKernel(V_,e)}const UB=ee({fft_:zSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VSe(t){L(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return re.runKernel(X_,e)}const e0=ee({ifft_:VSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WSe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=oe(t,[n,e]);r=e0(s)}else{const s=[n,2*(e-1)],i=oe(Jy(t),[n,e]),o=oe(BB(t),[n,e]),a=Qo(ct(i,[0,1],[n,e-2]),1),l=ne(Qo(ct(o,[0,1],[n,e-2]),1),at(-1)),c=qn([i,a],1),u=qn([o,l],1),A=oe(zu(c,u),[s[0],s[1]]);r=e0(A)}if(r=Jy(r),t.rank===3&&t.shape[0]!==0){const s=r,i=t.shape[0];r=oe(r,[i,r.shape[0]/i,r.shape[1]]),s.dispose()}return r}const AD=ee({irfft_:WSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GSe(t,e,n=0){const s={x:Q(t,"x","split")},i={numOrSizeSplits:e,axis:n};return re.runKernel(pB,s,i)}const $i=ee({split_:GSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KSe(t,e){L(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const h=t.shape.map(m=>0),p=t.shape.map(m=>m);p[t.shape.length-1]=e,s=ct(t,h,p),n=e}else if(e!=null&&e>n){const h=t.shape.map(p=>p);h[t.shape.length-1]=e-n,s=qn([t,Sr(h)],t.shape.length-1),n=e}else s=t;const i=Lt(s),o=oe(zu(s,i),[r,n]),a=UB(o),l=Math.floor(n/2)+1,c=Jy(a),u=BB(a),A=$i(c,[l,n-l],c.shape.length-1),d=$i(u,[l,n-l],u.shape.length-1),f=s.shape.slice();return f[s.shape.length-1]=l,oe(zu(A[0],d[0]),f)}const LB=ee({rfft_:KSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XSe(t,e){let n=Q(t,"a","squaredDifference"),r=Q(e,"b","squaredDifference");[n,r]=Jn(n,r),vt(n.shape,r.shape);const s={a:n,b:r},i={};return re.runKernel(Jx,s,i)}const dD=ee({squaredDifference_:XSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qSe(t,e){const n=Q(t,"x","squeeze","string_or_numeric");return oe(n,iA(n.shape,e).newShape)}const Wn=ee({squeeze_:qSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YSe(t,e=0){const n=a2(t,"tensors","stack","string_or_numeric");L(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&L(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return re.runKernel(rB,r,s)}const Oi=ee({stack_:YSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JSe(t,e=0){const r={x:Q(t,"x","step")},s={alpha:e};return re.runKernel(rv,r,s)}const rm=ee({step_:JSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZSe(t,e,n,r,s=0,i=0,o=0,a=0,l=0){const u={x:Q(t,"x","stridedSlice","string_or_numeric")},A={begin:e,end:n,strides:r,beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return re.runKernel(wO,u,A)}const VX=ee({stridedSlice_:ZSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eBe(t){const n={x:Q(t,"x","tan","float32")};return re.runKernel(ev,n)}const WX=ee({tan_:eBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mr(t,e){Yp(t);const n=aA(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return lA(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _u(t,e,n){if(Yp(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=aA(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return lA(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GX(t,e,n){if(Yp(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=aA(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return lA(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tBe(t,e,n){if(Yp(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=aA(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return lA(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nBe(t,e,n){if(Yp(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=aA(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return lA(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rBe(t,e,n){if(Yp(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=aA(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,lA(t,e,r,n)}function KX(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(i+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(i+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(i+` update.rank != ${s+t.length-r}`);for(let o=0;o<s;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-s;++o)if(n.shape[o+s]!==t[o+r])throw new Error(i+` updates.shape[${o+s}] (${n.shape[o+s]}) != shape[${o+s}] (${t[o+s]})`)}function fD(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}KX(n,e,t)}function df(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let A=s;A<i;++A)o*=n[A];const a=s<1?1:s,l=ge(e.shape)/a,c=[...ot(n.slice(0,s)),1],u=ge(n);return{sliceRank:s,numUpdates:l,sliceSize:o,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sBe(t,e,n){const r=Q(t,"tensor","tensorScatterupdate"),s=Q(e,"indices","tensorScatterupdate","int32"),i=Q(n,"updates","tensorScatterupdate");if(fD(i,s,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);const o={tensor:r,indices:s,updates:i},a={};return re.runKernel(hO,o,a)}const iBe=ee({tensorScatterUpdate_:sBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oBe(t,e=1,n=!0){const r=Q(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const i={x:r},o={k:e,sorted:n},[a,l]=re.runKernel(NO,i,o);return{values:a,indices:l}}const XX=ee({topk_:oBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aBe(t,e=0,n=1,r,s){if(oo(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new tD(e,n,r,!0,s),o=St(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const hD=ee({truncatedNormal_:aBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lBe(t,e=0){const n=Q(t,"x","unique","string_or_numeric");L(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[i,o]=re.runKernel(IO,r,s);return{values:i,indices:o}}const qX=ee({unique_:lBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cBe(t,e,n){const r=Q(t,"x","unsortedSegmentSum"),s=Q(e,"segmentIds","unsortedSegmentSum","int32");L(np(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:s},o={numSegments:n};return re.runKernel(xB,i,o)}const pD=ee({unsortedSegmentSum_:cBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uBe(t,e=0){const n=Q(t,"x","unstack","string_or_numeric");L(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return re.runKernel(yB,r,s)}const Ho=ee({unstack_:uBe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ABe(t,e){return GO(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YX(t,e=!0,n,r){return re.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mD(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=St(t,"int32"),s=St([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const o=r.indexToLoc(n[i]),a=i*t.length;s.values.set(o,a)}return s.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function dBe(t){const e=Q(t,"condition","whereAsync","bool"),n=await e.data(),r=mD(e.shape,n);return t!==e&&e.dispose(),r}const JX=dBe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function fBe(t,e,n){const r=Q(t,"tensor","boolMask"),s=Q(e,"mask","boolMask","bool"),i=n??0,o=s.rank,a=r.shape;L(o>0,()=>"mask cannot be scalar"),Pi(a.slice(i,i+o),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let p=i;p<i+o;p++)l*=a[p];const c=a.slice(0,i).concat([l],a.slice(i+o)),u=oe(r,c),A=oe(s,[-1]),d=await JX(A),f=Wn(d,[1]),h=Av(u,f,i);return t!==r&&r.dispose(),e!==s&&s.dispose(),f.dispose(),u.dispose(),A.dispose(),d.dispose(),h}const hBe=fBe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pBe(t,e,n){const r=Q(t,"x","transpose");if(e==null&&(e=r.shape.map((o,a)=>a).reverse()),L(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{L(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},i={perm:e};return r.dtype==="complex64"?ce(()=>{let o=Jy(r),a=BB(r);return o=re.runKernel(Eh,{x:o},i),a=re.runKernel(Eh,{x:a},i),n&&(a=In(a)),zu(o,a)}):re.runKernel(Eh,s,i)}const Ut=ee({transpose_:pBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mBe(t,e,n,r,s=!0){const i=Q(t,"v","movingAverage"),o=Q(e,"x","movingAverage"),a=Q(n,"decay","movingAverage");sbe(i,o),L(_t(i.shape,o.shape),()=>"Shape mismatch in v and x");const l=at(1),c=We(l,a);let u=ne(We(o,i),c);if(s){L(r!=null,()=>"When using zeroDebias: true, step is required.");const A=Q(r,"step","movingAverage");u=ze(u,We(l,fc(a,A)))}return Ee(i,u)}const gBe=ee({movingAverage_:mBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yBe(t,e,n){oo(n);const r=Q(t,"indices","scatterND","int32"),s=Q(e,"updates","scatterND");fD(s,r,n);const i={indices:r,updates:s},o={shape:n};return re.runKernel(fO,i,o)}const xBe=ee({scatterND_:yBe});function vBe(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const s=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bBe(t,e,n,r=0){oo(n);const s=Q(t,"sparseIndices","sparseToDense","int32"),i=Q(e,"sparseValues","sparseToDense","string_or_numeric"),o=Q(r,"defaultValue","sparseToDense",i.dtype);vBe(s,i,n,o);const a={sparseIndices:s,sparseValues:i,defaultValue:o},l={outputShape:n};return re.runKernel(vO,a,l)}const wBe=ee({sparseToDense_:bBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CBe(t,e){const n=Q(e,"indices","gatherND","int32"),s={params:Q(t,"x","gatherND","string_or_numeric"),indices:n};return re.runKernel(K_,s)}const SBe=ee({gatherND_:CBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BBe(t,e){if(e==null)return t.shape.slice();if(_t(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NBe(t,e,n,r){const s=Q(t,"x","dropout");if(L(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),L(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof qt?s.clone():s;const i=BBe(s,n),o=1-e,a=ze(uv(Ee(Af(i,0,1,"float32",r),o)),o);return ne(s,a)}const ZX=ee({dropout_:NBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eq(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function gD(t,e,n){const r=1-t%2,s=new Float32Array(t);for(let i=0;i<t;++i){const o=2*Math.PI*i/(t+r-1);s[i]=e-n*Math.cos(o)}return mr(s,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function EBe(t,e,n=1){const r=Q(t,"predictions","inTopK"),s=Q(e,"targets","inTopK");L(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),L(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),Pi(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];L(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const o=await r.data(),a=await s.data(),[l,c]=[o.length/i,i],u=ns("bool",l);for(let A=0;A<l;A++){const d=A*c,f=o.subarray(d,d+c),h=[];for(let p=0;p<f.length;p++)h.push({value:f[p],index:p});h.sort((p,m)=>m.value-p.value),u[A]=0;for(let p=0;p<n;p++)if(h[p].index===a[A]){u[A]=1;break}}return t!==r&&r.dispose(),e!==s&&s.dispose(),ya(u,s.shape,"bool")}const IBe=EBe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kBe(t,e,n,r,s,i="NHWC",o){let a=t;t.rank===3&&(a=oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]])),L(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),L(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),L(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=i==="NHWC"?a.shape[3]:a.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];L(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),L(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Hs("conv2dDerFilter",s,o);const A={x:a,dy:l},d={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,filterShape:n};return re.runKernel(__,A,d)}const yD=ee({conv2DBackpropFilter_:kBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jB(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return ne(t,rm(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function MB(t,e){let n=e;const r=Fr(t.shape,e.shape);return r.length>0&&(n=Je(n,r)),oe(n,t.shape)}function QB(t,e,n,r){if(e==="linear")return t;if(e==="relu")return vl(t);if(e==="elu")return lv(t);if(e==="relu6")return rD(t);if(e==="prelu")return _B(t,n);if(e==="leakyrelu")return NB(t,r);if(e==="sigmoid")return xa(t);throw new Error(`Unknown fused activation ${e}.`)}const HB=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TBe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",HB(re.state.gradientDepth,l)===!1){L(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=Gu(t,e,n,r,s,i,o);return a!=null&&(C=Ee(C,a)),QB(C,l,c,u)}const A=Q(t,"x","conv2d","float32"),d=Q(e,"filter","conv2d","float32");let f=A,h=!1;A.rank===3&&(h=!0,f=oe(A,[1,A.shape[0],A.shape[1],A.shape[2]])),L(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),L(d.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),Hs("fused conv2d",r,o);const p=s==="NHWC"?f.shape[3]:f.shape[1];L(d.shape[2]===p,()=>`Error in conv2d: depth of input (${p}) must match input depth for filter ${d.shape[2]}.`),L(ss(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const m=zr(f.shape,d.shape,n,i,r,o);let y;a!=null&&(y=Q(a,"bias","fused conv2d"),[y]=Jn(y,A),s==="NHWC"?vt(m.outShape,y.shape):(L(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),L(y.shape.length===0||y.shape[0]===m.outChannels||y.shape[0]===1,()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${m.outChannels})`)));let x;if(c!=null){const C=c.shape;if(L(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)L(C[0]===1||C[0]===m.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${m.outChannels}).`);else if(C.length===3)try{vt(C,m.outShape)}catch{const S=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${m.outShape}).`;throw Error(S)}x=Q(c,"prelu weights","fused conv2d")}const v=(C,B)=>{L(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[S,N,k,O]=B,U=jB(C,k,l);L(Wu(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const P=UO(N.shape,U,S,n,r),V=yD(N,U,S.shape,n,r),W=[P,V];if(O!=null){const j=MB(O,U);W.push(j)}return W},b={x:f,filter:d,bias:y,preluActivationWeights:x},w={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return a==null?hc((B,S,N)=>{let k=re.runKernel(n2,b,w);return N([S,B,k]),h&&(k=oe(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:v}})(f,d):hc((B,S,N,k)=>{let O=re.runKernel(n2,b,w);return k([S,B,O,N]),h&&(O=oe(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:v}})(f,d,y)}const tq=ee({fusedConv2d_:TBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FBe(t,e,n,r,s,i=[1,1],o){let a=t;t.rank===3&&(a=oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:a,dy:l},u={strides:r,pad:s,dimRoundingMode:o,dilations:i,filterShape:n};return re.runKernel(j_,c,u)}const nq=ee({depthwiseConv2dNativeBackpropFilter_:FBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Be(t,e,n,r,s,i=[1,1],o){let a=e,l=!1;e.rank===3&&(l=!0,a=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:a,filter:n},u={strides:r,pad:s,dimRoundingMode:o,dilations:i,inputShape:t},A=re.runKernel(M_,c,u);return l?oe(A,[A.shape[1],A.shape[2],A.shape[3]]):A}const rq=ee({depthwiseConv2dNativeBackpropInput_:$Be});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Be({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(HB(re.state.gradientDepth,l)===!1){let w=av(t,e,n,r,s,i,o);return a!=null&&(w=Ee(w,a)),QB(w,l,c,u)}const A=Q(t,"x","depthwiseConv2d","float32"),d=Q(e,"filter","depthwiseConv2d","float32");let f=A,h=!1;A.rank===3&&(h=!0,f=oe(A,[1,A.shape[0],A.shape[1],A.shape[2]])),L(f.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),L(d.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),L(f.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),i==null&&(i=[1,1]),L(ss(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Hs("fused depthwiseConv2d",r,o);const p=zr(f.shape,d.shape,n,i,r,o,!0);let m;a!=null&&(m=Q(a,"bias","fused conv2d"),[m]=Jn(m,A),vt(p.outShape,m.shape));let y;c!=null&&(y=Q(c,"prelu weights","fused depthwiseConv2d"));const x=(w,C)=>{L(Wu(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[B,S,N,k]=C,O=jB(w,N,l),U=rq(S.shape,O,B,n,r,i,o),P=nq(S,O,B.shape,n,r,i,o);if(k!=null){const V=MB(m,O);return[U,P,V]}return[U,P]},v={x:f,filter:d,bias:m,preluActivationWeights:y},b={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return a==null?hc((C,B,S)=>{let N=re.runKernel(r2,v,b);return S([B,C,N]),h&&(N=oe(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:x}})(f,d):hc((C,B,S,N)=>{let k=re.runKernel(r2,v,b);return N([B,C,k,S]),h&&(k=oe(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:x}})(f,d,m)}const OBe=ee({fusedDepthwiseConv2d_:_Be});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DBe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(HB(re.state.gradientDepth,i)===!1){let O=$t(t,e,n,r);return s!=null&&(O=Ee(O,s)),QB(O,i,o,a)}let l=Q(t,"a","fused matMul"),c=Q(e,"b","fused matMul");[l,c]=Jn(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],A=r?c.shape[c.rank-1]:c.shape[c.rank-2],d=n?l.shape[l.rank-1]:l.shape[l.rank-2],f=r?c.shape[c.rank-2]:c.shape[c.rank-1],h=l.shape.slice(0,-2),p=c.shape.slice(0,-2),m=ge(h),y=ge(p);L(u===A,()=>`Error in fused matMul: inner shapes (${u}) and (${A}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const v=vt(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([d,f]),b=n?oe(l,[m,u,d]):oe(l,[m,d,u]),w=r?oe(c,[y,f,A]):oe(c,[y,A,f]);let C;s!=null&&(C=Q(s,"bias","fused matMul"),[C]=Jn(C,l),vt(v,C.shape));let B;o!=null&&(B=Q(o,"prelu weights","fused matMul"));const S=(O,U)=>{const[P,V,W,j]=U,G=jB(oe(O,W.shape),W,i);let D,M;if(!n&&!r?(D=$t(G,V,!1,!0),M=$t(P,G,!0,!1)):!n&&r?(D=$t(G,V,!1,!1),M=$t(G,P,!0,!1)):n&&!r?(D=$t(V,G,!1,!0),M=$t(P,G,!1,!1)):(D=$t(V,G,!0,!0),M=$t(G,P,!0,!0)),s!=null){const q=MB(j,G);return[D,M,q]}else return[D,M]},N={a:b,b:w,bias:C,preluActivationWeights:B},k={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return s==null?hc((U,P,V)=>{const W=re.runKernel(t2,N,k);return V([U,P,W]),{value:oe(W,v),gradFunc:S}})(b,w):hc((U,P,V,W)=>{const j=re.runKernel(t2,N,k);return W([U,P,j,V]),{value:oe(j,v),gradFunc:S}})(b,w,C)}const jk=ee({fusedMatMul_:DBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RBe=Object.freeze(Object.defineProperty({__proto__:null,conv2d:tq,depthwiseConv2d:OBe,matMul:jk},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PBe(t){return gD(t,.54,.46)}const UBe=ee({hammingWindow_:PBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LBe(t){return gD(t,.5,.5)}const sq=ee({hannWindow_:LBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jBe(t,e,n,r=!1,s=0){let i=0;const o=[];for(;i+e<=t.size;)o.push(ct(t,i,e)),i+=n;if(r)for(;i<t.size;){const a=i+e-t.size,l=qn([ct(t,i,e-a),tm([a],s)]);o.push(l),i+=n}return o.length===0?_u([],[0,e]):oe(qn(o),[o.length,e])}const iq=ee({frame_:jBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MBe(t,e,n,r,s=sq){r==null&&(r=eq(e));const i=iq(t,e,n),o=ne(i,s(e));return LB(o,r)}const QBe=ee({stft_:MBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HBe(t,e,n,r,s="bilinear",i=0){const o=Q(t,"image","cropAndResize"),a=Q(e,"boxes","cropAndResize","float32"),l=Q(n,"boxInd","cropAndResize","int32"),c=a.shape[0];L(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),L(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),L(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),L(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),L(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),L(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const u={image:o,boxes:a,boxInd:l},A={method:s,extrapolationValue:i,cropSize:r};return re.runKernel(P_,u,A)}const zBe=ee({cropAndResize_:HBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VBe(t){const e=Q(t,"image","flipLeftRight","float32");L(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return re.runKernel(G_,n,{})}const WBe=ee({flipLeftRight_:VBe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GBe(t){const e=Q(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];L(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),L(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,Fo(e,s)}const KBe=ee({grayscaleToRGB_:GBe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XBe(t){const e=Q(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];L(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),L(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,i=Pe(e,"float32"),o=mr([.2989,.587,.114]);let a;switch(e.rank){case 2:a=qf("ij,j->i",i,o);break;case 3:a=qf("ijk,k->ij",i,o);break;case 4:a=qf("ijkl,l->ijk",i,o);break;case 5:a=qf("ijklm,m->ijkl",i,o);break;case 6:a=qf("ijklmn,n->ijklm",i,o);break;default:throw new Error("Not a valid tensor rank.")}return a=wr(a,-1),Pe(a,s)}const qBe=ee({rgbToGrayscale_:XBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YBe(t,e,n=0,r=.5){const s=Q(t,"image","rotateWithOffset","float32");L(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const i={image:s},o={radians:e,fillValue:n,center:r};return re.runKernel(kO,i,o)}const JBe=ee({rotateWithOffset_:YBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sm(t,e,n,r,s,i){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);const o=t.shape[0];return n=Math.min(n,o),L(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),L(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),L(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),L(e.rank===1,()=>"scores must be a 1D tensor"),L(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),L(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZBe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=Q(t,"boxes","nonMaxSuppression","float32"),o=Q(e,"scores","nonMaxSuppression","float32"),a=sm(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return re.runKernel(rO,{boxes:i,scores:o},l)}const e3e=ee({nonMaxSuppression_:ZBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3e(t,e,n){const r=n3e(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function n3e(t,e,n){return s3e(t,e,n||r3e)}function r3e(t,e){return t>e?1:t<e?-1:0}function s3e(t,e,n){let r=0,s=t.length,i=0,o=!1;for(;r<s;){i=r+(s-r>>>1);const a=n(e,t[i]);a>0?r=i+1:(s=i,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xD(t,e,n,r,s){return wD(t,e,n,r,s,0)}function vD(t,e,n,r,s,i){return wD(t,e,n,r,s,0,!1,i,!0)}function bD(t,e,n,r,s,i){return wD(t,e,n,r,s,i,!0)}function wD(t,e,n,r,s,i,o=!1,a=!1,l=!1){const c=[];for(let m=0;m<e.length;m++)e[m]>s&&c.push({score:e[m],boxIndex:m,suppressBeginIndex:0});c.sort(y6);const u=i>0?-.5/i:0,A=[],d=[];for(;A.length<n&&c.length>0;){const m=c.pop(),{score:y,boxIndex:x,suppressBeginIndex:v}=m;if(y<s)break;let b=!1;for(let w=A.length-1;w>=v;--w){const C=i3e(t,x,A[w]);if(C>=r){b=!0;break}if(m.score=m.score*o3e(r,u,C),m.score<=s)break}m.suppressBeginIndex=A.length,b||(m.score===y?(A.push(x),d.push(m.score)):m.score>s&&t3e(c,m,y6))}const f=A.length,h=n-f;a&&h>0&&(A.push(...new Array(h).fill(0)),d.push(...new Array(h).fill(0)));const p={selectedIndices:A};return o&&(p.selectedScores=d),l&&(p.validOutputs=f),p}function i3e(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),A=Math.max(s[0],s[2]),d=Math.max(s[1],s[3]),f=(a-i)*(l-o),h=(A-c)*(d-u);if(f<=0||h<=0)return 0;const p=Math.max(i,c),m=Math.max(o,u),y=Math.min(a,A),x=Math.min(l,d),v=Math.max(y-p,0)*Math.max(x-m,0);return v/(f+h-v)}function o3e(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function y6(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function a3e(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=Q(t,"boxes","nonMaxSuppressionAsync"),o=Q(e,"scores","nonMaxSuppressionAsync"),a=sm(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l=await Promise.all([i.data(),o.data()]),c=l[0],u=l[1],{selectedIndices:A}=xD(c,u,n,r,s);return i!==t&&i.dispose(),o!==e&&o.dispose(),mr(A,"int32")}const l3e=a3e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3e(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=Q(t,"boxes","nonMaxSuppression"),a=Q(e,"scores","nonMaxSuppression"),l=sm(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c={boxes:o,scores:a},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i},A=re.runKernel(iO,c,u);return{selectedIndices:A[0],selectedScores:A[1]}}const u3e=ee({nonMaxSuppressionWithScore_:c3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function A3e(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=Q(t,"boxes","nonMaxSuppressionAsync"),a=Q(e,"scores","nonMaxSuppressionAsync"),l=sm(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c=await Promise.all([o.data(),a.data()]),u=c[0],A=c[1],{selectedIndices:d,selectedScores:f}=bD(u,A,n,r,s,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:mr(d,"int32"),selectedScores:mr(f)}}const d3e=A3e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f3e(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=Q(t,"boxes","nonMaxSuppression"),a=Q(e,"scores","nonMaxSuppression"),l=sm(o,a,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,A=l.scoreThreshold,d={boxes:o,scores:a},f={maxOutputSize:c,iouThreshold:u,scoreThreshold:A,padToMaxOutputSize:i},h=re.runKernel(sO,d,f);return{selectedIndices:h[0],validOutputs:h[1]}}const h3e=ee({nonMaxSuppressionPadded_:f3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function p3e(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=Q(t,"boxes","nonMaxSuppressionAsync"),a=Q(e,"scores","nonMaxSuppressionAsync"),l=sm(o,a,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,A=l.scoreThreshold,[d,f]=await Promise.all([o.data(),a.data()]),{selectedIndices:h,validOutputs:p}=vD(d,f,c,u,A,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:mr(h,"int32"),validOutputs:at(p,"int32")}}const m3e=p3e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g3e(t,e,n=!1,r=!1){const s=Q(t,"images","resizeBilinear");L(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),L(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),L(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=oe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=re.runKernel(cB,a,l);return o?oe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const oq=ee({resizeBilinear_:g3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y3e(t,e,n=!1,r=!1){const s=Q(t,"images","resizeNearestNeighbor");L(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),L(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),L(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),L(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=oe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=re.runKernel(lB,a,l);return o?oe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const aq=ee({resizeNearestNeighbor_:y3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x3e(t,e="binary",n=!1,r=.5){const s=Q(t,"image","threshold"),i=.2989,o=.587,a=.114,l=s.shape[0]*s.shape[1];let c=ne(mr([r]),255),u,A,d,f;if(L(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),L(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),L(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),L(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[u,A,d]=$i(s,[1,1,1],-1);const m=ne(u,i),y=ne(A,o),x=ne(d,a);f=Ee(Ee(m,y),x)}else f=t;if(e==="otsu"){const m=hX(Pe(sD(f),"int32"),ya([]),256);c=v3e(m,l)}const h=n?cf(f,c):Li(f,c);return Pe(ne(h,255),"int32")}function v3e(t,e){let n=mr([-1]),r=mr([0]),s=mr([0]),i,o,a,l,c,u;for(let A=0;A<t.size-1;A++){i=ct(t,0,A+1),o=ct(t,A+1),c=ze(Je(i),e),u=ze(Je(o),e);const d=Je(ne(i,lp(0,i.size)));a=ze(d,Je(i));const f=tm(o.shape,i.size),h=Ee(lp(0,o.size),f),p=ne(o,h);l=ze(Je(p),Je(o));const m=We(a,l),y=We(a,l),x=ne(c,u);s=ne(ne(x,m),y);const v=Li(s,r);r=ys(v,s,r),n=ys(v,mr([A]),n)}return n}const b3e=ee({threshold_:x3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w3e(t,e,n="nearest",r="constant",s=0,i){const o=Q(t,"image","transform","float32"),a=Q(e,"transforms","transform","float32");L(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),L(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),L(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:o,transforms:a},c={interpolation:n,fillMode:r,fillValue:s,outputShape:i};return re.runKernel(EO,l,c)}const C3e=ee({transform_:w3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S3e(t,e,n){const r=Q(t,"a","bandPart");L(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[i,o]=r.shape.slice(-2);let a,l;typeof e=="number"?(L(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),L(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),a=Q(e<0?i:e,"numLower","bandPart")):(L(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=ys(Yy(e,0),i,Wd(e,i))),typeof n=="number"?(L(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),L(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=Q(n<0?o:n,"numUpper","bandPart")):(L(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=ys(Yy(n,0),o,Wd(n,o)));const c=oe(lp(0,i,1,"int32"),[-1,1]),u=lp(0,o,1,"int32"),A=We(c,u),d=hl(cf(A,a),AA(A,In(l))),f=Sr([i,o],r.dtype);return oe(Oi(Ho(oe(r,[-1,i,o])).map(h=>ys(d,h,f))),s)}const B3e=ee({bandPart_:S3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N3e(t){let e;if(Array.isArray(t)){e=!1,L(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let i=1;i<t.length;++i)L(t[i].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${s})`)}else e=!0,t=$i(t,t.shape[0],0).map(s=>Wn(s,[0]));L(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(re.tidy(()=>{let i=r[s];if(s>0)for(let o=0;o<s;++o){const a=ne(Je(ne(n[o],i)),n[o]);i=We(i,a)}return ze(i,cv(i,"euclidean"))}));return e?Oi(n,0):n}const E3e=ee({gramSchmidt_:N3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3e(t,e=!1){if(L(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return x6(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=Ho(oe(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],i=[];r.forEach(l=>{const[c,u]=x6(l,e);s.push(c),i.push(u)});const o=oe(Oi(s,0),t.shape),a=oe(Oi(i,0),t.shape);return[o,a]}}function x6(t,e=!1){return re.tidy(()=>{L(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=zO(n),i=rc(t);const o=_u([[1]],[1,1]);let a=rc(o);const l=n>=r?r:n;for(let c=0;c<l;++c){const u=i,A=a,d=s;[a,i,s]=re.tidy(()=>{const f=ct(i,[c,c],[n-c,1]),h=cv(f),p=ct(i,[c,c],[1,1]),m=ys(Li(p,0),_u([[-1]]),_u([[1]])),y=We(p,ne(m,h)),x=ze(f,y);x.shape[0]===1?a=rc(o):a=qn([o,ct(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);const v=In(ze($t(m,y),h)),b=ct(i,[c,0],[n-c,r]),w=ne(v,a),C=Ut(a);if(c===0)i=We(b,$t(w,$t(C,b)));else{const N=We(b,$t(w,$t(C,b)));i=qn([ct(i,[0,0],[c,r]),N],0)}const B=Ut(w),S=ct(s,[0,c],[n,s.shape[1]-c]);if(c===0)s=We(S,$t($t(S,a),B));else{const N=We(S,$t($t(S,a),B));s=qn([ct(s,[0,0],[n,c]),N],1)}return[a,i,s]}),ft([u,A,d])}return!e&&n>r&&(s=ct(s,[0,0],[n,r]),i=ct(i,[0,0],[r,r])),[s,i]})}const k3e=ee({qr_:I3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ei;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(ei||(ei={}));function T3e(t,e,n=ei.SUM_BY_NONZERO_WEIGHTS){const r=Q(t,"losses","computeWeightedLoss");let s=null;e!=null&&(s=Q(e,"weights","computeWeightedLoss"));const i=s==null?r:ne(r,s);if(n===ei.NONE)return i;if(n===ei.SUM)return Je(i);if(n===ei.MEAN){if(s==null)return Kn(i);{const o=r.size/s.size,a=ze(Je(i),Je(s));return o>1?ze(a,at(o)):a}}if(n===ei.SUM_BY_NONZERO_WEIGHTS){if(s==null)return ze(Je(i),at(r.size));{const o=ne(s,Bi(r.shape)),a=Pe(Je(ap(o,at(0))),"float32");return ze(Je(i),a)}}throw Error(`Unknown reduction: ${n}`)}const kc=ee({computeWeightedLoss_:T3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F3e(t,e,n,r=ei.SUM_BY_NONZERO_WEIGHTS){const s=Q(t,"labels","absoluteDifference"),i=Q(e,"predictions","absoluteDifference");let o=null;n!=null&&(o=Q(n,"weights","absoluteDifference")),Pi(s.shape,i.shape,"Error in absoluteDifference: ");const a=vr(We(s,i));return kc(a,o,r)}const $3e=ee({absoluteDifference_:F3e});function _3e(t,e,n,r,s=ei.SUM_BY_NONZERO_WEIGHTS){const i=Q(t,"labels","cosineDistance"),o=Q(e,"predictions","cosineDistance");let a=null;r!=null&&(a=Q(r,"weights","cosineDistance")),Pi(i.shape,o.shape,"Error in cosineDistance: ");const l=at(1),c=We(l,Je(ne(i,o),n,!0));return kc(c,a,s)}const O3e=ee({cosineDistance_:_3e});function D3e(t,e,n,r=ei.SUM_BY_NONZERO_WEIGHTS){let s=Q(t,"labels","hingeLoss");const i=Q(e,"predictions","hingeLoss");let o=null;n!=null&&(o=Q(n,"weights","hingeLoss")),Pi(s.shape,i.shape,"Error in hingeLoss: ");const a=at(1);s=We(ne(at(2),s),a);const l=vl(We(a,ne(s,i)));return kc(l,o,r)}const R3e=ee({hingeLoss_:D3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P3e(t,e,n,r=1,s=ei.SUM_BY_NONZERO_WEIGHTS){const i=Q(t,"labels","huberLoss"),o=Q(e,"predictions","huberLoss");let a=null;n!=null&&(a=Q(n,"weights","huberLoss")),Pi(i.shape,o.shape,"Error in huberLoss: ");const l=at(r),c=vr(We(o,i)),u=Wd(c,l),A=We(c,u),d=Ee(ne(at(.5),fn(u)),ne(l,A));return kc(d,a,s)}const U3e=ee({huberLoss_:P3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L3e(t,e,n,r=1e-7,s=ei.SUM_BY_NONZERO_WEIGHTS){const i=Q(t,"labels","logLoss"),o=Q(e,"predictions","logLoss");let a=null;n!=null&&(a=Q(n,"weights","logLoss")),Pi(i.shape,o.shape,"Error in logLoss: ");const l=at(1),c=at(r),u=In(ne(i,no(Ee(o,c)))),A=ne(We(l,i),no(Ee(We(l,o),c))),d=We(u,A);return kc(d,a,s)}const j3e=ee({logLoss_:L3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M3e(t,e,n,r=ei.SUM_BY_NONZERO_WEIGHTS){const s=Q(t,"labels","meanSquaredError"),i=Q(e,"predictions","meanSquaredError");let o=null;n!=null&&(o=Q(n,"weights","meanSquaredError")),Pi(s.shape,i.shape,"Error in meanSquaredError: ");const a=dD(s,i);return kc(a,o,r)}const Q3e=ee({meanSquaredError_:M3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H3e(t,e){const n=Q(t,"labels","sigmoidCrossEntropyWithLogits"),r=Q(e,"logits","sigmoidCrossEntropyWithLogits");Pi(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=vl(r),i=ne(r,n),o=EB(js(In(vr(r))));return Ee(We(s,i),o)}function z3e(t,e,n,r=0,s=ei.SUM_BY_NONZERO_WEIGHTS){let i=Q(t,"multiClassLabels","sigmoidCrossEntropy");const o=Q(e,"logits","sigmoidCrossEntropy");let a=null;if(n!=null&&(a=Q(n,"weights","sigmoidCrossEntropy")),Pi(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const c=at(r),u=at(1),A=at(.5);i=Ee(ne(i,We(u,c)),ne(A,c))}const l=H3e(i,o);return kc(l,a,s)}const V3e=ee({sigmoidCrossEntropy_:z3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W3e(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return hc((s,i,o)=>{const l=IB(i,[n],!0),c=We(Pe(i,"float32"),l);o([s,c]);const u=In(ne(c,s));return{value:Je(u,[n]),gradFunc:(f,h)=>{const[p,m]=h,y=or(f.shape,[n]);return[ne(oe(f,y),We(Pe(p,"float32"),js(m))),ne(oe(f,y),We(js(m),Pe(p,"float32")))]}}})(t,e)}function G3e(t,e,n,r=0,s=ei.SUM_BY_NONZERO_WEIGHTS){let i=Q(t,"onehotLabels","softmaxCrossEntropy");const o=Q(e,"logits","softmaxCrossEntropy");let a=null;if(n!=null&&(a=Q(n,"weights","softmaxCrossEntropy")),Pi(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const c=at(r),u=at(1),A=at(i.shape[1]);i=Ee(ne(i,We(u,c)),ze(c,A))}const l=W3e(i,o);return kc(l,a,s)}const K3e=ee({softmaxCrossEntropy_:G3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X3e(t,e,n,r){const s=Q(t,"indices","sparseFillEmptyRows","int32"),i=Q(e,"values","sparseFillEmptyRows"),o=Q(n,"denseShape","sparseFillEmptyRows","int32"),a=Q(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const l={indices:s,values:i,denseShape:o,defaultValue:a},c=re.runKernel(mO,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}const q3e=ee({sparseFillEmptyRows_:X3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y3e(t,e,n){const r=Q(t,"inputIndices","sparseReshape","int32"),s=Q(e,"inputShape","sparseReshape","int32"),i=Q(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const o={inputIndices:r,inputShape:s,newShape:i},a=re.runKernel(gO,o);return{outputIndices:a[0],outputShape:a[1]}}const J3e=ee({sparseReshape_:Y3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z3e(t,e,n){const r=Q(t,"data","sparseSegmentMean"),s=Q(e,"indices","sparseSegmentMean","int32"),i=Q(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const o={data:r,indices:s,segmentIds:i};return re.runKernel(yO,o)}const eNe=ee({sparseSegmentMean_:Z3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tNe(t,e,n){const r=Q(t,"data","sparseSegmentSum"),s=Q(e,"indices","sparseSegmentSum","int32"),i=Q(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const o={data:r,indices:s,segmentIds:i};return re.runKernel(xO,o)}const nNe=ee({sparseSegmentSum_:tNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rNe(t,e,n,r,s,i,o,a){const l=Q(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const c=Q(e,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const u={separator:n,nGramWidths:r,leftPad:s,rightPad:i,padWidth:o,preserveShortSequences:a},A={data:l,dataSplits:c},d=re.runKernel(CO,A,u);return{nGrams:d[0],nGramsSplits:d[1]}}const sNe=ee({stringNGrams_:rNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iNe(t,e,n=!0){const r=Q(t,"input","stringSplit","string"),s=Q(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const i={skipEmpty:n},o={input:r,delimiter:s},a=re.runKernel(SO,o,i);return{indices:a[0],values:a[1],shape:a[2]}}const oNe=ee({stringSplit_:iNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aNe(t,e){const n=Q(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const s={input:n};return re.runKernel(BO,s,r)}const lNe=ee({stringToHashBucketFast_:aNe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cNe(t,e,n,r=!0){const s=Q(t,"input","staticRegexReplace","string"),i={pattern:e,rewrite:n,replaceGlobal:r};return re.runKernel(gB,{x:s},i)}const uNe=ee({staticRegexReplace_:cNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ANe={fft:UB,ifft:e0,rfft:LB,irfft:AD},dNe={hammingWindow:UBe,hannWindow:sq,frame:iq,stft:QBe},ti={flipLeftRight:WBe,grayscaleToRGB:KBe,resizeNearestNeighbor:aq,resizeBilinear:oq,rgbToGrayscale:qBe,rotateWithOffset:JBe,cropAndResize:zBe,nonMaxSuppression:e3e,nonMaxSuppressionAsync:l3e,nonMaxSuppressionWithScore:u3e,nonMaxSuppressionWithScoreAsync:d3e,nonMaxSuppressionPadded:h3e,nonMaxSuppressionPaddedAsync:m3e,threshold:b3e,transform:C3e},lq={bandPart:B3e,gramSchmidt:E3e,qr:k3e},fNe={absoluteDifference:$3e,computeWeightedLoss:kc,cosineDistance:O3e,hingeLoss:R3e,huberLoss:U3e,logLoss:j3e,meanSquaredError:Q3e,sigmoidCrossEntropy:V3e,softmaxCrossEntropy:K3e},hNe={sparseFillEmptyRows:q3e,sparseReshape:J3e,sparseSegmentMean:eNe,sparseSegmentSum:nNe},pNe={stringNGrams:sNe,stringSplit:oNe,stringToHashBucketFast:lNe,staticRegexReplace:uNe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mNe=new Map,gNe=new Map;class im{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Co{constructor(){this.classNameMap={}}static getMap(){return Co.instance==null&&(Co.instance=new Co),Co.instance}static register(e){Co.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Te(t,e,n){L(t.className!=null,()=>"Class being registered does not have the static className property defined."),L(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),L(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return Co.register(t),mNe.set(s,t),gNe.set(t,s),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fA extends im{minimize(e,n=!1,r){const{value:s,grads:i}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(o)}else this.applyGradients(i);return ft(i),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return H2e(e,n)}dispose(){this.iterations_!=null&&ft(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:at(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(fA,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cq extends fA{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=re.registeredVariables[r],o=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:ce(()=>Lt(i).variable(o))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:ce(()=>Lt(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;ce(()=>{const u=Ee(ne(l,this.rho),ne(fn(a),1-this.rho)),A=ne(ze(rs(Ee(c,this.epsilon)),rs(Ee(l,this.epsilon))),a),d=Ee(ne(c,this.rho),ne(fn(A),1-this.rho));l.assign(u),c.assign(d);const f=Ee(ne(A,-this.learningRate),i);i.assign(f)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(ft(this.accumulatedGrads.map(e=>e.variable)),ft(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uq extends fA{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=re.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:ce(()=>tm(i.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[s].variable;ce(()=>{const l=Ee(a,fn(o));a.assign(l);const c=Ee(ne(ze(o,rs(Ee(l,re.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&ft(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Aq extends fA{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ce(()=>{this.accBeta1=at(n).variable(),this.accBeta2=at(r).variable()}),s==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);ce(()=>{const r=We(1,this.accBeta1),s=We(1,this.accBeta2);n.forEach((i,o)=>{const a=re.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:ce(()=>Lt(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${i}/v`,variable:ce(()=>Lt(a).variable(l))});const c=Array.isArray(e)?e[o].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,A=this.accumulatedSecondMoment[o].variable,d=Ee(ne(u,this.beta1),ne(c,1-this.beta1)),f=Ee(ne(A,this.beta2),ne(fn(c),1-this.beta2)),h=ze(d,r),p=ze(f,s);u.assign(d),A.assign(f);const m=Ee(ne(ze(h,Ee(rs(p),this.epsilon)),-this.learningRate),a);a.assign(m)}),this.accBeta1.assign(ne(this.accBeta1,this.beta1)),this.accBeta2.assign(ne(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&ft(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&ft(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),ce(()=>{this.accBeta1.assign(fc(this.beta1,this.iterations_+1)),this.accBeta2.assign(fc(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dq extends fA{static get className(){return"Adamax"}constructor(e,n,r,s=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ce(()=>{this.iteration=at(0).variable(),this.accBeta1=at(n).variable()}),s==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);ce(()=>{const r=We(1,this.accBeta1),s=ze(-this.learningRate,Ee(ne(this.iteration,this.decay),1));n.forEach((i,o)=>{const a=re.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:Lt(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${i}/v`,variable:Lt(a).variable(l)});const c=Array.isArray(e)?e[o].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,A=this.accumulatedWeightedInfNorm[o].variable,d=Ee(ne(u,this.beta1),ne(c,1-this.beta1)),f=ne(A,this.beta2),h=vr(c),p=Ic(f,h);u.assign(d),A.assign(p);const m=Ee(ne(ze(s,r),ze(d,Ee(p,this.epsilon))),a);a.assign(m)}),this.iteration.assign(Ee(this.iteration,1)),this.accBeta1.assign(ne(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&ft(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&ft(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CD extends fA{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const o=re.registeredVariables[r];ce(()=>{const a=Ee(ne(this.c,i),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Mr(at(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fq extends CD{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=at(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=re.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:ce(()=>Lt(i).variable(!1))});const o=this.accumulations[s].variable,a=Array.isArray(e)?e[s].tensor:e[r];a!=null&&ce(()=>{let l;const c=Ee(ne(this.m,o),a);this.useNesterov?l=Ee(ne(this.c,Ee(a,ne(c,this.m))),i):l=Ee(ne(this.c,c),i),o.assign(c),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&ft(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hq extends fA{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,s==null&&(this.epsilon=re.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=re.registeredVariables[r],o=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:ce(()=>Lt(i).variable(o))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:ce(()=>Lt(i).variable(o))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:ce(()=>Lt(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;ce(()=>{const u=Ee(ne(l,this.decay),ne(fn(a),1-this.decay));if(this.centered){const A=this.accumulatedMeanGrads[s].variable,d=Ee(ne(A,this.decay),ne(a,1-this.decay)),f=ze(ne(a,this.learningRate),rs(We(u,Ee(fn(d),this.epsilon)))),h=Ee(ne(c,this.momentum),f);l.assign(u),A.assign(d),c.assign(h);const p=We(i,h);i.assign(p)}else{const A=Ee(ne(l,this.decay),ne(fn(a),1-this.decay)),d=Ee(ne(c,this.momentum),ze(ne(a,this.learningRate),rs(Ee(A,this.epsilon))));l.assign(A),c.assign(d);const f=We(i,d);i.assign(f)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&ft(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&ft(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&ft(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yNe=[cq,uq,Aq,dq,fq,hq,CD];function xNe(){for(const t of yNe)Te(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vNe="model",bNe=".json",wNe=".weights.bin";function v6(t){return new Promise(e=>setTimeout(e)).then(t)}class Gd{constructor(e){if(!fe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Gd.URL_SCHEME)&&(e=e.slice(Gd.URL_SCHEME.length)),(e==null||e.length===0)&&(e=vNe),this.modelJsonFileName=e+bNe,this.weightDataFileName=e+wNe}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=$a.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=VK(e,s),o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),a=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=o,await v6(()=>a.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await v6(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:sv(e)}}}}Gd.URL_SCHEME="downloads://";class CNe{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{const i=JSON.parse(s.target.result),o=i.modelTopology;if(o==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const l=_O(i,c=>this.loadWeights(c));e(l)},r.onerror=s=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const o of e)n.push(...o.weights),r.push(...o.paths);const s=this.checkManifestAndWeightFiles(e),i=r.map(o=>this.loadWeightsFile(o,s[o]));return Promise.all(i).then(o=>[n,o])}loadWeightsFile(e,n){return new Promise((r,s)=>{const i=new FileReader;i.onload=o=>{const a=o.target.result;r(a)},i.onerror=o=>s(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>g6(i.name)),s={};for(const i of e)i.paths.forEach(o=>{const a=g6(o);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);s[o]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const SNe=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Gd.URL_SCHEME)?BNe(t.slice(Gd.URL_SCHEME.length)):null;Un.registerSaveRouter(SNe);function BNe(t="model"){return new Gd(t)}function NNe(t){return new CNe(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b6(t,e,n,r){o(t),n=n??0,r=r??1,a(n,r);let s=0;const i=l=>(l.then(c=>{const u=n+ ++s/t.length*(r-n);return e(u),c}),l);function o(l){L(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){L(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),L(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),L(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function pq(t,e){e==null&&(e={});const n=e.fetchFunc==null?fe().platform.fetch:e.fetchFunc,r=t.map(A=>n(A,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?await Promise.all(r):await b6(r,e.onProgress,0,.5)).map(A=>A.arrayBuffer());return e.onProgress==null?await Promise.all(a):await b6(a,e.onProgress,.5,1)}function ENe(t,e){var n;const r=e.fetchFunc==null?fe().platform.fetch:e.fetchFunc;let s=0,i;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async o=>{for(var a;s<t.length;){i||(i=(await r(t[s],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:c}=await i.read();if(l){s++,i=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,s/t.length);continue}o.enqueue(c);return}o.close()}})}async function INe(t,e="",n,r){return mq(o=>pq(o,{requestInit:r}))(t,e,n)}function mq(t){return async(e,n="",r)=>{const s=e.map(()=>!1),i={},o=r!=null?r.map(()=>!1):[],a=[];if(e.forEach((f,h)=>{let p=0;f.weights.forEach(m=>{const y="quantization"in m?m.quantization.dtype:m.dtype,x=Md[y]*ge(m.shape),v=()=>{s[h]=!0,i[h]==null&&(i[h]=[]),i[h].push({manifestEntry:m,groupOffset:p,sizeBytes:x})};r!=null?r.forEach((b,w)=>{b===m.name&&(v(),o[w]=!0)}):v(),a.push(m.name),p+=x})}),!o.every(f=>f)){const f=r.filter((h,p)=>!o[p]);throw new Error(`Could not find weights in manifest with names: ${f.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}const l=s.reduce((f,h,p)=>(h&&f.push(p),f),[]),c=[];l.forEach(f=>{e[f].paths.forEach(h=>{const p=n+(n.endsWith("/")?"":"/")+h;c.push(p)})});const u=await t(c),A={};let d=0;return l.forEach(f=>{const h=e[f].paths.length,p=new $a(u.slice(d,d+h));i[f].forEach(y=>{const x=p.slice(y.groupOffset,y.groupOffset+y.sizeBytes),v=MK(x,[y.manifestEntry]);for(const b in v)A[b]=v[b]}),d+=h}),A}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kNe="application/octet-stream",TNe="application/json";class SD{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(L(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=fe().platform.fetch,L(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&L(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=VK(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:TNe}),"model.json"),e.weightData!=null){const o=$a.join(e.weightData);n.body.append("model.weights.bin",new Blob([o],{type:kNe}),"model.weights.bin")}const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:sv(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return _O(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=Ok(e.weightsManifest),s=()=>ENe(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=FNe(n),i=this.weightPathPrefix||r,o=[],a=[];for(const l of e)for(const c of l.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(c)):o.push(i+c+s);return this.weightUrlConverter&&o.push(...await Promise.all(a)),o}async loadWeights(e){const n=await this.getWeightUrls(e),r=Ok(e),s=await pq(n,this.loadOptions);return[r,s]}}SD.URL_SCHEME_REGEX=/^https?:\/\//;function FNe(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),s=n>e?t.substring(n):"";return[r+"/",s]}function Mk(t){return t.match(SD.URL_SCHEME_REGEX)!=null}const gq=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>Mk(r)):n=Mk(t),n)return BD(t,e)}return null};Un.registerSaveRouter(gq);Un.registerLoadRouter(gq);function BD(t,e){return new SD(t,e)}function $Ne(t,e){return BD(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _4{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class yq{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class _Ne{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function ONe(t,e,n,r){const s=arguments;return new _Ne(xq(...s))}function xq(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new _4(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new _4({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new _4({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function DNe(t){return new yq(t)}function RNe(t){return new yq(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vq=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:$a,browserFiles:NNe,browserHTTPRequest:$Ne,concatenateArrayBuffers:zK,copyModel:Ube,decodeWeights:MK,decodeWeightsStream:HK,encodeWeights:_k,fromMemory:ONe,fromMemorySync:xq,getLoadHandlers:Sbe,getModelArtifactsForJSON:_O,getModelArtifactsForJSONSync:WK,getModelArtifactsInfoForJSON:sv,getSaveHandlers:GK,getWeightSpecs:Ok,http:BD,isHTTPScheme:Mk,listModels:Rbe,loadWeights:INe,moveModel:Lbe,registerLoadRouter:Cbe,registerSaveRouter:wbe,removeModel:Pbe,weightsLoaderFactory:mq,withSaveHandler:DNe,withSaveHandlerSync:RNe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let FA;function PNe(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,i=!1,o=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(Nk(Sk,re.backendName)!=null){const h={pixels:t},p={numChannels:e};return re.runKernel(Sk,h,p)}const[c,u]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let A;if(o)A=t.getContext("2d").getImageData(0,0,c,u).data;else if(r||n)A=t.data;else if(i||s||a){if(FA==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")FA=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else FA=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});FA.canvas.width=c,FA.canvas.height=u,FA.drawImage(t,0,0,c,u),A=FA.getImageData(0,0,c,u).data}let d;if(e===4)d=new Int32Array(A);else{const h=c*u;d=new Int32Array(h*e);for(let p=0;p<h;p++)for(let m=0;m<e;++m)d[p*e+m]=A[p*4+m]}return GX(d,[u,c,e],"int32")}function UNe(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);const e=t.rank===2?1:t.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}async function bq(t,e){let n=Q(t,"img","toPixels");if(!(t instanceof qt)){const c=n;n=Pe(c,"int32"),c.dispose()}UNe(n);const[r,s]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2],o=await n.data(),a=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(s*r*4);for(let c=0;c<r*s;++c){const u=[0,0,0,255];for(let d=0;d<i;d++){const f=o[c*i+d];if(n.dtype==="float32"){if(f<0||f>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${f}.`)}else if(n.dtype==="int32"&&(f<0||f>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${f}.`);i===1?(u[0]=f*a,u[1]=f*a,u[2]=f*a):u[d]=f*a}const A=c*4;l[A+0]=Math.round(u[0]),l[A+1]=Math.round(u[1]),l[A+2]=Math.round(u[2]),l[A+3]=Math.round(u[3])}return n!==t&&n.dispose(),l}const wq=ee({fromPixels_:PNe});function ND(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(ge(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,i=s[s.length-1];let o=1;for(let A=0;A<s.length-1;++A)o*=s[A];const a=t.shape,l=s.slice();l.pop();let c=1;for(let A=i;A<n;++A)c*=a[A],l.push(a[A]);const u=[...ot(t.shape).map(A=>A/c),1].slice(0,i);return[l,o,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qk=-2,LNe=-1;function ED(t,e,n){const r=t.shape.length;L(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),L(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)L(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function jNe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function ID(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function Cq(t,e,n,r){const s=[...t];for(let i=s.length;i<r.length;i++)s.push(1);for(let i=0;i<n;i++)i===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function Sq(t,e,n){return n<=t?n:n-(e-1)}function Bq(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function MNe(t,e,n,r,s,i,o,a,l){const c=t.length;let u=new Array(c),A=new Array(c),d=new Array(c);if(e.length&&n>0){const f=e[0],h=n+1;u=Nq(o,f,h,r,t),A=Eq(a,f,h,s,t),d=Cq(i,f,h,t)}else for(let f=0;f<c;f++)u[f]=kq(o,r,i,t,f,l),A[f]=Tq(a,s,i,t,f,l),d[f]=Iq(i,f,l);return{begin:u,end:A,strides:d}}function Nq(t,e,n,r,s){const i=[...s],o=Bq(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=0;else{const l=Sq(e,n,a);let c=r[l];t&1<<l&&(c=0),i[a]=c}return i}function Eq(t,e,n,r,s){const i=[...s],o=Bq(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{const l=Sq(e,n,a);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),i[a]=c}for(let a=0;a<i.length;a++){const l=s[a];i[a]<0&&(i[a]+=l),i[a]=Ud(0,i[a],s[a])}return i}function Iq(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function kq(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),o=Ud(0,o,l-1),o}function Tq(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),a>0?o=Ud(0,o,l):o=Ud(-1,o,l-1),o}function kD(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function TD(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function zB(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(o=>{L(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(s).fill(-1):typeof n=="number"?i=[n,...new Array(s-1).fill(-1)]:n.length<s?i=n.concat(new Array(s-n.length).fill(-1)):i=n,i=i.map((o,a)=>o>=0?o:(L(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function FD(t,e,n,r,s,i,o,a,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const A={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let v=0;v<A.dims;v++)u&&1<<v&a&&A.numAddAxisAfterEllipsis++,1<<v&o&&(u=!0);u||(A.ellipsisMask|=1<<A.dims,A.dims++);const d={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};QNe(A,d);let f=!0,h=!0,p=!0;const m=[],y=[];for(let v=0;v<t.length;++v){if(d.strides[v]===0)throw Error(`strides[${v}] must be non-zero`);const b=!!(d.shrinkAxisMask&1<<v),w=t[v];if(w===-1){m.push(b?1:-1);continue}const C=[d.beginMask&1<<v,d.endMask&1<<v],B=[d.strides[v]>0?0:-1,d.strides[v]>0?w:w-1];if(b&&d.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");p=p&&d.strides[v]===1;const S=!!(d.beginMask&1<<v&&d.endMask&1<<v);if(d.beginValid&&d.endValid){if(b){const U=d.begin[v]<0?w+d.begin[v]:d.begin[v];if(d.begin[v]=U,d.end[v]=d.begin[v]+1,U<0||U>=w)throw Error(`slice index ${d.begin[v]} of dimension ${v} out of bounds.`)}else d.begin[v]=w6(d.begin[v],0,d.strides[v],w,C,B),d.end[v]=w6(d.end[v],1,d.strides[v],w,C,B);const O=d.strides[v]===1&&d.begin[v]===0&&d.end[v]===w;f=f&&O,h=h&&(v===0&&d.strides[v]===1||O)}else f=f&&d.strides[v]===1&&S,h=h&&(v===0&&d.strides[v]===1||S);let N,k=!1;if(d.beginValid&&d.endValid?(N=d.end[v]-d.begin[v],k=!0):b?(N=1,k=!0):S&&w>=0&&(d.strides[v]<0?N=-w:N=w,k=!0),k){let O;N===0||N<0!=d.strides[v]<0?O=0:O=Math.trunc(N/d.strides[v])+(N%d.strides[v]!==0?1:0),m.push(O)}else m.push(-1)}for(let v=0;v<d.finalShapeGatherIndices.length;++v){const b=d.finalShapeGatherIndices[v];b>=0?y.push(m[b]):b===Qk&&y.push(1)}return{finalShapeSparse:y.filter((v,b)=>d.finalShapeGatherIndices[b]!==Qk),finalShape:y,isIdentity:f,sliceDim0:h,isSimpleSlice:p,begin:d.begin,end:d.end,strides:d.strides}}function QNe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(Qk),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(LNe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function w6(t,e,n,r,s,i){if(s[e])return n>0?i[e]:i[e+1&1];{const o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}}const HNe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:ED,computeFlatOffset:TD,computeOutShape:ID,getNormalizedAxes:MNe,isSliceContinous:kD,maskToAxes:jNe,parseSliceParams:zB,sliceInfo:FD,startForAxis:kq,startIndicesWithElidedDims:Nq,stopForAxis:Tq,stopIndicesWithElidedDims:Eq,stridesForAxis:Iq,stridesWithElidedDims:Cq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zNe{static sgd(e){return new CD(e)}static momentum(e,n,r=!1){return new fq(e,n,r)}static rmsprop(e,n=.9,r=0,s=null,i=!1){return new hq(e,n,r,s,i)}static adam(e=.001,n=.9,r=.999,s=null){return new Aq(e,n,r,s)}static adadelta(e=.001,n=.95,r=null){return new cq(e,n,r)}static adamax(e=.002,n=.9,r=.999,s=null,i=0){return new dq(e,n,r,s,i)}static adagrad(e,n=.1){return new uq(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lf=zNe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VNe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function Fq(){return new Promise(t=>VNe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $D(t,e){const n=t[0].length;t.forEach((s,i)=>{L(s.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),L(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,i)=>{for(let o=0;o<n;o++)L(o===e||s[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function cl(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Aa;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Aa||(Aa={}));function $q(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const i=n[s],o=r[r.length-n.length+s],a=r[o];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${i} but shape[${s+t}] = ${a}`)}else r[o]=i}return r}function _q(t){const e={FIRST_DIM_SIZE:Aa.FIRST_DIM_SIZE,VALUE_ROWIDS:Aa.VALUE_ROWIDS,ROW_LENGTHS:Aa.ROW_LENGTHS,ROW_SPLITS:Aa.ROW_SPLITS,ROW_LIMITS:Aa.ROW_LIMITS,ROW_STARTS:Aa.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function Oq(t){return t.length===0?0:t[0]===Aa.FIRST_DIM_SIZE?t.length-1:t.length}function Dq(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const i=t[s],o=e[s+1];if(i>=0&&o>=0&&i!==1&&i!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${i} but ragged tensor input.flatValues.shape[${s-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _D=30;function VB(t){return t<=_D?t:bk(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OD(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dv(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const i=e.length;for(let o=0;o<i;++o)s=s.concat([t[o+1]/e[o],e[o]]);s=s.concat(t.slice(i+1))}return s}function fv(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],i=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?i.push(o):s.push(o);r.push(...s),r.push(0),r.push(...i)}return r}function hv(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?s.push(e[i-1]*t[i]):s.push(t[i]/e[i-1]):s.push(t[i]);return s}function DD(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function RD(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WB=1.7580993408473768,GB=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PD=.3275911,UD=.254829592,LD=-.284496736,jD=1.421413741,MD=-1.453152027,QD=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pc(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function Rq(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function Pq(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function Uq(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function HD(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function Lq(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function jq(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const i=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:n,imag:r}}function Mq(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),i=Math.sin(r);return{real:s,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O4="->",WNe=/->/g,C6=",",S6="...";function zD(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(WNe,"").length)/O4.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${O4}").`);const[r,s]=t.split(O4);L(r.indexOf(S6)===-1,()=>`The ellipsis notation ("${S6}") is not supported yet.`);const i=r.split(C6),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let d=0;d<s.length;++d){const f=s[d];if(!i.some(h=>h.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);a.indexOf(f)===-1&&a.push(f)}for(let d=0;d<r.length;++d){const f=r[d];a.indexOf(f)===-1&&f!==C6&&a.push(f)}const l=new Array(i.length);for(let d=0;d<o;++d){if(new Set(i[d].split("")).size!==i[d].length)throw new Error(`Found duplicate axes in input component ${i[d]}. Support for duplicate axes in input is not implemented yet.`);l[d]=[];for(let f=0;f<i[d].length;++f)l[d].push(a.indexOf(i[d][f]))}const c=a.length,u=s.length,A=[];for(let d=u;d<c;++d)A.push(d);return{allDims:a,summedDims:A,idDims:l}}function VD(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function WD(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const i=n[s].shape;for(let o=0;o<e[s].length;++o)r[e[s][o]]===void 0?r[e[s][o]]=i[o]:L(r[e[s][o]]===i[o],()=>`Expected dimension ${r[e[s][o]]} at axis ${o} of input shaped ${JSON.stringify(i)}, but got dimension ${i[o]}`)}}function GD(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let o=0;o<s;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const a=n[o],l=GNe(e,a);for(const c of l)i.indexOf(c)===-1&&(r[o].push(c),i.push(c))}return{path:n,steps:r}}function KD(t){return t.every((e,n)=>e===n)}function GNe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function XD(t,e,n=0){let r=[];if(typeof e=="number")L(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);L(s<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[i]=t.shape[n]-o}L(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qq(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function Hq(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function zq(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vq(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function Wq(t,e){return`size ${t} must be non-negative, not ${e}`}function Gq(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Kq(t,e){const n=ge(t),r=ge(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function Xq(t,e){const n=ge(t),r=ge(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hk(){return"segment ids must be >= 0"}function qq(){return"segment ids are not increasing"}function Yq(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function Jq(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zq(t,e){let n=!1,r;for(t<=_D?(r=t,n=!0):r=bk(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=bk(t,r+1);return r}function eY(t,e,n){const r=[],s=t.length;for(let i=0;i<s;i++)i!==e?r.push(t[i]):r.push(n);return r}function qD(t,e,n,r){const s=e.shape.length,i=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let A=0;A<r;++A)if(t.shape[A]!==e.shape[A])throw new Error(`x.shape[${A}]: ${t.shape[A]} should be equal to indices.shape[${A}]: ${e.shape[A]}.`);const o=t.shape[n],a=[];let l=1,c=1,u=1;for(let A=0;A<r;++A)a.push(t.shape[A]),l*=t.shape[A];for(let A=r;A<n;A++)a.push(t.shape[A]),c*=t.shape[A];for(let A=r;A<s;A++)a.push(e.shape[A]);for(let A=n+1;A<i;A++)a.push(t.shape[A]),u*=t.shape[A];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:o,outputShape:a}}const KNe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:qD,computeOutShape:eY,segOpComputeOptimalWindowSize:Zq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mc(t){try{return t.map(e=>Hu(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function tY(t){return t.map(e=>$u(e))}const XNe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:UD,ERF_A2:LD,ERF_A3:jD,ERF_A4:MD,ERF_A5:QD,ERF_P:PD,PARALLELIZE_THRESHOLD:_D,get RowPartitionType(){return Aa},SELU_SCALE:GB,SELU_SCALEALPHA:WB,applyActivation:QB,assertAndGetBroadcastShape:vt,assertAxesAreInnerMostDims:is,assertParamsConsistent:$D,assignToTypedArray:Lq,axesAreInnerMostDims:HO,calculateShapes:df,checkEinsumDimSizes:WD,checkPadOnDimRoundingMode:Hs,combineLocations:EX,combineRaggedTensorToTensorShapes:$q,complexWithEvenIndex:Pq,complexWithOddIndex:Uq,computeConv2DInfo:zr,computeConv3DInfo:cA,computeDefaultPad:RO,computeDilation2DInfo:iv,computeOptimalWindowSize:VB,computeOutAndReduceShapes:Vr,computeOutShape:cl,computePool2DInfo:Go,computePool3DInfo:Nc,convertConv2DDataFormat:Ec,decodeEinsumEquation:zD,eitherStridesOrDilationsAreOne:ss,expandShapeToKeepDim:or,exponent:Mq,exponents:jq,fromStringArrayToUint8:tY,fromUint8ToStringArray:mc,getAxesPermutation:Hn,getBroadcastDims:op,getComplexWithIndex:HD,getEinsumComputePath:GD,getEinsumPermutation:VD,getFusedBiasGradient:MB,getFusedDyActivation:jB,getImageCenter:OD,getInnerMostAxes:ar,getPermuted:fv,getRaggedRank:Oq,getReductionAxes:Fr,getReshaped:dv,getReshapedPermuted:hv,getRowPartitionTypesHelper:_q,getSliceBeginCoords:DD,getSliceSize:RD,getSparseFillEmptyRowsIndicesDenseShapeMismatch:Qq,getSparseFillEmptyRowsNegativeIndexErrorMessage:Hq,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:zq,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:Gq,getSparseReshapeInputOutputMismatchErrorMessage:Xq,getSparseReshapeInputOutputMultipleErrorMessage:Kq,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:Vq,getSparseReshapeNegativeOutputDimErrorMessage:Wq,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:Jq,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:Hk,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:qq,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:Yq,getUndoAxesPermutation:uA,isIdentityPermutation:KD,log:U1e,mergeRealAndImagArrays:pc,prepareAndValidate:ND,prepareSplitSize:XD,segment_util:KNe,shouldFuse:HB,slice_util:HNe,splitRealAndImagArrays:Rq,stridesOrDilationsArePositive:zd,tupleValuesAreOne:Wu,upcastType:_i,validateDefaultValueShape:Dq,validateInput:fD,validateUpdateShape:KX,warn:qi},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xNe();/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qNe=fe();qNe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var fi;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(fi||(fi={}));var B6;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(B6||(B6={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YNe={};function nY(t){return YNe[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T(t,e,n,r,s){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const a=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd,c=a<0?e.inputNames.length+a:a;if(i.type==="tensor")return Jr(e.inputNames[c],n,r,s);if(i.type==="tensors"){const d=e.inputs.slice(a,l);return e.inputNames.slice(a,l).filter((h,p)=>{var m;return((m=d[p])===null||m===void 0?void 0:m.op)!=="NoOp"}).map(h=>Jr(h,n,r,s))}const u=Jr(e.inputNames[c],n,r,s),A=u.dataSync();return i.type==="number"?A[0]:Ro(u.shape,A)}const o=e.attrParams[t];return o&&o.value}function Jr(t,e,n,r){const[s,i]=hi(t,n);if(r!=null){const a=r.getHashTableHandleByName(s);if(a!=null)return a}const o=n.currentContextIds.find(a=>!!e[u2(s,a)]);return o!==void 0?e[u2(s,o)][i]:void 0}function N6(t,e,n){return e[u2(t,n.currentContextId)]}function jl(t,e){const[n,r,s]=hi(t,e);return[u2(n,e&&e.currentContextId),r,s]}function u2(t,e){return e?`${t}-${e}`:t}function hi(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const i=e.parseNodeNameCache.get(t);if(i!=null)return i}const r=t.split(":");let s;if(r.length===1)s=[t,0,void 0];else{const i=r[0],o=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);s=[i,a,o]}return n&&e.parseNodeNameCache.set(t,s),s}function iw(t,e,n){let r=T("pad",t,e,n);if(r==="explicit"){r=T("explicitPaddings",t,e,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)s[i][0]=r[i*2],s[i][1]=r[i*2+1];return s}return r}function Ml(t){return t.kept?t:rc(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JNe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],ZNe=Object.freeze(Object.defineProperty({__proto__:null,json:JNe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e4e=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],t4e=Object.freeze(Object.defineProperty({__proto__:null,json:e4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n4e=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],r4e=Object.freeze(Object.defineProperty({__proto__:null,json:n4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s4e=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],i4e=Object.freeze(Object.defineProperty({__proto__:null,json:s4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o4e=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],a4e=Object.freeze(Object.defineProperty({__proto__:null,json:o4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l4e=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],c4e=Object.freeze(Object.defineProperty({__proto__:null,json:l4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u4e=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],A4e=Object.freeze(Object.defineProperty({__proto__:null,json:u4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d4e=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],f4e=Object.freeze(Object.defineProperty({__proto__:null,json:d4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h4e=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],p4e=Object.freeze(Object.defineProperty({__proto__:null,json:h4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m4e=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],g4e=Object.freeze(Object.defineProperty({__proto__:null,json:m4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y4e=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],x4e=Object.freeze(Object.defineProperty({__proto__:null,json:y4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v4e=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],b4e=Object.freeze(Object.defineProperty({__proto__:null,json:v4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w4e=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],C4e=Object.freeze(Object.defineProperty({__proto__:null,json:w4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S4e=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],B4e=Object.freeze(Object.defineProperty({__proto__:null,json:S4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N4e=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],E4e=Object.freeze(Object.defineProperty({__proto__:null,json:N4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I4e=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],k4e=Object.freeze(Object.defineProperty({__proto__:null,json:I4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T4e=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],F4e=Object.freeze(Object.defineProperty({__proto__:null,json:T4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $4e=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],_4e=Object.freeze(Object.defineProperty({__proto__:null,json:$4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O4e=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],D4e=Object.freeze(Object.defineProperty({__proto__:null,json:O4e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E6{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[ZNe,t4e,r4e,i4e,a4e,c4e,A4e,f4e,p4e,g4e,x4e,b4e,C4e,B4e,E4e,k4e,F4e,_4e,D4e],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(e,n={}){const r=e.node,s=[],i=[],o=[],a=r.reduce((p,m)=>(p[m.name]=this.mapNode(m),m.op.startsWith("Placeholder")?s.push(p[m.name]):m.op==="Const"?i.push(p[m.name]):(m.input==null||m.input.length===0)&&o.push(p[m.name]),p),{});let l=[];const c=[];let u={},A={};n!=null&&(u=this.mapSignatureEntries(n.inputs),A=this.mapSignatureEntries(n.outputs));const d=Object.keys(a);d.forEach(p=>{const m=a[p];m.inputNames.forEach((y,x)=>{const[v,,b]=jl(y),w=a[v];if(w.outputs!=null){const C=w.outputs.indexOf(b);if(C!==-1){const B=`${v}:${C}`;m.inputNames[x]=B}}m.inputs.push(w),w.children.push(m)})}),Object.keys(A).length===0?d.forEach(p=>{const m=a[p];m.children.length===0&&c.push(m)}):Object.keys(A).forEach(p=>{const[m]=jl(p),y=a[m];y!=null&&(y.signatureKey=A[p],c.push(y))}),Object.keys(u).length>0?Object.keys(u).forEach(p=>{const[m]=jl(p),y=a[m];y&&(y.signatureKey=u[p],l.push(y))}):l=s;let f={};e.library!=null&&e.library.function!=null&&(f=e.library.function.reduce((p,m)=>(p[m.signature.name]=this.mapFunction(m),p),{}));const h={nodes:a,inputs:l,outputs:c,weights:i,placeholders:s,signature:n,functions:f};return o.length>0&&(h.initNodes=o),h}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=nY(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((s,i)=>(s[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},s),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((s,i)=>{const o=i.type;let a;switch(i.type){case"string":a=zk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=zk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=Yk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Yk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=Wk(e.attr,i.tfName,i.defaultValue||0),a===void 0&&i.tfDeprecatedName&&(a=Wk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=qk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=qk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=Vk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Vk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=Zk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Zk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=Xk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Xk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=Jk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Jk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=Gk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Gk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=Kk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Kk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=I6(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=I6(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return s[i.name]={value:a,type:o},s},{})),r}mapFunction(e){const n=e.nodeDef,r=[],s=[];let i={};n!=null&&(i=n.reduce((A,d)=>(A[d.name]=this.mapNode(d),d.op==="Const"&&s.push(A[d.name]),A),{}));const o=[],a=[];e.signature.inputArg.forEach(A=>{const[d]=jl(A.name),f={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:YD(A.type),type:"dtype"}},children:[]};f.signatureKey=A.name,o.push(f),i[d]=f}),Object.keys(i).forEach(A=>{const d=i[A];d.inputNames.forEach((f,h)=>{const[p,,m]=jl(f),y=i[p];if(y.outputs!=null){const x=y.outputs.indexOf(m);if(x!==-1){const v=`${p}:${x}`;d.inputNames[h]=v}}d.inputs.push(y),y.children.push(d)})});const c=e.ret;e.signature.outputArg.forEach(A=>{const[d,f]=jl(c[A.name]),h=i[d];h!=null&&(h.defaultOutput=f,a.push(h))});const u=this.mapArgsToSignature(e);return{nodes:i,inputs:o,outputs:a,weights:s,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function R4e(t){const e=fe().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function rY(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):R4e(t);return e?n:n.toLowerCase()}function zk(t,e,n,r=!1){const s=t[e];return s!=null?rY(s.s,r):n}function Vk(t,e,n){const r=t[e];return r?r.b:n}function Wk(t,e,n){const r=t[e]||{},s=r.i!=null?r.i:r.f!=null?r.f:n;return typeof s=="number"?s:parseInt(s,10)}function YD(t){switch(typeof t=="string"&&(t=fi[t]),t){case fi.DT_FLOAT:case fi.DT_HALF:return"float32";case fi.DT_INT32:case fi.DT_INT64:case fi.DT_INT8:case fi.DT_UINT8:return"int32";case fi.DT_BOOL:return"bool";case fi.DT_DOUBLE:return"float32";case fi.DT_STRING:return"string";case fi.DT_COMPLEX64:case fi.DT_COMPLEX128:return"complex64";default:return null}}function I6(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function Gk(t,e,n){const r=t[e];return r&&r.type?YD(r.type):n}function Kk(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(s=>YD(s)):n}function sY(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function Xk(t,e,n){const r=t[e];return r&&r.shape?sY(r.shape):n}function qk(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):n}function Yk(t,e,n,r=!1){const s=t[e];return s&&s.list&&s.list.s?s.list.s.map(i=>rY(i,r)):n}function Jk(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(s=>sY(s)):n}function Zk(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P4e{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(s=>this.getInput(s)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((s,i)=>(s[i]=this.getAttr(i),s),{}))}getInput(e){return Jr(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return Jr(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return Wk(this.node.rawAttrs,e,n);if(r.s!=null)return zk(this.node.rawAttrs,e,n);if(r.b!=null)return Vk(this.node.rawAttrs,e,n);if(r.shape!=null)return Xk(this.node.rawAttrs,e,n);if(r.type!=null)return Gk(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return qk(this.node.rawAttrs,e,n);if(r.list.s!=null)return Yk(this.node.rawAttrs,e,n);if(r.list.shape!=null)return Jk(this.node.rawAttrs,e,n);if(r.list.b!=null)return Zk(this.node.rawAttrs,e,n);if(r.list.type!=null)return Kk(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const os=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:UK,abs:vr,acos:nX,acosh:rX,add:Ee,addN:ewe,all:DO,any:l2,argMax:ip,argMin:sX,asin:iX,asinh:oX,atan:aX,atan2:lX,atanh:cX,avgPool:wB,avgPool3d:uX,basicLSTMCell:Cwe,batchNorm:ov,batchNorm2d:AX,batchNorm3d:dX,batchNorm4d:fX,batchToSpaceND:CB,bincount:hX,bitwiseAnd:$we,booleanMaskAsync:hBe,broadcastArgs:Owe,broadcastTo:Th,buffer:St,cast:Pe,ceil:pX,clipByValue:ii,clone:rc,complex:zu,concat:qn,concat1d:mX,concat2d:gX,concat3d:yX,concat4d:xX,conv1d:PO,conv2d:Gu,conv2dTranspose:LO,conv3d:vX,conv3dTranspose:wX,cos:SB,cosh:jO,cosineWindow:gD,cumprod:c2,cumsum:MO,denseBincount:Lk,depthToSpace:CX,depthwiseConv2d:av,diag:r2e,dilation2d:SX,div:ze,divNoNan:BX,dot:NX,dropout:ZX,einsum:qf,elu:lv,enclosingPowerOfTwo:eq,ensureShape:f2e,equal:Ba,erf:QO,euclideanNorm:kX,exp:js,expandDims:wr,expm1:TX,eye:zO,fft:UB,fill:tm,floor:uv,floorDiv:OO,fused:RBe,gather:Av,gatherND:SBe,greater:Li,greaterEqual:AA,ifft:e0,imag:BB,image:ti,inTopKAsync:IBe,irfft:AD,isFinite:FX,isInf:$X,isNaN:_X,leakyRelu:NB,less:Yy,lessEqual:cf,linalg:lq,linspace:L2e,localResponseNormalization:OX,log:no,log1p:EB,logSigmoid:DX,logSoftmax:VO,logSumExp:IB,logicalAnd:hl,logicalNot:kB,logicalOr:WO,logicalXor:RX,losses:fNe,lowerBound:tCe,matMul:$t,max:Po,maxPool:TB,maxPool3d:PX,maxPoolWithArgmax:iCe,maximum:Ic,mean:Kn,meshgrid:lCe,min:qy,minimum:Wd,mirrorPad:UX,mod:LX,moments:FB,movingAverage:gBe,mul:ne,multiRNNCell:hCe,multinomial:mCe,neg:In,norm:cv,notEqual:ap,oneHot:KO,ones:Bi,onesLike:ro,op:ee,outerProduct:bCe,pad:dA,pad1d:SCe,pad2d:NCe,pad3d:ICe,pad4d:TCe,pool:jX,pow:fc,prelu:_B,print:tX,prod:MX,raggedGather:UCe,raggedRange:jCe,raggedTensorToTensor:QCe,rand:zCe,randomGamma:uSe,randomNormal:nD,randomStandardNormal:fSe,randomUniform:Af,randomUniformInt:mSe,range:lp,real:Jy,reciprocal:HX,relu:vl,relu6:rD,reshape:oe,reverse:Qo,reverse1d:CSe,reverse2d:BSe,reverse3d:ESe,reverse4d:kSe,rfft:LB,round:sD,rsqrt:iD,scalar:at,scatterND:xBe,searchSorted:GO,selu:oD,separableConv2d:aD,setdiff1dAsync:DSe,sigmoid:xa,sign:zX,signal:dNe,sin:lD,sinh:cD,slice:ct,slice1d:DB,slice2d:uD,slice3d:RB,slice4d:Zy,softmax:PB,softplus:nm,spaceToBatchND:$B,sparse:hNe,sparseToDense:wBe,spectral:ANe,split:$i,sqrt:rs,square:fn,squaredDifference:dD,squeeze:Wn,stack:Oi,step:rm,stridedSlice:VX,string:pNe,sub:We,sum:Je,tan:WX,tanh:Vd,tensor:ya,tensor1d:mr,tensor2d:_u,tensor3d:GX,tensor4d:tBe,tensor5d:nBe,tensor6d:rBe,tensorScatterUpdate:iBe,tile:Fo,topk:XX,transpose:Ut,truncatedNormal:hD,unique:qX,unsortedSegmentSum:pD,unstack:Ho,upperBound:ABe,variable:YX,where:ys,whereAsync:JX,zeros:Sr,zerosLike:Lt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U4e=(t,e,n,r=os)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(T("a",t,e,n),T("b",t,e,n))];case"AddN":return[r.addN(T("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(T("a",t,e,n),T("b",t,e,n))];case"Mul":return[r.mul(T("a",t,e,n),T("b",t,e,n))];case"RealDiv":case"Div":return[r.div(T("a",t,e,n),T("b",t,e,n))];case"DivNoNan":return[r.divNoNan(T("a",t,e,n),T("b",t,e,n))];case"FloorDiv":return[r.floorDiv(T("a",t,e,n),T("b",t,e,n))];case"Sub":return[r.sub(T("a",t,e,n),T("b",t,e,n))];case"Minimum":return[r.minimum(T("a",t,e,n),T("b",t,e,n))];case"Maximum":return[r.maximum(T("a",t,e,n),T("b",t,e,n))];case"Pow":return[r.pow(T("a",t,e,n),T("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(T("a",t,e,n),T("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L4e=(t,e,n,r=os)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(T("x",t,e,n))];case"Acos":return[r.acos(T("x",t,e,n))];case"Acosh":return[r.acosh(T("x",t,e,n))];case"Asin":return[r.asin(T("x",t,e,n))];case"Asinh":return[r.asinh(T("x",t,e,n))];case"Atan":return[r.atan(T("x",t,e,n))];case"Atan2":return[r.atan2(T("x",t,e,n),T("y",t,e,n))];case"Atanh":return[r.atanh(T("x",t,e,n))];case"Ceil":return[r.ceil(T("x",t,e,n))];case"Complex":return[r.complex(T("real",t,e,n),T("imag",t,e,n))];case"Cos":return[r.cos(T("x",t,e,n))];case"Cosh":return[r.cosh(T("x",t,e,n))];case"Elu":return[r.elu(T("x",t,e,n))];case"Erf":return[r.erf(T("x",t,e,n))];case"Exp":return[r.exp(T("x",t,e,n))];case"Expm1":return[r.expm1(T("x",t,e,n))];case"Floor":return[r.floor(T("x",t,e,n))];case"Log":return[r.log(T("x",t,e,n))];case"Log1p":return[r.log1p(T("x",t,e,n))];case"Imag":return[r.imag(T("x",t,e,n))];case"Neg":return[r.neg(T("x",t,e,n))];case"Reciprocal":return[r.reciprocal(T("x",t,e,n))];case"Real":return[r.real(T("x",t,e,n))];case"Relu":return[r.relu(T("x",t,e,n))];case"Round":return[r.round(T("x",t,e,n))];case"Selu":return[r.selu(T("x",t,e,n))];case"Sigmoid":return[r.sigmoid(T("x",t,e,n))];case"Sin":return[r.sin(T("x",t,e,n))];case"Sign":return[r.sign(T("x",t,e,n))];case"Sinh":return[r.sinh(T("x",t,e,n))];case"Softplus":return[r.softplus(T("x",t,e,n))];case"Sqrt":return[r.sqrt(T("x",t,e,n))];case"Square":return[r.square(T("x",t,e,n))];case"Tanh":return[r.tanh(T("x",t,e,n))];case"Tan":return[r.tan(T("x",t,e,n))];case"ClipByValue":return[r.clipByValue(T("x",t,e,n),T("clipValueMin",t,e,n),T("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(T("x",t,e,n))];case"Rsqrt":return[r.rsqrt(Jr(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(T("x",t,e,n),T("alpha",t,e,n))];case"Prelu":return[r.prelu(T("x",t,e,n),T("alpha",t,e,n))];case"IsNan":return[r.isNaN(Jr(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(Jr(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(Jr(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xo(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){L(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const s=t[r],i=e[r];L(s<0||i<0||s===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function k6(t){return!(typeof t=="number"||t.some(e=>e<0))}function og(t,e,n){let r=eT(t,n);const s=!k6(r);if(s&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&e.forEach(i=>{r=eT(i.shape,r)}),!k6(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function eT(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const s=t[r],i=e[r];if(s>=0&&i>=0&&s!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=s>=0?s:i}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j4e{constructor(e,n,r,s,i,o,a){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=at(0),Mr(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),xo(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,Mr(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,s)=>this.write(r,n[s]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let s=0;s<this.size();s++)e.push(s)}if(e.length===0)return ya([],[0].concat(this.elementShape));const r=this.readMany(e);return xo(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Oi(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return ya([],[0].concat(this.elementShape));const n=[];for(let s=0;s<this.size();s++)n.push(s);const r=this.readMany(n);return xo(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),qn(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Ho(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const s=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,o=[];ce(()=>{n=oe(n,[1,r,i]);for(let l=0;l<e.length;++l){const u=[0,l===0?0:s[l-1],0],A=[1,e[l],i];o[l]=oe(ct(n,u,A),this.elementShape)}return o});const a=[];for(let l=0;l<e.length;l++)a[l]=l;this.writeMany(a,o)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kd{get id(){return this.idTensor.id}constructor(e,n,r,s=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);xo(n,i.shape,"TensorList shape mismatch: "),Mr(i)}),this.idTensor=at(0),this.maxNumElements=s,Mr(this.idTensor)}copy(){return new Kd([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);xo(e,this.elementShape,"TensorList shape mismatch: ");const s=og(this.elementShape,this.tensors,e);return ce(()=>{const i=this.tensors.map(o=>oe(o,s));return Oi(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=og(this.elementShape,this.tensors,e),s=this.tensors.pop();return s.kept=!1,xo(s.shape,e,"TensorList shape mismatch: "),oe(s,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(xo(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Mr(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new Kd([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);xo(this.tensors[e].shape,n,"TensorList shape mismatch: ");const s=og(this.elementShape,this.tensors,n);return oe(this.tensors[e],s)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);xo(this.elementShape,n.shape,"TensorList shape mismatch: "),Mr(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);xo(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const s=og(this.elementShape,this.tensors,r);return e.length===0?ya([],[0].concat(s)):ce(()=>{const i=e.map(o=>oe(this.tensors[o],s));return Oi(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);xo(this.elementShape,n,"TensorList shape mismatch: ");const r=og(this.elementShape,this.tensors,n);return this.size()===0?ya([],[0].concat(r)):ce(()=>{const s=this.tensors.map(i=>oe(i,r));return qn(s,0)})}}function M4e(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const s=t.shape.slice(1);xo(s,e,"TensorList shape mismatch: ");const i=Ho(t);return new Kd(i,e,r)}function Q4e(t,e,n,r){return new Kd([],t,e,r)}function H4e(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const s=Math.max(...e);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const i=new Kd([],n,t.dtype,r),o=Ho(t,0);return e.forEach((a,l)=>{i.setItem(a,o[l])}),i}function z4e(t,e,n){let r=0;const s=e.map(u=>(r+=u,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),o=eT(i,n),a=r===0?0:t.size/r,l=ce(()=>{const u=[];t=oe(t,[1,r,a]);for(let A=0;A<e.length;++A){const f=[0,A===0?0:s[A-1],0],h=[1,e[A],a];u[A]=oe(ct(t,f,h),o)}return t.dispose(),u}),c=new Kd([],n,t.dtype,e.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V4e=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=T("thenBranch",t,e,n),s=T("elseBranch",t,e,n),i=T("cond",t,e,n),o=T("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[s].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=T("body",t,e,n),s=T("cond",t,e,n),i=T("args",t,e,n),o=await n.functionMap[s].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),a=i.map(u=>u.id);let l=await o[0].data();o.forEach(u=>{!u.kept&&a.indexOf(u.id)===-1&&u.dispose()});let c=i;for(;l[0];){const u=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const A=c.map(f=>f.id);u.forEach(f=>{!f.kept&&a.indexOf(f.id)===-1&&A.indexOf(f.id)===-1&&f.dispose()});const d=await n.functionMap[s].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await d[0].data(),d.forEach(f=>{!f.kept&&a.indexOf(f.id)===-1&&A.indexOf(f.id)===-1&&f.dispose()})}return c}case"LoopCond":{const r=T("pred",t,e,n);return[Ml(r)]}case"Switch":{const r=T("pred",t,e,n);let s=T("data",t,e,n);return s.kept||(s=Ml(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=t.inputNames.find(s=>Jr(s,e,n)!==void 0);if(r){const s=Jr(r,e,n);return[Ml(s)]}return}case"Enter":{const r=T("frameName",t,e,n),s=T("tensor",t,e,n);return n.enterFrame(r),[Ml(s)]}case"Exit":{const r=T("tensor",t,e,n);return n.exitFrame(),[Ml(r)]}case"NextIteration":{const r=T("tensor",t,e,n);return n.nextIteration(),[Ml(r)]}case"TensorArrayV3":{const r=T("size",t,e,n),s=T("dtype",t,e,n),i=T("elementShape",t,e,n),o=T("dynamicSize",t,e,n),a=T("clearAfterRead",t,e,n),l=T("identicalElementShapes",t,e,n),c=T("name",t,e,n),u=new j4e(c,s,r,i,l,o,a);return n.addTensorArray(u),[u.idTensor,at(1)]}case"TensorArrayWriteV3":{const r=T("tensorArrayId",t,e,n),s=T("index",t,e,n),i=T("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(s,i),[o.idTensor]}case"TensorArrayReadV3":{const r=T("tensorArrayId",t,e,n),s=T("index",t,e,n);return[n.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=T("tensorArrayId",t,e,n),s=T("indices",t,e,n),i=T("dtype",t,e,n);return[n.getTensorArray(r.id).gather(s,i)]}case"TensorArrayScatterV3":{const r=T("tensorArrayId",t,e,n),s=T("indices",t,e,n),i=T("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(s,i),[o.idTensor]}case"TensorArrayConcatV3":{const r=T("tensorArrayId",t,e,n),s=n.getTensorArray(r.id),i=T("dtype",t,e,n);return[s.concat(i)]}case"TensorArraySplitV3":{const r=T("tensorArrayId",t,e,n),s=T("tensor",t,e,n),i=T("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(i,s),[o.idTensor]}case"TensorArraySizeV3":{const r=T("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return[at(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=T("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=T("tensorListId",t,e,n),s=T("index",t,e,n),i=T("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(s,i),[o.idTensor]}case"TensorListGetItem":{const r=T("tensorListId",t,e,n),s=T("index",t,e,n),i=T("elementShape",t,e,n),o=T("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(s,i,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=T("indices",t,e,n),s=T("tensor",t,e,n),i=T("elementShape",t,e,n),o=T("numElements",t,e,n),a=H4e(s,r,i,o);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=T("elementShape",t,e,n),s=T("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const o=T(i,t,e,n),a=t.op==="TensorListReserve"?-1:o,l=Q4e(r,s,o,a);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=T("tensorListId",t,e,n),s=T("indices",t,e,n),i=T("elementShape",t,e,n),o=T("elementDType",t,e,n);return[n.getTensorList(r.id).gather(s,o,i)]}case"TensorListStack":{const r=T("tensorListId",t,e,n),s=T("elementShape",t,e,n),i=T("elementDType",t,e,n),o=T("numElements",t,e,n);return[n.getTensorList(r.id).stack(s,i,o)]}case"TensorListFromTensor":{const r=T("tensor",t,e,n),s=T("elementShape",t,e,n),i=T("elementDType",t,e,n),o=M4e(r,s,i);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=T("tensorListId",t,e,n),s=n.getTensorList(r.id),i=T("dtype",t,e,n),o=T("elementShape",t,e,n);return[s.concat(i,o)]}case"TensorListPushBack":{const r=T("tensorListId",t,e,n),s=T("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(s),[i.idTensor]}case"TensorListPopBack":{const r=T("tensorListId",t,e,n),s=T("elementShape",t,e,n),i=T("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(s,i)]}case"TensorListSplit":{const r=T("tensor",t,e,n),s=T("elementShape",t,e,n),i=T("lengths",t,e,n),o=z4e(r,i,s);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=T("tensorListId",t,e,n),s=n.getTensorList(r.id);return[at(s.size(),"int32")]}case"TensorListResize":{const r=T("tensorListId",t,e,n),s=T("size",t,e,n),o=n.getTensorList(r.id).resize(s);return n.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T6(t,e,n){const[r,s]=T("fusedOps",t,e,n),i=r==="biasadd",o=!i,a=s==="prelu",l=r==="fusedbatchnorm",c=T("numArgs",t,e,n);if(i){if(a&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=T("strides",t,e,n),A=iw(t,e,n),d=T("dataFormat",t,e,n).toUpperCase(),f=T("dilations",t,e,n);let[h,p]=T("args",t,e,n);o&&(p=h,h=void 0);const m=T("leakyreluAlpha",t,e,n);return{stride:u,pad:A,dataFormat:d,dilations:f,biasArg:h,preluArg:p,activationFunc:s,leakyreluAlpha:m}}const W4e=(t,e,n,r=os)=>{switch(t.op){case"Conv1D":{const s=T("stride",t,e,n),i=T("pad",t,e,n),o=T("dataFormat",t,e,n).toUpperCase(),a=T("dilation",t,e,n);return[r.conv1d(T("x",t,e,n),T("filter",t,e,n),s,i,o,a)]}case"Conv2D":{const s=T("strides",t,e,n),i=iw(t,e,n),o=T("dataFormat",t,e,n).toUpperCase(),a=T("dilations",t,e,n);return[r.conv2d(T("x",t,e,n),T("filter",t,e,n),[s[1],s[2]],i,o,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:s,pad:i,dataFormat:o,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:A}=T6(t,e,n);return[r.fused.conv2d({x:T("x",t,e,n),filter:T("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:A})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:i,dataFormat:o,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:A}=T6(t,e,n);return[r.fused.depthwiseConv2d({x:T("x",t,e,n),filter:T("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:A})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=T("outputShape",t,e,n),i=T("strides",t,e,n),o=iw(t,e,n);return[r.conv2dTranspose(T("x",t,e,n),T("filter",t,e,n),s,[i[1],i[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=T("strides",t,e,n),i=iw(t,e,n),o=T("dilations",t,e,n),a=T("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(T("input",t,e,n),T("filter",t,e,n),[s[1],s[2]],i,a,[o[1],o[2]])]}case"Conv3D":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("dataFormat",t,e,n).toUpperCase(),a=T("dilations",t,e,n);return[r.conv3d(T("x",t,e,n),T("filter",t,e,n),[s[1],s[2],s[3]],i,o,[a[1],a[2],a[3]])]}case"AvgPool":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("kernelSize",t,e,n);return[r.avgPool(T("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i)]}case"MaxPool":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("kernelSize",t,e,n);return[r.maxPool(T("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i)]}case"MaxPoolWithArgmax":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("kernelSize",t,e,n),a=T("includeBatchInIndex",t,e,n),{result:l,indexes:c}=r.maxPoolWithArgmax(T("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i,a);return[l,c]}case"AvgPool3D":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("kernelSize",t,e,n);return[r.avgPool3d(T("x",t,e,n),[o[1],o[2],o[3]],[s[1],s[2],s[3]],i)]}case"MaxPool3D":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("kernelSize",t,e,n);return[r.maxPool3d(T("x",t,e,n),[o[1],o[2],o[3]],[s[1],s[2],s[3]],i)]}case"Dilation2D":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("dilations",t,e,n),a=s[1],l=s[2],c=o[1],u=o[2];return[r.dilation2d(T("x",t,e,n),T("filter",t,e,n),[a,l],i,[c,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G4e=(t,e,n,r=os)=>{switch(t.op){case"Fill":{const s=T("shape",t,e,n),i=T("dtype",t,e,n),o=T("value",t,e,n);return[r.fill(s,o,i)]}case"LinSpace":{const s=T("start",t,e,n),i=T("stop",t,e,n),o=T("num",t,e,n);return[r.linspace(s,i,o)]}case"Multinomial":{const s=T("logits",t,e,n),i=T("numSamples",t,e,n),o=T("seed",t,e,n);return[r.multinomial(s,i,o)]}case"OneHot":{const s=T("indices",t,e,n),i=T("depth",t,e,n),o=T("onValue",t,e,n),a=T("offValue",t,e,n),l=T("dtype",t,e,n);return[r.oneHot(s,i,o,a,l)]}case"Ones":return[r.ones(T("shape",t,e,n),T("dtype",t,e,n))];case"OnesLike":return[r.onesLike(T("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(T("shape",t,e,n),T("dtype",t,e,n),T("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(T("shape",t,e,n),T("minval",t,e,n),T("maxval",t,e,n),T("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(T("shape",t,e,n),T("minval",t,e,n),T("maxval",t,e,n),T("seed",t,e,n))];case"Range":{const s=T("start",t,e,n),i=T("stop",t,e,n),o=T("step",t,e,n);return[r.range(s,i,o,T("dtype",t,e,n))]}case"TruncatedNormal":{const s=T("shape",t,e,n),i=T("mean",t,e,n),o=T("stdDev",t,e,n),a=T("seed",t,e,n);return[r.truncatedNormal(s,i,o,T("dtype",t,e,n),a)]}case"Zeros":return[r.zeros(T("shape",t,e,n),T("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(T("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D4(t,e,n){const r=T("boxes",t,e,n),s=T("scores",t,e,n),i=T("maxOutputSize",t,e,n),o=T("iouThreshold",t,e,n),a=T("scoreThreshold",t,e,n),l=T("softNmsSigma",t,e,n);return{boxes:r,scores:s,maxOutputSize:i,iouThreshold:o,scoreThreshold:a,softNmsSigma:l}}const K4e=async(t,e,n,r,s=os)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=D4(t,e,n),A=await s.image.nonMaxSuppressionWithScoreAsync(i,o,a,l,c,u);return[A.selectedIndices,A.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=D4(t,e,n),u=T("padToMaxOutputSize",t,e,n),A=await s.image.nonMaxSuppressionPaddedAsync(i,o,a,l,c,u);return[A.selectedIndices,A.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=D4(t,e,n);return[await s.image.nonMaxSuppressionAsync(i,o,a,l,c)]}case"Where":{const i=s.cast(T("condition",t,e,n),"bool"),o=[await s.whereAsync(i)];return i.dispose(),o}case"ListDiff":return s.setdiff1dAsync(T("x",t,e,n),T("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X4e=(t,e,n,r=os)=>{switch(t.op){case"LowerBound":{const s=T("sortedSequence",t,e,n),i=T("values",t,e,n);return[r.lowerBound(s,i)]}case"TopKV2":{const s=T("x",t,e,n),i=T("k",t,e,n),o=T("sorted",t,e,n),a=r.topk(s,i,o);return[a.values,a.indices]}case"UpperBound":{const s=T("sortedSequence",t,e,n),i=T("values",t,e,n);return[r.upperBound(s,i)]}case"Unique":{const s=T("x",t,e,n),i=r.unique(s);return[i.values,i.indices]}case"UniqueV2":{const s=T("x",t,e,n),i=T("axis",t,e,n),o=r.unique(s,i);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q4e=(t,e,n,r=os)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const s=T("default",t,e,n);return[Jr(t.name,e,n)||s];case"Placeholder":return[Jr(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const u=T("x",t,e,n);return[Ml(u)]}case"IdentityN":return T("x",t,e,n).map(u=>Ml(u));case"Snapshot":const i=T("x",t,e,n);return[Ml(i)];case"Shape":return[r.tensor1d(T("x",t,e,n).shape,"int32")];case"ShapeN":return T("x",t,e,n).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(T("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(T("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=T("x",t,e,n),a=T("data",t,e,n),l=T("message",t,e,n),c=T("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<a.length;u++)console.log(Array.prototype.slice.call(a[u].dataSync()).slice(0,c));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y4e{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=at(0),this.tensorMap=new Map,Mr(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return at(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),ce(()=>{const s=Ho(n),i=r.length,o=s.length;L(i===o,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${o} elements.`);for(let a=0;a<i;a++){const l=r[a],c=s[a];Mr(c),this.tensorMap.set(l,c)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return ce(()=>{const s=[];for(let i=0;i<r.length;i++){const o=r[i],a=this.findWithDefault(o,n);s.push(a)}return Oi(s)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J4e=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(t.name);if(s!=null)return[s];{const i=T("keyDType",t,e,n),o=T("valueDType",t,e,n),a=new Y4e(i,o);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=T("tableHandle",t,e,n,r),i=T("keys",t,e,n),o=T("values",t,e,n);return[await r.getHashTableById(s.id).import(i,o)]}case"LookupTableFind":case"LookupTableFindV2":{const s=T("tableHandle",t,e,n,r),i=T("keys",t,e,n),o=T("defaultValue",t,e,n);return[await r.getHashTableById(s.id).find(i,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=T("tableHandle",t,e,n,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4e=(t,e,n,r=os)=>{switch(t.op){case"ResizeBilinear":{const s=T("images",t,e,n),i=T("size",t,e,n),o=T("alignCorners",t,e,n),a=T("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(s,[i[0],i[1]],o,a)]}case"ResizeNearestNeighbor":{const s=T("images",t,e,n),i=T("size",t,e,n),o=T("alignCorners",t,e,n),a=T("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(s,[i[0],i[1]],o,a)]}case"CropAndResize":{const s=T("image",t,e,n),i=T("boxes",t,e,n),o=T("boxInd",t,e,n),a=T("cropSize",t,e,n),l=T("method",t,e,n),c=T("extrapolationValue",t,e,n);return[r.image.cropAndResize(s,i,o,a,l,c)]}case"ImageProjectiveTransformV3":{const s=T("images",t,e,n),i=T("transforms",t,e,n),o=T("outputShape",t,e,n),a=T("fillValue",t,e,n),l=T("interpolation",t,e,n),c=T("fillMode",t,e,n);return[r.image.transform(s,i,l.toLowerCase(),c.toLowerCase(),a,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eEe=(t,e,n,r=os)=>{switch(t.op){case"Equal":return[r.equal(T("a",t,e,n),T("b",t,e,n))];case"NotEqual":return[r.notEqual(T("a",t,e,n),T("b",t,e,n))];case"Greater":return[r.greater(T("a",t,e,n),T("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(T("a",t,e,n),T("b",t,e,n))];case"Less":return[r.less(T("a",t,e,n),T("b",t,e,n))];case"LessEqual":return[r.lessEqual(T("a",t,e,n),T("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(T("a",t,e,n),T("b",t,e,n))];case"LogicalNot":return[r.logicalNot(T("a",t,e,n))];case"LogicalOr":return[r.logicalOr(T("a",t,e,n),T("b",t,e,n))];case"Select":case"SelectV2":return[r.where(T("condition",t,e,n),T("a",t,e,n),T("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(T("a",t,e,n),T("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tEe=(t,e,n,r=os)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(T("a",t,e,n),T("b",t,e,n),T("transposeA",t,e,n),T("transposeB",t,e,n))];case"Einsum":return[r.einsum(T("equation",t,e,n),...T("tensors",t,e,n))];case"Transpose":return[r.transpose(T("x",t,e,n),T("perm",t,e,n))];case"_FusedMatMul":const[s,i]=T("fusedOps",t,e,n),o=s==="biasadd",a=i==="prelu",l=T("numArgs",t,e,n),c=T("leakyreluAlpha",t,e,n);if(o){if(a&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,A]=T("args",t,e,n);return[r.fused.matMul({a:T("a",t,e,n),b:T("b",t,e,n),transposeA:T("transposeA",t,e,n),transposeB:T("transposeB",t,e,n),bias:u,activation:i,preluActivationWeights:A,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(T("a",t,e,n),T("numLower",t,e,n),T("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nEe=(t,e,n,r=os)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(T("x",t,e,n),T("axis",t,e,n),T("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(T("x",t,e,n),T("mean",t,e,n),T("variance",t,e,n),T("offset",t,e,n),T("scale",t,e,n),T("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(T("x",t,e,n),T("mean",t,e,n),T("variance",t,e,n),T("offset",t,e,n),T("scale",t,e,n),T("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(T("x",t,e,n),T("radius",t,e,n),T("bias",t,e,n),T("alpha",t,e,n),T("beta",t,e,n))];case"Softmax":return[r.softmax(T("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(T("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rEe=(t,e,n,r=os)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:i}=r.raggedGather(T("paramsNestedSplits",t,e,n),T("paramsDenseValues",t,e,n),T("indices",t,e,n),T("outputRaggedRank",t,e,n));return s.concat(i)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:i}=r.raggedRange(T("starts",t,e,n),T("limits",t,e,n),T("splits",t,e,n));return[s,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(T("shape",t,e,n),T("values",t,e,n),T("defaultValue",t,e,n),T("rowPartitionTensors",t,e,n),T("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sEe=(t,e,n,r=os)=>{switch(t.op){case"Max":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.max(T("x",t,e,n),a,l)]}case"Mean":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.mean(T("x",t,e,n),a,l)]}case"Min":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.min(T("x",t,e,n),a,l)]}case"Sum":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.sum(T("x",t,e,n),a,l)]}case"All":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.all(T("x",t,e,n),a,l)]}case"Any":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.any(T("x",t,e,n),a,l)]}case"ArgMax":{const a=T("axis",t,e,n);return[r.argMax(T("x",t,e,n),a)]}case"ArgMin":{const a=T("axis",t,e,n);return[r.argMin(T("x",t,e,n),a)]}case"Prod":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.prod(T("x",t,e,n),a,l)]}case"Cumprod":{const a=T("axis",t,e,n),l=T("exclusive",t,e,n),c=T("reverse",t,e,n);return[r.cumprod(T("x",t,e,n),a,l,c)]}case"Cumsum":{const a=T("axis",t,e,n),l=T("exclusive",t,e,n),c=T("reverse",t,e,n);return[r.cumsum(T("x",t,e,n),a,l,c)]}case"Bincount":const s=T("x",t,e,n),i=T("weights",t,e,n),o=T("size",t,e,n);return[r.bincount(s,i,o)];case"DenseBincount":{const a=T("x",t,e,n),l=T("weights",t,e,n),c=T("size",t,e,n),u=T("binaryOutput",t,e,n);return[r.denseBincount(a,l,c,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iEe=(t,e,n,r=os)=>{switch(t.op){case"ConcatV2":case"Concat":{const s=T("n",t,e,n),i=T("axis",t,e,n);let o=T("tensors",t,e,n);return o=o.slice(0,s),[r.concat(o,i)]}case"Gather":{const s=T("x",t,e,n),i=T("indices",t,e,n);return[r.gather(s,r.cast(i,"int32"),0)]}case"GatherV2":{const s=T("axis",t,e,n),i=T("batchDims",t,e,n),o=T("x",t,e,n),a=T("indices",t,e,n);return[r.gather(o,r.cast(a,"int32"),s,i)]}case"Reverse":{const s=T("dims",t,e,n),i=[];for(let a=0;a<s.length;a++)s[a]&&i.push(a);const o=T("x",t,e,n);return[r.reverse(o,i)]}case"ReverseV2":{const s=T("axis",t,e,n),i=T("x",t,e,n);return[r.reverse(i,s)]}case"Slice":{const s=T("begin",t,e,n),i=T("size",t,e,n);return[r.slice(T("x",t,e,n),s,i)]}case"StridedSlice":{const s=T("begin",t,e,n),i=T("end",t,e,n),o=T("strides",t,e,n),a=T("beginMask",t,e,n),l=T("endMask",t,e,n),c=T("ellipsisMask",t,e,n),u=T("newAxisMask",t,e,n),A=T("shrinkAxisMask",t,e,n),d=T("x",t,e,n);return[r.stridedSlice(d,s,i,o,a,l,c,u,A)]}case"Pack":return ce(()=>{const s=T("axis",t,e,n),i=T("tensors",t,e,n),o=i[0].shape,a=r.squeeze(i[0]).shape,l=i.map(c=>{const u=_t(c.shape,o);if(!u&&!_t(r.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,o)});return[r.stack(l,s)]});case"Unpack":{const s=T("axis",t,e,n),i=T("tensor",t,e,n);return r.unstack(i,s)}case"Tile":{const s=T("reps",t,e,n);return[r.tile(T("x",t,e,n),s)]}case"Split":case"SplitV":{const s=T("axis",t,e,n),i=T("numOrSizeSplits",t,e,n),o=T("x",t,e,n);return r.split(o,i,s)}case"ScatterNd":{const s=T("indices",t,e,n),i=T("values",t,e,n),o=T("shape",t,e,n);return[r.scatterND(s,i,o)]}case"GatherNd":{const s=T("x",t,e,n),i=T("indices",t,e,n);return[r.gatherND(s,i)]}case"SparseToDense":{const s=T("sparseIndices",t,e,n),i=T("outputShape",t,e,n),o=T("sparseValues",t,e,n),a=T("defaultValue",t,e,n);return[r.sparseToDense(s,o,i,o.dtype===a.dtype?a:r.cast(a,o.dtype))]}case"TensorScatterUpdate":{const s=T("indices",t,e,n),i=T("values",t,e,n),o=T("tensor",t,e,n);return[r.tensorScatterUpdate(o,s,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oEe=(t,e,n,r=os)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:i,emptyRowIndicator:o,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(T("indices",t,e,n),T("values",t,e,n),T("denseShape",t,e,n),T("defaultValue",t,e,n));return[s,i,o,a]}case"SparseReshape":{const{outputIndices:s,outputShape:i}=r.sparse.sparseReshape(T("inputIndices",t,e,n),T("inputShape",t,e,n),T("newShape",t,e,n));return[s,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(T("data",t,e,n),T("indices",t,e,n),T("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(T("data",t,e,n),T("indices",t,e,n),T("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aEe=(t,e,n,r=os)=>{switch(t.op){case"FFT":return[r.fft(T("x",t,e,n))];case"IFFT":return[r.ifft(T("x",t,e,n))];case"RFFT":return[r.rfft(T("x",t,e,n))];case"IRFFT":return[r.irfft(T("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lEe=(t,e,n,r=os)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(T("input",t,e,n),T("pattern",t,e,n),T("rewrite",t,e,n),T("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:s,nGramsSplits:i}=r.string.stringNGrams(T("data",t,e,n),T("dataSplits",t,e,n),T("separator",t,e,n),T("nGramWidths",t,e,n),T("leftPad",t,e,n),T("rightPad",t,e,n),T("padWidth",t,e,n),T("preserveShortSequences",t,e,n));return[s,i]}case"StringSplit":{const{indices:s,values:i,shape:o}=r.string.stringSplit(T("input",t,e,n),T("delimiter",t,e,n),T("skipEmpty",t,e,n));return[s,i,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(T("input",t,e,n),T("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cEe=(t,e,n,r=os)=>{switch(t.op){case"Cast":return[r.cast(T("x",t,e,n),T("dtype",t,e,n))];case"ExpandDims":{const s=T("axis",t,e,n);return[r.expandDims(T("x",t,e,n),s)]}case"Squeeze":{const s=T("axis",t,e,n);return[r.squeeze(T("x",t,e,n),s)]}case"Reshape":return[r.reshape(T("x",t,e,n),T("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(T("x",t,e,n),T("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(T("x",t,e,n),T("padding",t,e,n),T("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(T("x",t,e,n),T("padding",t,e,n),T("constantValue",t,e,n))];case"SpaceToBatchND":{const s=T("blockShape",t,e,n),i=T("paddings",t,e,n);return[r.spaceToBatchND(T("x",t,e,n),s,i)]}case"BatchToSpaceND":{const s=T("blockShape",t,e,n),i=T("crops",t,e,n);return[r.batchToSpaceND(T("x",t,e,n),s,i)]}case"DepthToSpace":{const s=T("blockSize",t,e,n),i=T("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(T("x",t,e,n),s,i)]}case"BroadcastTo":return[r.broadcastTo(T("x",t,e,n),T("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(T("s0",t,e,n),T("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F6(t,e,n,r,s=ce){const i=((o,a,l)=>{switch(o.category){case"arithmetic":return s(()=>U4e(o,a,l));case"basic_math":return s(()=>L4e(o,a,l));case"control":return V4e(o,a,l);case"convolution":return s(()=>W4e(o,a,l));case"creation":return s(()=>G4e(o,a,l));case"dynamic":return K4e(o,a,l);case"evaluation":return s(()=>X4e(o,a,l));case"image":return s(()=>Z4e(o,a,l));case"graph":return s(()=>q4e(o,a,l));case"logical":return s(()=>eEe(o,a,l));case"matrices":return s(()=>tEe(o,a,l));case"normalization":return s(()=>nEe(o,a,l));case"ragged":return s(()=>rEe(o,a,l));case"reduction":return s(()=>sEe(o,a,l));case"slice_join":return s(()=>iEe(o,a,l));case"sparse":return s(()=>oEe(o,a,l));case"spectral":return s(()=>aEe(o,a,l));case"string":return s(()=>lEe(o,a,l));case"transformation":return s(()=>cEe(o,a,l));case"hash_table":return J4e(o,a,l,r);case"custom":const c=nY(o.op);if(c&&c.customExecutor)return c.customExecutor(new P4e(o,a,l));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return Ld(i)?i.then(o=>[].concat(o)):[].concat(i)}class $6{constructor(e={},n={},r={},s={},i){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _6(t,e,n,r){const s=new Set,i=[];let o=null,a=null;const l=new Set,c=new Set(Object.keys(t).map(d=>hi(d)[0]));r=r||[];const u=new Set(r.map(d=>hi(d.name)[0])),A=[...e];for(;A.length>0;){const d=A.pop();if((KA(d)||gEe(d)||yEe(d))&&o==null&&(o=d,a=o.children.map(f=>f.name).filter(f=>s.has(f))),s.add(d.name),n[d.name]==null&&!c.has(d.name)&&!u.has(d.name)){if(d.inputs.length===0){i.push(d.name);continue}d.inputs.forEach(f=>{l.has(f.name)||(l.add(f.name),A.push(f))})}}return{inputs:t,outputs:e,usedNodes:s,missingInputs:i,dynamicNode:o,syncInputs:a}}function uEe(t,e){const{usedNodes:n,inputs:r}=e,s=Object.keys(r).map(m=>hi(m)[0]).map(m=>t.nodes[m]),i=t.initNodes||[],o=m=>n.has(typeof m=="string"?m:m.name);function a(m){return[...new Map(m.map(y=>[y.name,y])).values()]}const l=a([...s,...t.weights,...i]).filter(o),c=a([...l,...Object.values(t.nodes)]).filter(o),u=new Map(c.map(m=>[m.name,m])),A={};for(const m of c){A[m.name]=A[m.name]||0;for(const y of m.children)o(y)||(A[y.name]=Number.POSITIVE_INFINITY),A[y.name]=(A[y.name]||0)+1}const d=Object.entries(A).filter(([,m])=>m===0).map(([m])=>m),f=[...d];for(;d.length>0;){const m=d.pop(),y=u.get(m);for(const x of y.children.filter(o))--A[x.name]===0&&(f.push(x.name),d.push(x.name))}const h=f.map(m=>u.get(m)),p=AEe(h,l);return dEe(p,l),p}function AEe(t,e){const n=new Map(t.map(o=>[o.name,o])),r=e.map(o=>o.name),s=new Set(r);for(;r.length>0;){const o=r.pop(),a=n.get(o);for(const l of a.children)!n.has(l.name)||s.has(l.name)||(s.add(l.name),r.push(l.name))}return t.filter(o=>s.has(o.name))}class ob extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function dEe(t,e){const n=new Map(t.map((a,l)=>[a.name,l])),r=new Set(e.map(a=>a.name)),s=a=>r.has(typeof a=="string"?a:a.name),i=new Set(t.map(a=>a.name)),o=a=>i.has(typeof a=="string"?a:a.name);for(const a of t){for(const l of a.children.filter(o)){if(!n.has(l.name))throw new ob(`Child ${l.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(l.name))throw new ob(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!s(a))for(const l of a.inputs){if(!n.has(l.name))throw new ob(`Input ${l.name} of node ${a.name} is unreachable.`);if(n.get(l.name)>n.get(a.name))throw new ob(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}function fEe(t){const e=new Map(t.map((a,l)=>[a.name,l])),n=Number.MAX_SAFE_INTEGER,r=t.map((a,l)=>KA(a)?n:l),s=a=>{const l=r[e.get(a.name)];return l??-1},i=t.map((a,l)=>a.children.map(s).reduce((c,u)=>Math.max(c,u),r[l])),o=new Map;for(let a=0;a<t.length;++a){const l=i[a];if(l===n)continue;const c=t[a],u=t[l];o.has(u.name)||o.set(u.name,[]),o.get(u.name).push(c)}return o}const hEe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),pEe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),mEe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function KA(t){return hEe.has(t.op)}function gEe(t){return pEe.has(t.op)}function yEe(t){return mEe.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A2{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(s=>s.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new A2(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),s=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(e,n){const r=_6(e,n,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:i,syncInputs:o}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(s.length>0){const c=n.map(A=>A.name),u=Object.keys(e);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${s}]`)}const a=uEe(this.graph,r),l=fEe(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return Mr(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const s=r.map(d=>this.graph.nodes[hi(d)[0]]),i=n.map(d=>hi(d)[0]),o=new Set(i);let a=i.map(d=>this.graph.nodes[d]);a.length===0&&(a=this._outputs);const l=this.getCompilationKey(s,a);let c=this.compiledMap.get(l);c==null&&(c=this.compile(e,a),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=fe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const u={},A={};return ce(()=>{const d=new $6(this.weightMap,u,A,this.functionExecutorMap,this.parseNodeNameCache),f=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(y=>{const[x,v]=hi(y,d),b=[];b[v]=e[y],f[x]=b,this.keepIntermediateTensors&&(this.clonedTensorsMap[x]=this.cloneTensorList(b))});const h=this.getFrozenTensorIds(f),{orderedNodes:p,nodeLiveUntilMap:m}=c;for(const y of p){if(f[y.name])continue;const x=F6(y,f,d,this._resourceManager);if(Ld(x))throw new Error(`The execution of the op '${y.op}' returned a promise. Please use model.executeAsync() instead.`);f[y.name]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[y.name]=this.cloneTensorList(x)),this.checkTensorForDisposalWithNodeLiveUntilInfo(y,f,d,h,o,m.get(y.name))}return this.parent==null&&d.dispose(h),n.map(y=>Jr(y,f,d))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(s=>s.id)));return new Set(n)}checkTensorForDisposal(e,n,r,s,i,o,a){if(!(KA(n)||o.has(e))){for(const l of r[e])l!=null&&(a[l.id]=(a[l.id]||0)+n.children.length);for(const l of n.inputs){if(KA(l))continue;const c=N6(l.name,r,s);if(c!=null)for(const u of c){if(!u||u.kept||i.has(u.id))continue;const A=a[u.id];A===1?(u.dispose(),delete a[u.id]):A!=null&&a[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,s,i,o){function a(l){return KA(l)||i.has(l.name)}if(!(KA(e)||o==null))for(const l of o){if(a(l))continue;const c=N6(l.name,n,r);for(const u of c)!u||u.kept||s.has(u.id)||u.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,s={},i={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=fe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const o=new $6(this.weightMap,s,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const a=await this.executeWithControlFlow(e,o,n,r),l=n.map(d=>Jr(d,a,o)),c=l.map(d=>d.id),u=Object.keys(e).map(d=>e[d].id),A=new Set([...c,...u,...this.weightIds]);return Object.values(a).forEach(d=>{d.forEach(f=>{f&&!f.isDisposed&&!A.has(f.id)&&f.dispose()})}),this.parent==null&&o.dispose(A),l}async executeFunctionAsync(e,n,r){const s=e.reduce((i,o,a)=>(i[this.inputs[a].name]=o,i),{});return this._executeAsync(s,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,s){const i=Object.keys(e),o=i.map(b=>this.graph.nodes[hi(b)[0]]),a=r.map(b=>hi(b)[0]),l=new Set(a);let c=a.map(b=>this.graph.nodes[b]);c.length===0&&(c=this._outputs);const{usedNodes:u,missingInputs:A,dynamicNode:d,syncInputs:f}=_6(e,c,this.weightMap,this._initNodes),h=[...o,...this.graph.weights,...this._initNodes||[]].map(b=>({node:b,contexts:n.currentContext})),p=Object.assign({},this.weightMap);Object.keys(e).forEach(b=>{const[w,C]=hi(b),B=[];B[C]=e[b],p[w]=B});const m={},y=this.getFrozenTensorIds(p),x={};for(;h.length>0;){const b=this.processStack(o,h,n,p,x,y,l,m,u);await Promise.all(b)}d==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const v=c.filter(b=>!KA(b)&&!Jr(b.name,p,n)).map(b=>b.name);if(v.length>0){let b="";throw d!=null&&(b=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${f}]`),new Error(`Cannot compute the outputs [${v}] from the provided inputs [${i}]. Consider providing the following inputs: [${A}]. ${b}`)}return p}processStack(e,n,r,s,i,o,a,l,c){const u=[];for(;n.length>0;){const A=n.pop();r.currentContext=A.contexts;let d="";if(A.node.op==="Enter"&&T("isConstant",A.node,s,r)&&([d]=jl(A.node.name,r)),s[A.node.name]==null){const f=F6(A.node,s,r,this._resourceManager);d||([d]=jl(A.node.name,r));const h=r.currentContext;Ld(f)?u.push(f.then(p=>(s[d]=p,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(p)),r.currentContext=h,this.checkTensorForDisposal(d,A.node,s,r,o,a,l),this.processChildNodes(A.node,n,r,s,i,c),p))):(s[d]=f,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(f)),this.checkTensorForDisposal(d,A.node,s,r,o,a,l),this.processChildNodes(A.node,n,r,s,i,c))}else this.processChildNodes(A.node,n,r,s,i,c)}return u}processChildNodes(e,n,r,s,i,o){e.children.forEach(a=>{const[l]=jl(a.name,r);i[l]||!o.has(a.name)||(a.op==="Merge"?a.inputNames.some(c=>!!Jr(c,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(c=>!!Jr(c,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[s]=hi(n),i=this.graph.nodes[s];if(i.attrParams.shape&&i.attrParams.shape.value){const o=i.attrParams.shape.value,a=o.length===r.shape.length&&r.shape.every((l,c)=>o[c]===-1||o[c]===l);L(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&L(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const s={};for(const i in e){const o=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];o!=null?s[o.name]=e[i]:s[i]=e[i]}return s}checkInputs(e){const n=Object.keys(e).filter(r=>{const[s]=hi(r);return this.graph.nodes[s]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,s;const i=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[n];return i!=null?i.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=hi(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class xEe{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vEe="?tfjs-format=file",bEe="model.json";class wEe{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=vq){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new xEe}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Ld(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await HK(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let s=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(s=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new A2(E6.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=E6.Instance.transformGraph(e.modelInitializer);this.initializer=new A2(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof qt?[e]:e,r={};return n.forEach((s,i)=>r[this.structuredOutputKeys[i]]=s),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof qt)&&!Array.isArray(e)){const i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(const o in i){const a=i[o];a.resourceId!=null&&(e[o]=this.resourceIdToCapturedInput[a.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((i,o)=>{var a,l,c;const u=(c=(l=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||l===void 0?void 0:l[o])===null||c===void 0?void 0:c.resourceId;return u!=null?i[o]=this.resourceIdToCapturedInput[u]:i[o]=e[s++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let s=0;s<r.length;s++){const i=r[s],o=n[i];this.resourceIdToCapturedInput[o.resourceId]=e[s]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&ft(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function iY(t,e={},n=vq){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=CEe(t));const r=new wEe(t,e,n);return await r.load(),r}function CEe(t){return t.endsWith("/")||(t=t+"/"),`${t}${bEe}${vEe}`}/**
    * @license
    * Copyright 2024 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var va=function(){return va=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},va.apply(this,arguments)};function ql(t,e,n,r){return new(n||(n=Promise))(function(s,i){function o(c){try{l(r.next(c))}catch(u){i(u)}}function a(c){try{l(r.throw(c))}catch(u){i(u)}}function l(c){var u;c.done?s(c.value):(u=c.value,u instanceof n?u:new n(function(A){A(u)})).then(o,a)}l((r=r.apply(t,[])).next())})}function Yl(t,e){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&u[0]?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(s=o.trys,!((s=s.length>0&&s[s.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(u[0]===6&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(A){u=[6,A],r=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([l,c])}}}function Mc(t){var e=t.map(function(n){return n[0]});return e.push(t[t.length-1][1]),e}var SEe={lips:Mc([[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]]),leftEye:Mc([[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]]),leftEyebrow:Mc([[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]]),leftIris:Mc([[474,475],[475,476],[476,477],[477,474]]),rightEye:Mc([[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]]),rightEyebrow:Mc([[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]]),rightIris:Mc([[469,470],[470,471],[471,472],[472,469]]),faceOval:Mc([[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]])},BEe=Object.entries(SEe).map(function(t){var e=t[0];return t[1].map(function(n){return[n,e]})}).flat(),oY=new Map(BEe);function tT(t){for(var e={locationData:{relativeKeypoints:[]}},n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=0;o<t.length;++o){var a=t[o];n=Math.min(n,a.x),r=Math.max(r,a.x),s=Math.min(s,a.y),i=Math.max(i,a.y),e.locationData.relativeKeypoints.push({x:a.x,y:a.y})}return e.locationData.relativeBoundingBox={xMin:n,yMin:s,xMax:r,yMax:i,width:r-n,height:i-s},e}var R4={runtime:"mediapipe",maxFaces:1,refineLandmarks:!1},NEe=function(){function t(e){var n=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceMeshSolution=new y1e.FaceMesh({locateFile:function(r,s){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+r:s+"/"+r}}),this.faceMeshSolution.setOptions({refineLandmarks:e.refineLandmarks,selfieMode:this.selfieMode,maxNumFaces:e.maxFaces}),this.faceMeshSolution.onResults(function(r){if(n.height=r.image.height,n.width=r.image.width,n.faces=[],r.multiFaceLandmarks!==null)for(var s=r.multiFaceLandmarks,i=0;i<s.length;i++){var o=n.translateOutput(s[i]);n.faces.push({keypoints:o,box:tT(o).locationData.relativeBoundingBox})}})}return t.prototype.translateOutput=function(e){var n=this;return e.map(function(r,s){var i={x:r.x*n.width,y:r.y*n.height,z:r.z*n.width},o=oY.get(s);return o!=null&&(i.name=o),i})},t.prototype.estimateFaces=function(e,n){return ql(this,void 0,void 0,function(){var r,s;return Yl(this,function(i){switch(i.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.faceMeshSolution.setOptions({selfieMode:this.selfieMode})),e instanceof qt?(s=ImageData.bind,[4,bq(e)]):[3,2];case 1:return r=new(s.apply(ImageData,[void 0,i.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:r=e,i.label=3;case 3:return e=r,[4,this.faceMeshSolution.send({image:e})];case 4:return i.sent(),[2,this.faces]}})})},t.prototype.dispose=function(){this.faceMeshSolution.close()},t.prototype.reset=function(){this.faceMeshSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},t.prototype.initialize=function(){return this.faceMeshSolution.initialize()},t}();function EEe(t){return ql(this,void 0,void 0,function(){var e,n;return Yl(this,function(r){switch(r.label){case 0:return e=function(s){if(s==null)return va({},R4);var i=va({},s);return i.runtime="mediapipe",i.maxFaces==null&&(i.maxFaces=R4.maxFaces),i.refineLandmarks==null&&(i.refineLandmarks=R4.refineLandmarks),i}(t),[4,(n=new NEe(e)).initialize()];case 1:return r.sent(),[2,n]}})})}var P4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},IEe={};(function(){var t;function e(E){var $=0;return function(){return $<E.length?{done:!1,value:E[$++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(E,$,R){return E==Array.prototype||E==Object.prototype||(E[$]=R.value),E},r=function(E){E=[typeof globalThis=="object"&&globalThis,E,typeof window=="object"&&window,typeof self=="object"&&self,typeof P4=="object"&&P4];for(var $=0;$<E.length;++$){var R=E[$];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}(this);function s(E,$){if($)e:{var R=r;E=E.split(".");for(var H=0;H<E.length-1;H++){var X=E[H];if(!(X in R))break e;R=R[X]}($=$(H=R[E=E[E.length-1]]))!=H&&$!=null&&n(R,E,{configurable:!0,writable:!0,value:$})}}function i(E){return(E={next:E})[Symbol.iterator]=function(){return this},E}function o(E){var $=typeof Symbol<"u"&&Symbol.iterator&&E[Symbol.iterator];return $?$.call(E):{next:e(E)}}function a(E){if(!(E instanceof Array)){E=o(E);for(var $,R=[];!($=E.next()).done;)R.push($.value);E=R}return E}s("Symbol",function(E){function $(X,K){this.g=X,n(this,"description",{configurable:!0,writable:!0,value:K})}if(E)return E;$.prototype.toString=function(){return this.g};var R="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",H=0;return function X(K){if(this instanceof X)throw new TypeError("Symbol is not a constructor");return new $(R+(K||"")+"_"+H++,K)}}),s("Symbol.iterator",function(E){if(E)return E;E=Symbol("Symbol.iterator");for(var $="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),R=0;R<$.length;R++){var H=r[$[R]];typeof H=="function"&&typeof H.prototype[E]!="function"&&n(H.prototype,E,{configurable:!0,writable:!0,value:function(){return i(e(this))}})}return E});var l,c=typeof Object.create=="function"?Object.create:function(E){function $(){}return $.prototype=E,new $};if(typeof Object.setPrototypeOf=="function")l=Object.setPrototypeOf;else{var u;e:{var A={};try{A.__proto__={a:!0},u=A.a;break e}catch{}u=!1}l=u?function(E,$){if(E.__proto__=$,E.__proto__!==$)throw new TypeError(E+" is not extensible");return E}:null}var d=l;function f(E,$){if(E.prototype=c($.prototype),E.prototype.constructor=E,d)d(E,$);else for(var R in $)if(R!="prototype")if(Object.defineProperties){var H=Object.getOwnPropertyDescriptor($,R);H&&Object.defineProperty(E,R,H)}else E[R]=$[R];E.na=$.prototype}function h(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function p(E){if(E.l)throw new TypeError("Generator is already running");E.l=!0}function m(E,$){E.j={da:$,ea:!0},E.g=E.o||E.u}function y(E,$,R){return E.g=R,{value:$}}function x(E){this.g=new h,this.h=E}function v(E,$,R,H){try{var X=$.call(E.g.i,R);if(!(X instanceof Object))throw new TypeError("Iterator result "+X+" is not an object");if(!X.done)return E.g.l=!1,X;var K=X.value}catch(J){return E.g.i=null,m(E.g,J),b(E)}return E.g.i=null,H.call(E.g,K),b(E)}function b(E){for(;E.g.g;)try{var $=E.h(E.g);if($)return E.g.l=!1,{value:$.value,done:!1}}catch(R){E.g.h=void 0,m(E.g,R)}if(E.g.l=!1,E.g.j){if($=E.g.j,E.g.j=null,$.ea)throw $.da;return{value:$.return,done:!0}}return{value:void 0,done:!0}}function w(E){this.next=function($){return p(E.g),E.g.i?$=v(E,E.g.i.next,$,E.g.s):(E.g.s($),$=b(E)),$},this.throw=function($){return p(E.g),E.g.i?$=v(E,E.g.i.throw,$,E.g.s):(m(E.g,$),$=b(E)),$},this.return=function($){return function(R,H){p(R.g);var X=R.g.i;return X?v(R,"return"in X?X.return:function(K){return{value:K,done:!0}},H,R.g.return):(R.g.return(H),b(R))}(E,$)},this[Symbol.iterator]=function(){return this}}function C(E){return function($){function R(X){return $.next(X)}function H(X){return $.throw(X)}return new Promise(function(X,K){(function J(se){se.done?X(se.value):Promise.resolve(se.value).then(R,H).then(J,K)})($.next())})}(new w(new x(E)))}h.prototype.s=function(E){this.h=E},h.prototype.return=function(E){this.j={return:E},this.g=this.u},s("Promise",function(E){function $(J){this.h=0,this.i=void 0,this.g=[],this.s=!1;var se=this.j();try{J(se.resolve,se.reject)}catch(me){se.reject(me)}}function R(){this.g=null}function H(J){return J instanceof $?J:new $(function(se){se(J)})}if(E)return E;R.prototype.h=function(J){if(this.g==null){this.g=[];var se=this;this.i(function(){se.l()})}this.g.push(J)};var X=r.setTimeout;R.prototype.i=function(J){X(J,0)},R.prototype.l=function(){for(;this.g&&this.g.length;){var J=this.g;this.g=[];for(var se=0;se<J.length;++se){var me=J[se];J[se]=null;try{me()}catch(Se){this.j(Se)}}}this.g=null},R.prototype.j=function(J){this.i(function(){throw J})},$.prototype.j=function(){function J(Se){return function(Ie){me||(me=!0,Se.call(se,Ie))}}var se=this,me=!1;return{resolve:J(this.D),reject:J(this.l)}},$.prototype.D=function(J){if(J===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(J instanceof $)this.H(J);else{e:switch(typeof J){case"object":var se=J!=null;break e;case"function":se=!0;break e;default:se=!1}se?this.A(J):this.o(J)}},$.prototype.A=function(J){var se=void 0;try{se=J.then}catch(me){return void this.l(me)}typeof se=="function"?this.I(se,J):this.o(J)},$.prototype.l=function(J){this.u(2,J)},$.prototype.o=function(J){this.u(1,J)},$.prototype.u=function(J,se){if(this.h!=0)throw Error("Cannot settle("+J+", "+se+"): Promise already settled in state"+this.h);this.h=J,this.i=se,this.h===2&&this.G(),this.B()},$.prototype.G=function(){var J=this;X(function(){if(J.C()){var se=r.console;se!==void 0&&se.error(J.i)}},1)},$.prototype.C=function(){if(this.s)return!1;var J=r.CustomEvent,se=r.Event,me=r.dispatchEvent;return me===void 0||(typeof J=="function"?J=new J("unhandledrejection",{cancelable:!0}):typeof se=="function"?J=new se("unhandledrejection",{cancelable:!0}):(J=r.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,J),J.promise=this,J.reason=this.i,me(J))},$.prototype.B=function(){if(this.g!=null){for(var J=0;J<this.g.length;++J)K.h(this.g[J]);this.g=null}};var K=new R;return $.prototype.H=function(J){var se=this.j();J.M(se.resolve,se.reject)},$.prototype.I=function(J,se){var me=this.j();try{J.call(se,me.resolve,me.reject)}catch(Se){me.reject(Se)}},$.prototype.then=function(J,se){function me(Re,Me){return typeof Re=="function"?function(mt){try{Se(Re(mt))}catch(Bt){Ie(Bt)}}:Me}var Se,Ie,De=new $(function(Re,Me){Se=Re,Ie=Me});return this.M(me(J,Se),me(se,Ie)),De},$.prototype.catch=function(J){return this.then(void 0,J)},$.prototype.M=function(J,se){function me(){switch(Se.h){case 1:J(Se.i);break;case 2:se(Se.i);break;default:throw Error("Unexpected state: "+Se.h)}}var Se=this;this.g==null?K.h(me):this.g.push(me),this.s=!0},$.resolve=H,$.reject=function(J){return new $(function(se,me){me(J)})},$.race=function(J){return new $(function(se,me){for(var Se=o(J),Ie=Se.next();!Ie.done;Ie=Se.next())H(Ie.value).M(se,me)})},$.all=function(J){var se=o(J),me=se.next();return me.done?H([]):new $(function(Se,Ie){function De(mt){return function(Bt){Re[mt]=Bt,--Me==0&&Se(Re)}}var Re=[],Me=0;do Re.push(void 0),Me++,H(me.value).M(De(Re.length-1),Ie),me=se.next();while(!me.done)})},$});var B=typeof Object.assign=="function"?Object.assign:function(E,$){for(var R=1;R<arguments.length;R++){var H=arguments[R];if(H)for(var X in H)Object.prototype.hasOwnProperty.call(H,X)&&(E[X]=H[X])}return E};s("Object.assign",function(E){return E||B}),s("Object.is",function(E){return E||function($,R){return $===R?$!==0||1/$==1/R:$!=$&&R!=R}}),s("Array.prototype.includes",function(E){return E||function($,R){var H=this;H instanceof String&&(H=String(H));var X=H.length;for(0>(R=R||0)&&(R=Math.max(R+X,0));R<X;R++){var K=H[R];if(K===$||Object.is(K,$))return!0}return!1}}),s("String.prototype.includes",function(E){return E||function($,R){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if($ instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf($,R||0)!==-1}}),s("Array.prototype.keys",function(E){return E||function(){return function($,R){$ instanceof String&&($+="");var H=0,X=!1,K={next:function(){if(!X&&H<$.length){var J=H++;return{value:R(J,$[J]),done:!1}}return X=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}(this,function($){return $})}});var S=this||self;function N(E,$){E=E.split(".");var R,H=S;for((E[0]in H)||H.execScript===void 0||H.execScript("var "+E[0]);E.length&&(R=E.shift());)E.length||$===void 0?H=H[R]&&H[R]!==Object.prototype[R]?H[R]:H[R]={}:H[R]=$}function k(){throw Error("Invalid UTF8")}function O(E,$){return $=String.fromCharCode.apply(null,$),E==null?$:E+$}var U,P,V=typeof TextDecoder<"u",W=typeof TextEncoder<"u",j={},G=null;function D(E){var $;$===void 0&&($=0),q(),$=j[$];for(var R=Array(Math.floor(E.length/3)),H=$[64]||"",X=0,K=0;X<E.length-2;X+=3){var J=E[X],se=E[X+1],me=E[X+2],Se=$[J>>2];J=$[(3&J)<<4|se>>4],se=$[(15&se)<<2|me>>6],me=$[63&me],R[K++]=Se+J+se+me}switch(Se=0,me=H,E.length-X){case 2:me=$[(15&(Se=E[X+1]))<<2]||H;case 1:E=E[X],R[K]=$[E>>2]+$[(3&E)<<4|Se>>4]+me+H}return R.join("")}function M(E){var $=E.length,R=3*$/4;R%3?R=Math.floor(R):"=.".indexOf(E[$-1])!=-1&&(R="=.".indexOf(E[$-2])!=-1?R-2:R-1);var H=new Uint8Array(R),X=0;return function(K,J){function se(Me){for(;me<K.length;){var mt=K.charAt(me++),Bt=G[mt];if(Bt!=null)return Bt;if(!/^[\s\xa0]*$/.test(mt))throw Error("Unknown base64 encoding at char: "+mt)}return Me}q();for(var me=0;;){var Se=se(-1),Ie=se(0),De=se(64),Re=se(64);if(Re===64&&Se===-1)break;J(Se<<2|Ie>>4),De!=64&&(J(Ie<<4&240|De>>2),Re!=64&&J(De<<6&192|Re))}}(E,function(K){H[X++]=K}),X!==R?H.subarray(0,X):H}function q(){if(!G){G={};for(var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),$=["+/=","+/","-_=","-_.","-_"],R=0;5>R;R++){var H=E.concat($[R].split(""));j[R]=H;for(var X=0;X<H.length;X++){var K=H[X];G[K]===void 0&&(G[K]=X)}}}}var Z,te=typeof Uint8Array=="function";function ue(E){return te&&E!=null&&E instanceof Uint8Array}function de(E){if(this.L=E,E!==null&&E.length===0)throw Error("ByteString should be constructed with non-empty values")}var le=typeof Uint8Array.prototype.slice=="function",he=0;function ke(E,$){return Error("Invalid wire type: "+E+" (at position "+$+")")}function Qe(){return Error("Failed to read varint, encoding is invalid.")}function xe(E,$){$=($=$===void 0?{}:$).v!==void 0&&$.v,this.h=null,this.g=this.i=this.j=0,this.v=$,E&&$e(this,E)}function $e(E,$){E.h=function(R,H){if(R.constructor===Uint8Array)return R;if(R.constructor===ArrayBuffer)return new Uint8Array(R);if(R.constructor===Array)return new Uint8Array(R);if(R.constructor===String)return M(R);if(R.constructor===de)return!H&&(H=R.L)&&H.constructor===Uint8Array?H:(H=(H=R.L)==null||ue(H)?H:typeof H=="string"?M(H):null,(R=R.L=H)?new Uint8Array(R):Z||(Z=new Uint8Array(0)));if(R instanceof Uint8Array)return new Uint8Array(R.buffer,R.byteOffset,R.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}($,E.v),E.j=0,E.i=E.h.length,E.g=E.j}function Fe(E){if(E.g>E.i)throw Error("Tried to read past the end of the data "+E.g+" > "+E.i)}function be(E){var $=E.h,R=$[E.g],H=127&R;if(128>R)return E.g+=1,Fe(E),H;if(H|=(127&(R=$[E.g+1]))<<7,128>R)return E.g+=2,Fe(E),H;if(H|=(127&(R=$[E.g+2]))<<14,128>R)return E.g+=3,Fe(E),H;if(H|=(127&(R=$[E.g+3]))<<21,128>R)return E.g+=4,Fe(E),H;if(R=$[E.g+4],E.g+=5,H|=(15&R)<<28,128>R)return Fe(E),H;if(128<=$[E.g++]&&128<=$[E.g++]&&128<=$[E.g++]&&128<=$[E.g++]&&128<=$[E.g++])throw Qe();return Fe(E),H}xe.prototype.reset=function(){this.g=this.j};var it=[];function et(){this.g=[]}function st(E,$){for(;127<$;)E.g.push(127&$|128),$>>>=7;E.g.push($)}function rt(E){var $={},R=$.W!==void 0&&$.W;this.l={v:$.v!==void 0&&$.v},this.W=R,$=this.l,it.length?(R=it.pop(),$&&(R.v=$.v),E&&$e(R,E),E=R):E=new xe(E,$),this.g=E,this.j=this.g.g,this.h=this.i=-1}function ht(E){var $=E.g;if($.g==$.i)return!1;E.j=E.g.g;var R=be(E.g)>>>0;if($=R>>>3,!(0<=(R&=7)&&5>=R))throw ke(R,E.j);if(1>$)throw Error("Invalid field number: "+$+" (at position "+E.j+")");return E.i=$,E.h=R,!0}function dt(E){switch(E.h){case 0:if(E.h!=0)dt(E);else e:{for(var $=(E=E.g).g,R=$+10;$<R;)if(!(128&E.h[$++])){E.g=$,Fe(E);break e}throw Qe()}break;case 1:(E=E.g).g+=8,Fe(E);break;case 2:E.h!=2?dt(E):($=be(E.g)>>>0,(E=E.g).g+=$,Fe(E));break;case 5:(E=E.g).g+=4,Fe(E);break;case 3:for($=E.i;;){if(!ht(E))throw Error("Unmatched start-group tag: stream EOF");if(E.h==4){if(E.i!=$)throw Error("Unmatched end-group tag");break}dt(E)}break;default:throw ke(E.h,E.j)}}et.prototype.length=function(){return this.g.length},et.prototype.end=function(){var E=this.g;return this.g=[],E},rt.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};var cn=[];function Yt(){this.i=[],this.h=0,this.g=new et}function Dt(E,$){$.length!==0&&(E.i.push($),E.h+=$.length)}var rn=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function cs(E,$){Object.isFrozen(E)||(rn?E[rn]|=$:E.N!==void 0?E.N|=$:Object.defineProperties(E,{N:{value:$,configurable:!0,writable:!0,enumerable:!1}}))}function yr(E){var $;return($=rn?E[rn]:E.N)==null?0:$}function Zn(E){return cs(E,1),E}function ur(E){return!!Array.isArray(E)&&!!(2&yr(E))}function Cs(E){if(!Array.isArray(E))throw Error("cannot mark non-array as immutable");cs(E,2)}function zn(E){return E!==null&&typeof E=="object"&&!Array.isArray(E)&&E.constructor===Object}var Mi=Object.freeze(Zn([]));function Sl(E){if(ur(E.m))throw Error("Cannot mutate an immutable Message")}var Bl,Cf=typeof Symbol<"u"&&Symbol.hasInstance!==void 0;function Nl(E){return{value:E,configurable:!1,writable:!1,enumerable:!1}}function _r(E,$,R){return $===-1?null:$>=E.i?E.g?E.g[$]:void 0:R!==void 0&&R&&E.g&&(R=E.g[$])!=null?R:E.m[$+E.h]}function Rn(E,$,R,H){H=H!==void 0&&H,Sl(E),$<E.i&&!H?E.m[$+E.h]=R:(E.g||(E.g=E.m[E.i+E.h]={}))[$]=R}function Ar(E,$,R,H){R=R===void 0||R;var X=_r(E,$,H=H!==void 0&&H);return X==null&&(X=Mi),ur(E.m)?R&&(Cs(X),Object.freeze(X)):(X===Mi||ur(X))&&Rn(E,$,X=Zn(X.slice()),H),X}function Vs(E,$,R){return(E=(E=_r(E,$))==null?E:+E)==null?R===void 0?0:R:E}function bA(E,$,R,H){E.j||(E.j={});var X=ur(E.m),K=E.j[R];if(!K){H=Ar(E,R,!0,H!==void 0&&H),K=[],X=X||ur(H);for(var J=0;J<H.length;J++)K[J]=new $(H[J]),X&&Cs(K[J].m);X&&(Cs(K),Object.freeze(K)),E.j[R]=K}return K}function mn(E,$,R,H,X){var K=K!==void 0&&K;return Sl(E),K=bA(E,R,$,K),R=H||new R,E=Ar(E,$),X!=null?(K.splice(X,0,R),E.splice(X,0,R.m)):(K.push(R),E.push(R.m)),R}function wA(E,$){return(E=_r(E,$))==null?0:E}function Im(E,$){return(E=_r(E,$))==null?"":E}function Da(E){var $=Lv;return Ft(E,$=$===void 0?Sf:$)}function Qi(E,$){if(E!=null){if(Array.isArray(E))E=Ft(E,$);else if(zn(E)){var R,H={};for(R in E)H[R]=Qi(E[R],$);E=H}else E=$(E);return E}}function Ft(E,$){for(var R=E.slice(),H=0;H<R.length;H++)R[H]=Qi(R[H],$);return Array.isArray(E)&&1&yr(E)&&Zn(R),R}function Lv(E){return E&&typeof E=="object"&&E.toJSON?E.toJSON():(E=function($){switch(typeof $){case"number":return isFinite($)?$:String($);case"object":if($&&!Array.isArray($)){if(ue($))return D($);if($ instanceof de){var R=$.L;return R=R==null||typeof R=="string"?R:te&&R instanceof Uint8Array?D(R):null,($.L=R)||""}}}return $}(E),Array.isArray(E)?Da(E):E)}function Sf(E){return ue(E)?new Uint8Array(E):E}function CA(E,$,R){E||(E=Bl),Bl=null;var H=this.constructor.h;if(E||(E=H?[H]:[]),this.h=(H?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=E,E=(H=this.m.length)-1,H&&zn(H=this.m[E])?(this.i=E-this.h,this.g=H):$!==void 0&&-1<$?(this.i=Math.max($,E+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE,R)for($=0;$<R.length;$++)if((E=R[$])<this.i)E+=this.h,(H=this.m[E])?Array.isArray(H)&&Zn(H):this.m[E]=Mi;else{var X=(H=this.g||(this.g=this.m[this.i+this.h]={}))[E];X?Array.isArray(X)&&Zn(X):H[E]=Mi}}function SA(){CA.apply(this,arguments)}if(CA.prototype.toJSON=function(){return Da(this.m)},CA.prototype.toString=function(){return this.m.toString()},f(SA,CA),Cf){var Ra={};Object.defineProperties(SA,(Ra[Symbol.hasInstance]=Nl(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),Ra))}function Bf(E,$,R){if(R){var H,X={};for(H in R){var K=R[H],J=K.ha;J||(X.F=K.la||K.fa.P,K.aa?(X.U=Mv(K.aa),J=function(se){return function(me,Se,Ie){return se.F(me,Se,Ie,se.U)}}(X)):K.ca?(X.T=Nf(K.X.g,K.ca),J=function(se){return function(me,Se,Ie){return se.F(me,Se,Ie,se.T)}}(X)):J=X.F,K.ha=J),J($,E,K.X),X={F:X.F,U:X.U,T:X.T}}}(function(se,me){if(me=me.ba){Dt(se,se.g.end());for(var Se=0;Se<me.length;Se++)Dt(se,me[Se])}})($,E)}var Hi=Symbol();function Pa(E,$,R){return E[Hi]||(E[Hi]=function(H,X){return $(H,X,R)})}function jv(E){var $=E[Hi];if(!$){var R=Wv(E);$=function(H,X){return km(H,X,R)},E[Hi]=$}return $}function sN(E){var $=function(X){var K=X.aa;return K?jv(K):(K=X.ka)?Pa(X.X.g,K,X.ca):void 0}(E),R=E.X,H=E.fa.O;return $?function(X,K){return H(X,K,R,$)}:function(X,K){return H(X,K,R)}}function Gr(E,$,R,H,X,K){var J=0;for((E=E()).length&&typeof E[0]!="number"&&(R($,E[0]),J++);J<E.length;){R=E[J++];for(var se=J+1;se<E.length&&typeof E[se]!="number";)se++;var me=E[J++];switch(se-=J){case 0:H($,R,me);break;case 1:H($,R,me,E[J++]);break;case 2:X($,R,me,E[J++],E[J++]);break;case 3:se=E[J++];var Se=E[J++],Ie=E[J++];Array.isArray(Ie)?X($,R,me,se,Se,Ie):K($,R,me,se,Se,Ie);break;case 4:K($,R,me,E[J++],E[J++],E[J++],E[J++]);break;default:throw Error("unexpected number of binary field arguments: "+se)}}return $}var Ua=Symbol();function Mv(E){var $=E[Ua];if(!$){var R=Vv(E);$=function(H,X){return Fm(H,X,R)},E[Ua]=$}return $}function Nf(E,$){var R=E[Ua];return R||(R=function(H,X){return Bf(H,X,$)},E[Ua]=R),R}var Qv=Symbol();function Dc(E,$){E.push($)}function iN(E,$,R){E.push($,R.P)}function Hv(E,$,R,H,X){var K=Mv(X),J=R.P;E.push($,function(se,me,Se){return J(se,me,Se,H,K)})}function zv(E,$,R,H,X,K){var J=Nf(H,K),se=R.P;E.push($,function(me,Se,Ie){return se(me,Se,Ie,H,J)})}function Vv(E){var $=E[Qv];return $||Gr(E,E[Qv]=[],Dc,iN,Hv,zv)}var Ef=Symbol();function El(E,$){E[0]=$}function oN(E,$,R,H){var X=R.O;E[$]=H?function(K,J,se){return X(K,J,se,H)}:X}function aN(E,$,R,H,X,K){var J=R.O,se=jv(X);E[$]=function(me,Se,Ie){return J(me,Se,Ie,H,se,K)}}function If(E,$,R,H,X,K,J){var se=R.O,me=Pa(H,X,K);E[$]=function(Se,Ie,De){return se(Se,Ie,De,H,me,J)}}function Wv(E){var $=E[Ef];return $||Gr(E,E[Ef]={},El,oN,aN,If)}function km(E,$,R){for(;ht($)&&$.h!=4;){var H=$.i,X=R[H];if(!X){var K=R[0];K&&(K=K[H])&&(X=R[H]=sN(K))}if(!(X&&X($,E,H)||(X=$,H=E,K=X.j,dt(X),X.W))){var J=X.g.h;X=K===(X=X.g.g)?Z||(Z=new Uint8Array(0)):le?J.slice(K,X):new Uint8Array(J.subarray(K,X)),(K=H.ba)?K.push(X):H.ba=[X]}}return E}function Tm(E,$,R){if(cn.length){var H=cn.pop();E&&($e(H.g,E),H.i=-1,H.h=-1),E=H}else E=new rt(E);try{return km(new $,E,Wv(R))}finally{($=E.g).h=null,$.j=0,$.i=0,$.g=0,$.v=!1,E.i=-1,E.h=-1,100>cn.length&&cn.push(E)}}function Fm(E,$,R){for(var H=R.length,X=H%2==1,K=X?1:0;K<H;K+=2)(0,R[K+1])($,E,R[K]);Bf(E,$,X?R[0]:void 0)}function BA(E,$){var R=new Yt;Fm(E,R,Vv($)),Dt(R,R.g.end()),E=new Uint8Array(R.h);for(var H=($=R.i).length,X=0,K=0;K<H;K++){var J=$[K];E.set(J,X),X+=J.length}return R.i=[E],E}function Rc(E,$){return{O:E,P:$}}var zi=Rc(function(E,$,R){if(E.h!==5)return!1;var H=(E=E.g).h[E.g],X=E.h[E.g+1],K=E.h[E.g+2],J=E.h[E.g+3];return E.g+=4,Fe(E),E=2*((X=(H<<0|X<<8|K<<16|J<<24)>>>0)>>31)+1,H=X>>>23&255,X&=8388607,Rn($,R,H==255?X?NaN:1/0*E:H==0?E*Math.pow(2,-149)*X:E*Math.pow(2,H-150)*(X+Math.pow(2,23))),!0},function(E,$,R){if(($=_r($,R))!=null){st(E.g,8*R+5),E=E.g;var H=$;(H=(R=0>H?1:0)?-H:H)===0?0<1/H?he=0:he=2147483648:isNaN(H)?he=2147483647:34028234663852886e22<H?he=(R<<31|2139095040)>>>0:11754943508222875e-54>H?(H=Math.round(H/Math.pow(2,-149)),he=(R<<31|H)>>>0):($=Math.floor(Math.log(H)/Math.LN2),H*=Math.pow(2,-$),16777216<=(H=Math.round(8388608*H))&&++$,he=(R<<31|$+127<<23|8388607&H)>>>0),R=he,E.g.push(R>>>0&255),E.g.push(R>>>8&255),E.g.push(R>>>16&255),E.g.push(R>>>24&255)}}),lN=Rc(function(E,$,R){if(E.h!==0)return!1;for(var H=E.g,X=128,K=0,J=E=0;4>J&&128<=X;J++)X=H.h[H.g++],Fe(H),K|=(127&X)<<7*J;if(128<=X&&(X=H.h[H.g++],Fe(H),K|=(127&X)<<28,E|=(127&X)>>4),128<=X)for(J=0;5>J&&128<=X;J++)X=H.h[H.g++],Fe(H),E|=(127&X)<<7*J+3;if(!(128>X))throw Qe();return H=K>>>0,(E=2147483648&(X=E>>>0))&&(X=~X>>>0,(H=1+~H>>>0)==0&&(X=X+1>>>0)),H=4294967296*X+(H>>>0),Rn($,R,E?-H:H),!0},function(E,$,R){if(($=_r($,R))!=null&&$!=null){st(E.g,8*R),E=E.g;var H=$;for(R=0>H,$=(H=Math.abs(H))>>>0,H=Math.floor((H-$)/4294967296),H>>>=0,R&&(H=~H>>>0,4294967295<($=1+(~$>>>0))&&($=0,4294967295<++H&&(H=0))),R=he=$,$=H;0<$||127<R;)E.g.push(127&R|128),R=(R>>>7|$<<25)>>>0,$>>>=7;E.g.push(R)}}),cN=Rc(function(E,$,R){return E.h===0&&(Rn($,R,be(E.g)),!0)},function(E,$,R){if(($=_r($,R))!=null&&$!=null)if(st(E.g,8*R),E=E.g,0<=(R=$))st(E,R);else{for($=0;9>$;$++)E.g.push(127&R|128),R>>=7;E.g.push(1)}}),Gv=Rc(function(E,$,R){if(E.h!==2)return!1;var H,X=be(E.g)>>>0,K=(E=E.g).g;if(E.g+=X,Fe(E),E=E.h,V)(H=U)||(H=U=new TextDecoder("utf-8",{fatal:!0})),H=H.decode(E.subarray(K,K+X));else{X=K+X;for(var J,se,me,Se=[],Ie=null;K<X;)128>(J=E[K++])?Se.push(J):224>J?K>=X?k():(se=E[K++],194>J||(192&se)!=128?(K--,k()):Se.push((31&J)<<6|63&se)):240>J?K>=X-1?k():(192&(se=E[K++]))!=128||J===224&&160>se||J===237&&160<=se||(192&(H=E[K++]))!=128?(K--,k()):Se.push((15&J)<<12|(63&se)<<6|63&H):244>=J?K>=X-2?k():(192&(se=E[K++]))!=128||se-144+(J<<28)>>30||(192&(H=E[K++]))!=128||(192&(me=E[K++]))!=128?(K--,k()):(J=(7&J)<<18|(63&se)<<12|(63&H)<<6|63&me,J-=65536,Se.push(55296+(J>>10&1023),56320+(1023&J))):k(),8192<=Se.length&&(Ie=O(Ie,Se),Se.length=0);H=O(Ie,Se)}return Rn($,R,H),!0},function(E,$,R){if(($=_r($,R))!=null){var H=!1;if(H=H!==void 0&&H,W){if(H&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test($))throw Error("Found an unpaired surrogate");$=(P||(P=new TextEncoder)).encode($)}else{for(var X=0,K=new Uint8Array(3*$.length),J=0;J<$.length;J++){var se=$.charCodeAt(J);if(128>se)K[X++]=se;else{if(2048>se)K[X++]=se>>6|192;else{if(55296<=se&&57343>=se){if(56319>=se&&J<$.length){var me=$.charCodeAt(++J);if(56320<=me&&57343>=me){se=1024*(se-55296)+me-56320+65536,K[X++]=se>>18|240,K[X++]=se>>12&63|128,K[X++]=se>>6&63|128,K[X++]=63&se|128;continue}J--}if(H)throw Error("Found an unpaired surrogate");se=65533}K[X++]=se>>12|224,K[X++]=se>>6&63|128}K[X++]=63&se|128}}$=K.subarray(0,X)}st(E.g,8*R+2),st(E.g,$.length),Dt(E,E.g.end()),Dt(E,$)}}),$m=Rc(function(E,$,R,H,X){if(E.h!==2)return!1;$=mn($,R,H),R=E.g.i,H=be(E.g)>>>0;var K=E.g.g+H,J=K-R;if(0>=J&&(E.g.i=K,X($,E),J=K-E.g.g),J)throw Error("Message parsing ended unexpectedly. Expected to read "+H+" bytes, instead read "+(H-J)+" bytes, either the data ended unexpectedly or the message misreported its own length");return E.g.g=K,E.g.i=R,!0},function(E,$,R,H,X){if(($=bA($,H,R))!=null)for(H=0;H<$.length;H++){var K=E;st(K.g,8*R+2);var J=K.g.end();Dt(K,J),J.push(K.h),K=J,X($[H],E),J=E;var se=K.pop();for(se=J.h+J.g.length()-se;127<se;)K.push(127&se|128),se>>>=7,J.h++;K.push(se),J.h++}});function ci(){SA.apply(this,arguments)}if(f(ci,SA),Cf){var Kv={};Object.defineProperties(ci,(Kv[Symbol.hasInstance]=Nl(Object[Symbol.hasInstance]),Kv))}function Il(E){ci.call(this,E)}function Xv(){return[1,cN,2,zi,3,Gv,4,Gv]}function _m(E){ci.call(this,E,-1,AN)}function uN(){return[1,$m,Il,Xv]}f(Il,ci),f(_m,ci),_m.prototype.addClassification=function(E,$){return mn(this,1,Il,E,$),this};var AN=[1];function Pc(E){ci.call(this,E)}function qv(){return[1,zi,2,zi,3,zi,4,zi,5,zi]}function Yv(E){ci.call(this,E,-1,fN)}function dN(){return[1,$m,Pc,qv]}f(Pc,ci),f(Yv,ci);var fN=[1];function Om(E){ci.call(this,E)}function Dm(){return[1,zi,2,zi,3,zi,4,zi,5,zi,6,lN]}f(Om,ci);var Rm=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],Pm=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],Um=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Lm=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],jm=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],Jv=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],Zv=[].concat(a(Rm),a(Pm),a(Um),a(Lm),a(jm),a(Jv));function I(E,$,R){if(R=E.createShader(R===0?E.VERTEX_SHADER:E.FRAGMENT_SHADER),E.shaderSource(R,$),E.compileShader(R),!E.getShaderParameter(R,E.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+E.getShaderInfoLog(R));return R}function F(E){return bA(E,Il,1).map(function($){return{index:wA($,1),ga:Vs($,2),label:_r($,3)!=null?Im($,3):void 0,displayName:_r($,4)!=null?Im($,4):void 0}})}function _(E){return{x:Vs(E,1),y:Vs(E,2),z:Vs(E,3),visibility:_r(E,4)!=null?Vs(E,4):void 0}}function Y(E,$){this.h=E,this.g=$,this.l=0}function Ae(E,$,R){return function(H,X){var K=H.g;if(H.o===void 0){var J=I(K,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),se=I(K,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),me=K.createProgram();if(K.attachShader(me,J),K.attachShader(me,se),K.linkProgram(me),!K.getProgramParameter(me,K.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+K.getProgramInfoLog(me));J=H.o=me,K.useProgram(J),se=K.getUniformLocation(J,"sampler0"),H.j={K:K.getAttribLocation(J,"aVertex"),J:K.getAttribLocation(J,"aTex"),ma:se},H.u=K.createBuffer(),K.bindBuffer(K.ARRAY_BUFFER,H.u),K.enableVertexAttribArray(H.j.K),K.vertexAttribPointer(H.j.K,2,K.FLOAT,!1,0,0),K.bufferData(K.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),K.STATIC_DRAW),K.bindBuffer(K.ARRAY_BUFFER,null),H.s=K.createBuffer(),K.bindBuffer(K.ARRAY_BUFFER,H.s),K.enableVertexAttribArray(H.j.J),K.vertexAttribPointer(H.j.J,2,K.FLOAT,!1,0,0),K.bufferData(K.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),K.STATIC_DRAW),K.bindBuffer(K.ARRAY_BUFFER,null),K.uniform1i(se,0)}J=H.j,K.useProgram(H.o),K.canvas.width=X.width,K.canvas.height=X.height,K.viewport(0,0,X.width,X.height),K.activeTexture(K.TEXTURE0),H.h.bindTexture2d(X.glName),K.enableVertexAttribArray(J.K),K.bindBuffer(K.ARRAY_BUFFER,H.u),K.vertexAttribPointer(J.K,2,K.FLOAT,!1,0,0),K.enableVertexAttribArray(J.J),K.bindBuffer(K.ARRAY_BUFFER,H.s),K.vertexAttribPointer(J.J,2,K.FLOAT,!1,0,0),K.bindFramebuffer(K.DRAW_FRAMEBUFFER?K.DRAW_FRAMEBUFFER:K.FRAMEBUFFER,null),K.clearColor(0,0,0,0),K.clear(K.COLOR_BUFFER_BIT),K.colorMask(!0,!0,!0,!0),K.drawArrays(K.TRIANGLE_FAN,0,4),K.disableVertexAttribArray(J.K),K.disableVertexAttribArray(J.J),K.bindBuffer(K.ARRAY_BUFFER,null),H.h.bindTexture2d(0)}(E,$),typeof E.g.canvas.transferToImageBitmap=="function"?Promise.resolve(E.g.canvas.transferToImageBitmap()):R?Promise.resolve(E.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(E.g.canvas):(E.i===void 0&&(E.i=document.createElement("canvas")),new Promise(function(H){E.i.height=E.g.canvas.height,E.i.width=E.g.canvas.width,E.i.getContext("2d",{}).drawImage(E.g.canvas,0,0,E.g.canvas.width,E.g.canvas.height),H(E.i)}))}function Ce(E){this.g=E}var pe=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Ne(E,$){return $+E}function Oe(E,$){window[E]=$}function Ge(E){if(this.g=E,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=Promise.resolve(),this.Y="",this.C={},this.locateFile=E&&E.locateFile||Ne,typeof window=="object")var $=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if(typeof location>"u")throw Error("solutions can only be loaded on a web page or in a web worker");$=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.$=$,E.options)for(var R=($=o(Object.keys(E.options))).next();!R.done;R=$.next()){R=R.value;var H=E.options[R].default;H!==void 0&&(this.j[R]=typeof H=="function"?H():H)}}function pt(E){var $,R,H,X,K,J,se,me,Se,Ie,De;return C(function(Re){switch(Re.g){case 1:return E.Z?($=E.g.files===void 0?[]:typeof E.g.files=="function"?E.g.files(E.j):E.g.files,y(Re,C(function(Me){switch(Me.g){case 1:return Me.o=2,y(Me,WebAssembly.instantiate(pe),4);case 4:Me.g=3,Me.o=0;break;case 2:return Me.o=0,Me.j=null,Me.return(!1);case 3:return Me.return(!0)}}),2)):Re.return();case 2:if(R=Re.h,typeof window=="object")return Oe("createMediapipeSolutionsWasm",{locateFile:E.locateFile}),Oe("createMediapipeSolutionsPackedAssets",{locateFile:E.locateFile}),J=$.filter(function(Me){return Me.data!==void 0}),se=$.filter(function(Me){return Me.data===void 0}),me=Promise.all(J.map(function(Me){var mt=jt(E,Me.url);if(Me.path!==void 0){var Bt=Me.path;mt=mt.then(function(un){return E.overrideFile(Bt,un),Promise.resolve(un)})}return mt})),Se=Promise.all(se.map(function(Me){return Me.simd===void 0||Me.simd&&R||!Me.simd&&!R?function(mt){var Bt=document.createElement("script");return Bt.setAttribute("src",mt),Bt.setAttribute("crossorigin","anonymous"),new Promise(function(un){Bt.addEventListener("load",function(){un()},!1),Bt.addEventListener("error",function(){un()},!1),document.body.appendChild(Bt)})}(E.locateFile(Me.url,E.$)):Promise.resolve()})).then(function(){var Me,mt,Bt;return C(function(un){if(un.g==1)return Me=window.createMediapipeSolutionsWasm,mt=window.createMediapipeSolutionsPackedAssets,Bt=E,y(un,Me(mt),2);Bt.h=un.h,un.g=0})}),Ie=C(function(Me){return E.g.graph&&E.g.graph.url?Me=y(Me,jt(E,E.g.graph.url),0):(Me.g=0,Me=void 0),Me}),y(Re,Promise.all([Se,me,Ie]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return H=$.filter(function(Me){return Me.simd===void 0||Me.simd&&R||!Me.simd&&!R}).map(function(Me){return E.locateFile(Me.url,E.$)}),importScripts.apply(null,a(H)),X=E,y(Re,createMediapipeSolutionsWasm(Module),6);case 6:X.h=Re.h,E.l=new OffscreenCanvas(1,1),E.h.canvas=E.l,K=E.h.GL.createContext(E.l,{antialias:!1,alpha:!1,ja:typeof WebGL2RenderingContext<"u"?2:1}),E.h.GL.makeContextCurrent(K),Re.g=4;break;case 7:if(E.l=document.createElement("canvas"),!(De=E.l.getContext("webgl2",{}))&&!(De=E.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),Re.return();E.G=De,E.h.canvas=E.l,E.h.createContext(E.l,!0,!0,{});case 4:E.i=new E.h.SolutionWasm,E.Z=!1,Re.g=0}})}function jt(E,$){var R,H;return C(function(X){return $ in E.H?X.return(E.H[$]):(R=E.locateFile($,""),H=fetch(R).then(function(K){return K.arrayBuffer()}),E.H[$]=H,X.return(H))})}function Et(E,$,R){var H,X,K,J,se,me,Se,Ie,De,Re,Me,mt,Bt,un;return C(function(bn){switch(bn.g){case 1:if(!R)return bn.return($);for(H={},X=0,K=o(Object.keys(R)),J=K.next();!J.done;J=K.next())se=J.value,typeof(me=R[se])!="string"&&me.type==="texture"&&$[me.stream]!==void 0&&++X;1<X&&(E.I=!1),Se=o(Object.keys(R)),J=Se.next();case 2:if(J.done){bn.g=4;break}if(Ie=J.value,typeof(De=R[Ie])=="string")return Bt=H,un=Ie,y(bn,function(NA,zP,kf){var e1;return C(function(hN){return typeof kf=="number"||kf instanceof Uint8Array||kf instanceof NA.h.Uint8BlobList?hN.return(kf):kf instanceof NA.h.Texture2dDataOut?((e1=NA.u[zP])||(e1=new Y(NA.h,NA.G),NA.u[zP]=e1),hN.return(Ae(e1,kf,NA.I))):hN.return(void 0)})}(E,Ie,$[De]),14);if(Re=$[De.stream],De.type==="detection_list"){if(Re){for(var Ws=Re.getRectList(),lo=Re.getLandmarksList(),ui=Re.getClassificationsList(),Kt=[],us=0;us<Ws.size();++us){var Uc=Tm(Ws.get(us),Om,Dm);Uc={boundingBox:{xCenter:Vs(Uc,1),yCenter:Vs(Uc,2),height:Vs(Uc,3),width:Vs(Uc,4),rotation:Vs(Uc,5,0),rectId:wA(Uc,6)},landmarks:bA(Tm(lo.get(us),Yv,dN),Pc,1).map(_),V:F(Tm(ui.get(us),_m,uN))},Kt.push(Uc)}Ws=Kt}else Ws=[];H[Ie]=Ws,bn.g=7;break}if(De.type==="proto_list"){if(Re){for(Ws=Array(Re.size()),lo=0;lo<Re.size();lo++)Ws[lo]=Re.get(lo);Re.delete()}else Ws=[];H[Ie]=Ws,bn.g=7;break}if(Re===void 0){bn.g=3;break}if(De.type==="float_list"){H[Ie]=Re,bn.g=7;break}if(De.type==="proto"){H[Ie]=Re,bn.g=7;break}if(De.type!=="texture")throw Error("Unknown output config type: '"+De.type+"'");return(Me=E.u[Ie])||(Me=new Y(E.h,E.G),E.u[Ie]=Me),y(bn,Ae(Me,Re,E.I),13);case 13:mt=bn.h,H[Ie]=mt;case 7:De.transform&&H[Ie]&&(H[Ie]=De.transform(H[Ie])),bn.g=3;break;case 14:Bt[un]=bn.h;case 3:J=Se.next(),bn.g=2;break;case 4:return bn.return(H)}})}function yt(E,$){for(var R=$.name||"$",H=[].concat(a($.wants)),X=new E.h.StringList,K=o($.wants),J=K.next();!J.done;J=K.next())X.push_back(J.value);K=E.h.PacketListener.implement({onResults:function(se){for(var me={},Se=0;Se<$.wants.length;++Se)me[H[Se]]=se.get(Se);var Ie=E.listeners[R];Ie&&(E.D=Et(E,me,$.outs).then(function(De){De=Ie(De);for(var Re=0;Re<$.wants.length;++Re){var Me=me[H[Re]];typeof Me=="object"&&Me.hasOwnProperty&&Me.hasOwnProperty("delete")&&Me.delete()}De&&(E.D=De)}))}}),E.i.attachMultiListener(X,K),X.delete()}function nt(E){var $=this;E=E||{};var R={url:"face_detection_short.binarypb"},H={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new Ge({locateFile:E.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:R,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window=="object"&&window.navigator!==void 0&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(X){var K,J,se,me,Se;return C(function(Ie){switch(Ie.g){case 1:K=o(X==="short"?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"]),J=K.next();case 2:if(J.done){Ie.g=4;break}return se=J.value,me="third_party/mediapipe/modules/face_detection/"+se,y(Ie,jt($.g,se),5);case 5:Se=Ie.h,$.g.overrideFile(me,Se),J=K.next(),Ie.g=2;break;case 4:return R.url=X==="short"?"face_detection_short.binarypb":"face_detection_full.binarypb",H.graphOptionXref.calculatorName=X==="short"?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",Ie.return(!0)}})}},minDetectionConfidence:H}})}(t=Ge.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},t.reset=function(){var E=this;return C(function($){E.i&&(E.i.reset(),E.o={},E.u={}),$.g=0})},t.setOptions=function(E,$){var R=this;if($=$||this.g.options){for(var H=[],X=[],K={},J=o(Object.keys(E)),se=J.next();!se.done;K={R:K.R,S:K.S},se=J.next()){var me=se.value;me in this.j&&this.j[me]===E[me]||(this.j[me]=E[me],(se=$[me])!==void 0&&(se.onChange&&(K.R=se.onChange,K.S=E[me],H.push(function(Se){return function(){return C(function(Ie){if(Ie.g==1)return y(Ie,Se.R(Se.S),2);Ie.h===!0&&(R.s=!0),Ie.g=0})}}(K))),se.graphOptionXref&&(me={valueNumber:se.type===1?E[me]:0,valueBoolean:se.type===0&&E[me],valueString:se.type===2?E[me]:""},se=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),se.graphOptionXref),me),X.push(se))))}H.length===0&&X.length===0||(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(X),this.A=(this.A===void 0?[]:this.A).concat(H))}},t.initialize=function(){var E=this;return C(function($){return $.g==1?y($,pt(E),2):$.g!=3?y($,function(R){var H,X,K,J,se,me,Se,Ie;return C(function(De){if(De.g==1)return R.g.graph&&R.g.graph.url&&R.Y===R.g.graph.url?De.return():(R.s=!0,R.g.graph&&R.g.graph.url?(R.Y=R.g.graph.url,y(De,jt(R,R.g.graph.url),3)):void(De.g=2));for(De.g!=2&&(H=De.h,R.i.loadGraph(H)),X=o(Object.keys(R.C)),K=X.next();!K.done;K=X.next())J=K.value,R.i.overrideFile(J,R.C[J]);if(R.C={},R.g.listeners)for(se=o(R.g.listeners),me=se.next();!me.done;me=se.next())Se=me.value,yt(R,Se);Ie=R.j,R.j={},R.setOptions(Ie),De.g=0})}(E),3):y($,function(R){var H,X,K,J,se,me;return C(function(Se){switch(Se.g){case 1:if(!R.s)return Se.return();if(!R.A){Se.g=2;break}H=o(R.A),X=H.next();case 3:if(X.done){Se.g=5;break}return y(Se,(0,X.value)(),4);case 4:X=H.next(),Se.g=3;break;case 5:R.A=void 0;case 2:if(R.B){for(K=new R.h.GraphOptionChangeRequestList,J=o(R.B),se=J.next();!se.done;se=J.next())me=se.value,K.push_back(me);R.i.changeOptions(K),K.delete(),R.B=void 0}R.s=!1,Se.g=0}})}(E),0)})},t.overrideFile=function(E,$){this.i?this.i.overrideFile(E,$):this.C[E]=$},t.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},t.send=function(E,$){var R,H,X,K,J,se,me,Se,Ie,De=this;return C(function(Re){switch(Re.g){case 1:return De.g.inputs?(R=1e3*($??performance.now()),y(Re,De.D,2)):Re.return();case 2:return y(Re,De.initialize(),3);case 3:for(H=new De.h.PacketDataList,X=o(Object.keys(E)),K=X.next();!K.done;K=X.next())if(J=K.value,se=De.g.inputs[J]){e:{var Me=E[J];switch(se.type){case"video":var mt=De.o[se.stream];if(mt||(mt=new Y(De.h,De.G),De.o[se.stream]=mt),mt.l===0&&(mt.l=mt.h.createTexture()),typeof HTMLVideoElement<"u"&&Me instanceof HTMLVideoElement)var Bt=Me.videoWidth,un=Me.videoHeight;else typeof HTMLImageElement<"u"&&Me instanceof HTMLImageElement?(Bt=Me.naturalWidth,un=Me.naturalHeight):(Bt=Me.width,un=Me.height);un={glName:mt.l,width:Bt,height:un},(Bt=mt.g).canvas.width=un.width,Bt.canvas.height=un.height,Bt.activeTexture(Bt.TEXTURE0),mt.h.bindTexture2d(mt.l),Bt.texImage2D(Bt.TEXTURE_2D,0,Bt.RGBA,Bt.RGBA,Bt.UNSIGNED_BYTE,Me),mt.h.bindTexture2d(0),mt=un;break e;case"detections":for((mt=De.o[se.stream])||(mt=new Ce(De.h),De.o[se.stream]=mt),mt.data||(mt.data=new mt.g.DetectionListData),mt.data.reset(Me.length),un=0;un<Me.length;++un){Bt=Me[un];var bn=mt.data,Ws=bn.setBoundingBox,lo=un,ui=Bt.boundingBox,Kt=new Om;if(Rn(Kt,1,ui.xCenter),Rn(Kt,2,ui.yCenter),Rn(Kt,3,ui.height),Rn(Kt,4,ui.width),Rn(Kt,5,ui.rotation),Rn(Kt,6,ui.rectId),ui=BA(Kt,Dm),Ws.call(bn,lo,ui),Bt.landmarks)for(bn=0;bn<Bt.landmarks.length;++bn){var us=!!(Kt=Bt.landmarks[bn]).visibility;lo=(Ws=mt.data).addNormalizedLandmark,ui=un,Kt=Object.assign(Object.assign({},Kt),{visibility:us?Kt.visibility:0}),Rn(us=new Pc,1,Kt.x),Rn(us,2,Kt.y),Rn(us,3,Kt.z),Kt.visibility&&Rn(us,4,Kt.visibility),Kt=BA(us,qv),lo.call(Ws,ui,Kt)}if(Bt.V)for(bn=0;bn<Bt.V.length;++bn)lo=(Ws=mt.data).addClassification,ui=un,Kt=Bt.V[bn],Rn(us=new Il,2,Kt.ga),Kt.index&&Rn(us,1,Kt.index),Kt.label&&Rn(us,3,Kt.label),Kt.displayName&&Rn(us,4,Kt.displayName),Kt=BA(us,Xv),lo.call(Ws,ui,Kt)}mt=mt.data;break e;default:mt={}}}switch(me=mt,Se=se.stream,se.type){case"video":H.pushTexture2d(Object.assign(Object.assign({},me),{stream:Se,timestamp:R}));break;case"detections":(Ie=me).stream=Se,Ie.timestamp=R,H.pushDetectionList(Ie);break;default:throw Error("Unknown input config type: '"+se.type+"'")}}return De.i.send(H),y(Re,De.D,4);case 4:H.delete(),Re.g=0}})},t.onResults=function(E,$){this.listeners[$||"$"]=E},N("Solution",Ge),N("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(t=nt.prototype).close=function(){return this.g.close(),Promise.resolve()},t.onResults=function(E){this.g.onResults(E)},t.initialize=function(){var E=this;return C(function($){return y($,E.g.initialize(),0)})},t.reset=function(){this.g.reset()},t.send=function(E){var $=this;return C(function(R){return y(R,$.g.send(E),0)})},t.setOptions=function(E){this.g.setOptions(E)},N("FaceDetection",nt),N("FACEDETECTION_LIPS",Rm),N("FACEDETECTION_LEFT_EYE",Pm),N("FACEDETECTION_LEFT_EYEBROW",Um),N("FACEDETECTION_RIGHT_EYE",Lm),N("FACEDETECTION_RIGHT_EYEBROW",jm),N("FACEDETECTION_FACE_OVAL",Jv),N("FACEDETECTION_CONTOURS",Zv),N("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),N("VERSION","0.4.1646425229")}).call(P4);var Ku=function(){return Ku=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},Ku.apply(this,arguments)};function gc(t,e,n,r){return new(n||(n=Promise))(function(s,i){function o(c){try{l(r.next(c))}catch(u){i(u)}}function a(c){try{l(r.throw(c))}catch(u){i(u)}}function l(c){var u;c.done?s(c.value):(u=c.value,u instanceof n?u:new n(function(A){A(u)})).then(o,a)}l((r=r.apply(t,[])).next())})}function yc(t,e){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&u[0]?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(u[0]===6&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(A){u=[6,A],r=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([l,c])}}}var aY=["rightEye","leftEye","noseTip","mouthCenter","rightEarTragion","leftEarTragion"],U4={modelType:"short",runtime:"mediapipe",maxFaces:1},kEe=function(){function t(e){var n=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceDetectorSolution=new IEe.FaceDetection({locateFile:function(r,s){if(e.solutionPath){var i=e.solutionPath.replace(/\/+$/,"");return"".concat(i,"/").concat(r)}return"".concat(s,"/").concat(r)}}),this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode,model:e.modelType}),this.faceDetectorSolution.onResults(function(r){if(n.height=r.image.height,n.width=r.image.width,n.faces=[],r.detections!==null)for(var s=0,i=r.detections;s<i.length;s++){var o=i[s];n.faces.push(n.normalizedToAbsolute(o.landmarks,{xMin:l=(a=o.boundingBox).xCenter-a.width/2,xMax:l+a.width,yMin:c=a.yCenter-a.height/2,yMax:c+a.height,width:a.width,height:a.height}))}var a,l,c})}return t.prototype.normalizedToAbsolute=function(e,n){var r=this;return{keypoints:e.map(function(s,i){return{x:s.x*r.width,y:s.y*r.height,name:aY[i]}}),box:{xMin:n.xMin*this.width,yMin:n.yMin*this.height,xMax:n.xMax*this.width,yMax:n.yMax*this.height,width:n.width*this.width,height:n.height*this.height}}},t.prototype.estimateFaces=function(e,n){return gc(this,void 0,void 0,function(){var r,s;return yc(this,function(i){switch(i.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode})),e instanceof qt?(s=ImageData.bind,[4,bq(e)]):[3,2];case 1:return r=new(s.apply(ImageData,[void 0,i.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:r=e,i.label=3;case 3:return e=r,[4,this.faceDetectorSolution.send({image:e})];case 4:return i.sent(),[2,this.faces]}})})},t.prototype.dispose=function(){this.faceDetectorSolution.close()},t.prototype.reset=function(){this.faceDetectorSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},t.prototype.initialize=function(){return this.faceDetectorSolution.initialize()},t}();function TEe(t){return gc(this,void 0,void 0,function(){var e,n;return yc(this,function(r){switch(r.label){case 0:return e=function(s){if(s==null)return Ku({},U4);var i=Ku({},s);return i.runtime="mediapipe",i.modelType==null&&(i.modelType=U4.modelType),i.maxFaces==null&&(i.maxFaces=U4.maxFaces),i}(t),[4,(n=new kEe(e)).initialize()];case 1:return r.sent(),[2,n]}})})}function lY(t){return t instanceof qt?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function cY(t){return t instanceof qt?t:wq(t)}function L4(t,e){L(t.width!==0,function(){return"".concat(e," width cannot be 0.")}),L(t.height!==0,function(){return"".concat(e," height cannot be 0.")})}function FEe(t,e,n){var r=e.outputTensorSize,s=e.keepAspectRatio,i=e.borderMode,o=e.outputTensorFloatRange,a=lY(t),l=function(d,f){return{xCenter:.5*d.width,yCenter:.5*d.height,width:d.width,height:d.height,rotation:0}}(a),c=function(d,f,h){if(h===void 0&&(h=!1),!h)return{top:0,left:0,right:0,bottom:0};var p=f.height,m=f.width;L4(f,"targetSize"),L4(d,"roi");var y,x,v=p/m,b=d.height/d.width,w=0,C=0;return v>b?(y=d.width,x=d.width*v,C=(1-b/v)/2):(y=d.height/v,x=d.height,w=(1-v/b)/2),d.width=y,d.height=x,{top:C,left:w,right:w,bottom:C}}(l,r,s),u=function(d,f,h,p){var m=d.width,y=d.height,x=1,v=Math.cos(d.rotation),b=Math.sin(d.rotation),w=d.xCenter,C=d.yCenter,B=1/f,S=1/h,N=new Array(16);return N[0]=m*v*x*B,N[1]=-y*b*B,N[2]=0,N[3]=(-.5*m*v*x+.5*y*b+w)*B,N[4]=m*b*x*S,N[5]=y*v*S,N[6]=0,N[7]=(-.5*y*v-.5*m*b*x+C)*S,N[8]=0,N[9]=0,N[10]=m*B,N[11]=0,N[12]=0,N[13]=0,N[14]=0,N[15]=1,function(k){if(k.length!==16)throw new Error("Array length must be 16 but got ".concat(k.length));return[[k[0],k[1],k[2],k[3]],[k[4],k[5],k[6],k[7]],[k[8],k[9],k[10],k[11]],[k[12],k[13],k[14],k[15]]]}(N)}(l,a.width,a.height),A=ce(function(){var d=cY(t),f=_u(function(m,y,x){return L4(x,"inputResolution"),[1/x.width*m[0][0]*y.width,1/x.height*m[0][1]*y.width,m[0][3]*y.width,1/x.width*m[1][0]*y.height,1/x.height*m[1][1]*y.height,m[1][3]*y.height,0,0]}(u,a,r),[1,8]),h=i==="zero"?"constant":"nearest",p=ti.transform(wr(Pe(d,"float32")),f,"bilinear",h,0,[r.height,r.width]);return o!=null?function(m,y){var x=function(v,b,w,C){var B=(C-w)/255;return{scale:B,offset:w-0*B}}(0,0,y[0],y[1]);return ce(function(){return Ee(ne(m,x.scale),x.offset)})}(p,o):p});return{imageTensor:A,padding:c,transformationMatrix:u}}function O6(t){t.reduceBoxesInLowestLayer==null&&(t.reduceBoxesInLowestLayer=!1),t.interpolatedScaleAspectRatio==null&&(t.interpolatedScaleAspectRatio=1),t.fixedAnchorSize==null&&(t.fixedAnchorSize=!1);for(var e=[],n=0;n<t.numLayers;){for(var r=[],s=[],i=[],o=[],a=n;a<t.strides.length&&t.strides[a]===t.strides[n];){var l=D6(t.minScale,t.maxScale,a,t.strides.length);if(a===0&&t.reduceBoxesInLowestLayer)i.push(1),i.push(2),i.push(.5),o.push(.1),o.push(l),o.push(l);else{for(var c=0;c<t.aspectRatios.length;++c)i.push(t.aspectRatios[c]),o.push(l);if(t.interpolatedScaleAspectRatio>0){var u=a===t.strides.length-1?1:D6(t.minScale,t.maxScale,a+1,t.strides.length);o.push(Math.sqrt(l*u)),i.push(t.interpolatedScaleAspectRatio)}}a++}for(var A=0;A<i.length;++A){var d=Math.sqrt(i[A]);r.push(o[A]/d),s.push(o[A]*d)}var f=0,h=0;if(t.featureMapHeight.length>0)f=t.featureMapHeight[n],h=t.featureMapWidth[n];else{var p=t.strides[n];f=Math.ceil(t.inputSizeHeight/p),h=Math.ceil(t.inputSizeWidth/p)}for(var m=0;m<f;++m)for(var y=0;y<h;++y)for(var x=0;x<r.length;++x){var v={xCenter:(y+t.anchorOffsetX)/h,yCenter:(m+t.anchorOffsetY)/f,width:0,height:0};t.fixedAnchorSize?(v.width=1,v.height=1):(v.width=s[x],v.height=r[x]),e.push(v)}n=a}return e}function D6(t,e,n,r){return r===1?.5*(t+e):t+(e-t)*n/(r-1)}function R6(t,e){var n=e[0],r=e[1];return[n*t[0]+r*t[1]+t[3],n*t[4]+r*t[5]+t[7]]}function $Ee(t,e,n,r){return gc(this,void 0,void 0,function(){var s,i,o,a,l;return yc(this,function(c){switch(c.label){case 0:return t.sort(function(u,A){return Math.max.apply(Math,A.score)-Math.max.apply(Math,u.score)}),s=_u(t.map(function(u){return[u.locationData.relativeBoundingBox.yMin,u.locationData.relativeBoundingBox.xMin,u.locationData.relativeBoundingBox.yMax,u.locationData.relativeBoundingBox.xMax]})),i=mr(t.map(function(u){return u.score[0]})),[4,ti.nonMaxSuppressionAsync(s,i,e,n)];case 1:return[4,(o=c.sent()).array()];case 2:return a=c.sent(),l=t.filter(function(u,A){return a.indexOf(A)>-1}),ft([s,i,o]),[2,l]}})})}function _Ee(t,e,n){return gc(this,void 0,void 0,function(){var r,s,i,o,a;return yc(this,function(l){switch(l.label){case 0:return r=t[0],s=t[1],i=function(c,u,A){return ce(function(){var d,f,h,p;A.reverseOutputOrder?(f=Wn(ct(c,[0,A.boxCoordOffset+0],[-1,1])),d=Wn(ct(c,[0,A.boxCoordOffset+1],[-1,1])),p=Wn(ct(c,[0,A.boxCoordOffset+2],[-1,1])),h=Wn(ct(c,[0,A.boxCoordOffset+3],[-1,1]))):(d=Wn(ct(c,[0,A.boxCoordOffset+0],[-1,1])),f=Wn(ct(c,[0,A.boxCoordOffset+1],[-1,1])),h=Wn(ct(c,[0,A.boxCoordOffset+2],[-1,1])),p=Wn(ct(c,[0,A.boxCoordOffset+3],[-1,1]))),f=Ee(ne(ze(f,A.xScale),u.w),u.x),d=Ee(ne(ze(d,A.yScale),u.h),u.y),A.applyExponentialOnBoxSize?(h=ne(js(ze(h,A.hScale)),u.h),p=ne(js(ze(p,A.wScale)),u.w)):(h=ne(ze(h,A.hScale),u.h),p=ne(ze(p,A.wScale),u.h));var m=We(d,ze(h,2)),y=We(f,ze(p,2)),x=Ee(d,ze(h,2)),v=Ee(f,ze(p,2)),b=qn([oe(m,[A.numBoxes,1]),oe(y,[A.numBoxes,1]),oe(x,[A.numBoxes,1]),oe(v,[A.numBoxes,1])],1);if(A.numKeypoints)for(var w=0;w<A.numKeypoints;++w){var C=A.keypointCoordOffset+w*A.numValuesPerKeypoint,B=void 0,S=void 0;A.reverseOutputOrder?(B=Wn(ct(c,[0,C],[-1,1])),S=Wn(ct(c,[0,C+1],[-1,1]))):(S=Wn(ct(c,[0,C],[-1,1])),B=Wn(ct(c,[0,C+1],[-1,1])));var N=Ee(ne(ze(B,A.xScale),u.w),u.x),k=Ee(ne(ze(S,A.yScale),u.h),u.y);b=qn([b,oe(N,[A.numBoxes,1]),oe(k,[A.numBoxes,1])],1)}return b})}(s,e,n),o=ce(function(){var c=r;return n.sigmoidScore?(n.scoreClippingThresh!=null&&(c=ii(r,-n.scoreClippingThresh,n.scoreClippingThresh)),c=xa(c)):c}),[4,OEe(i,o,n)];case 1:return a=l.sent(),ft([i,o]),[2,a]}})})}function OEe(t,e,n){return gc(this,void 0,void 0,function(){var r,s,i,o,a,l,c,u,A,d,f,h;return yc(this,function(p){switch(p.label){case 0:return r=[],[4,t.data()];case 1:return s=p.sent(),[4,e.data()];case 2:for(i=p.sent(),o=0;o<n.numBoxes;++o)if(!(n.minScoreThresh!=null&&i[o]<n.minScoreThresh||(a=o*n.numCoords,l=DEe(s[a+0],s[a+1],s[a+2],s[a+3],i[o],n.flipVertically,o),(c=l.locationData.relativeBoundingBox).width<0||c.height<0))){if(n.numKeypoints>0)for((u=l.locationData).relativeKeypoints=[],A=n.numKeypoints*n.numValuesPerKeypoint,d=0;d<A;d+=n.numValuesPerKeypoint)f=a+n.keypointCoordOffset+d,h={x:s[f+0],y:n.flipVertically?1-s[f+1]:s[f+1]},u.relativeKeypoints.push(h);r.push(l)}return[2,r]}})})}function DEe(t,e,n,r,s,i,o){return{score:[s],ind:o,locationData:{relativeBoundingBox:{xMin:e,yMin:i?1-n:t,xMax:r,yMax:i?1-t:n,width:r-e,height:n-t}}}}var d2,REe={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:128,inputSizeWidth:128,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},PEe={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:0,featureMapHeight:[],featureMapWidth:[],numLayers:1,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[4],aspectRatios:[1],fixedAnchorSize:!0},j4={runtime:"tfjs",modelType:"short",maxFaces:1,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"},UEe={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:896,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:128,yScale:128,hScale:128,wScale:128,minScoreThresh:.5},LEe={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2304,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.6},jEe={outputTensorSize:{width:128,height:128},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},MEe={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},QEe=function(){function t(e,n,r){this.detectorModel=n,this.maxFaces=r,e==="full"?(this.imageToTensorConfig=MEe,this.tensorsToDetectionConfig=LEe,this.anchors=O6(PEe)):(this.imageToTensorConfig=jEe,this.tensorsToDetectionConfig=UEe,this.anchors=O6(REe));var s=mr(this.anchors.map(function(l){return l.width})),i=mr(this.anchors.map(function(l){return l.height})),o=mr(this.anchors.map(function(l){return l.xCenter})),a=mr(this.anchors.map(function(l){return l.yCenter}));this.anchorTensor={x:o,y:a,w:s,h:i}}return t.prototype.dispose=function(){this.detectorModel.dispose(),ft([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},t.prototype.reset=function(){},t.prototype.detectFaces=function(e,n){return n===void 0&&(n=!1),gc(this,void 0,void 0,function(){var r,s,i,o,a,l,c,u,A,d,f;return yc(this,function(h){switch(h.label){case 0:return e==null?(this.reset(),[2,[]]):(r=ce(function(){var p=Pe(cY(e),"float32");return n&&(p=Wn(ti.flipLeftRight(wr(p,0)),[0])),p}),s=FEe(r,this.imageToTensorConfig),i=s.imageTensor,o=s.transformationMatrix,a=this.detectorModel.execute(i,"Identity:0"),l=function(p){return ce(function(){var m=function(v){return ce(function(){return[ct(v,[0,0,0],[1,-1,1]),ct(v,[0,0,1],[1,-1,-1])]})}(p),y=m[0],x=m[1];return{boxes:Wn(x),logits:Wn(y)}})}(a),c=l.boxes,[4,_Ee([u=l.logits,c],this.anchorTensor,this.tensorsToDetectionConfig)]);case 1:return(A=h.sent()).length===0?(ft([r,i,a,u,c]),[2,A]):[4,$Ee(A,this.maxFaces,.3)];case 2:return d=h.sent(),f=function(p,m){p===void 0&&(p=[]);var y,x=(y=m,[].concat.apply([],y));return p.forEach(function(v){var b=v.locationData;b.relativeKeypoints.forEach(function(k){var O=R6(x,[k.x,k.y]),U=O[0],P=O[1];k.x=U,k.y=P});var w=b.relativeBoundingBox,C=Number.MAX_VALUE,B=Number.MAX_VALUE,S=Number.MIN_VALUE,N=Number.MIN_VALUE;[[w.xMin,w.yMin],[w.xMin+w.width,w.yMin],[w.xMin+w.width,w.yMin+w.height],[w.xMin,w.yMin+w.height]].forEach(function(k){var O=R6(x,k),U=O[0],P=O[1];C=Math.min(C,U),S=Math.max(S,U),B=Math.min(B,P),N=Math.max(N,P)}),b.relativeBoundingBox={xMin:C,xMax:S,yMin:B,yMax:N,width:S-C,height:N-B}}),p}(d,o),ft([r,i,a,u,c]),[2,f]}})})},t.prototype.estimateFaces=function(e,n){return gc(this,void 0,void 0,function(){var r,s;return yc(this,function(i){return r=lY(e),s=!!n&&n.flipHorizontal,[2,this.detectFaces(e,s).then(function(o){return o.map(function(a){for(var l=a.locationData.relativeKeypoints.map(function(h,p){return Ku(Ku({},h),{x:h.x*r.width,y:h.y*r.height,name:aY[p]})}),c=a.locationData.relativeBoundingBox,u=0,A=["width","xMax","xMin"];u<A.length;u++)c[A[u]]*=r.width;for(var d=0,f=["height","yMax","yMin"];d<f.length;d++)c[f[d]]*=r.height;return{keypoints:l,box:c}})})]})})},t}();function HEe(t){return gc(this,void 0,void 0,function(){var e,n,r;return yc(this,function(s){switch(s.label){case 0:return e=function(i){if(i==null)return Ku({},j4);var o=Ku({},i);return o.modelType==null&&(o.modelType=j4.modelType),o.maxFaces==null&&(o.maxFaces=j4.maxFaces),o.detectorModelUrl==null&&(o.modelType==="full"?o.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/full/1":o.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"),o}(t),n=typeof e.detectorModelUrl=="string"&&e.detectorModelUrl.indexOf("https://tfhub.dev")>-1,[4,iY(e.detectorModelUrl,{fromTFHub:n})];case 1:return r=s.sent(),[2,new QEe(e.modelType,r,e.maxFaces)]}})})}function zEe(t,e){return gc(this,void 0,void 0,function(){var n,r;return yc(this,function(s){if(t===d2.MediaPipeFaceDetector){if(r=void 0,(n=e)!=null){if(n.runtime==="tfjs")return[2,HEe(n)];if(n.runtime==="mediapipe")return[2,TEe(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' "+"or 'mediapipe', but got ".concat(r))}throw new Error("".concat(t," is not a supported model name."))})})}function M4(t){return t.width*t.height}function P6(t){var e=t.xCenter-t.width/2,n=e+t.width,r=t.yCenter-t.height/2;return{xMin:e,xMax:n,yMin:r,yMax:r+t.height,width:t.width,height:t.height}}function VEe(t,e){var n=P6(t),r=P6(e);if(!function(o,a){return!(o.xMax<a.xMin||a.xMax<o.xMin||o.yMax<a.yMin||a.yMax<o.yMin)}(n,r))return 0;var s=M4(function(o,a){var l=Math.max(o.xMin,a.xMin),c=Math.min(o.xMax,a.xMax),u=Math.max(o.yMin,a.yMin),A=Math.min(o.yMax,a.yMax);return{xMin:l,xMax:c,yMin:u,yMax:A,width:Math.max(c-l,0),height:Math.max(A-u,0)}}(n,r)),i=M4(n)+M4(r)-s;return i>0?s/i:0}function WEe(t,e,n,r){var s=t.width,i=t.height,o=1,a=Math.cos(t.rotation),l=Math.sin(t.rotation),c=t.xCenter,u=t.yCenter,A=1/e,d=1/n,f=new Array(16);return f[0]=s*a*o*A,f[1]=-i*l*A,f[2]=0,f[3]=(-.5*s*a*o+.5*i*l+c)*A,f[4]=s*l*o*d,f[5]=i*a*d,f[6]=0,f[7]=(-.5*i*a-.5*s*l*o+u)*d,f[8]=0,f[9]=0,f[10]=s*A,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,function(h){if(h.length!==16)throw new Error("Array length must be 16 but got "+h.length);return[[h[0],h[1],h[2],h[3]],[h[4],h[5],h[6],h[7]],[h[8],h[9],h[10],h[11]],[h[12],h[13],h[14],h[15]]]}(f)}function uY(t){return t instanceof qt?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function AY(t){return t-2*Math.PI*Math.floor((t+Math.PI)/(2*Math.PI))}function dY(t){return t instanceof qt?t:wq(t)}function Q4(t,e){L(t.width!==0,function(){return e+" width cannot be 0."}),L(t.height!==0,function(){return e+" height cannot be 0."})}function GEe(t,e){var n=function(r,s,i,o){var a=s-r,l=o-i,c=l/a;return{scale:c,offset:i-r*c}}(0,255,e[0],e[1]);return ce(function(){return Ee(ne(t,n.scale),n.offset)})}function KEe(t,e,n){var r=e.outputTensorSize,s=e.keepAspectRatio,i=e.outputTensorFloatRange,o=uY(t),a=function(A,d){return d?{xCenter:d.xCenter*A.width,yCenter:d.yCenter*A.height,width:d.width*A.width,height:d.height*A.height,rotation:d.rotation}:{xCenter:.5*A.width,yCenter:.5*A.height,width:A.width,height:A.height,rotation:0}}(o,n),l=function(A,d,f){if(f===void 0&&(f=!1),!f)return{top:0,left:0,right:0,bottom:0};var h=d.height,p=d.width;Q4(d,"targetSize"),Q4(A,"roi");var m,y,x=h/p,v=A.height/A.width,b=0,w=0;return x>v?(m=A.width,y=A.width*x,w=(1-v/x)/2):(m=A.height/x,y=A.height,b=(1-x/v)/2),A.width=m,A.height=y,{top:w,left:b,right:b,bottom:w}}(a,r,s),c=WEe(a,o.width,o.height),u=ce(function(){var A=dY(t),d=_u(function(p,m,y){return Q4(y,"inputResolution"),[1/y.width*p[0][0]*m.width,1/y.height*p[0][1]*m.width,p[0][3]*m.width,1/y.width*p[1][0]*m.height,1/y.height*p[1][1]*m.height,p[1][3]*m.height,0,0]}(c,o,r),[1,8]),f="nearest",h=ti.transform(wr(Pe(A,"float32")),d,"bilinear",f,0,[r.height,r.width]);return i!=null?GEe(h,i):h});return{imageTensor:u,padding:l,transformationMatrix:c}}function U6(t){return{xCenter:t.xMin+t.width/2,yCenter:t.yMin+t.height/2,width:t.width,height:t.height}}function XEe(t){var e=t.relativeKeypoints;if(e.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var n=Number.MAX_VALUE,r=Number.MAX_VALUE,s=Number.MIN_VALUE,i=Number.MIN_VALUE;return e.forEach(function(o){n=Math.min(n,o.x),s=Math.max(s,o.x),r=Math.min(r,o.y),i=Math.max(i,o.y)}),{xCenter:(n+s)/2,yCenter:(r+i)/2,width:s-n,height:i-r}}function L6(t,e,n,r,s){var i=n==="rect"?function(o,a,l){var c,u=o.locationData;return c=U6(u.boundingBox),c}(t):function(o,a){var l=o.locationData;return a==="boundingbox"?U6(l.relativeBoundingBox):XEe(l)}(t,e);return s&&(i.rotation=function(o,a,l){var c,u=o.locationData,A=l.rotationVectorStartKeypointIndex,d=l.rotationVectorEndKeypointIndex;c=l.rotationVectorTargetAngle?l.rotationVectorTargetAngle:Math.PI*l.rotationVectorTargetAngleDegree/180;var f=u.relativeKeypoints[A].x*a.width,h=u.relativeKeypoints[A].y*a.height,p=u.relativeKeypoints[d].x*a.width,m=u.relativeKeypoints[d].y*a.height;return AY(c-Math.atan2(-(m-h),p-f))}(t,r,s)),i}function qEe(t,e,n){for(var r=0;r<e.length;++r){var s=e[r],i=n[t[r]];i.x=s.x,i.y=s.y}}function YEe(t,e,n,r){if(typeof e=="string"){if(e==="copy")for(var s=0;s<n.length;++s)r[t[s]].z=n[s].z}else{var i=function(o,a){for(var l=0,c=0;c<a.length;++c)l+=o[a[c]].z;return l/a.length}(r,e);for(s=0;s<t.length;++s)r[t[s]].z=i}}function JEe(t,e){for(var n=function(a){var l=[].concat.apply([],a.map(function(f){return f.indexesMapping}));if(l.length===0)throw new Error("There should be at least one landmark in indexes mapping");var c=l[0],u=l[0],A=new Set(l);A.forEach(function(f){c=Math.min(c,f),u=Math.max(u,f)});var d=A.size;if(c!==0)throw new Error("Indexes are expected to start with 0 instead of "+c);if(u+1!==d)throw new Error("Indexes should have no gaps but "+(u-d+1)+" indexes are missing");return d}(e),r=new Array(n).fill(null).map(Object),s=0;s<t.length;++s){var i=t[s],o=e[s];if(i.length!==o.indexesMapping.length)throw new Error("There are "+i.length+" refinement landmarks while mapping has "+o.indexesMapping.length);qEe(o.indexesMapping,i,r),YEe(o.indexesMapping,o.zRefinement,i,r)}return r}function ZEe(t,e){return t.map(function(n){var r=va(va({},n),{x:n.x*e.width,y:n.y*e.height});return n.z!=null&&(r.z=n.z*e.width),r})}function eIe(t,e){return t==="none"?e:function(n){return 1/(1+Math.exp(-n))}(e)}function $A(t,e,n,r){return ql(this,void 0,void 0,function(){var s,i,o,a,l,c,u,A;return Yl(this,function(d){switch(d.label){case 0:return n=n||e.flipHorizontally||!1,r=r||e.flipVertically||!1,s=t.size,i=s/e.numLandmarks,[4,t.data()];case 1:for(o=d.sent(),a=[],l=0;l<e.numLandmarks;++l)c=l*i,(A={x:0,y:0}).x=n?e.inputImageWidth-o[c]:o[c],i>1&&(A.y=r?e.inputImageHeight-o[c+1]:o[c+1]),i>2&&(A.z=o[c+2]),i>3&&(A.score=eIe(e.visibilityActivation,o[c+3])),a.push(A);for(u=0;u<a.length;++u)(A=a[u]).x=A.x/e.inputImageWidth,A.y=A.y/e.inputImageHeight,A.z=A.z/e.inputImageWidth/(e.normalizeZ||1);return[2,a]}})})}function j6(t,e,n){var r=t.width,s=t.height,i=t.rotation;if(n.rotation==null&&n.rotationDegree==null||(i=function(c,u){return u.rotation!=null?c+=u.rotation:u.rotationDegree!=null&&(c+=Math.PI*u.rotationDegree/180),AY(c)}(i,n)),i===0)t.xCenter=t.xCenter+r*n.shiftX,t.yCenter=t.yCenter+s*n.shiftY;else{var o=(e.width*r*n.shiftX*Math.cos(i)-e.height*s*n.shiftY*Math.sin(i))/e.width,a=(e.width*r*n.shiftX*Math.sin(i)+e.height*s*n.shiftY*Math.cos(i))/e.height;t.xCenter=t.xCenter+o,t.yCenter=t.yCenter+a}{var l=Math.max(r*e.width,s*e.height);r=l/e.width,s=l/e.height}return t.width=r*n.scaleX,t.height=s*n.scaleY,t}(d2||(d2={})).MediaPipeFaceDetector="MediaPipeFaceDetector";var H4={runtime:"tfjs",maxFaces:1,refineLandmarks:!1,landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"},z4={flipHorizontal:!1,staticImageMode:!1},M6={shiftX:0,shiftY:0,scaleX:1.5,scaleY:1.5},tIe={outputTensorSize:{width:192,height:192},outputTensorFloatRange:[0,1]},Q6={numLandmarks:468,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},nIe={numLandmarks:80,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},H6={numLandmarks:71,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},z6={numLandmarks:5,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},rIe={indexesMapping:Array.from(Array(468).keys()),zRefinement:"copy"},sIe={indexesMapping:[61,146,91,181,84,17,314,405,321,375,291,185,40,39,37,0,267,269,270,409,78,95,88,178,87,14,317,402,318,324,308,191,80,81,82,13,312,311,310,415,76,77,90,180,85,16,315,404,320,307,306,184,74,73,72,11,302,303,304,408,62,96,89,179,86,15,316,403,319,325,292,183,42,41,38,12,268,271,272,407],zRefinement:"none"},iIe={indexesMapping:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173,130,25,110,24,23,22,26,112,243,247,30,29,27,28,56,190,226,31,228,229,230,231,232,233,244,113,225,224,223,222,221,189,35,124,46,53,52,65,143,111,117,118,119,120,121,128,245,156,70,63,105,66,107,55,193],zRefinement:"none"},oIe={indexesMapping:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398,359,255,339,254,253,252,256,341,463,467,260,259,257,258,286,414,446,261,448,449,450,451,452,453,464,342,445,444,443,442,441,413,265,353,276,283,282,295,372,340,346,347,348,349,350,357,465,383,300,293,334,296,336,285,417],zRefinement:"none"},aIe={indexesMapping:[468,469,470,471,472],zRefinement:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173]},lIe={indexesMapping:[473,474,475,476,477],zRefinement:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398]},f2,cIe=function(){function t(e,n,r,s){this.detector=e,this.landmarkModel=n,this.maxFaces=r,this.withAttention=s,this.prevFaceRectsFromLandmarks=null}return t.prototype.estimateFaces=function(e,n){return ql(this,void 0,void 0,function(){var r,s,i,o,a,l,c,u,A,d,f,h,p,m=this;return Yl(this,function(y){switch(y.label){case 0:return r=function(b){if(b==null)return va({},z4);var w=va({},b);return w.flipHorizontal==null&&(w.flipHorizontal=z4.flipHorizontal),w.staticImageMode==null&&(w.staticImageMode=z4.staticImageMode),w}(n),e==null?(this.reset(),[2,[]]):(s=uY(e),i=ce(function(){var b=Pe(dY(e),"float32");return r.flipHorizontal&&(b=Wn(ti.flipLeftRight(wr(b,0)),[0])),b}),o=this.prevFaceRectsFromLandmarks,r.staticImageMode||o==null||o.length<this.maxFaces?[4,this.detector.detectFaces(i,!1)]:[3,2]);case 1:return(l=y.sent()).length===0?(this.reset(),i.dispose(),[2,[]]):(a=l.map(function(b){return m.faceDetectionFrontDetectionToRoi(b,s)}),[3,3]);case 2:a=[],y.label=3;case 3:return x=.5,v=[],[a,o||[]].forEach(function(b){return b.forEach(function(w){(v=v.filter(function(C){return VEe(w,C)<=x})).push(w)})}),c=v,[4,Promise.all(c.map(function(b){return m.faceLandmark(b,i)}))];case 4:for(u=y.sent(),A=[],this.prevFaceRectsFromLandmarks=[],d=0;d<u.length;++d)(f=u[d])!=null&&(this.prevFaceRectsFromLandmarks.push(this.faceLandmarksToRoi(f,s)),(h=ZEe(f,s))!=null&&h.forEach(function(b,w){var C=oY.get(w);C!=null&&(b.name=C)}),p=tT(h),A.push({keypoints:h,box:p.locationData.relativeBoundingBox}));return i.dispose(),[2,A]}var x,v})})},t.prototype.dispose=function(){this.detector.dispose(),this.landmarkModel.dispose()},t.prototype.reset=function(){this.detector.reset(),this.prevFaceRectsFromLandmarks=null},t.prototype.faceDetectionFrontDetectionToRoi=function(e,n){return j6(L6(e,"boundingbox","normRect",n,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:1,rotationVectorTargetAngleDegree:0}),n,M6)},t.prototype.faceLandmark=function(e,n){return ql(this,void 0,void 0,function(){var r,s,i,o,a,l,c;return Yl(this,function(u){switch(u.label){case 0:return r=KEe(n,tIe,e).imageTensor,s=["output_faceflag"].concat(this.withAttention?["output_mesh_identity","output_lips","Identity_6:0","Identity_1:0","Identity_2:0","Identity_5:0"]:["output_mesh"]),i=this.landmarkModel.execute(r,s),o=i[0],a=i.slice(1),[4,o.data()];case 1:return u.sent()[0]<.5?(ft(i),ft(r),[2,null]):this.withAttention?[4,this.tensorsToFaceLandmarksWithAttention(a)]:[3,3];case 2:return l=u.sent(),[3,5];case 3:return[4,this.tensorsToFaceLandmarks(a)];case 4:l=u.sent(),u.label=5;case 5:return c=function(A,d,f){f===void 0&&(f={ignoreRotation:!1});for(var h=[],p=0,m=A;p<m.length;p++){var y=m[p],x=y.x-.5,v=y.y-.5,b=f.ignoreRotation?0:d.rotation,w=Math.cos(b)*x-Math.sin(b)*v,C=Math.sin(b)*x+Math.cos(b)*v;w=w*d.width+d.xCenter,C=C*d.height+d.yCenter;var B=y.z*d.width,S=va({},y);S.x=w,S.y=C,S.z=B,h.push(S)}return h}(l,e),ft(i),ft(r),[2,c]}})})},t.prototype.tensorsToFaceLandmarks=function(e){return ql(this,void 0,void 0,function(){return Yl(this,function(n){return[2,$A(e[0],Q6)]})})},t.prototype.tensorsToFaceLandmarksWithAttention=function(e){return ql(this,void 0,void 0,function(){var n,r,s,i,o,a;return Yl(this,function(l){switch(l.label){case 0:return[4,$A(e[0],Q6)];case 1:return n=l.sent(),[4,$A(e[1],nIe)];case 2:return r=l.sent(),[4,$A(e[3],H6)];case 3:return s=l.sent(),[4,$A(e[5],H6)];case 4:return i=l.sent(),[4,$A(e[4],z6)];case 5:return o=l.sent(),[4,$A(e[2],z6)];case 6:return a=l.sent(),[2,JEe([n,r,s,i,o,a],[rIe,sIe,iIe,oIe,aIe,lIe])]}})})},t.prototype.faceLandmarksToRoi=function(e,n){return j6(L6(tT(e),"boundingbox","normRect",n,{rotationVectorStartKeypointIndex:33,rotationVectorEndKeypointIndex:263,rotationVectorTargetAngleDegree:0}),n,M6)},t}();function uIe(t){return ql(this,void 0,void 0,function(){var e,n,r,s;return Yl(this,function(i){switch(i.label){case 0:return e=function(o){if(o==null)return va({},H4);var a=va({},o);return a.runtime="tfjs",a.maxFaces==null&&(a.maxFaces=H4.maxFaces),a.refineLandmarks==null&&(a.refineLandmarks=H4.refineLandmarks),a.landmarkModelUrl==null&&(a.landmarkModelUrl=a.refineLandmarks?"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/attention_mesh/1":"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"),a}(t),n=typeof e.landmarkModelUrl=="string"&&e.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,iY(e.landmarkModelUrl,{fromTFHub:n})];case 1:return r=i.sent(),[4,zEe(d2.MediaPipeFaceDetector,{modelType:"short",maxFaces:e.maxFaces,detectorModelUrl:e.detectorModelUrl,runtime:e.runtime})];case 2:return s=i.sent(),[2,new cIe(s,r,e.maxFaces,e.refineLandmarks)]}})})}function AIe(t,e){return ql(this,void 0,void 0,function(){var n,r;return Yl(this,function(s){if(t===f2.MediaPipeFaceMesh){if(r=void 0,(n=e)!=null){if(n.runtime==="tfjs")return[2,uIe(n)];if(n.runtime==="mediapipe")return[2,EEe(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r)}throw new Error(t+" is not a supported model name.")})})}(function(t){t.MediaPipeFaceMesh="MediaPipeFaceMesh"})(f2||(f2={}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fY={kernelName:yS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,rm(Pe(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dIe={kernelName:cx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=fn(Pe(n,"float32")),s=rs(We(at(1),r));return In(ze(t,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fIe={kernelName:ux,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=rs(We(fn(Pe(n,"float32")),1));return ze(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hIe={kernelName:em,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=vt(n.shape,r.shape);return{a:()=>{let a=t;const l=Fr(n.shape,s);return l.length>0&&(a=Je(a,l)),oe(a,n.shape)},b:()=>{let a=t;const l=Fr(r.shape,s);return l.length>0&&(a=Je(a,l)),oe(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pIe={kernelName:xS,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,s)=>{n[s]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mIe={kernelName:vS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Lt(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gIe={kernelName:bS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Lt(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yIe={kernelName:Ax,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,rs(We(at(1),fn(Pe(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xIe={kernelName:dx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=rs(Ee(at(1),fn(Pe(n,"float32"))));return ze(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vIe={kernelName:px,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=vt(n.shape,r.shape);return{a:()=>{const a=Ee(fn(n),fn(r));let l=ne(t,ze(r,a));const c=Fr(n.shape,s);return c.length>0&&(l=Je(l,c)),oe(l,n.shape)},b:()=>{const a=Ee(fn(n),fn(r));let l=In(ne(t,ze(n,a)));const c=Fr(r.shape,s);return c.length>0&&(l=Je(l,c)),oe(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bIe={kernelName:fx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,Ee(fn(Pe(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wIe={kernelName:hx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,We(at(1),fn(Pe(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CIe(t,e,n,r,s,i){const o=Q(t,"dy","avgPool3dGrad"),a=Q(e,"input","avgPool3dGrad");let l=o,c=a,u=!1;a.rank===4&&(u=!0,l=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=oe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),L(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),L(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Hs("avgPool3dGrad",s,i);const A={dy:l,input:c},d={filterSize:n,strides:r,pad:s,dimRoundingMode:i},f=re.runKernel(k_,A,d);return u?oe(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const SIe=ee({avgPool3dGrad_:CIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BIe={kernelName:CS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:o,dimRoundingMode:a}=n;return{x:()=>SIe(t,r,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NIe(t,e,n,r,s){const i=Q(t,"dy","avgPoolGrad"),o=Q(e,"input","avgPoolGrad");L(o.rank===i.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${i.rank})`);let a=o,l=i,c=!1;o.rank===3&&(c=!0,a=oe(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),L(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),L(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const u={dy:l,input:a},A={filterSize:n,strides:r,pad:s},d=re.runKernel(I_,u,A);return c?oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const EIe=ee({avgPoolGrad_:NIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IIe={kernelName:wS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:o}=n;return{x:()=>EIe(t,r,s,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kIe={kernelName:SS,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,s]=e,{transposeA:i,transposeB:o}=n;return!i&&!o?{a:()=>$t(t,s,!1,!0),b:()=>$t(r,t,!0,!1)}:!i&&o?{a:()=>$t(t,s,!1,!1),b:()=>$t(t,r,!0,!1)}:i&&!o?{a:()=>$t(s,t,!1,!0),b:()=>$t(r,t,!1,!1)}:{a:()=>$t(s,t,!0,!0),b:()=>$t(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TIe={kernelName:BS,gradFunc:(t,e,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>$B(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FIe={kernelName:D1e,gradFunc:(t,e,n)=>{const r=n,s=r.inputShape,i=r.shape,o=Array.from(i);for(let l=s.length-1;l>=0;l--)if(s[l]===i[l])o[l]=1;else if(s[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${i}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>Je(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ie={kernelName:mx,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ie={kernelName:gx,gradFunc:t=>({x:()=>Lt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OIe={kernelName:yx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:s,clipValueMax:i}=n;return{x:()=>ys(hl(AA(r,s),cf(r,i)),t,Lt(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DIe={kernelName:ES,inputsToSave:["x"],gradFunc:fY.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RIe={kernelName:IS,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:s}=n,i=kt(s,e[0].shape)[0],o=r.map(l=>l[i]);return $i(t,o,i).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PIe={kernelName:kS,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{dilations:i,strides:o,pad:a,dataFormat:l}=n;return L(Wu(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>UO(r.shape,t,s,o,a,l),filter:()=>yD(r,t,s.shape,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UIe={kernelName:TS,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{strides:i,pad:o,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>Gu(t,s,i,o,a,1,l),filter:()=>yD(t,r,s.shape,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LIe(t,e,n,r,s){let i=t;t.rank===4&&(i=oe(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=oe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),L(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),L(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),L(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),L(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),L(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:i,dy:o},l={strides:r,pad:s,filterShape:n};return re.runKernel(O_,a,l)}const jIe=ee({conv3DBackpropFilter_:LIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MIe={kernelName:FS,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i}=n;L(Wu(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,a]=e;return{x:()=>bX(o.shape,t,a,s,i),filter:()=>jIe(o,t,a.shape,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QIe={kernelName:xx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(In(lD(Pe(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HIe={kernelName:vx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(cD(Pe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zIe={kernelName:$S,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s,exclusive:i,reverse:o}=n;return{x:()=>{const a=Hn([s],r.rank);let l=MO(t,s,i,!o);return a!=null&&(l=Ut(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VIe={kernelName:_S,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i,dimRoundingMode:o}=n,a=r??[1,1];L(Wu(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,c]=e;return L(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),L(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),L(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),L(ss(s,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${a}'.`),Hs("depthwiseConv2d",i,o),{x:()=>rq(l.shape,t,c,s,i,a,o),filter:()=>nq(l,t,c.shape,s,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WIe={kernelName:OS,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,i={x:r,filter:s,dy:t},o={x:r,filter:s,dy:t};return{x:()=>re.runKernel(wk,i,n),filter:()=>re.runKernel(Ck,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GIe={kernelName:wx,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>re.runKernel(z_,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KIe={kernelName:Cx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ne(js(In(fn(n))),2/Math.sqrt(Math.PI));return{x:()=>ne(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XIe={kernelName:Sx,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qIe={kernelName:RS,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>oe(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YIe={kernelName:Bx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,js(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JIe={kernelName:Nx,gradFunc:t=>({x:()=>Lt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZIe={kernelName:Ex,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=vt(n.shape,r.shape);return{a:()=>{const a=ze(t,Pe(r,"float32")),l=Fr(n.shape,s);return l.length>0?oe(Je(a,l),n.shape):a},b:()=>{let a=ne(t,Pe(n,"float32"));const l=Fr(r.shape,s);l.length>0&&(a=oe(Je(a,l),r.shape));const c=fn(r);return In(ze(a,Pe(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eke={kernelName:PS,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[s,i,o,a]=e,l=a??at(1),c=Fr(i.shape,s.shape),u=[];if(i.rank===1){for(let b=0;b<s.shape.length-1;++b)u.push(s.shape[b]);u.push(1)}const A=We(s,i),d=ne(t,l),f=iD(Ee(o,at(r))),h=ne(ne(ne(f,f),f),at(-.5));return{x:()=>i.rank===1?oe(ne(ne(t,Fo(oe(f,[1,1,1,i.shape[0]]),u)),l),s.shape):oe(ne(ne(t,f),l),s.shape),mean:()=>{let b=ne(ne(f,at(-1)),d);return i.rank===1&&(b=Je(b,c)),oe(b,i.shape)},variance:()=>{let b=ne(ne(h,A),d);return i.rank===1&&(b=Je(b,c)),oe(b,i.shape)},scale:()=>{const b=ne(A,f);let w=ne(t,b);return i.rank===1&&(w=Je(w,c)),oe(w,i.shape)},offset:()=>{let b=t;return i.rank===1&&(b=Je(b,c)),oe(b,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tke={kernelName:US,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,s]=e,{axis:i,batchDims:o}=n,a=kt(i,r.shape)[0],l=(c,u,A)=>()=>{const d=c.shape,f=u.size,h=d.slice(0,a),p=h.length,m=d.slice(i,d.length).slice(1),y=m.length,x=V6(0,p),v=V6(p+1,p+1+y),b=W6([h,[f],m]),w=oe(A,b),C=oe(u,[f]),B=W6([[p],x,v]),S=Ut(w,B);let N=pD(S,C,c.shape[a]);const k=uA(B);return N=Ut(N,k),N};if(o===1){const c=r.shape[0],u=r.split(c,0);return{x:()=>Oi(u.map((f,h)=>l(f,s.slice(h,1),t.slice(h,1))())).reshape(r.shape),indices:()=>s}}else return{x:l(r,s,t),indices:()=>s}}};function V6(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function W6(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nke={kernelName:Ix,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Lt(n),b:()=>Lt(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rke={kernelName:kx,gradFunc:t=>({x:()=>Pe(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ske={kernelName:Tx,gradFunc:t=>({x:()=>Lt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ike={kernelName:Fx,gradFunc:t=>({x:()=>Lt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oke={kernelName:$x,gradFunc:t=>({x:()=>Lt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ake={kernelName:jS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:s}=n,i=Li(r,0);return{x:()=>ys(i,t,ne(t,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lke={kernelName:Ox,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,Ee(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cke={kernelName:_x,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,Pe(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uke={kernelName:P1e,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;return{logits:()=>{const o=js(r);return We(t,ne(Je(t,s,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ake(t,e,n,r=5,s=1,i=1,o=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:s,alpha:i,beta:o};return re.runKernel(J_,a,l)}const dke=ee({localResponseNormalizationBackprop_:Ake});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fke={kernelName:WS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{depthRadius:i,bias:o,alpha:a,beta:l}=n;return{x:()=>dke(r,s,t,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hY(t,e,n,r){return e.rank<n.rank&&(e=oe(e,or(e.shape,r))),t.rank<n.rank&&(t=oe(t,or(t.shape,r))),{x:()=>ne(t,Pe(Ba(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G6={kernelName:GS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:s}=r,i=e[0],o=e[1],a=kt(s,i.shape),l=hY(t,o,i,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hke={kernelName:Dx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ne(t,Pe(AA(n,r),"float32")),b:()=>ne(t,Pe(Yy(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pke(t,e,n,r,s,i,o){const a=Q(t,"dy","maxPool3dGrad"),l=Q(e,"input","maxPool3dGrad"),c=Q(n,"output","maxPool3dGrad");let u=a,A=l,d=c,f=!1;l.rank===4&&(f=!0,u=oe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),A=oe(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=oe(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),L(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),L(A.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${A.rank}.`),L(d.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),Hs("maxPool3dGrad",i,o);const h={dy:u,input:A,output:d},p={filterSize:r,strides:s,pad:i,dimRoundingMode:o},m=re.runKernel(eO,h,p);return f?oe(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const mke=ee({maxPool3dGrad_:pke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gke={kernelName:XS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=n;return{x:()=>mke(t,r,s,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yke(t,e,n,r,s,i,o){const a=Q(t,"dy","maxPoolGrad"),l=Q(e,"input","maxPoolGrad"),c=Q(n,"output","maxPoolGrad");L(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),L(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),L(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Hs("maxPoolGrad",i,o);const u={dy:a,input:l,output:c},A={filterSize:r,strides:s,pad:i,dimRoundingMode:o};return re.runKernel(Z_,u,A)}const xke=ee({maxPoolGrad_:yke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vke={kernelName:KS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:o,pad:a}=n;return{x:()=>xke(t,r,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bke={kernelName:qS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n,i=kt(s,r.shape),a=Vr(r.shape,i)[1],l=ge(a);return{x:()=>{const u=r.shape.slice();i.forEach(f=>{u[f]=1});const A=oe(t,u);return ze(ne(A,Bi(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wke={kernelName:YS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:s}=r,[i,o]=e,a=kt(s,i.shape),l=hY(t,o,i,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cke={kernelName:Rx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ne(t,Pe(cf(n,r),"float32")),b:()=>ne(t,Pe(Li(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ske={kernelName:JS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(o=>o[0]);return{x:()=>ct(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bke={kernelName:Px,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=vt(n.shape,r.shape);return{a:()=>{const a=Fr(n.shape,s);return a.length>0?oe(Je(t,a),n.shape):t},b:()=>{const a=ne(t,In(uv(ze(n,r)))),l=Fr(r.shape,s);return l.length>0?oe(Je(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nke={kernelName:Ux,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=vt(n.shape,r.shape);return{a:()=>{const a=ne(t,Pe(r,"float32")),l=Fr(n.shape,s);return l.length>0?oe(Je(a,l),n.shape):a},b:()=>{const a=ne(t,Pe(n,"float32")),l=Fr(r.shape,s);return l.length>0?oe(Je(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eke={kernelName:ZS,gradFunc:t=>({x:()=>In(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ike={kernelName:nB,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Sr(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kke={kernelName:tB,gradFunc:t=>({x:()=>Lt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tke={kernelName:rB,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Ho(t,r).map(i=>()=>i)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K6={kernelName:sB,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(o=>o[0]);return{x:()=>ct(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fke={kernelName:Lx,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,s]=e,i=n,o=r,a=vt(i.shape,o.shape);return{a:()=>{const u=Pe(o,"float32");let A=ne(t,ne(u,fc(i,We(u,at(1)))));const d=Fr(i.shape,a);return d.length>0&&(A=Je(A,d)),oe(A,i.shape)},b:()=>{const u=Li(i,0),A=ys(u,no(i),Lt(i));let d=ne(t,ne(s,A));const f=Fr(o.shape,a);return f.length>0&&(d=Je(d,f)),oe(d,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ke={kernelName:iB,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,s=Li(n,0);return{x:()=>ys(s,t,ne(t,r)),alpha:()=>{let i=ys(s,Lt(t),ne(t,n));const o=Fr(r.shape,t.shape);return o.length>0&&(i=Je(i,o)),oe(i,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ke(t,e,n){const r=t.shape.slice();r[n]=1;const s=oe(e,r),i=c2(t,n,!0,!1),o=c2(t,n,!0,!0),a=ne(i,o);return ne(s,a)}function Oke(t,e,n){const r=t.shape.length,s=r-n.length,i=Hn(n,r);let o=t;i!=null&&(o=Ut(t,i));const a=o.shape.slice(),c=a.splice(r-n.length,n.length).reduce((d,f)=>d*f,1);a.push(c);const u=o.reshape(a);let A=_ke(u,e,s);if(A=A.reshape(o.shape),i!=null){const d=uA(i);A=Ut(A,d)}return A}const Dke={kernelName:oB,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;let i=[];return s==null?i=r.shape.map((o,a)=>a):typeof s=="number"?i=[s]:i=s,{x:()=>Oke(r,t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rke={kernelName:bx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=vt(n.shape,r.shape);return{a:()=>{const a=ze(t,Pe(r,"float32")),l=Fr(n.shape,s);return l.length>0?oe(Je(a,l),n.shape):a},b:()=>{let a=ne(t,Pe(n,"float32"));const l=Fr(r.shape,s);l.length>0&&(a=oe(Je(a,l),r.shape));const c=fn(r);return In(ze(a,Pe(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pke={kernelName:jx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,In(fn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uke={kernelName:Qx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ne(cf(n,6),rm(n));return{x:()=>ne(t,Pe(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lke={kernelName:Mx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,Pe(rm(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jke={kernelName:aB,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>oe(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mke={kernelName:cB,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>re.runKernel(dO,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qke={kernelName:lB,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>re.runKernel(AO,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hke={kernelName:uB,gradFunc:(t,e,n)=>{const{dims:r}=n,s=kt(r,t.shape);return{x:()=>Qo(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zke={kernelName:Hx,gradFunc:t=>({x:()=>Lt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vke={kernelName:zx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>In(ze(t,ne(fc(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wke={kernelName:AB,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Pe(Lt(n),"float32"),t:()=>ne(t,Pe(n,t.dtype)),e:()=>ne(t,Pe(kB(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gke={kernelName:Vx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Li(n,at(0)),s=at(WB),i=at(GB),o=ne(t,i),a=ne(ne(t,s),js(Pe(n,"float32")));return ys(r,o,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kke={kernelName:Xx,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,ne(n,We(at(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xke={kernelName:Kx,gradFunc:t=>({x:()=>Lt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qke={kernelName:Wx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(SB(Pe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yke={kernelName:Gx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(jO(Pe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jke={kernelName:dB,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:s,size:i}=n,o=r.shape,[a,l]=zB(r,s,i),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],o[u]-a[u]-l[u]]);return{x:()=>dA(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zke={kernelName:mB,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:s}=n,i=!0,o=ne(t,r);return{logits:()=>We(o,ne(Je(o,[s],i),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eTe={kernelName:qx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,xa(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X6={kernelName:hB,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>CB(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q6={kernelName:pB,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>qn(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tTe={kernelName:Yx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,ne(rs(Pe(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nTe={kernelName:bO,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,ne(Pe(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rTe={kernelName:Jx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=at(2);return{a:()=>ne(t,ne(s,We(n,r))),b:()=>ne(t,ne(s,We(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sTe={kernelName:rv,gradFunc:t=>({x:()=>Lt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iTe={kernelName:Zx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=vt(n.shape,r.shape);return{a:()=>{let a=t;const l=Fr(n.shape,s);return l.length>0&&(a=Je(a,l)),oe(a,n.shape)},b:()=>{let a=t;const l=Fr(r.shape,s);return l.length>0&&(a=Je(a,l)),oe(In(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oTe={kernelName:fB,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,s=r.shape.slice(),{axis:i}=n;kt(i,r.shape).forEach(c=>{s[c]=1});const a=oe(t,s),l=ne(a,Bi(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aTe={kernelName:ev,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,fn(SB(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lTe={kernelName:tv,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(We(at(1),fn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cTe={kernelName:nv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:s}=n;return{x:()=>{let o=Lt(r);if(r.rank===1)for(let a=0;a<s[0];++a)o=Ee(o,ct(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)o=Ee(o,ct(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)o=Ee(o,ct(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)for(let u=0;u<s[3];++u)o=Ee(o,ct(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uTe={kernelName:Eh,gradFunc:(t,e,n)=>{const r=n,{perm:s}=r,i=uA(s);return{x:()=>Ut(t,i)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATe={kernelName:yB,gradFunc:(t,e,n)=>{const r=n,{axis:s}=r;return{value:()=>Oi(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dTe={kernelName:xB,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fTe(t,n)}}};function fTe(t,e){const n=Ic(e,Lt(e)),r=Av(t,n);let s=AA(e,at(0,"int32"));const i=r.rank-s.rank;for(let a=0;a<i;++a)s=wr(s,a+1);s=hl(s,Bi(r.shape,"bool"));const o=Lt(r);return ys(s,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hTe={kernelName:vB,gradFunc:t=>({x:()=>Lt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pTe=[fY,dIe,fIe,hIe,pIe,mIe,gIe,yIe,xIe,vIe,bIe,wIe,BIe,IIe,kIe,TIe,FIe,$Ie,_Ie,OIe,DIe,RIe,UIe,PIe,MIe,QIe,HIe,zIe,VIe,WIe,Rke,GIe,KIe,XIe,qIe,YIe,ZIe,JIe,eke,tke,nke,rke,ske,ike,oke,ake,lke,cke,uke,fke,G6,G6,hke,gke,vke,bke,wke,Cke,Ske,Bke,Nke,Eke,Ike,kke,Tke,K6,K6,Fke,$ke,Dke,Pke,Uke,Lke,jke,Mke,Qke,Hke,zke,Vke,Wke,Gke,Kke,Xke,qke,Yke,Jke,Zke,eTe,X6,X6,q6,q6,tTe,rTe,nTe,sTe,iTe,oTe,aTe,lTe,cTe,uTe,ATe,dTe,hTe];for(const t of pTe)L1e(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.abs=function(){return this.throwIfDisposed(),vr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.acos=function(){return this.throwIfDisposed(),nX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.acosh=function(){return this.throwIfDisposed(),rX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.add=function(t){return this.throwIfDisposed(),Ee(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.all=function(t,e){return this.throwIfDisposed(),DO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.any=function(t,e){return this.throwIfDisposed(),l2(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.argMax=function(t){return this.throwIfDisposed(),ip(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.argMin=function(t){return this.throwIfDisposed(),sX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.asScalar=function(){return this.throwIfDisposed(),L(this.size===1,()=>"The array must have only 1 element."),oe(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.asType=function(t){return this.throwIfDisposed(),Pe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.as1D=function(){return this.throwIfDisposed(),oe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.as2D=function(t,e){return this.throwIfDisposed(),oe(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),oe(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),oe(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.as5D=function(t,e,n,r,s){return this.throwIfDisposed(),oe(this,[t,e,n,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.asin=function(){return this.throwIfDisposed(),iX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.asinh=function(){return this.throwIfDisposed(),oX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.atan=function(){return this.throwIfDisposed(),aX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.atan2=function(t){return this.throwIfDisposed(),lX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.atanh=function(){return this.throwIfDisposed(),cX(this)};ve().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),wB(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),CB(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.batchNorm=function(t,e,n,r,s){return this.throwIfDisposed(),ov(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Th(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.cast=function(t){return this.throwIfDisposed(),Pe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.ceil=function(){return this.throwIfDisposed(),pX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),ii(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof qt&&(t=[t]),qn([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.conv1d=function(t,e,n,r,s,i){return this.throwIfDisposed(),PO(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.conv2dTranspose=function(t,e,n,r,s){return this.throwIfDisposed(),LO(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.conv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),Gu(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.cos=function(){return this.throwIfDisposed(),SB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.cosh=function(){return this.throwIfDisposed(),jO(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),c2(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),MO(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),CX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.depthwiseConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),av(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.dilation2d=function(t,e,n,r,s){return this.throwIfDisposed(),SX(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.divNoNan=function(t){return this.throwIfDisposed(),BX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.div=function(t){return this.throwIfDisposed(),ze(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.dot=function(t){return this.throwIfDisposed(),NX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.elu=function(){return this.throwIfDisposed(),lv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.equal=function(t){return this.throwIfDisposed(),Ba(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.erf=function(){return this.throwIfDisposed(),QO(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),kX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.exp=function(){return this.throwIfDisposed(),js(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.expandDims=function(t){return this.throwIfDisposed(),wr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.expm1=function(){return this.throwIfDisposed(),TX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.fft=function(){return this.throwIfDisposed(),UB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.flatten=function(){return this.throwIfDisposed(),oe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.floor=function(){return this.throwIfDisposed(),uv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.floorDiv=function(t){return this.throwIfDisposed(),OO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.gather=function(t,e,n){return this.throwIfDisposed(),Av(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.greaterEqual=function(t){return this.throwIfDisposed(),AA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.greater=function(t){return this.throwIfDisposed(),Li(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.ifft=function(){return this.throwIfDisposed(),e0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.irfft=function(){return this.throwIfDisposed(),AD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.isFinite=function(){return this.throwIfDisposed(),FX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.isInf=function(){return this.throwIfDisposed(),$X(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.isNaN=function(){return this.throwIfDisposed(),_X(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.leakyRelu=function(t){return this.throwIfDisposed(),NB(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.lessEqual=function(t){return this.throwIfDisposed(),cf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.less=function(t){return this.throwIfDisposed(),Yy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),OX(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.logSigmoid=function(){return this.throwIfDisposed(),DX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.logSoftmax=function(t){return this.throwIfDisposed(),VO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),IB(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.log=function(){return this.throwIfDisposed(),no(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.log1p=function(){return this.throwIfDisposed(),EB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.logicalAnd=function(t){return this.throwIfDisposed(),hl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.logicalNot=function(){return this.throwIfDisposed(),kB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.logicalOr=function(t){return this.throwIfDisposed(),WO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.logicalXor=function(t){return this.throwIfDisposed(),RX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),$t(this,t,e,n)};ve().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),TB(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.max=function(t,e){return this.throwIfDisposed(),Po(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.maximum=function(t){return this.throwIfDisposed(),Ic(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.mean=function(t,e){return this.throwIfDisposed(),Kn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.min=function(t,e){return this.throwIfDisposed(),qy(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.minimum=function(t){return this.throwIfDisposed(),Wd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),UX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.mod=function(t){return this.throwIfDisposed(),LX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.mul=function(t){return this.throwIfDisposed(),ne(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.neg=function(){return this.throwIfDisposed(),In(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.norm=function(t,e,n){return this.throwIfDisposed(),cv(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.notEqual=function(t){return this.throwIfDisposed(),ap(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),KO(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.onesLike=function(){return this.throwIfDisposed(),ro(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.pad=function(t,e){return this.throwIfDisposed(),dA(this,t,e)};ve().prototype.pool=function(t,e,n,r,s,i){return this.throwIfDisposed(),jX(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.pow=function(t){return this.throwIfDisposed(),fc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.prelu=function(t){return this.throwIfDisposed(),_B(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.prod=function(t,e){return this.throwIfDisposed(),MX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.reciprocal=function(){return this.throwIfDisposed(),HX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.relu=function(){return this.throwIfDisposed(),vl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.relu6=function(){return this.throwIfDisposed(),rD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.reshapeAs=function(t){return this.throwIfDisposed(),oe(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.reshape=function(t){return this.throwIfDisposed(),oe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),oq(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),aq(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.reverse=function(t){return this.throwIfDisposed(),Qo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.rfft=function(){return this.throwIfDisposed(),LB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.round=function(){return this.throwIfDisposed(),sD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.rsqrt=function(){return this.throwIfDisposed(),iD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.selu=function(){return this.throwIfDisposed(),oD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.separableConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),aD(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.sigmoid=function(){return this.throwIfDisposed(),xa(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.sign=function(){return this.throwIfDisposed(),zX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.sin=function(){return this.throwIfDisposed(),lD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.sinh=function(){return this.throwIfDisposed(),cD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.slice=function(t,e){return this.throwIfDisposed(),ct(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.softmax=function(t){return this.throwIfDisposed(),PB(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.softplus=function(){return this.throwIfDisposed(),nm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),$B(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.split=function(t,e){return this.throwIfDisposed(),$i(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.sqrt=function(){return this.throwIfDisposed(),rs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.square=function(){return this.throwIfDisposed(),fn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.squaredDifference=function(t){return this.throwIfDisposed(),dD(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.squeeze=function(t){return this.throwIfDisposed(),Wn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof qt?[this,t]:[this,...t];return Oi(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.step=function(t){return this.throwIfDisposed(),rm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.stridedSlice=function(t,e,n,r,s,i,o,a){return this.throwIfDisposed(),VX(this,t,e,n,r,s,i,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.sub=function(t){return this.throwIfDisposed(),We(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.sum=function(t,e){return this.throwIfDisposed(),Je(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.tan=function(){return this.throwIfDisposed(),WX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.tanh=function(){return this.throwIfDisposed(),Vd(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.tile=function(t){return this.throwIfDisposed(),Fo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.toBool=function(){return this.throwIfDisposed(),Pe(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.toFloat=function(){return this.throwIfDisposed(),Pe(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.toInt=function(){return this.throwIfDisposed(),Pe(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.topk=function(t,e){return this.throwIfDisposed(),XX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.transpose=function(t){return this.throwIfDisposed(),Ut(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.unique=function(t){return this.throwIfDisposed(),qX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),pD(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.unstack=function(t){return this.throwIfDisposed(),Ho(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.where=function(t,e){return this.throwIfDisposed(),ys(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ve().prototype.zerosLike=function(){return this.throwIfDisposed(),Lt(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class qa extends Error{constructor(e){super(e),Object.setPrototypeOf(this,qa.prototype)}}class $o extends Error{constructor(e){super(e),Object.setPrototypeOf(this,$o.prototype)}}class ae extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ae.prototype)}}class Ct extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ct.prototype)}}class JD extends Error{constructor(e){super(e),Object.setPrototypeOf(this,JD.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class pY{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Xd(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Ya(t,e){if(!t)throw new JD(e)}function Y6(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Zs(t){return t.length===1?t[0]:t}function en(t){return Array.isArray(t)?t:[t]}function Ql(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function XA(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let uo={};function ZD(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function nT(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>nT(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:nT(r))}}}function pv(t,e={},n={},r="object",s=!1){if(typeof t=="string"){const i=t;let o;if(i in n)o=n[i];else if(i in uo)o=uo[i];else if(o=e[i],o==null)throw new ae(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const i=t;if(i.className==null||i.config==null)throw new ae(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const o=i.className;let a,l;if(o in n?[a,l]=n[o]:o in uo?[a,l]=uo.className:o in e&&([a,l]=e[o]),a==null)throw new ae(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const f of Object.keys(uo))c[f]=uo[f];for(const f of Object.keys(n))c[f]=n[f];const u=i.config;u.customObjects=c;const A=Object.assign({},uo);for(const f of Object.keys(n))uo[f]=n[f];nT(i.config);const d=l(a,i.config,n,s);return uo=Object.assign({},A),d}else{const c=Object.assign({},uo);for(const A of Object.keys(n))uo[A]=n[A];const u=new a(i.config);return uo=Object.assign({},c),u}}}function mTe(t,e){return t<e?-1:t>e?1:0}function ab(t,e){return-1*mTe(t,e)}function Ou(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function gTe(t){if(t==null)throw new ae(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function ff(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new ae(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function eR(t,e,n=0,r=1/0){return Ya(n>=0),Ya(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(s=>typeof s===e)}function Qr(t,e){Array.isArray(t)?(L(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Qr(n,`element ${r+1} of ${e}`))):L(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${mY(t)}.`)}function mY(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>mY(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function yTe(t,e,n){let r=n!=null?n():Ys(),s;return(...o)=>{const a=n!=null?n():Ys();return a-r<e||(r=a,s=t(...o)),s}}function gY(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let xTe=0;function yY(){return xTe++}const lb={};function KB(t=""){return t in lb||(lb[t]=0),lb[t]+=1,t+lb[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const vTe=["channelsFirst","channelsLast"],bTe=["nearest","bilinear"],wTe=["valid","same","causal"],CTe=["max","avg"],STe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const jf=new Map;function lr(t){ff(vTe,"DataFormat",t)}function BTe(t){ff(bTe,"InterpolationFormat",t)}function ao(t){ff(wTe,"PaddingMode",t)}function xY(t){ff(CTe,"PoolMode",t)}const cy=[],J6="/";function Nd(t,e){cy.push(t);try{const n=e();return cy.pop(),n}catch(n){throw cy.pop(),n}}function NTe(){return cy.length===0?"":cy.join(J6)+J6}function vY(t){if(!wY(t))throw new Error("Not a valid tensor name: '"+t+"'");return NTe()+t}function bY(t){if(!wY(t))throw new Error("Not a valid tensor name: '"+t+"'");jf.has(t)||jf.set(t,0);const e=jf.get(t);if(jf.set(t,jf.get(t)+1),e>0){const n=`${t}_${e}`;return jf.set(n,1),n}else return t}const ETe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function wY(t){return!!t.match(ETe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ITe(t){return t===parseInt(t.toString(),10)}function Du(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let s=e;s<n;++s)r*=t[s];return r}function cp(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function Xu(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Na(t,e){if(e<t)throw new ae(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let V4;function Br(){return V4==null&&(V4=jK().epsilon()),V4}function Ea(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ul(t,e){return Pe(t,e)}function mv(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),oe(t,n)}function kTe(t,e){return ce(()=>{if(t.shape.length!==2)throw new ae(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=mv(t,1);return rT(n,[1,e,1])})}function TTe(t){const e=[Du(t.shape)];return oe(t,e)}function FTe(t){if(t.rank<=1)throw new ae(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Du(t.shape,1)];return oe(t,e)}function Ed(t,e,n){return ce(()=>{switch(t.rank){case 1:return DB(t,e,n);case 2:return uD(t,[e,0],[n,t.shape[1]]);case 3:return RB(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Zy(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return ct(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return ct(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new ae(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function W4(t,e,n){return ce(()=>{switch(t.rank){case 1:return DB(t,e,n);case 2:return uD(t,[0,e],[t.shape[0],n]);case 3:return RB(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Zy(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new ae(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function cb(t,e,n,r){return ce(()=>{switch(t.rank){case 1:return DB(t,e,n);case 2:switch(r){case 1:return Ed(t,e,n);case 2:return W4(t,e,n);default:throw new ae(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Ed(t,e,n);case 2:return RB(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return W4(t,e,n);default:throw new ae(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Ed(t,e,n);case 2:return Zy(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Zy(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return W4(t,e,n);default:throw new ae(`The axis is not within the rank of the tensor ${r}`)}default:throw new ae(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function tR(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),qn(t,e)}function Z6(t,e){switch(t.rank){case 1:return mX([t,e]);case 2:return gX([t,e],0);case 3:return yX([t,e],0);case 4:return xX([t,e],0);default:throw new ae(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function rT(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new ae(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Fo(t,e)}function XB(t,e=0,n=1,r,s){return nD(t,e,n,r,s)}function Al(t,e,n,r){if(t.rank<2||e.rank<2)throw new Ct(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=t.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(s!==i)throw new Ct(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return jk({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?sT(t.rank,r,Ea()):null,activation:n});{const s=t.shape.slice(),i=s.pop();t=oe(t,[-1,i]);const o=e.shape.slice(),a=o.pop(),l=o.pop(),c=[...o,a],u=Array.from({length:e.rank},(h,p)=>p===0?e.rank-2:p<=e.rank-2?p-1:p);e=oe(Ut(e,u),[l,-1]);const A=[...s,...c];return oe(jk({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?sT(t.rank,r,Ea()):null,activation:n}),A)}}function CY(t,e,n){return ce(()=>(Array.isArray(e)?e=mr(e,"int32"):e=Pe(e,"int32"),Av(t,e,n)))}function gv(t){return ne(t,t)}function sT(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new ae(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?oe(e,[1,r[0],1,1,1]):oe(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?oe(e,[1,1,1,1,r[0]]):oe(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?oe(e,[1,r[0],1,1]):oe(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?oe(e,[1,1,1,r[0]]):oe(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?oe(e,[1,r[0],1]):oe(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?oe(e,[1,1,r[0]]):oe(e,[1].concat(r))}else if(t<3)return e;throw new ae(`Unsupported input rank by biasAdd: ${e.rank}`)}function _a(t,e,n){return ce(()=>(n==null&&(n=Ea()),lr(n),Ee(t,sT(t.rank,e,n))))}function $Te(t,e=1){if(e!==1)throw new Ct(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return lv(t)}function _Te(t){return ce(()=>ze(t,Ee(vr(t),1)))}function SY(t,e,n,r){return ce(()=>ZX(t,e,n,r))}function OTe(t){return ce(()=>{const e=Ee(.5,ne(.2,t));return ii(e,0,1)})}function yv(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const DTe=["fanIn","fanOut","fanAvg"],RTe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function PTe(t){ff(DTe,"FanMode",t)}function UTe(t){ff(RTe,"Distribution",t)}class Ko extends im{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class BY extends Ko{apply(e,n){return Sr(e,n)}}BY.className="Zeros";Te(BY);class nR extends Ko{apply(e,n){return Bi(e,n)}}nR.className="Ones";Te(nR);class NY extends Ko{constructor(e){if(super(),typeof e!="object")throw new ae(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new ae(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return ce(()=>ne(at(this.value),Bi(e,n)))}getConfig(){return{value:this.value}}}NY.className="Constant";Te(NY);class EY extends Ko{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Af(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}EY.className="RandomUniform";Te(EY);class IY extends Ko{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ct(`randomNormal does not support dType ${n}.`);return XB(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}IY.className="RandomNormal";Te(IY);class kY extends Ko{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ct(`truncatedNormal does not support dType ${n}.`);return hD(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}kY.className="TruncatedNormal";Te(kY);class TY extends Ko{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return ce(()=>{if(e.length!==2||e[0]!==e[1])throw new ae("Identity matrix initializer can only be used for 2D square matrices.");return ne(this.gain,zO(e[0]))})}getConfig(){return{gain:this.gain}}}TY.className="Identity";Te(TY);function LTe(t,e="channelsLast"){let n,r;if(lr(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=Du(t,2);n=t[1]*s,r=t[0]*s}else if(e==="channelsLast"){const s=Du(t,0,t.length-2);n=t[t.length-2]*s,r=t[t.length-1]*s}}else{const s=Du(t);n=Math.sqrt(s),r=Math.sqrt(s)}return[n,r]}class Di extends Ko{constructor(e){if(super(),e.scale<0)throw new ae(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,PTe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,UTe(this.distribution),this.seed=e.seed}apply(e,n){const r=LTe(e),s=r[0],i=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,s):this.mode==="fanOut"?o/=Math.max(1,i):o/=Math.max(1,(s+i)/2),this.distribution==="normal"){const a=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ct(`${this.getClassName()} does not support dType ${n}.`);return hD(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*o);return Af(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Di.className="VarianceScaling";Te(Di);class rR extends Di{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Di.className}}rR.className="GlorotUniform";Te(rR);class sR extends Di{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Di.className}}sR.className="GlorotNormal";Te(sR);class iR extends Di{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Di.className}}iR.className="HeNormal";Te(iR);class oR extends Di{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Di.className}}oR.className="HeUniform";Te(oR);class aR extends Di{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Di.className}}aR.className="LeCunNormal";Te(aR);class lR extends Di{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Di.className}}lR.className="LeCunUniform";Te(lR);class FY extends Ko{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return ce(()=>{if(e.length<2)throw new Ct("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=ge(e.slice(0,-1)),s=e[e.length-1],i=r*s;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const o=[Math.max(s,r),Math.min(s,r)],a=XB(o,0,1,n,this.seed),l=lq.qr(a,!1);let c=l[0];const A=l[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return c=ne(c,A.sign()),r<s&&(c=c.transpose()),ne(at(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}FY.className="Orthogonal";Te(FY);const e5={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function t5(t,e={}){return pv(t,Co.getMap().classNameMap,e,"initializer")}function Mn(t){return ZD(t)}function On(t){if(typeof t=="string"){const e=t in e5?e5[t]:t;if(e==="GlorotNormal")return new sR;if(e==="GlorotUniform")return new rR;if(e==="HeNormal")return new iR;if(e==="HeUniform")return new oR;if(e==="LeCunNormal")return new aR;if(e==="LeCunUniform")return new lR;{const n={};return n.className=e,n.config={},t5(n)}}else return t instanceof Ko?t:t5(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function iT(t){return Array.isArray(t)&&Array.isArray(t[0])}function h2(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function At(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new ae(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function zt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new ae(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function p2(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,s)=>r*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const n5="Variable";class jTe{constructor(e,n="float32",r=n5,s=!0,i=null){this.dtype=n??"float32",this.shape=e.shape,this.id=yY(),r=r??n5,this.originalName=vY(r),this.name=bY(this.originalName),this.trainable_=s,this.constraint=i,this.val=YX(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),MTe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function MTe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function oT(t){return t.map(e=>e.read())}function cR(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Nr{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class pl{constructor(e,n,r,s,i,o,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=s,this.callArgs=i,this.outputTensorIndex=a,this.id=yY(),o!=null&&(this.originalName=vY(o),this.name=bY(this.originalName)),this.rank=n.length}}let QTe=0,qB=class{constructor(e,n){this.callArgs=n,this.id=QTe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},HTe=0,Tt=class extends im{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=HTe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Ql(r)+"_"+KB(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),r=[i].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new $o(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new ae(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Zs(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Zs(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new qa(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new qa(`Layer ${this.name} is not connected, no input to return.`);return Zs(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new qa(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new qa(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Zs(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=en(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=en(this.inputSpec);if(n.length!==r.length)throw new ae(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let s=0;s<n.length;s++){const i=n[s],o=r[s];if(o==null)continue;const a=i.rank;if(o.ndim!=null&&a!==o.ndim)throw new ae(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(o.maxNDim!=null&&a>o.maxNDim)throw new ae(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(o.minNDim!=null&&a<o.minNDim)throw new ae(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(o.dtype!=null&&i.dtype!==o.dtype)throw new ae(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${i.dtype}.`);if(o.axes){const l=i.shape;for(const c in o.axes){const u=Number(c),A=o.axes[c],d=u>=0?l[u]:l[l.length+u];if(A!=null&&[A,null].indexOf(d)===-1)throw new ae(`Input ${s} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${A} but got shape ${l}.`)}}if(o.shape!=null)for(let l=0;l<o.shape.length;++l){const c=o.shape[l],u=i.shape[l];if(c!=null&&u!=null&&c!==u)throw new ae(`Input ${s} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=en(e),s=WTe(e),i=GTe(e);if(s===i)throw new ae("Arguments to apply() must be all SymbolicTensors or all Tensors");return Nd(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const a of en(e))o.push(a.shape);this.build(Zs(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let o=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,o);const a=en(o),l=[];for(let c of a)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(o=Zs(l),this.activityRegularizer!=null)throw new Ct("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=zTe(e),a=this.computeOutputShape(o);let l;const c=VTe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,A)=>new pl(c,u,this,en(e),n,this.name,A)):l=new pl(c,a,this,en(e),n,this.name),this.addInboundNode(e,l,null,null,o,a,n),this._refCount++,this.activityRegularizer!=null)throw new Ct("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new qa(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new qa(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new $o(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return p2(this.weights)}build(e){this.built=!0}getWeights(e=!1){return oT(e?this.trainableWeights:this.weights)}setWeights(e){ce(()=>{const n=this.weights;if(n.length!==e.length)throw new ae(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],s=oT(n);for(let i=0;i<s.length;++i){const o=s[i],a=n[i],l=e[i];if(!_t(o.shape,l.shape))throw new ae(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}cR(r)})}addWeight(e,n,r,s,i,o,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new ae(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():On("zeros"));const c=s.apply(n,r),u=new jTe(c,r,e,o,a);return c.dispose(),i!=null&&this.addLoss(()=>i.apply(u.read())),o==null&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=en(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),i=en(n),o=en(s);if(i.length!==o.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let a=0;a<i.length;a++)i[a].kerasMask=o[a]}addInboundNode(e,n,r,s,i,o,a=null){const l=en(e);n=en(n),r=en(r),s=en(s),i=h2(i),o=h2(o);const c=[],u=[],A=[];for(const d of l)c.push(d.sourceLayer),u.push(d.nodeIndex),A.push(d.tensorIndex);new qB({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:A,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:s,inputShapes:i,outputShapes:o},a);for(let d=0;d<n.length;d++)n[d].sourceLayer=this,n[d].nodeIndex=this.inboundNodes.length-1,n[d].tensorIndex=d}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function zTe(t){t=en(t);const e=[];for(const n of t)e.push(n.shape);return Zs(e)}function VTe(t){return"float32"}function $Y(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let i=0;i<r.inboundLayers.length;i++){const o=r.inputTensors[i],a=r.inboundLayers[i],l=r.nodeIndices[i],c=$Y(o,a,l);for(const u of c)s.indexOf(u)===-1&&s.push(u)}return s}}}function WTe(t){let e=!0;for(const n of en(t))if(!(n instanceof pl)){e=!1;break}return e}function GTe(t){let e=!0;for(const n of en(t))if(n instanceof pl){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class xv extends Tt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:KB("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new ae("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new ae("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new ae("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const s=new pl(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new qB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new ae(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}xv.className="InputLayer";Te(xv);function KTe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new ae("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new xv({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function XTe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Pe(e,t.dtype)}catch{throw new ae(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class mu{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof mu)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=XTe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new ae(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof pl){if(this.id2Value[e.id]==null)throw new ae(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ae(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof pl){if(this.id2Value[e.id]==null)throw new ae(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ae(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&ft(this.id2Mask)}}const m2=new pY,g2=new pY;function qTe(t){m2!=null&&m2.setMaxEntries(t),g2!=null&&g2.setMaxEntries(t)}function Ug(t,e,n,r){const s=n==null?!1:n.training,i=Array.isArray(t),o=i?t:[t],a=o.map(h=>h.name),l=[],c=e.names();for(const h of a)c.indexOf(h)!==-1?l.push(e.getValue(h)):l.push(null);const u=a.join(",")+"|"+e.names().sort().join(",");let A=m2.get(u),d;if(A==null){const h=YTe(o,e);A=h.sorted,d=h.recipientCounts,m2.put(u,A),g2.put(u,d)}d={},s||Object.assign(d,g2.get(u));const f=new mu(e);for(let h=0;h<A.length;++h){const p=A[h],m=p.sourceLayer;if(m instanceof xv)continue;const y=[],x=[],v=[];let b=!1;for(const N of p.inputs){const k=f.getValue(N),O=f.getMask(N);y.push(k),x.push(O),O!=null&&(b=!0),s||(d[N.name]--,d[N.name]===0&&!e.hasKey(N)&&a.indexOf(N.name)===-1&&!k.isDisposed&&N.sourceLayer.stateful!==!0&&v.push(k))}b&&(n=n||{},n.mask=x[0]);const w=en(m.apply(y,n));let C=null;m.supportsMasking&&(C=m.computeMask(y,x));const B=ZTe(p),S=Array.isArray(B)?B:[B];for(let N=0;N<S.length;++N){f.hasKey(S[N])||f.add(S[N],w[N],Array.isArray(C)?C[0]:C);const k=a.indexOf(S[N].name);k!==-1&&(l[k]=w[N])}s||ft(v)}return f.disposeMasks(),i?l:l[0]}function YTe(t,e){L(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const s=r5(t[0],e);n=s.sorted,r=s.recipientMap}else{const s=new Set;for(const i of t){const{sorted:o,recipientMap:a}=r5(i,e);for(const l of o)s.has(l.name)||(n.push(l),s.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:JTe(r)}}function JTe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function r5(t,e){const n=new Set,r=[],s={};for(const a of e.names())n.add(a);const i=[],o=[];for(i.push(t);i.length>0;){const a=i[i.length-1];if(n.has(a.name)){i.pop();continue}const l=o[o.length-1]===i.length-1;if(a.inputs.length===0||l)i.pop(),r.push(a),n.add(a.name),l&&o.pop();else{o.push(i.length-1);for(const c of a.inputs)s[c.name]==null&&(s[c.name]=new Set),s[c.name].add(a.name),!n.has(c.name)&&i.push(c)}}return{sorted:r,recipientMap:s}}function ZTe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const s of t.sourceLayer.inboundNodes[r].outputTensors)if(s.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eFe=fe();eFe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,qTe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function uR(t,e){return ce(()=>rs(Je(ne(t,t),e,!0)))}class vv extends im{getConfig(){return{}}}class _Y extends vv{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ce(()=>{const n=uR(e,this.axis),r=ii(n,0,this.maxValue);return ne(e,ze(r,Ee(Br(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}_Y.className="MaxNorm";Te(_Y);class OY extends vv{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ce(()=>ze(e,Ee(Br(),uR(e,this.axis))))}getConfig(){return{axis:this.axis}}}OY.className="UnitNorm";Te(OY);class DY extends vv{apply(e){return vl(e)}}DY.className="NonNeg";Te(DY);class RY extends vv{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ce(()=>{const n=uR(e,this.axis),r=Ee(ne(this.rate,ii(n,this.minValue,this.maxValue)),ne(1-this.rate,n));return ne(e,ze(r,Ee(Br(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}RY.className="MinMaxNorm";Te(RY);const s5={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Ir(t){return ZD(t)}function i5(t,e={}){return pv(t,Co.getMap().classNameMap,e,"constraint")}function kr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in s5?s5[t]:t,config:{}};return i5(n)}else return t instanceof vv?t:i5(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function _A(t){if(t==null)return;const e=[],n=[],r=[];for(const s in t){const i=t[s];if(typeof i!="number"){const o=i;e.push(o.data()),n.push(s),r.push(o)}}if(e.length>0){const s=await Promise.all(e);for(let i=0;i<s.length;++i)t[n[i]]=s[i][0];ft(r)}}function PY(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var o5;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(o5||(o5={}));const tFe=125;class t0{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class nFe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class rFe extends t0{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const s in n){const i=n[s];if(typeof i=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+i*r;else{let o;s in this.totals?o=this.totals[s]:this.totals[s]=0;const a=ce(()=>Ee(this.totals[s],ne(i,r)));this.totals[s]=a,o!=null&&o.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:ce(()=>{const s=ne(ze(1,this.seen),this.totals[r]);n[r]=s,this.totals[r].dispose(),Mr(n[r])}))}}class sFe extends t0{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const i in this.history){const o=this.history[i];for(let a=0;a<o.length;++a)if(typeof o[a]!="number"){const l=o[a];e.push(l.data()),n.push(i),r.push(a)}}const s=await Promise.all(e);for(let i=0;i<s.length;++i)this.history[n[i]][r[i]].dispose(),this.history[n[i]][r[i]]=s[i][0]}}class iFe extends t0{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||Fq,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=tFe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");xk(this.yieldEvery)&&(this.maybeWait=yTe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const s=[];this.yield!=null&&(await _A(r),s.push(this.yield(e,n,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await _A(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await _A(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await _A(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await _A(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):xk(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await _A(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await _A(e),await this.trainEnd(e))}}function UY(t,e){return t==null&&(t={}),t instanceof t0?[t]:Array.isArray(t)&&t[0]instanceof t0?t:en(t).map(r=>new iFe(r,e))}class go{constructor(){}static registerCallbackConstructor(e,n){L(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),go.checkForDuplicate(n),go.constructors[e]==null&&(go.constructors[e]=[]),go.constructors[e].push(n)}static checkForDuplicate(e){for(const n in go.constructors)go.constructors[+n].forEach(s=>{if(s===e)throw new ae("Duplicate callback constructor.")})}static clear(){go.constructors={}}static createCallbacks(e){const n=[];for(const r in go.constructors){const s=+r;e>=s&&n.push(...go.constructors[s])}return n.map(r=>new r)}}go.constructors={};function LY(t,e,n,r,s,i,o,a,l){const c=new sFe,u=[new rFe,...go.createCallbacks(e)];t!=null&&u.push(...t),u.push(c);const A=new nFe(u);return A.setParams({epochs:n,initialEpoch:r,samples:s,steps:i,batchSize:o,verbose:e,doValidation:a,metrics:l}),{callbackList:A,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function sc(t,e={},n=!1){return pv(t,Co.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function y2(t,e){return ce(()=>{t.dtype!=="float32"&&(t=Pe(t,"float32"));const n=Je(gv(t),e,!0),r=tm(n.shape,Br()),s=rs(Ic(n,r));return ze(t,s)})}function YB(t,e){return ce(()=>Kn(gv(We(e,t)),-1))}function AR(t,e){return ce(()=>Kn(vr(We(e,t)),-1))}function dR(t,e){return ce(()=>{const n=We(t,e),r=ii(vr(t),Br(),Number.MAX_VALUE),s=vr(ze(n,r));return ne(100,Kn(s,-1))})}function oFe(t,e){return ce(()=>{const n=ii(e,Br(),Number.MAX_VALUE),r=no(Ee(1,n)),s=ii(t,Br(),Number.MAX_VALUE),i=no(Ee(1,s));return Kn(gv(We(r,i)),-1)})}function aFe(t,e){return ce(()=>{const n=Ic(0,We(1,ne(t,e)));return Kn(gv(n),-1)})}function lFe(t,e){return ce(()=>{const n=Ic(0,We(1,ne(t,e)));return Kn(n,-1)})}function cFe(t,e){return ce(()=>{const n=Je(ne(t,e),-1),r=Po(ne(We(1,t),e),-1);return Ic(0,Ee(1,We(r,n)))})}function uFe(t,e){return ce(()=>{const n=Math.log(2),r=We(e,t),s=We(Ee(r,nm(ne(-2,r))),n);return Kn(s,-1)})}function n0(t,e,n=!1){return ce(()=>{if(n)e=PB(e);else{const r=Je(e,e.shape.length-1,!0);e=ze(e,r)}return e=ii(e,Br(),1-Br()),In(Je(ne(Pe(t,"float32"),no(e)),e.shape.length-1))})}function x2(t,e,n=!1){return ce(()=>{const r=Pe(uv(TTe(t)),"int32");e=ii(e,Br(),1-Br());const s=e.shape,i=oe(KO(r,s[s.length-1]),s);return n0(i,e,n)})}function AFe(t,e){if(!_t(t.shape,e.shape))throw new ae(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return ce(()=>{const n=vl(e),r=In(vr(e));return Ee(We(n,ne(e,t)),EB(js(r)))})}function JB(t,e){return ce(()=>{let n;return n=ii(e,Br(),1-Br()),n=no(ze(n,We(1,n))),Kn(AFe(t,n),-1)})}function dFe(t,e){return ce(()=>{const n=ii(t,Br(),1),r=ii(e,Br(),1);return Je(ne(t,no(ze(n,r))),-1)})}function fFe(t,e){return ce(()=>{const n=no(Ee(Br(),e));return Kn(We(e,ne(t,n)),-1)})}function jY(t,e){return ce(()=>{const n=y2(t,-1),r=y2(e,-1),s=ne(n,r);return In(Je(s,-1))})}const v2={meanSquaredError:YB,meanAbsoluteError:AR,meanAbsolutePercentageError:dR,meanSquaredLogarithmicError:oFe,squaredHinge:aFe,hinge:lFe,categoricalHinge:cFe,logcosh:uFe,categoricalCrossentropy:n0,sparseCategoricalCrossentropy:x2,binaryCrossentropy:JB,kullbackLeiblerDivergence:dFe,poisson:fFe,cosineProximity:jY};function G4(t){if(typeof t=="string"){if(t in v2)return v2[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ae(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function MY(t,e){return ce(()=>{const n=ne(.5,ro(e)),r=ul(Li(e,n),t.dtype);return Kn(Ba(t,r),-1)})}function QY(t,e){return ce(()=>ul(Ba(ip(t,-1),ip(e,-1)),"float32"))}function hFe(t,e){return ce(()=>Pe(Je(hl(Ba(t,1),Ba(e,1))),"float32"))}function pFe(t,e){return ce(()=>Pe(Je(hl(Ba(t,0),Ba(e,1))),"float32"))}function mFe(t,e){return ce(()=>{const n=hFe(t,e),r=pFe(t,e),s=Ee(n,r);return Pe(ys(Li(s,0),ze(n,s),0),"float32")})}function gFe(t,e){return JB(t,e)}function yFe(t,e){return t.rank===e.rank&&(t=Wn(t,[t.rank-1])),e=ip(e,-1),e.dtype!==t.dtype&&(e=Pe(e,t.dtype)),Pe(Ba(t,e),"float32")}const xFe=YB,vFe=YB,bFe=AR,wFe=AR,CFe=dR,SFe=dR,HY=n0,BFe=jY,zY=x2,b2={binaryAccuracy:MY,categoricalAccuracy:QY,precision:mFe,categoricalCrossentropy:HY,sparseCategoricalCrossentropy:zY,mse:xFe,MSE:vFe,mae:bFe,MAE:wFe,mape:CFe,MAPE:SFe,cosine:BFe};function NFe(t){if(typeof t=="string"&&t in b2)return b2[t];if(typeof t!="string"&&t!=null)return t;throw new ae(`Unknown metric ${t}`)}function ub(t){if(Ya(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(v2))if(v2[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(b2))if(b2[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function EFe(t){const e={Adagrad:()=>Lf.adagrad(.01),Adadelta:()=>Lf.adadelta(1,.95,Br()),Adam:()=>Lf.adam(.001,.9,.999,Br()),Adamax:()=>Lf.adamax(.002,.9,.999,Br(),0),RMSProp:()=>Lf.rmsprop(.001,.9,0,Br()),SGD:()=>Lf.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new ae(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const a5=1*1024*1024;function l5(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!aT(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>a5&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${a5}.`)}}function aT(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!aT(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!aT(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function IFe(t,e,n,r=console.log){const s=TFe(t),i=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let o;if(!s){i.push("Receives inputs"),o=[];for(const u in t.nodesByDepth)o.push(...t.nodesByDepth[u])}r("_".repeat(e)),w2(i,n,r),r("=".repeat(e));const a=t.layers;for(let u=0;u<a.length;++u)s?FFe(a[u],n,r):$Fe(a[u],n,o,r),r((u===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=kFe(t),c=p2(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function kFe(t){let e;return t.collectedTrainableWeights!=null?e=p2(t.collectedTrainableWeights):e=p2(t.trainableWeights),e}function TFe(t){let e=!0;const n=[],r=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of t.layers){let i=!1;for(const o of s.inboundNodes)if(r.indexOf(o)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function w2(t,e,n=console.log){let r="";for(let s=0;s<t.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=t[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);n(r)}function FFe(t,e,n){let r,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const i=t.name,o=t.getClassName(),a=[`${i} (${o})`,s,r,t.countParams().toString()];w2(a,e,n)}function $Fe(t,e,n,r){let s,i;try{i=t.inboundNodes.map(A=>JSON.stringify(A.inputShapes)).join(",")}catch{i="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const o=[];for(const A of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(A)===-1))for(let d=0;d<A.inboundLayers.length;++d){const f=A.inboundLayers[d].name,h=A.nodeIndices[d],p=A.tensorIndices[d];o.push(`${f}[${h}][${p}]`)}const a=t.name,l=t.getClassName(),c=o.length===0?"":o[0],u=[`${a} (${l})`,i,s,t.countParams().toString(),c];w2(u,e,r);for(let A=1;A<o.length;++A)w2(["","","","",o[A]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function VY(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function lT(t,e){if(t===null)return null;if(typeof t=="string")return XA(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];VY(e,s,i)?n.push(i):n.push(lT(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r];if(r==="name"&&typeof s=="string")n[r]=s;else{const i=XA(r);n[i]=lT(s,i)}}return n}}function cT(t,e){if(t==null)return null;if(typeof t=="string")return Ql(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];VY(e,s,i)?n.push(i):n.push(cT(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r],i=Ql(r);(r==="name"||r==="className")&&typeof s=="string"?n[i]=s:n[i]=cT(s,r)}return n}}/** @license See the LICENSE file. */const WY="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const _Fe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class na extends Tt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const x=this.getClassName().toLowerCase();this.name=KB(x)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Ou(this.inputs).length!==this.inputs.length)throw new ae(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(x=>x.name)}`);Ou(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(x=>x.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const x of this.outputs){const v=x.sourceLayer,b=x.nodeIndex,w=x.tensorIndex;this.outputLayers.push(v),this.outputLayersNodeIndices.push(b),this.outputLayersTensorIndices.push(w)}for(const x of this.inputs){const v=x.sourceLayer,b=x.nodeIndex,w=x.tensorIndex;Ya(b===0,"input layer has >1 nodes"),Ya(w===0,"input layer has >1 tensors"),this.inputLayers.push(v),this.inputLayersNodeIndices.push(b),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let x=0;x<this.inputLayers.length;x++){const v=this.inputLayers[x];if(!(v instanceof xv))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${x} (0-based) originates from layer type ${v.getClassName()}.`);this.inputNames.push(v.name),this.feedInputShapes.push(v.batchInputShape),this.feedInputNames.push(v.name)}for(const x of this.outputLayers)this.outputNames.push(x.name);this.internalInputShapes=this.inputs.map(x=>x.shape),this.internalOutputShapes=this.outputs.map(x=>x.shape);const n={},r={},s={},i={},o={},a=[],l=(x,v,b,w,C,B)=>{(w==null||C==null||B==null)&&(w=x.sourceLayer,C=x.nodeIndex,B=x.tensorIndex);const S=w.inboundNodes[C];if(b.indexOf(S)!==-1)throw new $o(`The tensor ${x.name} at layer "${w.name}" is part of a cycle.`);if(v.indexOf(S)!==-1)return;this.containerNodes.add(na.nodeKey(w,C)),w.id in o||(o[w.id]=Object.keys(o).length),b.indexOf(S)===-1&&b.push(S);const N=S.inboundLayers.length;for(let k=0;k<N;k++){const O=S.inputTensors[k],U=S.inboundLayers[k],P=S.nodeIndices[k],V=S.tensorIndices[k];l(O,v,b,U,P,V)}for(v.push(S);b.indexOf(S)>=0;)b.splice(b.indexOf(S),1);a.push(S)},c=[],u=[];for(const x of this.outputs)l(x,c,u);const A=a.slice().reverse();for(const x of A){r[x.id]=x,x.id in n||(n[x.id]=0);let v=n[x.id];const b=s[x.outboundLayer.id]==null?0:s[x.outboundLayer.id];v=Math.max(v,b),s[x.outboundLayer.id]=v,i[x.outboundLayer.id]=x.outboundLayer,n[x.id]=v;for(let w=0;w<x.inboundLayers.length;w++){const C=x.inboundLayers[w],B=x.nodeIndices[w],S=C.inboundNodes[B],N=n[S.id]==null?0:n[S.id];n[S.id]=Math.max(v+1,N),r[S.id]=S}}const d={};for(const x in n){const v=n[x];v in d||(d[v]=[]),d[v].push(r[x])}const f={};for(const x in s){const v=s[x];v in f||(f[v]=[]),f[v].push(i[x])}let h=Object.keys(f).map(x=>parseInt(x,10)).sort(ab);this.layers=[];for(const x of h){const v=f[x];v.sort((b,w)=>{const C=o[b.id],B=o[w.id];return C<B?-1:C>B?1:0});for(const b of v)b instanceof na&&this.internalContainerRefs.push(b),this.layers.push(b)}this.layersByDepth=f,h=Object.keys(d).map(x=>parseInt(x,10)).sort(ab);const p=this.inputs.slice(),m=[];for(const x of h)for(const v of d[x]){const b=v.outboundLayer;if(b!=null){for(const w of v.inputTensors)if(p.indexOf(w)===-1)throw new $o(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${b.name}". The following previous layers were accessed without issue: ${m}`);for(const w of v.outputTensors)p.push(w);m.push(b.name)}}this.nodesByDepth=d;const y=this.layers.map(x=>x.name);for(const x of y){const v=y.filter(b=>b===x).length;if(v!==1)throw new $o(`The name "${x}" is used ${v} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new qB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(x=>null),outputMasks:this.outputs.map(x=>null),inputShapes:this.inputs.map(x=>x.shape),outputShapes:this.outputs.map(x=>x.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ae("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let s=0;const i=_Fe(e);i&&this.parseWeights(e);for(const a of this.layers)for(const[l,c]of a.weights.entries()){const u=i?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new ae(`Duplicate weight name: ${u}`);r[u]=c,s++}const o=[];for(const a in e){let l=a;if(r[a]==null){const c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)o.push([r[l],e[a]]);else if(n)throw new ae(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new ae(`${a.length} of ${s} weights are not set: ${a}`)}cR(o)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),s=["vars","layer_checkpoint_dependencies"],i=r.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!s.includes(o)).join("/");i!==n&&(e[i]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${WY}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=cT(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return ce(()=>{e=en(e);const r=new mu;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return Ug(this.outputs,r,n)})}computeMask(e,n){return ce(()=>{e=en(e);let r;return n==null?r=Xd(null,e.length):r=en(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=h2(e);if(n.length!==this.inputLayers.length)throw new ae(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],c=n[a],u=l.name+"_0_0";r[u]=c}const s=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(ab);if(s.length>1)for(const a of s){const l=this.nodesByDepth[a];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(p=>p.id).indexOf(u.id)!==-1)continue;const A=[];for(let p=0;p<c.inboundLayers.length;p++){const m=c.inboundLayers[p],y=c.nodeIndices[p],x=c.tensorIndices[p],v=`${m.name}_${y}_${x}`,b=r[v];A.push(b)}const d=u.computeOutputShape(Zs(A)),f=h2(d),h=u.inboundNodes.indexOf(c);for(let p=0;p<f.length;p++){const m=`${u.name}_${h}_${p}`;r[m]=f[p]}}}const i=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],A=`${l.name}_${c}_${u}`;o.push(A)}for(let a=0;a<o.length;a++){const l=o[a];Ya(l in r),i.push(r[l])}return Zs(i)}runInternalGraph(e,n){n==null&&(n=Xd(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],A=n[l];r[c.id]=[u,A]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(ab);for(const l of s){const c=this.nodesByDepth[l];for(const u of c){const A=u.outboundLayer,d=u.inputTensors,f=u.outputTensors,h=new Array;for(const p of d)p.id in r&&h.push(r[p.id]);if(h.length===d.length){let p={},m,y,x,v;if(u.callArgs!=null&&(p=u.callArgs),h.length===1){const[b,w]=h[0];p.mask==null&&(p.mask=w),x=en(A.call(b,p)),v=en(A.computeMask(b,w)),m=[b],y=[w]}else m=h.map(b=>b[0]),y=h.map(b=>b[1]),p.mask==null&&(p.mask=y),x=en(A.call(m,p)),v=en(A.computeMask(m,y));if(A.activityRegularizer)throw new Ct("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let b=0;b<f.length;++b){const w=f[b],C=x[b],B=v[b];r[w.id]=[C,B]}}}}const i=[],o=[],a=[];for(const l of this.outputs){Ya(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=r[l.id];a.push(c.shape),i.push(c),o.push(u)}return[i,o,a]}buildNodeConversionMap(e){const n={};let r;for(const s of this.layers){r=s instanceof na?1:0;for(let i=0;i<s.inboundNodes.length;i++){const o=na.nodeKey(s,i);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new ae("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new ae(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new ae(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return ce(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const s=na.nodeKey(n,r);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),c=[];for(let A=0;A<o.inboundNodes.length;A++){const d=o.inboundNodes[A],f=na.nodeKey(o,A);let h={};if(this.containerNodes.has(f)){if(d.callArgs)try{JSON.stringify(d.callArgs),h=d.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${d.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),h={}}if(d.inboundLayers.length>0){const p=[];for(let m=0;m<d.inboundLayers.length;m++){const y=d.inboundLayers[m],x=d.nodeIndices[m],v=d.tensorIndices[m],b=na.nodeKey(y,x);let w=n[b];w==null&&(w=0),p.push([y.name,w,v,h])}c.push(p)}}}const u={};u.name=o.name,u.className=a,u.config=l,u.inboundNodes=c,r.push(u)}e.layers=r;const s=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],l=this.inputLayersNodeIndices[o],c=na.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const A=this.inputLayersTensorIndices[o];s.push([a.name,u,A])}e.inputLayers=s;const i=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],l=this.outputLayersNodeIndices[o],c=na.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const A=this.outputLayersTensorIndices[o];i.push([a.name,u,A])}return e.outputLayers=i,e}static fromConfig(e,n,r={},s=!1){const i={},o={};function a(m,y){m.name in o?o[m.name].push(y):o[m.name]=[y]}function l(m,y){const x=[];let v;for(const b of y){const w=b[0],C=b[1],B=b[2];if(v=b[3]==null?{}:b[3],!(w in i)){a(m,y);return}const S=i[w];if(S.inboundNodes.length<=C){a(m,y);return}const N=S.inboundNodes[C];x.push(N.outputTensors[B])}x.length>0&&m.apply(Zs(x),v)}function c(m){const y=m.name,x=sc(m,n.customObjects!=null?n.customObjects:{});x.setFastWeightInitDuringBuild(s),i[y]=x,m.inboundNodes.forEach(b=>{if(!(b instanceof Array))throw new ae(`Corrupted configuration, expected array for nodeData: ${b}`);a(x,b)})}const u=n.name,A=n.layers;for(const m of A)c(m);for(;!gTe(o);)for(const m of A){const y=i[m.name];if(y.name in o){const x=o[y.name];delete o[y.name];for(const v of x)l(y,v)}}const d=[],f=[],h=n.inputLayers;for(const m of h){const y=m[0],x=m[1],v=m[2];Ya(y in i);const w=i[y].inboundNodes[x].outputTensors;d.push(w[v])}const p=n.outputLayers;for(const m of p){const y=m[0],x=m[1],v=m[2];Ya(y in i);const w=i[y].inboundNodes[x].outputTensors;f.push(w[v])}return new e({inputs:d,outputs:f,name:u})}get stateful(){if(this._stateful)throw new ae("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){ce(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function OFe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(i=>{i in t?s.push(t[i]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function GY(t,e){return OFe(t,e,"classWeight")}async function KY(t,e,n,r){if(n!=null){const s=ce(()=>{if(t.shape.length===1)return rc(t);if(t.shape.length===2){if(t.shape[1]>1)return ip(t,1);if(t.shape[1]===1)return oe(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await s.data());ft(s);const o=[];return i.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(n[a])}),mr(o,"float32")}else return null}function DFe(t,e){return ne(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const RFe=32;function XY(t,e){let n,r;const s=e;n=s.xs,r=s.ys,L(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=c5("input",t.inputNames,n),o=c5("output",t.outputNames,r),a=i[0].shape[0];L(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),L(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<i.length;l++)L(i[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)L(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:i,ys:o}}function c5(t,e,n){if(n instanceof qt)return[n];if(Array.isArray(n))return L(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const s of e){if(n[s]==null)throw new ae(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);r.push(n[s])}return r}}function PFe(t){if(t.length===3)throw new Ct("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function UFe(t,e,n){const r=n.batchesPerEpoch!=null;if(L(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),L(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),L(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),L(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),L(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let i,o;if(s)if(u5(n.validationData))L(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const m=PFe(n.validationData);i=m.xs,o=m.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;s?c=l.slice().concat(l.map(m=>"val_"+m)):c=l.slice();const u=UY(n.callbacks,n.yieldEvery),A=n.verbose==null?1:n.verbose,{callbackList:d,history:f}=LY(u,A,n.epochs,null,null,LFe(e,n),null,s,c);d.setModel(t),t.history=f,await d.onTrainBegin(),t.stopTraining_=!1;let h=n.initialEpoch==null?0:n.initialEpoch,p=await e.iterator();for(;h<n.epochs;){const m={};await d.onEpochBegin(h);let y=0,x=0;for(r||(p=await e.iterator());!r||y<n.batchesPerEpoch;){const v=await p.next();if(r&&v.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(v.value!=null){const{xs:b,ys:w}=XY(t,v.value),C={};C.batch=x,C.size=b[0].shape[0],await d.onBatchBegin(x,C);const B=[];if(n.classWeight!=null){const k=GY(n.classWeight,t.outputNames);for(let O=0;O<k.length;++O)B.push(await KY(w[O],null,k[O]))}const S=b.concat(w).concat(B),N=a(S);ft(S);for(let k=0;k<l.length;++k){const O=l[k],U=N[k];C[O]=U,Mr(U)}await d.onBatchEnd(x,C),PY(C),x++,y++}if(r?y>=n.batchesPerEpoch:v.done){if(s){let b;u5(n.validationData)?b=en(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):b=en(t.evaluate(i,o,{batchSize:n.validationBatchSize==null?RFe:n.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)m[`val_${t.metricsNames[w]}`]=b[w]}break}if(t.stopTraining_)break}if(await d.onEpochEnd(h,m),h++,t.stopTraining_)break}return await d.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function LFe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function u5(t){return typeof t.iterator=="function"}function jFe(t){return typeof t.next=="function"}async function MFe(t,e,n){n=n||{};const r=n.batches!=null,s=t.testFunction;let i=[];if(n.verbose>0)throw new Ct("Verbose mode is not implemented yet.");L(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=jFe(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const c=await o.next();if(i=ce(()=>{if(c.value){const{xs:u,ys:A}=XY(t,c.value),d=u.concat(A),f=ce(()=>s(d));if(ft(d),l===0)for(let p=0;p<f.length;++p)i.push(at(0));const h=d[0].shape[0];for(let p=0;p<f.length;++p){const m=f[p],y=i[p];i[p]=ce(()=>Ee(i[p],ne(h,m))),l>0&&ft(y)}ft(f),a+=h,++l}return i}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<i.length;++c){const u=i[c];i[c]=ze(i[c],a),ft(u)}return Zs(i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function K4(t){L(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function ag(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>Ed(r,e,n-e)):Ed(t,e,n-e)}function uT(t,e){return ce(()=>t==null?null:Array.isArray(t)?t.map(n=>uT(n,e)):CY(t,e.dtype==="int32"?e:Pe(e,"int32")))}function X4(t,e){const n=[];let r=0,s=null;for(;r<t;)s=r+e,s>=t&&(s=t),n.push([r,s]),r=s;return n}function qY(t){const e=[];t instanceof qt&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(mv(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Zo(t,e){if(t==null)return;const n=[];if(e instanceof qt)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const i=e[s];n.push(i.id)}const r=[];if(t instanceof qt)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&r.push(s)});else if(t!=null)for(const s in t){const i=t[s];n.indexOf(i.id)===-1&&r.push(i)}r.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function QFe(t){return t instanceof qt}function AT(t){return Array.isArray(t)}function A5(t){return!QFe(t)&&!AT(t)}function d5(t,e,n,r=!0,s=""){if(e==null||e.length===0){if(t!=null){let o=!1;if(AT(t)&&t.length>0)o=!0;else if(A5(t)){for(const a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new ae(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let i;if(A5(t)){t=t,i=[];for(const o of e){if(t[o]==null)throw new ae(`No data provided for "${o}". Need data for each key in: ${e}`);i.push(t[o])}}else if(AT(t)){if(t=t,t.length!==e.length)throw new ae(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,e.length>1)throw new ae(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=qY(i),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=i[o];if(a.shape.length!==n[o].length)throw new ae(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u>=0&&c!==u)throw new ae(`${s} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${s} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return i}function HFe(t,e,n){const r=Ou(t.map(i=>i.shape[0]));r.sort();const s=Ou(e.map(i=>i.shape[0]));if(s.sort(),r.length>1)throw new ae(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(s.length>1)throw new ae(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(r.length>0&&s.length>0&&!_t(r,s))throw new ae(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function zFe(t,e,n){const r=[YB,JB,n0];for(let s=0;s<t.length;++s){const i=t[s],o=e[s],a=n[s];if(o!=null){if(o===n0&&i.shape[i.shape.length-1]===1)throw new ae(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const l=i.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){const A=l[u],d=c[u];if(d!=null&&A!==d)throw new ae(`A target Tensor with shape ${i.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function f5(t,e,n,r=!0,s=""){let i;if(Array.isArray(t)){if(t.length!==e.length)throw new ae(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(e.length>1)throw new ae(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=i[o];if(a.shape.length!==n[o].length)throw new ae(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u!==c)throw new ae(`Error when checking ${s}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function VFe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const s of e){let i=n.hasOwnProperty(s)?n[s]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}const WFe="layers-model";class Fh extends na{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new ae("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");IFe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=EFe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof fA))throw new ae("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new ae(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(G4(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ae(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>G4(a))}else{const o=G4(e.loss);this.outputs.forEach(a=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const a=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Nd("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([a,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const s=VFe(e.metrics,this.outputNames),i=(o,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[o]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,o])};Nd("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=s[o];(c=>{const u="";let A,d,f;for(const h of c){if(typeof h=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(h)!==-1){const m=this.internalOutputShapes[o];m[m.length-1]===1||this.lossFunctions[o]===JB?["accuracy","acc"].indexOf(h)!==-1?d=MY:["crossentropy","ce"].indexOf(h)!==-1&&(d=gFe):this.lossFunctions[o]===x2?["accuracy","acc"].indexOf(h)!==-1?d=yFe:["crossentropy","ce"].indexOf(h)!==-1&&(d=zY):["accuracy","acc"].indexOf(h)!==-1?d=QY:["crossentropy","ce"].indexOf(h)!==-1&&(d=HY);let y;["accuracy","acc"].indexOf(h)!==-1?y="acc":["crossentropy","ce"].indexOf(h)!==-1&&(y="ce"),f=d,A=u+y}else f=NFe(h),A=u+ub(h);let p;Nd(A,()=>{p=f}),i(o,A,p)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const s=r.batchSize==null?32:r.batchSize;K4(s);const o=this.standardizeUserDataXY(e,n,!0,s);try{const a=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,a,s,r.verbose,r.steps);return Zs(c)}finally{Zo(o[0],e),Zo(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),MFe(this,e,n)}checkNumSamples(e,n,r,s="steps"){let i;if(r!=null){if(i=null,n!=null)throw new ae(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new ae(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return i}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new ae("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),s=r?n:[n],i=this.retrieveSymbolicTensors(s),o=new mu;if(e instanceof qt&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ae(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new ae(`No value is provided for the model's input ${l.name}`);o.add(l,c)}const a=Ug(i,o);return r?a:a[0]}retrieveSymbolicTensors(e){const n=Xd(null,e.length);let r=e.length;for(const s of this.layers){const i=Array.isArray(s.output)?s.output:[s.output],o=i.map(a=>a.name);for(let a=0;a<e.length;++a){const l=o.indexOf(e[a]);if(l!==-1&&(n[a]=i[l],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw n.forEach((i,o)=>{i==null&&s.push(e[o])}),new ae(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return n}predictLoop(e,n=32,r=!1){return ce(()=>{const s=this.checkNumSamples(e);if(r)throw new Ct("Verbose predictLoop() is not implemented yet.");const i=X4(s,n),o=this.outputs.map(a=>[]);for(let a=0;a<i.length;++a)ce(()=>{const c=i[a][0],u=i[a][1],A=ag(e,c,u),d=[];if(Array.isArray(A))for(let h=0;h<A.length;++h)d.push({key:this.inputs[h],value:A[h]});else d.push({key:this.inputs[0],value:A});const f=new mu(d);return Ug(this.outputs,f)}).forEach((c,u)=>o[u].push(c));return Zs(o.map(a=>qn(a,0)))})}predict(e,n={}){const r=qY(e);f5(r,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return K4(s),this.predictLoop(r,s)}finally{Zo(r,e)}}predictOnBatch(e){f5(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,s){if(this.optimizer_==null)throw new $o("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let o=0;o<this.feedOutputShapes.length;++o){const a=this.feedOutputShapes[o];this.feedLossFns[o]===x2?i.push(a.slice(0,a.length-1).concat([1])):i.push(a)}if(e=d5(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=d5(n,this.feedOutputNames,i,!1,"target"),HFe(e,n),zFe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new ae(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,s,i=!0,o){const[a,l]=this.standardizeUserDataXY(e,n,i,o);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(s!=null){const u=GY(s,this.outputNames);c=[];for(let A=0;A<u.length;++A)c.push(await KY(l[A],null,u[A]))}return[a,l,c]}testLoop(e,n,r,s=0,i){return ce(()=>{const o=this.checkNumSamples(n,r,i,"steps"),a=[];if(s>0)throw new Ct("Verbose mode is not implemented yet.");if(i!=null)throw new Ct("steps mode in testLoop() is not implemented yet");{const l=X4(o,r),c=mr(Na(0,o));for(let u=0;u<l.length;++u){const A=l[u][0],d=l[u][1],f=Ed(c,A,d-A),h=uT(n,f),p=e(h);if(u===0)for(let m=0;m<p.length;++m)a.push(at(0));for(let m=0;m<p.length;++m){const y=p[m];a[m]=Ee(a[m],ne(d-A,y))}}for(let u=0;u<a.length;++u)a[u]=ze(a[u],o)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const s=e[r];let i=s;if(Y6(e,s)>1){const o=Y6(e.slice(0,r),s);i+=`_${o}`}n.push(i)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],a=()=>{const A=[];for(let p=0;p<this.inputs.length;++p)A.push({key:this.inputs[p],value:r[p]});const d=new mu(A),f=Ug(this.outputs,d,{training:!0});let h;for(let p=0;p<this.lossFunctions.length;++p){const m=this.lossFunctions[p];let y=m(s[p],f[p]);i[p]!=null&&(y=DFe(y,i[p]));const x=Kn(y);n.push(x),p===0?h=y:h=Ee(h,y)}for(let p=0;p<this.metricsTensors.length;++p){let m;if(this.outputs.length>1&&p<this.outputs.length)m=n[p];else{const y=this.metricsTensors[p][0],x=this.metricsTensors[p][1];m=Kn(y(s[x],f[x]))}Mr(m),o.push(m)}return h=Kn(h),this.calculateLosses().forEach(p=>{h=Ee(h,p)}),h},l=this.collectedTrainableWeights.map(A=>A.read());return[this.optimizer_.minimize(a,!0,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>ce(()=>{const n=[];let r;const s=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let c=0;c<this.inputs.length;++c)o.push({key:this.inputs[c],value:s[c]});const a=new mu(o),l=Ug(this.outputs,a);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],A=Kn(u(i[c],l[c]));c===0?r=A:r=Ee(r,A),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],A=this.metricsTensors[c][1],d=Kn(u(i[A],l[A]));n.push(d)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,i,o,a,l,c,u,A,d;try{const f=r.batchSize==null?32:r.batchSize;K4(f);const p=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,f);s=p[0],i=p[1],d=p[2];let m=!1,y;if(r.validationData!=null&&r.validationData.length>0){if(m=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new Ct("validationData including sample weights is not supported yet."):new ae(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const k=await this.standardizeUserData(l,c,null,null,!0,f);u=k[0],A=k[1],y=u.concat(A)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){m=!0;const N=Math.floor(s[0].shape[0]*(1-r.validationSplit)),k=s[0].shape[0];u=ag(s,N,k),o=s,s=ag(s,0,N),A=ag(i,N,k),a=i,i=ag(i,0,N),y=u.concat(A)}else r.validationSteps!=null&&(m=!0);const x=s.concat(i).concat(d);this.checkTrainableWeightsConsistency();const v=this.makeTrainFunction(),b=this.getDedupedMetricsNames();let w,C;m?(this.makeTestFunction(),w=this.testFunction,C=b.slice().concat(b.map(N=>"val_"+N))):(w=null,y=[],C=b.slice());const B=UY(r.callbacks,r.yieldEvery);return await this.fitLoop(v,x,b,f,r.epochs,r.verbose,B,w,y,r.shuffle,C,r.initialEpoch,null,null)}finally{this.isTraining=!1,Zo(s,e),Zo(i,n),Zo(o,e),Zo(a,n),Zo(u,l),Zo(A,c),d!=null&&ft(d)}}async fitLoop(e,n,r,s,i,o,a,l,c,u,A,d,f,h){s==null&&(s=32),i==null&&(i=1),u==null&&(u=!0),d==null&&(d=0);let p=!1;if(l!=null&&c!=null&&(p=!0),h!=null&&(p=!0,f==null))throw new ae("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=this.checkNumSamples(n,s,f,"steps_per_epoch");let y;m!=null&&(y=Na(0,m)),o==null&&(o=1);const{callbackList:x,history:v}=LY(a,o,i,d,m,f,s,p,A);x.setModel(this),this.history=v,await x.onTrainBegin(),this.stopTraining_=!1;for(let b=d;b<i;++b){await x.onEpochBegin(b);const w={};if(f!=null)throw new Ct("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new Ct("batch shuffling is not implemneted yet");u&&b1e(y);const C=mr(y),B=X4(m,s);for(let S=0;S<B.length;++S){const N={};if(await x.onBatchBegin(S,N),ce(()=>{const k=B[S][0],O=B[S][1],U=Ed(C,k,O-k);N.batch=S,N.size=O-k;const P=uT(n,U),V=e(P);for(let W=0;W<r.length;++W){const j=r[W],G=V[W];N[j]=G,Mr(G)}if(S===B.length-1&&p){const W=this.testLoop(l,c,s);for(let j=0;j<r.length;++j){const G=r[j],D=W[j];Mr(D),w["val_"+G]=D}}}),await x.onBatchEnd(S,N),PY(N),this.stopTraining_)break}C.dispose()}if(await x.onEpochEnd(b,w),this.stopTraining_)break}return await x.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return UFe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),s=r[0],i=r[1],a=this.makeTrainFunction()(s.concat(i)),l=[];for(const c of a){const u=await c.data();l.push(u[0])}return ft(a),Zo(r[0],e),Zo(r[1],n),Zs(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,i=this.getWeights(r);for(let o=0;o<s.length;++o)r&&!s[o].trainable||n.push({name:s[o].originalName,tensor:i[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=h6().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-h6().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Ql(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Ql(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const s of n)if(typeof r[s]=="string")e[s]=Ql(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Ql(ub(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Ql(ub(e)));{const e={};for(const n in this.metrics)e[n]=Ql(ub(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=lT(e.optimizer_config),r=sc(n);let s;if(typeof e.loss=="string")s=XA(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(o=>XA(o));else if(e.loss!=null){s={};for(const o in e.loss)s[o]=XA(e.loss[o])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(o=>XA(o));else if(e.metrics!=null){i={};for(const o in e.metrics)i[o]=XA(e.metrics[o])}this.compile({loss:s,metrics:i,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=GK(e);if(c.length===0)throw new ae(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new ae(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new ae("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await _k(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:WFe,generatedBy:`TensorFlow.js tfjs-layers v${WY}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:A}=await _k(await this.optimizer.getWeights(),c);r.specs.push(...A),r.data=zK([r.data,u])}return this.userDefinedMetadata!=null&&(l5(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){l5(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Fh.className="Model";Te(Fh);class YY extends Fh{}YY.className="Functional";Te(YY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class r0 extends Fh{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:KB("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new ae(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof r0||e instanceof Fh;let r;if(n){if(r=e,r.outputs.length!==1)throw new ae("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new ae("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new ae("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=KTe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new ae(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new ae("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=$Y(this.outputs[0])}this.inboundNodes=[],new qB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Xd(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(zt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Fh({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new $o("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new $o("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new $o("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new $o("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},s=!1){let i,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new ae("Legacy serialization format not supported yet.");i=n}else L(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=n.layers,delete n.layers,o=n;const a=new e(o);if(!(a instanceof r0))throw new Ct(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of i){const u=sc(l,void 0,s);s&&u.setFastWeightInitDuringBuild(!0),a.add(u)}return a}set stopTraining(e){if(this.model==null)throw new ae("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new ae("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}r0.className="Sequential";Te(r0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let bs=class extends im{getConfig(){return{}}};class JY extends bs{apply(e,n=1){return $Te(e,n)}}JY.className="elu";Te(JY);class ZY extends bs{apply(e){return oD(e)}}ZY.className="selu";Te(ZY);class eJ extends bs{apply(e){return vl(e)}}eJ.className="relu";Te(eJ);class tJ extends bs{apply(e){return ce(()=>Wd(6,vl(e)))}}tJ.className="relu6";Te(tJ);let nJ=class extends bs{apply(e){return e}};nJ.className="linear";Te(nJ);class rJ extends bs{apply(e){return xa(e)}}rJ.className="sigmoid";Te(rJ);class sJ extends bs{apply(e){return OTe(e)}}sJ.className="hardSigmoid";Te(sJ);class iJ extends bs{apply(e){return nm(e)}}iJ.className="softplus";Te(iJ);class oJ extends bs{apply(e){return _Te(e)}}oJ.className="softsign";Te(oJ);class aJ extends bs{apply(e){return Vd(e)}}aJ.className="tanh";Te(aJ);let fR=class extends bs{apply(e,n=-1){return PB(e,n)}};fR.className="softmax";Te(fR);class lJ extends bs{apply(e,n=-1){return VO(e,n)}}lJ.className="logSoftmax";Te(lJ);class cJ extends bs{apply(e){return ce(()=>ce(()=>{const n=Math.sqrt(2),r=ne(.5,Ee(1,QO(ze(e,n))));return ne(e,r)}))}}cJ.className="gelu";Te(cJ);class uJ extends bs{apply(e){return ce(()=>ne(.5,ne(e,Ee(1,Vd(ne(rs(ze(2,Math.PI)),Ee(e,ne(.044715,fc(e,3)))))))))}}uJ.className="gelu_new";Te(uJ);class AJ extends bs{apply(e){return ce(()=>ne(e,Vd(nm(e))))}}AJ.className="mish";Te(AJ);class dJ extends bs{apply(e,n=1){return ce(()=>ne(xa(ne(e,n)),e))}}dJ.className="swish";Te(dJ);function qu(t){return t.getClassName()}function q4(t,e={}){return pv(t,Co.getMap().classNameMap,e,"activation")}function Yu(t){if(t==null){const e={};return e.className="linear",e.config={},q4(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},q4(e)}else return t instanceof bs?t:q4(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function GFe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class fJ extends im{}class hJ extends fJ{constructor(e){super(),GFe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return ce(()=>{let n=Sr([1]);return this.hasL1&&(n=Ee(n,Je(ne(this.l1,vr(e))))),this.hasL2&&(n=Ee(n,Je(ne(this.l2,gv(e))))),oe(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}hJ.className="L1L2";Te(hJ);const h5={l1l2:"L1L2"};function hn(t){return ZD(t)}function p5(t,e={}){return pv(t,Co.getMap().classNameMap,e,"regularizer")}function Dn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in h5?h5[t]:t,config:{}};return p5(n)}else return t instanceof fJ?t:p5(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class pJ extends Tt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=At(e);let r=vl(e);return this.maxValue!=null&&(r=ii(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}pJ.className="ReLU";Te(pJ);class mJ extends Tt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=At(e);return NB(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}mJ.className="LeakyReLU";Te(mJ);class gJ extends Tt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=On(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Dn(e.alphaRegularizer),this.alphaConstraint=kr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new ae(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=zt(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new Nr({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=At(e),_B(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Mn(this.alphaInitializer),alphaRegularizer:hn(this.alphaRegularizer),alphaConstraint:Ir(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}gJ.className="PReLU";Te(gJ);let yJ=class extends Tt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Ct(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=At(e);return lv(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};yJ.className="ELU";Te(yJ);class xJ extends Tt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=At(e);return ne(r,Pe(Li(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}xJ.className="ThresholdedReLU";Te(xJ);class vJ extends Tt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new fR().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return ce(()=>{let r=At(e);const s=n.mask;if(s!=null){const i=ne(We(Bi(r.shape),Pe(s,r.dtype)),at(-1e9));r=Ee(r,i)}return this.axis instanceof Array?this.axis.length>1?js(We(r,IB(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}vJ.className="Softmax";Te(vJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $h(t,e,n){if(typeof t=="number")return Xd(t,e);if(t.length!==e)throw new ae(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const s=t[r];if(!ITe(s))throw new ae(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function ba(t,e,n,r,s=1){if(t==null)return t;const i=e+(e-1)*(s-1);let o;return n==="same"?o=t:o=t-i+1,Math.floor((o+r-1)/r)}function Ja(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+Xu([n-e,0]);else if(r==="same")t=t*e;else throw new ae(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hR(t,e){return ce(()=>(lr(e),e==="channelsFirst"?Ut(t,[0,2,3,1]):t))}function bJ(t,e){return ce(()=>(lr(e),e==="channelsFirst"?Ut(t,[0,2,3,4,1]):t))}function KFe(t,e,n,r=1,s="valid",i,o=1){return ce(()=>{if(i==null&&(i=Ea()),lr(i),t.shape.length!==3)throw new ae(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new ae(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new ae(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(i==="channelsFirst"&&(t=Ut(t,[0,2,1])),s==="causal")throw new Ct("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=PO(t,e,r,s==="same"?"same":"valid","NWC",o);return n!=null&&(a=_a(a,n)),a})}function m5(t,e,n,r=[1,1],s="valid",i,o,a=null){return ce(()=>{if(i==null&&(i=Ea()),lr(i),t.rank!==3&&t.rank!==4)throw new ae(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new ae(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=hR(t,i);if(s==="causal")throw new Ct("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=tq({x:l,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:a}),i==="channelsFirst"&&(l=Ut(l,[0,3,1,2])),l})}function XFe(t,e,n,r=[1,1,1],s="valid",i,o){return ce(()=>{if(i==null&&(i=Ea()),lr(i),t.rank!==4&&t.rank!==5)throw new ae(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new ae(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=bJ(t,i);if(s==="causal")throw new Ct("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=vX(a,e,r,s==="same"?"same":"valid","NDHWC",o),n!=null&&(a=_a(a,n)),i==="channelsFirst"&&(a=Ut(a,[0,4,1,2,3])),a})}class ZB extends Tt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",ZB.verifyArgs(n),this.rank=e,Qr(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Ct(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=$h(n.kernelSize,e,"kernelSize"),this.strides=$h(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,ao(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,lr(this.dataFormat),this.activation=Yu(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=On(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=kr(n.biasConstraint),this.biasRegularizer=Dn(n.biasRegularizer),this.activityRegularizer=Dn(n.activityRegularizer),this.dilationRate=$h(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ae(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ae(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ae(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Ya("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!eR(e.kernelSize,"number",1,3))throw new ae(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:qu(this.activation),useBias:this.useBias,biasInitializer:Mn(this.biasInitializer),biasRegularizer:hn(this.biasRegularizer),activityRegularizer:hn(this.activityRegularizer),biasConstraint:Ir(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class om extends ZB{constructor(e,n){super(e,n),this.kernel=null,om.verifyArgs(n),this.filters=n.filters,Qr(this.filters,"filters"),this.kernelInitializer=On(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=kr(n.kernelConstraint),this.kernelRegularizer=Dn(n.kernelRegularizer)}build(e){e=zt(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ae(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return ce(()=>{e=At(e);let r;const s=this.bias==null?null:this.bias.read(),i=gY(this.activation.getClassName());if(i!=null&&this.rank===2)r=m5(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=KFe(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=m5(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=XFe(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Ct("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=zt(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<r.length;++i){const o=ba(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);n.push(o)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:Mn(this.kernelInitializer),kernelRegularizer:hn(this.kernelRegularizer),kernelConstraint:Ir(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new ae(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class bv extends om{constructor(e){super(2,e),bv.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!eR(e.kernelSize,"number",1,2))throw new ae(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}bv.className="Conv2D";Te(bv);class wv extends om{constructor(e){super(3,e),wv.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new ae(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}wv.className="Conv3D";Te(wv);class wJ extends bv{constructor(e){if(super(e),this.inputSpec=[new Nr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ae(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=zt(e),e.length!==4)throw new ae("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ae("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Nr({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return ce(()=>{let r=At(e);if(r.shape.length!==4)throw new ae(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let o,a;this.dataFormat==="channelsFirst"?(o=2,a=3):(o=1,a=2);const l=s[o],c=s[a],u=this.kernelSize[0],A=this.kernelSize[1],d=this.strides[0],f=this.strides[1],h=Ja(l,d,u,this.padding),p=Ja(c,f,A,this.padding),m=[i,h,p,this.filters];this.dataFormat!=="channelsLast"&&(r=Ut(r,[0,2,3,1]));let y=LO(r,this.kernel.read(),m,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(y=Ut(y,[0,3,1,2])),this.bias!=null&&(y=_a(y,this.bias.read(),this.dataFormat)),this.activation!=null&&(y=this.activation.apply(y)),y})}computeOutputShape(e){e=zt(e);const n=e.slice();let r,s,i;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3):(r=3,s=1,i=2);const o=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[s]=Ja(n[s],l,o,this.padding),n[i]=Ja(n[i],c,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}wJ.className="Conv2DTranspose";Te(wJ);class CJ extends wv{constructor(e){if(super(e),this.inputSpec=[new Nr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ae(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=zt(e),e.length!==5)throw new ae("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ae("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Nr({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return ce(()=>{let r=At(e);if(r.shape.length!==5)throw new ae(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let o,a,l;this.dataFormat==="channelsFirst"?(l=2,o=3,a=4):(l=1,o=2,a=3);const c=s[l],u=s[o],A=s[a],d=this.kernelSize[0],f=this.kernelSize[1],h=this.kernelSize[2],p=this.strides[0],m=this.strides[1],y=this.strides[2],x=Ja(c,p,d,this.padding),v=Ja(u,m,f,this.padding),b=Ja(A,y,h,this.padding),w=[i,x,v,b,this.filters];this.dataFormat!=="channelsLast"&&(r=Ut(r,[0,2,3,4,1]));let C=wX(r,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=Ut(C,[0,4,1,2,3])),this.bias!==null&&(C=_a(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(e){e=zt(e);const n=e.slice();let r,s,i,o;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3,o=4):(r=4,s=1,i=2,o=3);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],A=this.strides[1],d=this.strides[2];return n[r]=this.filters,n[s]=Ja(n[s],u,a,this.padding),n[i]=Ja(n[i],A,l,this.padding),n[o]=Ja(n[o],d,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}CJ.className="Conv3DTranspose";Te(CJ);class SJ extends om{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new ae("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new ae("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new ae(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=On(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Dn(n.depthwiseRegularizer),this.depthwiseConstraint=kr(n.depthwiseConstraint),this.pointwiseInitializer=On(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Dn(n.pointwiseRegularizer),this.pointwiseConstraint=kr(n.pointwiseConstraint)}build(e){if(e=zt(e),e.length<this.rank+2)throw new ae(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new ae(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],s=this.kernelSize.concat([r,this.depthMultiplier]),i=[];for(let a=0;a<this.rank;++a)i.push(1);i.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new Nr({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return ce(()=>{e=At(e);let r;if(this.rank===1)throw new Ct("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Ut(e,[0,2,3,1])),r=aD(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=_a(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=Ut(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Mn(this.depthwiseInitializer),e.pointwiseInitializer=Mn(this.pointwiseInitializer),e.depthwiseRegularizer=hn(this.depthwiseRegularizer),e.pointwiseRegularizer=hn(this.pointwiseRegularizer),e.depthwiseConstraint=Ir(this.depthwiseConstraint),e.pointwiseConstraint=Ir(this.pointwiseConstraint),e}}SJ.className="SeparableConv";class BJ extends SJ{constructor(e){super(2,e)}}BJ.className="SeparableConv2D";Te(BJ);class e3 extends om{constructor(e){super(1,e),e3.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!eR(e.kernelSize,"number",1,1))throw new ae(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}e3.className="Conv1D";Te(e3);class NJ extends Tt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return ce(()=>{if(e=At(e),this.dataFormat==="channelsLast"){const r=cb(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return cb(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=cb(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return cb(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}NJ.className="Cropping2D";Te(NJ);class EJ extends Tt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,lr(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,BTe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return ce(()=>{let r=At(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=Ut(r,[0,2,3,1]);const i=this.size[0]*s[2],o=this.size[1]*s[3],a=this.interpolation==="nearest"?ti.resizeNearestNeighbor(r,[i,o]):ti.resizeBilinear(r,[i,o]);return Ut(a,[0,3,1,2])}else{const i=this.size[0]*s[1],o=this.size[1]*s[2];return this.interpolation==="nearest"?ti.resizeNearestNeighbor(r,[i,o]):ti.resizeBilinear(r,[i,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}EJ.className="UpSampling2D";Te(EJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qFe(t,e,n=[1,1],r="valid",s,i){return ce(()=>{s==null&&(s=Ea()),lr(s);let o=hR(t,s);if(t.rank!==4)throw new ae(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new ae(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=av(o,e,n,r==="same"?"same":"valid","NHWC",i),s==="channelsFirst"&&(o=Ut(o,[0,3,1,2])),o})}class IJ extends ZB{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=On(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=kr(e.depthwiseConstraint),this.depthwiseRegularizer=Dn(e.depthwiseRegularizer)}build(e){if(e=zt(e),e.length<4)throw new ae(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new ae(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ce(()=>{e=At(e);let r=qFe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=_a(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=zt(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=ba(n,this.kernelSize[0],this.padding,this.strides[0]),o=ba(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,i,o]:[e[0],i,o,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Mn(this.depthwiseInitializer),e.depthwiseRegularizer=hn(this.depthwiseRegularizer),e.depthwiseConstraint=Ir(this.depthwiseRegularizer),e}}IJ.className="DepthwiseConv2D";Te(IJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function kJ(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new ae("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(i){return i==null||Array.isArray(i)?i:[i]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function TJ(t,e,n,r=!1,s,i,o=!1,a=!1){return ce(()=>{const l=e.shape.length;if(l<3)throw new ae(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(Na(2,l));e=Ut(e,c),o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=Pe(Pe(s,"bool"),"float32"),s.rank===l-1&&(s=wr(s,-1)),s=Ut(s,c)),r&&(e=Qo(e,0),s!=null&&(s=Qo(s,0)));const u=[];let A,d=n;const f=e.shape[0],h=Ho(e);let p;s!=null&&(p=Ho(s));for(let y=0;y<f;++y){const x=h[y],v=ce(()=>t(x,d));if(s==null)A=v[0],d=v[1];else{const b=ce(()=>{const w=p[y],C=We(ro(w),w),B=Ee(ne(v[0],w),ne(d[0],C)),S=d.map((N,k)=>Ee(ne(v[1][k],w),ne(N,C)));return{output:B,newStates:S}});A=b.output,d=b.newStates}a&&u.push(A)}let m;return a&&(m=Oi(u,1)),[A,m,d]})}class hA extends Tt{constructor(e){super(e);let n;if(e.cell==null)throw new ae("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new gR({cells:e.cell}):n=e.cell,n.stateSize==null)throw new ae("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Nr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Na(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){iT(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const i=[];for(const o of n)i.push([e[0],o]);return[s].concat(i)}else return s}computeMask(e,n){return ce(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(i=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Ct("Constants support is not implemented in RNN yet.");iT(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Nr({shape:[n,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!_t(this.stateSpec.map(o=>o.shape[o.shape.length-1]),i))throw new ae(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(o=>new Nr({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){ce(()=>{if(!this.stateful)throw new qa("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new ae("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Sr([r,s])):this.states_=[Sr([r,this.cell.stateSize])];else if(e==null)ft(this.states_),this.keptStates!=null&&(ft(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Sr([r,s])):this.states_[0]=Sr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ae(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):ft(this.states_);for(let s=0;s<this.states_.length;++s){const i=e[s],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,a=[r,o];if(!_t(i.shape,a))throw new ae(`State ${s} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${i.shape}`);this.states_[s]=i}}this.states_=this.states_.map(s=>Mr(s.clone()))})}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=kJ(e,r,s,this.numConstants);e=i.inputs,r=i.initialState,s=i.constants;let o=[],a=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new Nr({shape:c.shape}));a=a.concat(this.stateSpec)}if(s!=null&&(n.constants=s,o=o.concat(s),this.numConstants=s.length),o[0]instanceof pl){const c=[e].concat(o),u=this.inputSpec.concat(a),A=this.inputSpec;this.inputSpec=u;const d=super.apply(c,n);return this.inputSpec=A,d}else return super.apply(e,n)}call(e,n){return ce(()=>{const r=n==null?null:n.mask,s=n==null?null:n.training;let i=n==null?null:n.initialState;e=At(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==o)throw new ae(`RNN Layer has ${o} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:s},c=TJ((h,p)=>{const m=this.cell.call([h].concat(p),a);return[m[0],m.slice(1)]},e,i,this.goBackwards,r,null,this.unroll,this.returnSequences),u=c[0],A=c[1],d=c[2];this.stateful&&this.resetStates(d,s);const f=this.returnSequences?A:u;return this.returnState?[f].concat(d):f})}getInitialState(e){return ce(()=>{let n=Sr(e.shape);return n=Je(n,[1,2]),n=mv(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?rT(n,[1,r]):n):this.cell.stateSize>1?[rT(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===hA.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const s=n.cell,i=sc(s,r);return new e(Object.assign(n,{cell:i}))}}hA.className="RNN";Te(hA);class t3 extends Tt{}class pR extends t3{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Qr(this.units,"units"),this.activation=Yu(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=On(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=On(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=On(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Dn(e.kernelRegularizer),this.recurrentRegularizer=Dn(e.recurrentRegularizer),this.biasRegularizer=Dn(e.biasRegularizer),this.kernelConstraint=kr(e.kernelConstraint),this.recurrentConstraint=kr(e.recurrentConstraint),this.biasConstraint=kr(e.biasConstraint),this.dropout=cp([1,Xu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=cp([1,Xu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=zt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ce(()=>{if(e=e,e.length!==2)throw new ae(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ju({ones:()=>ro(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ju({ones:()=>ro(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let i;const o=this.dropoutMask,a=this.recurrentDropoutMask;o!=null?i=Al(ne(e,o),this.kernel.read()):i=Al(e,this.kernel.read()),this.bias!=null&&(i=_a(i,this.bias.read())),a!=null&&(r=ne(r,a));let l=Ee(i,Al(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:qu(this.activation),useBias:this.useBias,kernelInitializer:Mn(this.kernelInitializer),recurrentInitializer:Mn(this.recurrentInitializer),biasInitializer:Mn(this.biasInitializer),kernelRegularizer:hn(this.kernelRegularizer),recurrentRegularizer:hn(this.recurrentRegularizer),biasRegularizer:hn(this.biasRegularizer),activityRegularizer:hn(this.activityRegularizer),kernelConstraint:Ir(this.kernelConstraint),recurrentConstraint:Ir(this.recurrentConstraint),biasConstraint:Ir(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}pR.className="SimpleRNNCell";Te(pR);class FJ extends hA{constructor(e){e.cell=new pR(e),super(e)}call(e,n){return ce(()=>{this.cell.dropoutMask!=null&&(ft(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ft(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return new e(n)}}FJ.className="SimpleRNN";Te(FJ);class mR extends t3{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ae("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Qr(this.units,"units"),this.activation=Yu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Yu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=On(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=On(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=On(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Dn(e.kernelRegularizer),this.recurrentRegularizer=Dn(e.recurrentRegularizer),this.biasRegularizer=Dn(e.biasRegularizer),this.kernelConstraint=kr(e.kernelConstraint),this.recurrentConstraint=kr(e.recurrentConstraint),this.biasConstraint=kr(e.biasConstraint),this.dropout=cp([1,Xu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=cp([1,Xu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=zt(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ce(()=>{if(e=e,e.length!==2)throw new ae(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ju({ones:()=>ro(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ju({ones:()=>ro(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;let a,l,c;0<this.dropout&&this.dropout<1&&(e=ne(e,i[0]));let u=Al(e,this.kernel.read());this.useBias&&(u=_a(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=ne(s,o[0]));const A=this.recurrentKernel.read(),[d,f]=$i(A,[2*this.units,this.units],A.rank-1),h=Al(s,d),[p,m,y]=$i(u,3,u.rank-1),[x,v]=$i(h,2,h.rank-1);a=this.recurrentActivation.apply(Ee(p,x)),l=this.recurrentActivation.apply(Ee(m,v));const b=Al(ne(l,s),f);c=this.activation.apply(Ee(y,b));const w=Ee(ne(a,s),ne(Ee(1,In(a)),c));return[w,w]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:qu(this.activation),recurrentActivation:qu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Mn(this.kernelInitializer),recurrentInitializer:Mn(this.recurrentInitializer),biasInitializer:Mn(this.biasInitializer),kernelRegularizer:hn(this.kernelRegularizer),recurrentRegularizer:hn(this.recurrentRegularizer),biasRegularizer:hn(this.biasRegularizer),activityRegularizer:hn(this.activityRegularizer),kernelConstraint:Ir(this.kernelConstraint),recurrentConstraint:Ir(this.recurrentConstraint),biasConstraint:Ir(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}mR.className="GRUCell";Te(mR);class $J extends hA{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new mR(e),super(e)}call(e,n){return ce(()=>{this.cell.dropoutMask!=null&&(ft(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ft(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}$J.className="GRU";Te($J);class n3 extends t3{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Qr(this.units,"units"),this.activation=Yu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Yu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=On(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=On(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=On(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Dn(e.kernelRegularizer),this.recurrentRegularizer=Dn(e.recurrentRegularizer),this.biasRegularizer=Dn(e.biasRegularizer),this.kernelConstraint=kr(e.kernelConstraint),this.recurrentConstraint=kr(e.recurrentConstraint),this.biasConstraint=kr(e.biasConstraint),this.dropout=cp([1,Xu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=cp([1,Xu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=zt(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,o=this.units;s=new(n=class extends Ko{apply(l,c){const u=i.apply([o]),A=new nR().apply([o]),d=i.apply([o*2]);return Z6(Z6(u,A),d)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return ce(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new ae(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ju({ones:()=>ro(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ju({ones:()=>ro(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,u,A;0<this.dropout&&this.dropout<1&&(e=ne(e,o[0]));let d=Al(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=ne(s,a[0])),d=Ee(d,Al(s,this.recurrentKernel.read())),this.useBias&&(d=_a(d,this.bias.read()));const[f,h,p,m]=$i(d,4,d.rank-1);l=this.recurrentActivation.apply(f),c=this.recurrentActivation.apply(h),u=Ee(ne(c,i),ne(l,this.activation.apply(p))),A=this.recurrentActivation.apply(m);const y=ne(A,this.activation.apply(u));return[y,y,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:qu(this.activation),recurrentActivation:qu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Mn(this.kernelInitializer),recurrentInitializer:Mn(this.recurrentInitializer),biasInitializer:Mn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:hn(this.kernelRegularizer),recurrentRegularizer:hn(this.recurrentRegularizer),biasRegularizer:hn(this.biasRegularizer),activityRegularizer:hn(this.activityRegularizer),kernelConstraint:Ir(this.kernelConstraint),recurrentConstraint:Ir(this.recurrentConstraint),biasConstraint:Ir(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}n3.className="LSTMCell";Te(n3);class _J extends hA{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new n3(e),super(e)}call(e,n){return ce(()=>{this.cell.dropoutMask!=null&&(ft(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ft(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}_J.className="LSTM";Te(_J);class gR extends t3{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return ce(()=>{e=e;let r=e.slice(1);const s=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?s.push(r.splice(0,a.stateSize.length)):s.push(r.splice(0,1));s.reverse();const i=[];let o;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=s[a],a===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=l.call(o,n),i.push(o.slice(1))}r=[];for(const a of i.slice().reverse())r.push(...a);return[o[0]].concat(r)})}build(e){iT(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,s)=>{Nd(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=i=>({className:i.getClassName(),config:i.getConfig()}),s={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,n,r={}){const s=[];for(const i of n.cells)s.push(sc(i,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return oT(e)}setWeights(e){const n=[];for(const r of this.cells){const s=r.weights.length,i=e.splice(s);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],i[o]])}cR(n)}}gR.className="StackedRNNCells";Te(gR);function Ju(t){const{ones:e,rate:n,training:r=!1,count:s=1,dropoutFunc:i}=t,o=()=>i!=null?i(e(),n):SY(e(),n),a=()=>yv(o,e,r);return!s||s<=1?Mr(a().clone()):Array(s).fill(void 0).map(a).map(c=>Mr(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var YFe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class OJ extends hA{constructor(e){if(e.unroll)throw new Ct("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Ct("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Nr({ndim:5})]}call(e,n){return ce(()=>{if(this.cell.dropoutMask!=null&&(ft(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ft(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new ae("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return ce(()=>{const{stateSize:n}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)],o=Sr(i);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){ce(()=>{if(!this.stateful)throw new qa("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)];if(r[0]==null)throw new ae("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Sr(i)):this.states_=[Sr(i)];else if(e==null)ft(this.states_),this.keptStates!=null&&(ft(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Sr(i)):this.states_[0]=Sr(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ae(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):ft(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],c=i;if(!_t(l.shape,c))throw new ae(`State ${a} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>Mr(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:s,padding:i,strides:o,dilationRate:a}=this.cell,l=n==="channelsFirst",c=e[l?3:2],u=e[l?4:3],A=ba(c,s[0],i,o[0],a[0]),d=ba(u,s[1],i,o[1],a[1]);return[...e.slice(0,2),...l?[r,A,d]:[A,d,r]]}}OJ.className="ConvRNN2D";class yR extends n3{constructor(e){const{filters:n,kernelSize:r,strides:s,padding:i,dataFormat:o,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Qr(this.filters,"filters"),this.kernelSize=$h(r,2,"kernelSize"),this.kernelSize.forEach(l=>Qr(l,"kernelSize")),this.strides=$h(s||1,2,"strides"),this.strides.forEach(l=>Qr(l,"strides")),this.padding=i||"valid",ao(this.padding),this.dataFormat=o||"channelsLast",lr(this.dataFormat),this.dilationRate=$h(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>Qr(l,"dilationRate"))}build(e){var n;e=zt(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new ae(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],i=4,o=this.kernelSize.concat([s,this.filters*i]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(n=class extends Ko{apply(d,f){const h=c.apply([u]),p=Bi([u]),m=c.apply([u*2]);return tR([h,p,m])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return ce(()=>{if(e.length!==3)throw new ae(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,s=e[0],i=e[1],o=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ju({ones:()=>ro(s),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(q,Z,te)=>!Z||!Z[te]?q:ne(Z[te],q);let u=c(s,l,0),A=c(s,l,1),d=c(s,l,2),f=c(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ju({ones:()=>ro(i),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const h=this.recurrentDropoutMask;let p=c(i,h,0),m=c(i,h,1),y=c(i,h,2),x=c(i,h,3);const v=3,[b,w,C,B]=$i(this.kernel.read(),a,v),[S,N,k,O]=this.useBias?$i(this.bias.read(),a):[null,null,null,null];u=this.inputConv(u,b,S,this.padding),A=this.inputConv(A,w,N,this.padding),d=this.inputConv(d,C,k,this.padding),f=this.inputConv(f,B,O,this.padding);const[U,P,V,W]=$i(this.recurrentKernel.read(),a,v);p=this.recurrentConv(p,U),m=this.recurrentConv(m,P),y=this.recurrentConv(y,V),x=this.recurrentConv(x,W);const j=this.recurrentActivation.apply(Ee(u,p)),G=this.recurrentActivation.apply(Ee(A,m)),D=Ee(ne(G,o),ne(j,this.activation.apply(Ee(d,y)))),M=ne(this.recurrentActivation.apply(Ee(f,x)),this.activation.apply(D));return[M,M,D]})}getConfig(){const e=super.getConfig(),{units:n}=e,r=YFe(e,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),s)}inputConv(e,n,r,s){const i=Gu(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?_a(i,r,this.dataFormat):i}recurrentConv(e,n){return Gu(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}yR.className="ConvLSTM2DCell";Te(yR);class DJ extends OJ{constructor(e){const n=new yR(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}DJ.className="ConvLSTM2D";Te(DJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class xR extends Tt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return r}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=At(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,i=this.getNoiseShape(r);return yv(()=>SY(r,this.rate,i,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}xR.className="Dropout";Te(xR);class RJ extends xR{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}RJ.className="SpatialDropout1D";Te(RJ);class PJ extends Tt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Qr(this.units,"units"),this.activation=Yu(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=On(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=On(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=kr(e.kernelConstraint),this.biasConstraint=kr(e.biasConstraint),this.kernelRegularizer=Dn(e.kernelRegularizer),this.biasRegularizer=Dn(e.biasRegularizer),this.activityRegularizer=Dn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=zt(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=zt(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=At(e),s=gY(this.activation.getClassName());let i;return s!=null?i=Al(r,this.kernel.read(),s,this.bias?this.bias.read():null):(i=Al(r,this.kernel.read()),this.bias!=null&&(i=_a(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:qu(this.activation),useBias:this.useBias,kernelInitializer:Mn(this.kernelInitializer),biasInitializer:Mn(this.biasInitializer),kernelRegularizer:hn(this.kernelRegularizer),biasRegularizer:hn(this.biasRegularizer),activityRegularizer:hn(this.activityRegularizer),kernelConstraint:Ir(this.kernelConstraint),biasConstraint:Ir(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}PJ.className="Dense";Te(PJ);class UJ extends Tt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=zt(e);for(const n of e.slice(1))if(n==null)throw new ae(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Du(e,1)]}call(e,n){return ce(()=>{this.invokeCallHook(e,n);let r=At(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let i=2;i<r.rank;++i)s.push(i);s.push(1),r=Ut(r,s)}return FTe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}UJ.className="Flatten";Te(UJ);class LJ extends Tt{constructor(e){super(e),this.supportsMasking=!0,this.activation=Yu(e.activation)}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=At(e);return this.activation.apply(r)})}getConfig(){const e={activation:qu(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}LJ.className="Activation";Te(LJ);class jJ extends Tt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return ce(()=>(e=At(e),kTe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}jJ.className="RepeatVector";Te(jJ);class MJ extends Tt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",s=n.slice();let i=1,o=null;for(let l=0;l<s.length;++l){const c=s[l];if(this.isUnknown(c))if(o===null)o=l;else throw new ae("Can only specifiy one unknown dimension.");else i*=c}const a=Du(e);if(o!==null){if(i===0||a%i!==0)throw new ae(r);s[o]=a/i}else if(a!==i)throw new ae(r);return s}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=At(e),s=r.shape,i=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return oe(r,i)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}MJ.className="Reshape";Te(MJ);class QJ extends Tt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Na(1,e.dims.length+1);if(!_t(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Nr({ndim:this.dims.length+1})]}computeOutputShape(e){e=zt(e);const n=e.slice();return this.dims.forEach((r,s)=>{n[s+1]=e[r]}),n}call(e,n){return Ut(At(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}QJ.className="Permute";Te(QJ);class HJ extends Tt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=At(e);return l2(ap(r,this.maskValue),-1)}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=At(e),o=l2(ap(r,this.maskValue),-1,!0);return ne(r,Pe(o,r.dtype))})}}HJ.className="Masking";Te(HJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zJ extends Tt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(en(e.inputLength))}this.inputDim=e.inputDim,Qr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Qr(this.outputDim,"outputDim"),this.embeddingsInitializer=On(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Dn(e.embeddingsRegularizer),this.activityRegularizer=Dn(e.activityRegularizer),this.embeddingsConstraint=kr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return ce(()=>this.maskZero?(e=At(e),ap(e,Lt(e))):null)}computeOutputShape(e){if(e=zt(e),this.inputLength==null)return[...e,this.outputDim];const n=en(this.inputLength);if(n.length!==e.length-1)throw new ae(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<n.length;++s){const i=n[s],o=e[s+1];if(i!=null&&o!=null&&i!==o)throw new ae(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(n[r]=o),r++}}return[e[0],...n,this.outputDim]}call(e,n){return ce(()=>{this.invokeCallHook(e,n);let r=At(e);r.dtype!=="int32"&&(r=ul(r,"int32"));const s=CY(this.embeddings.read(),oe(r,[r.size]));return oe(s,zt(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Mn(this.embeddingsInitializer),embeddingsRegularizer:hn(this.embeddingsRegularizer),activityRegularizer:hn(this.activityRegularizer),embeddingsConstraint:Ir(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}zJ.className="Embedding";Te(zJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class hf extends Tt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Ct}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const i=e[e.length-n.length+s],o=n[s];if(i==null||o==null||i<0||o<0)r.push(null);else if(i===1)r.push(o);else if(o===1)r.push(i);else{if(i!==o)throw new ae("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(i)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[zt(e)]),e=e,e.length<2)throw new ae(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const i of e)i!=null&&i[0]!==null&&n.push(i[0]);if(n=Ou(n),n.length>1)throw new ae(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){const o=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const s=e.map(i=>i.length);e.indexOf(null)===-1&&Ou(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return ce(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(i=>i.rank);if(s.indexOf(null)===-1){const i=Xu(s);for(let o of e){const a=o.rank;for(let l=0;l<i-a;++l)o=mv(o,1);r.push(o)}return this.mergeFunction(r)}else{let i=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,A=u[0],d=u.slice(1).concat([A]);let f=oe(l,[A].concat(Du(u.slice(1))));f=Ut(f,[1,0]),f=oe(f,d),r.push(f),i=!0}else if(c>1){const u=Na(1,c).concat([0]);r.push(Ut(l,u)),i=!0}else r.push(l)}let o=this.mergeFunction(r);const a=o.rank;if(i){if(a==null){const l=o.shape,c=l.length,u=l[c-1],A=[u].concat(l.slice(0,l.length-1));o=oe(Ut(oe(o,[-1,u]),[1,0]),A)}else if(a>1){const l=[a-1].concat(Na(0,a-1));o=Ut(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const i=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=Ou(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return ce(()=>{if(n==null)return null;if(!Array.isArray(n))throw new ae("`mask` should be an Array");if(!Array.isArray(e))throw new ae("`inputs` should be an Array");if(n.length!==e.length)throw new ae(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:wr(s,0));let r=n[0];for(let s=1;s<n.length-1;++s)r=hl(r,n[s]);return r})}}class VJ extends hf{constructor(e){super(e)}mergeFunction(e){return ce(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ee(n,e[r]);return n})}}VJ.className="Add";Te(VJ);class WJ extends hf{constructor(e){super(e)}mergeFunction(e){return ce(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ne(n,e[r]);return n})}}WJ.className="Multiply";Te(WJ);class GJ extends hf{constructor(e){super(e)}mergeFunction(e){return ce(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ee(n,e[r]);return ne(1/e.length,n)})}}GJ.className="Average";Te(GJ);class KJ extends hf{constructor(e){super(e)}mergeFunction(e){return ce(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Ic(n,e[r]);return n})}}KJ.className="Maximum";Te(KJ);class XJ extends hf{constructor(e){super(e)}mergeFunction(e){return ce(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Wd(n,e[r]);return n})}}XJ.className="Minimum";Te(XJ);class qJ extends hf{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new ae("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const r=[];for(let s=0;s<e.length;++s){const i=e[s].slice();i.splice(this.axis,1);let o=!1;for(const a of r)if(_t(a,i)){o=!0;break}o||r.push(i)}if(r.length>1)throw new ae("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return ce(()=>tR(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ae("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const i of n.slice(1)){if(r[s]==null||i[s]==null){r[s]=null;break}r[s]+=i[s]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new ae("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ae("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new ae(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return ce(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const s=[];for(let o=0;o<e.length;++o)n[o]==null?s.push(Pe(ro(e[o]),"bool")):n[o].rank<e[o].rank?s.push(wr(n[o],-1)):s.push(n[o]);const i=qn(s,this.axis);return DO(i,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}qJ.className="Concatenate";Te(qJ);function lg(t,e){for(;t<0;)t+=e;return t}function JFe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Ct("batchDot is not implemented for tensors of 4D or higher rank yet");if(L(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),L(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Ct("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,s=e.shape.length;n==null&&(n=[r-1,s-2]);const i=n;return ce(()=>{let o;if(r>s){o=r-s;const l=[];for(let c=0;c<o;++c)l.push(1);e=oe(e,e.shape.concat(l))}else if(s>r){o=s-r;const l=[];for(let c=0;c<o;++c)l.push(1);t=oe(t,t.shape.concat(l))}else o=0;let a;if(t.shape.length===2&&e.shape.length===2)i[0]===i[1]?a=Je(ne(t,e),i[0]):a=Je(ne(Ut(t,[1,0]),e),i[1]);else{const l=i[0]!==t.shape.length-1,c=i[1]===e.shape.length-1;a=$t(t,e,l,c)}if(o>0){let l;r>s?l=r+s-3:l=r-1;const c=[];for(let u=l;u<l+o;++u)c.push(u);a=Wn(a,c)}return a.shape.length===1&&(a=wr(a,1)),a})}let YJ=class extends hf{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){L(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new Ct("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);if(n[s[0]]!==r[s[1]])throw new ae(`Dimension incompatibility: ${n[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new ae(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((i,o)=>lg(i,e[o].shape.length)):s=[lg(this.axes,n.shape.length),lg(this.axes,r.shape.length)],this.normalize&&(n=y2(n,s[0]),r=y2(r,s[1])),JFe(n,r,s)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[lg(this.axes,e.length),lg(this.axes,n.length)],r}computeOutputShape(e){L(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new Ct("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);n.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const i=n.concat(r);return i.length===1&&i.push(1),i}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}};YJ.className="Dot";Te(YJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class JJ extends Tt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=At(e);return yv(()=>Ee(XB(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}JJ.className="GaussianNoise";Te(JJ);class ZJ extends Tt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return ce(()=>{this.invokeCallHook(e,n);const r=At(e);return this.rate>0&&this.rate<1?yv(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return ne(r,XB(r.shape,1,i))},()=>r,n.training||!1):r})}}ZJ.className="GaussianDropout";Te(ZJ);class eZ extends Tt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||At(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return ce(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return yv(()=>{const i=At(e),a=-1.6732632423543772*1.0507009873554805;let l=AA(Af(r),this.rate);l=ul(l,"float32");const c=((1-this.rate)*(1+this.rate*a**2))**-.5,u=-c*a*this.rate,A=Ee(ne(i,l),ne(Ee(l,-1),a));return Ee(ne(A,c),u)},()=>At(e),n.training||!1)}return e})}}eZ.className="AlphaDropout";Te(eZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function s0(t,e,n,r,s,i=.001){let o;if(t.rank===2)o=AX(t,e,n,r,s,i);else if(t.rank===3)o=dX(t,e,n,r,s,i);else if(t.rank===4)o=fX(t,e,n,r,s,i);else throw new Ct(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function ZFe(t,e,n,r,s=.001){return ce(()=>{const i=FB(t,r),o=i.mean,a=i.variance;return[s0(t,o,a,n,e,s),o,a]})}function e$e(t,e,n,r,s=.001){return ce(()=>{const i=FB(t,r),o=i.mean,a=i.variance,l=[];for(const h of Na(0,t.rank))r.indexOf(h)!==-1?l.push(1):l.push(t.shape[h]);const c=oe(o,l),u=oe(a,l),A=e==null?null:oe(e,l),d=n==null?null:oe(n,l);return[s0(t,c,u,d,A,s),o,a]})}function t$e(t,e,n,r,s=.001){return _t(r.slice().sort(),Na(0,t.rank-1))?ZFe(t,e,n,r,s):e$e(t,e,n,r,s)}class tZ extends Tt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=On(e.betaInitializer||"zeros"),this.gammaInitializer=On(e.gammaInitializer||"ones"),this.movingMeanInitializer=On(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=On(e.movingVarianceInitializer||"ones"),this.betaConstraint=kr(e.betaConstraint),this.gammaConstraint=kr(e.gammaConstraint),this.betaRegularizer=Dn(e.betaRegularizer),this.gammaRegularizer=Dn(e.gammaRegularizer)}build(e){e=zt(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new ae(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Nr({ndim:e.length,axes:{[n]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return ce(()=>{const r=n.training==null?!1:n.training,s=At(e),i=s.shape,o=i.length,a=Na(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const c=Xd(1,o);c[l]=i[l];const u=a.slice();u.sort();const A=!_t(u,Na(0,o).slice(0,o-1)),d=()=>{if(A){const x=oe(this.movingMean.read(),c),v=oe(this.movingVariance.read(),c),b=this.center?oe(this.beta.read(),c):null,w=this.scale?oe(this.gamma.read(),c):null;return s0(s,x,v,b,w,this.epsilon)}else return s0(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return d();const[f,h,p]=t$e(s,this.gamma.read(),this.beta.read(),a,this.epsilon),m=(x,v,b)=>{ce(()=>{const w=1-b,C=x.read(),B=ne(We(C,v),w);x.write(We(C,B))})};return(()=>{m(this.movingMean,h,this.momentum),m(this.movingVariance,p,this.momentum)})(),f})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Mn(this.betaInitializer),gammaInitializer:Mn(this.gammaInitializer),movingMeanInitializer:Mn(this.movingMeanInitializer),movingVarianceInitializer:Mn(this.movingVarianceInitializer),betaRegularizer:hn(this.betaRegularizer),gammaRegularizer:hn(this.gammaRegularizer),betaConstraint:Ir(this.betaConstraint),gammaConstraint:Ir(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}tZ.className="BatchNormalization";Te(tZ);class nZ extends Tt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=On(e.betaInitializer||"zeros"),this.gammaInitializer=On(e.gammaInitializer||"ones"),this.betaRegularizer=Dn(e.betaRegularizer),this.gammaRegularizer=Dn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=zt(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(const i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==Ou(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(i=>e[i]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const r=At(e),s=r.shape,i=s.length;return ce(()=>{let{mean:a,variance:l}=FB(r,this.axis,!0);const c=Xd(1,i);for(const p of this.axis)c[p]=s[p];const u=p=>p!=null&&p.shape.length!==i?oe(p,c):p;let A=this.scale?u(this.gamma.read()):null,d=this.center?u(this.beta.read()):null;const f=[],h=[];for(let p=0;p<i;++p)this.axis.indexOf(p)!==-1?(f.push(s[p]),h.push(1)):(f.push(1),h.push(s[p]));return a=Fo(a,f),l=Fo(l,f),A!=null&&(A=Fo(A,h)),d!=null&&(d=Fo(d,h)),s0(r,a,l,d,A,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Mn(this.betaInitializer),gammaInitializer:Mn(this.gammaInitializer),betaRegularizer:hn(this.betaRegularizer),gammaRegularizer:hn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}nZ.className="LayerNormalization";Te(nZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function n$e(t,e,n){return ce(()=>{if(t.rank!==4)throw new ae(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new ae("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Ea()),n!=="channelsLast"&&n!=="channelsFirst")throw new ae(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],dA(t,r)})}class rZ extends Tt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Ea():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new ae(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new ae(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new ae(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Nr({ndim:4})]}computeOutputShape(e){e=zt(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return ce(()=>n$e(At(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}rZ.className="ZeroPadding2D";Te(rZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function r3(t,e,n,r,s,i){return ce(()=>{lr(s),xY(i),ao(r),n==null&&(n=[1,1]),r==null&&(r="valid"),s==null&&(s=Ea()),i==null&&(i="max"),t=hR(t,s);let o;const a=r==="same"?"same":"valid";return i==="max"?o=TB(t,e,n,a):o=wB(t,e,n,a),s==="channelsFirst"&&(o=Ut(o,[0,3,1,2])),o})}function sZ(t,e,n,r,s,i){return ce(()=>{lr(s),xY(i),ao(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),s==null&&(s=Ea()),i==null&&(i="max"),t=bJ(t,s);let o;const a=r==="same"?"same":"valid";return i==="max"?o=PX(t,e,n,a):o=uX(t,e,n,a),s==="channelsFirst"&&(o=Ut(o,[0,4,1,2,3])),o})}class iZ extends Tt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new ae(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Qr(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new ae(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Qr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,ao(this.padding),this.inputSpec=[new Nr({ndim:3})]}computeOutputShape(e){e=zt(e);const n=ba(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return ce(()=>{this.invokeCallHook(e,n),e=mv(At(e),2);const r=this.poolingFunction(At(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Wn(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class oZ extends iZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return lr(i),ao(s),r3(e,n,r,s,i,"max")}}oZ.className="MaxPooling1D";Te(oZ);class aZ extends iZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return lr(i),ao(s),r3(e,n,r,s,i,"avg")}}aZ.className="AveragePooling1D";Te(aZ);class lZ extends Tt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new ae(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Qr(this.poolSize,"poolSize"),Qr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,lr(this.dataFormat),ao(this.padding),this.inputSpec=[new Nr({ndim:4})]}computeOutputShape(e){e=zt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=ba(n,this.poolSize[0],this.padding,this.strides[0]),r=ba(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return ce(()=>(this.invokeCallHook(e,n),this.poolingFunction(At(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class cZ extends lZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return lr(i),ao(s),r3(e,n,r,s,i,"max")}}cZ.className="MaxPooling2D";Te(cZ);class uZ extends lZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return lr(i),ao(s),r3(e,n,r,s,i,"avg")}}uZ.className="AveragePooling2D";Te(uZ);class AZ extends Tt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new ae(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Qr(this.poolSize,"poolSize"),Qr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,lr(this.dataFormat),ao(this.padding),this.inputSpec=[new Nr({ndim:5})]}computeOutputShape(e){e=zt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=ba(n,this.poolSize[0],this.padding,this.strides[0]),r=ba(r,this.poolSize[1],this.padding,this.strides[1]),s=ba(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,s]:[e[0],n,r,s,e[4]]}call(e,n){return ce(()=>(this.invokeCallHook(e,n),this.poolingFunction(At(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class dZ extends AZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return lr(i),ao(s),sZ(e,n,r,s,i,"max")}}dZ.className="MaxPooling3D";Te(dZ);class fZ extends AZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return lr(i),ao(s),sZ(e,n,r,s,i,"avg")}}fZ.className="AveragePooling3D";Te(fZ);class hZ extends Tt{constructor(e){super(e),this.inputSpec=[new Nr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Ct}}class pZ extends hZ{constructor(e){super(e||{})}call(e,n){return ce(()=>{const r=At(e);return Kn(r,1)})}}pZ.className="GlobalAveragePooling1D";Te(pZ);class mZ extends hZ{constructor(e){super(e||{})}call(e,n){return ce(()=>{const r=At(e);return Po(r,1)})}}mZ.className="GlobalMaxPooling1D";Te(mZ);class gZ extends Tt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,lr(this.dataFormat),this.inputSpec=[new Nr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Ct}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class yZ extends gZ{call(e,n){return ce(()=>{const r=At(e);return this.dataFormat==="channelsLast"?Kn(r,[1,2]):Kn(r,[2,3])})}}yZ.className="GlobalAveragePooling2D";Te(yZ);class xZ extends gZ{call(e,n){return ce(()=>{const r=At(e);return this.dataFormat==="channelsLast"?Po(r,[1,2]):Po(r,[2,3])})}}xZ.className="GlobalMaxPooling2D";Te(xZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class vZ extends Tt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const s=n.layer,i=sc(s,r);delete n.layer;const o={layer:i};return Object.assign(o,n),new e(o)}}class bZ extends vZ{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=zt(e),e.length<3)throw new ae(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=zt(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,n){return ce(()=>(e=At(e),TJ((o,a)=>[At(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}bZ.className="TimeDistributed";Te(bZ);function r$e(t){ff(STe,"BidirectionalMergeMode",t)}const s$e="concat";class wZ extends vZ{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=sc(r),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=sc(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?s$e:e.mergeMode,r$e(this.mergeMode),e.weights)throw new Ct("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,s,i;return this.returnState&&(i=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(i).concat(i.slice()):[r].concat(i).concat(i.slice()):Zs(s)}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=kJ(e,r,s,this.numConstants);if(e=i.inputs,r=i.initialState,s=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,n);const o=[],a=[];if(r!=null){const c=r.length;if(c%2>0)throw new ae("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const u=r.map(A=>new Nr({shape:A.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),a.push(...u)}if(s!=null)throw new Ct("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof pl;for(const c of o)if(c instanceof pl!==l)throw new ae("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(o),u=this.inputSpec.concat(a),A=this.inputSpec;this.inputSpec=u;const d=super.apply(c,n);return this.inputSpec=A,d}else return super.apply(e,n)}call(e,n){return ce(()=>{const r=n.initialState;let s,i;if(r==null)s=this.forwardLayer.call(e,n),i=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),i=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let o;this.returnState&&(Array.isArray(s)&&(o=s.slice(1).concat(i.slice(1))),s=s[0],i=i[0]),this.returnSequences&&(i=Qo(i,1));let a;return this.mergeMode==="concat"?a=tR([s,i]):this.mergeMode==="sum"?a=Ee(s,i):this.mergeMode==="ave"?a=ne(.5,Ee(s,i)):this.mergeMode==="mul"?a=ne(s,i):this.mergeMode==null&&(a=[s,i]),this.returnState?this.mergeMode==null?a.concat(o):[a].concat(o):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Nd(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Nd(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const i=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(i).concat(i):[r].concat(i).concat(i)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=sc(n.layer);if(delete n.layer,n.numConstants!=null)throw new Ct("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=r,new e(s)}}wZ.className="Bidirectional";Te(wZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class CZ extends Tt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return ce(()=>(e=At(e),e.dtype!=="float32"&&(e=ul(e,"float32")),Ee(ne(e,this.scale),this.offset)))}}CZ.className="Rescaling";Te(CZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:i$e,cropAndResize:o$e}=ti;class SZ extends Tt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,s,i,o,a,l){return ce(()=>{let c,u=!1;const A=n/o,d=r/a,f=(s+n)/o,h=(i+r)/a,p=[A,d,f,h],m=[];e.rank===3?(u=!0,c=Oi([e])):c=e;for(let w=0;w<c.shape[0];w++)m.push(p);const y=ya(m,[m.length,4]),x=lp(0,m.length,1,"int32"),b=o$e(c,y,x,[s,i],"nearest");return ul(u?At(Ho(b)):b,l)})}upsize(e,n,r,s){return ce(()=>{const i=i$e(e,[n,r]);return ul(i,s)})}call(e,n){return ce(()=>{const r=At(e),s=r.dtype,i=r.shape,o=i[i.length-3],a=i[i.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let c=0;return a!==this.width&&(c=Math.floor((a-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,o,a,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=zt(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}SZ.className="CenterCrop";Te(SZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a$e(t,e,n,r){let s=At(t);if(s.dtype!=="int32"&&(s=ul(s,"int32")),e==="int")return s;const i=s.shape;if(s.rank===0&&(s=wr(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=wr(s,-1)),s.rank>2)throw new ae(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${i} which would result in output rank ${s.rank}.`);const o=["multiHot","oneHot"].includes(e),a=s;let l;if(typeof r<"u"&&e==="count"?l=Lk(a,r,n,o):l=Lk(a,[],n,o),e!=="tfIdf")return l;if(r)return ne(l,r);throw new ae("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class BZ extends Tt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=zt(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return ce(()=>{e=At(e),e.dtype!=="int32"&&(e=ul(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new ae(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=At(n.countWeights)}const s=Po(e),i=qy(e),o=Li(this.numTokens,s).bufferSync().get(0),a=AA(i,0).bufferSync().get(0);if(!(o&&a))throw new ae(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return a$e(e,this.outputMode,this.numTokens,r)})}}BZ.className="CategoryEncoding";Te(BZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const l$e=["bilinear","nearest"],g5=new Set(l$e);class NZ extends Tt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(g5.has(e.interpolation))this.interpolation=e.interpolation;else throw new ae(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=zt(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return ce(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return ti.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return ti.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...g5]} are supported`)})}}NZ.className="Resizing";Te(NZ);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class EZ{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}EZ.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class IZ extends Tt{constructor(e){super(e),this.randomGenerator=new EZ(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}IZ.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const c$e=["bilinear","nearest"],y5=new Set(c$e);class kZ extends IZ{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new ae(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new ae(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ae(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(y5.has(r))this.interpolation=r;else throw new ae(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=zt(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return ce(()=>{const r=At(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=Af([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*s;i=Math.round(i);const o=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return ti.resizeBilinear(e,o);case"nearest":return ti.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...y5]} are supported`)}})}}kZ.className="RandomWidth";Te(kZ);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var x5;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(x5||(x5={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ze(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&L(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u$e=mD;class s3 extends w_{nextDataId(){return s3.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new AK(this,Wa())}write(e,n,r){this.firstUse&&(this.firstUse=!1,fe().get("IS_NODE")&&qi(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&lx(r[0])){const i=r.map(o=>$u(o));s=this.write(i,e,n)}else s=this.write(r,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,s,i){this.data.set(e,{values:n,dtype:s,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const s=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return pc(s,i)}return I1e(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>Hu(s));return St(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return St(e.shape,e.dtype,n)}makeOutput(e,n,r){return Wa().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Ys();return e(),{kernelMs:Ys()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Ze([e],"where");const n=this.readSync(e.dataId);return u$e(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}s3.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TZ(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const A$e=t=>{const{x:e}=t.inputs,n=t.backend;Ze(e,"abs");let r=new Float32Array(ge(e.shape));const s=n.data.get(e.dataId).values;return r=TZ(s),n.makeOutput(r,e.shape,e.dtype)},d$e={kernelName:yS,backendName:"cpu",kernelFunc:A$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cr(t){return(e,n,r,s,i)=>{const o=vt(e,n),a=o.length,l=ot(o),c=ge(o),u=ns(i,c),A=e.length,d=n.length,f=ot(e),h=ot(n),p=op(e,o),m=op(n,o);if(p.length+m.length===0)for(let y=0;y<u.length;++y)u[y]=t(r[y%r.length],s[y%s.length]);else for(let y=0;y<u.length;++y){const x=Zp(y,a,l),v=x.slice(-A);p.forEach(B=>v[B]=0);const b=ll(v,A,f),w=x.slice(-d);m.forEach(B=>w[B]=0);const C=ll(w,d,h);u[y]=t(r[b],s[C])}return[u,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vi(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(s.shape,"float32",o)},a}const f$e={kernelName:$_,backendName:"cpu",kernelFunc:vi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2(t,e,n="float32"){if(n==="complex64"){const s=C2(t,e,"float32"),i=C2(t,e,"float32");return vi({inputs:{real:s,imag:i},backend:t})}const r=vs(ge(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ml(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const h$e={kernelName:kx,backendName:"cpu",kernelFunc:ml};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qd(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const p$e={kernelName:uO,backendName:"cpu",kernelFunc:qd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FZ(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=lf([0],n),[i,o]=cr((a,l)=>a!==l?1:0)(e,[],t,s,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Zu(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return ml({inputs:{x:s},backend:n});const u=C2(n,s.shape,s.dtype),A=Zu({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),d=vi({inputs:{real:A,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(A),d}if(s.dtype==="complex64"){const u=qd({inputs:{input:s},backend:n}),A=Zu({inputs:{x:u},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(u),A}if(!fK(s.dtype,i)){const u=ml({inputs:{x:s},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:i}}const o=n.data.get(s.dataId).values,[a,l,c]=FZ(o,s.shape,s.dtype,i);return n.makeTensorInfo(a,l,c)}const m$e={kernelName:mx,backendName:"cpu",kernelFunc:Zu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $r(t,e,n,r){return n==null?({inputs:s,backend:i})=>{const{a:o,b:a}=s,l=i;Ze([o,a],t);const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,A=o.dtype==="string"?mc(c):c,d=o.dtype==="string"?mc(u):u,f=r||o.dtype,[h,p]=e(o.shape,a.shape,A,d,f);return l.makeTensorInfo(p,f,h)}:({inputs:s,backend:i})=>{const{a:o,b:a}=s,l=i;if(o.dtype==="complex64"||a.dtype==="complex64"){const c=Zu({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),A=u.complexTensorInfos.real,d=u.complexTensorInfos.imag,f=l.data.get(A.dataId).values,h=l.data.get(d.dataId).values,p=Zu({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),m=l.data.get(p.dataId),y=m.complexTensorInfos.real,x=m.complexTensorInfos.imag,v=l.data.get(y.dataId).values,b=l.data.get(x.dataId).values,[w,C,B]=n(o.shape,a.shape,f,h,v,b),S=l.makeTensorInfo(B,"float32",w),N=l.makeTensorInfo(B,"float32",C),k=vi({inputs:{real:S,imag:N},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(p),l.disposeIntermediateTensorInfo(S),l.disposeIntermediateTensorInfo(N),k}else{const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,A=r||o.dtype,[d,f]=e(o.shape,a.shape,c,u,A);return l.makeTensorInfo(f,A,d)}}}function vR(t){return(e,n,r,s,i,o)=>{const a=vt(e,n),l=ge(a),c=a.length,u=ot(a),A=ns("float32",l),d=ns("float32",l),f=op(e,a),h=op(n,a),p=pc(r,s),m=pc(i,o),y=e.length,x=ot(e),v=n.length,b=ot(n);if(f.length+h.length===0)for(let w=0;w<A.length;w++){const C=w%p.length,B=w%m.length,S=t(p[C*2],p[C*2+1],m[B*2],m[B*2+1]);A[w]=S.real,d[w]=S.imag}else for(let w=0;w<A.length;w++){const C=Zp(w,c,u),B=C.slice(-y);f.forEach(U=>B[U]=0);const S=ll(B,y,x),N=C.slice(-v);h.forEach(U=>N[U]=0);const k=ll(N,v,b),O=t(p[S*2],p[S*2+1],m[k*2],m[k*2+1]);A[w]=O.real,d[w]=O.imag}return[A,d,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Z=cr((t,e)=>t+e),g$e=vR((t,e,n,r)=>({real:t+n,imag:e+r})),up=$r(em,$Z,g$e),y$e={kernelName:em,backendName:"cpu",kernelFunc:up};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bR(t,e,n,r,s){const i=ge(r),o=vs(s,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(i>0?o[l]+=e[a]:o[l]+=1)}return o}function _Z(t,e,n,r=!1){const s=t.shape[0],i=t.shape[1],o=St([s,n],e.dtype);for(let a=0;a<s;a++)for(let l=0;l<i;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,a,c):e.size>0?o.set(o.get(a,c)+e.get(a,l),a,c):o.set(o.get(a,c)+1,a,c))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OZ=cr((t,e)=>t&e),x$e=$r(NS,OZ),v$e={kernelName:NS,backendName:"cpu",kernelFunc:x$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bl(t){return(e,n,r)=>{const s=sr(n,e.length);for(let i=0;i<e.length;++i)s[i]=t(e[i],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nn(t,e,n){const r=bl(e);return pA(t,r,n)}function pA(t,e,n){return({inputs:r,attrs:s,backend:i})=>{const{x:o}=r;Ze(o,t);const a=i,l=a.data.get(o.dataId).values;let c;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=mc(l)}else c=l;const u=n||o.dtype,A=e(c,u,s);return a.makeTensorInfo(o.shape,u,A)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DZ=bl(t=>Math.ceil(t)),b$e=pA(gx,DZ),w$e={kernelName:gx,backendName:"cpu",kernelFunc:b$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RZ(t,e,n,r){const s=sr(n,ge(e));if(r&&n!=="string"){let i=0;t.forEach(o=>{const a=ge(o.shape);s.set(o.vals,i),i+=a})}else{let i=0;t.forEach(o=>{const a=n==="string"?mc(o.vals):o.vals;let l=0;for(let c=0;c<o.shape[0];++c){const u=c*e[1]+i;for(let A=0;A<o.shape[1];++A)s[u+A]=a[l++]}i+=o.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PZ=cr((t,e)=>t===e?1:0),UZ=$r(DS,PZ,null,"bool"),C$e={kernelName:DS,backendName:"cpu",kernelFunc:UZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LZ=bl(t=>Math.exp(t)),jZ=pA(Sx,LZ,"float32"),S$e={kernelName:Sx,backendName:"cpu",kernelFunc:jZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MZ=bl(t=>Math.expm1(t)),B$e=pA(Bx,MZ),N$e={kernelName:Bx,backendName:"cpu",kernelFunc:B$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QZ=bl(t=>Math.floor(t)),E$e=pA(Nx,QZ),I$e={kernelName:Nx,backendName:"cpu",kernelFunc:E$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HZ=cr((t,e)=>Math.floor(t/e)),k$e=$r(Ex,HZ,null,"int32"),T$e={kernelName:Ex,backendName:"cpu",kernelFunc:k$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zZ(t,e,n,r,s,i,o,a,l){const c=St([r,i],n);for(let u=0;u<r;u++){const A=[];let d=0;for(let f=0;f<s;f++){const h=t[u*s+f];d+=h*o[f],A.push(h)}if(d<0||d>=l/i)throw new Error(`Invalid indices: ${A} does not index into ${a}`);for(let f=0;f<i;f++)c.values[u*i+f]=e.get(...e.indexToLoc(d*i+f))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VZ(t,e,n){const r=St(n,t.dtype);for(let s=0;s<r.size;++s){const o=r.indexToLoc(s).slice(),a=o[0],l=o[2],c=e.locToIndex([a,l]);o[2]=e.values[c];const u=t.locToIndex(o);0<=u&&u<t.values.length&&(r.values[s]=t.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WZ=cr((t,e)=>t>e?1:0),F$e=$r(LS,WZ,null,"bool"),$$e={kernelName:LS,backendName:"cpu",kernelFunc:F$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GZ=cr((t,e)=>t>=e?1:0),_$e=$r(Ix,GZ,null,"bool"),O$e={kernelName:Ix,backendName:"cpu",kernelFunc:_$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KZ=cr((t,e)=>t<e?1:0),D$e=$r(MS,KZ,null,"bool"),R$e={kernelName:MS,backendName:"cpu",kernelFunc:D$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XZ=cr((t,e)=>t<=e?1:0),P$e=$r(QS,XZ,null,"bool"),U$e={kernelName:QS,backendName:"cpu",kernelFunc:P$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qZ(t,e,n){const r=(e-t)/(n-1),s=vs(n,"float32");s[0]=t;for(let i=1;i<s.length;i++)s[i]=s[i-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YZ=bl(t=>Math.log(t)),L$e=pA(_x,YZ),j$e={kernelName:_x,backendName:"cpu",kernelFunc:L$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JZ(t,e,n,r){const s=ns(r,ge(n));for(let i=0;i<s.length;++i){const o=i*e;let a=t[o];for(let l=0;l<e;++l){const c=t[o+l];(Number.isNaN(c)||c>a)&&(a=c)}s[i]=a}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZZ=cr((t,e)=>Math.max(t,e)),M$e=$r(Dx,ZZ),Q$e={kernelName:Dx,backendName:"cpu",kernelFunc:M$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eee=cr((t,e)=>Math.min(t,e)),H$e=$r(Rx,eee),z$e={kernelName:Rx,backendName:"cpu",kernelFunc:H$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wR=cr((t,e)=>t*e),V$e=vR((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),i3=$r(Ux,wR,V$e),W$e={kernelName:Ux,backendName:"cpu",kernelFunc:i3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tee(t,e,n){const r=oA(-1,n);return wR([],e,r,t,n)}function G$e(t){const{inputs:e,backend:n}=t,{x:r}=e;Ze(r,"neg");const s=n.data.get(r.dataId).values,[i,o]=tee(s,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}const K$e={kernelName:ZS,backendName:"cpu",kernelFunc:G$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nee=cr((t,e)=>t!==e?1:0),X$e=$r(eB,nee,null,"bool"),q$e={kernelName:eB,backendName:"cpu",kernelFunc:X$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CR(t,e,n,r,s){const i=e.length,o=ge(e),a=ot(e),l=ot(s),c=ns(n,ge(s));for(let u=0;u<o;++u){const A=Zp(u,i,a),d=new Array(A.length);for(let h=0;h<d.length;h++)d[h]=A[r[h]];const f=ll(d,i,l);c[f]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oi(t){const{inputs:e,attrs:n,backend:r}=t,{x:s}=e,{perm:i}=n;Ze(s,"transpose");const o=s.shape.length,a=new Array(o);for(let A=0;A<a.length;A++)a[A]=s.shape[i[A]];const l=r.data.get(s.dataId).values,c=CR(l,s.shape,s.dtype,i,a);return{dataId:r.write(c,a,s.dtype),shape:a,dtype:s.dtype}}const Y$e={kernelName:Eh,backendName:"cpu",kernelFunc:oi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ree(t,e,n,r){const[s,i]=Vr(t,r),o=_i(e,"int32"),a=vs(ge(s),o),l=ge(i);for(let c=0;c<a.length;++c){const u=c*l;let A=1;for(let d=0;d<l;++d)A*=n[u+d];a[c]=A}return{outVals:a,outShape:s,outDtype:o}}function J$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ze(s,"prod");const a=s.shape.length,l=kt(i,s.shape),c=Hn(l,a);let u=l,A=s;const d=[];c!=null&&(A=oi({inputs:{x:s},backend:n,attrs:{perm:c}}),d.push(A),u=ar(u.length,a));const f=n.data.get(A.dataId).values,{outVals:h,outShape:p,outDtype:m}=ree(A.shape,A.dtype,f,u);let y=p;return o&&(y=or(p,l)),d.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(y,m,h)}const Z$e={kernelName:oB,backendName:"cpu",kernelFunc:J$e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e_e(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const i=Zp(s,e.length,ot(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function t_e(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function n_e(t,e,n,r){const s=[];let i=0;const o=e.length-1+n.length,a=new Array(o).fill(null).map(()=>[0]);t_e(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let A=1;A<l+1;++A)a[c].push(A*u)}for(let c=0;c<t.length;++c){let u=t[c],A=t[c]+1;for(let d=0;d<n.length;++d){const f=n[d],h=d+e.length-1;if(h>=0){const p=a[h],m=p[p.length-1]-f[u];for(let y=u;y<A;++y)a[h].push(f[y+1]+m)}u=f[u],A=f[A]}A!==u&&(s.push([u,A]),i+=A-u)}return{outSplits:a,valueSlices:s,numValues:i}}function r_e(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=sr("int32",r);e.push(s),t[n].forEach((i,o)=>s[o]=i)}return e}function v5(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function s_e(t,e,n,r,s,i){const o=v5(e,2)[1],a=v5(i,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let A=0;A<r;++A)s[l*a+A]=t[u*o+A];++l}}function i_e(t,e,n,r,s){const i=e.slice();i[0]=s;const o=sr(n,ge(i)),a=t.length,l=a===0?0:a/e[0];return s_e(t,e,r,l,o,i),[o,i]}function see(t,e,n,r,s,i,o,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(e_e(i,o,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:A,numValues:d}=n_e(i,o,t,c),f=r_e(u),h=i_e(n,r,s,A,d);return[f,h[0],h[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b5=2147483647;function iee(t,e,n,r,s,i,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=s.length===0,c=o.length===0,u=[];a||u.push(e[0]),l||u.push(s[0]),c||u.push(o[0]);for(let m=1;m<u.length;++m)if(u[m]!==u[m-1])throw new Error("starts, limits, and deltas must have the same shape");const A=u.length===0?1:u[0],d=sr("int32",A+1);d[0]=0;for(let m=0;m<A;++m){const y=a?t[0]:t[m],x=l?r[0]:r[m],v=c?i[0]:i[m];if(v===0)throw new Error("Requires delta != 0");let b;if(v>0&&x<y||v<0&&x>y)b=0;else if(b=Math.ceil(Math.abs((x-y)/v)),b>b5)throw new Error(`Requires ((limit - start) / delta) <= ${b5}`);d[m+1]=d[m]+b}const f=d[A],h=sr(n,f);let p=0;for(let m=0;m<A;++m){const y=d[m+1]-d[m];let x=a?t[0]:t[m];const v=c?i[0]:i[m];for(let b=0;b<y;++b)h[p++]=x,x+=v}return[d,h]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ao=Aa;class S2{constructor(e,n,r,s,i,o,a,l,c,u){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=_q(u),this.raggedRank=Oq(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Ao.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Ao.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Ao.VALUE_ROWIDS:return S2.getMaxWidthValueRowID(n);case Ao.ROW_SPLITS:return S2.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Ao[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const i=e[s+1]-e[s];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],i=0;for(let o=1;o<n;++o){const a=e[o];a!==s&&(s=a,i=Math.max(o-r,i),r=o)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return C5(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;Dq(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=$q(this.raggedRank,s,n);o[0]<0&&(o[0]=e);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),i=[];let o=0;for(let a=0;a<s;++a,o+=n)i.push(o);for(let a=s;a<e;++a)i.push(-1);return L(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,s){const i=e.length,o=[];for(let a=0;a<i-1;++a){const l=e[a+1]-e[a];let c=Math.min(s,l),u=n[a];u===-1&&(c=0);for(let A=0;A<c;++A)o.push(u),u+=r;for(let A=0;A<l-c;++A)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,s){const i=e.length,o=[];if(i===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];o.push(c);for(let u=1;u<i;++u){const A=e[u];if(A===l)c>=0&&(++a,a<s?c+=r:c=-1);else{if(a=0,l=A,A>=n.length)throw new Error(`Got nextValueRowId=${A} which is not less than ${n.length}`);c=n[A]}o.push(c)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,s){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case Ao.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,s);case Ao.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,s);default:throw new Error(`Unsupported partition type: ${Ao[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Ao.FIRST_DIM_SIZE:return e[0];case Ao.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Ao.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Ao[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const i=C5(r,!1),o=sr(this.valuesDType,ge(i));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],r[c]);this.setOutput(this.raggedRank,l,o,i)}return[i,o]}setOutput(e,n,r,s){if(r.length===0)return;const i=this.values,o=r;let a=s.slice();a=a.slice(e+1);const l=ge(a),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const h=this.defaultValueShape;ce(()=>{const p=oe(u,h);u=Th(p,a).dataSync()})}let A=0,d=0,f=0;for(let h=0;h<=c;++h){let p=h<c?n[h]:-1;if(p===f){++f;continue}if(d<f){const m=i.subarray(A*l),y=o.subarray(d*l),x=(f-d)*l;w5(y,m,x)}if(h>=c){const m=r.length;p=Math.floor(m/l)}if(p>f)if(this.defaultValue.length===1)o.subarray(f*l,p*l).fill(this.defaultValue[0]),f=p;else for(;p>f;){const m=o.slice(f*l);w5(m,u,l),++f}p<0?(A=h+1,d=f):(A=h,d=f,f=d+1)}}}function w5(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function C5(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function oee(t,e,n,r,s,i,o,a,l,c){return new S2(t,e,n,r,s,i,o,a,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aee(t,e,n,r){const s=t===e,i=t<e&&n<0,o=e<t&&n>1;if(s||i||o)return vs(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=vs(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lee=bl(t=>1/Math.sqrt(t)),o_e=pA(zx,lee),a_e={kernelName:zx,backendName:"cpu",kernelFunc:o_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function id(t,e,n,r,s,i,o,a,l,c){const u=[r/s,s],A=t.values,d=e.values;if(r===0)return St(n,e.dtype);const f=l instanceof Er?l:St(u,e.dtype);typeof l=="string"||typeof l=="number"?f.values.fill(l):typeof l=="boolean"&&f.values.fill(+l);for(let h=0;h<i;h++){const p=[];let m=0;for(let y=0;y<o;y++){const x=A[h*o+y];p.push(x),m+=x*a[y]}if(m<0||m>=r/s)throw new Error(`Invalid indices: ${p} does not index into ${n}`);for(let y=0;y<s;y++)c?f.values[m*s+y]+=d[h*s+y]:f.values[m*s+y]=e.rank===0?d[0]:d[h*s+y]}return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l_e=bl(t=>1/(1+Math.exp(-t))),cee=nn(Xx,t=>1/(1+Math.exp(-t))),c_e={kernelName:Xx,backendName:"cpu",kernelFunc:cee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uee(t,e,n,r,s){const i=kD(r,e,n),o=ge(n),a=ot(r);if(i){const A=TD(e,a);return s==="string"?t.slice(A,A+o):t.subarray(A,A+o)}const l=s==="string"?mc(t):t,c=St(r,s,l),u=St(n,s);for(let A=0;A<u.size;++A){const d=u.indexToLoc(A),f=d.map((h,p)=>h+e[p]);u.set(c.get(...f),...d)}return s==="string"?tY(u.values):u.values}function Yd(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r;Ze(s,"slice");const[a,l]=zB(s,i,o);ED(s,a,l);const c=n.data.get(s.dataId).values,u=uee(c,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,u)}const u_e={kernelName:dB,backendName:"cpu",kernelFunc:Yd};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aee(t,e,n,r,s,i,o){const a=e[0],l=i[0],c=new Array(l),u=new Array(a),A=e[1];if(l===0){if(a!==0)throw new Error(Qq(a));const m=sr(n,0),y=sr(s,0);return[m,[0,A],y,c,u]}let d=!0,f=0;const h=new Array(l).fill(0);for(let m=0;m<a;++m){const y=t[m*A];if(y<0)throw new Error(Hq(m,y));if(y>=l)throw new Error(zq(m,y,l));++h[y],d=d&&y>=f,f=y}let p=!0;for(let m=0;m<l;++m){const y=h[m]===0;c[m]=y,p=p&&!y,h[m]=Math.max(h[m],1),m>0&&(h[m]+=h[m-1])}if(p&&d){const m=t,y=r;for(let x=0;x<a;++x)u[x]=x;return[m,[a,A],y,c,u]}else{const m=h[l-1],y=sr(n,m*A),x=sr(s,m),v=new Array(l).fill(0);for(let b=0;b<a;++b){const w=t[b*A],C=v[w],B=(w===0?0:h[w-1])+C;v[w]++;for(let S=0;S<A;++S)y[B*A+S]=t[b*A+S];x[B]=r[b],u[b]=B}for(let b=0;b<l;++b)if(v[b]===0){const C=b===0?0:h[b-1];y[C*A+0]=b;for(let B=1;B<A;++B)y[C*A+B]=0;x[C]=o}return[y,[m,A],x,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dee(t,e,n,r,s){const i=ge(r),o=e[0],a=s.length,l=[];let c=1,u=-1;for(let m=0;m<a;++m){const y=s[m];if(y===-1){if(u!==-1)throw new Error(Vq(u,m));u=m,l.push(1)}else{if(y<0)throw new Error(Wq(m,y));c*=y,l.push(y)}}if(u!==-1){if(c<=0)throw new Error(Gq());const m=Math.trunc(i/c);if(c*m!==i)throw new Error(Kq(r,l));l[u]=m}if(ge(l)!==i)throw new Error(Xq(r,l));const d=r.length,f=[];if(d>0){f[d-1]=1;for(let m=d-2;m>=0;--m)f[m]=f[m+1]*r[m+1]}const h=[];if(a>0){h[a-1]=1;for(let m=a-2;m>=0;--m)h[m]=h[m+1]*l[m+1]}const p=sr(n,o*a);for(let m=0;m<o;++m){let y=0;for(let x=0;x<d;++x)y+=t[m*d+x]*f[x];for(let x=0;x<a;++x)p[m*a+x]=Math.trunc(y/h[x]),y%=h[x]}return[p,[o,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SR(t,e,n,r,s,i=!1,o=0){const a=r.length,l=[e[0],t.length/e[0]],c=l[1],A=a>0?s[a-1]+1:0;if(A<0)throw new Error(Hk());const d=e.slice();d[0]=A;const f=d.reduce((v,b)=>v*b,1),h=sr(n,f);if(a===0)return A>0&&h.fill(o),[h,d];if(A<=0)throw new Error(Hk());let p=0,m=1,y=0,x=s[p];for(;;){let v=0;if(m<a){if(v=s[m],x===v){++m;continue}if(x>=v)throw new Error(qq())}if(x<0||x>=A)throw new Error(Yq(x,A));x>y&&h.fill(o,y*c,x*c);for(let b=p;b<m;++b){const w=r[b];if(w<0||w>=l[0])throw new Error(Jq(b,r[b],l[0]));for(let C=0;C<c;C++)h[x*c+C]+=t[w*c+C]}if(i)for(let b=0;b<c;b++)h[x*c+b]/=m-p;if(p=m,++m,y=x+1,x=v,m>a)break}return y<A&&h.fill(o,y*c,A*c),[h,d]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A_e=bl(t=>Math.sqrt(t)),d_e=nn(Yx,t=>Math.sqrt(t)),f_e={kernelName:Yx,backendName:"cpu",kernelFunc:d_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fee=cr((t,e)=>{const n=t-e;return n*n}),h_e=$r(Jx,fee),p_e={kernelName:Jx,backendName:"cpu",kernelFunc:h_e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hee=bl((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)}),m_e=pA(gB,hee),g_e={kernelName:gB,backendName:"cpu",kernelFunc:m_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pee(t,e,n,r){const s=St(t,e.dtype);for(let i=0;i<s.size;i++){const o=s.indexToLoc(i),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*n[l]+r[l];s.set(e.get(...a),...o)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y_e{constructor(e,n,r,s,i,o){this.separator=$u(e),this.nGramWidths=n,this.leftPad=$u(r),this.rightPad=$u(s),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,i,o){for(let a=0;a<i;++a){const l=this.getPadWidth(o),c=Math.max(0,l-a),u=Math.max(0,l-(i-(a+1))),A=o-(c+u),d=n+(c>0?0:a-l);let f=0;f+=c*this.leftPad.length;for(let x=0;x<A;++x)f+=e[d+x].length;f+=u*this.rightPad.length;const h=c+u+A-1;f+=h*this.separator.length,r[s+a]=new Uint8Array(f);const p=r[s+a];let m=0;const y=x=>x.forEach(v=>p[m++]=v);for(let x=0;x<c;++x)y(this.leftPad),y(this.separator);for(let x=0;x<A-1;++x)y(e[d+x]),y(this.separator);if(A>0){y(e[d+A-1]);for(let x=0;x<u;++x)y(this.separator),y(this.rightPad)}else{for(let x=0;x<u-1;++x)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<s;++c){let u=n[c]>=l;if(u=u&&n[c]<=r,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=s-1,o=sr("int32",s);if(r===0||s===0){const l=new Array(r);for(let c=0;c<=i;++c)o[c]=0;return[l,o]}o[0]=0;for(let l=1;l<=i;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(A=>{u+=this.getNumNGrams(c,A)}),this.preserveShort&&c>0&&u===0&&(u=1),o[l]=o[l-1]+u}const a=new Array(o[i]);for(let l=0;l<i;++l){const c=n[l];let u=o[l];if(this.nGramWidths.forEach(A=>{const d=n[l+1]-n[l],f=this.getNumNGrams(d,A);this.createNGrams(e,c,a,u,f,A),u+=f}),this.preserveShort&&u===o[l]){const A=n[l+1]-n[l];if(A===0)continue;const d=A+2*this.padWidth;this.createNGrams(e,c,a,u,1,d)}}return[a,o]}}function mee(t,e,n,r,s,i,o,a){return new y_e(n,r,s,i,o,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x_e(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let o=t.indexOf(i);for(;o!==-1;){const a=t.subarray(0,o);(!n||a.length!==0)&&r.push(a),t=t.subarray(o+1),o=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const o=t.subarray(s,i);(!n||o.length!==0)&&r.push(o),s=i+1}}function gee(t,e,n){const r=t.length,s=[];let i=0,o=0;const a=new Array(r);for(let d=0;d<r;++d){const f=s.length;x_e(t[d],e,n,s);const h=s.length-f;a[d]=h,i+=h,o=Math.max(o,h)}const l=sr("int32",i*2),c=new Array(i),u=[r,o];let A=0;for(let d=0;d<r;++d)for(let f=0;f<a[d];++f)l[A*2]=d,l[A*2+1]=f,c[A]=s[A],++A;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yee(t,e){const n=sr("int32",t.length);for(let r=0;r<t.length;++r)n[r]=W1e(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xee=cr((t,e)=>t-e),v_e=vR((t,e,n,r)=>({real:t-n,imag:e-r})),BR=$r(Zx,xee,v_e),b_e={kernelName:Zx,backendName:"cpu",kernelFunc:BR};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vee(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=St(n,t.dtype);for(let s=0;s<r.values.length;++s){const i=r.indexToLoc(s),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=i[l]%t.shape[l];const a=t.locToIndex(o);r.values[s]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lg=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function bee(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,c=Math.log(a),u=.5*Math.exp(2*c/3),A=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),d=Math.max(n,Math.floor(e-l*u/a+A)),f=Math.min(r,Math.floor(e+(a-l)*u/a+A));bee(t,e,d,f)}const s=t[e];let i=n,o=r;for(Gf(t,n,e),Lg(t[r],s)>0&&Gf(t,n,r);i<o;){for(Gf(t,i,o),i++,o--;Lg(t[i],s)<0;)i=i+1;for(;Lg(t[o],s)>0;)o=o-1}Lg(t[n],s)===0?Gf(t,n,o):(o=o+1,Gf(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function wee(t,e,n,r,s){const i=e[e.length-1],[o,a]=[t.length/i,i],l=ns(n,o*r),c=ns("int32",o*r);for(let A=0;A<o;A++){const d=A*a,f=t.subarray(d,d+a);let h=new Array(f.length);f.forEach((x,v)=>h[v]={value:x,index:v}),r<h.length&&(bee(h,r),h=h.slice(0,r)),s&&h.sort(Lg);const p=A*r,m=l.subarray(p,p+r),y=c.subarray(p,p+r);for(let x=0;x<r;x++)m[x]=h[x].value,y[x]=h[x].index}const u=e.slice();return u[u.length-1]=r,[St(u,n,l),St(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cee(t,e,n,r){const s=kt(e,n)[0],i=[1,n[0],1];for(let h=0;h<s;h++)i[0]*=n[h];i[1]=n[s];for(let h=s+1;h<n.length;h++)i[2]*=n[h];const o=new Map,a=new Int32Array(n[s]),l=new Er(i,r,t),c=[],u=i[0]===1&&i[2]===1;for(let h=0;h<n[s];h++){let p;if(u)p=t[h].toString();else{const y=[];for(let x=0;x<i[0];x++)for(let v=0;v<i[2];v++)y.push(l.get(x,h,v));p=y.join(",")}const m=o.get(p);if(m!=null)a[h]=m;else{const y=o.size;o.set(p,y),a[h]=y,c.push(h)}}const A=i.slice();A[1]=o.size;const d=new Er(A,r);c.forEach((h,p)=>{for(let m=0;m<i[0];m++)for(let y=0;y<i[2];y++)d.set(l.get(m,h,y),m,p,y)});const f=n.slice();return f[s]=A[1],{outputValues:d.values,outputShape:f,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w_e=Object.freeze(Object.defineProperty({__proto__:null,addImpl:$Z,bincountImpl:bR,bincountReduceImpl:_Z,bitwiseAndImpl:OZ,castImpl:FZ,ceilImpl:DZ,concatImpl:RZ,equalImpl:PZ,expImpl:LZ,expm1Impl:MZ,floorDivImpl:HZ,floorImpl:QZ,gatherNdImpl:zZ,gatherV2Impl:VZ,greaterEqualImpl:GZ,greaterImpl:WZ,lessEqualImpl:XZ,lessImpl:KZ,linSpaceImpl:qZ,logImpl:YZ,maxImpl:JZ,maximumImpl:ZZ,minimumImpl:eee,multiplyImpl:wR,negImpl:tee,notEqualImpl:nee,prodImpl:ree,raggedGatherImpl:see,raggedRangeImpl:iee,raggedTensorToTensorImpl:oee,rangeImpl:aee,rsqrtImpl:lee,scatterImpl:id,sigmoidImpl:l_e,simpleAbsImpl:TZ,sliceImpl:uee,sparseFillEmptyRowsImpl:Aee,sparseReshapeImpl:dee,sparseSegmentReductionImpl:SR,sqrtImpl:A_e,squaredDifferenceImpl:fee,staticRegexReplaceImpl:hee,stridedSliceImpl:pee,stringNGramsImpl:mee,stringSplitImpl:gee,stringToHashBucketFastImpl:yee,subImpl:xee,tileImpl:vee,topKImpl:wee,transposeImpl:CR,uniqueImpl:Cee},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */LK("cpu",()=>new s3,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const See=nn(wx,t=>t>=0?t:Math.exp(t)-1),C_e={kernelName:wx,backendName:"cpu",kernelFunc:See};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bee(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r;Ze([s],"leakyRelu");const o=ge(s.shape),a=n.data.get(s.dataId).values,l=ns("float32",o);for(let c=0;c<a.length;c++)l[c]=a[c]<0?i*a[c]:a[c];return n.makeTensorInfo(s.shape,"float32",l)}const S_e={kernelName:jS,backendName:"cpu",kernelFunc:Bee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B_e=cr((t,e)=>t<0?e*t:t);function Nee(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e;Ze([r,s],"prelu");const i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,[a,l]=B_e(r.shape,s.shape,i,o,"float32");return n.makeTensorInfo(l,"float32",a)}const N_e={kernelName:iB,backendName:"cpu",kernelFunc:Nee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eee=nn(Mx,t=>Math.max(0,t)),E_e={kernelName:Mx,backendName:"cpu",kernelFunc:Eee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iee=nn(Qx,t=>Math.min(Math.max(0,t),6)),I_e={kernelName:Qx,backendName:"cpu",kernelFunc:Iee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B2(t,e,n,r,s){if(n==="linear")return ml({inputs:{x:e},backend:t});if(n==="relu")return Eee({inputs:{x:e},backend:t});if(n==="elu")return See({inputs:{x:e},backend:t});if(n==="relu6")return Iee({inputs:{x:e},backend:t});if(n==="prelu")return Nee({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return Bee({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return cee({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vn(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,o=ge(s.shape),a=dK(i,o),l=ge(a);L(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const c=n.data.get(s.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,A=c.complexTensorInfos.imag;u.shape=a,A.shape=a}return{dataId:s.dataId,shape:a,dtype:s.dtype}}const k_e={kernelName:aB,backendName:"cpu",kernelFunc:vn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kee(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;Ze([s,i],"matMul");const l=s.shape.length,c=i.shape.length,u=o?s.shape[l-2]:s.shape[l-1],A=a?i.shape[c-1]:i.shape[c-2],d=o?s.shape[l-1]:s.shape[l-2],f=a?i.shape[c-2]:i.shape[c-1],h=s.shape.slice(0,-2),p=i.shape.slice(0,-2),m=ge(h),y=ge(p),v=vt(s.shape.slice(0,-2),i.shape.slice(0,-2)).concat([d,f]);L(u===A,()=>`Error in matMul: inner shapes (${u}) and (${A}) of Tensors with shapes ${s.shape} and ${i.shape} and transposeA=${o} and transposeB=${a} must match.`);const b=o?[m,u,d]:[m,d,u],w=a?[y,f,A]:[y,A,f],C=vn({inputs:{x:s},backend:n,attrs:{shape:b}}),B=vn({inputs:{x:i},backend:n,attrs:{shape:w}}),S=o?C.shape[1]:C.shape[2],N=o?C.shape[2]:C.shape[1],k=a?B.shape[1]:B.shape[2],O=Math.max(m,y),U=n.data.get(C.dataId).values,P=n.data.get(B.dataId).values,V=ot(C.shape),W=ot(B.shape),[j,G,D]=o?[V[0],1,V[1]]:[V[0],V[1],1],[M,q,Z]=a?[1,W[1],W[0]]:[W[1],1,W[0]],te=N*k,ue=St([O,N,k],C.dtype),de=ue.values,le=n.blockSize;for(let he=0;he<O;he++){const ke=he%m,Qe=he%y;for(let xe=0;xe<N;xe+=le){const $e=Math.min(xe+le,N);for(let Fe=0;Fe<k;Fe+=le){const be=Math.min(Fe+le,k);for(let it=0;it<S;it+=le){const et=Math.min(it+le,S);for(let st=xe;st<$e;st++)for(let rt=Fe;rt<be;rt++){let ht=0;for(let dt=it;dt<et;dt++){const cn=U[ke*j+st*G+dt*D],Yt=P[dt*M+rt*q+Qe*Z];ht+=cn*Yt}de[he*te+(st*k+rt)]+=ht}}}}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(B),n.makeTensorInfo(v,ue.dtype,ue.values)}const T_e={kernelName:SS,backendName:"cpu",kernelFunc:kee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F_e(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:A}=r;let d,f,h;const p=[];d=kee({inputs:{a:s,b:i},attrs:{transposeA:l,transposeB:c},backend:n}),o&&(f=up({inputs:{a:d,b:o},backend:n}),p.push(d),d=f),u&&(h=B2(n,d,u,a,A),p.push(d),d=h);for(const y of p)n.disposeIntermediateTensorInfo(y);return d}const $_e={kernelName:t2,backendName:"cpu",kernelFunc:F_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const __e=nn(cx,t=>Math.acos(t)),O_e={kernelName:cx,backendName:"cpu",kernelFunc:__e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D_e=nn(ux,t=>Math.acosh(t)),R_e={kernelName:ux,backendName:"cpu",kernelFunc:D_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P_e(t){const{inputs:e,backend:n}=t,r=e;Ze(e,"addN");const s=r.map(a=>n.data.get(a.dataId).values),i=St(r[0].shape,r[0].dtype),o=i.values;for(let a=0;a<r.length;a++){const l=s[a];for(let c=0;c<o.length;c++)o[c]+=l[c]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const U_e={kernelName:xS,backendName:"cpu",kernelFunc:P_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ze(s,"all");const a=kt(i,s.shape);let l=a;const c=Hn(l,s.shape.length);let u=s;c!=null&&(u=oi({inputs:{x:s},backend:n,attrs:{perm:c}}),l=ar(l.length,s.shape.length)),is("all",l,u.shape.length);const[A,d]=Vr(u.shape,l),f=ge(d),h=vs(ge(A),u.dtype),p=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){const x=y*f;let v=p[x];for(let b=0;b<f;++b){const w=p[x+b];v=v&&w}h[y]=v}c!=null&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(A,u.dtype,h);if(o){const y=or(A,a),x=vn({inputs:{x:m},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(m),x}return m}const j_e={kernelName:N_,backendName:"cpu",kernelFunc:L_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ze(s,"any");const a=kt(i,s.shape);let l=a;const c=Hn(l,s.shape.length);let u=s;c!=null&&(u=oi({inputs:{x:s},backend:n,attrs:{perm:c}}),l=ar(l.length,s.shape.length)),is("any",l,u.shape.length);const[A,d]=Vr(u.shape,l),f=ge(d),h=vs(ge(A),u.dtype),p=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){const x=y*f;let v=p[x];for(let b=0;b<f;++b){const w=p[x+b];v=v||w}h[y]=v}c!=null&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(A,u.dtype,h);if(o){const y=or(A,a),x=vn({inputs:{x:m},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(m),x}return m}const Q_e={kernelName:E_,backendName:"cpu",kernelFunc:M_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;Ze(s,"argMax");let o=kt(i,s.shape);const a=Hn(o,s.shape.length);let l=s;const c=[];a!=null&&(l=oi({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=ar(o.length,l.shape.length)),o=[o[0]],is("argMax",o,l.shape.length);const[u,A]=Vr(l.shape,o),d=ge(u),f=vs(d,"int32"),h=ge(A),p=n.data.get(l.dataId).values;for(let m=0;m<f.length;++m){const y=m*h;let x=p[y],v=0;for(let b=0;b<h;++b){const w=p[y+b];w>x&&(x=w,v=b)}f[m]=v}return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.makeTensorInfo(u,"int32",f)}const z_e={kernelName:vS,backendName:"cpu",kernelFunc:H_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;Ze(s,"argMin");let o=kt(i,s.shape);const a=Hn(o,s.shape.length);let l=s;const c=[];a!=null&&(l=oi({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=ar(o.length,l.shape.length)),o=[o[0]],is("argMin",o,l.shape.length);const[u,A]=Vr(l.shape,o),d=ge(u),f=vs(d,"int32"),h=ge(A),p=n.data.get(l.dataId).values;for(let m=0;m<f.length;++m){const y=m*h;let x=p[y],v=0;for(let b=0;b<h;++b){const w=p[y+b];w<x&&(x=w,v=b)}f[m]=v}return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.makeTensorInfo(u,"int32",f)}const W_e={kernelName:bS,backendName:"cpu",kernelFunc:V_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G_e=nn(Ax,t=>Math.asin(t)),K_e={kernelName:Ax,backendName:"cpu",kernelFunc:G_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X_e=nn(dx,t=>Math.asinh(t)),q_e={kernelName:dx,backendName:"cpu",kernelFunc:X_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y_e=nn(fx,t=>Math.atan(t)),J_e={kernelName:fx,backendName:"cpu",kernelFunc:Y_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z_e=cr((t,e)=>Math.atan2(t,e)),eOe=$r(px,Z_e),tOe={kernelName:px,backendName:"cpu",kernelFunc:eOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nOe=nn(hx,t=>Math.atanh(t)),rOe={kernelName:hx,backendName:"cpu",kernelFunc:nOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NR(t,e,n,r,s,i){const o=s.strideHeight,a=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,u=s.effectiveFilterHeight,A=s.effectiveFilterWidth,d=s.padInfo.top,f=s.padInfo.left,h=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=St(s.outShape,n),m=p.values,y=s.outShape[1]*s.outShape[2]*s.outShape[3],x=s.outShape[2]*s.outShape[3],v=s.outShape[3];for(let b=0;b<s.batchSize;++b){const w=b*y,C=b*r[0];for(let B=0;B<s.inChannels;++B)for(let S=0;S<s.outHeight;++S){const N=S*o-d,k=Math.max(0,N),O=Math.min(s.inHeight,u+N),U=w+S*x;for(let P=0;P<s.outWidth;++P){const V=P*a-f,W=Math.max(0,V),j=Math.min(s.inWidth,A+V);let G=h,D=0,M=0;for(let Z=k;Z<O;Z+=l){const te=C+Z*r[1];for(let ue=W;ue<j;ue+=c){const de=te+ue*r[2],le=t[de+B];i==="max"&&le>G?G=le:i==="avg"&&(D+=le,M++)}if(isNaN(G))break}const q=U+P*v+B;m[q]=i==="avg"?D/M:G}}}return p}function Tee(t,e,n,r,s=!1,i=!1){const o=St(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,A=r.effectiveFilterHeight,d=r.effectiveFilterWidth,f=r.padInfo.top,h=r.padInfo.left,p=St(e,n,t);for(let m=0;m<r.batchSize;++m)for(let y=0;y<r.inChannels;++y)for(let x=0;x<r.outHeight;++x){const v=x*a-f;let b=v;for(;b<0;)b+=c;const w=Math.min(r.inHeight,A+v);for(let C=0;C<r.outWidth;++C){const B=C*l-h;let S=B;for(;S<0;)S+=u;const N=Math.min(r.inWidth,d+B);let k=Number.NEGATIVE_INFINITY,O=-1;for(let U=b;U<w;U+=c){const P=U-v;for(let V=S;V<N;V+=u){const W=V-B,j=p.get(m,U,V,y);j>k&&(k=j,s?O=i?((m*r.inHeight+U)*r.inWidth+V)*r.inChannels+y:(U*r.inWidth+V)*r.inChannels+y:O=P*d+W)}}o.set(O,m,x,C,y)}}return o}function Fee(t,e,n,r,s,i){const o=s.strideDepth,a=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,u=s.dilationHeight,A=s.dilationWidth,d=s.effectiveFilterDepth,f=s.effectiveFilterHeight,h=s.effectiveFilterWidth,p=s.padInfo.front,m=s.padInfo.top,y=s.padInfo.left,x=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=St(s.outShape,n),b=v.values,w=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],C=s.outShape[2]*s.outShape[3]*s.outShape[4],B=s.outShape[3]*s.outShape[4],S=s.outShape[4];for(let N=0;N<s.batchSize;++N){const k=N*w,O=N*r[0];for(let U=0;U<s.inChannels;++U)for(let P=0;P<s.outDepth;++P){const V=P*o-p;let W=V;for(;W<0;)W+=c;const j=Math.min(s.inDepth,d+V),G=k+P*C;for(let D=0;D<s.outHeight;++D){const M=D*a-m;let q=M;for(;q<0;)q+=u;const Z=Math.min(s.inHeight,f+M),te=G+D*B;for(let ue=0;ue<s.outWidth;++ue){const de=ue*l-y;let le=de;for(;le<0;)le+=A;const he=Math.min(s.inWidth,h+de),ke=te+ue*S;let Qe=x,xe=0,$e=0;for(let be=W;be<j;be+=c){const it=O+be*r[1];for(let et=q;et<Z;et+=u){const st=it+et*r[2];for(let rt=le;rt<he;rt+=A){const ht=st+rt*r[3],dt=t[ht+U];if(i==="max"&&dt>Qe?Qe=dt:i==="avg"&&(xe+=dt,$e++),isNaN(Qe))break}if(isNaN(Qe))break}if(isNaN(Qe))break}const Fe=ke+U;b[Fe]=i==="avg"?xe/Math.max($e,1):Qe}}}}return v}function sOe(t,e){const n=St(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,A=e.effectiveFilterWidth,d=e.padInfo.front,f=e.padInfo.top,h=e.padInfo.left;for(let p=0;p<e.batchSize;++p)for(let m=0;m<e.inChannels;++m)for(let y=0;y<e.outDepth;++y){const x=y*r-d;let v=x;for(;v<0;)v+=o;const b=Math.min(e.inDepth,c+x);for(let w=0;w<e.outHeight;++w){const C=w*s-f;let B=C;for(;B<0;)B+=a;const S=Math.min(e.inHeight,u+C);for(let N=0;N<e.outWidth;++N){const k=N*i-h;let O=k;for(;O<0;)O+=l;const U=Math.min(e.inWidth,A+k);let P=Number.NEGATIVE_INFINITY,V=-1;for(let W=v;W<b;W+=o){const j=W-x;for(let G=B;G<S;G+=a){const D=G-C;for(let M=O;M<U;M+=l){const q=M-k,Z=t.get(p,W,G,M,m);Z>=P&&(P=Z,V=j*u*A+D*u+q)}}}n.set(V,p,y,w,N,m)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Ze(s,"avgPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;L(ss(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Go(s.shape,i,o,c,a,l);let A;if(u.filterWidth===1&&u.filterHeight===1&&_t(u.inShape,u.outShape))A=ml({inputs:{x:s},backend:n});else{const d=n.data.get(s.dataId).values,f=ot(s.shape),h=NR(d,s.shape,s.dtype,f,u,"avg");A=n.makeTensorInfo(u.outShape,s.dtype,h.values)}return A}const oOe={kernelName:wS,backendName:"cpu",kernelFunc:iOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;Ze(s,"avgPool3d");const u=Nc(s.shape,i,o,1,a,l,c),A=n.data.get(s.dataId).values,d=Fee(A,s.shape,s.dtype,ot(s.shape),u,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}const lOe={kernelName:CS,backendName:"cpu",kernelFunc:aOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cOe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;Ze([s,i],"avgPool3DGrad");const u=Nc(i.shape,o,a,1,l,c),A=u.strideDepth,d=u.strideHeight,f=u.strideWidth,h=u.filterDepth,p=u.filterHeight,m=u.filterWidth,y=u.dilationDepth,x=u.dilationHeight,v=u.dilationWidth,b=u.effectiveFilterDepth,w=u.effectiveFilterHeight,C=u.effectiveFilterWidth,B=b-1-u.padInfo.front,S=C-1-u.padInfo.left,N=w-1-u.padInfo.top,k=St(i.shape,"float32"),O=1/(h*p*m),U=n.bufferSync(s);for(let P=0;P<u.batchSize;++P)for(let V=0;V<u.inChannels;++V)for(let W=0;W<u.inDepth;++W)for(let j=0;j<u.inHeight;++j)for(let G=0;G<u.inWidth;++G){const D=W-B,M=j-N,q=G-S;let Z=0;for(let te=0;te<b;te+=y){const ue=(D+te)/A;if(!(ue<0||ue>=u.outDepth||Math.floor(ue)!==ue))for(let de=0;de<w;de+=x){const le=(M+de)/d;if(!(le<0||le>=u.outHeight||Math.floor(le)!==le))for(let he=0;he<C;he+=v){const ke=(q+he)/f;if(ke<0||ke>=u.outWidth||Math.floor(ke)!==ke)continue;const Qe=U.get(P,ue,le,ke,V);Z+=Qe}}}k.set(Z*O,P,W,j,G,V)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const uOe={kernelName:k_,backendName:"cpu",kernelFunc:cOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AOe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;Ze([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=Go(o.shape,a,l,1,c),A=u.strideHeight,d=u.strideWidth,f=u.filterHeight,h=u.filterWidth,p=u.dilationHeight,m=u.dilationWidth,y=u.effectiveFilterHeight,x=u.effectiveFilterWidth,v=x-1-u.padInfo.left,b=y-1-u.padInfo.top,w=St(o.shape,"float32"),C=1/(f*h),B=n.data.get(s.dataId).values,S=St(s.shape,"float32",B);for(let N=0;N<u.batchSize;++N)for(let k=0;k<u.inChannels;++k)for(let O=0;O<u.inHeight;++O)for(let U=0;U<u.inWidth;++U){const P=O-b,V=U-v;let W=0;for(let j=0;j<y;j+=p){const G=(P+j)/A;if(!(G<0||G>=u.outHeight||Math.floor(G)!==G))for(let D=0;D<x;D+=m){const M=(V+D)/d;if(M<0||M>=u.outWidth||Math.floor(M)!==M)continue;const q=S.get(N,G,M,k);W+=q}}w.set(W*C,N,O,U,k)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const dOe={kernelName:I_,backendName:"cpu",kernelFunc:AOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,scale:i,offset:o,mean:a,variance:l}=e;L(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),L(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),L(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Ze([s,a,l,i,o],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=n.data.get(s.dataId).values,A=n.data.get(a.dataId).values,d=n.data.get(l.dataId).values,f=i?n.data.get(i.dataId).values:new Float32Array([1]),h=o?n.data.get(o.dataId).values:new Float32Array([0]),p=new Float32Array(u.length),m=h.length,y=f.length,x=d.length,v=A.length;let b=0,w=0,C=0,B=0;for(let S=0;S<u.length;++S)p[S]=h[b++]+(u[S]-A[w++])*f[C++]/Math.sqrt(d[B++]+c),b>=m&&(b=0),w>=v&&(w=0),C>=y&&(C=0),B>=x&&(B=0);return n.makeTensorInfo(s.shape,s.dtype,p)}const hOe={kernelName:PS,backendName:"cpu",kernelFunc:fOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;Ze([s],"batchToSpaceND");const a=i.reduce((y,x)=>y*x),l=dv(s.shape,i,a),c=fv(l.length,i.length),u=hv(s.shape,i,a),A=DD(o,i.length),d=RD(u,o,i.length),f=vn({inputs:{x:s},backend:n,attrs:{shape:l}}),h=oi({inputs:{x:f},backend:n,attrs:{perm:c}}),p=vn({inputs:{x:h},backend:n,attrs:{shape:u}}),m=Yd({inputs:{x:p},backend:n,attrs:{begin:A,size:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),m}const mOe={kernelName:BS,backendName:"cpu",kernelFunc:pOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,c=bR(a,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}const yOe={kernelName:T_,backendName:"cpu",kernelFunc:gOe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xOe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,a=vt(Array.from(i),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const vOe={kernelName:F_,backendName:"cpu",kernelFunc:xOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bOe=nn(yx,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),wOe={kernelName:yx,backendName:"cpu",kernelFunc:bOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(ge(e.shape)),s=n.data.get(e.dataId),i=s.complexTensorInfos.real,o=s.complexTensorInfos.imag,a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let c=0;c<a.length;c++){const u=a[c],A=l[c];r[c]=Math.hypot(u,A)}return n.makeOutput(r,e.shape,"float32")},SOe={kernelName:ES,backendName:"cpu",kernelFunc:COe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ap(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const BOe={kernelName:q_,backendName:"cpu",kernelFunc:Ap};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dp(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=kt(s,e[0].shape)[0],o=e.map(p=>p.shape);$D(o,i);let a=cl(e.map(p=>p.shape),i);if(ge(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(p=>ge(p.shape)>0);if(l.length===1)return ml({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const p=l.map(b=>qd({inputs:{input:b},backend:n})),m=l.map(b=>Ap({inputs:{input:b},backend:n})),y=dp({inputs:p,backend:n,attrs:{axis:i}}),x=dp({inputs:m,backend:n,attrs:{axis:i}}),v=vi({inputs:{real:y,imag:x},backend:n});return p.forEach(b=>n.disposeIntermediateTensorInfo(b)),m.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),v}const c=l.map(p=>{const y=[-1,ge(p.shape.slice(i))];return vn({inputs:{x:p},backend:n,attrs:{shape:y}})}),u=c.map(p=>({vals:n.data.get(p.dataId).values,shape:p.shape}));a=cl(c.map(p=>p.shape),1);const A=c[0].shape[0]===1,d=RZ(u,a,e[0].dtype,A),f=cl(l.map(p=>p.shape),i),h=n.makeTensorInfo(f,e[0].dtype,d);return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const NOe={kernelName:IS,backendName:"cpu",kernelFunc:dp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ee(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r;Ze([s,i],"conv2d");const A=Ec(l),d=zr(s.shape,i.shape,o,c,a,u,!1,A),f=d.filterHeight,h=d.filterWidth,p=d.dilationHeight,m=d.dilationWidth,y=d.padInfo.left,x=d.padInfo.top,v=d.dataFormat==="channelsLast",b=new Er(d.outShape,s.dtype),w=ot(s.shape),C=ot(i.shape),B=w[0],S=v?w[1]:w[2],N=v?w[2]:1,k=v?1:w[1],O=b.strides[0],U=v?b.strides[1]:b.strides[2],P=v?b.strides[2]:1,V=v?1:b.strides[1],W=n.data.get(s.dataId).values,j=n.data.get(i.dataId).values,G=b.values;for(let D=0;D<d.batchSize;++D){const M=D*B,q=D*O;for(let Z=0;Z<d.outHeight;++Z){const te=q+Z*U,ue=Z*d.strideHeight-x;for(let de=0;de<f;++de){const le=ue+de*p;if(le<0||le>=d.inHeight)continue;const he=de*C[0],ke=M+le*S;for(let Qe=0;Qe<d.outWidth;++Qe){const xe=te+Qe*P,$e=Qe*d.strideWidth-y;for(let Fe=0;Fe<h;++Fe){const be=$e+Fe*m;if(be<0||be>=d.inWidth)continue;const it=he+Fe*C[1],et=ke+be*N;let st=it;for(let rt=0;rt<d.inChannels;++rt){const ht=W[et+rt*k];for(let dt=0;dt<d.outChannels;++dt)G[xe+dt*V]+=ht*j[st+dt];st+=d.outChannels}}}}}}return n.makeTensorInfo(b.shape,b.dtype,G)}const EOe={kernelName:kS,backendName:"cpu",kernelFunc:$ee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;Ze([s,i],"conv2dBackpropFilter");const A=Ec(l),d=zr(s.shape,u,o,1,a,c,!1,A),{strideHeight:f,strideWidth:h,filterHeight:p,filterWidth:m}=d,y=d.dataFormat==="channelsLast",x=new Er(d.filterShape,"float32"),v=d.padInfo.left,b=d.padInfo.top,w=n.data.get(s.dataId).values,C=n.data.get(i.dataId).values,B=new Er(s.shape,s.dtype,w),S=new Er(i.shape,i.dtype,C);for(let N=0;N<p;++N){const k=Math.max(0,Math.ceil((b-N)/f)),O=Math.min(d.outHeight,(d.inHeight+b-N)/f);for(let U=0;U<m;++U){const P=Math.max(0,Math.ceil((v-U)/h)),V=Math.min(d.outWidth,(d.inWidth+v-U)/h);for(let W=0;W<d.inChannels;++W)for(let j=0;j<d.outChannels;++j){let G=0;for(let D=0;D<d.batchSize;++D)for(let M=k;M<O;++M){const q=N+M*f-b;for(let Z=P;Z<V;++Z){const te=U+Z*h-v;y?G+=B.get(D,q,te,W)*S.get(D,M,Z,j):G+=B.get(D,W,q,te)*S.get(D,j,M,Z)}}x.set(G,N,U,W,j)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const kOe={kernelName:__,backendName:"cpu",kernelFunc:IOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TOe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r;Ze([s,i],"conv2dBackpropInput");const A=ot(i.shape),d=ot(s.shape);let f=Ec(c);const h=zr(o,i.shape,a,1,l,u,!1,f),p=new Er(h.inShape,"float32"),m=p.values,y=n.data.get(s.dataId).values,x=n.data.get(i.dataId).values,[v,b,w]=A,{batchSize:C,filterHeight:B,filterWidth:S,inChannels:N,inHeight:k,inWidth:O,outChannels:U,outHeight:P,outWidth:V,strideHeight:W,strideWidth:j}=h;f=h.dataFormat;const G=B-1-h.padInfo.top,D=S-1-h.padInfo.left,M=f==="channelsLast",q=p.strides[0],Z=M?p.strides[1]:p.strides[2],te=M?p.strides[2]:1,ue=M?1:p.strides[1],de=d[0],le=M?d[1]:d[2],he=M?d[2]:1,ke=M?1:d[1];for(let Qe=0;Qe<C;++Qe)for(let xe=0;xe<N;++xe)for(let $e=0;$e<k;++$e){const Fe=$e-G,be=Math.max(0,Math.ceil(Fe/W)),it=Math.min(P,(B+Fe)/W);for(let et=0;et<O;++et){const st=et-D,rt=Math.max(0,Math.ceil(st/j)),ht=Math.min(V,(S+st)/j);let dt=0;for(let Yt=be;Yt<it;++Yt){const Dt=Yt*W-Fe;for(let rn=rt;rn<ht;++rn){const cs=rn*j-st,yr=de*Qe+le*Yt+he*rn,Zn=v*(B-1-Dt)+b*(S-1-cs)+w*xe;for(let ur=0;ur<U;++ur){const Cs=y[yr+ke*ur],zn=x[Zn+ur];dt+=Cs*zn}}}const cn=q*Qe+Z*$e+te*et+ue*xe;m[cn]=dt}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const FOe={kernelName:TS,backendName:"cpu",kernelFunc:TOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Oe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r;Ze([s,i],"conv3d");const c=cA(s.shape,i.shape,o,l,a),{filterDepth:u,filterHeight:A,filterWidth:d,dilationDepth:f,dilationHeight:h,dilationWidth:p,padInfo:m}=c,y=m.front,x=m.left,v=m.top,b=new Er(c.outShape,s.dtype),w=n.data.get(s.dataId).values,C=n.data.get(i.dataId).values,B=b.values,S=ot(s.shape),N=ot(i.shape);for(let k=0;k<c.batchSize;++k){const O=k*S[0],U=k*b.strides[0];for(let P=0;P<c.outDepth;++P){const V=U+P*b.strides[1],W=P*c.strideDepth-y;for(let j=0;j<u;++j){const G=W+j*f;if(G<0||G>=c.inDepth)continue;const D=j*N[0],M=O+G*S[1];for(let q=0;q<c.outHeight;++q){const Z=V+q*b.strides[2],te=q*c.strideHeight-v;for(let ue=0;ue<A;++ue){const de=te+ue*h;if(de<0||de>=c.inHeight)continue;const le=D+ue*N[1],he=M+de*S[2];for(let ke=0;ke<c.outWidth;++ke){const Qe=Z+ke*c.outChannels,xe=ke*c.strideWidth-x;for(let $e=0;$e<d;++$e){const Fe=xe+$e*p;if(Fe<0||Fe>=c.inWidth)continue;const be=le+$e*N[2],it=he+Fe*c.inChannels;let et=be;for(let st=0;st<c.inChannels;++st){const rt=w[it+st];for(let ht=0;ht<c.outChannels;++ht)B[Qe+ht]+=rt*C[et+ht];et+=c.outChannels}}}}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const _Oe={kernelName:FS,backendName:"cpu",kernelFunc:$Oe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:l}=r;Ze([s,i],"conv3dBackpropFilterV2");const c=ot(s.shape),u=ot(i.shape),A=cA(s.shape,l,o,1,a),d=A.strideDepth,f=A.strideHeight,h=A.strideWidth,p=A.filterDepth,m=A.filterHeight,y=A.filterWidth,x=new Er(A.filterShape,"float32"),v=x.values,[b,w,C,B]=x.strides,S=n.data.get(i.dataId).values,[N,k,O,U]=u,P=n.data.get(s.dataId).values,[V,W,j,G]=c,D=A.padInfo.front,M=A.padInfo.left,q=A.padInfo.top;for(let Z=0;Z<p;++Z){const te=Math.max(0,Math.ceil((D-Z)/d)),ue=Math.min(A.outDepth,(A.inDepth+D-Z)/d),de=Z*b;for(let le=0;le<m;++le){const he=Math.max(0,Math.ceil((q-le)/f)),ke=Math.min(A.outHeight,(A.inHeight+q-le)/f),Qe=le*w+de;for(let xe=0;xe<y;++xe){const $e=Math.max(0,Math.ceil((M-xe)/h)),Fe=Math.min(A.outWidth,(A.inWidth+M-xe)/h),be=xe*C+Qe;for(let it=0;it<A.inChannels;++it){const et=it*B+be;for(let st=0;st<A.outChannels;++st){let rt=0;for(let ht=0;ht<A.batchSize;++ht){const dt=ht*V,cn=ht*N;for(let Yt=te;Yt<ue;++Yt){const rn=(Z+Yt*d-D)*W+dt,cs=Yt*k+cn;for(let yr=he;yr<ke;++yr){const ur=(le+yr*f-q)*j+rn,Cs=yr*O+cs;for(let zn=$e;zn<Fe;++zn){const Sl=(xe+zn*h-M)*G+ur,Bl=zn*U+Cs;rt+=P[Sl+it]*S[Bl+st]}}}}v[et+st]=rt}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const DOe={kernelName:O_,backendName:"cpu",kernelFunc:OOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ROe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:l}=r;Ze([s],"conv3dBackpropInputV2");const c=ot(s.shape),u=ot(i.shape),A=cA(l,i.shape,a,1,o),d=new Er(A.inShape,"float32"),f=d.values,[h,p,m,y]=d.strides,x=n.data.get(s.dataId).values,[v,b,w,C]=c,B=n.data.get(i.dataId).values,[S,N,k,O]=u,{batchSize:U,filterDepth:P,filterHeight:V,filterWidth:W,inChannels:j,inDepth:G,inHeight:D,inWidth:M,outChannels:q,outDepth:Z,outHeight:te,outWidth:ue,strideDepth:de,strideHeight:le,strideWidth:he}=A,ke=P-1-A.padInfo.front,Qe=V-1-A.padInfo.top,xe=W-1-A.padInfo.left;for(let $e=0;$e<U;++$e)for(let Fe=0;Fe<j;++Fe)for(let be=0;be<G;++be){const it=be-ke,et=Math.max(0,Math.ceil(it/de)),st=Math.min(Z,(P+it)/de);for(let rt=0;rt<D;++rt){const ht=rt-Qe,dt=Math.max(0,Math.ceil(ht/le)),cn=Math.min(te,(V+ht)/le);for(let Yt=0;Yt<M;++Yt){const Dt=Yt-xe,rn=Math.max(0,Math.ceil(Dt/he)),cs=Math.min(ue,(W+Dt)/he);let yr=0;for(let Zn=et;Zn<st;++Zn){const ur=Zn*de-it;for(let Cs=dt;Cs<cn;++Cs){const zn=Cs*le-ht;for(let Mi=rn;Mi<cs;++Mi){const Sl=Mi*he-Dt,Bl=v*$e+b*Zn+w*Cs+C*Mi,Cf=S*(P-1-ur)+N*(V-1-zn)+k*(W-1-Sl)+O*Fe;for(let Nl=0;Nl<q;++Nl){const _r=x[Bl+Nl],Rn=B[Cf+Nl];yr+=_r*Rn}}}}f[h*$e+p*be+m*rt+y*Yt+Fe]=yr}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}const POe={kernelName:D_,backendName:"cpu",kernelFunc:ROe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UOe=nn(xx,t=>Math.cos(t)),LOe={kernelName:xx,backendName:"cpu",kernelFunc:UOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jOe=nn(vx,t=>Math.cosh(t)),MOe={kernelName:vx,backendName:"cpu",kernelFunc:jOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QOe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,[u,A,d,f]=s.shape,h=i.shape[0],[p,m]=a,y=St([h,p,m,f],"float32"),x=n.data.get(i.dataId).values,v=n.data.get(o.dataId).values,b=n.data.get(s.dataId).values,w=ot(s.shape),C=ot(y.shape);for(let B=0;B<h;B++){const S=B*4,N=x[S],k=x[S+1],O=x[S+2],U=x[S+3],P=v[B];if(P>=u)continue;const V=p>1?(O-N)*(A-1)/(p-1):0,W=m>1?(U-k)*(d-1)/(m-1):0;for(let j=0;j<p;j++){const G=p>1?N*(A-1)+j*V:.5*(N+O)*(A-1);if(G<0||G>A-1){for(let D=0;D<m;D++)for(let M=0;M<f;M++){const q=M+D*C[2]+j*C[1]+B*C[0];y.values[q]=c}continue}if(l==="bilinear"){const D=Math.floor(G),M=Math.ceil(G),q=G-D;for(let Z=0;Z<m;Z++){const te=m>1?k*(d-1)+Z*W:.5*(k+U)*(d-1);if(te<0||te>d-1){for(let he=0;he<f;he++){const ke=he+Z*C[2]+j*C[1]+B*C[0];y.values[ke]=c}continue}const ue=Math.floor(te),de=Math.ceil(te),le=te-ue;for(let he=0;he<f;he++){let ke=he+ue*w[2]+D*w[1]+P*w[0];const Qe=b[ke];ke=he+de*w[2]+D*w[1]+P*w[0];const xe=b[ke];ke=he+ue*w[2]+M*w[1]+P*w[0];const $e=b[ke];ke=he+de*w[2]+M*w[1]+P*w[0];const Fe=b[ke],be=Qe+(xe-Qe)*le,it=$e+(Fe-$e)*le;ke=he+Z*C[2]+j*C[1]+B*C[0],y.values[ke]=be+(it-be)*q}}}else for(let D=0;D<m;++D){const M=m>1?k*(d-1)+D*W:.5*(k+U)*(d-1);if(M<0||M>d-1){for(let te=0;te<f;te++){const ue=te+D*C[2]+j*C[1]+B*C[0];y.values[ue]=c}continue}const q=Math.round(M),Z=Math.round(G);for(let te=0;te<f;te++){const ue=te+q*w[2]+Z*w[1]+P*w[0],de=te+D*C[2]+j*C[1]+B*C[0];y.values[de]=b[ue]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const HOe={kernelName:P_,backendName:"cpu",kernelFunc:QOe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;Ze(s,"cumprod");const l=Hn([i],s.shape.length);let c=s;l!=null&&(c=oi({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=ar(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const A=_i(c.dtype,"int32"),d=S_(ge(c.shape),A),f=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],p=a?(y,x)=>y+h-x-1:(y,x)=>y+x;for(let y=0;y<f.length;y+=h)for(let x=0;x<h;x++){const v=p(y,x);if(x===0)d[v]=o?1:f[v];else{const b=p(y,x-1);d[v]=o?f[b]*d[b]:f[v]*d[b]}}const m=n.makeTensorInfo(c.shape,A,d);if(l!=null){const y=uA(l),x=oi({inputs:{x:m},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(c),x}return m}const VOe={kernelName:R_,backendName:"cpu",kernelFunc:zOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;Ze(s,"cumsum");const l=Hn([i],s.shape.length);let c=s;l!=null&&(c=oi({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=ar(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const A=_i(c.dtype,"int32"),d=vs(ge(c.shape),A),f=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],p=a?(y,x)=>y+h-x-1:(y,x)=>y+x;for(let y=0;y<f.length;y+=h)for(let x=0;x<h;x++){const v=p(y,x);if(x===0)d[v]=o?0:f[v];else{const b=p(y,x-1);d[v]=o?f[b]+d[b]:f[v]+d[b]}}const m=n.makeTensorInfo(c.shape,A,d);if(l!=null){const y=uA(l),x=oi({inputs:{x:m},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(c),x}return m}const GOe={kernelName:$S,backendName:"cpu",kernelFunc:WOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(s.shape.length===1){const l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=bR(l,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(i),u=_Z(l,c,o,a);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const XOe={kernelName:U_,backendName:"cpu",kernelFunc:KOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:o}=r;L(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=s.shape[0],l=s.shape[1],c=s.shape[2],u=s.shape[3],A=l*i,d=c*i,f=u/(i*i),h=n.data.get(s.dataId).values,p=new Float32Array(a*A*d*f);let m=0;for(let y=0;y<a;++y)for(let x=0;x<A;++x){const v=Math.floor(x/i),b=x%i;for(let w=0;w<d;++w){const C=Math.floor(w/i),B=w%i,S=(b*i+B)*f;for(let N=0;N<f;++N){const O=N+S+u*(C+c*(v+l*y));p[m++]=h[O]}}}return n.makeTensorInfo([a,A,d,f],s.dtype,p)}const YOe={kernelName:L_,backendName:"cpu",kernelFunc:qOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ee(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;Ze([s,i],"depthwiseConv2DNative");const u=ot(s.shape),A=ot(i.shape);let d=l;d==null&&(d=[1,1]),L(ss(o,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${d}'`);const f=zr(s.shape,i.shape,o,d,a,c,!0),{filterHeight:h,filterWidth:p,dilationHeight:m,dilationWidth:y,padInfo:x}=f,v=x.left,b=x.top,w=f.outChannels/f.inChannels,C=new Er(f.outShape,s.dtype),B=n.data.get(s.dataId).values,S=n.data.get(i.dataId).values,N=C.values;for(let k=0;k<f.batchSize;++k){const O=k*u[0],U=k*C.strides[0];for(let P=0;P<f.outHeight;++P){const V=U+P*C.strides[1],W=P*f.strideHeight-b;for(let j=0;j<h;++j){const G=W+j*m;if(G<0||G>=f.inHeight)continue;const D=j*A[0],M=O+G*u[1];for(let q=0;q<f.outWidth;++q){const Z=V+q*C.strides[2],te=q*f.strideWidth-v;for(let ue=0;ue<p;++ue){const de=te+ue*y;if(de<0||de>=f.inWidth)continue;const le=D+ue*A[1],he=M+de*f.inChannels;let ke=Z,Qe=le;for(let xe=0;xe<f.inChannels;++xe){const $e=B[he+xe];for(let Fe=0;Fe<w;++Fe)N[ke+Fe]+=$e*S[Qe+Fe];ke+=w,Qe+=w}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const JOe={kernelName:_S,backendName:"cpu",kernelFunc:_ee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r;Ze([s,i],"depthwiseConv2dNativeBackpropFilter");const A=zr(s.shape,u,o,a,l,c,!0),{strideHeight:d,strideWidth:f,filterHeight:h,filterWidth:p}=A,m=new Er(A.filterShape,"float32"),y=A.padInfo.left,x=A.padInfo.top,v=A.outChannels/A.inChannels,b=n.data.get(s.dataId).values,w=new Er(s.shape,s.dtype,b),C=n.data.get(i.dataId).values,B=new Er(i.shape,i.dtype,C);for(let S=0;S<h;++S){const N=Math.max(0,Math.ceil((x-S)/d)),k=Math.min(A.outHeight,(A.inHeight+x-S)/d);for(let O=0;O<p;++O){const U=Math.max(0,Math.ceil((y-O)/f)),P=Math.min(A.outWidth,(A.inWidth+y-O)/f);for(let V=0;V<A.outChannels;++V){const W=Math.trunc(V/v),j=V%v;let G=0;for(let D=0;D<A.batchSize;++D)for(let M=N;M<k;++M){const q=S+M*d-x;for(let Z=U;Z<P;++Z){const te=O+Z*f-y;G+=w.get(D,q,te,W)*B.get(D,M,Z,V)}}m.set(G,S,O,W,j)}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const eDe={kernelName:j_,backendName:"cpu",kernelFunc:ZOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tDe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r;Ze([s,i],"depthwiseConv2DNativeBackpropInput");const A=ot(s.shape),d=ot(i.shape),f=zr(u,i.shape,o,a,l,c,!0),h=new Er(f.inShape,"float32"),p=h.values,[m,y,x]=h.strides,v=n.data.get(s.dataId).values,[b,w,C]=A,B=n.data.get(i.dataId).values,[S,N,k]=d,{batchSize:O,filterHeight:U,filterWidth:P,inChannels:V,inHeight:W,inWidth:j,outChannels:G,outHeight:D,outWidth:M,strideHeight:q,strideWidth:Z}=f,te=U-1-f.padInfo.top,ue=P-1-f.padInfo.left,de=G/V;for(let le=0;le<O;++le)for(let he=0;he<V;++he)for(let ke=0;ke<W;++ke){const Qe=ke-te,xe=Math.max(0,Math.ceil(Qe/q)),$e=Math.min(D,(U+Qe)/q);for(let Fe=0;Fe<j;++Fe){const be=Fe-ue,it=Math.max(0,Math.ceil(be/Z)),et=Math.min(M,(P+be)/Z);let st=0;for(let rt=xe;rt<$e;++rt){const ht=rt*q-Qe;for(let dt=it;dt<et;++dt){const cn=dt*Z-be,Yt=b*le+w*rt+C*dt,Dt=S*(U-1-ht)+N*(P-1-cn)+k*he;for(let rn=0;rn<de;++rn){const cs=he*de+rn,yr=v[Yt+cs],Zn=B[Dt+rn];st+=yr*Zn}}}p[m*le+y*ke+x*Fe+he]=st}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const nDe={kernelName:M_,backendName:"cpu",kernelFunc:tDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rDe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=ge(r.shape),i=n.data.get(r.dataId).values,o=St([s,s],r.dtype),a=o.values;for(let c=0;c<i.length;c++)a[c*s+c]=i[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const sDe={kernelName:Q_,backendName:"cpu",kernelFunc:rDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iDe={kernelName:OS,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s}=t,{strides:i,pad:o,dilations:a}=n,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,A=l.data.get(s.dataId).values,d=s.shape.length,{batchSize:f,inHeight:h,inWidth:p,inChannels:m,outHeight:y,outWidth:x,padInfo:v,strideHeight:b,strideWidth:w,filterHeight:C,filterWidth:B,dilationHeight:S,dilationWidth:N,outShape:k}=iv(r.shape,s.shape,i,o,"NHWC",a),O=ge(k),U=k.length,P=sr(r.dtype,O);for(let W=0;W<f;++W)for(let j=0;j<y;++j){const G=j*b-v.top;for(let D=0;D<x;++D){const M=D*w-v.left;for(let q=0;q<m;++q){let Z=Number.MIN_SAFE_INTEGER;for(let ue=0;ue<C;++ue){const de=G+ue*S;if(de>=0&&de<h)for(let le=0;le<B;++le){const he=M+le*N;if(he>=0&&he<p){const ke=ll([W,de,he,q],u,ot(r.shape)),Qe=ll([ue,le,q],d,ot(s.shape)),xe=c[ke]+A[Qe];xe>Z&&(Z=xe)}}}const te=ll([W,j,D,q],U,ot(k));P[te]=Z}}}return{dataId:l.write(lf(P,r.dtype),k,r.dtype),shape:k,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oDe={kernelName:Ck,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=Ro(r.shape,c.data.get(r.dataId).values),A=Ro(s.shape,c.data.get(s.dataId).values),{batchSize:d,inHeight:f,inWidth:h,inChannels:p,outHeight:m,outWidth:y,padInfo:x,strideHeight:v,strideWidth:b,filterHeight:w,filterWidth:C,dilationHeight:B,dilationWidth:S,outShape:N}=iv(r.shape,s.shape,o,a,"NHWC",l);L(i.rank===N.length,()=>`Error in ${Ck}, dy must have the same rank as output ${N.length}, but got ${i.rank}`);const k=Ro(N,c.data.get(i.dataId).values),O=pK(s.shape,s.dtype);for(let P=0;P<d;++P)for(let V=0;V<m;++V){const W=V*v-x.top;for(let j=0;j<y;++j){const G=j*b-x.left;for(let D=0;D<p;++D){let M=Number.MIN_SAFE_INTEGER,q=0,Z=0;for(let te=0;te<w;++te){const ue=W+te*B;if(ue>=0&&ue<f)for(let de=0;de<C;++de){const le=G+de*S;if(le>=0&&le<h){const he=u[P][ue][le][D]+A[te][de][D];he>M&&(M=he,q=te,Z=de)}}}O[q][Z][D]+=k[P][V][j][D]}}}return{dataId:c.write(lf(O,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aDe={kernelName:wk,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=Ro(r.shape,c.data.get(r.dataId).values),A=Ro(s.shape,c.data.get(s.dataId).values),{batchSize:d,inHeight:f,inWidth:h,inChannels:p,outHeight:m,outWidth:y,padInfo:x,strideHeight:v,strideWidth:b,filterHeight:w,filterWidth:C,dilationHeight:B,dilationWidth:S,outShape:N}=iv(r.shape,s.shape,o,a,"NHWC",l);L(i.rank===N.length,()=>`Error in ${wk}, dy must have the same rank as output ${N.length}, but got ${i.rank}`);const k=Ro(N,c.data.get(i.dataId).values),O=pK(r.shape,r.dtype);for(let P=0;P<d;++P)for(let V=0;V<m;++V){const W=V*v-x.top;for(let j=0;j<y;++j){const G=j*b-x.left;for(let D=0;D<p;++D){let M=Number.MIN_SAFE_INTEGER,q=W<0?0:W,Z=G<0?0:G;for(let te=0;te<w;++te){const ue=W+te*B;if(ue>=0&&ue<f)for(let de=0;de<C;++de){const le=G+de*S;if(le>=0&&le<h){const he=u[P][ue][le][D]+A[te][de][D];he>M&&(M=he,q=ue,Z=le)}}}O[P][q][Z][D]+=k[P][V][j][D]}}}return{dataId:c.write(lf(O,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lDe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s}=e,{canvas:i,options:o}=r,{contextOptions:a,imageOptions:l}=o||{},c=(l==null?void 0:l.alpha)||1,u=(a==null?void 0:a.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const A=i.getContext(u,(a==null?void 0:a.contextAttributes)||{});if(A==null)throw new Error(`Could not get the context with ${u} type.`);const[d,f]=s.shape.slice(0,2),h=s.shape.length===2?1:s.shape[2],p=n.data.get(s.dataId).values,m=s.dtype==="float32"?255:1,y=new Uint8ClampedArray(f*d*4);for(let v=0;v<d*f;++v){const b=[0,0,0,255*c];for(let C=0;C<h;C++){const B=p[v*h+C];if(s.dtype==="float32"){if(B<0||B>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${B}.`)}else if(s.dtype==="int32"&&(B<0||B>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${B}.`);h===1?(b[0]=B*m,b[1]=B*m,b[2]=B*m):b[C]=B*m}const w=v*4;y[w+0]=Math.round(b[0]),y[w+1]=Math.round(b[1]),y[w+2]=Math.round(b[2]),y[w+3]=Math.round(b[3])}i.width=f,i.height=d;const x=new ImageData(y,f,d);return A.putImageData(x,0,0),s}const cDe={kernelName:R1e,backendName:"cpu",kernelFunc:lDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cv(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ze(s,"sum");let a;s.dtype==="bool"?a=Zu({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):a=ml({inputs:{x:s},backend:n});const l=a.shape.length,c=kt(i,a.shape),u=Hn(c,l);let A=c,d=a;u!=null&&(d=oi({inputs:{x:a},backend:n,attrs:{perm:u}}),A=ar(A.length,l)),is("sum",A,d.shape.length);const[f,h]=Vr(d.shape,A),p=_i(d.dtype,"int32");let m=C2(n,f,p);const y=ge(h),x=n.data.get(m.dataId).values,v=n.data.get(d.dataId).values;for(let b=0;b<x.length;++b){const w=b*y;let C=0;for(let B=0;B<y;++B)C+=v[w+B];x[b]=C}if(o){const b=or(m.shape,c),w=m;m=vn({inputs:{x:m},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(a),u!=null&&n.disposeIntermediateTensorInfo(d),m}const uDe={kernelName:fB,backendName:"cpu",kernelFunc:Cv};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ADe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:o,summedDims:a,idDims:l}=zD(s,i.length);WD(o.length,l,i);const{path:c,steps:u}=GD(a,l),A=u.length;let d=null,f=o.length;const h=[];for(let p=0;p<A;++p){for(const m of u[p]){const{permutationIndices:y,expandDims:x}=VD(f,l[m]);let v;KD(y)?v=i[m]:(v=oi({inputs:{x:i[m]},backend:n,attrs:{perm:y}}),h.push(v));const b=v.shape.slice();for(let w=0;w<x.length;++w)b.splice(x[w],0,1);_t(v.shape,b)||(v=vn({inputs:{x:v},backend:n,attrs:{shape:b}}),h.push(v)),d===null?d=v:(d=i3({inputs:{a:v,b:d},backend:n}),h.push(d))}p<A-1&&(c[p]>=0&&(d=Cv({inputs:{x:d},backend:n,attrs:{axis:c[p]-(o.length-f),keepDims:!1}}),h.push(d)),f--)}for(const p of h)p!==d&&n.disposeIntermediateTensorInfo(p);return d}const dDe={kernelName:H_,backendName:"cpu",kernelFunc:ADe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fDe(t){const{inputs:e,backend:n}=t,{dy:r,y:s}=e;Ze([r,s],"eluGrad");const i=new Float32Array(ge(s.shape)),o=n.data.get(s.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const c=o[l];c>=0?i[l]=a[l]:i[l]=a[l]*(c+1)}return n.makeTensorInfo(s.shape,"float32",i)}const hDe={kernelName:z_,backendName:"cpu",kernelFunc:fDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pDe=PD,mDe=UD,gDe=LD,yDe=jD,xDe=MD,vDe=QD,bDe=nn(Cx,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+pDe*n);return e*(1-((((vDe*r+xDe)*r+yDe)*r+gDe)*r+mDe)*r*Math.exp(-n*n))}),wDe={kernelName:Cx,backendName:"cpu",kernelFunc:bDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N2(t){const{inputs:e,backend:n,attrs:r}=t,{input:s}=e,{dim:i}=r,o=s.shape.length,a=s.shape.slice();let l=i;return i<0&&(L(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),a.splice(l,0,1),vn({inputs:{x:s},backend:n,attrs:{shape:a}})}const CDe={kernelName:RS,backendName:"cpu",kernelFunc:N2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SDe=cr((t,e)=>t/e),ER=$r(bx,SDe),dT={kernelName:bx,backendName:"cpu",kernelFunc:ER};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oee(t,e,n){const r=t.shape,s=r[0],i=r[1],o=n.data.get(t.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,c=[s,i],u=ge(c),A=ns("float32",u),d=ns("float32",u);for(let m=0;m<s;m++){const y=Yd({inputs:{x:a},backend:n,attrs:{begin:[m,0],size:[1,i]}}),x=Yd({inputs:{x:l},backend:n,attrs:{begin:[m,0],size:[1,i]}}),v=vi({inputs:{real:y,imag:x},backend:n}),{real:b,imag:w}=BDe(v,e,n),C=pc(b,w);for(let B=0;B<i;B++){const S=HD(C,B);A[m*i+B]=S.real,d[m*i+B]=S.imag}n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v)}const f=n.makeTensorInfo(c,"float32",A),h=n.makeTensorInfo(c,"float32",d),p=vi({inputs:{real:f,imag:h},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}function BDe(t,e,n){const r=ge(t.shape),s=n.data.get(t.dataId),i=n.data.get(s.complexTensorInfos.real.dataId).values,o=n.data.get(s.complexTensorInfos.imag.dataId).values;if(NDe(r)){const a=fT(i,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",a.real),u=n.makeTensorInfo(l,"float32",a.imag),A=n.makeTensorInfo([],"float32",oA(r,"float32")),d=ml({inputs:{x:A},backend:n}),f=dT.kernelFunc({inputs:{a:c,b:A},backend:n}),h=dT.kernelFunc({inputs:{a:u,b:d},backend:n}),p=n.data.get(f.dataId).values,m=n.data.get(h.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),{real:p,imag:m}}return a}else{const a=pc(i,o),l=EDe(a,r,e);return Rq(l)}}function NDe(t){return(t&t-1)===0}function fT(t,e,n,r,s){if(n===1)return{real:t,imag:e};const i=pc(t,e),o=n/2,a=Pq(i),l=a.real,c=a.imag,u=[l.length],A=s.makeTensorInfo(u,"float32",l),d=s.makeTensorInfo(u,"float32",c),f=vi({inputs:{real:A,imag:d},backend:s}),h=Uq(i),p=h.real,m=h.imag,y=[p.length],x=s.makeTensorInfo(y,"float32",p),v=s.makeTensorInfo(y,"float32",m),b=vi({inputs:{real:x,imag:v},backend:s}),w=fT(l,c,o,r,s),C=w.real,B=w.imag,S=[C.length],N=s.makeTensorInfo(S,"float32",C),k=s.makeTensorInfo(S,"float32",B),O=vi({inputs:{real:N,imag:k},backend:s}),U=fT(p,m,o,r,s),P=U.real,V=U.imag,W=[P.length],j=s.makeTensorInfo(W,"float32",P),G=s.makeTensorInfo(W,"float32",V),D=vi({inputs:{real:j,imag:G},backend:s}),M=jq(n,r),q=[M.real.length],Z=s.makeTensorInfo(q,"float32",M.real),te=s.makeTensorInfo(q,"float32",M.imag),ue=vi({inputs:{real:Z,imag:te},backend:s}),de=i3({inputs:{a:ue,b:D},backend:s}),le=up({inputs:{a:O,b:de},backend:s}),he=BR({inputs:{a:O,b:de},backend:s}),ke=qd({inputs:{input:le},backend:s}),Qe=qd({inputs:{input:he},backend:s}),xe=Ap({inputs:{input:le},backend:s}),$e=Ap({inputs:{input:he},backend:s}),Fe=dp({inputs:[ke,Qe],backend:s,attrs:{axis:0}}),be=dp({inputs:[xe,$e],backend:s,attrs:{axis:0}}),it=s.data.get(Fe.dataId).values,et=s.data.get(be.dataId).values;return s.disposeIntermediateTensorInfo(A),s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(x),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(b),s.disposeIntermediateTensorInfo(N),s.disposeIntermediateTensorInfo(k),s.disposeIntermediateTensorInfo(O),s.disposeIntermediateTensorInfo(j),s.disposeIntermediateTensorInfo(G),s.disposeIntermediateTensorInfo(D),s.disposeIntermediateTensorInfo(Z),s.disposeIntermediateTensorInfo(te),s.disposeIntermediateTensorInfo(ue),s.disposeIntermediateTensorInfo(de),s.disposeIntermediateTensorInfo(le),s.disposeIntermediateTensorInfo(he),s.disposeIntermediateTensorInfo(ke),s.disposeIntermediateTensorInfo(xe),s.disposeIntermediateTensorInfo(Qe),s.disposeIntermediateTensorInfo($e),s.disposeIntermediateTensorInfo(Fe),s.disposeIntermediateTensorInfo(be),{real:it,imag:et}}function EDe(t,e,n){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let i=0,o=0;for(let a=0;a<e;a++){const l=Mq(s*a,e,n),c=HD(t,a);i+=c.real*l.real-c.imag*l.imag,o+=c.real*l.imag+c.imag*l.real}n&&(i/=e,o/=e),Lq(r,i,o,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IDe(t){const{inputs:e,backend:n}=t,{input:r}=e,s=ge(r.shape),i=r.shape[r.shape.length-1],o=s/i,a=vn({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=Oee(a,!1,n),c=vn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const kDe={kernelName:V_,backendName:"cpu",kernelFunc:IDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IR(t){const{backend:e,attrs:n}=t,{shape:r,value:s,dtype:i}=n,o=i||Jp(s),a=sr(o,ge(r));return FDe(a,s,o),e.makeTensorInfo(r,o,a)}const TDe={kernelName:W_,backendName:"cpu",kernelFunc:IR};function FDe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $De={kernelName:G_,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,s=n,i=ns(r.dtype,ge(r.shape)),[o,a,l,c]=r.shape,u=s.data.get(r.dataId).values;for(let d=0;d<o;d++){const f=d*l*a*c;for(let h=0;h<a;h++){const p=h*(l*c);for(let m=0;m<l;m++){const y=m*c;for(let x=0;x<c;x++){const v=Math.round(l-m-1),b=f+p+y+x;let w=u[b];if(v>=0&&v<l){const C=v*c,B=f+p+C+x;w=u[B]}i[b]=w}}}}return{dataId:s.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _De(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:A,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=r;let p=$ee({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:A,dimRoundingMode:d}});if(o){const m=p;if(u==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const y=vn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});p=up({inputs:{a:p,b:y},backend:n}),n.disposeIntermediateTensorInfo(y)}else p=up({inputs:{a:p,b:o},backend:n});n.disposeIntermediateTensorInfo(m)}if(f){const m=p;if(u==="NCHW"&&f==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const y=vn({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});p=B2(n,p,f,y,h),n.disposeIntermediateTensorInfo(y)}else p=B2(n,p,f,a,h);n.disposeIntermediateTensorInfo(m)}return p}const ODe={kernelName:n2,backendName:"cpu",kernelFunc:_De};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:A,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=r;let p=_ee({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:A,dimRoundingMode:d}});if(o){const m=p;p=up({inputs:{a:p,b:o},backend:n}),n.disposeIntermediateTensorInfo(m)}if(f){const m=p;p=B2(n,p,f,a,h),n.disposeIntermediateTensorInfo(m)}return p}const RDe={kernelName:r2,backendName:"cpu",kernelFunc:DDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PDe(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=ge(r.shape),o=s.shape,a=o[o.length-1],[l,c,u,A]=ND(r,s);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const d=n.data.get(s.dataId).values,f=n.bufferSync(r),h=zZ(d,f,r.dtype,c,a,u,A,r.shape,i);return n.makeTensorInfo(l,r.dtype,h.values)}const UDe={kernelName:K_,backendName:"cpu",kernelFunc:PDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:o,batchDims:a}=r;Ze([s,i],"gatherV2");const l=kt(o,s.shape)[0],c=n.data.get(i.dataId).values,u=s.shape[l];for(let b=0;b<c.length;++b){const w=c[b];L(w<=u-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${u-1}]`)}let A=a;a==null&&(A=0);const d=ge(i.shape),f=qD(s,i,l,A),h=vn({inputs:{x:s},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),p=vn({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,d/f.batchSize]}}),m=[f.batchSize,f.outerSize,d/f.batchSize,f.sliceSize],y=n.bufferSync(p),x=n.bufferSync(h),v=VZ(x,y,m);return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.makeTensorInfo(f.outputShape,v.dtype,v.values)}const jDe={kernelName:US,backendName:"cpu",kernelFunc:LDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MDe(t){const{inputs:e,backend:n}=t,{input:r}=e,s=ge(r.shape),i=r.shape[r.shape.length-1],o=s/i,a=vn({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=Oee(a,!0,n),c=vn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const QDe={kernelName:X_,backendName:"cpu",kernelFunc:MDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HDe=nn(Tx,t=>Number.isFinite(t)?1:0,"bool"),zDe={kernelName:Tx,backendName:"cpu",kernelFunc:HDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VDe=nn(Fx,t=>Math.abs(t)===1/0?1:0,"bool"),WDe={kernelName:Fx,backendName:"cpu",kernelFunc:VDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GDe=nn($x,t=>Number.isNaN(t)?1:0,"bool"),KDe={kernelName:$x,backendName:"cpu",kernelFunc:GDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XDe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=qZ(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}const qDe={kernelName:Y_,backendName:"cpu",kernelFunc:XDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YDe=nn(Ox,t=>Math.log1p(t)),JDe={kernelName:Ox,backendName:"cpu",kernelFunc:YDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZDe=cr((t,e)=>t&&e),eRe=$r(HS,ZDe,null,"bool"),tRe={kernelName:HS,backendName:"cpu",kernelFunc:eRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nRe=nn(zS,t=>t?0:1,"bool"),rRe={kernelName:zS,backendName:"cpu",kernelFunc:nRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sRe=cr((t,e)=>t||e),iRe=$r(VS,sRe,null,"bool"),oRe={kernelName:VS,backendName:"cpu",kernelFunc:iRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:l}=r;Ze(s,"LRN");const c=s.shape[3],u=c-1,A=n.data.get(s.dataId).values,d=ge(s.shape),f=new Float32Array(d);function h(p){const m=p%c;let y=p-m+Math.max(0,m-i);const x=p-m+Math.min(m+i,u);let v=0;for(;y<=x;y++){const b=A[y];v+=b*b}return v}for(let p=0;p<d;p++){const m=h(p),y=A[p]*Math.pow(o+a*m,-l);f[p]=y}return n.makeTensorInfo(s.shape,s.dtype,f)}const lRe={kernelName:WS,backendName:"cpu",kernelFunc:aRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r;Ze(o,"LRNGrad");const A=ge(o.shape),d=o.shape[3],f=n.data.get(o.dataId).values,h=n.data.get(s.dataId).values,p=n.data.get(i.dataId).values,m=new Float32Array(A),y=A;for(let x=0;x<y;x++){const v=x%d,b=x-v+Math.max(0,v-a),w=x-v+Math.min(d,v+a+1);let C=0;for(let B=b;B<w;B++)C+=Math.pow(h[B],2);C=c*C+l;for(let B=b;B<w;B++){let S=-2*c*u*h[B]*p[x]/C;x===B&&(S+=Math.pow(C,-u)),S*=f[x],m[B]+=S}}return n.makeTensorInfo(o.shape,s.dtype,m)}const uRe={kernelName:J_,backendName:"cpu",kernelFunc:cRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dee(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:o}=r,a=n;let l=s.shape;const c=l.length,u=kt(i,l);let A=u;const d=Hn(A,c);let f=a.data.get(s.dataId).values;if(d!=null){const b=new Array(c);for(let w=0;w<b.length;w++)b[w]=l[d[w]];f=CR(f,l,s.dtype,d,b),A=ar(A.length,c),l=b}Ze(s,"max"),is("max",A,c);const[h,p]=Vr(l,A),m=ge(p),y=JZ(f,m,h,s.dtype),x=a.write(y,h,s.dtype);let v=h;return o&&(v=or(h,u)),{dataId:x,shape:v,dtype:s.dtype}}const ARe={kernelName:GS,backendName:"cpu",kernelFunc:Dee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Ze(s,"maxPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;L(ss(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Go(s.shape,i,o,c,a,l);let A;if(u.filterWidth===1&&u.filterHeight===1&&_t(u.inShape,u.outShape))A=ml({inputs:{x:s},backend:n});else{const d=n.data.get(s.dataId).values,f=ot(s.shape),h=NR(d,s.shape,s.dtype,f,u,"max");A=n.makeTensorInfo(u.outShape,s.dtype,h.values)}return A}const fRe={kernelName:KS,backendName:"cpu",kernelFunc:dRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;Ze(s,"maxPool3d");const u=Nc(s.shape,i,o,1,a,l,c),A=n.data.get(s.dataId).values,d=Fee(A,s.shape,s.dtype,ot(s.shape),u,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}const pRe={kernelName:XS,backendName:"cpu",kernelFunc:hRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mRe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;Ze([s,i],"maxPool3DGrad");const u=Nc(i.shape,o,a,1,l,c),A=n.bufferSync(i),d=sOe(A,u),f=u.strideDepth,h=u.strideHeight,p=u.strideWidth,m=u.dilationDepth,y=u.dilationHeight,x=u.dilationWidth,v=u.effectiveFilterDepth,b=u.effectiveFilterHeight,w=u.effectiveFilterWidth,C=v-1-u.padInfo.front,B=w-1-u.padInfo.left,S=b-1-u.padInfo.top,N=St(i.shape,"float32"),k=n.bufferSync(s);for(let O=0;O<u.batchSize;++O)for(let U=0;U<u.inChannels;++U)for(let P=0;P<u.inDepth;++P)for(let V=0;V<u.inHeight;++V)for(let W=0;W<u.inWidth;++W){const j=P-C,G=V-S,D=W-B;let M=0;for(let q=0;q<v;q+=m){const Z=(j+q)/f;if(!(Z<0||Z>=u.outDepth||Math.floor(Z)!==Z))for(let te=0;te<b;te+=y){const ue=(G+te)/h;if(!(ue<0||ue>=u.outHeight||Math.floor(ue)!==ue))for(let de=0;de<w;de+=x){const le=(D+de)/p;if(le<0||le>=u.outWidth||Math.floor(le)!==le)continue;const he=v*b*w-1-d.get(O,Z,ue,le,U),ke=q*b*w+te*w+de,Qe=he===ke?1:0;if(Qe===0)continue;const xe=k.get(O,Z,ue,le,U);M+=xe*Qe}}}N.set(M,O,P,V,W,U)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}const gRe={kernelName:eO,backendName:"cpu",kernelFunc:mRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yRe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;Ze([i,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:A}=r,d=Go(a.shape,l,c,1,u,A),f=n.data.get(a.dataId).values,h=St(d.outShape,a.dtype,Tee(f,a.shape,a.dtype,d).values),p=d.strideHeight,m=d.strideWidth,y=d.dilationHeight,x=d.dilationWidth,v=d.effectiveFilterHeight,b=d.effectiveFilterWidth,w=b-1-d.padInfo.left,C=v-1-d.padInfo.top,B=St(a.shape,"float32"),S=n.data.get(s.dataId).values,N=St(s.shape,"float32",S);for(let k=0;k<d.batchSize;++k)for(let O=0;O<d.inChannels;++O)for(let U=0;U<d.inHeight;++U)for(let P=0;P<d.inWidth;++P){const V=U-C,W=P-w;let j=0;for(let G=0;G<v;G+=y){const D=(V+G)/p;if(!(D<0||D>=d.outHeight||Math.floor(D)!==D))for(let M=0;M<b;M+=x){const q=(W+M)/m;if(q<0||q>=d.outWidth||Math.floor(q)!==q)continue;const Z=v*b-1-h.get(k,D,q,O),te=G*b+M,ue=Z===te?1:0;if(ue===0)continue;const de=N.get(k,D,q,O);j+=de*ue}}B.set(j,k,U,P,O)}return n.makeTensorInfo(B.shape,B.dtype,B.values)}const xRe={kernelName:Z_,backendName:"cpu",kernelFunc:yRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vRe(t,e,n,r,s){const i=ot(e),o=NR(t,e,n,i,s,"max"),a=Tee(t,e,n,s,!0,r);return[o.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bRe={kernelName:tO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:a}=e,l=n;Ze(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=Go(r.shape,s,i,[1,1],o),[A,d]=vRe(c,r.shape,r.dtype,a,u),f=l.write(A,u.outShape,r.dtype),h=l.write(d,u.outShape,r.dtype);return[{dataId:f,shape:u.outShape,dtype:r.dtype},{dataId:h,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=kt(i,s.shape),c=Vr(s.shape,a)[1],u=ge(c),A=[],d=n.makeTensorInfo([],"float32",new Float32Array([u]));A.push(d);const f=Zu({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});A.push(f);const h=ER({inputs:{a:f,b:d},backend:n});A.push(h);const p=Cv({inputs:{x:h},backend:n,attrs:{axis:i,keepDims:o}});return A.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const CRe={kernelName:qS,backendName:"cpu",kernelFunc:wRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ze(s,"min");const a=kt(i,s.shape);let l=a;const c=Hn(l,s.shape.length);let u=s;c!=null&&(u=oi({inputs:{x:s},backend:n,attrs:{perm:c}}),l=ar(l.length,s.shape.length)),is("min",l,u.shape.length);const[A,d]=Vr(u.shape,l),f=ge(d),h=vs(ge(A),u.dtype),p=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){const x=y*f;let v=p[x];for(let b=0;b<f;++b){const w=p[x+b];(Number.isNaN(w)||w<v)&&(v=w)}h[y]=v}c!=null&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(A,u.dtype,h);if(o){const y=or(A,a),x=vn({inputs:{x:m},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(m),x}return m}const BRe={kernelName:YS,backendName:"cpu",kernelFunc:SRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,mode:o}=r;Ze(s,"mirrorPad");const a=i.map((v,b)=>v[0]+s.shape[b]+v[1]),l=i.map(v=>v[0]),c=i.map((v,b)=>v[0]+s.shape[b]),u=o==="reflect"?0:1,A=n.data.get(s.dataId).values,d=s.shape.length,f=ot(s.shape),h=ge(a),p=a.length,m=ot(a),y=ns(s.dtype,h);for(let v=0;v<h;v++){let b=Zp(v,p,m);for(let C=0;C<p;C++)b[C]<l[C]?b[C]=l[C]*2-b[C]-u:b[C]>=c[C]&&(b[C]=(c[C]-1)*2-b[C]+u);b=b.map((C,B)=>C-l[B]);const w=ll(b,d,f);y[v]=A[w]}return{dataId:n.write(y,a,s.dtype),shape:a,dtype:s.dtype}}const ERe={kernelName:JS,backendName:"cpu",kernelFunc:NRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IRe=cr((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),kRe=$r(Px,IRe),TRe={kernelName:Px,backendName:"cpu",kernelFunc:kRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ree(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,o=s.shape.length;let a=i;if(a===-1&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=kt([a],s.shape),c=Dee({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=or(c.shape,l),A=vn({inputs:{x:c},backend:n,attrs:{shape:u}}),d=BR({inputs:{a:s,b:A},backend:n}),f=jZ({inputs:{x:d},backend:n}),h=Cv({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),p=vn({inputs:{x:h},backend:n,attrs:{shape:u}}),m=ER({inputs:{a:f,b:p},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),m}const FRe={kernelName:mB,backendName:"cpu",kernelFunc:Ree};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Re(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r;Ze(s,"multinomial");const l=a?s:Ree({inputs:{logits:s},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],A=n.data.get(l.dataId).values,d=[c,i],f=vs(ge(d),"int32");for(let h=0;h<c;++h){const p=h*u,m=new Float32Array(u-1);m[0]=A[p];for(let v=1;v<m.length;++v)m[v]=m[v-1]+A[p+v];const y=OB.alea(o.toString()),x=h*i;for(let v=0;v<i;++v){const b=y();f[x+v]=m.length;for(let w=0;w<m.length;w++)if(b<m[w]){f[x+v]=w;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",f)}const _Re={kernelName:nO,backendName:"cpu",kernelFunc:$Re};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ORe=xD;function DRe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r;Ze(s,"NonMaxSuppression");const c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,{selectedIndices:A}=ORe(c,u,o,a,l);return n.makeTensorInfo([A.length],"int32",new Int32Array(A))}const RRe={kernelName:rO,backendName:"cpu",kernelFunc:DRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PRe=vD;function URe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;Ze(s,"NonMaxSuppressionPadded");const u=n.data.get(s.dataId).values,A=n.data.get(i.dataId).values,{selectedIndices:d,validOutputs:f}=PRe(u,A,o,a,l,c);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const LRe={kernelName:sO,backendName:"cpu",kernelFunc:URe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jRe=bD;function MRe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;Ze(s,"NonMaxSuppressionWithScore");const u=n.data.get(s.dataId).values,A=n.data.get(i.dataId).values,d=o,f=a,h=l,p=c,{selectedIndices:m,selectedScores:y}=jRe(u,A,d,f,h,p);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const QRe={kernelName:iO,backendName:"cpu",kernelFunc:MRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HRe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:o,onValue:a,offValue:l}=r;Ze(s,"oneHot");const c=ge(s.shape),u=new Float32Array(c*o);u.fill(l);const A=n.data.get(s.dataId).values;for(let d=0;d<c;++d)A[d]>=0&&A[d]<o&&(u[d*o+A[d]]=a);return n.makeTensorInfo([...s.shape,o],i,u)}const zRe={kernelName:nB,backendName:"cpu",kernelFunc:HRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=qd({inputs:{input:r},backend:n}),i=E2({inputs:{x:s},backend:n}),o=Ap({inputs:{input:r},backend:n}),a=E2({inputs:{x:o},backend:n}),l=vi({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return IR({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const VRe={kernelName:vB,backendName:"cpu",kernelFunc:E2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pee(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=qd({inputs:{input:r},backend:n}),i=Pee({inputs:{x:s},backend:n}),o=Ap({inputs:{input:r},backend:n}),a=E2({inputs:{x:o},backend:n}),l=vi({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return IR({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const WRe={kernelName:tB,backendName:"cpu",kernelFunc:Pee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uee(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return N2({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,o=e[0].dtype;e.forEach(u=>{Pi(i,u.shape,"All tensors passed to stack must have matching shapes"),L(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const A=N2({inputs:{input:u},backend:n,attrs:{dim:s}});return a.push(A),A}),c=dp({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const GRe={kernelName:rB,backendName:"cpu",kernelFunc:Uee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r;Ze(s,"pad");const a=i.map((x,v)=>x[0]+s.shape[v]+x[1]),l=i.map(x=>x[0]),c=n.data.get(s.dataId).values,u=ge(s.shape),A=s.shape.length,d=ot(s.shape),f=ge(a),h=a.length,p=ot(a),m=ns(s.dtype,f);o!==0&&m.fill(o);for(let x=0;x<u;x++){const b=Zp(x,A,d).map((C,B)=>C+l[B]),w=ll(b,h,p);m[w]=c[x]}return{dataId:n.write(m,a,s.dtype),shape:a,dtype:s.dtype}}const Lee={kernelName:sB,backendName:"cpu",kernelFunc:KRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XRe=cr((t,e)=>Math.pow(t,e)),qRe=$r(Lx,XRe),YRe={kernelName:Lx,backendName:"cpu",kernelFunc:qRe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JRe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:o}=e,{outputRaggedRank:a}=r,l=s.map(y=>n.data.get(y.dataId).values),c=s.map(y=>y.shape),u=n.data.get(i.dataId).values,A=n.data.get(o.dataId).values,[d,f,h]=see(l,c,u,i.shape,i.dtype,A,o.shape),p=d.map(y=>n.makeTensorInfo([y.length],"int32",y)),m=n.makeTensorInfo(h,i.dtype,f);return p.concat([m])}const ZRe={kernelName:oO,backendName:"cpu",kernelFunc:JRe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ePe(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=iee(o,r.shape,r.dtype,a,s.shape,l,i.shape),A=n.makeTensorInfo([c.length],"int32",c),d=n.makeTensorInfo([u.length],r.dtype,u);return[A,d]}const tPe={kernelName:aO,backendName:"cpu",kernelFunc:ePe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nPe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,A=n.data.get(o.dataId).values,d=a.map(m=>n.data.get(m.dataId).values),f=a.map(m=>m.shape),[h,p]=oee(c,s.shape,u,i.shape,i.dtype,A,o.shape,d,f,l);return n.makeTensorInfo(h,i.dtype,p)}const rPe={kernelName:lO,backendName:"cpu",kernelFunc:nPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sPe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,dtype:i,step:o}=n,a=aee(r,s,o,i);return e.makeTensorInfo([a.length],i,a)}const iPe={kernelName:cO,backendName:"cpu",kernelFunc:sPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oPe=nn(jx,t=>1/t),aPe={kernelName:jx,backendName:"cpu",kernelFunc:oPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r;Ze(s,"resizeBilinear");const l=ot(s.shape),[c,u]=a,[A,d,f,h]=s.shape,p=n.data.get(s.dataId).values,m=new Float32Array(ge([A,c,u,h])),y=[i&&c>1?d-1:d,i&&u>1?f-1:f],x=[i&&c>1?c-1:c,i&&u>1?u-1:u];let v=0;const b=y[0]/x[0],w=y[1]/x[1];for(let C=0;C<A;C++)for(let B=0;B<c;B++){let S;o?S=b*(B+.5)-.5:S=b*B;const N=Math.max(0,Math.floor(S)),k=S-N,O=Math.min(d-1,Math.ceil(S)),U=C*l[0]+N*l[1],P=C*l[0]+O*l[1];for(let V=0;V<u;V++){let W;o?W=w*(V+.5)-.5:W=w*V;const j=Math.max(0,Math.floor(W)),G=W-j,D=Math.min(f-1,Math.ceil(W)),M=U+j*l[2],q=P+j*l[2],Z=U+D*l[2],te=P+D*l[2];for(let ue=0;ue<h;ue++){const de=p[M+ue],le=p[q+ue],he=p[Z+ue],ke=p[te+ue],Qe=de+(he-de)*G,xe=le+(ke-le)*G,$e=Qe+(xe-Qe)*k;m[v++]=$e}}}return n.makeTensorInfo([A,c,u,h],"float32",m)}const cPe={kernelName:cB,backendName:"cpu",kernelFunc:lPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r;Ze([i,s],"resizeBilinearGrad");const a=ot(s.shape),[l,c,u,A]=s.shape,[,d,f]=i.shape,h=new Float32Array(l*c*u*A),p=[o&&d>1?c-1:c,o&&f>1?u-1:u],m=[o&&d>1?d-1:d,o&&f>1?f-1:f],y=p[0]/m[0],x=p[1]/m[1],v=n.data.get(i.dataId).values;let b=0;for(let w=0;w<l;w++){const C=w*a[0];for(let B=0;B<d;B++){const S=B*y,N=Math.floor(S),k=Math.min(Math.ceil(S),c-1),O=C+N*a[1],U=C+k*a[1],P=S-N,V=1-P;for(let W=0;W<f;W++){const j=W*x,G=Math.floor(j),D=Math.min(Math.ceil(j),u-1),M=j-G,q=1-M,Z=O+G*a[2],te=O+D*a[2],ue=U+G*a[2],de=U+D*a[2],le=V*q,he=V*M,ke=P*q,Qe=P*M;for(let xe=0;xe<A;xe++){const $e=v[b++];h[Z+xe]+=$e*le,h[te+xe]+=$e*he,h[ue+xe]+=$e*ke,h[de+xe]+=$e*Qe}}}}return n.makeTensorInfo([l,u,c,A],"float32",h)}const APe={kernelName:dO,backendName:"cpu",kernelFunc:uPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r;Ze(s,"resizeNearestNeighbor");const l=ot(s.shape),[c,u]=a,[A,d,f,h]=s.shape,p=n.data.get(s.dataId).values,m=new Float32Array(A*c*u*h),y=[i&&c>1?d-1:d,i&&u>1?f-1:f],x=[i&&c>1?c-1:c,i&&u>1?u-1:u],v=y[0]/x[0],b=y[1]/x[1];let w=0;for(let C=0;C<A;C++){const B=C*l[0];for(let S=0;S<c;S++){const N=o?v*(S+.5):v*S;let k=Math.min(d-1,i?Math.round(N):Math.floor(N));o&&(k=Math.max(0,k));const O=B+k*l[1];for(let U=0;U<u;U++){const P=o?b*(U+.5):b*U;let V=Math.min(f-1,i?Math.round(P):Math.floor(P));o&&(V=Math.max(0,V));const W=O+V*l[2];for(let j=0;j<h;j++){const G=p[W+j];m[w++]=G}}}}return n.makeTensorInfo([A,c,u,h],s.dtype,m)}const fPe={kernelName:lB,backendName:"cpu",kernelFunc:dPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r;Ze([i,s],"resizeNearestNeighborGrad");const a=ot(s.shape),l=ot(i.shape),[c,u,A,d]=s.shape,[,f,h]=i.shape,p=new Float32Array(c*u*A*d),m=n.data.get(i.dataId).values,y=[o&&f>1?u-1:u,o&&h>1?A-1:A],x=[o&&f>1?f-1:f,o&&h>1?h-1:h],v=y[0]/x[0],b=y[1]/x[1],w=1/v,C=1/b,B=Math.ceil(w)*2+2,S=Math.ceil(C)*2+2;for(let N=0;N<c;N++){const k=N*a[0];for(let O=0;O<u;O++){const U=k+O*a[1],P=Math.floor(O*w),V=Math.floor(P-B/2);for(let W=0;W<A;W++){const j=U+W*a[2],G=Math.floor(W*C),D=Math.floor(G-S/2);for(let M=0;M<d;M++){let q=0;for(let Z=0;Z<B;Z++){const te=Z+V;if(te<0||te>=f)continue;const ue=k+te*l[1],de=te*v,le=Math.min(u-1,o?Math.round(de):Math.floor(de));if(O===le)for(let he=0;he<S;he++){const ke=he+D;if(ke<0||ke>=h)continue;const Qe=ue+ke*l[2],xe=ke*b,$e=Math.min(A-1,o?Math.round(xe):Math.floor(xe));W===$e&&(q+=m[Qe+M])}}p[j+M]=q}}}}return n.makeTensorInfo(s.shape,s.dtype,p)}const pPe={kernelName:AO,backendName:"cpu",kernelFunc:hPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r;Ze(s,"reverse");const o=s.shape.length,a=kt(i,s.shape);if(o===0)return ml({inputs:{x:s},backend:n});const l=new Er(s.shape,s.dtype),c=n.bufferSync(s);for(let u=0;u<l.size;u++){const A=l.indexToLoc(u),d=A.slice();a.forEach(f=>d[f]=s.shape[f]-1-d[f]),l.set(c.get(...d),...A)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const gPe={kernelName:uB,backendName:"cpu",kernelFunc:mPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yPe={kernelName:kO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,l=ns(r.dtype,ge(r.shape)),[c,u,A,d]=r.shape,[f,h]=OD(o,u,A),p=255,m=Math.sin(s),y=Math.cos(s),x=a.data.get(r.dataId).values;for(let b=0;b<c;b++){const w=b*A*u*d;for(let C=0;C<u;C++){const B=C*(A*d);for(let S=0;S<A;S++){const N=S*d;for(let k=0;k<d;k++){const O=[c,C,S,k],U=O[2],P=O[1];let V=(U-f)*y-(P-h)*m,W=(U-f)*m+(P-h)*y;V=Math.round(V+f),W=Math.round(W+h);let j=i;if(typeof i!="number"&&(k===3?j=p:j=i[k]),V>=0&&V<A&&W>=0&&W<u){const D=W*(A*d),M=V*d,q=w+D+M+k;j=x[q]}const G=w+B+N+k;l[G]=j}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xPe=nn(Hx,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),vPe={kernelName:Hx,backendName:"cpu",kernelFunc:xPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bPe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:A}=df(i,s,o),d=!0,f=n.bufferSync(s),h=n.bufferSync(i),p=id(f,h,o,A,c,l,a,u,0,d);return n.makeTensorInfo(o,p.dtype,p.values)}const wPe={kernelName:fO,backendName:"cpu",kernelFunc:bPe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CPe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<e?n=s+1:r=s;return r}function SPe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<=e?n=s+1:r=s;return r}function BPe(t,e,n,r,s,i){const o=sr("int32",n*s);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),c=a*s;for(let u=0;u<s;++u)o[c+u]=i==="left"?CPe(l,e[u+c]):SPe(l,e[u+c])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NPe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:o}=r,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,c=BPe(a,l,s.shape[0],s.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",c)}const EPe={kernelName:pO,backendName:"cpu",kernelFunc:NPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IPe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e;Ze([r,s,i],"select");const o=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=_i(s.dtype,i.dtype),A=vs(ge(s.shape),u);let d=0;const f=o===0||o>1||s.shape.length===1?1:ge(s.shape.slice(1));for(let h=0;h<a.length;h++)for(let p=0;p<f;p++)a[h]===1?A[d++]=l[h]:A[d++]=c[h];return n.makeTensorInfo(s.shape,u,A)}const kPe={kernelName:AB,backendName:"cpu",kernelFunc:IPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TPe=WB,FPe=GB,$Pe=nn(Vx,t=>t>=0?FPe*t:TPe*(Math.exp(t)-1)),_Pe={kernelName:Vx,backendName:"cpu",kernelFunc:$Pe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OPe=nn(Kx,t=>t<0?-1:t>0?1:0),DPe={kernelName:Kx,backendName:"cpu",kernelFunc:OPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RPe=nn(Wx,t=>Math.sin(t)),PPe={kernelName:Wx,backendName:"cpu",kernelFunc:RPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UPe=nn(Gx,t=>Math.sinh(t)),LPe={kernelName:Gx,backendName:"cpu",kernelFunc:UPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jPe=11920928955078125e-23,S5=Math.log(jPe)+2,MPe=nn(qx,t=>{const e=t>-S5,n=t<S5,r=Math.exp(t);let s;return n?s=r:e?s=t:s=Math.log(1+r),s}),QPe={kernelName:qx,backendName:"cpu",kernelFunc:MPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:o}=r;Ze([s],"spaceToBatchND");const a=ge(i),l=[[0,0]];l.push(...o);for(let C=1+i.length;C<s.shape.length;++C)l.push([0,0]);const c=Lee.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),u=dv(c.shape,i,a,!1),A=fv(u.length,i.length,!1),d=hv(c.shape,i,a,!1),p=vn({inputs:{x:c},backend:n,attrs:{shape:u}}),x=oi({inputs:{x:p},backend:n,attrs:{perm:A}}),w=vn({inputs:{x},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(x),w}const zPe={kernelName:hB,backendName:"cpu",kernelFunc:HPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VPe(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values[0],[A,d,f,h,p]=Aee(a,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(d,r.dtype,A),n.makeTensorInfo([d[0]],s.dtype,f),n.makeTensorInfo([h.length],"bool",new Uint8Array(h.map(m=>Number(m)))),n.makeTensorInfo([p.length],r.dtype,new Int32Array(p))]}const WPe={kernelName:mO,backendName:"cpu",kernelFunc:VPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GPe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.data.get(s.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[c,u,A]=dee(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([A.length],i.dtype,new Int32Array(A))]}const KPe={kernelName:gO,backendName:"cpu",kernelFunc:GPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XPe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=SR(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const qPe={kernelName:yO,backendName:"cpu",kernelFunc:XPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YPe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=SR(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const JPe={kernelName:xO,backendName:"cpu",kernelFunc:YPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZPe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:A,outputSize:d}=df(i,s,a),f=!1,h=n.bufferSync(s);let p;switch(i.dtype){case"bool":{const m=n.bufferSync(i),y=!!n.data.get(o.dataId).values[0];p=id(h,m,a,d,u,c,l,A,y,f);break}case"float32":{const m=n.bufferSync(i),y=n.data.get(o.dataId).values[0];p=id(h,m,a,d,u,c,l,A,y,f);break}case"int32":{const m=n.bufferSync(i),y=n.data.get(o.dataId).values[0];p=id(h,m,a,d,u,c,l,A,y,f);break}case"string":{const m=n.bufferSync(i),y=Hu(n.data.get(o.dataId).values[0]);p=id(h,m,a,d,u,c,l,A,y,f);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(a,p.dtype,p.values)}const eUe={kernelName:vO,backendName:"cpu",kernelFunc:ZPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:o}=r,a=kt(o,s.shape)[0],l=XD(s,i,a),c=new Array(s.shape.length).fill(0),u=s.shape.slice();return l.map(A=>{const d=[...u];d[a]=A;const f=Yd({inputs:{x:s},backend:n,attrs:{begin:c,size:d}});return c[a]+=A,f})}const nUe={kernelName:pB,backendName:"cpu",kernelFunc:tUe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rUe={kernelName:bO,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Ze(n,"square");const s=r.data.get(n.dataId).values,i=new Float32Array(s.length);for(let a=0;a<s.length;++a){const l=s[a];i[a]=l*l}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sUe=nn(rv,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),iUe={kernelName:rv,backendName:"cpu",kernelFunc:sUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:A,shrinkAxisMask:d}=r;Ze(s,"stridedSlice");const{finalShapeSparse:f,finalShape:h,isIdentity:p,sliceDim0:m,isSimpleSlice:y,begin:x,end:v,strides:b}=FD(s.shape,i,o,a,l,c,u,A,d);let w;if(p)w=vn({inputs:{x:s},backend:n,attrs:{shape:h}});else if(m||y){L(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const C=ID(x,v,b),B=Yd({inputs:{x:s},backend:n,attrs:{begin:x,size:C}});w=vn({inputs:{x:B},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(B)}else{const C=n.bufferSync(s),B=pee(f,C,b,x);w=n.makeTensorInfo(h,B.dtype,B.values)}return w}const aUe={kernelName:wO,backendName:"cpu",kernelFunc:oUe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lUe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:A}=e,d=n.data.get(u.dataId).values,f=n.data.get(A.dataId).values,[h,p]=mee(d,f,s,i,o,a,l,c);return[n.makeTensorInfo([h.length],"string",h),n.makeTensorInfo(A.shape,"int32",p)]}const cUe={kernelName:CO,backendName:"cpu",kernelFunc:lUe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uUe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],[c,u,A]=gee(a,l,s),d=u.length;return[n.makeTensorInfo([d,2],"int32",c),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(A))]}const AUe={kernelName:SO,backendName:"cpu",kernelFunc:uUe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dUe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(i.dataId).values,a=yee(o,s);return n.makeTensorInfo(i.shape,"int32",a)}const fUe={kernelName:BO,backendName:"cpu",kernelFunc:dUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hUe=nn(ev,t=>Math.tan(t)),pUe={kernelName:ev,backendName:"cpu",kernelFunc:hUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mUe=nn(tv,t=>Math.tanh(t)),gUe={kernelName:tv,backendName:"cpu",kernelFunc:mUe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yUe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:s,updates:i}=e,{sliceRank:o,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=df(i,s,r.shape),A=!1,d=n.bufferSync(s),f=n.bufferSync(i),h=n.bufferSync(r),p=id(d,f,r.shape,u,l,a,o,c,h,A);return n.makeTensorInfo(r.shape,p.dtype,p.values)}const xUe={kernelName:hO,backendName:"cpu",kernelFunc:yUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;Ze(s,"tile");const o=vee(n.bufferSync(s),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const bUe={kernelName:nv,backendName:"cpu",kernelFunc:vUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r;Ze(s,"topk");const a=n.data.get(s.dataId).values,[l,c]=wee(a,s.shape,s.dtype,i,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const CUe={kernelName:NO,backendName:"cpu",kernelFunc:wUe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SUe(t){const{inputs:e,attrs:n,backend:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=n,[u,A,d,f]=s.shape,[h,p]=c??[A,d],m=[u,h,p,f],y=ot(s.shape),x=y[0],v=y[1],b=y[2],w=ot(m),C=w[0],B=w[1],S=w[2],N=ns(s.dtype,ge(m));N.fill(l);const k=r.data.get(s.dataId).values,O=r.data.get(i.dataId).values;for(let P=0;P<u;++P){const V=i.shape[0]===1?O:O.subarray(P*8,P*8+8);for(let W=0;W<h;++W)for(let j=0;j<p;++j)for(let G=0;G<f;++G){let D;const M=V[6]*j+V[7]*W+1;if(M===0)continue;const q=(V[0]*j+V[1]*W+V[2])/M,Z=(V[3]*j+V[4]*W+V[5])/M,te=B5(q,d,a),ue=B5(Z,A,a);switch(o){case"nearest":D=TUe(k,A,d,x,v,b,P,ue,te,G,l);break;case"bilinear":D=FUe(k,A,d,x,v,b,P,ue,te,G,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const de=P*C+W*B+j*S+G;N[de]=D}return r.makeTensorInfo(m,s.dtype,N)}return{dataId:r.write(N,m,s.dtype),shape:s.shape,dtype:s.dtype}}const BUe={kernelName:EO,backendName:"cpu",kernelFunc:SUe};function B5(t,e,n){switch(n){case"reflect":return NUe(t,e);case"wrap":return EUe(t,e);case"nearest":return kUe(t,e);case"constant":default:return IUe(t)}}function NUe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Ud(0,n,e-1)}function EUe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Ud(0,n,e-1)}function IUe(t,e){return t}function kUe(t,e){return Ud(0,t,e-1)}function jg(t,e,n,r,s,i,o,a,l,c,u){const A=o*r+a*s+l*i+c;return 0<=a&&a<e&&0<=l&&l<n?t[A]:u}function TUe(t,e,n,r,s,i,o,a,l,c,u){const A=Math.round(a),d=Math.round(l);return jg(t,e,n,r,s,i,o,A,d,c,u)}function FUe(t,e,n,r,s,i,o,a,l,c,u){const A=Math.floor(a),d=Math.floor(l),f=A+1,h=d+1,p=(h-l)*jg(t,e,n,r,s,i,o,A,d,c,u)+(l-d)*jg(t,e,n,r,s,i,o,A,h,c,u),m=(h-l)*jg(t,e,n,r,s,i,o,f,d,c,u)+(l-d)*jg(t,e,n,r,s,i,o,f,h,c,u);return(f-a)*p+(a-A)*m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ue(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;Ze(i,"unique");const o=r.data.get(i.dataId).values,{outputValues:a,outputShape:l,indices:c}=Cee(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const _Ue={kernelName:IO,backendName:"cpu",kernelFunc:$Ue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OUe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s.shape.length,a=s.shape[i],l=new Array(o-1);let c=0;for(let f=0;f<o;f++)f!==i&&(l[c++]=s.shape[f]);const u=new Array(o).fill(0),A=s.shape.slice();A[i]=1;const d=new Array(a);for(let f=0;f<d.length;f++){u[i]=f;const h=Yd({inputs:{x:s},backend:n,attrs:{begin:u,size:A}});d[f]=vn({inputs:{x:h},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(h)}return d}const DUe={kernelName:yB,backendName:"cpu",kernelFunc:OUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:o}=r;Ze(s,"unsortedSegmentSum");const a=s.shape.length,l=i.shape.length,c=[],u=[],A=a-l;let d=i;for(let h=0;h<A;++h){const p=N2({inputs:{input:d},backend:n,attrs:{dim:h+1}});d=p,u.push(p)}for(let h=0;h<o;++h){const p=oA(h,"int32"),m=n.makeTensorInfo([],"int32",p),y=UZ({inputs:{a:m,b:d},backend:n}),x=Zu({inputs:{x:y},backend:n,attrs:{dtype:"float32"}}),v=i3({inputs:{a:x,b:s},backend:n}),b=Cv({inputs:{x:v},backend:n,attrs:{axis:0,keepDims:!1}});c.push(b),u.push(m),u.push(y),u.push(x),u.push(v),u.push(b)}const f=Uee({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(h=>n.disposeIntermediateTensorInfo(h)),f}const PUe={kernelName:xB,backendName:"cpu",kernelFunc:RUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UUe=[$_e,d$e,O_e,R_e,y$e,U_e,j_e,Q_e,z_e,W_e,K_e,q_e,J_e,tOe,rOe,oOe,lOe,uOe,dOe,T_e,hOe,mOe,yOe,v$e,vOe,m$e,w$e,wOe,f$e,SOe,NOe,EOe,kOe,FOe,_Oe,DOe,POe,LOe,MOe,HOe,VOe,GOe,XOe,YOe,JOe,eDe,nDe,sDe,iDe,oDe,aDe,cDe,dDe,C_e,hDe,C$e,wDe,S$e,CDe,N$e,kDe,TDe,$De,I$e,T$e,ODe,RDe,UDe,jDe,$$e,O$e,h$e,QDe,BOe,zDe,WDe,KDe,S_e,R$e,U$e,qDe,j$e,JDe,tRe,rRe,oRe,lRe,uRe,ARe,Q$e,fRe,pRe,gRe,xRe,bRe,CRe,BRe,z$e,ERe,TRe,_Re,W$e,K$e,RRe,LRe,QRe,q$e,zRe,WRe,GRe,Lee,YRe,N_e,Z$e,ZRe,tPe,rPe,iPe,p$e,dT,aPe,E_e,I_e,k_e,cPe,APe,fPe,pPe,gPe,yPe,vPe,a_e,wPe,EPe,kPe,_Pe,c_e,DPe,PPe,LPe,u_e,FRe,QPe,zPe,WPe,KPe,qPe,JPe,eUe,nUe,f_e,rUe,p_e,g_e,iUe,aUe,cUe,AUe,fUe,b_e,uDe,pUe,gUe,xUe,bUe,CUe,BUe,Y$e,_Ue,DUe,PUe,VRe];for(const t of UUe)yK(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qA={},Ab={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function LUe(t,e){qA[t]=e}function Ia(t,e){if(!(t in qA)||e!=null){const r=MUe(t,e);if(r!==null)qA[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=qA[t];return n==null||n.isContextLost()?(delete qA[t],Ia(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),qA[t])}function jUe(t){if(!fe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function MUe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??jUe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete qA[t]},!1),fe().getBool("SOFTWARE_WEBGL_ENABLED")&&(Ab.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Ab)||n.getContext("experimental-webgl",Ab):n.getContext("webgl2",Ab)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var i0;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(i0||(i0={}));var Zi;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Zi||(Zi={}));var Zr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Zr||(Zr={}));function Sv(t,e){return[e,t]}function QUe(t,e){return t*e}function db(t){const e=ge(t),n=Math.ceil(e/4);return yk(n)}function am(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function HUe(t,e){const[n,r]=am(t,e);return n*r*4}function kR(t,e){const n=t;let r,s,i,o,a,l,c,u,A,d;return fe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,i=n.RGBA16F,o=n.RGBA32F,a=n.RED,c=4,u=1,A=n.HALF_FLOAT,d=n.FLOAT,l=n.RGBA8):(r=t.RGBA,s=t.RGBA,i=t.RGBA,o=n.RGBA,a=t.RGBA,c=4,u=4,A=e!=null?e.HALF_FLOAT_OES:null,d=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:A,textureTypeFloat:d}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function He(t,e){const n=e();return fe().getBool("DEBUG")&&zUe(t),n}function zUe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+KUe(t,e))}const VUe=596e-10,WUe=65504;function GUe(t){return!!(fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||VUe<Math.abs(t)&&Math.abs(t)<WUe)}function KUe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function fb(t,e){return Tc(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function XUe(t,e){const n=Tc(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(He(t,()=>t.shaderSource(n,e)),He(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function qUe(t,e){const n=Tc(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(He(t,()=>t.shaderSource(n,e)),He(t,()=>t.compileShader(n)),fe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw jee(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const YUe=/ERROR: [0-9]+:([0-9]+):/g;function jee(t,e){const n=YUe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),i=s.length.toString().length+2,o=s.map((A,d)=>Nh((d+1).toString(),i)+A);let a=0;for(let A=0;A<o.length;A++)a=Math.max(o[A].length,a);const l=o.slice(0,r-1),c=o.slice(r-1,r),u=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Nh(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function JUe(t){return Tc(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function ZUe(t,e){if(He(t,()=>t.linkProgram(e)),!fe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function Y4(t,e){if(He(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function eLe(t,e){const n=Tc(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),He(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function tLe(t,e){const n=Tc(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return He(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),He(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function nLe(t){return Tc(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function rLe(t,e){const n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function sLe(t){return Tc(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function N5(t,e,n,r,s,i,o){const a=t.getAttribLocation(e,n);return a===-1?!1:(He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),He(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,i,o)),He(t,()=>t.enableVertexAttribArray(a)),!0)}function iLe(t,e,n){uLe(t,n),He(t,()=>t.activeTexture(t.TEXTURE0+n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function oLe(t,e,n){return Tc(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function aLe(t,e,n){return t.getUniformLocation(e,n)}function lLe(t,e,n,r){He(t,()=>iLe(t,e,r)),He(t,()=>t.uniform1i(n,r))}function J4(t,e,n){He(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),He(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function E5(t,e){He(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),He(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function hb(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+cLe(t,e))}function cLe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Tc(t,e,n){const r=He(t,()=>e());if(r==null)throw new Error(n);return r}function uLe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function fp(t,e=2){return ge(t.slice(0,t.length-e))}function hp(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function pb(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[fp(t),...hp(t)]),e}function ALe(t,e=!1){let n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=fe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&fe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?C_(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=iA(t).newShape);let s=ge(t),i=null;t.length<=1&&s<=n?i=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const o=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||o)if(e){const a=fp(t);let l=2,c=2;t.length&&([l,c]=hp(t)),s=a*(l/2)*(c/2),i=yk(s).map(u=>u*2)}else i=yk(s);return i}function mb(t){return t%2===0}function I2(t,e){if(t=t.slice(-2),e=e.slice(-2),_t(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||mb(n)&&mb(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&mb(t[0])&&mb(e[0])}let Z4,eE;function dLe(t){if(Z4==null){const e=Ia(t);Z4=e.getParameter(e.MAX_TEXTURE_SIZE)}return Z4}function fLe(t){if(eE==null){const e=Ia(t);eE=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,eE)}function hLe(t){if(t===0)return 0;let e;const n=Ia(t);return _o(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:_o(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function _o(t,e){return t.getExtension(e)!=null}function I5(t){try{if(Ia(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function pLe(t){if(t===0)return!1;const e=Ia(t);if(t===1){if(!_o(e,"OES_texture_float"))return!1}else if(!_o(e,"EXT_color_buffer_float"))return!1;return hT(e)}function mLe(t){if(t===0)return!1;const e=Ia(t);if(t===1){if(!_o(e,"OES_texture_float")||!_o(e,"WEBGL_color_buffer_float"))return!1}else{if(_o(e,"EXT_color_buffer_float"))return hT(e);const r="EXT_color_buffer_half_float";if(_o(e,r)){const s=e.getExtension(r);return gLe(e,s)}return!1}return hT(e)}function hT(t){const e=kR(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),o}function gLe(t,e){const n=kR(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}function yLe(t){return t!==2?!1:Ia(t).fenceSync!=null}function Bv(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&L(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tt=fe();tt.registerFlag("HAS_WEBGL",()=>tt.getNumber("WEBGL_VERSION")>0);tt.registerFlag("WEBGL_VERSION",()=>I5(2)?2:I5(1)?1:0);tt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);tt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>tt.get("WEBGL_VERSION")===2);tt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);tt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);tt.registerFlag("WEBGL_PACK",()=>tt.getBool("HAS_WEBGL"));tt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_CLIP",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_REDUCE",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_LAZILY_UNPACK",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_CONV_IM2COL",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>dLe(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>fLe(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=tt.getNumber("WEBGL_VERSION");return t===0?0:hLe(t)});tt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>tt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!DK());tt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>pLe(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>tt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:tt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));tt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>mLe(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>yLe(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>tt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);tt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});tt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>DK()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});tt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);tt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);tt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);tt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);tt.registerFlag("WEBGL_EXP_CONV",()=>!1);tt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>tt.getBool("IS_TEST"));tt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);tt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);tt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);tt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zs(){let t,e,n,r,s,i,o,a,l,c;return fe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",i="outputColor",o="out vec4 outputColor;",a=fe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",i="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:i,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pf(t,e,n="index"){const r=ot(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / ${s}`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s}`:`index -= ${t[i]} * ${s}`;return`${o}; ${a};`}).join("")}function o3(t,e,n="index"){const r=ot(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${o}; ${a};`}).join("")}function xLe(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let i=n-3;i>=0;--i)s[i]=`(${s[i+1]} * ${r[i+1]})`;return s}function vLe(t,e,n="index"){const r=t.map((i,o)=>o),s=xLe(r,e);return s.map((i,o)=>{const a=`int ${t[o]} = ${n} / ${s[o]}`,l=o===s.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${s[o]}`:`index -= ${t[o]} * ${s[o]}`;return`${a}; ${l};`}).join("")}function TR(t){const e=ot(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function FR(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const Mee=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:Qee}=XNe;function bLe(t,e,n){const r=[];if(t.forEach(f=>{const h=ge(f.shapeInfo.logicalShape);if(f.shapeInfo.isUniform?r.push(`uniform float ${f.name}${h>1?`[${h}]`:""};`):(r.push(`uniform sampler2D ${f.name};`),r.push(`uniform int offset${f.name};`)),n.enableShapeUniforms){const{uniformShape:p}=$R(n.packedInputs,f.shapeInfo.logicalShape,f.shapeInfo.texShape);switch(p.length){case 1:r.push(`uniform int ${f.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${f.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${f.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${f.name}Shape;`);break}r.push(`uniform ivec2 ${f.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(f=>{r.push(`uniform ${f.type} ${f.name}${f.arrayIndex?`[${f.arrayIndex}]`:""};`)});const s=r.join(`
`),i=t.map(f=>wLe(f,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,a=zs(),l=BLe(a);let c,u,A=ILe(a);return e.isPacked?(c=CLe(e.logicalShape,o,n.enableShapeUniforms),u=ELe(a)):(c=SLe(e.logicalShape,o,n.enableShapeUniforms),u=NLe(a)),n.packedInputs&&(A+=$Le),[A,l,u,s,c,i,n.userCode].join(`
`)}function lm(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return zLe(t,e);case 1:return WLe(t,e);case 2:return KLe(t,e);case 3:return qLe(t,e);case 4:return JLe(t,e);case 5:return ZLe(t);case 6:return eje(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function Hee(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return HLe(t);case 1:return VLe(t,e);case 2:return GLe(t,e);case 3:return XLe(t,e);default:return YLe(t,e)}}function wLe(t,e,n=!1,r){let s="";n?s+=Hee(t,r):s+=lm(t,r);const i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(n?s+=tje(t,e):s+=nje(t,e)),s}function CLe(t,e,n){switch(t.length){case 0:return zee();case 1:return _Le(t,e,n);case 2:return MLe(t,e,n);case 3:return DLe(t,e,n);default:return PLe(t,e,n)}}function SLe(t,e,n){switch(t.length){case 0:return zee();case 1:return OLe(t,e,n);case 2:return QLe(t,e,n);case 3:return RLe(t,e,n);case 4:return ULe(t,e,n);case 5:return LLe(t,e);case 6:return jLe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function BLe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function NLe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function ELe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function ILe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${kLe}
    ${TLe}
    ${FLe}
  `}const kLe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,TLe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,FLe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,$Le=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function zee(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function _Le(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function OLe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function DLe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),i=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function RLe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${o3(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=pf(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function PLe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),i=s*Math.ceil(t[t.length-2]/2);let o=i,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)o*=t[t.length-c-1],a=`
      int b${c} = index / ${o};
      index -= b${c} * ${o};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${l});
    }
  `}function ULe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${o3(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=pf(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function LLe(t,e){const n=pf(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function jLe(t,e){const n=pf(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function MLe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(_t(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function QLe(t,e,n){return _t(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function mf(t){return`offset${t}`}function HLe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=zs();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function zLe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,i]=t.shapeInfo.texShape;if(s===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=mf(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function VLe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,i=zs();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function WLe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${cm(t)}
      }
    `;const s=t.shapeInfo.texShape,i=s[0],o=s[1];if(o===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=mf(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function GLe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=i[0],a=i[1],l=zs();if(i!=null&&_t(n,i))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function KLe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&_t(n,i)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const d=i[0],f=i[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=iA(n),l=o;if(l.length<n.length){const d=um(t,l),f=["row","col"];return`
      ${lm(d,e)}
      float ${s}(int row, int col) {
        return ${s}(${Am(f,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${cm(t)}
      }
    `;const c=i[0],u=i[1],A=mf(r);return u===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${A}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${A}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${A}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${A}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${A};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${A};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function XLe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const d=n.slice(1),f=[1,2],h=um(t,d),p=["b","row","col"];return`
        ${Hee(h,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${Am(p,f)});
        }
      `}const a=zs();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=o[0],c=o[1],u=Math.ceil(n[2]/2),A=u*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${A}, ${u}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function qLe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],{newShape:a,keptDims:l}=iA(n),c=a;if(c.length<n.length){const p=um(t,c),m=["row","col","depth"];return`
        ${lm(p,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${Am(m,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${o}, 1)));
        ${cm(t)}
      }
    `;const u=t.shapeInfo.texShape,A=u[0],d=u[1],f=t.shapeInfo.flatOffset;if(d===i&&f==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${d}.0, ${A}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(d===o&&f==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${A}.0);
      return sampleTexture(${r}, uv);
    }
  `;const h=mf(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${h};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${o} + depth + ${h};
        vec2 uv = uvFromFlat(${A}, ${d}, index);
        return sampleTexture(${r}, uv);
      }
  `}function YLe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=zs();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,o=i.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],A=Math.ceil(i[o-1]/2);let d=A*Math.ceil(i[o-2]/2),f="int b, int row, int col",h=`b * ${d} + (row / 2) * ${A} + (col / 2)`;for(let p=2;p<o-1;p++)f=`int b${p}, `+f,d*=i[o-p-1],h=`b${p} * ${d} + `+h;return`
    vec4 ${r}(${f}) {
      int index = ${h};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${s.texture2D}(${n}, uv);
    }
  `}function JLe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,a=n[1]*o,{newShape:l,keptDims:c}=iA(n);if(l.length<n.length){const x=um(t,l),v=["row","col","depth","depth2"];return`
      ${lm(x,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${Am(v,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${i}, 1)));
        ${cm(t)}
      }
    `;const u=t.shapeInfo.flatOffset,A=t.shapeInfo.texShape,d=A[0],f=A[1],h=`int stride2 = ${r}Shape[3];`,p=`int stride1 = ${r}Shape[2] * stride2;`,m=`int stride0 = ${r}Shape[1] * stride1;`;if(f===a&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${h}
        ${p}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(f===i&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;const y=mf(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${h}
      ${p}
      ${m}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${d}, ${f}, index + ${y});
      return sampleTexture(${r}, uv);
    }
  `}function ZLe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],i=e[3]*s,o=e[2]*i,a=e[1]*o,{newShape:l,keptDims:c}=iA(e);if(l.length<e.length){const p=um(t,l),m=["row","col","depth","depth2","depth3"];return`
      ${lm(p)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Am(m,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${i}, ${s})) +
          depth3;
        ${cm(t)}
      }
    `;const u=t.shapeInfo.flatOffset,A=t.shapeInfo.texShape,d=A[0],f=A[1];if(f===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(f===s&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;const h=mf(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${i} +
          depth2 * ${s} + depth3 + ${h};
      vec2 uv = uvFromFlat(${d}, ${f}, index);
      return sampleTexture(${n}, uv);
    }
  `}function eje(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:i}=iA(e);if(s.length<e.length){const m=um(t,s),y=["row","col","depth","depth2","depth3","depth4"];return`
      ${lm(m)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Am(y,i)});
      }
    `}const o=e[5],a=e[4]*o,l=e[3]*a,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${cm(t)}
      }
    `;const A=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1];if(h===u&&A==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===o&&A==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=mf(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${p};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function cm(t){const e=t.name,n=ge(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function tje(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=Qee(t.shapeInfo.logicalShape,e.logicalShape),l=an(o),c=o-i;let u;const A=["x","y","z","w","u","v"];i===0?u="":o<2&&a.length>=1?u="coords = 0;":u=a.map(x=>`coords.${A[x+c]} = 0;`).join(`
`);let d="";o<2&&i>0?d="coords":d=t.shapeInfo.logicalShape.map((x,v)=>`coords.${A[v+c]}`).join(", ");let f="return outputValue;";const p=ge(t.shapeInfo.logicalShape)===1,y=ge(e.logicalShape)===1;if(i===1&&!p&&!y)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(p&&!y)o===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(a.length){const x=i-2,v=i-1;a.indexOf(x)>-1&&a.indexOf(v)>-1?f="return vec4(outputValue.x);":a.indexOf(x)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(v)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${d});
      ${f}
    }
  `}function nje(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=e.texShape,o=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&_t(o,i))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=an(l),u=Qee(t.shapeInfo.logicalShape,e.logicalShape),A=l-a;let d;const f=["x","y","z","w","u","v"];a===0?d="":l<2&&u.length>=1?d="coords = 0;":d=u.map(p=>`coords.${f[p+A]} = 0;`).join(`
`);let h="";return l<2&&a>0?h="coords":h=t.shapeInfo.logicalShape.map((p,m)=>`coords.${f[m+A]}`).join(", "),`
    float ${s}() {
      ${c} coords = getOutputCoords();
      ${d}
      return get${r}(${h});
    }
  `}function an(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function $R(t,e,n){const{newShape:r,keptDims:s}=iA(e),i=e.length,o=t&&i===3&&e[0]===1,a=o?e.slice(1):r,l=!t&&i>1&&!_t(e,n)&&r.length<i||o;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:s}}function um(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Am(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rje(t,e,n,r){const s=n.map((u,A)=>{const d={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(d.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[A],shapeInfo:d}}),i=s.map(u=>u.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=bLe(s,o,e),l=qUe(t.gl,a),c=t.createProgram(l);return fe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:o},Vee(t,e,c)))}function Vee(t,e,n){const r=[],s=[];let i,o,a,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),fe().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const A of e.variableNames){const d={name:A,uniform:t.getUniformLocation(n,A,u),offset:t.getUniformLocation(n,`offset${A}`,u)};e.enableShapeUniforms&&(d.shape=t.getUniformLocation(n,`${A}Shape`,u),d.texShape=t.getUniformLocation(n,`${A}TexShape`,u)),r.push(d)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",u),a=t.getUniformLocation(n,"outShapeStrides",u),o=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const A of e.customUniforms)s.push(t.getUniformLocation(n,A.name,u));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:o}}function k5(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,i=e[r],o=i.shape;if(!_t(s,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${o} must match`);if(n.isUniform&&i.isUniform)return;const a=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!_t(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function sje(t,e,n,r,s){e.program.enableShapeUniforms||(k5(e.inShapeInfos,n),k5([e.outShapeInfo],[r]));const i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):t.setOutputMatrixTexture(i.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),fe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:A,shape:d,texShape:f}=e.variablesLocations[l];if(d){const{uniformShape:h}=$R(e.program.packedInputs,c.shape,c.texData.texShape);switch(h.length){case 1:t.gl.uniform1iv(d,new Int32Array(h));break;case 2:t.gl.uniform2iv(d,new Int32Array(h));break;case 3:t.gl.uniform3iv(d,new Int32Array(h));break;case 4:t.gl.uniform4iv(d,new Int32Array(h));break}}if(f&&t.gl.uniform2i(f,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(ge(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let h=c.uniformValues;h instanceof Float32Array||(h=new Float32Array(h)),t.gl.uniform1fv(u,h)}continue}c.texData.slice!=null&&A!=null&&t.gl.uniform1i(A,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=ot(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],A=s[l];if(c.type==="float")t.gl.uniform1fv(u,A);else if(c.type==="vec2")t.gl.uniform2fv(u,A);else if(c.type==="vec3")t.gl.uniform3fv(u,A);else if(c.type==="vec4")t.gl.uniform4fv(u,A);else if(c.type==="int")t.gl.uniform1iv(u,A);else if(c.type==="ivec2")t.gl.uniform2iv(u,A);else if(c.type==="ivec3")t.gl.uniform3iv(u,A);else if(c.type==="ivec4")t.gl.uniform4iv(u,A);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function ije(t,e,n){let r="";e.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:A}=$R(t.packedInputs,o.shape,l);let d="",f="",h="";if(u.length===1&&t.packedInputs){const w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];d=`${w[0]>1}_${w[1]>1}`}else if(u.length===2&&!t.packedInputs)f=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const w=ot(u);h=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}const p=o.shape.length,m=u.length===2&&_t(o.shape,l),y=ge(o.shape)===1,x=op(o.shape,n.shape),v=!t.packedInputs&&p===n.shape.length&&_t(l,n.texData.texShape),b=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${p}_${v}_${c?A:""}_${u.length}_${y}_${x}_${m}_${d}_${f}_${h}_${b}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${a}`}});const s=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+s+`${fe().getNumber("WEBGL_VERSION")}`,i}function ws(t){return fe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oje{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=i0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=zs();this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?o3(["r","c","d"],e):pf(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aje{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=i0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=zs();this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?o3(["r","c","d"],e):pf(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lje{constructor(e){this.variableNames=["A"],this.outTexUsage=Zi.DOWNLOAD;const n=zs();this.outputShape=e,this.userCode=`
      ${Mee}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cje{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Zi.DOWNLOAD;const n=zs();this.outputShape=e,this.userCode=`
      ${Mee}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uje={R:0,G:1,B:2,A:3};class T5{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=zs();this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++){const l=r[a];o+=`
          if(offset == ${a}) {
            result = values[${uje[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?FR():TR(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${o}
        }
        ${s.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Aje{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=zs();this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length);let s="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;s+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?FR():TR(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dje(t){const e=zs(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return XUe(t,n)}function fje(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return eLe(t,e)}function hje(t){const e=new Uint16Array([0,1,2,2,1,3]);return tLe(t,e)}function Nv(t,e,n,r,s,i){rLe(e,n);const o=nLe(t),a=t.TEXTURE_2D;return He(t,()=>t.bindTexture(a,o)),He(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),He(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),He(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),He(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),fe().getNumber("WEBGL_VERSION")===1?He(t,()=>t.texImage2D(a,0,r,e,n,0,s,i,null)):He(t,()=>t.texStorage2D(a,1,r,e,n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function Wee(t){return t.internalFormatFloat}function pje(t,e,n,r){const[s,i]=Sv(e,n);return Nv(t,s,i,Wee(r),r.textureFormatFloat,t.FLOAT)}function Gee(t){return t.internalFormatHalfFloat}function mje(t,e,n,r){const[s,i]=Sv(e,n);return Nv(t,s,i,Gee(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function Kee(t){return t.downloadTextureFormat}function gje(t,e,n,r){const[s,i]=Sv(e,n);return Nv(t,s,i,Kee(r),t.RGBA,t.UNSIGNED_BYTE)}function Xee(t){return t.internalFormatPackedFloat}function yje(t,e,n,r){const[s,i]=am(e,n);return Nv(t,s,i,Xee(r),t.RGBA,t.FLOAT)}function qee(t){return t.internalFormatPackedHalfFloat}function xje(t,e,n,r){const[s,i]=am(e,n);return Nv(t,s,i,qee(r),t.RGBA,r.textureTypeHalfFloat)}function vje(t,e,n){return He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),N5(t,e,"clipSpacePos",n,3,20,0)&&N5(t,e,"uv",n,2,20,12)}function bje(t,e,n,r,s,i){He(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,a,l;s instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,l=i.internalFormatPackedFloat),o.set(s),fe().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,o)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,o)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function wje(t,e,n){He(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?fe().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):fe().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Cje(t,e,n,r){const s=t.createBuffer();He(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const a=4*4*e*n;return He(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),He(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),He(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function Sje(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function Bje(t,e,n,r){const[s,i]=Sv(e,n),o=4,a=new Uint8Array(QUe(e*n,o));return He(t,()=>t.readPixels(0,0,s,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function Nje(t,e,n,r,s,i,o,a){const l=t,c=new Float32Array(HUe(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function Eje(t,e,n){const r=new Float32Array(e*n*4);return He(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tE{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=fe().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,LUe(n,e)):this.gl=Ia(n),e=this.gl,fe().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>He(i,()=>i.createVertexArray()),this.bindVertexArray=o=>He(i,()=>i.bindVertexArray(o)),this.deleteVertexArray=o=>He(i,()=>i.deleteVertexArray(o)),this.getVertexArray=()=>He(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>He(e,()=>i.createVertexArrayOES()),this.bindVertexArray=o=>He(e,()=>i.bindVertexArrayOES(o)),this.deleteVertexArray=o=>He(e,()=>i.deleteVertexArrayOES(o)),this.getVertexArray=()=>He(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),fe().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=fb(this.gl,i),_o(this.gl,o))this.textureHalfFloatExtension=fb(this.gl,o);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),_o(this.gl,s))this.colorBufferHalfFloatExtension=fb(this.gl,s);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",_o(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(_o(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=fje(this.gl),this.indexBuffer=hje(this.gl),this.framebuffer=sLe(this.gl),this.textureConfig=kR(this.gl,this.textureHalfFloatExtension)}get debug(){return fe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;He(e,()=>e.finish()),He(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),He(e,()=>e.deleteFramebuffer(this.framebuffer)),He(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),He(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),He(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),pje(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),mje(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),gje(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),wje(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),bje(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),xje(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),yje(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(E5(this.gl,this.framebuffer),this.outputTexture=null),He(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>Bje(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,i,o){return Nje(this.gl,e,n,r,s,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return Sje(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=Cje(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(fe().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,i=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=s.clientWaitSync(i,0,0);return o===s.ALREADY_SIGNALED||o===s.CONDITION_SATISFIED},n=i}else fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>Eje(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=dje(n));const r=JUe(n);He(n,()=>n.attachShader(r,this.vertexShader)),He(n,()=>n.attachShader(r,e)),ZUe(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&Y4(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;He(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),vje(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(He(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&Y4(this.gl,this.program),He(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?oLe(this.gl,e,n):aLe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),He(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),lLe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,i]=am(n,r);this.setOutputMatrixTextureDriver(e,s,i)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&Y4(this.gl,this.program),hb(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}He(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),He(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=fb(this.gl,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await e6(()=>this.disposed||this.isQueryAvailable(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=Ije(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in fe().platform&&(r=fe().platform.setTimeoutCustom.bind(fe().platform)),e6(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),J4(this.gl,e,this.framebuffer),this.debug&&hb(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(J4(this.gl,this.outputTexture,this.framebuffer),this.debug&&hb(this.gl)):E5(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;J4(s,e,this.framebuffer),this.debug&&hb(s),this.outputTexture=e,He(s,()=>s.viewport(0,0,n,r)),He(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),He(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function Ije(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:kje,bincountImpl:Yee,bincountReduceImpl:Tje,bitwiseAndImpl:Fje,castImpl:$je,ceilImpl:_je,concatImpl:Oje,equalImpl:Dje,expImpl:Rje,expm1Impl:Pje,floorImpl:Uje,gatherNdImpl:Lje,gatherV2Impl:jje,greaterImpl:Mje,greaterEqualImpl:Qje,lessImpl:Hje,lessEqualImpl:zje,linSpaceImpl:Vje,logImpl:Wje,maxImpl:Gje,maximumImpl:Kje,minimumImpl:Xje,multiplyImpl:qje,negImpl:Yje,notEqualImpl:Jje,prodImpl:Zje,raggedGatherImpl:eMe,raggedRangeImpl:tMe,raggedTensorToTensorImpl:nMe,rangeImpl:rMe,rsqrtImpl:sMe,scatterImpl:iMe,sigmoidImpl:oMe,simpleAbsImpl:Jee,sliceImpl:aMe,sparseFillEmptyRowsImpl:lMe,sparseReshapeImpl:cMe,sparseSegmentReductionImpl:Zee,sqrtImpl:uMe,staticRegexReplaceImpl:AMe,stridedSliceImpl:dMe,stringNGramsImpl:fMe,stringSplitImpl:hMe,stringToHashBucketFastImpl:pMe,subImpl:mMe,tileImpl:gMe,topKImpl:yMe,transposeImpl:_R,uniqueImpl:xMe}=w_e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ete(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Ps(t,e){return e===1?[t]:ete(t,e)}function vMe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bMe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=ws(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Ps("rc",this.rank),r=an(this.rank),s=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let i=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)i=`${e[e.length-1-o]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tte{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length);let r="";for(let s=0;s<4;s++){let i="thisRC = rc;";s%2===1&&(i+="thisRC.z += 1;"),s>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${wMe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?FR():TR(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function wMe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?vLe(["r","c","d"],"inputShape"):pf(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CMe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=$5(n,r),i=_5(e,s,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=F5(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[i].pop();return this.usedTextures[i].push(l),l}let a;return s===Zr.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===Zr.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===Zr.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===Zr.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===Zr.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const i=$5(r,s),o=_5(n,i,s);o in this.freeTextures||(this.freeTextures[o]=[]);const a=F5(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=fe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[o],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function SMe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function F5(t,e,n,r,s){const i=BMe(e,r);let o;if(s){const[l,c]=am(t[0],t[1]);o=l*c}else{const[l,c]=Sv(t[0],t[1]);o=l*c}const a=SMe(n,i);return o*a}function BMe(t,e){switch(t){case Zr.PACKED_2X2_FLOAT32:return Xee(e);case Zr.PACKED_2X2_FLOAT16:return qee(e);case Zr.UNPACKED_FLOAT32:return Wee(e);case Zr.UNPACKED_FLOAT16:return Gee(e);case Zr.PACKED_4X1_UNSIGNED_BYTE:return Kee(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function NMe(t){return fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Zr.PACKED_2X2_FLOAT32:Zr.UNPACKED_FLOAT32:t?Zr.PACKED_2X2_FLOAT16:Zr.UNPACKED_FLOAT16}function $5(t,e){if(t===Zi.UPLOAD)return Zr.PACKED_2X2_FLOAT32;if(t===Zi.RENDER||t==null)return NMe(e);if(t===Zi.DOWNLOAD||t===Zi.PIXELS)return Zr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function _5(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rl{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Xo="if (isnan(x)) return x;",EMe="return x;",O5="return abs(x);",IMe="return (x >= 0.0) ? x : (exp(x) - 1.0);",kMe=Xo+`
  return (x < 0.0) ? 0.0 : x;
`,TMe=Xo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,qc="return x;",FMe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Me="return x;",_Me=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,OMe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,DMe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,RMe="return 1.0 / (1.0 + exp(-1.0 * x));";class gu{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PMe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length);const n=e.length,r=Ps("rc",n),s=an(n),i=vMe(n,r),o=r.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UMe=mD,LMe=1e-7,jMe=1e-4,gb={};function MMe(t){return t in gb||(gb[t]={}),gb[t]}const QMe=fe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),HMe=600;function zMe(){return fe().global.screen==null?1024:fe().global.screen.height*fe().global.screen.width*window.devicePixelRatio*HMe/1024/1024}class a3 extends w_{nextDataId(){return a3.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!fe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof tE)n=e;else{const r=Ia(fe().getNumber("WEBGL_VERSION"),e);n=new tE(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Ia(fe().getNumber("WEBGL_VERSION"));n=new tE(r),this.binaryCache=MMe(fe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new CMe(this.gpgpu),this.numMBBeforeWarning=zMe(),this.texData=new AK(this,Wa())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,i,o){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,i]},l.texShape=[s,i];const c=pb(n),u=new T5(c,!1,o),A=this.runWebGLProgram(u,[a],r,[[s,i]]);return A.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),A.dataId}write(e,n,r){if((fe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||fe().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:Zi.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,i){if(fe().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:Zi.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:i,slice:o,shape:a,isPacked:l}=n;if(o!=null){let d;l?d=new gu(a,qc):d=new rl(a,qc);const f=this.runWebGLProgram(d,[{dataId:e,shape:a,dtype:s}],s),h=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),h}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=Ys());let A;if(s==="complex64"){const d=this.readSync(i.real.dataId),f=this.readSync(i.imag.dataId);A=pc(d,f)}else A=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Ys()-u),this.convertAndCacheOnCPU(e,A)}async read(e){if(this.pendingRead.has(e)){const h=this.pendingRead.get(e);return new Promise(p=>h.push(p))}const n=this.texData.get(e),{values:r,shape:s,slice:i,dtype:o,complexTensorInfos:a,isPacked:l}=n;if(i!=null){let h;l?h=new gu(s,qc):h=new rl(s,qc);const p=this.runWebGLProgram(h,[{dataId:e,shape:s,dtype:o}],o),m=this.read(p.dataId);return this.disposeIntermediateTensorInfo(p),m}if(r!=null)return this.convertAndCacheOnCPU(e);if(fe().getBool("DEBUG")&&!fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&fe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(o!=="complex64"&&fe().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const h=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(h.texture.texture,...db(s))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let A;if(o==="complex64"){const h=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),p=h[0],m=h[1];A=pc(p,m)}else if(c==null)A=this.getValuesFromTexture(e);else{const h=ge(s);A=this.gpgpu.downloadFloat32MatrixFromBuffer(c,h)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const h=this.gpgpu.gl;He(h,()=>h.deleteBuffer(c))}const d=this.convertAndCacheOnCPU(e,A),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(h=>h(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Wa().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:i,slice:o,dtype:a,isPacked:l,texture:c}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let f;l?f=new gu(i,qc):f=new rl(i,qc);const h=this.runWebGLProgram(f,[{dataId:e,shape:i,dtype:a}],a),p=this.readToGPU(h,n);return this.disposeIntermediateTensorInfo(h),p}if(c==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),A=Wa().makeTensorFromTensorInfo(u),d=this.texData.get(u.dataId);return Object.assign({tensorRef:A},d.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>Hu(s));return St(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return St(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!GUe(r))throw fe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),i=ge(n);if(fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const d=this.decode(e),f=this.texData.get(d.dataId),h=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...db(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(d),h}const o=fe().getBool("WEBGL_PACK")&&s===!0,a=o?pb(n):n,l=o?new cje(a):new lje(a),c=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),A=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(c),A}timerAvailable(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=jd(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=jd(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);a.kernelMs=w1e(l),a.getExtraProfileInfo=()=>l.map((c,u)=>({name:o[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ys(),endMs:null}}endTimer(e){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Ys(),e)}async getQueryTime(e){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:i,isPacked:o,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,i,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=QMe){return fe().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&ge(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){qi("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return UMe(e.shape,n)}packedUnaryOp(e,n,r){const s=new gu(e.shape,n),i=this.compileAndRun(s,[e],r);return Wa().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=Jee(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,O5,e.dtype);const n=new rl(e.shape,O5),r=this.compileAndRun(n,[e]);return Wa().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&lx(r[0])){const i=r.map(o=>$u(o));s=this.write(i,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return Wa().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new PMe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new bMe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[fp(e.shape),...hp(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},i=[fp(n),...hp(n)],o=new tte(i,r),a=!0,l=[r],c=this.runWebGLProgram(o,[s],e.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:i,dtype:o}=r;if(n!=null){const d=ge(i),f=n[0]*n[1]*4;L(d<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=pb(i);let l;s?l=new aje(a):l=new oje(a);const c=!0,u=[n??db(a)],A=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],o,u,c,n);return{dtype:o,shape:i,dataId:A.dataId}}runWebGLProgram(e,n,r,s,i=!1,o){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===i0.DENSE){const y=o??db(e.outputShape);l.texShape=y.map(x=>x*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),ge(a.shape)===0)return l.values=ns(a.dtype,0),a;const c=[],u=n.map(y=>{if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let x=this.texData.get(y.dataId);if(x.texture==null){if(!e.packedInputs&&ge(y.shape)<=fe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:x.values};e.packedInputs&&(x.isPacked=!0,x.shape=y.shape)}if(this.uploadToGPU(y.dataId),!!x.isPacked!=!!e.packedInputs)y=x.isPacked?this.unpackTensor(y):this.packTensor(y),c.push(y),x=this.texData.get(y.dataId);else if(x.isPacked&&!I2(x.shape,y.shape)){const v=y,b=y.shape;y.shape=x.shape,y=this.packedReshape(y,b),c.push(y),x=this.texData.get(y.dataId),v.shape=b}return{shape:y.shape,texData:x,isUniform:!1}});this.uploadToGPU(a.dataId);const A={shape:a.shape,texData:l,isUniform:!1},d=ije(e,u,A),f=this.getAndSaveBinary(d,()=>rje(this.gpgpu,e,u,A)),h=this.activeTimers!=null;let p;h&&(p=this.startTimer()),fe().get("ENGINE_COMPILE_ONLY")||sje(this.gpgpu,f,u,A,s),c.forEach(y=>this.disposeIntermediateTensorInfo(y)),h&&(p=this.endTimer(p),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(p)}));const m=fe().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){const y=Ys();y-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!fe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const y=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),y}return a}compileAndRun(e,n,r,s,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(fe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ce(()=>{if(!fe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=fe().getBool("DEBUG");fe().set("DEBUG",!1);const n=this.abs(at(1e-8)).dataSync()[0];if(fe().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?LMe:jMe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:i,texture:o,usage:a,isPacked:l}=n;if(o!=null)return;const c=this.activeTimers!=null;let u;c&&(u=Ys());let A=n.texShape;if(A==null&&(A=ALe(r,l),n.texShape=A),i!=null){const d=pb(r);let f,h=A[1],p=A[0];const m=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!m)&&([h,p]=am(A[0],A[1])),l?f=new Aje(d,m):f=new T5(d,m);const y=m?[p,h]:A,x=this.makeTensorInfo(y,s),v=this.texData.get(x.dataId);m?v.usage=Zi.PIXELS:v.usage=Zi.UPLOAD,v.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),h,p,i);const b=[[p,h]],C=this.runWebGLProgram(f,[x],s,b,!0),B=this.texData.get(C.dataId);n.texShape=B.texShape,n.isPacked=B.isPacked,n.usage=B.usage,fe().get("ENGINE_COMPILE_ONLY")?this.disposeData(C.dataId):(n.texture=B.texture,n.values=null,this.texData.delete(C.dataId)),this.disposeIntermediateTensorInfo(x),c&&(this.uploadWaitMs+=Ys()-u)}else{const d=this.acquireTexture(A,a,s,l);n.texture=d}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=VMe(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*e2(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await Fq(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(jee(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:i,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:l}=Vee(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=i,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:i,width:o,channels:a}=e,l=Wa().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(s,n,r,i,o,a);return Wa().makeTensorFromDataId(c,n,r,l)}}a3.nextDataId=0;function VMe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */RK()&&LK("webgl",()=>new a3,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OR=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Jd{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=vt(n,r),this.enableShapeUniforms=ws(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gf=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class dm{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=vt(n,r);const i=this.outputShape.length;this.enableShapeUniforms=ws(i);let o="";if(s)if(i===0||ge(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${an(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Ps("coords",i);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ri(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const WMe={kernelName:kx,backendName:"webgl",kernelFunc:Ri};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mA(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),a=Ri({inputs:{x:r},backend:n}),l=Ri({inputs:{x:s},backend:n});return o.complexTensorInfos={real:a,imag:l},i}const GMe={kernelName:$_,backendName:"webgl",kernelFunc:mA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nte="return (a < 0.) ? b * a : a;",rte=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function KMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r,o=n.makeTensorInfo([],"float32",oA(i,"float32")),a=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new dm(rte,s.shape,o.shape):new Jd(nte,s.shape,o.shape),l=n.runWebGLProgram(a,[s,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const XMe={kernelName:jS,backendName:"webgl",kernelFunc:KMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ste="return (a < 0.) ? b * a : a;",ite=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function qMe(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new dm(ite,r.shape,s.shape):new Jd(ste,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],"float32")}const YMe={kernelName:iB,backendName:"webgl",kernelFunc:qMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fm="if (isnan(x)) return x;";function Qt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:i})=>{const{x:o}=s,a=i,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const A=a.texData.get(o.dataId),d=n(A.values,l);return a.makeTensorInfo(o.shape,l,d)}const c=fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new gu(o.shape,e):u=new rl(o.shape,t),a.runWebGLProgram(u,[o],l)}}function as({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:i}){return({inputs:o,backend:a})=>{const{a:l,b:c}=o,u=a;if(r&&l.dtype==="complex64"){const h=u.texData.get(l.dataId),p=u.texData.get(c.dataId),[m,y]=[[h.complexTensorInfos.real,p.complexTensorInfos.real],[h.complexTensorInfos.imag,p.complexTensorInfos.imag]].map(v=>{const[b,w]=v,C={dataId:b.dataId,dtype:b.dtype,shape:l.shape},B={dataId:w.dataId,dtype:w.dtype,shape:c.shape},S=new Jd(t,l.shape,c.shape);return u.runWebGLProgram(S,[C,B],_i(b.dtype,w.dtype))}),x=mA({inputs:{real:m,imag:y},backend:u});return u.disposeIntermediateTensorInfo(m),u.disposeIntermediateTensorInfo(y),x}const A=i||_i(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&s!=null){const h=u.texData.get(l.dataId).values,p=u.texData.get(c.dataId).values,m=l.dtype==="string"?mc(h):h,y=l.dtype==="string"?mc(p):p,[x,v]=s(l.shape,c.shape,m,y,A),b=u.makeTensorInfo(v,A),w=u.texData.get(b.dataId);return w.values=x,b}const d=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return d?f=new dm(e,l.shape,c.shape,n):f=new Jd(t,l.shape,c.shape),u.runWebGLProgram(f,[l,c],A)}}function o0(t,e=!1){if(t==="linear")return e?$Me:EMe;if(t==="relu")return e?OMe:kMe;if(t==="elu")return e?_Me:IMe;if(t==="relu6")return e?DMe:TMe;if(t==="prelu")return e?ite:ste;if(t==="leakyrelu")return e?rte:nte;if(t==="sigmoid")return e?RMe:FMe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ote{constructor(e,n,r,s=!1,i=!1,o=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=ws(this.outputShape.length);const u=s?e[1]:e[2],A=Math.ceil(u/2),d=s?"i * 2, rc.y":"rc.y, i * 2",f=i?"rc.z, i * 2":"i * 2, rc.z",h=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",y="";a&&(l?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:m=`vec4 activation(vec4 x) {
          ${a}
        }`,y="result = activation(result);");const x=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let v="rc.x",b="rc.x";e[0]<n[0]?v=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(b=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${m}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${A}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${v};
        int batchB = ${b};
        for (int i = 0; i < ${A}; i++) {
          vec4 a = getMatrixA(batchA, ${d});
          vec4 b = getMatrixB(batchB, ${f});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${h[0]} * ${p[0]});
          result += (${h[1]} * ${p[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${x}

        ${y}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D5={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class R5{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=vt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P5="return a * b;";function DR(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=_i(r.dtype,s.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),c=new R5(D5.REAL,r.shape,s.shape),u=new R5(D5.IMAG,r.shape,s.shape),A=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],d=n.runWebGLProgram(c,A,"float32"),f=n.runWebGLProgram(u,A,"float32"),h=mA({inputs:{real:d,imag:f},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),h}if(n.shouldExecuteOnCPU([r,s])){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),[c,u]=qje(r.shape,s.shape,a.values,l.values,i),A=n.makeTensorInfo(u,i),d=n.texData.get(A.dataId);return d.values=c,A}let o;return fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new dm(P5,r.shape,s.shape):o=new Jd(P5,r.shape,s.shape),n.runWebGLProgram(o,[r,s],i)}const JMe={kernelName:Ux,backendName:"webgl",kernelFunc:DR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZMe(t,e,n){const r=[fp(t.shape),...hp(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},i=[fp(e),...hp(e)],o=new tte(i,r),a=!0,l=[r],c=n.runWebGLProgram(o,[s],t.dtype,l,a);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Le(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,o=n,a=ge(s.shape),l=dK(i,a),c=ge(l);L(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=o.texData.get(s.dataId);return u.isPacked&&!I2(s.shape,l)&&!(u.texture!==null&&I2(u.shape,l))?ZMe(s,l,o):(o.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const e6e={kernelName:aB,backendName:"webgl",kernelFunc:Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U5{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];const a=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const A=1/n;c=`sumValue += dot(values * ${np(A)?A.toPrecision(2):A}, ones);`}let u="";i%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class t6e{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,A=r%4;let d=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";n==="all"?(a="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(a="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let h="";i%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${u};
        if (${A===1}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${A===2}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${A===3}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${d}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n6e(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=VB(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function yf(t,e,n,r){const s=n6e(t.shape);let i=t;for(let o=0;o<s.length;o++){const{inSize:a,windowSize:l,outSize:c}=s[o];let u,A;n==="mean"?u=o===0?new U5({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new U5({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new t6e({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},n),A=i,i=r.runWebGLProgram(u,[i],e),A.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(A)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r6e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const s=an(this.rank),i=s6e(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function s6e(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i6e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[n[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=an(this.rank),i=ete("rc",this.rank),o=new Array(this.rank);for(let u=0;u<n.length;u++)o[n[u]]=i[u];const a=`vec2(${o.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l3(t,e,n){const r=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new i6e(t.shape,e):new r6e(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o6e(t,e,n,r){const s=e,i=t.shape.length,o=kt(s,t.shape);let a=o;const l=Hn(a,i),c=l!=null;let u=t;c&&(u=l3(t,l,r),a=ar(a.length,i)),is("sum",a,i);const[A,d]=Vr(u.shape,a);let f=A;n&&(f=or(A,o));const h=ge(d),m=ge(t.shape)/h,y=Le({inputs:{x:u},attrs:{shape:[m,h]},backend:r}),x=FO(t.dtype),v=yf(y,x,"sum",r),b=Le({inputs:{x:v},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(v),c&&r.disposeIntermediateTensorInfo(u),b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;return o6e(s,i,o,n)}const a6e={kernelName:fB,backendName:"webgl",kernelFunc:c3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ms(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:i}=r,o=n,a=s.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=s.shape[i[u]];let c;if(o.shouldExecuteOnCPU([s])){const A=o.texData.get(s.dataId).values,d=_R(A,s.shape,s.dtype,i,l);c=o.makeTensorInfo(l,s.dtype);const f=o.texData.get(c.dataId);f.values=d}else c=l3(s,i,o);return c}const l6e={kernelName:Eh,backendName:"webgl",kernelFunc:Ms};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ate=1e3;function k2({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,A=n?t.shape[c-2]:t.shape[c-1],d=r?e.shape[u-1]:e.shape[u-2],f=n?t.shape[c-1]:t.shape[c-2],h=r?e.shape[u-2]:e.shape[u-1],p=t.shape.slice(0,-2),m=e.shape.slice(0,-2),y=ge(p),x=ge(m),b=vt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,h]);L(A===d,()=>`Error in matMul: inner shapes (${A}) and (${d}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=n?[y,A,f]:[y,f,A],C=r?[x,h,d]:[x,d,h],B=Le({inputs:{x:t},backend:s,attrs:{shape:w}}),S=Le({inputs:{x:e},backend:s,attrs:{shape:C}}),N=[B,S],k=Math.max(y,x),O=n?B.shape[1]:B.shape[2],U=i!=null,P=o!=null,V=l==="leakyrelu",W=l!=null?o0(l,!0):null,j=U||P||V||W!=null;let G;if((f===1||h===1)&&O>ate&&j===!1){let M=B,q=S;n&&(M=Ms({inputs:{x:B},backend:s,attrs:{perm:[0,2,1]}}),N.push(M)),r&&(q=Ms({inputs:{x:S},backend:s,attrs:{perm:[0,2,1]}}),N.push(q));const Z=h!==1,te=h===1;let ue=M;Z&&(ue=Le({inputs:{x:M},backend:s,attrs:{shape:[k,O,1]}}),N.push(ue));const de=h===1?2:1;let le=q;te&&(le=Le({inputs:{x:q},backend:s,attrs:{shape:[k,1,O]}}),N.push(le));const he=DR({inputs:{a:ue,b:le},backend:s});G=c3({inputs:{x:he},backend:s,attrs:{axis:de,keepDims:!0}}),N.push(he)}else{const M=_i(t.dtype,e.dtype),q=new ote(w,C,[k,f,h],n,r,U,W,P,V),Z=[B,S];if(i!=null&&Z.push(i),P&&Z.push(o),V){const te=s.makeTensorInfo([],"float32",oA(a,"float32"));Z.push(te),N.push(te)}G=s.runWebGLProgram(q,Z,M)}const D=Le({inputs:{x:G},backend:s,attrs:{shape:b}});N.push(G);for(const M of N)s.disposeIntermediateTensorInfo(M);return D}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c6e(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:A}=r;return k2({a:s,b:i,transposeA:l,transposeB:c,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:A,activation:u})}const u6e={kernelName:t2,backendName:"webgl",kernelFunc:c6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L5="return abs(x);";function A6e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),o=Jee(i.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let s;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new gu(r.shape,L5):s=new rl(r.shape,L5),n.runWebGLProgram(s,[r],r.dtype)}const d6e={kernelName:yS,backendName:"webgl",kernelFunc:A6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f6e=Xo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,h6e=Qt({opSnippet:f6e}),p6e={kernelName:cx,backendName:"webgl",kernelFunc:h6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m6e=Xo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,g6e=Qt({opSnippet:m6e}),y6e={kernelName:ux,backendName:"webgl",kernelFunc:g6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j5="return a + b;",x6e=as({opSnippet:j5,packedOpSnippet:j5,supportsComplex:!0,cpuKernelImpl:kje}),v6e={kernelName:em,backendName:"webgl",kernelFunc:x6e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b6e{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w6e{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ow(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Ri({inputs:{x:r[0]},backend:n});if(r.length>fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=ow({inputs:r.slice(0,l),backend:n}),u=ow({inputs:r.slice(l),backend:n});return ow({inputs:[c,u],backend:n})}const s=r.map(l=>l.dtype).reduce((l,c)=>_i(l,c)),i=r.map(l=>l.shape),a=fe().getBool("WEBGL_PACK")?new w6e(r[0].shape,i):new b6e(r[0].shape,i);return n.runWebGLProgram(a,r,s)}const C6e={kernelName:xS,backendName:"webgl",kernelFunc:ow};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=kt(i,s.shape);let c=l;const u=Hn(c,a);let A=s;u!=null&&(A=Ms({inputs:{x:s},backend:n,attrs:{perm:u}}),c=ar(c.length,a)),is("all",c,a);const[d,f]=Vr(A.shape,c),h=ge(f),p=Le({inputs:{x:A},backend:n,attrs:{shape:[-1,h]}}),m=yf(p,p.dtype,"all",n);let y;if(o){const x=or(d,l);y=Le({inputs:{x:m},backend:n,attrs:{shape:x}})}else y=Le({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),u!=null&&n.disposeIntermediateTensorInfo(A),y}const B6e={kernelName:N_,backendName:"webgl",kernelFunc:S6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=kt(i,s.shape);let c=l;const u=Hn(c,a);let A=s;u!=null&&(A=Ms({inputs:{x:s},backend:n,attrs:{perm:u}}),c=ar(c.length,a)),is("any",c,a);const[d,f]=Vr(A.shape,c),h=ge(f),p=Le({inputs:{x:A},backend:n,attrs:{shape:[-1,h]}}),m=yf(p,p.dtype,"any",n);let y;if(o){const x=or(d,l);y=Le({inputs:{x:m},backend:n,attrs:{shape:x}})}else y=Le({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),u!=null&&n.disposeIntermediateTensorInfo(A),y}const E6e={kernelName:E_,backendName:"webgl",kernelFunc:N6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I6e{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:i,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k6e{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,L(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],o=Math.ceil(i/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),s||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=an(l),u=Ps("coords",l);let A,d;if(o===1){d=l+1;const S=an(d);A=`
        ${S} sourceLocR = ${S}(${u.join()}, 0);
        ++${u[l-1]};
        ${S} sourceLocG = ${S}(${u.join()}, 0);
        ++${u[l-2]};
        ${S} sourceLocA = ${S}(${u.join()}, 0);
        --${u[l-1]};
        ${S} sourceLocB = ${S}(${u.join()}, 0);
        --${u[l-2]};`}else d=l,A=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const f=["x","y","z","w","u","v"].slice(0,d),h="."+f[d-1],p=f.map(S=>"int "+S),m=Ps("sourceLocR",d-1).concat("inIdx.r"),y=Ps("sourceLocG",d-1).concat("inIdx.g"),x=Ps("sourceLocB",d-1).concat("inIdx.b"),v=Ps("sourceLocA",d-1).concat("inIdx.a"),b=r==="max"?"greaterThan":"lessThan",w=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${v.join()})));`,C=`vec4(
            getAChannel(${m.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${x.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,B=s?"":`
      float getBestIndicesAChannel(${p.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${p.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${B}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${A}
        ivec4 srcIdx = ivec4(sourceLocR${h}, sourceLocG${h},
          sourceLocB${h}, sourceLocA${h}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${b}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lte(t,e,n,r=null){let s=e.shape[0],i=e.shape[1];r!=null&&(s=r.shape[0],i=r.shape[1]);const o=VB(i),a={windowSize:o,inSize:i,batchSize:s,outSize:Math.ceil(i/o)},l=new I6e(a,n,r==null),c=[e];r!=null&&c.push(r);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const A=lte(t,e,n,u);return t.disposeIntermediateTensorInfo(u),A}function cte(t,e,n,r=null){const s=r!=null?r.shape:e.shape,i=s[s.length-1],o=VB(i),a=new k6e(s,o,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===e.shape.length){const u=cte(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function ute(t,e,n,r){const s=[n];if(is("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!fe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],o=t.texData.get(e.dataId),a=o!==null&&o.isPacked;let l=e;a&&(l=t.unpackTensor(e),i.push(l));const[c,u]=Vr(l.shape,s),A=ge(u),d=Le({inputs:{x:l},backend:t,attrs:{shape:[-1,A]}});i.push(d);const f=lte(t,d,r);i.push(f);const h=Le({inputs:{x:f},backend:t,attrs:{shape:c}});return i.forEach(p=>t.disposeIntermediateTensorInfo(p)),h}return cte(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=kt(i,s.shape);const a=Hn(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Ms({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=ar(o.length,l.shape.length)),is("argMax",[o[0]],l.shape.length);const u=ute(n,l,o[0],"max");return c.forEach(A=>n.disposeIntermediateTensorInfo(A)),u}const F6e={kernelName:vS,backendName:"webgl",kernelFunc:T6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=kt(i,s.shape);const a=Hn(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Ms({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=ar(o.length,l.shape.length)),is("argMin",[o[0]],l.shape.length);const u=ute(n,l,o[0],"min");return c.forEach(A=>n.disposeIntermediateTensorInfo(A)),u}const _6e={kernelName:bS,backendName:"webgl",kernelFunc:$6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O6e=Xo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,D6e=Qt({opSnippet:O6e}),R6e={kernelName:Ax,backendName:"webgl",kernelFunc:D6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P6e=Xo+"return log(x + sqrt(x * x + 1.0));",U6e=Qt({opSnippet:P6e}),L6e={kernelName:dx,backendName:"webgl",kernelFunc:U6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j6e=Xo+`
  return atan(x);
`,M6e=Qt({opSnippet:j6e}),Q6e={kernelName:fx,backendName:"webgl",kernelFunc:M6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H6e=OR+`
  return atan(a, b);
`,z6e=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+gf+`
  return result;
`,V6e=as({opSnippet:H6e,packedOpSnippet:z6e}),W6e={kernelName:px,backendName:"webgl",kernelFunc:V6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G6e=Xo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,K6e=Qt({opSnippet:G6e}),X6e={kernelName:hx,backendName:"webgl",kernelFunc:K6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a0{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,A=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;const p=n==="avg",m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,y=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let x="0.0";if(p||(x="-1.0 / 1e-20"),r){const S=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${f}, ${h});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${A};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${S} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?i?m:y:`wR * ${d} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const v="max";let b=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(b="avgValue / max(count, 1.0)");const w=Math.floor(o/4)*4,C=o%4,B=`
      if (${p}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${v}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${f}, ${h});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${A};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${B}
          }

          int xC = xCCorner + ${w};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${B}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${B}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${B}
          }
        }
        setOutput(${b});
      }
    `}}class RR{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,A=e.dilationHeight,d=e.dilationWidth,f=e.effectiveFilterDepth,h=e.effectiveFilterHeight,p=e.effectiveFilterWidth,m=e.padInfo.front,y=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const v=n==="avg";let b="0.0";if(v||(b="-1.0 / 1e-20"),r){const k=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${m}, ${y}, ${x});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${h};
                wR += ${A}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${p};
                  wC += ${d}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${k} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${h} * ${p} +
                      wR * ${p} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / max(count, 1.0)");const B=Math.floor(o/4)*4,S=o%4,N=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${m}, ${y}, ${x});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h};
            wR += ${A}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${B}; wC += 4) {
              int xC = xCCorner + wC * ${d};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                getValue(batch, xD, xR, xC + 3 * ${d}, ch)
              );

              ${N}
            }

            int xC = xCCorner + ${B};
            if (${S===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${N}
            } else if (${S===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                initializationValue,
                initializationValue
              );

              ${N}
            } else if (${S===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                initializationValue
              );

              ${N}
            }
          }
        }
        setOutput(${C});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Bv(s,"avgPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;L(ss(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Go(s.shape,i,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&_t(u.inShape,u.outShape))return Ri({inputs:{x:s},backend:n});const A=new a0(u,"avg",!1);return n.runWebGLProgram(A,[s],"float32")}const Y6e={kernelName:wS,backendName:"webgl",kernelFunc:q6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],A=Nc(s.shape,i,o,u,a,l,c),d=new RR(A,"avg",!1);return n.runWebGLProgram(d,[s],"float32")}const Z6e={kernelName:CS,backendName:"webgl",kernelFunc:J6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e5e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,A=c-1-e.padInfo.left,d=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${A});
      const float avgMultiplier = float(${d});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class t5e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,A=e.effectiveFilterDepth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=A-1-e.padInfo.front,p=d-1-e.padInfo.top,m=f-1-e.padInfo.left,y=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${h}, ${p}, ${m});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${A};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,A=[1,1,1],d=Nc(o.shape,a,l,A,c,u),f=new t5e(d);return n.runWebGLProgram(f,[s],o.dtype)}const r5e={kernelName:k_,backendName:"webgl",kernelFunc:n5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;Bv([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=Go(o.shape,a,l,1,c),A=new e5e(u);return n.runWebGLProgram(A,[s],o.dtype)}const i5e={kernelName:I_,backendName:"webgl",kernelFunc:s5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o5e(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;return k2({a:s,b:i,transposeA:o,transposeB:a,backend:n})}const a5e={kernelName:SS,backendName:"webgl",kernelFunc:o5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l5e{constructor(e,n,r,s,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],vt(e,n),vt(e,r);let a="0.0";s!=null&&(vt(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";i!=null&&(vt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c5e{constructor(e,n,r,s,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],vt(e,n),vt(e,r);let a="vec4(0.0)";s!=null&&(vt(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(vt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u5e=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:i,offset:o,scale:a}=t;L(s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),L(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),L(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,s,i];let u=null;o!=null&&(u=o.shape,c.push(o));let A=null;a!=null&&(A=a.shape,c.push(a));const d=fe().getBool("WEBGL_PACK_NORMALIZATION")?new c5e(r.shape,s.shape,i.shape,u,A,l):new l5e(r.shape,s.shape,i.shape,u,A,l);return e.runWebGLProgram(d,c,c[0].dtype)},A5e={kernelName:PS,backendName:"webgl",kernelFunc:u5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d5e{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=an(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=f5e(this.rank);let s;const i=e.map((o,a)=>`sourceLoc.${pT[a]} = start[${a}] + coords.${pT[a]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const pT=["x","y","z","w","u","v"];function f5e(t){if(t===1)return"sourceLoc";if(t<=6)return pT.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h5e{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=an(this.rank),r=Ps("coords",this.rank),s=Ps("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,o=`getChannel(getSource(${s.join()}), ${i})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${o};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${o};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,A)=>`start[${A}]`).join()});`:e.map((u,A)=>`${s[A]} = ${r[A]} + start[${A}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p5e(t,e,n,r){const s=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),o=r.texData.get(i.dataId);Object.assign(o,s),o.refCount=1,o.shape=n,o.dtype=t.dtype;let a=TD(e,ot(t.shape));s.slice&&(a+=s.slice.flatOffset),o.slice={flatOffset:a,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),i}function hm(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r,[a,l]=zB(s,i,o);if(ED(s,a,l),ge(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const A=n.texData.get(s.dataId),d=aMe(A.values,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,d)}const{isPacked:c}=n.texData.get(s.dataId),u=kD(s.shape,a,l);if(c||!u){const A=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new h5e(l):new d5e(l),d=[a];return n.runWebGLProgram(A,[s],s.dtype,d)}return n.uploadToGPU(s.dataId),p5e(s,a,l,n)}const m5e={kernelName:dB,backendName:"webgl",kernelFunc:hm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g5e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;L(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((x,v)=>x*v),l=dv(s.shape,i,a),c=fv(l.length,i.length),u=hv(s.shape,i,a),A=DD(o,i.length),d=RD(u,o,i.length),f=[],h=Le({inputs:{x:s},backend:n,attrs:{shape:l}}),p=Ms({inputs:{x:h},backend:n,attrs:{perm:c}}),m=Le({inputs:{x:p},backend:n,attrs:{shape:u}}),y=hm({inputs:{x:m},backend:n,attrs:{begin:A,size:d}});return f.push(h),f.push(p),f.push(m),f.forEach(x=>n.disposeIntermediateTensorInfo(x)),y},y5e={kernelName:BS,backendName:"webgl",kernelFunc:g5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.readSync(s.dataId),l=n.readSync(i.dataId),c=Yee(a,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}const v5e={kernelName:T_,backendName:"webgl",kernelFunc:x5e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b5e=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,w5e=`
  return float(int(a.r) & int(b.r));
`;function C5e(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=fe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||o===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(s.dataId).values,[u,A]=Fje(r.shape,s.shape,l,c,r.dtype),d=n.makeTensorInfo(A,r.dtype),f=n.texData.get(d.dataId);return f.values=u,d}let a;return i?a=new dm(b5e,r.shape,s.shape,!1):a=new Jd(w5e,r.shape,s.shape),n.runWebGLProgram(a,[r,s],r.dtype)}const S5e={kernelName:NS,backendName:"webgl",kernelFunc:C5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B5e(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.readSync(r.dataId),o=n.readSync(s.dataId),a=vt(Array.from(i),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const N5e={kernelName:F_,backendName:"webgl",kernelFunc:B5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E5e="return float(a != b);",Ate=as({opSnippet:E5e,cpuKernelImpl:Jje,dtype:"bool"}),I5e={kernelName:eB,backendName:"webgl",kernelFunc:Ate};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ev(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Ri({inputs:{x:s.complexTensorInfos.real},backend:n})}const k5e={kernelName:uO,backendName:"webgl",kernelFunc:Ev};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T5e="return float(int(x));";function F5e(t,e){const n=new rl(t.shape,T5e),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mT(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return Ri({inputs:{x:s},backend:n});const o=Sr(s.shape),a=mT({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=mA({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),l}if(s.dtype==="complex64"){const o=Ev({inputs:{input:s},backend:n}),a=mT({inputs:{x:o},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(o),a}if(!fK(s.dtype,i)){const o=Ri({inputs:{x:s},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:i}}if(n.shouldExecuteOnCPU([s])){const o=n.texData.get(s.dataId).values,[a,l,c]=$je(o,s.shape,s.dtype,i);return n.makeTensorInfo(a,l,c)}if(i==="int32")return F5e(s,n);if(i==="bool"){const o=n.makeTensorInfo([],"bool",ns("bool",1)),l=Ate({inputs:{a:s,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}const $5e={kernelName:mx,backendName:"webgl",kernelFunc:mT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M5="return ceil(x);",_5e=Qt({opSnippet:M5,packedOpSnippet:M5,cpuKernelImpl:_je}),O5e={kernelName:gx,backendName:"webgl",kernelFunc:_5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D5e{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R5e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:i,clipValueMax:o}=r;let a;fe().getBool("WEBGL_PACK_CLIP")?a=new R5e(s.shape):a=new D5e(s.shape);const l=[[i],[o]];return n.runWebGLProgram(a,[s],s.dtype,l)}const U5e={kernelName:yx,backendName:"webgl",kernelFunc:P5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L5e{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q5(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function j5e(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),i=new L5e(r.shape),o=[Q5(r,s.complexTensorInfos.real),Q5(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}const M5e={kernelName:ES,backendName:"webgl",kernelFunc:j5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q5e{constructor(e){this.outputShape=[],this.outputShape=cl(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const s=n.length,i=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H5e{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=cl(e,n);const r=this.outputShape,s=r.length,i=an(s),o=Ps("coords",s),a=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((p,m)=>`T${m}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let p=1;p<l.length;p++)l[p]=l[p-1]+e[p][n];const c=a[n],u=a.slice(-2),A=a.join();let d=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${A}), vec2(${u.join()}));
        }`;for(let p=1;p<l.length;p++){const m=l[p-1];d+=`
        if (${c} < ${l[p]}  && ${c} >= ${l[p-1]}) {
          return getChannel(
            getT${p}(${yb(a,c,m)}),
            vec2(${yb(u,c,m)}));
        }`}const f=l.length,h=l[l.length-1];d+=`
        return getChannel(
          getT${f}(${yb(a,c,h)}),
          vec2(${yb(u,c,h)}));`,this.userCode=`
      float getValue(${a.map(p=>"int "+p)}) {
        ${d}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[s-1]} = ${o[s-1]} + 1;
        if (${o[s-1]} < ${r[s-1]}) {
          result.g = getValue(${o});
        }

        ${o[s-2]} = ${o[s-2]} + 1;
        if (${o[s-2]} < ${r[s-2]}) {
          result.a = getValue(${o});
        }

        ${o[s-1]} = ${o[s-1]} - 1;
        if (${o[s-2]} < ${r[s-2]} &&
            ${o[s-1]} < ${r[s-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function yb(t,e,n){const r=t.indexOf(e);return t.map((i,o)=>o===r?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u3(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Ri({inputs:{x:s.complexTensorInfos.imag},backend:n})}const z5e={kernelName:q_,backendName:"webgl",kernelFunc:u3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mg(t,e,n){const r=t[0].dtype;if(r==="complex64"){const f=t.map(x=>Ev({inputs:{input:x},backend:n})),h=t.map(x=>u3({inputs:{input:x},backend:n})),p=Mg(f,e,n),m=Mg(h,e,n),y=mA({inputs:{real:p,imag:m},backend:n});return f.forEach(x=>n.disposeIntermediateTensorInfo(x)),h.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),y}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const f=t.map(b=>{const C=[-1,ge(b.shape.slice(e))];return Le({inputs:{x:b},backend:n,attrs:{shape:C}})}),h=f.map(b=>({vals:n.readSync(b.dataId),shape:b.shape})),p=cl(f.map(b=>b.shape),1),m=f[0].shape[0]===1,y=Oje(h,p,r,m),x=cl(t.map(b=>b.shape),e),v=n.makeTensorInfo(x,r,y);return f.forEach(b=>n.disposeIntermediateTensorInfo(b)),v}const i=t.filter(f=>ge(f.shape)>0),o=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const f=o?new rl(t[0].shape,qc):new gu(t[0].shape,qc);return n.runWebGLProgram(f,t,r)}const a=fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>a){const f=[];for(let p=0;p<i.length;p+=a){const m=i.slice(p,p+a);f.push(Mg(m,e,n))}const h=Mg(f,e,n);for(const p of f)n.disposeIntermediateTensorInfo(p);return h}if(o){const f=new H5e(i.map(h=>h.shape),e);return n.runWebGLProgram(f,i,r)}const{tensors2D:l,outShape:c}=V5e(i,e,n),u=new Q5e(l.map(f=>f.shape)),A=n.runWebGLProgram(u,l,r);l.forEach(f=>n.disposeIntermediateTensorInfo(f));const d=Le({inputs:{x:A},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(A),d}function V5e(t,e,n){const r=cl(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>Le({inputs:{x:i},attrs:{shape:[-1,ge(i.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dte(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=kt(s,e[0].shape)[0],o=e.map(c=>c.shape);$D(o,i);const a=cl(e.map(c=>c.shape),i);if(ge(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(c=>ge(c.shape)>0);return l.length===1?Ri({inputs:{x:l[0]},backend:n}):Mg(l,i,n)}const W5e={kernelName:IS,backendName:"webgl",kernelFunc:dte};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fte{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,A=e.dilationWidth,d=e.filterHeight,f=e.filterWidth,h=Math.floor(e.inChannels/4)*4,p=e.inChannels%4,m=e.dataFormat==="channelsLast",y=m?1:2,x=m?2:3,v=m?3:1;let b="",w="";r&&(s?b=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?b=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:b=`
          float activation(float x) {
            ${r}
          }
        `,w="result = activation(result);");const C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${b}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${v}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${x}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${d}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${A};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${h}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${m}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${p===1}) {

              if (${m}) {
                dotProd +=
                    getX(batch, xR, xC, ${h}) *
                    getW(wR, wC, ${h}, d2);
              } else {
                dotProd +=
                    getX(batch, ${h}, xR, xC) *
                    getW(wR, wC, ${h}, d2);
              }

            } else if (${p===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${h}, d2),
                getW(wR, wC, ${h} + 1, d2)
              );

              if (${m}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${h}),
                  getX(batch, xR, xC, ${h} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${h}, xR, xC),
                  getX(batch, ${h} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${p===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${h}, d2),
                getW(wR, wC, ${h} + 1, d2),
                getW(wR, wC, ${h} + 2, d2)
              );

              if (${m}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${h}),
                  getX(batch, xR, xC, ${h} + 1),
                  getX(batch, xR, xC, ${h} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${h}, xR, xC),
                  getX(batch, ${h} + 1, xR, xC),
                  getX(batch, ${h} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${w}
        setOutput(result);
      }
    `}}class G5e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,A=e.filterDepth,d=e.filterHeight,f=e.filterWidth,h=Math.floor(e.inChannels/4)*4,p=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${A}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${d}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${h}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${p===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${h}) *
                  getW(wF, wR, wC, ${h}, d2);
              } else if (${p===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${h}),
                  getX(batch, xF, xR, xC, ${h} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${h}, d2),
                  getW(wF, wR, wC, ${h} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${p===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${h}),
                  getX(batch, xF, xR, xC, ${h} + 1),
                  getX(batch, xF, xR, xC, ${h} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${h}, d2),
                  getW(wF, wR, wC, ${h} + 1, d2),
                  getW(wF, wR, wC, ${h} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hte{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ws(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,A=u;let d=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let m=0;m<u;m++)d+=`
           vec4 xTexelC${m*2};
           int xTexelC${m*2}Ready;
           vec4 xTexelC${m*2+1};
           int xTexelC${m*2+1}Ready;
           vec4 xC${m};`;d+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let m=0;m<u;m++)d+=`
           xTexelC${m*2} = vec4(0.0);
           xTexelC${m*2}Ready = 0;
           xTexelC${m*2+1} = vec4(0.0);
           xTexelC${m*2+1}Ready = 0;
           xC${m} = vec4(0.0);`;d+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let m=0;m<(A+1)/2;m++){const y=m*2;if(d+=`
           xC = xCCorner + ${y*l};
           `,a===1){if(y<u&&(o%2===1?(d+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }
               `,l===1&&y>0?d+=`
                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                 `:d+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                   } else {
                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                   }
                   `):d+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xC${y} = xTexelC${y};
                 `,y+1<u)){const x=o%2===0?C_(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(d+=`
                   xCOffset = xC + imod(pads[1], 2) + ${x};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${y+1}.zw = vec2(0.0);
                     }
                     xTexelC${y+1}Ready = 1;
                   }
                   `,l>1?d+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                     } else {
                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                     }
                     `:d+=`
                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                     `):x===1?d+=`
                     xC${y+1} = xTexelC${y};
                     `:d+=`
                     xCOffset = xC + ${x};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${y+1}.zw = vec2(0.0);
                       }
                       xTexelC${y+1}Ready = 1;
                     }

                     xC${y+1} = xTexelC${y+1};
                     `}}else y<u&&(o%2===1?(d+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.0);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
               `,y+1<u&&(d+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                 `)):(d+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(
                   xTexelC${y}.xy, xTexelC${y+1}.xy);
               `,y+1<u&&(d+=`
                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                 `)));y<u&&(d+=`
             wTexel = getW(r, ${y}, d1, d2);
             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,y+1<u&&(d+=`
               wTexel = getW(r, ${y+1}, d1, d2);
               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}d+=`
     }
   `,d+=`
     }
   `,d+=`
     }
   `;let f="",h="";r&&(s?f=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?f=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:f=`vec4 activation(vec4 x) {
           ${r}
         }`,h="result = activation(result);");const p=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${f}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${d}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${p}
         ${h}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K5e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length);const{dataFormat:r}=n,s=zs(),i=r==="channelsLast",o=i?1:2,a=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let A=0;A<=1;A++)c+=`
          blockIndex = rc.z + ${A};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+A}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+A}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T2(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function pte({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,c=r.texData.get(t.dataId),u=n.inChannels,A=l[0]*l[1]*l[2],d=n.outChannels,f=n.dataFormat==="channelsLast",h=!1,p=!1;let m;const y=[];if(i!=null){const b=T2(i.shape,f);b!=null&&(i=Le({inputs:{x:i},backend:r,attrs:{shape:b}}),y.push(i))}if(s!=null){const b=T2(s.shape,f);b!=null&&(s=Le({inputs:{x:s},backend:r,attrs:{shape:b}}),y.push(s))}if(!((A===1||d===1)&&u>ate)&&c.isPacked&&f&&c.texture!=null&&l[2]%2!==0&&_t(c.shape.slice(-3),l.slice(-3))){const b=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,b,n.inChannels],dtype:t.dtype},C=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,L(I2(c.shape,w.shape),()=>`packed reshape ${c.shape} to ${w.shape} isn't free`);const B=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});y.push(B);const S=k2({a:w,b:B,backend:r,transposeA:h,transposeB:p,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o}),N=r.texData.get(S.dataId);L(N.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=C,N.shape=n.outShape,m=Ri({inputs:{x:S},backend:r}),m.shape=n.outShape,y.push(S)}else{const b=n.outHeight*n.outWidth,w=Le({inputs:{x:t},backend:r,attrs:{shape:f?[n.batchSize,b,n.inChannels]:[n.batchSize,n.inChannels,b]}}),C=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),B=k2({a:f?w:C,b:f?C:w,transposeA:!f,transposeB:p,backend:r,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o});m=Le({inputs:{x:B},backend:r,attrs:{shape:n.outShape}}),y.push(w),y.push(C),y.push(B)}for(const b of y)r.disposeIntermediateTensorInfo(b);return m}function mte({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:A,outHeight:d,dataFormat:f}=n,h=f==="channelsLast",p=l*c*u,m=d*A,y=[n.batchSize,p,m],x=!0,v=!1,b=[];if(i!=null){const D=T2(i.shape,h);D!=null&&(i=Le({inputs:{x:i},backend:r,attrs:{shape:D}}),b.push(i))}if(s!=null){const D=T2(s.shape,h);D!=null&&(s=Le({inputs:{x:s},backend:r,attrs:{shape:D}}),b.push(s))}const w=Le({inputs:{x:e},backend:r,attrs:{shape:[1,p,ge(e.shape)/p]}});b.push(w);const C=new K5e(y,n),B=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],S=r.runWebGLProgram(C,[t],"float32",B),N=Le({inputs:{x:S},backend:r,attrs:{shape:y}});b.push(S),b.push(N);const k=s!=null,O=i!=null,U=a==="leakyrelu",P=a?o0(a,!0):null,V=new ote(h?N.shape:w.shape,h?w.shape:N.shape,h?[n.batchSize,m,n.outChannels]:[n.batchSize,n.outChannels,m],x,v,k,P,O,U),W=h?[N,w]:[w,N];if(s&&W.push(s),O&&W.push(i),U){const D=r.makeTensorInfo([],"float32",oA(o,"float32"));W.push(D),b.push(D)}const j=r.runWebGLProgram(V,W,"float32"),G=Le({inputs:{x:j},backend:r,attrs:{shape:n.outShape}});b.push(j);for(const D of b)r.disposeIntermediateTensorInfo(D);return G}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,A=Ec(l),d=zr(s.shape,i.shape,o,c,a,u,!1,A);let f;if(d.filterHeight===1&&d.filterWidth===1&&d.dilationHeight===1&&d.dilationWidth===1&&d.strideHeight===1&&d.strideWidth===1&&(d.padInfo.type==="SAME"||d.padInfo.type==="VALID"))f=pte({x:s,filter:i,convInfo:d,backend:n});else if(d.strideWidth<=2&&A==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const p=new hte(d),m=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];f=n.runWebGLProgram(p,[s,i],"float32",m)}else if(fe().getBool("WEBGL_CONV_IM2COL"))f=mte({x:s,filter:i,convInfo:d,backend:n});else{const p=new fte(d);f=n.runWebGLProgram(p,[s,i],"float32")}const h=Le({inputs:{x:f},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(f),h}const q5e={kernelName:kS,backendName:"webgl",kernelFunc:X5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y5e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class J5e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=o?1:2,u=o?2:3,A=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${A}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Z5e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class eQe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,u=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,A=Ec(l),d=zr(s.shape,u,o,1,a,c,!1,A),f=new Y5e(d);return n.runWebGLProgram(f,[s,i],"float32")}const nQe={kernelName:__,backendName:"webgl",kernelFunc:tQe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rQe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=ws(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sQe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,A=Ec(c),d=zr(o,i.shape,a,1,l,u,!1,A);if(fe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&A==="channelsLast"){const f=[[d.strideHeight,d.strideWidth]],h=new rQe(d);return n.runWebGLProgram(h,[s,i],"float32",f)}else{const f=new J5e(d);return n.runWebGLProgram(f,[s,i],"float32")}}const iQe={kernelName:TS,backendName:"webgl",kernelFunc:sQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,c=cA(s.shape,i.shape,o,l,a),u=new G5e(c);return n.runWebGLProgram(u,[s,i],"float32")}const aQe={kernelName:FS,backendName:"webgl",kernelFunc:oQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:l}=r,c=cA(s.shape,l,o,1,a),u=new Z5e(c);return n.runWebGLProgram(u,[s,i],"float32")}const cQe={kernelName:O_,backendName:"webgl",kernelFunc:lQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uQe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:l}=r,c=cA(l,i.shape,a,1,o),u=new eQe(c);return n.runWebGLProgram(u,[s,i],"float32")}const AQe={kernelName:D_,backendName:"webgl",kernelFunc:uQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dQe=fm+`
  return cos(x);
`,fQe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${gf}
  return result;
`,hQe=Qt({opSnippet:dQe,packedOpSnippet:fQe}),pQe={kernelName:xx,backendName:"webgl",kernelFunc:hQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mQe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,gQe=Qt({opSnippet:mQe}),yQe={kernelName:vx,backendName:"webgl",kernelFunc:gQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xQe{constructor(e,n,r,s,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,c]=e,[u]=n,[A,d]=r;this.outputShape=[u,A,d,c];const f=s==="bilinear"?1:0,[h,p]=[`${a-1}.0`,`${l-1}.0`],[m,y,x]=A>1?[`${(a-1)/(A-1)}`,"(y2-y1) * height_ratio",`y1*${h} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${h}`],[v,b,w]=d>1?[`${(l-1)/(d-1)}`,"(x2-x1) * width_ratio",`x1*${p} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${p}`];this.userCode=`
      const float height_ratio = float(${m});
      const float width_ratio = float(${v});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${b};

        float in_y = ${x};
        if( in_y < 0.0 || in_y > ${h} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${p} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${f} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vQe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,u=new xQe(s.shape,i.shape,a,l,c);return n.runWebGLProgram(u,[s,i,o],"float32")},bQe={kernelName:P_,backendName:"webgl",kernelFunc:vQe};var l0;(function(t){t.Prod="*",t.Sum="+"})(l0||(l0={}));class H5{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===l0.Prod?"1.0":"0.0",a=r?o:`getX(${z5(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=s?`end != ${l-1}`:"end != 0",u=s?"end + 1":"end - 1"):(c=s?`end + pow2 < ${l}`:"end >= pow2",u=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${an(i)} coords = getOutputCoords();
        int end = ${V5(i,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${V5(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${z5(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function z5(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function V5(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gte(t,e,n,r,s,i){const o=e.shape.length,a=Hn([r],o);let l=e;a!=null&&(l=Ms({inputs:{x:e},backend:n,attrs:{perm:a}}));const c=ar(1,o)[0];if(c!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let A=Ri({inputs:{x:l},backend:n});for(let d=0;d<=Math.ceil(Math.log2(u))-1;d++){const f=new H5(t,l.shape,!1,i),h=[[d]],p=A;A=n.runWebGLProgram(f,[A],A.dtype,h),n.disposeIntermediateTensorInfo(p)}if(s){const d=new H5(t,l.shape,s,i),f=A;A=n.runWebGLProgram(d,[A],A.dtype),n.disposeIntermediateTensorInfo(f)}if(a!=null){const d=uA(a),f=Ms({inputs:{x:A},backend:n,attrs:{perm:d}});return n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(l),f}return A}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return gte(l0.Prod,s,n,i,o,a)}const CQe={kernelName:R_,backendName:"webgl",kernelFunc:wQe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return gte(l0.Sum,s,n,i,o,a)}const BQe={kernelName:$S,backendName:"webgl",kernelFunc:SQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(s.shape.length===1){const l=n.readSync(s.dataId),c=n.readSync(i.dataId),u=Yee(l,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(i),u=Tje(l,c,o,a);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const EQe={kernelName:U_,backendName:"webgl",kernelFunc:NQe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IQe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:o}=r,a=s.shape[0],l=o==="NHWC"?s.shape[1]:s.shape[2],c=o==="NHWC"?s.shape[2]:s.shape[3],u=o==="NHWC"?s.shape[3]:s.shape[1],A=l*i,d=c*i,f=u/(i*i),h=o==="NHWC"?[a,A,d,f]:[a,f,A,d],p=new IQe(h,i,o);return n.runWebGLProgram(p,[s],s.dtype)}const TQe={kernelName:L_,backendName:"webgl",kernelFunc:kQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yte{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ws(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(s?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const A=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${A}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xte{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ws(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,A=e.filterWidth,d=A;let f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<A;y++)f+=`
          vec4 xTexelC${y*2};
          int xTexelC${y*2}Ready;
          vec4 xTexelC${y*2+1};
          int xTexelC${y*2+1}Ready;
          vec4 xC${y};`;f+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let y=0;y<A;y++)f+=`
          xTexelC${y*2} = vec4(0.0);
          xTexelC${y*2}Ready = 0;
          xTexelC${y*2+1} = vec4(0.0);
          xTexelC${y*2+1}Ready = 0;
          xC${y} = vec4(0.0);`;f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let y=0;y<(d+1)/2;y++){const x=y*2;if(f+=`
          xC = xCCorner + ${x*c};
          `,l===1){if(x<A&&(a%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }
              `,c===1&&x>0?f+=`
                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                `:f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                  } else {
                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                  }
                  `):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xC${x} = xTexelC${x};
                `,x+1<A)){const v=a%2===0?C_(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + ${v};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${x+1}.zw = vec2(0.0);
                    }
                    xTexelC${x+1}Ready = 1;
                  }
                  `,c>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                    } else {
                     xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                    }
                    `:f+=`
                    xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                    `):v===1?f+=`
                    xC${x+1} = xTexelC${x};
                    `:f+=`
                    xCOffset = xC + ${v};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${x+1}.zw = vec2(0.0);
                      }
                      xTexelC${x+1}Ready = 1;
                    }

                    xC${x+1} = xTexelC${x+1};
                    `}}else x<A&&(a%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.0);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
              `,x+1<A&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                `)):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(
                  xTexelC${x}.xy, xTexelC${x+1}.xy);
              `,x+1<A&&(f+=`
                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                `)));x<A&&(f+=`
            wTexel = getW(r, ${x}, d1, q);
            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);
          `,x+1<A&&(f+=`
              wTexel = getW(r, ${x+1}, d1, q);
              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);
            `))}f+=`
    }
  `,f+=`
      }
    `;let h="",p="";r&&(s?h=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?h=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:h=`vec4 activation(vec4 x) {
          ${r}
        }`,p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${h}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${f}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${m}
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),L(ss(o,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const A=zr(s.shape,i.shape,o,u,a,c,!0);let d;fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&A.strideWidth<=2&&A.outChannels/A.inChannels===1?d=new xte(A):d=new yte(A);const f=[[A.padInfo.top,A.padInfo.left],[A.strideHeight,A.strideWidth],[A.dilationHeight,A.dilationWidth],[A.inHeight,A.inWidth]];return n.runWebGLProgram(d,[s,i],"float32",f)}const $Qe={kernelName:_S,backendName:"webgl",kernelFunc:FQe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Qe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class OQe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,A=zr(s.shape,u,o,a,l,c,!0),d=new _Qe(A);return n.runWebGLProgram(d,[s,i],"float32")}const RQe={kernelName:j_,backendName:"webgl",kernelFunc:DQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PQe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,A=zr(u,i.shape,o,a,l,c,!0),d=new OQe(A);return n.runWebGLProgram(d,[s,i],"float32")}const UQe={kernelName:M_,backendName:"webgl",kernelFunc:PQe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LQe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jQe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],i=ge(r.shape),o=Le({inputs:{x:r},backend:n,attrs:{shape:[i]}}),a=new LQe(i),l=n.runWebGLProgram(a,[o],o.dtype),c=Le({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const MQe={kernelName:Q_,backendName:"webgl",kernelFunc:jQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QQe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:i,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:A,left:d}=s;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${o});
      const ivec2 pads = ivec2(${A}, ${d});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,c=iv(s.shape,i.shape,o,a,"NHWC",l);let u;const A=new QQe(c);u=n.runWebGLProgram(A,[s,i],"float32");const d=Le({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),d}const zQe={kernelName:OS,backendName:"webgl",kernelFunc:HQe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VQe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:o,summedDims:a,idDims:l}=zD(s,i.length);WD(o.length,l,i);const{path:c,steps:u}=GD(a,l),A=u.length;let d=null,f=o.length;const h=[];for(let p=0;p<A;++p){for(const m of u[p]){const{permutationIndices:y,expandDims:x}=VD(f,l[m]);let v;KD(y)?v=i[m]:(v=Ms({inputs:{x:i[m]},backend:n,attrs:{perm:y}}),h.push(v));const b=v.shape.slice();for(let w=0;w<x.length;++w)b.splice(x[w],0,1);_t(v.shape,b)||(v=Le({inputs:{x:v},backend:n,attrs:{shape:b}}),h.push(v)),d===null?d=v:(d=DR({inputs:{a:v,b:d},backend:n}),h.push(d))}p<A-1&&(c[p]>=0&&(d=c3({inputs:{x:d},backend:n,attrs:{axis:c[p]-(o.length-f),keepDims:!1}}),h.push(d)),f--)}for(const p of h)p!==d&&n.disposeIntermediateTensorInfo(p);return d}const WQe={kernelName:H_,backendName:"webgl",kernelFunc:VQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GQe="return (x >= 0.0) ? x : (exp(x) - 1.0);",KQe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,XQe=Qt({opSnippet:GQe,packedOpSnippet:KQe}),qQe={kernelName:wx,backendName:"webgl",kernelFunc:XQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YQe="return (b >= 0.0) ? a : a * (b + 1.0);",JQe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,ZQe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new dm(JQe,r.shape,s.shape):new Jd(YQe,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],r.dtype)},e8e={kernelName:z_,backendName:"webgl",kernelFunc:ZQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t8e=`
  return vec4(equal(a, b));
`,n8e="return float(a == b);",r8e=as({opSnippet:n8e,packedOpSnippet:t8e,dtype:"bool",cpuKernelImpl:Dje}),s8e={kernelName:DS,backendName:"webgl",kernelFunc:r8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i8e=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${PD};
  float a1 = ${UD};
  float a2 = ${LD};
  float a3 = ${jD};
  float a4 = ${MD};
  float a5 = ${QD};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,o8e=Qt({opSnippet:i8e}),a8e={kernelName:Cx,backendName:"webgl",kernelFunc:o8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l8e=fm+`
  return exp(x);
`,c8e=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,vte=Qt({opSnippet:l8e,packedOpSnippet:c8e,cpuKernelImpl:Rje,dtype:"float32"}),u8e={kernelName:Sx,backendName:"webgl",kernelFunc:vte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gT(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:i}=e,o=i.shape.length,a=i.shape.slice();let l=s;return s<0&&(L(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),Le({inputs:{x:i},backend:r,attrs:{shape:a}})}const A8e={kernelName:RS,backendName:"webgl",kernelFunc:gT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W5="return exp(x) - 1.0;",d8e=Qt({opSnippet:W5,packedOpSnippet:W5,cpuKernelImpl:Pje}),f8e={kernelName:Bx,backendName:"webgl",kernelFunc:d8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G5{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${s}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bte(t,e,n){const r=n.texData.get(t.dataId),s=ge(t.shape),i=t.shape[t.shape.length-1],o=s/i,a=Le({inputs:{x:t},backend:n,attrs:{shape:[o,i]}}),l=a.shape,c=new G5("real",l,e),u=new G5("imag",l,e),A=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],d=n.runWebGLProgram(c,A,"float32"),f=n.runWebGLProgram(u,A,"float32"),h=mA({inputs:{real:d,imag:f},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f);const p=Le({inputs:{x:h},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(h),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h8e(t){const{inputs:e,backend:n}=t,{input:r}=e;return bte(r,!1,n)}const p8e={kernelName:V_,backendName:"webgl",kernelFunc:h8e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m8e{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iv(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:i}=n;if(i=i||Jp(s),i==="string"){const o=sr(i,ge(r));return o.fill(s),e.makeTensorInfo(r,i,o)}else{const o=new m8e(r,s),a=[[s]];return e.runWebGLProgram(o,[],i,a)}}const g8e={kernelName:W_,backendName:"webgl",kernelFunc:Iv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y8e{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x8e={kernelName:G_,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new y8e(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K5="return floor(x);",v8e=Qt({opSnippet:K5,packedOpSnippet:K5,cpuKernelImpl:Uje}),b8e={kernelName:Nx,backendName:"webgl",kernelFunc:v8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w8e=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,C8e=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,S8e=as({opSnippet:w8e,packedOpSnippet:C8e,dtype:"int32"}),B8e={kernelName:Ex,backendName:"webgl",kernelFunc:S8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N8e{constructor(e){this.variableNames=["A"];const n=zs(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E8e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=zs(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I8e={kernelName:Sk,backendName:"webgl",kernelFunc:k8e};let Mf,nE=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function k8e(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:i}=r,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],u=[c,l],A=[c,l,i];if(a||o){const p=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Mf==null||p!==nE)&&(nE=p,Mf=document.createElement("canvas").getContext("2d",{willReadFrequently:nE})),Mf.canvas.width=l,Mf.canvas.height=c,Mf.drawImage(s,0,0,l,c),s=Mf.canvas}const d=n.makeTensorInfo(u,"int32");n.texData.get(d.dataId).usage=Zi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),s);const f=fe().getBool("WEBGL_PACK")?new E8e(A):new N8e(A),h=n.runWebGLProgram(f,[d],"int32");return n.disposeData(d.dataId),h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:A,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=r,p=Ec(u),m=zr(s.shape,i.shape,l,A,c,d,!1,p);let y;const x=[],v=o!=null,b=a!=null,w=f==="leakyrelu",C=()=>{const S=[s,i],N=(k,O)=>{if(O==="NCHW"&&k.shape.length===1&&k.shape[0]!==1){const U=Le({inputs:{x:k},backend:n,attrs:{shape:[k.shape[0],1,1]}});return x.push(U),U}return k};if(v&&S.push(N(o,u)),b&&S.push(N(a,u)),w){const k=n.makeTensorInfo([],"float32",oA(h,"float32"));S.push(k),x.push(k)}return S};if(m.filterHeight===1&&m.filterWidth===1&&m.dilationHeight===1&&m.dilationWidth===1&&m.strideHeight===1&&m.strideWidth===1&&(m.padInfo.type==="SAME"||m.padInfo.type==="VALID"))y=pte({x:s,filter:i,convInfo:m,backend:n,bias:o,activation:f,preluActivationWeights:a,leakyreluAlpha:h});else if(m.strideWidth<=2&&p==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const S=f?o0(f,!0):null,N=new hte(m,v,S,b,w),k=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],O=C();y=n.runWebGLProgram(N,O,"float32",k)}else if(fe().getBool("WEBGL_CONV_IM2COL"))y=mte({x:s,filter:i,convInfo:m,backend:n,bias:o,activation:f,preluActivationWeights:a,leakyreluAlpha:h});else{const S=f?o0(f,!1):null,N=new fte(m,v,S,b,w),k=C();y=n.runWebGLProgram(N,k,"float32")}const B=Le({inputs:{x:y},backend:n,attrs:{shape:m.outShape}});return x.push(y),x.forEach(S=>n.disposeIntermediateTensorInfo(S)),B}const F8e={kernelName:n2,backendName:"webgl",kernelFunc:T8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:A,activation:d,leakyreluAlpha:f}=r,h=[];let p=u;p==null&&(p=[1,1]),L(ss(l,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${p}'`);const m=zr(s.shape,i.shape,l,p,c,A,!0),y=fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,x=d?o0(d,y):null,v=[s,i],b=o!=null,w=a!=null,C=d==="leakyrelu";if(b&&v.push(o),w&&v.push(a),C){const k=n.makeTensorInfo([],"float32",oA(f,"float32"));v.push(k),h.push(k)}let B;y?B=new xte(m,b,x,w,C):B=new yte(m,b,x,w,C);const S=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],N=n.runWebGLProgram(B,v,"float32",S);return h.forEach(k=>n.disposeIntermediateTensorInfo(k)),N}const _8e={kernelName:r2,backendName:"webgl",kernelFunc:$8e};class O8e{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const i=an(r.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D8e(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=s.shape,o=i[i.length-1],a=ge(r.shape),[l,c,u,A]=ND(r,s),d=Le({inputs:{x:s},backend:n,attrs:{shape:[c,o]}}),f=Le({inputs:{x:r},backend:n,attrs:{shape:[ge(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const y=n.readSync(s.dataId),x=n.bufferSync(r),v=Lje(y,x,r.dtype,c,o,u,A,r.shape,a);return n.makeTensorInfo(l,r.dtype,v.values)}const h=new O8e(o,A,[c,u],r.shape),p=n.runWebGLProgram(h,[f,d],f.dtype),m=Le({inputs:{x:p},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),m}const R8e={kernelName:K_,backendName:"webgl",kernelFunc:D8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P8e{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=an(this.rank),s=U8e(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function U8e(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wte(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:o,batchDims:a}=r,l=kt(o,s.shape)[0];if(fe().get("DEBUG")){const x=n.readSync(i.dataId),v=s.shape[l];for(let b=0;b<x.length;++b){const w=x[b];L(w<=v-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${v-1}]`)}}const c=qD(s,i,l,a),u=ge(i.shape),A=[],d=Le({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),f=Le({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});A.push(d),A.push(f);const h=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([s,i])||s.dtype==="string"){const x=n.bufferSync(f),v=n.bufferSync(d),b=jje(v,x,h);return A.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(c.outputShape,b.dtype,b.values)}const p=new P8e(d.shape,h),m=n.runWebGLProgram(p,[d,f],d.dtype);A.push(m);const y=Le({inputs:{x:m},backend:n,attrs:{shape:c.outputShape}});return A.forEach(x=>n.disposeIntermediateTensorInfo(x)),y}const L8e={kernelName:US,backendName:"webgl",kernelFunc:wte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j8e="return float(a > b);",M8e=`
  return vec4(greaterThan(a, b));
`,Q8e=as({opSnippet:j8e,packedOpSnippet:M8e,cpuKernelImpl:Mje,dtype:"bool"}),H8e={kernelName:LS,backendName:"webgl",kernelFunc:Q8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z8e="return float(a >= b);",V8e=`
  return vec4(greaterThanEqual(a, b));
`,W8e=as({opSnippet:z8e,packedOpSnippet:V8e,dtype:"bool",cpuKernelImpl:Qje}),G8e={kernelName:Ix,backendName:"webgl",kernelFunc:W8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K8e(t){const{inputs:e,backend:n}=t,{input:r}=e;return bte(r,!0,n)}const X8e={kernelName:X_,backendName:"webgl",kernelFunc:K8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q8e="return float(!isnan(x) && !isinf(x));",Y8e=Qt({opSnippet:q8e,dtype:"bool"}),J8e={kernelName:Tx,backendName:"webgl",kernelFunc:Y8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z8e="return float(isinf(x));",eHe=Qt({opSnippet:Z8e,dtype:"bool"}),tHe={kernelName:Fx,backendName:"webgl",kernelFunc:eHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nHe="return float(isnan(x));",rHe=Qt({opSnippet:nHe,dtype:"bool"}),sHe={kernelName:$x,backendName:"webgl",kernelFunc:rHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iHe="return float(a < b);",oHe=`
  return vec4(lessThan(a, b));
`,aHe=as({opSnippet:iHe,packedOpSnippet:oHe,cpuKernelImpl:Hje,dtype:"bool"}),lHe={kernelName:MS,backendName:"webgl",kernelFunc:aHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cHe="return float(a <= b);",uHe=`
  return vec4(lessThanEqual(a, b));
`,AHe=as({opSnippet:cHe,packedOpSnippet:uHe,cpuKernelImpl:zje,dtype:"bool"}),dHe={kernelName:QS,backendName:"webgl",kernelFunc:AHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fHe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=Vje(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}const hHe={kernelName:Y_,backendName:"webgl",kernelFunc:fHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pHe=fm+`
  return x < 0.0 ? 0./0. : log(x);
`,mHe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,gHe=Qt({opSnippet:pHe,packedOpSnippet:mHe,cpuKernelImpl:Wje}),yHe={kernelName:_x,backendName:"webgl",kernelFunc:gHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xHe=fm+`
  return log(1.0 + x);
`,vHe=Qt({opSnippet:xHe}),bHe={kernelName:Ox,backendName:"webgl",kernelFunc:vHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wHe="return float(a >= 1.0 && b >= 1.0);",CHe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,SHe=as({opSnippet:wHe,packedOpSnippet:CHe,dtype:"bool"}),BHe={kernelName:HS,backendName:"webgl",kernelFunc:SHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NHe="return float(!(x >= 1.0));",EHe=Qt({opSnippet:NHe}),IHe={kernelName:zS,backendName:"webgl",kernelFunc:EHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kHe="return float(a >= 1.0 || b >= 1.0);",THe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,FHe=as({opSnippet:kHe,packedOpSnippet:THe,dtype:"bool"}),$He={kernelName:VS,backendName:"webgl",kernelFunc:FHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _He{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[];const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OHe{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DHe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:l}=r,c=fe().getBool("WEBGL_PACK_NORMALIZATION")?new OHe(s.shape,i,o,a,l):new _He(s.shape,i,o,a,l);return n.runWebGLProgram(c,[s],s.dtype)},RHe={kernelName:WS,backendName:"webgl",kernelFunc:DHe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PHe{constructor(e,n,r,s,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UHe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r,A=new PHe(s.shape,a,l,c,u);return n.runWebGLProgram(A,[s,i,o],s.dtype)},LHe={kernelName:J_,backendName:"webgl",kernelFunc:UHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jHe(t,e,n,r){const s=ge(e),o=ge(t.shape)/s,a=Le({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=yf(a,t.dtype,"max",r),c=Le({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cte(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:o}=r,a=s.shape.length,l=kt(i,s.shape);let c=l;const u=Hn(c,a),A=u!=null,d=n.shouldExecuteOnCPU([s]);let f=s;if(A){if(d){const v=n.texData.get(f.dataId).values,b=new Array(a);for(let B=0;B<b.length;B++)b[B]=s.shape[u[B]];const w=_R(v,s.shape,s.dtype,u,b);f=n.makeTensorInfo(b,s.dtype);const C=n.texData.get(f.dataId);C.values=w}else f=l3(s,u,n);c=ar(c.length,a)}is("max",c,a);const[h,p]=Vr(f.shape,c);let m=h;o&&(m=or(h,l));let y;if(d){const v=n.texData.get(f.dataId).values,b=Gje(v,ge(p),m,s.dtype);y=n.makeTensorInfo(m,s.dtype);const w=n.texData.get(y.dataId);w.values=b}else y=jHe(f,p,m,n);return A&&n.disposeIntermediateTensorInfo(f),y}const MHe={kernelName:GS,backendName:"webgl",kernelFunc:Cte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QHe=OR+`
  return max(a, b);
`,HHe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+gf+`
  return result;
`,zHe=as({opSnippet:QHe,packedOpSnippet:HHe,cpuKernelImpl:Kje}),VHe={kernelName:Dx,backendName:"webgl",kernelFunc:zHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Bv(s,"maxPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;L(ss(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Go(s.shape,i,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&_t(u.inShape,u.outShape))return Ri({inputs:{x:s},backend:n});const A=new a0(u,"max",!1);return n.runWebGLProgram(A,[s],s.dtype)}const GHe={kernelName:KS,backendName:"webgl",kernelFunc:WHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],A=Nc(s.shape,i,o,u,a,c,l),d=new RR(A,"max",!1);return n.runWebGLProgram(d,[s],s.dtype)}const XHe={kernelName:XS,backendName:"webgl",kernelFunc:KHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qHe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,l=o-1-e.padInfo.left,c=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class YHe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,A=l-1-e.padInfo.front,d=c-1-e.padInfo.top,f=u-1-e.padInfo.left,h=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${A}, ${d}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${h} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JHe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,A=[1,1,1],d=Nc(o.shape,a,l,A,c,u),f=new RR(d,"max",!0),h=n.runWebGLProgram(f,[o],o.dtype),p=new YHe(d),m=n.runWebGLProgram(p,[s,h],o.dtype);return n.disposeIntermediateTensorInfo(h),m}const ZHe={kernelName:eO,backendName:"webgl",kernelFunc:JHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e7e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;Bv([i,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:A}=r,d=Go(a.shape,l,c,1,u,A),f=!0,h=new a0(d,"max",f),p=n.runWebGLProgram(h,[a],a.dtype),m=new qHe(d),y=n.runWebGLProgram(m,[s,p],a.dtype);return n.disposeIntermediateTensorInfo(p),y}const t7e={kernelName:Z_,backendName:"webgl",kernelFunc:e7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n7e(t,e,n,r){let s=new a0(n,"max",!1);const i=r.runWebGLProgram(s,[t],"float32");s=new a0(n,"max",!0,!0,e);const o=r.runWebGLProgram(s,[t],"float32");return[i,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r7e={kernelName:tO,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:a}=e,l=n;L(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];L(ss(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=Go(r.shape,s,i,c,o),[A,d]=n7e(r,a,u,l);return[A,d]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s7e(t,e,n,r){const s=ge(e),o=ge(t.shape)/s,a=Le({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=yf(a,"float32","mean",r),c=Le({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i7e={kernelName:qS,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:i}=e,o=n,a=r.shape.length,l=kt(i,r.shape);let c=l;const u=Hn(c,a),A=u!=null,d=o.shouldExecuteOnCPU([r]),f=[];let h=r;if(A){if(d){const b=o.texData.get(h.dataId).values,w=new Array(a);for(let S=0;S<w.length;S++)w[S]=r.shape[u[S]];const C=_R(b,r.shape,r.dtype,u,w);h=o.makeTensorInfo(w,r.dtype);const B=o.texData.get(h.dataId);B.values=C}else h=l3(r,u,o);f.push(h),c=ar(c.length,a)}is("sum",c,a);const[p,m]=Vr(h.shape,c);let y=p;s&&(y=or(p,l));const x=s7e(h,m,y,o);for(const v of f)o.disposeIntermediateTensorInfo(v);return x}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=kt(i,s.shape);let c=l;const u=Hn(c,a);let A=s;u!=null&&(A=Ms({inputs:{x:s},backend:n,attrs:{perm:u}}),c=ar(c.length,s.shape.length)),is("min",c,a);const[d,f]=Vr(A.shape,c),h=ge(f),p=Le({inputs:{x:A},backend:n,attrs:{shape:[-1,h]}}),m=yf(p,p.dtype,"min",n);let y;if(o){const x=or(d,l);y=Le({inputs:{x:m},backend:n,attrs:{shape:x}})}else y=Le({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),u!=null&&n.disposeIntermediateTensorInfo(A),y}const a7e={kernelName:YS,backendName:"webgl",kernelFunc:o7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l7e=OR+`
  return min(a, b);
`,c7e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+gf+`
  return result;
`,u7e=as({opSnippet:l7e,packedOpSnippet:c7e,cpuKernelImpl:Xje}),A7e={kernelName:Rx,backendName:"webgl",kernelFunc:u7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d7e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((u,A)=>u[0]+e[A]+u[1]);const s=e.length,i=an(s),o=n.map(u=>u[0]).join(","),a=n.map((u,A)=>u[0]+e[A]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f7e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((h,p)=>h[0]+e[p]+h[1]);const s=e.length,i=an(s),o=n.map(h=>h[0]).join(","),a=n.map((h,p)=>h[0]+e[p]).join(","),l=Ps("rc",s),c=Ps("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,A=s===1?"source":`vec2(${c.slice(-2).join()})`,d=r==="reflect"?0:1;let f="";if(s===1){const h=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${d};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${d};
        }
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${h}
        result[0] = getChannel(getX(${c.join()}), ${A});
        ${l[s-1]} += 1;
        if(${u}) {
          ${h}
          result[1] = getChannel(getX(${c.join()}), ${A});
        }
      `}else{const h=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${d}) +
                gte * ((end - 1) * 2 - source + ${d});
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${h}
        result[0] = getChannel(getX(${c.join()}), ${A});
        ${l[s-1]} += 1;
        if(${u}) {
          ${h}
          result[1] = getChannel(getX(${c.join()}), ${A});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${h}
          result[2] = getChannel(getX(${c.join()}), ${A});
          ${l[s-1]} += 1;
          if(${u}) {
            ${h}
            result[3] = getChannel(getX(${c.join()}), ${A});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h7e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:i}=n,o=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new f7e(r.shape,s,i):new d7e(r.shape,s,i);return e.runWebGLProgram(o,[r],r.dtype)},p7e={kernelName:JS,backendName:"webgl",kernelFunc:h7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m7e=`if (b == 0.0) return NAN;
  return mod(a, b);`,g7e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+gf+`
  return result;
`,y7e=as({opSnippet:m7e,packedOpSnippet:g7e}),x7e={kernelName:Px,backendName:"webgl",kernelFunc:y7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v7e{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b7e=`
if (a == b) {
  return 1.0;
};
return a / b;`,w7e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Ste=as({opSnippet:b7e,packedOpSnippet:w7e,checkOutOfBounds:!0}),C7e={kernelName:bx,backendName:"webgl",kernelFunc:Ste};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X5="return a - b;",Bte=as({opSnippet:X5,packedOpSnippet:X5,supportsComplex:!0,cpuKernelImpl:mMe}),S7e={kernelName:Zx,backendName:"webgl",kernelFunc:Bte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nte(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,o=kt([i],s.shape),a=Cte({inputs:{x:s},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=or(a.shape,o),c=Le({inputs:{x:a},backend:n,attrs:{shape:l}}),u=Bte({inputs:{a:s,b:c},backend:n}),A=vte({inputs:{x:u},backend:n}),d=c3({inputs:{x:A},backend:n,attrs:{axis:o,keepDims:!1}}),f=Le({inputs:{x:d},backend:n,attrs:{shape:l}}),h=Ste({inputs:{a:A,b:f},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),h}const B7e={kernelName:mB,backendName:"webgl",kernelFunc:Nte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N7e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r,l=a?s:Nte({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),c=l.shape[0],u=l.shape[1],A=new v7e(c,u,i),d=[[o]],f=n.runWebGLProgram(A,[l],"int32",d);return a||n.disposeIntermediateTensorInfo(l),f}const E7e={kernelName:nO,backendName:"webgl",kernelFunc:N7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I7e=Xo+`
  return -x;
`,k7e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function T7e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[o,a]=Yje(i.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}let s;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new gu(r.shape,k7e):s=new rl(r.shape,I7e),n.runWebGLProgram(s,[r],r.dtype)}const F7e={kernelName:ZS,backendName:"webgl",kernelFunc:T7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $7e=xD;function _7e(t){qi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,c=n.readSync(s.dataId),u=n.readSync(i.dataId),{selectedIndices:A}=$7e(c,u,o,a,l);return n.makeTensorInfo([A.length],"int32",new Int32Array(A))}const O7e={kernelName:rO,backendName:"webgl",kernelFunc:_7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D7e=vD;function R7e(t){qi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(s.dataId),A=n.readSync(i.dataId),{selectedIndices:d,validOutputs:f}=D7e(u,A,o,a,l,c);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const P7e={kernelName:sO,backendName:"webgl",kernelFunc:R7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U7e=bD;function L7e(t){qi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(s.dataId),A=n.readSync(i.dataId),d=o,f=a,h=l,p=c,{selectedIndices:m,selectedScores:y}=U7e(u,A,d,f,h,p);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const j7e={kernelName:iO,backendName:"webgl",kernelFunc:L7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M7e{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q7e=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:o,onValue:a,offValue:l}=r,c=ge(s.shape),u=new M7e(c,o,a,l),A=Le({inputs:{x:s},backend:n,attrs:{shape:[c]}}),d=n.runWebGLProgram(u,[A],i);n.disposeIntermediateTensorInfo(A);const f=[...s.shape,o],h=Le({inputs:{x:d},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(d),h},H7e={kernelName:nB,backendName:"webgl",kernelFunc:Q7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=Ev({inputs:{input:r},backend:n}),i=F2({inputs:{x:s},backend:n}),o=u3({inputs:{input:r},backend:n}),a=F2({inputs:{x:o},backend:n}),l=mA({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return Iv({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const z7e={kernelName:vB,backendName:"webgl",kernelFunc:F2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ete(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=Ev({inputs:{input:r},backend:n}),i=Ete({inputs:{x:s},backend:n}),o=u3({inputs:{input:r},backend:n}),a=F2({inputs:{x:o},backend:n}),l=mA({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return Iv({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const V7e={kernelName:tB,backendName:"webgl",kernelFunc:Ete};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W7e(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return gT({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,o=e[0].dtype;e.forEach(u=>{Pi(i,u.shape,"All tensors passed to stack must have matching shapes"),L(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const A=gT({inputs:{input:u},backend:n,attrs:{dim:s}});return a.push(A),A}),c=dte({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const G7e={kernelName:rB,backendName:"webgl",kernelFunc:W7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K7e{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const s=e.length,i=an(s),o=n.map(c=>c[0]).join(","),a=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X7e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const s=e.length,i=an(s),o=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+e[m]).join(","),l=Ps("rc",s),c=Ps("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,A=s===1?"source":`vec2(${c.slice(-2).join()})`,d=[`${i} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${u}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${u}) {`],f=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let h="";for(let p=0,m=s===1?2:4;p<m;p++)h+=`
        ${d[p]}
        if (${f}) {
          result[${p}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${p}] = getChannel(getX(${c.join()}), ${A});
        }
      `;h+=s===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ite=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r;if(ge(s.shape)===0){const c=i.map((u,A)=>u[0]+s.shape[A]+u[1]);return Iv({backend:n,attrs:{shape:c,value:o,dtype:s.dtype}})}const a=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new X7e(s.shape,i,o):new K7e(s.shape,i,o),l=[[o]];return n.runWebGLProgram(a,[s],s.dtype,l)},q7e={kernelName:sB,backendName:"webgl",kernelFunc:Ite};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y7e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,J7e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+gf+`
  return result;
`,Z7e=as({opSnippet:Y7e,packedOpSnippet:J7e}),e9e={kernelName:Lx,backendName:"webgl",kernelFunc:Z7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=[],c=kt(i,s.shape);let u=c;const A=Hn(u,a);let d=s;A!=null&&(d=Ms({inputs:{x:s},backend:n,attrs:{perm:A}}),u=ar(u.length,a),l.push(d)),is("prod",u,a);let f;if(n.shouldExecuteOnCPU([d])){const h=n.texData.get(d.dataId).values,{outVals:p,outShape:m,outDtype:y}=Zje(d.shape,d.dtype,h,u);f=n.makeTensorInfo(m,y,p)}else{const[h,p]=Vr(d.shape,u),m=ge(p),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),x=FO(s.dtype),v=yf(y,x,"prod",n);f=Le({inputs:{x:v},backend:n,attrs:{shape:h}}),l.push(y),l.push(v)}if(o){l.push(f);const h=or(f.shape,c);f=Le({inputs:{x:f},backend:n,attrs:{shape:h}})}return l.forEach(h=>n.disposeIntermediateTensorInfo(h)),f}const n9e={kernelName:oB,backendName:"webgl",kernelFunc:t9e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r9e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:o}=e,{outputRaggedRank:a}=r,l=s.map(y=>n.readSync(y.dataId)),c=s.map(y=>y.shape),u=n.readSync(i.dataId),A=n.readSync(o.dataId),[d,f,h]=eMe(l,c,u,i.shape,i.dtype,A,o.shape,a),p=d.map(y=>n.makeTensorInfo([y.length],"int32",y)),m=n.makeTensorInfo(h,i.dtype,f);return p.concat([m])}const s9e={kernelName:oO,backendName:"webgl",kernelFunc:r9e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i9e(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=tMe(o,r.shape,r.dtype,a,s.shape,l,i.shape),A=n.makeTensorInfo([c.length],"int32",c),d=n.makeTensorInfo([u.length],r.dtype,u);return[A,d]}const o9e={kernelName:aO,backendName:"webgl",kernelFunc:i9e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a9e(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.readSync(s.dataId),u=n.readSync(i.dataId),A=n.readSync(o.dataId),d=a.map(m=>n.readSync(m.dataId)),f=a.map(m=>m.shape),[h,p]=nMe(c,s.shape,u,i.shape,i.dtype,A,o.shape,d,f,l);return n.makeTensorInfo(h,i.dtype,p)}const l9e={kernelName:lO,backendName:"webgl",kernelFunc:a9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kte=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:i,dtype:o}=n,a=rMe(r,s,i,o);return e.makeTensorInfo([a.length],o,a)},c9e={kernelName:cO,backendName:"webgl",kernelFunc:kte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u9e="return 1.0 / x;",A9e=Qt({opSnippet:u9e}),d9e={kernelName:jx,backendName:"webgl",kernelFunc:A9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f9e=Xo+`
  return (x < 0.0) ? 0.0 : x;
`,h9e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,p9e=Qt({opSnippet:f9e,packedOpSnippet:h9e}),m9e={kernelName:Mx,backendName:"webgl",kernelFunc:p9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g9e=Xo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,y9e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,x9e=Qt({opSnippet:g9e,packedOpSnippet:y9e}),v9e={kernelName:Qx,backendName:"webgl",kernelFunc:x9e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b9e{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],A=[s&&n>1?n-1:n,s&&r>1?r-1:r];let d;i?d="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/A[0]},
          ${u[1]/A[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w9e{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],A=[s&&n>1?n-1:n,s&&r>1?r-1:r];let d;i?d="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/A[0]},
          ${u[1]/A[1]},
          ${u[1]/A[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C9e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,c]=a,u=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new w9e(s.shape,l,c,i,o):new b9e(s.shape,l,c,i,o);return n.runWebGLProgram(u,[s],"float32")}const S9e={kernelName:cB,backendName:"webgl",kernelFunc:C9e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B9e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],A=l[1]/c[1],d=1/u,f=1/A,h=Math.ceil(d)*2+2,p=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${A});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${f});

        const int winHeight = int(${h});
        const int winWidth = int(${p});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N9e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new B9e(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const E9e={kernelName:dO,backendName:"webgl",kernelFunc:N9e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I9e{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],A=[s&&n>1?n-1:n,s&&r>1?r-1:r],d=s?"0.5":"0.0";let f;i?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/A[0]},
          ${u[1]/A[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k9e{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],A=[s&&n>1?n-1:n,s&&r>1?r-1:r],d=s?"0.5":"0.0";let f;i?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/A[0]},
          ${u[1]/A[1]},
          ${u[1]/A[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T9e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,c]=a,u=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new k9e(s.shape,l,c,i,o):new I9e(s.shape,l,c,i,o);return n.runWebGLProgram(u,[s],s.dtype)}const F9e={kernelName:lB,backendName:"webgl",kernelFunc:T9e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $9e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],A=l[1]/c[1],d=1/u,f=1/A,h=Math.ceil(d)*2+2,p=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${A});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${f});

        const int winHeight = int(${h});
        const int winWidth = int(${p});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _9e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new $9e(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const O9e={kernelName:AO,backendName:"webgl",kernelFunc:_9e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D9e{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,i=e.map((a,l)=>s(l)).join(","),o=an(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R9e{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=Ps("rc",r),i=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,a=an(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${i}){
            result.g = ${c(s.slice())};
          }
          if(${o}) {
            result.b = ${u(s.slice())};
            if(${i}) {
              result.a = ${A(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(h){return d(h)}function c(h){return h[r-1]="("+h[r-1]+" + 1)",d(h)}function u(h){return h[r-2]="("+h[r-2]+" + 1)",d(h)}function A(h){return h[r-1]="("+h[r-1]+" + 1)",h[r-2]="("+h[r-2]+" + 1)",d(h)}function d(h){const p=e.map((x,v)=>f(v,h)),m=p.join(","),y=p.slice(-2).join(",");return`getChannel(getX(${m}), vec2(${y}))`}function f(h,p){return n.indexOf(h)!==-1&&e[h]!==1?`${e[h]} - ${p[h]} - 1`:`${p[h]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r,o=s.shape.length,a=kt(i,s.shape);if(o===0)return Ri({inputs:{x:s},backend:n});const l=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new R9e(s.shape,a):new D9e(s.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}const U9e={kernelName:uB,backendName:"webgl",kernelFunc:P9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L9e{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j9e={kernelName:kO,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,l=new L9e(r.shape,i),[c,u]=OD(o,r.shape[1],r.shape[2]),A=[[c,u,Math.sin(s),Math.cos(s)]];return a.runWebGLProgram(l,[r],r.dtype,A)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M9e=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,Q9e=Qt({opSnippet:M9e}),H9e={kernelName:Hx,backendName:"webgl",kernelFunc:Q9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z9e="return inversesqrt(x);",V9e=Qt({opSnippet:z9e,cpuKernelImpl:sMe}),W9e={kernelName:zx,backendName:"webgl",kernelFunc:V9e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PR{constructor(e,n,r,s,i,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const c=an(i.length),u=an(o.length);let A="";r===1?A="i":r===2&&(A="i, j");const d=`getIndices(${A})`;let f="";s===1?f="i":s===2&&(f="i, coords[1]");const h=`getUpdates(${f})`;let p="";l&&(p="coords[0], coords[1]");const m=`getDefaultValue(${p})`,y=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${y};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${h};
              found = true;
            }
          }
          setOutput(mix(${m}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G9e{constructor(e,n,r,s,i,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const c=an(i.length),u=an(o.length);let A="";r===1?A="i":r===2&&(A="i, j");const d=`getIndices(${A})`;let f="";s===1?f="i":s===2&&(f="i, coords[1]");const h=`getUpdates(${f})`;let p="";l&&(p="coords[0], coords[1]");const m=`getDefaultValue(${p})`,y=n>1?"strides[j]":"strides",x=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${d});
              flattenedIndex += index.xz * ${y};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${x};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${h};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${m}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K9e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:A}=df(i,s,o),d=[A/c,c];if(A===0)return n.makeTensorInfo(o,s.dtype);const f=Le({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),h=Le({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),p=n.makeTensorInfo([],"float32",new Float32Array([0]));let m;fe().getBool("WEBGL_PACK")?m=new G9e(l,a,f.shape.length,h.shape.length,u,d):m=new PR(l,a,f.shape.length,h.shape.length,u,d);const y=n.runWebGLProgram(m,[h,f,p],h.dtype),x=Le({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(p),x}const X9e={kernelName:fO,backendName:"webgl",kernelFunc:K9e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q9e{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=fe().getNumber("WEBGL_VERSION")===2?i:o,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y9e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:o}=r,a=new q9e(s.shape[0],s.shape[1],i.shape[1],o),l=[[s.shape[1]]];return n.runWebGLProgram(a,[s,i],"int32",l)}const J9e={kernelName:pO,backendName:"webgl",kernelFunc:Y9e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z9e{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",s="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${a[u]}`),u<e&&l.push(`${a[u]}`);s=l.join(),i=c.join()}const o=an(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eze(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e,o=new Z9e(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(o,[r,s,i],_i(s.dtype,i.dtype))}const tze={kernelName:AB,backendName:"webgl",kernelFunc:eze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nze=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${WB};
  float scale = ${GB};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,rze=Qt({opSnippet:nze}),sze={kernelName:Vx,backendName:"webgl",kernelFunc:rze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ize=fm+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,oze=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,aze=Qt({opSnippet:ize,packedOpSnippet:oze,cpuKernelImpl:oMe}),lze={kernelName:Xx,backendName:"webgl",kernelFunc:aze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cze=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,uze=Qt({opSnippet:cze}),Aze={kernelName:Kx,backendName:"webgl",kernelFunc:uze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dze=fm+`
  return sin(x);
`,fze=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${gf}
  return result;
`,hze=Qt({opSnippet:dze,packedOpSnippet:fze}),pze={kernelName:Wx,backendName:"webgl",kernelFunc:hze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mze=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,gze=Qt({opSnippet:mze}),yze={kernelName:Gx,backendName:"webgl",kernelFunc:gze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xze=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,vze=Qt({opSnippet:xze}),bze={kernelName:qx,backendName:"webgl",kernelFunc:vze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wze=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:o}=r;L(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((y,x)=>y*x),l=[[0,0]];l.push(...o);for(let y=1+i.length;y<s.shape.length;++y)l.push([0,0]);const c=[],u=Ite({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),A=dv(u.shape,i,a,!1),d=fv(A.length,i.length,!1),f=hv(u.shape,i,a,!1),h=Le({inputs:{x:u},backend:n,attrs:{shape:A}}),p=Ms({inputs:{x:h},backend:n,attrs:{perm:d}}),m=Le({inputs:{x:p},backend:n,attrs:{shape:f}});return c.push(u),c.push(h),c.push(p),c.forEach(y=>n.disposeIntermediateTensorInfo(y)),m},Cze={kernelName:hB,backendName:"webgl",kernelFunc:wze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sze(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(r.dataId),l=n.readSync(s.dataId),c=n.readSync(i.dataId),u=n.readSync(o.dataId)[0],[A,d,f,h,p]=lMe(a,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(d,r.dtype,A),n.makeTensorInfo([d[0]],s.dtype,f),n.makeTensorInfo([h.length],"bool",new Uint8Array(h.map(m=>Number(m)))),n.makeTensorInfo([p.length],r.dtype,new Int32Array(p))]}const Bze={kernelName:mO,backendName:"webgl",kernelFunc:Sze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nze(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.readSync(s.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[c,u,A]=cMe(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([A.length],i.dtype,new Int32Array(A))]}const Eze={kernelName:gO,backendName:"webgl",kernelFunc:Nze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ize(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=Zee(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const kze={kernelName:yO,backendName:"webgl",kernelFunc:Ize};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tze(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=Zee(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const Fze={kernelName:xO,backendName:"webgl",kernelFunc:Tze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ze(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:A,outputSize:d}=df(i,s,a),f=!1;if(i.dtype==="string"){const y=n.bufferSync(s),x=n.bufferSync(i),v=Hu(n.readSync(o.dataId)[0]),b=iMe(y,x,a,d,u,c,l,A,v,f);return n.makeTensorInfo(a,b.dtype,b.values)}const h=new PR(c,l,s.shape.length,i.shape.length,A,[d,1],f),p=n.runWebGLProgram(h,[i,s,o],i.dtype),m=Le({inputs:{x:p},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(p),m}const _ze={kernelName:vO,backendName:"webgl",kernelFunc:$ze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:o}=r,a=kt(o,s.shape)[0],l=XD(s,i,a),c=s.shape.length,u=new Array(c).fill(0),A=s.shape.slice();return l.map(d=>{const f=[...A];f[a]=d;const h=hm({inputs:{x:s},backend:n,attrs:{begin:u,size:f}});return u[a]+=d,h})}const Dze={kernelName:pB,backendName:"webgl",kernelFunc:Oze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q5="return sqrt(x);",Rze=Qt({opSnippet:q5,packedOpSnippet:q5,cpuKernelImpl:uMe}),Pze={kernelName:Yx,backendName:"webgl",kernelFunc:Rze};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uze="return x * x;",Lze=Qt({opSnippet:Uze}),jze={kernelName:bO,backendName:"webgl",kernelFunc:Lze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y5="return (a - b) * (a - b);",Mze=as({opSnippet:Y5,packedOpSnippet:Y5}),Qze={kernelName:Jx,backendName:"webgl",kernelFunc:Mze};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(s.dataId),o=mc(i),a=AMe(o,"string",r);return n.makeTensorInfo(s.shape,"string",a)}const zze={kernelName:gB,backendName:"webgl",kernelFunc:Hze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vze({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=Xo+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new rl(r.shape,s);return n.runWebGLProgram(i,[r],r.dtype)}const Wze={kernelName:rv,backendName:"webgl",kernelFunc:Vze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gze{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,i=an(r.length),o=an(r.length);let a="";if(s===1)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:A,shrinkAxisMask:d}=r,{finalShapeSparse:f,finalShape:h,isIdentity:p,sliceDim0:m,isSimpleSlice:y,begin:x,end:v,strides:b}=FD(s.shape,i,o,a,l,c,u,A,d);let w;if(p)w=Le({inputs:{x:s},backend:n,attrs:{shape:h}});else if(m||y){L(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const B=ID(x,v,b),S=hm({inputs:{x:s},backend:n,attrs:{begin:x,size:B}});w=Le({inputs:{x:S},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(S)}else if(n.shouldExecuteOnCPU([s])){const S=n.readSync(s.dataId),N=St(s.shape,s.dtype,S),k=dMe(f,N,b,x);w=n.makeTensorInfo(h,s.dtype,k.values)}else{const S=new Gze(x,b,f);w=n.runWebGLProgram(S,[s],s.dtype)}const C=Le({inputs:{x:w},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(w),C}const Xze={kernelName:wO,backendName:"webgl",kernelFunc:Kze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qze(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:A}=e,d=n.readSync(u.dataId),f=n.readSync(A.dataId),[h,p]=fMe(d,f,s,i,o,a,l,c);return[n.makeTensorInfo([h.length],"string",h),n.makeTensorInfo(A.shape,"int32",p)]}const Yze={kernelName:CO,backendName:"webgl",kernelFunc:qze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jze(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],[c,u,A]=hMe(a,l,s),d=u.length;return[n.makeTensorInfo([d,2],"int32",c),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(A))]}const Zze={kernelName:SO,backendName:"webgl",kernelFunc:Jze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eVe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),a=pMe(o,s);return n.makeTensorInfo(i.shape,"int32",a)}const tVe={kernelName:BO,backendName:"webgl",kernelFunc:eVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nVe="return tan(x);",rVe=Qt({opSnippet:nVe}),sVe={kernelName:ev,backendName:"webgl",kernelFunc:rVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iVe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,oVe=Qt({opSnippet:iVe}),aVe={kernelName:tv,backendName:"webgl",kernelFunc:oVe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lVe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:i,updates:o}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:A}=df(o,i,s.shape),d=[A/c,c];if(A===0)return n.makeTensorInfo(s.shape,i.dtype);const f=Le({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),h=Le({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),p=Le({inputs:{x:s},backend:n,attrs:{shape:d}}),m=new PR(l,a,f.shape.length,h.shape.length,u,d,!1,!0),y=n.runWebGLProgram(m,[h,f,p],p.dtype),x=Le({inputs:{x:y},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),x}const cVe={kernelName:hO,backendName:"webgl",kernelFunc:lVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uVe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const s=an(this.rank),i=AVe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function AVe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tte(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),c=s.dtype==="string"?l.map(d=>Hu(d)):l,u=St(s.shape,s.dtype,c),A=gMe(u,i);return n.makeTensorInfo(A.shape,A.dtype,A.values)}const o=new uVe(s.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}const dVe={kernelName:nv,backendName:"webgl",kernelFunc:Tte};class fVe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class hVe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OA(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function J5(t){let e=1;for(;e<t;)e*=2;return e}function pVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r,a=fe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=fe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([s])||u<a||i>l){const k=n.readSync(s.dataId),[O,U]=yMe(k,c,s.dtype,i,o);return[n.makeTensorInfo(O.shape,O.dtype,O.values),n.makeTensorInfo(U.shape,U.dtype,U.values)]}if(i===0)return c[c.length-1]=0,[n.makeTensorInfo(c,s.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[s,Iv({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const A=n.texData.get(s.dataId),d=A!==null&&A.isPacked,f=d?n.unpackTensor(s):s,p=ge(c)/u,m=Le({inputs:{x:f},attrs:{shape:[p,u]},backend:n});d&&OA(n,f);const y=J5(i),x=J5(u);let v=null;const b=()=>v===null?[m,m]:[m,v],w=(k,O,U)=>{const P=b(),V=new fVe(U),j=[[u],[v===null?1:0],[Number.NEGATIVE_INFINITY],[k],[O]],G=v;v=n.runWebGLProgram(V,P,"int32",j),OA(n,G)};for(let k=1;k<y;k*=2){const O=k*2;for(let U=k;U>=1;U/=2)w(O,U,[p,x])}for(let k=x;k>y;k/=2){const O=b(),U=new hVe([p,k/2]),V=[[u],[v===null?1:0],[y]],W=v;v=n.runWebGLProgram(U,O,"int32",V),OA(n,W);const j=y/2,G=j*2;for(let D=j;D>=1;D/=2)w(G,D,v.shape)}let C=v;v=hm({inputs:{x:v},backend:n,attrs:{begin:0,size:[p,i]}}),OA(n,C);let B=wte({inputs:{x:m,indices:v},backend:n,attrs:{axis:1,batchDims:1}});OA(n,m);const S=c.slice(0,-1);S.push(i),C=v,v=Le({inputs:{x:v},attrs:{shape:S},backend:n}),OA(n,C);const N=B;return B=Le({inputs:{x:B},attrs:{shape:S},backend:n}),OA(n,N),[B,v]}const mVe={kernelName:NO,backendName:"webgl",kernelFunc:pVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gVe{constructor(e,n,r,s,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yVe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=r,[u,A,d,f]=s.shape,[h,p]=c??[A,d],m=[u,h,p,f],y=new gVe(A,d,o,a,l,m);return n.runWebGLProgram(y,[s,i],"float32")}const xVe={kernelName:EO,backendName:"webgl",kernelFunc:yVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vVe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;Bv(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:a,outputShape:l,indices:c}=xMe(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const bVe={kernelName:IO,backendName:"webgl",kernelFunc:vVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wVe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s,a=o.shape.length,l=s.shape[i],c=new Array(a-1);let u=0;for(let p=0;p<a;p++)p!==i&&(c[u++]=o.shape[p]);const A=[],d=new Array(a).fill(0),f=o.shape.slice();f[i]=1;const h=new Array(l);for(let p=0;p<h.length;p++){d[i]=p;const m=hm({inputs:{x:o},backend:n,attrs:{begin:d,size:f}}),y=Le({inputs:{x:m},backend:n,attrs:{shape:c}});h[p]=y,A.push(m)}return A.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const CVe={kernelName:yB,backendName:"webgl",kernelFunc:wVe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SVe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/r);this.outputShape=[s,a];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,A=r%4,d=`
        sumValue += dot(values, segFilter);
    `;let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let h="";i%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${h}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${d}
        }

        int inIdx = inOffset + ${u};
        if (${A===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${d}
        } else if (${A===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${d}
        } else if (${A===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${d}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:o}=r,a=s.shape.length,l=[];let c=0;const u=Hn([c],a);let A=s;u!=null&&(A=Ms({inputs:{x:s},backend:n,attrs:{perm:u}}),l.push(A),c=ar(1,a)[0]);const d=eY(A.shape,c,o),f=ge([A.shape[c]]),h=Le({inputs:{x:A},backend:n,attrs:{shape:[-1,f]}});l.push(h);const p=FO(s.dtype),m=(b,w,C,B,S)=>{const N=b.shape[0],k=b.shape[1],O=Zq(k,S),U={windowSize:O,inSize:k,batchSize:N,numSegments:S},P=new SVe(U,w),V=n.compileAndRun(P,[b,C],B);if(l.push(V),V.shape[1]===S)return V;const W=kte({backend:n,attrs:{start:0,stop:S,step:1,dtype:"float32"}}),j=Tte({inputs:{x:W},backend:n,attrs:{reps:[k/O]}});return l.push(W),l.push(j),m(V,w,j,B,S)},y=m(h,"unsortedSegmentSum",i,p,o),x=Le({inputs:{x:y},backend:n,attrs:{shape:d}});let v=x;if(u!=null){l.push(x);const b=uA(u);v=Ms({inputs:{x:v},backend:n,attrs:{perm:b}})}return l.forEach(b=>n.disposeIntermediateTensorInfo(b)),v}const NVe={kernelName:xB,backendName:"webgl",kernelFunc:BVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EVe=[u6e,d6e,p6e,y6e,v6e,C6e,B6e,E6e,F6e,_6e,R6e,L6e,Q6e,W6e,X6e,Y6e,Z6e,r5e,i5e,a5e,A5e,y5e,v5e,S5e,N5e,$5e,O5e,U5e,GMe,M5e,W5e,q5e,nQe,iQe,aQe,cQe,AQe,pQe,yQe,bQe,CQe,BQe,EQe,TQe,$Qe,RQe,UQe,MQe,zQe,WQe,qQe,e8e,s8e,a8e,u8e,A8e,f8e,p8e,g8e,x8e,b8e,B8e,I8e,F8e,_8e,R8e,L8e,H8e,G8e,WMe,X8e,z5e,J8e,tHe,sHe,XMe,lHe,dHe,hHe,yHe,bHe,BHe,IHe,$He,RHe,LHe,MHe,VHe,GHe,XHe,ZHe,t7e,r7e,i7e,a7e,A7e,p7e,x7e,E7e,JMe,F7e,O7e,P7e,j7e,I5e,H7e,V7e,G7e,q7e,e9e,YMe,n9e,s9e,o9e,l9e,c9e,k5e,C7e,d9e,m9e,v9e,e6e,S9e,E9e,F9e,O9e,U9e,j9e,H9e,W9e,X9e,J9e,tze,sze,lze,Aze,pze,yze,m5e,B7e,bze,Cze,Bze,Eze,kze,Fze,_ze,Dze,Pze,jze,Qze,zze,Wze,Xze,Yze,Zze,tVe,S7e,a6e,sVe,aVe,cVe,dVe,mVe,xVe,l6e,bVe,CVe,NVe,z7e];for(const t of EVe)yK(t);var Qg=(t=>(t.FIXATION="fixation",t.SACCADE="saccade",t.BLINK="blink",t.OFF_PAGE="off_page",t))(Qg||{});const Fte=t=>{const{enabled:e,onGazePoint:n,calibrationMatrix:r,targetFPS:s=30}=t,[i,o]=z.useState(!1),[a,l]=z.useState(!1),[c,u]=z.useState(null),[A,d]=z.useState(null),[f,h]=z.useState(0),p=z.useRef(null),m=z.useRef(null),y=z.useRef(null),x=z.useRef(null),v=z.useRef(null),b=z.useRef({frames:0,lastTime:Date.now()}),w=z.useRef(null),C=z.useCallback(async()=>{try{await Abe(),console.log("✅ TensorFlow.js ready");const k=f2.MediaPipeFaceMesh,U=await AIe(k,{runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh",refineLandmarks:!0});y.current=U,console.log("✅ MediaPipe Face Mesh loaded"),o(!0),u(null)}catch(k){console.error("❌ Failed to initialize gaze tracking:",k),u("시선 추적 초기화 실패. 페이지를 새로고침하세요."),o(!1)}},[]),B=z.useCallback(async()=>{if(y.current||await C(),!y.current){u("Face detector not initialized");return}try{const k=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}}});x.current=k,p.current&&(p.current.srcObject=k,p.current.play()),l(!0),u(null),console.log("✅ Camera started")}catch(k){console.error("❌ Camera access denied:",k),u("카메라 접근 권한이 필요합니다."),l(!1)}},[C]),S=z.useCallback(()=>{v.current&&(cancelAnimationFrame(v.current),v.current=null),x.current&&(x.current.getTracks().forEach(k=>k.stop()),x.current=null),p.current&&(p.current.srcObject=null),l(!1),console.log("🛑 Tracking stopped")},[]),N=z.useCallback(async()=>{if(!y.current||!p.current||!a)return;const k=p.current,O=await y.current.estimateFaces(k,{flipHorizontal:!1});if(O.length===0){d(null);return}const P=O[0].keypoints,V=P[33],W=P[263],j=P[468],G=P[473],D=P[1];if(!j||!G)return;const M={leftEye:{x:V.x,y:V.y},rightEye:{x:W.x,y:W.y},leftIris:{x:j.x,y:j.y},rightIris:{x:G.x,y:G.y},noseTip:{x:D.x,y:D.y}},q=IVe(M,k.videoWidth,k.videoHeight);let Z=q.x,te=q.y;if(r){const xe=kVe(q.x,q.y,r);Z=xe.x,te=xe.y}const ue={x:Z,y:te,confidence:q.confidence,landmarks:M};d(ue);const de=Date.now(),le=TVe(Z,te,w.current,de),he={timestamp:de,x:Z,y:te,confidence:q.confidence,type:le};w.current={x:Z,y:te,timestamp:de},n&&n(he),b.current.frames++;const ke=Date.now();ke-b.current.lastTime>=1e3&&(h(b.current.frames),b.current={frames:0,lastTime:ke});const Qe=1e3/s;v.current=window.requestAnimationFrame(()=>{setTimeout(N,Qe)})},[a,n,r,s]);return z.useEffect(()=>(a&&e&&N(),()=>{v.current&&cancelAnimationFrame(v.current)}),[a,e,N]),z.useEffect(()=>(e&&C(),()=>{S()}),[e,C,S]),{isInitialized:i,isTracking:a,error:c,currentGaze:A,fps:f,videoRef:p,canvasRef:m,startTracking:B,stopTracking:S}};function IVe(t,e,n){const r=(t.leftIris.x+t.rightIris.x)/2,s=(t.leftIris.y+t.rightIris.y)/2,i=r/e,o=s/n;return{x:i,y:o,confidence:.85}}function kVe(t,e,n){const r=n[0][0]*t+n[0][1]*e+n[0][2],s=n[1][0]*t+n[1][1]*e+n[1][2];return{x:r,y:s}}function TVe(t,e,n,r){if(!n)return Qg.FIXATION;const s=Math.abs(t-n.x),i=Math.abs(e-n.y),o=Math.sqrt(s*s+i*i),a=(r-n.timestamp)/1e3;return t<-.1||t>1.1||e<-.1||e>1.1?Qg.OFF_PAGE:(a>0?o/a:0)>1?Qg.SACCADE:Qg.FIXATION}const FVe="http://localhost:3000",$Ve="v1",_Ve=()=>localStorage.getItem("token"),Fc=ir.create({baseURL:`${FVe}/api/${$Ve}/vision`,headers:{"Content-Type":"application/json"}});Fc.interceptors.request.use(t=>{const e=_Ve();return e&&(t.headers.Authorization=`Bearer ${e}`),t});const OVe=async t=>(await Fc.post("/calibration/start",t)).data,DVe=async t=>(await Fc.post("/calibration/record-point",t)).data,RVe=async t=>(await Fc.post("/calibration/validate",{calibrationId:t})).data,PVe=async t=>(await Fc.get(`/calibration/active/${t}`)).data,UVe=async t=>(await Fc.post("/session/start",t)).data,LVe=async t=>(await Fc.post("/session/save-gaze-data",t)).data,jVe=async t=>(await Fc.post("/session/submit",t)).data,MVe=async t=>(await Fc.get(`/analysis/${t}/report`)).data,QVe=({userId:t,onCalibrationComplete:e,onCancel:n})=>{const[r,s]=z.useState({stage:"instructions",currentPointIndex:0,recordedPoints:[]}),[i,o]=z.useState(""),[a,l]=z.useState([]),[c,u]=z.useState(!1),[A,d]=z.useState([]),{isTracking:f,currentGaze:h,fps:p,videoRef:m,startTracking:y,stopTracking:x}=Fte({enabled:r.stage==="calibrating",onGazePoint:B=>{c&&d(S=>[...S,B])},targetFPS:30}),v=z.useCallback(async()=>{try{const B={userAgent:navigator.userAgent,screenWidth:window.screen.width,screenHeight:window.screen.height,devicePixelRatio:window.devicePixelRatio,platform:navigator.platform},S=await OVe({userId:t,deviceInfo:B});o(S.calibrationId),l(S.points),s({stage:"calibrating",currentPointIndex:0,recordedPoints:[]}),await y()}catch(B){console.error("Failed to start calibration:",B),s(S=>({...S,error:"캘리브레이션 시작 실패"}))}},[t,y]),b=z.useCallback(async()=>{if(A.length===0){s(k=>({...k,error:"시선 데이터가 감지되지 않습니다."}));return}const B=A.reduce((k,O)=>k+O.x,0)/A.length,S=A.reduce((k,O)=>k+O.y,0)/A.length,N=a[r.currentPointIndex];try{await DVe({calibrationId:i,pointId:N.id,gazeX:B,gazeY:S}),s(k=>({...k,recordedPoints:[...k.recordedPoints,{id:N.id,screenX:N.x,screenY:N.y,actualX:B,actualY:S,error:0,attempts:1}],currentPointIndex:k.currentPointIndex+1})),d([]),u(!1),r.currentPointIndex+1>=a.length&&w()}catch(k){console.error("Failed to record point:",k),s(O=>({...O,error:"포인트 기록 실패. 다시 시도하세요."})),u(!1)}},[i,a,r.currentPointIndex,A]),w=z.useCallback(async()=>{s(B=>({...B,stage:"validating"}));try{const B=await RVe(i);B.valid?(s(S=>({...S,stage:"completed",accuracy:B.accuracy})),x(),e(B.calibrationResult)):s(S=>({...S,stage:"failed",error:B.message,accuracy:B.accuracy}))}catch(B){console.error("Calibration validation failed:",B),s(S=>({...S,stage:"failed",error:"캘리브레이션 검증 실패"}))}},[i,x,e]),C=z.useCallback(()=>{d([]),u(!0),setTimeout(()=>{b()},3e3)},[b]);return r.stage==="instructions"?g.jsx("div",{className:"fixed inset-0 bg-background flex items-center justify-center z-50",children:g.jsxs("div",{className:"max-w-2xl mx-auto p-8 bg-card rounded-2xl shadow-2xl",children:[g.jsx("h2",{className:"text-3xl font-bold text-foreground mb-6",children:"시선 추적 캘리브레이션"}),g.jsxs("div",{className:"space-y-4 text-muted-foreground mb-8",children:[g.jsx("p",{className:"text-lg",children:"정확한 시선 추적을 위해 캘리브레이션이 필요합니다."}),g.jsxs("div",{className:"bg-secondary/10 p-4 rounded-lg",children:[g.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"준비사항:"}),g.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[g.jsx("li",{children:"밝은 조명이 있는 환경에서 진행하세요"}),g.jsx("li",{children:"태블릿을 편안한 위치에 고정하세요"}),g.jsx("li",{children:"얼굴이 화면 중앙에 오도록 위치하세요"}),g.jsx("li",{children:"화면으로부터 30-50cm 거리를 유지하세요"})]})]}),g.jsxs("div",{className:"bg-primary/10 p-4 rounded-lg",children:[g.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"진행 방법:"}),g.jsxs("ul",{className:"list-decimal list-inside space-y-1",children:[g.jsx("li",{children:"화면에 나타나는 9개의 점을 순서대로 응시합니다"}),g.jsx("li",{children:"각 점이 나타나면 고개를 움직이지 말고 눈으로만 응시하세요"}),g.jsx("li",{children:"3초간 점을 응시한 후 화면을 탭하세요"}),g.jsx("li",{children:"모든 점 측정이 완료되면 자동으로 검증됩니다"})]})]})]}),g.jsxs("div",{className:"flex gap-4",children:[g.jsx("button",{onClick:n,className:"flex-1 px-6 py-3 bg-secondary text-secondary-foreground rounded-lg hover:bg-secondary/80 transition-colors",children:"취소"}),g.jsx("button",{onClick:v,className:"flex-1 px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-semibold",children:"캘리브레이션 시작"})]})]})}):r.stage==="calibrating"?g.jsxs("div",{className:"fixed inset-0 bg-background z-50",children:[g.jsx("video",{ref:m,className:"hidden",autoPlay:!0,playsInline:!0}),g.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-card/90 backdrop-blur px-6 py-3 rounded-full shadow-lg",children:g.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[g.jsxs("span",{className:"text-muted-foreground",children:["포인트: ",r.currentPointIndex+1," / ",a.length]}),g.jsx("span",{className:"text-muted-foreground",children:"|"}),g.jsx("span",{className:`${f?"text-green-500":"text-red-500"}`,children:f?"✓ 추적 중":"✗ 추적 안됨"}),g.jsx("span",{className:"text-muted-foreground",children:"|"}),g.jsxs("span",{className:"text-muted-foreground",children:[p," FPS"]})]})}),a.map((B,S)=>{const N=S===r.currentPointIndex,k=S<r.currentPointIndex;return g.jsxs("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 transition-all duration-300",style:{left:`${B.x*100}%`,top:`${B.y*100}%`,opacity:N?1:k?.3:.1},children:[g.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${N?"bg-primary animate-pulse":k?"bg-green-500":"bg-muted"}`,children:g.jsx("div",{className:"w-4 h-4 rounded-full bg-background"})}),N&&!c&&g.jsx("button",{onClick:C,className:"absolute top-20 left-1/2 transform -translate-x-1/2 px-4 py-2 bg-primary text-primary-foreground rounded-lg whitespace-nowrap",children:"점 응시 후 탭"}),N&&c&&g.jsxs("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 text-center",children:[g.jsx("div",{className:"text-primary font-semibold",children:"기록 중..."}),g.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[A.length," 포인트"]})]})]},B.id)}),h&&g.jsx("div",{className:"absolute w-3 h-3 bg-red-500 rounded-full transform -translate-x-1/2 -translate-y-1/2 pointer-events-none",style:{left:`${h.x*100}%`,top:`${h.y*100}%`,opacity:h.confidence}}),r.error&&g.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 bg-destructive text-destructive-foreground px-6 py-3 rounded-lg",children:r.error})]}):r.stage==="validating"?g.jsx("div",{className:"fixed inset-0 bg-background flex items-center justify-center z-50",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent mb-4"}),g.jsx("p",{className:"text-lg text-foreground",children:"캘리브레이션 검증 중..."})]})}):r.stage==="failed"?g.jsx("div",{className:"fixed inset-0 bg-background flex items-center justify-center z-50",children:g.jsxs("div",{className:"max-w-md mx-auto p-8 bg-card rounded-2xl shadow-2xl text-center",children:[g.jsx("div",{className:"text-6xl mb-4",children:"❌"}),g.jsx("h2",{className:"text-2xl font-bold text-destructive mb-4",children:"캘리브레이션 실패"}),g.jsx("p",{className:"text-muted-foreground mb-2",children:r.error}),r.accuracy&&g.jsxs("p",{className:"text-sm text-muted-foreground mb-6",children:["정확도: ",r.accuracy.toFixed(1),"% (필요: 70% 이상)"]}),g.jsx("button",{onClick:v,className:"w-full px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:"다시 시도"})]})}):null},HVe=()=>{const{sessionId:t}=of(),e=Qs(),[n,r]=z.useState({stage:"calibration",currentPassageIndex:0,gazeTracking:!1}),[s,i]=z.useState(""),[o,a]=z.useState(null),[l,c]=z.useState([]),[u,A]=z.useState(null),[d,f]=z.useState(!1),[h,p]=z.useState({}),[m,y]=z.useState([]),[x,v]=z.useState(null),b=z.useRef([]),w=z.useRef(Date.now()),C=5e3,B=1e3,S=localStorage.getItem("userId")||"",{isTracking:N,currentGaze:k,fps:O,videoRef:U,startTracking:P,stopTracking:V}=Fte({enabled:n.stage==="testing",onGazePoint:W,calibrationMatrix:o==null?void 0:o.transformMatrix,targetFPS:30});function W(le){b.current.push(le),(Date.now()-w.current>=C||b.current.length>=B)&&j()}const j=z.useCallback(async()=>{if(b.current.length===0||!s||!u)return;const le={passageId:u.id,gazePoints:[...b.current],startTime:new Date(b.current[0].timestamp),endTime:new Date(b.current[b.current.length-1].timestamp),totalPoints:b.current.length};try{await LVe({visionSessionId:s,gazeChunk:le}),console.log(`✅ Saved gaze chunk: ${le.totalPoints} points`),b.current=[],w.current=Date.now()}catch(he){console.error("Failed to save gaze chunk:",he)}},[s,u]);z.useEffect(()=>{S&&t&&(async()=>{try{const he=await PVe(S);if(he.found&&he.calibration){const ke={calibrationId:he.calibration.calibrationId,overallAccuracy:he.calibration.overallAccuracy,points:[],transformMatrix:[[1,0,0],[0,1,0],[0,0,1]],deviceInfo:{userAgent:navigator.userAgent,screenWidth:window.screen.width,screenHeight:window.screen.height,devicePixelRatio:window.devicePixelRatio,platform:navigator.platform},expiresAt:new Date(he.calibration.expiresAt)};a(ke),await D(ke)}}catch{console.log("No active calibration found, starting new calibration")}})()},[S,t]);const G=async le=>{a(le),await D(le)},D=async le=>{if(t)try{const he=await UVe({sessionId:t,calibrationId:le.calibrationId});i(he.visionSessionId),c(he.passages),A(he.passages[0]),await M(t),r({stage:"testing",currentPassageIndex:0,gazeTracking:!0}),await P(),console.log("✅ Vision session started:",he.visionSessionId)}catch(he){console.error("Failed to start vision session:",he),r(ke=>({...ke,error:"Vision 세션 시작 실패"}))}},M=async le=>{try{const ke=(await bt.get(`/api/v1/sessions/${le}`)).data.data;ke.template&&ke.template.questions&&(y(ke.template.questions),ke.template.questions.length>0&&v(ke.template.questions[0]))}catch(he){console.error("Failed to load questions:",he),r(ke=>({...ke,error:"문제 불러오기 실패"}))}},q=z.useCallback(async()=>{await j(),u!=null&&u.showPassageWithQuestions?Z():(f(!0),V())},[u,j,V]),Z=z.useCallback(async()=>{const le=n.currentPassageIndex+1;if(le>=l.length)await de();else{r(ke=>({...ke,currentPassageIndex:le})),A(l[le]),f(!1);const he=le;he<m.length&&v(m[he]),N||await P()}},[n.currentPassageIndex,l,m,N,P]),te=(le,he)=>{p(ke=>({...ke,[le]:he}))},ue=async(le,he)=>{try{await bt.post("/api/v1/sessions/submit-answer",{sessionId:t,questionId:le,studentAnswer:he}),console.log("✅ Answer submitted:",le)}catch(ke){console.error("Failed to submit answer:",ke)}},de=async()=>{try{await j(),await jVe({visionSessionId:s}),V(),console.log("✅ Vision test submitted"),e(`/student/vision/result/${t}`)}catch(le){console.error("Failed to submit vision test:",le),r(he=>({...he,error:"테스트 제출 실패"}))}};return n.stage==="calibration"&&!o?g.jsx(QVe,{userId:S,onCalibrationComplete:G,onCancel:()=>e("/student/dashboard")}):n.stage==="testing"&&u?g.jsxs("div",{className:"min-h-screen bg-background",children:[g.jsx("video",{ref:U,className:"hidden",autoPlay:!0,playsInline:!0}),g.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-card/95 backdrop-blur border-b border-border z-40",children:[g.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("span",{className:"text-sm text-muted-foreground",children:["지문 ",n.currentPassageIndex+1," / ",l.length]}),g.jsx("div",{className:"h-4 w-px bg-border"}),g.jsx("span",{className:`text-xs ${N?"text-green-500":"text-red-500"}`,children:N?"● 추적 중":"○ 추적 안됨"}),g.jsxs("span",{className:"text-xs text-muted-foreground",children:[O," FPS"]})]}),g.jsx("div",{className:"flex items-center gap-2",children:g.jsx("div",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-xs font-medium",children:"Vision TEST"})})]}),g.jsx("div",{className:"h-1 bg-muted",children:g.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${(n.currentPassageIndex+1)/l.length*100}%`}})})]}),g.jsx("div",{className:"pt-20 pb-20 px-4",children:g.jsxs("div",{className:"max-w-4xl mx-auto",children:[(!d||u.showPassageWithQuestions)&&g.jsxs("div",{className:"bg-card rounded-2xl p-8 shadow-lg mb-6",children:[g.jsxs("div",{className:"mb-4 flex items-center gap-2 text-sm text-muted-foreground",children:[g.jsx("span",{children:"읽기 지문"}),g.jsxs("span",{className:"px-2 py-0.5 bg-secondary rounded text-xs",children:["난이도 ",u.difficulty,"/10"]})]}),g.jsx("div",{className:"text-foreground leading-relaxed whitespace-pre-wrap",style:{fontSize:`${u.fontSize}px`,lineHeight:u.lineHeight},children:u.text}),!d&&g.jsx("button",{onClick:q,className:"mt-6 px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:"다 읽었습니다"})]}),d&&x&&g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"bg-card rounded-2xl p-8 shadow-lg",children:[g.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4",children:["문제 ",x.questionNumber]}),g.jsx("p",{className:"text-foreground mb-4 whitespace-pre-wrap",children:x.questionText}),x.questionType==="choice"&&x.options&&g.jsx("div",{className:"space-y-2",children:x.options.map(le=>g.jsx("button",{onClick:()=>{te(x.id,le.text),ue(x.id,le.text)},className:`w-full p-4 text-left rounded-lg border-2 transition-colors ${h[x.id]===le.text?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:g.jsx("span",{className:"text-foreground",children:le.text})},le.id))}),x.questionType==="short_answer"&&g.jsx("input",{type:"text",value:h[x.id]||"",onChange:le=>te(x.id,le.target.value),onBlur:le=>ue(x.id,le.target.value),className:"w-full px-4 py-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground",placeholder:"답변을 입력하세요"}),x.questionType==="essay"&&g.jsx("textarea",{value:h[x.id]||"",onChange:le=>te(x.id,le.target.value),onBlur:le=>ue(x.id,le.target.value),className:"w-full px-4 py-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-input text-foreground min-h-[120px]",placeholder:"답변을 작성하세요"})]}),g.jsx("button",{onClick:Z,disabled:!h[x.id],className:"w-full px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.currentPassageIndex+1>=l.length?"테스트 제출":"다음"})]})]})}),k&&!1,n.error&&g.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 bg-destructive text-destructive-foreground px-6 py-3 rounded-lg shadow-lg z-50",children:n.error})]}):g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent mb-4"}),g.jsx("p",{className:"text-lg text-foreground",children:"Vision TEST 준비 중..."})]})})};function $te(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=$te(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function It(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=$te(t))&&(r&&(r+=" "),r+=e);return r}var zVe=Array.isArray,ji=zVe,VVe=typeof bi=="object"&&bi&&bi.Object===Object&&bi,_te=VVe,WVe=_te,GVe=typeof self=="object"&&self&&self.Object===Object&&self,KVe=WVe||GVe||Function("return this")(),wl=KVe,XVe=wl,qVe=XVe.Symbol,kv=qVe,Z5=kv,Ote=Object.prototype,YVe=Ote.hasOwnProperty,JVe=Ote.toString,cg=Z5?Z5.toStringTag:void 0;function ZVe(t){var e=YVe.call(t,cg),n=t[cg];try{t[cg]=void 0;var r=!0}catch{}var s=JVe.call(t);return r&&(e?t[cg]=n:delete t[cg]),s}var eWe=ZVe,tWe=Object.prototype,nWe=tWe.toString;function rWe(t){return nWe.call(t)}var sWe=rWe,eQ=kv,iWe=eWe,oWe=sWe,aWe="[object Null]",lWe="[object Undefined]",tQ=eQ?eQ.toStringTag:void 0;function cWe(t){return t==null?t===void 0?lWe:aWe:tQ&&tQ in Object(t)?iWe(t):oWe(t)}var $c=cWe;function uWe(t){return t!=null&&typeof t=="object"}var _c=uWe,AWe=$c,dWe=_c,fWe="[object Symbol]";function hWe(t){return typeof t=="symbol"||dWe(t)&&AWe(t)==fWe}var pm=hWe,pWe=ji,mWe=pm,gWe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yWe=/^\w*$/;function xWe(t,e){if(pWe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||mWe(t)?!0:yWe.test(t)||!gWe.test(t)||e!=null&&t in Object(e)}var UR=xWe;function vWe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var gA=vWe;const mm=Gt(gA);var bWe=$c,wWe=gA,CWe="[object AsyncFunction]",SWe="[object Function]",BWe="[object GeneratorFunction]",NWe="[object Proxy]";function EWe(t){if(!wWe(t))return!1;var e=bWe(t);return e==SWe||e==BWe||e==CWe||e==NWe}var LR=EWe;const xt=Gt(LR);var IWe=wl,kWe=IWe["__core-js_shared__"],TWe=kWe,rE=TWe,nQ=function(){var t=/[^.]+$/.exec(rE&&rE.keys&&rE.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function FWe(t){return!!nQ&&nQ in t}var $We=FWe,_We=Function.prototype,OWe=_We.toString;function DWe(t){if(t!=null){try{return OWe.call(t)}catch{}try{return t+""}catch{}}return""}var Dte=DWe,RWe=LR,PWe=$We,UWe=gA,LWe=Dte,jWe=/[\\^$.*+?()[\]{}|]/g,MWe=/^\[object .+?Constructor\]$/,QWe=Function.prototype,HWe=Object.prototype,zWe=QWe.toString,VWe=HWe.hasOwnProperty,WWe=RegExp("^"+zWe.call(VWe).replace(jWe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function GWe(t){if(!UWe(t)||PWe(t))return!1;var e=RWe(t)?WWe:MWe;return e.test(LWe(t))}var KWe=GWe;function XWe(t,e){return t==null?void 0:t[e]}var qWe=XWe,YWe=KWe,JWe=qWe;function ZWe(t,e){var n=JWe(t,e);return YWe(n)?n:void 0}var xf=ZWe,eGe=xf,tGe=eGe(Object,"create"),A3=tGe,rQ=A3;function nGe(){this.__data__=rQ?rQ(null):{},this.size=0}var rGe=nGe;function sGe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var iGe=sGe,oGe=A3,aGe="__lodash_hash_undefined__",lGe=Object.prototype,cGe=lGe.hasOwnProperty;function uGe(t){var e=this.__data__;if(oGe){var n=e[t];return n===aGe?void 0:n}return cGe.call(e,t)?e[t]:void 0}var AGe=uGe,dGe=A3,fGe=Object.prototype,hGe=fGe.hasOwnProperty;function pGe(t){var e=this.__data__;return dGe?e[t]!==void 0:hGe.call(e,t)}var mGe=pGe,gGe=A3,yGe="__lodash_hash_undefined__";function xGe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=gGe&&e===void 0?yGe:e,this}var vGe=xGe,bGe=rGe,wGe=iGe,CGe=AGe,SGe=mGe,BGe=vGe;function gm(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}gm.prototype.clear=bGe;gm.prototype.delete=wGe;gm.prototype.get=CGe;gm.prototype.has=SGe;gm.prototype.set=BGe;var NGe=gm;function EGe(){this.__data__=[],this.size=0}var IGe=EGe;function kGe(t,e){return t===e||t!==t&&e!==e}var jR=kGe,TGe=jR;function FGe(t,e){for(var n=t.length;n--;)if(TGe(t[n][0],e))return n;return-1}var d3=FGe,$Ge=d3,_Ge=Array.prototype,OGe=_Ge.splice;function DGe(t){var e=this.__data__,n=$Ge(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():OGe.call(e,n,1),--this.size,!0}var RGe=DGe,PGe=d3;function UGe(t){var e=this.__data__,n=PGe(e,t);return n<0?void 0:e[n][1]}var LGe=UGe,jGe=d3;function MGe(t){return jGe(this.__data__,t)>-1}var QGe=MGe,HGe=d3;function zGe(t,e){var n=this.__data__,r=HGe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var VGe=zGe,WGe=IGe,GGe=RGe,KGe=LGe,XGe=QGe,qGe=VGe;function ym(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ym.prototype.clear=WGe;ym.prototype.delete=GGe;ym.prototype.get=KGe;ym.prototype.has=XGe;ym.prototype.set=qGe;var f3=ym,YGe=xf,JGe=wl,ZGe=YGe(JGe,"Map"),MR=ZGe,sQ=NGe,eKe=f3,tKe=MR;function nKe(){this.size=0,this.__data__={hash:new sQ,map:new(tKe||eKe),string:new sQ}}var rKe=nKe;function sKe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var iKe=sKe,oKe=iKe;function aKe(t,e){var n=t.__data__;return oKe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var h3=aKe,lKe=h3;function cKe(t){var e=lKe(this,t).delete(t);return this.size-=e?1:0,e}var uKe=cKe,AKe=h3;function dKe(t){return AKe(this,t).get(t)}var fKe=dKe,hKe=h3;function pKe(t){return hKe(this,t).has(t)}var mKe=pKe,gKe=h3;function yKe(t,e){var n=gKe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var xKe=yKe,vKe=rKe,bKe=uKe,wKe=fKe,CKe=mKe,SKe=xKe;function xm(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}xm.prototype.clear=vKe;xm.prototype.delete=bKe;xm.prototype.get=wKe;xm.prototype.has=CKe;xm.prototype.set=SKe;var QR=xm,Rte=QR,BKe="Expected a function";function HR(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(BKe);var n=function(){var r=arguments,s=e?e.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var o=t.apply(this,r);return n.cache=i.set(s,o)||i,o};return n.cache=new(HR.Cache||Rte),n}HR.Cache=Rte;var Pte=HR;const NKe=Gt(Pte);var EKe=Pte,IKe=500;function kKe(t){var e=EKe(t,function(r){return n.size===IKe&&n.clear(),r}),n=e.cache;return e}var TKe=kKe,FKe=TKe,$Ke=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_Ke=/\\(\\)?/g,OKe=FKe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace($Ke,function(n,r,s,i){e.push(s?i.replace(_Ke,"$1"):r||n)}),e}),DKe=OKe;function RKe(t,e){for(var n=-1,r=t==null?0:t.length,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}var zR=RKe,iQ=kv,PKe=zR,UKe=ji,LKe=pm,oQ=iQ?iQ.prototype:void 0,aQ=oQ?oQ.toString:void 0;function Ute(t){if(typeof t=="string")return t;if(UKe(t))return PKe(t,Ute)+"";if(LKe(t))return aQ?aQ.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var jKe=Ute,MKe=jKe;function QKe(t){return t==null?"":MKe(t)}var Lte=QKe,HKe=ji,zKe=UR,VKe=DKe,WKe=Lte;function GKe(t,e){return HKe(t)?t:zKe(t,e)?[t]:VKe(WKe(t))}var jte=GKe,KKe=pm;function XKe(t){if(typeof t=="string"||KKe(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var p3=XKe,qKe=jte,YKe=p3;function JKe(t,e){e=qKe(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[YKe(e[n++])];return n&&n==r?t:void 0}var VR=JKe,ZKe=VR;function eXe(t,e,n){var r=t==null?void 0:ZKe(t,e);return r===void 0?n:r}var Mte=eXe;const Uo=Gt(Mte);function tXe(t){return t==null}var nXe=tXe;const Ht=Gt(nXe);var rXe=$c,sXe=ji,iXe=_c,oXe="[object String]";function aXe(t){return typeof t=="string"||!sXe(t)&&iXe(t)&&rXe(t)==oXe}var lXe=aXe;const Zd=Gt(lXe);var Qte={exports:{}},ln={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WR=Symbol.for("react.element"),GR=Symbol.for("react.portal"),m3=Symbol.for("react.fragment"),g3=Symbol.for("react.strict_mode"),y3=Symbol.for("react.profiler"),x3=Symbol.for("react.provider"),v3=Symbol.for("react.context"),cXe=Symbol.for("react.server_context"),b3=Symbol.for("react.forward_ref"),w3=Symbol.for("react.suspense"),C3=Symbol.for("react.suspense_list"),S3=Symbol.for("react.memo"),B3=Symbol.for("react.lazy"),uXe=Symbol.for("react.offscreen"),Hte;Hte=Symbol.for("react.module.reference");function qo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case WR:switch(t=t.type,t){case m3:case y3:case g3:case w3:case C3:return t;default:switch(t=t&&t.$$typeof,t){case cXe:case v3:case b3:case B3:case S3:case x3:return t;default:return e}}case GR:return e}}}ln.ContextConsumer=v3;ln.ContextProvider=x3;ln.Element=WR;ln.ForwardRef=b3;ln.Fragment=m3;ln.Lazy=B3;ln.Memo=S3;ln.Portal=GR;ln.Profiler=y3;ln.StrictMode=g3;ln.Suspense=w3;ln.SuspenseList=C3;ln.isAsyncMode=function(){return!1};ln.isConcurrentMode=function(){return!1};ln.isContextConsumer=function(t){return qo(t)===v3};ln.isContextProvider=function(t){return qo(t)===x3};ln.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===WR};ln.isForwardRef=function(t){return qo(t)===b3};ln.isFragment=function(t){return qo(t)===m3};ln.isLazy=function(t){return qo(t)===B3};ln.isMemo=function(t){return qo(t)===S3};ln.isPortal=function(t){return qo(t)===GR};ln.isProfiler=function(t){return qo(t)===y3};ln.isStrictMode=function(t){return qo(t)===g3};ln.isSuspense=function(t){return qo(t)===w3};ln.isSuspenseList=function(t){return qo(t)===C3};ln.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===m3||t===y3||t===g3||t===w3||t===C3||t===uXe||typeof t=="object"&&t!==null&&(t.$$typeof===B3||t.$$typeof===S3||t.$$typeof===x3||t.$$typeof===v3||t.$$typeof===b3||t.$$typeof===Hte||t.getModuleId!==void 0)};ln.typeOf=qo;Qte.exports=ln;var AXe=Qte.exports,dXe=$c,fXe=_c,hXe="[object Number]";function pXe(t){return typeof t=="number"||fXe(t)&&dXe(t)==hXe}var zte=pXe;const mXe=Gt(zte);var gXe=zte;function yXe(t){return gXe(t)&&t!=+t}var xXe=yXe;const Tv=Gt(xXe);var ha=function(e){return e===0?0:e>0?1:-1},od=function(e){return Zd(e)&&e.indexOf("%")===e.length-1},Ue=function(e){return mXe(e)&&!Tv(e)},vXe=function(e){return Ht(e)},Hr=function(e){return Ue(e)||Zd(e)},bXe=0,N3=function(e){var n=++bXe;return"".concat(e||"").concat(n)},pa=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ue(e)&&!Zd(e))return r;var i;if(od(e)){var o=e.indexOf("%");i=n*parseFloat(e.slice(0,o))/100}else i=+e;return Tv(i)&&(i=r),s&&i>n&&(i=n),i},eu=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},wXe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},s=0;s<n;s++)if(!r[e[s]])r[e[s]]=!0;else return!0;return!1},Za=function(e,n){return Ue(e)&&Ue(n)?function(r){return e+r*(n-e)}:function(){return n}};function yT(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Uo(r,e))===n})}var CXe=function(e,n){return Ue(e)&&Ue(n)?e-n:Zd(e)&&Zd(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function _h(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function xT(t){"@babel/helpers - typeof";return xT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xT(t)}var SXe=["viewBox","children"],BXe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],lQ=["points","pathLength"],sE={svg:SXe,polygon:lQ,polyline:lQ},KR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],$2=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(z.isValidElement(e)&&(r=e.props),!mm(r))return null;var s={};return Object.keys(r).forEach(function(i){KR.includes(i)&&(s[i]=n||function(o){return r[i](r,o)})}),s},NXe=function(e,n,r){return function(s){return e(n,r,s),null}},pp=function(e,n,r){if(!mm(e)||xT(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(i){var o=e[i];KR.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=NXe(o,n,r))}),s},EXe=["children"],IXe=["children"];function cQ(t,e){if(t==null)return{};var n=kXe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kXe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var uQ={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ic=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},AQ=null,iE=null,XR=function t(e){if(e===AQ&&Array.isArray(iE))return iE;var n=[];return z.Children.forEach(e,function(r){Ht(r)||(AXe.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),iE=n,AQ=e,n};function wa(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(s){return ic(s)}):r=[ic(e)],XR(t).forEach(function(s){var i=Uo(s,"type.displayName")||Uo(s,"type.name");r.indexOf(i)!==-1&&n.push(s)}),n}function Ki(t,e){var n=wa(t,e);return n&&n[0]}var dQ=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,s=n.height;return!(!Ue(r)||r<=0||!Ue(s)||s<=0)},TXe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],FXe=function(e){return e&&e.type&&Zd(e.type)&&TXe.indexOf(e.type)>=0},$Xe=function(e,n,r,s){var i,o=(i=sE==null?void 0:sE[s])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!xt(e)&&(s&&o.includes(n)||BXe.includes(n))||r&&KR.includes(n)},ut=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(z.isValidElement(e)&&(s=e.props),!mm(s))return null;var i={};return Object.keys(s).forEach(function(o){var a;$Xe((a=s)===null||a===void 0?void 0:a[o],o,n,r)&&(i[o]=s[o])}),i},vT=function t(e,n){if(e===n)return!0;var r=z.Children.count(e);if(r!==z.Children.count(n))return!1;if(r===0)return!0;if(r===1)return fQ(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var s=0;s<r;s++){var i=e[s],o=n[s];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!fQ(i,o))return!1}return!0},fQ=function(e,n){if(Ht(e)&&Ht(n))return!0;if(!Ht(e)&&!Ht(n)){var r=e.props||{},s=r.children,i=cQ(r,EXe),o=n.props||{},a=o.children,l=cQ(o,IXe);return s&&a?_h(i,l)&&vT(s,a):!s&&!a?_h(i,l):!1}return!1},hQ=function(e,n){var r=[],s={};return XR(e).forEach(function(i,o){if(FXe(i))r.push(i);else if(i){var a=ic(i.type),l=n[a]||{},c=l.handler,u=l.once;if(c&&(!u||!s[a])){var A=c(i,a,o);r.push(A),s[a]=!0}}}),r},_Xe=function(e){var n=e&&e.type;return n&&uQ[n]?uQ[n]:null},OXe=function(e,n){return XR(n).indexOf(e)},DXe=["children","width","height","viewBox","className","style","title","desc"];function bT(){return bT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bT.apply(this,arguments)}function RXe(t,e){if(t==null)return{};var n=PXe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function PXe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wT(t){var e=t.children,n=t.width,r=t.height,s=t.viewBox,i=t.className,o=t.style,a=t.title,l=t.desc,c=RXe(t,DXe),u=s||{width:n,height:r,x:0,y:0},A=It("recharts-surface",i);return ie.createElement("svg",bT({},ut(c,!0,"svg"),{className:A,width:n,height:r,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ie.createElement("title",null,a),ie.createElement("desc",null,l),e)}var UXe=["children","className"];function CT(){return CT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CT.apply(this,arguments)}function LXe(t,e){if(t==null)return{};var n=jXe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jXe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var yn=ie.forwardRef(function(t,e){var n=t.children,r=t.className,s=LXe(t,UXe),i=It("recharts-layer",r);return ie.createElement("g",CT({className:i},ut(s,!0),{ref:e}),n)}),oc=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i]};function MXe(t,e,n){var r=-1,s=t.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(s);++r<s;)i[r]=t[r+e];return i}var QXe=MXe,HXe=QXe;function zXe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:HXe(t,e,n)}var VXe=zXe,WXe="\\ud800-\\udfff",GXe="\\u0300-\\u036f",KXe="\\ufe20-\\ufe2f",XXe="\\u20d0-\\u20ff",qXe=GXe+KXe+XXe,YXe="\\ufe0e\\ufe0f",JXe="\\u200d",ZXe=RegExp("["+JXe+WXe+qXe+YXe+"]");function eqe(t){return ZXe.test(t)}var Vte=eqe;function tqe(t){return t.split("")}var nqe=tqe,Wte="\\ud800-\\udfff",rqe="\\u0300-\\u036f",sqe="\\ufe20-\\ufe2f",iqe="\\u20d0-\\u20ff",oqe=rqe+sqe+iqe,aqe="\\ufe0e\\ufe0f",lqe="["+Wte+"]",ST="["+oqe+"]",BT="\\ud83c[\\udffb-\\udfff]",cqe="(?:"+ST+"|"+BT+")",Gte="[^"+Wte+"]",Kte="(?:\\ud83c[\\udde6-\\uddff]){2}",Xte="[\\ud800-\\udbff][\\udc00-\\udfff]",uqe="\\u200d",qte=cqe+"?",Yte="["+aqe+"]?",Aqe="(?:"+uqe+"(?:"+[Gte,Kte,Xte].join("|")+")"+Yte+qte+")*",dqe=Yte+qte+Aqe,fqe="(?:"+[Gte+ST+"?",ST,Kte,Xte,lqe].join("|")+")",hqe=RegExp(BT+"(?="+BT+")|"+fqe+dqe,"g");function pqe(t){return t.match(hqe)||[]}var mqe=pqe,gqe=nqe,yqe=Vte,xqe=mqe;function vqe(t){return yqe(t)?xqe(t):gqe(t)}var bqe=vqe,wqe=VXe,Cqe=Vte,Sqe=bqe,Bqe=Lte;function Nqe(t){return function(e){e=Bqe(e);var n=Cqe(e)?Sqe(e):void 0,r=n?n[0]:e.charAt(0),s=n?wqe(n,1).join(""):e.slice(1);return r[t]()+s}}var Eqe=Nqe,Iqe=Eqe,kqe=Iqe("toUpperCase"),Tqe=kqe;const E3=Gt(Tqe);function Cn(t){return function(){return t}}const Jte=Math.cos,_2=Math.sin,Oa=Math.sqrt,O2=Math.PI,I3=2*O2,NT=Math.PI,ET=2*NT,HA=1e-6,Fqe=ET-HA;function Zte(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function $qe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Zte;const n=10**e;return function(r){this._+=r[0];for(let s=1,i=r.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class _qe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Zte:$qe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,s){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,n,r,s,i,o){this._append`C${+e},${+n},${+r},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(e,n,r,s,i){if(e=+e,n=+n,r=+r,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,l=r-e,c=s-n,u=o-e,A=a-n,d=u*u+A*A;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>HA)if(!(Math.abs(A*l-c*u)>HA)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let f=r-o,h=s-a,p=l*l+c*c,m=f*f+h*h,y=Math.sqrt(p),x=Math.sqrt(d),v=i*Math.tan((NT-Math.acos((p+d-m)/(2*y*x)))/2),b=v/x,w=v/y;Math.abs(b-1)>HA&&this._append`L${e+b*u},${n+b*A}`,this._append`A${i},${i},0,0,${+(A*f>u*h)},${this._x1=e+w*l},${this._y1=n+w*c}`}}arc(e,n,r,s,i,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(s),l=r*Math.sin(s),c=e+a,u=n+l,A=1^o,d=o?s-i:i-s;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>HA||Math.abs(this._y1-u)>HA)&&this._append`L${c},${u}`,r&&(d<0&&(d=d%ET+ET),d>Fqe?this._append`A${r},${r},0,1,${A},${e-a},${n-l}A${r},${r},0,1,${A},${this._x1=c},${this._y1=u}`:d>HA&&this._append`A${r},${r},0,${+(d>=NT)},${A},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function qR(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new _qe(e)}function YR(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ene(t){this._context=t}ene.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function k3(t){return new ene(t)}function tne(t){return t[0]}function nne(t){return t[1]}function rne(t,e){var n=Cn(!0),r=null,s=k3,i=null,o=qR(a);t=typeof t=="function"?t:t===void 0?tne:Cn(t),e=typeof e=="function"?e:e===void 0?nne:Cn(e);function a(l){var c,u=(l=YR(l)).length,A,d=!1,f;for(r==null&&(i=s(f=o())),c=0;c<=u;++c)!(c<u&&n(A=l[c],c,l))===d&&((d=!d)?i.lineStart():i.lineEnd()),d&&i.point(+t(A,c,l),+e(A,c,l));if(f)return i=null,f+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Cn(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Cn(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Cn(!!l),a):n},a.curve=function(l){return arguments.length?(s=l,r!=null&&(i=s(r)),a):s},a.context=function(l){return arguments.length?(l==null?r=i=null:i=s(r=l),a):r},a}function xb(t,e,n){var r=null,s=Cn(!0),i=null,o=k3,a=null,l=qR(c);t=typeof t=="function"?t:t===void 0?tne:Cn(+t),e=typeof e=="function"?e:Cn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?nne:Cn(+n);function c(A){var d,f,h,p=(A=YR(A)).length,m,y=!1,x,v=new Array(p),b=new Array(p);for(i==null&&(a=o(x=l())),d=0;d<=p;++d){if(!(d<p&&s(m=A[d],d,A))===y)if(y=!y)f=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=d-1;h>=f;--h)a.point(v[h],b[h]);a.lineEnd(),a.areaEnd()}y&&(v[d]=+t(m,d,A),b[d]=+e(m,d,A),a.point(r?+r(m,d,A):v[d],n?+n(m,d,A):b[d]))}if(x)return a=null,x+""||null}function u(){return rne().defined(s).curve(o).context(i)}return c.x=function(A){return arguments.length?(t=typeof A=="function"?A:Cn(+A),r=null,c):t},c.x0=function(A){return arguments.length?(t=typeof A=="function"?A:Cn(+A),c):t},c.x1=function(A){return arguments.length?(r=A==null?null:typeof A=="function"?A:Cn(+A),c):r},c.y=function(A){return arguments.length?(e=typeof A=="function"?A:Cn(+A),n=null,c):e},c.y0=function(A){return arguments.length?(e=typeof A=="function"?A:Cn(+A),c):e},c.y1=function(A){return arguments.length?(n=A==null?null:typeof A=="function"?A:Cn(+A),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(A){return arguments.length?(s=typeof A=="function"?A:Cn(!!A),c):s},c.curve=function(A){return arguments.length?(o=A,i!=null&&(a=o(i)),c):o},c.context=function(A){return arguments.length?(A==null?i=a=null:a=o(i=A),c):i},c}class sne{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Oqe(t){return new sne(t,!0)}function Dqe(t){return new sne(t,!1)}const JR={draw(t,e){const n=Oa(e/O2);t.moveTo(n,0),t.arc(0,0,n,0,I3)}},Rqe={draw(t,e){const n=Oa(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},ine=Oa(1/3),Pqe=ine*2,Uqe={draw(t,e){const n=Oa(e/Pqe),r=n*ine;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Lqe={draw(t,e){const n=Oa(e),r=-n/2;t.rect(r,r,n,n)}},jqe=.8908130915292852,one=_2(O2/10)/_2(7*O2/10),Mqe=_2(I3/10)*one,Qqe=-Jte(I3/10)*one,Hqe={draw(t,e){const n=Oa(e*jqe),r=Mqe*n,s=Qqe*n;t.moveTo(0,-n),t.lineTo(r,s);for(let i=1;i<5;++i){const o=I3*i/5,a=Jte(o),l=_2(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*s,l*r+a*s)}t.closePath()}},oE=Oa(3),zqe={draw(t,e){const n=-Oa(e/(oE*3));t.moveTo(0,n*2),t.lineTo(-oE*n,-n),t.lineTo(oE*n,-n),t.closePath()}},fo=-.5,ho=Oa(3)/2,IT=1/Oa(12),Vqe=(IT/2+1)*3,Wqe={draw(t,e){const n=Oa(e/Vqe),r=n/2,s=n*IT,i=r,o=n*IT+n,a=-i,l=o;t.moveTo(r,s),t.lineTo(i,o),t.lineTo(a,l),t.lineTo(fo*r-ho*s,ho*r+fo*s),t.lineTo(fo*i-ho*o,ho*i+fo*o),t.lineTo(fo*a-ho*l,ho*a+fo*l),t.lineTo(fo*r+ho*s,fo*s-ho*r),t.lineTo(fo*i+ho*o,fo*o-ho*i),t.lineTo(fo*a+ho*l,fo*l-ho*a),t.closePath()}};function Gqe(t,e){let n=null,r=qR(s);t=typeof t=="function"?t:Cn(t||JR),e=typeof e=="function"?e:Cn(e===void 0?64:+e);function s(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(t=typeof i=="function"?i:Cn(i),s):t},s.size=function(i){return arguments.length?(e=typeof i=="function"?i:Cn(+i),s):e},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function D2(){}function R2(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ane(t){this._context=t}ane.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:R2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:R2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Kqe(t){return new ane(t)}function lne(t){this._context=t}lne.prototype={areaStart:D2,areaEnd:D2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:R2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Xqe(t){return new lne(t)}function cne(t){this._context=t}cne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:R2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function qqe(t){return new cne(t)}function une(t){this._context=t}une.prototype={areaStart:D2,areaEnd:D2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Yqe(t){return new une(t)}function pQ(t){return t<0?-1:1}function mQ(t,e,n){var r=t._x1-t._x0,s=e-t._x1,i=(t._y1-t._y0)/(r||s<0&&-0),o=(n-t._y1)/(s||r<0&&-0),a=(i*s+o*r)/(r+s);return(pQ(i)+pQ(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(a))||0}function gQ(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function aE(t,e,n){var r=t._x0,s=t._y0,i=t._x1,o=t._y1,a=(i-r)/3;t._context.bezierCurveTo(r+a,s+a*e,i-a,o-a*n,i,o)}function P2(t){this._context=t}P2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:aE(this,this._t0,gQ(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,aE(this,gQ(this,n=mQ(this,t,e)),n);break;default:aE(this,this._t0,n=mQ(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Ane(t){this._context=new dne(t)}(Ane.prototype=Object.create(P2.prototype)).point=function(t,e){P2.prototype.point.call(this,e,t)};function dne(t){this._context=t}dne.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,s,i){this._context.bezierCurveTo(e,t,r,n,i,s)}};function Jqe(t){return new P2(t)}function Zqe(t){return new Ane(t)}function fne(t){this._context=t}fne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=yQ(t),s=yQ(e),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],s[0][i],r[1][i],s[1][i],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function yQ(t){var e,n=t.length-1,r,s=new Array(n),i=new Array(n),o=new Array(n);for(s[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,i[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=s[e]/i[e-1],i[e]-=r,o[e]-=r*o[e-1];for(s[n-1]=o[n-1]/i[n-1],e=n-2;e>=0;--e)s[e]=(o[e]-s[e+1])/i[e];for(i[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)i[e]=2*t[e+1]-s[e+1];return[s,i]}function eYe(t){return new fne(t)}function T3(t,e){this._context=t,this._t=e}T3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function tYe(t){return new T3(t,.5)}function nYe(t){return new T3(t,0)}function rYe(t){return new T3(t,1)}function mp(t,e){if((o=t.length)>1)for(var n=1,r,s,i=t[e[0]],o,a=i.length;n<o;++n)for(s=i,i=t[e[n]],r=0;r<a;++r)i[r][1]+=i[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function kT(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function sYe(t,e){return t[e]}function iYe(t){const e=[];return e.key=t,e}function oYe(){var t=Cn([]),e=kT,n=mp,r=sYe;function s(i){var o=Array.from(t.apply(this,arguments),iYe),a,l=o.length,c=-1,u;for(const A of i)for(a=0,++c;a<l;++a)(o[a][c]=[0,+r(A,o[a].key,c,i)]).data=A;for(a=0,u=YR(e(o));a<l;++a)o[u[a]].index=a;return n(o,u),o}return s.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Cn(Array.from(i)),s):t},s.value=function(i){return arguments.length?(r=typeof i=="function"?i:Cn(+i),s):r},s.order=function(i){return arguments.length?(e=i==null?kT:typeof i=="function"?i:Cn(Array.from(i)),s):e},s.offset=function(i){return arguments.length?(n=i??mp,s):n},s}function aYe(t,e){if((r=t.length)>0){for(var n,r,s=0,i=t[0].length,o;s<i;++s){for(o=n=0;n<r;++n)o+=t[n][s][1]||0;if(o)for(n=0;n<r;++n)t[n][s][1]/=o}mp(t,e)}}function lYe(t,e){if((s=t.length)>0){for(var n=0,r=t[e[0]],s,i=r.length;n<i;++n){for(var o=0,a=0;o<s;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}mp(t,e)}}function cYe(t,e){if(!(!((o=t.length)>0)||!((i=(s=t[e[0]]).length)>0))){for(var n=0,r=1,s,i,o;r<i;++r){for(var a=0,l=0,c=0;a<o;++a){for(var u=t[e[a]],A=u[r][1]||0,d=u[r-1][1]||0,f=(A-d)/2,h=0;h<a;++h){var p=t[e[h]],m=p[r][1]||0,y=p[r-1][1]||0;f+=m-y}l+=A,c+=f*A}s[r-1][1]+=s[r-1][0]=n,l&&(n-=c/l)}s[r-1][1]+=s[r-1][0]=n,mp(t,e)}}function c0(t){"@babel/helpers - typeof";return c0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c0(t)}var uYe=["type","size","sizeType"];function TT(){return TT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TT.apply(this,arguments)}function xQ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function vQ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xQ(Object(n),!0).forEach(function(r){AYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xQ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AYe(t,e,n){return e=dYe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dYe(t){var e=fYe(t,"string");return c0(e)=="symbol"?e:e+""}function fYe(t,e){if(c0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(c0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hYe(t,e){if(t==null)return{};var n=pYe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pYe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var hne={symbolCircle:JR,symbolCross:Rqe,symbolDiamond:Uqe,symbolSquare:Lqe,symbolStar:Hqe,symbolTriangle:zqe,symbolWye:Wqe},mYe=Math.PI/180,gYe=function(e){var n="symbol".concat(E3(e));return hne[n]||JR},yYe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*mYe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},xYe=function(e,n){hne["symbol".concat(E3(e))]=n},ZR=function(e){var n=e.type,r=n===void 0?"circle":n,s=e.size,i=s===void 0?64:s,o=e.sizeType,a=o===void 0?"area":o,l=hYe(e,uYe),c=vQ(vQ({},l),{},{type:r,size:i,sizeType:a}),u=function(){var m=gYe(r),y=Gqe().type(m).size(yYe(i,a,r));return y()},A=c.className,d=c.cx,f=c.cy,h=ut(c,!0);return d===+d&&f===+f&&i===+i?ie.createElement("path",TT({},h,{className:It("recharts-symbols",A),transform:"translate(".concat(d,", ").concat(f,")"),d:u()})):null};ZR.registerSymbol=xYe;function gp(t){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gp(t)}function FT(){return FT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FT.apply(this,arguments)}function bQ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function vYe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bQ(Object(n),!0).forEach(function(r){u0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bQ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wYe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mne(r.key),r)}}function CYe(t,e,n){return e&&wYe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function SYe(t,e,n){return e=U2(e),BYe(t,pne()?Reflect.construct(e,n||[],U2(t).constructor):e.apply(t,n))}function BYe(t,e){if(e&&(gp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NYe(t)}function NYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pne=function(){return!!t})()}function U2(t){return U2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},U2(t)}function EYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$T(t,e)}function $T(t,e){return $T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},$T(t,e)}function u0(t,e,n){return e=mne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mne(t){var e=IYe(t,"string");return gp(e)=="symbol"?e:e+""}function IYe(t,e){if(gp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var po=32,eP=function(t){function e(){return bYe(this,e),SYe(this,e,arguments)}return EYe(e,t),CYe(e,[{key:"renderIcon",value:function(r){var s=this.props.inactiveColor,i=po/2,o=po/6,a=po/3,l=r.inactive?s:r.color;if(r.type==="plainline")return ie.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:po,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return ie.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(po,"M").concat(2*a,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return ie.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(po/8,"h").concat(po,"v").concat(po*3/4,"h").concat(-po,"z"),className:"recharts-legend-icon"});if(ie.isValidElement(r.legendIcon)){var c=vYe({},r);return delete c.legendIcon,ie.cloneElement(r.legendIcon,c)}return ie.createElement(ZR,{fill:l,cx:i,cy:i,size:po,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,s=this.props,i=s.payload,o=s.iconSize,a=s.layout,l=s.formatter,c=s.inactiveColor,u={x:0,y:0,width:po,height:po},A={display:a==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(f,h){var p=f.formatter||l,m=It(u0(u0({"recharts-legend-item":!0},"legend-item-".concat(h),!0),"inactive",f.inactive));if(f.type==="none")return null;var y=xt(f.value)?null:f.value;oc(!xt(f.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=f.inactive?c:f.color;return ie.createElement("li",FT({className:m,style:A,key:"legend-item-".concat(h)},pp(r.props,f,h)),ie.createElement(wT,{width:o,height:o,viewBox:u,style:d},r.renderIcon(f)),ie.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},p?p(y,f,h):y))})}},{key:"render",value:function(){var r=this.props,s=r.payload,i=r.layout,o=r.align;if(!s||!s.length)return null;var a={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return ie.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])}(z.PureComponent);u0(eP,"displayName","Legend");u0(eP,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var kYe=f3;function TYe(){this.__data__=new kYe,this.size=0}var FYe=TYe;function $Ye(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var _Ye=$Ye;function OYe(t){return this.__data__.get(t)}var DYe=OYe;function RYe(t){return this.__data__.has(t)}var PYe=RYe,UYe=f3,LYe=MR,jYe=QR,MYe=200;function QYe(t,e){var n=this.__data__;if(n instanceof UYe){var r=n.__data__;if(!LYe||r.length<MYe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new jYe(r)}return n.set(t,e),this.size=n.size,this}var HYe=QYe,zYe=f3,VYe=FYe,WYe=_Ye,GYe=DYe,KYe=PYe,XYe=HYe;function vm(t){var e=this.__data__=new zYe(t);this.size=e.size}vm.prototype.clear=VYe;vm.prototype.delete=WYe;vm.prototype.get=GYe;vm.prototype.has=KYe;vm.prototype.set=XYe;var gne=vm,qYe="__lodash_hash_undefined__";function YYe(t){return this.__data__.set(t,qYe),this}var JYe=YYe;function ZYe(t){return this.__data__.has(t)}var eJe=ZYe,tJe=QR,nJe=JYe,rJe=eJe;function L2(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new tJe;++e<n;)this.add(t[e])}L2.prototype.add=L2.prototype.push=nJe;L2.prototype.has=rJe;var yne=L2;function sJe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var xne=sJe;function iJe(t,e){return t.has(e)}var vne=iJe,oJe=yne,aJe=xne,lJe=vne,cJe=1,uJe=2;function AJe(t,e,n,r,s,i){var o=n&cJe,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=i.get(t),u=i.get(e);if(c&&u)return c==e&&u==t;var A=-1,d=!0,f=n&uJe?new oJe:void 0;for(i.set(t,e),i.set(e,t);++A<a;){var h=t[A],p=e[A];if(r)var m=o?r(p,h,A,e,t,i):r(h,p,A,t,e,i);if(m!==void 0){if(m)continue;d=!1;break}if(f){if(!aJe(e,function(y,x){if(!lJe(f,x)&&(h===y||s(h,y,n,r,i)))return f.push(x)})){d=!1;break}}else if(!(h===p||s(h,p,n,r,i))){d=!1;break}}return i.delete(t),i.delete(e),d}var bne=AJe,dJe=wl,fJe=dJe.Uint8Array,hJe=fJe;function pJe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,s){n[++e]=[s,r]}),n}var mJe=pJe;function gJe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var tP=gJe,wQ=kv,CQ=hJe,yJe=jR,xJe=bne,vJe=mJe,bJe=tP,wJe=1,CJe=2,SJe="[object Boolean]",BJe="[object Date]",NJe="[object Error]",EJe="[object Map]",IJe="[object Number]",kJe="[object RegExp]",TJe="[object Set]",FJe="[object String]",$Je="[object Symbol]",_Je="[object ArrayBuffer]",OJe="[object DataView]",SQ=wQ?wQ.prototype:void 0,lE=SQ?SQ.valueOf:void 0;function DJe(t,e,n,r,s,i,o){switch(n){case OJe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _Je:return!(t.byteLength!=e.byteLength||!i(new CQ(t),new CQ(e)));case SJe:case BJe:case IJe:return yJe(+t,+e);case NJe:return t.name==e.name&&t.message==e.message;case kJe:case FJe:return t==e+"";case EJe:var a=vJe;case TJe:var l=r&wJe;if(a||(a=bJe),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=CJe,o.set(t,e);var u=xJe(a(t),a(e),r,s,i,o);return o.delete(t),u;case $Je:if(lE)return lE.call(t)==lE.call(e)}return!1}var RJe=DJe;function PJe(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var wne=PJe,UJe=wne,LJe=ji;function jJe(t,e,n){var r=e(t);return LJe(t)?r:UJe(r,n(t))}var MJe=jJe;function QJe(t,e){for(var n=-1,r=t==null?0:t.length,s=0,i=[];++n<r;){var o=t[n];e(o,n,t)&&(i[s++]=o)}return i}var HJe=QJe;function zJe(){return[]}var VJe=zJe,WJe=HJe,GJe=VJe,KJe=Object.prototype,XJe=KJe.propertyIsEnumerable,BQ=Object.getOwnPropertySymbols,qJe=BQ?function(t){return t==null?[]:(t=Object(t),WJe(BQ(t),function(e){return XJe.call(t,e)}))}:GJe,YJe=qJe;function JJe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var ZJe=JJe,eZe=$c,tZe=_c,nZe="[object Arguments]";function rZe(t){return tZe(t)&&eZe(t)==nZe}var sZe=rZe,NQ=sZe,iZe=_c,Cne=Object.prototype,oZe=Cne.hasOwnProperty,aZe=Cne.propertyIsEnumerable,lZe=NQ(function(){return arguments}())?NQ:function(t){return iZe(t)&&oZe.call(t,"callee")&&!aZe.call(t,"callee")},nP=lZe,j2={exports:{}};function cZe(){return!1}var uZe=cZe;j2.exports;(function(t,e){var n=wl,r=uZe,s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===s,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(j2,j2.exports);var Sne=j2.exports,AZe=9007199254740991,dZe=/^(?:0|[1-9]\d*)$/;function fZe(t,e){var n=typeof t;return e=e??AZe,!!e&&(n=="number"||n!="symbol"&&dZe.test(t))&&t>-1&&t%1==0&&t<e}var rP=fZe,hZe=9007199254740991;function pZe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=hZe}var sP=pZe,mZe=$c,gZe=sP,yZe=_c,xZe="[object Arguments]",vZe="[object Array]",bZe="[object Boolean]",wZe="[object Date]",CZe="[object Error]",SZe="[object Function]",BZe="[object Map]",NZe="[object Number]",EZe="[object Object]",IZe="[object RegExp]",kZe="[object Set]",TZe="[object String]",FZe="[object WeakMap]",$Ze="[object ArrayBuffer]",_Ze="[object DataView]",OZe="[object Float32Array]",DZe="[object Float64Array]",RZe="[object Int8Array]",PZe="[object Int16Array]",UZe="[object Int32Array]",LZe="[object Uint8Array]",jZe="[object Uint8ClampedArray]",MZe="[object Uint16Array]",QZe="[object Uint32Array]",Tn={};Tn[OZe]=Tn[DZe]=Tn[RZe]=Tn[PZe]=Tn[UZe]=Tn[LZe]=Tn[jZe]=Tn[MZe]=Tn[QZe]=!0;Tn[xZe]=Tn[vZe]=Tn[$Ze]=Tn[bZe]=Tn[_Ze]=Tn[wZe]=Tn[CZe]=Tn[SZe]=Tn[BZe]=Tn[NZe]=Tn[EZe]=Tn[IZe]=Tn[kZe]=Tn[TZe]=Tn[FZe]=!1;function HZe(t){return yZe(t)&&gZe(t.length)&&!!Tn[mZe(t)]}var zZe=HZe;function VZe(t){return function(e){return t(e)}}var Bne=VZe,M2={exports:{}};M2.exports;(function(t,e){var n=_te,r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,i=s&&s.exports===r,o=i&&n.process,a=function(){try{var l=s&&s.require&&s.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(M2,M2.exports);var WZe=M2.exports,GZe=zZe,KZe=Bne,EQ=WZe,IQ=EQ&&EQ.isTypedArray,XZe=IQ?KZe(IQ):GZe,Nne=XZe,qZe=ZJe,YZe=nP,JZe=ji,ZZe=Sne,eet=rP,tet=Nne,net=Object.prototype,ret=net.hasOwnProperty;function set(t,e){var n=JZe(t),r=!n&&YZe(t),s=!n&&!r&&ZZe(t),i=!n&&!r&&!s&&tet(t),o=n||r||s||i,a=o?qZe(t.length,String):[],l=a.length;for(var c in t)(e||ret.call(t,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||eet(c,l)))&&a.push(c);return a}var iet=set,oet=Object.prototype;function aet(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||oet;return t===n}var cet=aet;function uet(t,e){return function(n){return t(e(n))}}var Ene=uet,Aet=Ene,det=Aet(Object.keys,Object),fet=det,het=cet,pet=fet,met=Object.prototype,get=met.hasOwnProperty;function yet(t){if(!het(t))return pet(t);var e=[];for(var n in Object(t))get.call(t,n)&&n!="constructor"&&e.push(n);return e}var xet=yet,vet=LR,bet=sP;function wet(t){return t!=null&&bet(t.length)&&!vet(t)}var Fv=wet,Cet=iet,Bet=xet,Net=Fv;function Eet(t){return Net(t)?Cet(t):Bet(t)}var F3=Eet,Iet=MJe,ket=YJe,Tet=F3;function Fet(t){return Iet(t,Tet,ket)}var $et=Fet,kQ=$et,_et=1,Oet=Object.prototype,Det=Oet.hasOwnProperty;function Ret(t,e,n,r,s,i){var o=n&_et,a=kQ(t),l=a.length,c=kQ(e),u=c.length;if(l!=u&&!o)return!1;for(var A=l;A--;){var d=a[A];if(!(o?d in e:Det.call(e,d)))return!1}var f=i.get(t),h=i.get(e);if(f&&h)return f==e&&h==t;var p=!0;i.set(t,e),i.set(e,t);for(var m=o;++A<l;){d=a[A];var y=t[d],x=e[d];if(r)var v=o?r(x,y,d,e,t,i):r(y,x,d,t,e,i);if(!(v===void 0?y===x||s(y,x,n,r,i):v)){p=!1;break}m||(m=d=="constructor")}if(p&&!m){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof w=="function"&&w instanceof w)&&(p=!1)}return i.delete(t),i.delete(e),p}var Pet=Ret,Uet=xf,Let=wl,jet=Uet(Let,"DataView"),Met=jet,Qet=xf,Het=wl,zet=Qet(Het,"Promise"),Vet=zet,Wet=xf,Get=wl,Ket=Wet(Get,"Set"),Ine=Ket,Xet=xf,qet=wl,Yet=Xet(qet,"WeakMap"),Jet=Yet,_T=Met,OT=MR,DT=Vet,RT=Ine,PT=Jet,kne=$c,bm=Dte,TQ="[object Map]",Zet="[object Object]",FQ="[object Promise]",$Q="[object Set]",_Q="[object WeakMap]",OQ="[object DataView]",ett=bm(_T),ttt=bm(OT),ntt=bm(DT),rtt=bm(RT),stt=bm(PT),zA=kne;(_T&&zA(new _T(new ArrayBuffer(1)))!=OQ||OT&&zA(new OT)!=TQ||DT&&zA(DT.resolve())!=FQ||RT&&zA(new RT)!=$Q||PT&&zA(new PT)!=_Q)&&(zA=function(t){var e=kne(t),n=e==Zet?t.constructor:void 0,r=n?bm(n):"";if(r)switch(r){case ett:return OQ;case ttt:return TQ;case ntt:return FQ;case rtt:return $Q;case stt:return _Q}return e});var itt=zA,cE=gne,ott=bne,att=RJe,ltt=Pet,DQ=itt,RQ=ji,PQ=Sne,ctt=Nne,utt=1,UQ="[object Arguments]",LQ="[object Array]",vb="[object Object]",Att=Object.prototype,jQ=Att.hasOwnProperty;function dtt(t,e,n,r,s,i){var o=RQ(t),a=RQ(e),l=o?LQ:DQ(t),c=a?LQ:DQ(e);l=l==UQ?vb:l,c=c==UQ?vb:c;var u=l==vb,A=c==vb,d=l==c;if(d&&PQ(t)){if(!PQ(e))return!1;o=!0,u=!1}if(d&&!u)return i||(i=new cE),o||ctt(t)?ott(t,e,n,r,s,i):att(t,e,l,n,r,s,i);if(!(n&utt)){var f=u&&jQ.call(t,"__wrapped__"),h=A&&jQ.call(e,"__wrapped__");if(f||h){var p=f?t.value():t,m=h?e.value():e;return i||(i=new cE),s(p,m,n,r,i)}}return d?(i||(i=new cE),ltt(t,e,n,r,s,i)):!1}var ftt=dtt,htt=ftt,MQ=_c;function Tne(t,e,n,r,s){return t===e?!0:t==null||e==null||!MQ(t)&&!MQ(e)?t!==t&&e!==e:htt(t,e,n,r,Tne,s)}var iP=Tne,ptt=gne,mtt=iP,gtt=1,ytt=2;function xtt(t,e,n,r){var s=n.length,i=s,o=!r;if(t==null)return!i;for(t=Object(t);s--;){var a=n[s];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++s<i;){a=n[s];var l=a[0],c=t[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in t))return!1}else{var A=new ptt;if(r)var d=r(c,u,l,t,e,A);if(!(d===void 0?mtt(u,c,gtt|ytt,r,A):d))return!1}}return!0}var vtt=xtt,btt=gA;function wtt(t){return t===t&&!btt(t)}var Fne=wtt,Ctt=Fne,Stt=F3;function Btt(t){for(var e=Stt(t),n=e.length;n--;){var r=e[n],s=t[r];e[n]=[r,s,Ctt(s)]}return e}var Ntt=Btt;function Ett(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var $ne=Ett,Itt=vtt,ktt=Ntt,Ttt=$ne;function Ftt(t){var e=ktt(t);return e.length==1&&e[0][2]?Ttt(e[0][0],e[0][1]):function(n){return n===t||Itt(n,t,e)}}var $tt=Ftt;function _tt(t,e){return t!=null&&e in Object(t)}var Ott=_tt,Dtt=jte,Rtt=nP,Ptt=ji,Utt=rP,Ltt=sP,jtt=p3;function Mtt(t,e,n){e=Dtt(e,t);for(var r=-1,s=e.length,i=!1;++r<s;){var o=jtt(e[r]);if(!(i=t!=null&&n(t,o)))break;t=t[o]}return i||++r!=s?i:(s=t==null?0:t.length,!!s&&Ltt(s)&&Utt(o,s)&&(Ptt(t)||Rtt(t)))}var Qtt=Mtt,Htt=Ott,ztt=Qtt;function Vtt(t,e){return t!=null&&ztt(t,e,Htt)}var Wtt=Vtt,Gtt=iP,Ktt=Mte,Xtt=Wtt,qtt=UR,Ytt=Fne,Jtt=$ne,Ztt=p3,ent=1,tnt=2;function nnt(t,e){return qtt(t)&&Ytt(e)?Jtt(Ztt(t),e):function(n){var r=Ktt(n,t);return r===void 0&&r===e?Xtt(n,t):Gtt(e,r,ent|tnt)}}var rnt=nnt;function snt(t){return t}var wm=snt;function int(t){return function(e){return e==null?void 0:e[t]}}var ont=int,ant=VR;function lnt(t){return function(e){return ant(e,t)}}var cnt=lnt,unt=ont,Ant=cnt,dnt=UR,fnt=p3;function hnt(t){return dnt(t)?unt(fnt(t)):Ant(t)}var pnt=hnt,mnt=$tt,gnt=rnt,ynt=wm,xnt=ji,vnt=pnt;function bnt(t){return typeof t=="function"?t:t==null?ynt:typeof t=="object"?xnt(t)?gnt(t[0],t[1]):mnt(t):vnt(t)}var Cl=bnt;function wnt(t,e,n,r){for(var s=t.length,i=n+(r?1:-1);r?i--:++i<s;)if(e(t[i],i,t))return i;return-1}var _ne=wnt;function Cnt(t){return t!==t}var Snt=Cnt;function Bnt(t,e,n){for(var r=n-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}var Nnt=Bnt,Ent=_ne,Int=Snt,knt=Nnt;function Tnt(t,e,n){return e===e?knt(t,e,n):Ent(t,Int,n)}var Fnt=Tnt,$nt=Fnt;function _nt(t,e){var n=t==null?0:t.length;return!!n&&$nt(t,e,0)>-1}var Ont=_nt;function Dnt(t,e,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(n(e,t[r]))return!0;return!1}var Rnt=Dnt;function Pnt(){}var Unt=Pnt,uE=Ine,Lnt=Unt,jnt=tP,Mnt=1/0,Qnt=uE&&1/jnt(new uE([,-0]))[1]==Mnt?function(t){return new uE(t)}:Lnt,Hnt=Qnt,znt=yne,Vnt=Ont,Wnt=Rnt,Gnt=vne,Knt=Hnt,Xnt=tP,qnt=200;function Ynt(t,e,n){var r=-1,s=Vnt,i=t.length,o=!0,a=[],l=a;if(n)o=!1,s=Wnt;else if(i>=qnt){var c=e?null:Knt(t);if(c)return Xnt(c);o=!1,s=Gnt,l=new znt}else l=e?[]:a;e:for(;++r<i;){var u=t[r],A=e?e(u):u;if(u=n||u!==0?u:0,o&&A===A){for(var d=l.length;d--;)if(l[d]===A)continue e;e&&l.push(A),a.push(u)}else s(l,A,n)||(l!==a&&l.push(A),a.push(u))}return a}var Jnt=Ynt,Znt=Cl,ert=Jnt;function trt(t,e){return t&&t.length?ert(t,Znt(e)):[]}var nrt=trt;const QQ=Gt(nrt);function One(t,e,n){return e===!0?QQ(t,n):xt(e)?QQ(t,e):t}function yp(t){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yp(t)}var rrt=["ref"];function HQ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $l(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HQ(Object(n),!0).forEach(function(r){$3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HQ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function srt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zQ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Rne(r.key),r)}}function irt(t,e,n){return e&&zQ(t.prototype,e),n&&zQ(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ort(t,e,n){return e=Q2(e),art(t,Dne()?Reflect.construct(e,n||[],Q2(t).constructor):e.apply(t,n))}function art(t,e){if(e&&(yp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lrt(t)}function lrt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dne=function(){return!!t})()}function Q2(t){return Q2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Q2(t)}function crt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UT(t,e)}function UT(t,e){return UT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},UT(t,e)}function $3(t,e,n){return e=Rne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rne(t){var e=urt(t,"string");return yp(e)=="symbol"?e:e+""}function urt(t,e){if(yp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Art(t,e){if(t==null)return{};var n=drt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function drt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function frt(t){return t.value}function hrt(t,e){if(ie.isValidElement(t))return ie.cloneElement(t,e);if(typeof t=="function")return ie.createElement(t,e);e.ref;var n=Art(e,rrt);return ie.createElement(eP,n)}var VQ=1,da=function(t){function e(){var n;srt(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=ort(this,e,[].concat(s)),$3(n,"lastBoundingBox",{width:-1,height:-1}),n}return crt(e,t),irt(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>VQ||Math.abs(s.height-this.lastBoundingBox.height)>VQ)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,r&&r(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?$l({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var s=this.props,i=s.layout,o=s.align,a=s.verticalAlign,l=s.margin,c=s.chartWidth,u=s.chartHeight,A,d;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&i==="vertical"){var f=this.getBBoxSnapshot();A={left:((c||0)-f.width)/2}}else A=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var h=this.getBBoxSnapshot();d={top:((u||0)-h.height)/2}}else d=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return $l($l({},A),d)}},{key:"render",value:function(){var r=this,s=this.props,i=s.content,o=s.width,a=s.height,l=s.wrapperStyle,c=s.payloadUniqBy,u=s.payload,A=$l($l({position:"absolute",width:o||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return ie.createElement("div",{className:"recharts-legend-wrapper",style:A,ref:function(f){r.wrapperNode=f}},hrt(i,$l($l({},this.props),{},{payload:One(u,c,frt)})))}}],[{key:"getWithHeight",value:function(r,s){var i=$l($l({},this.defaultProps),r.props),o=i.layout;return o==="vertical"&&Ue(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||s}:null}}])}(z.PureComponent);$3(da,"displayName","Legend");$3(da,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var WQ=kv,prt=nP,mrt=ji,GQ=WQ?WQ.isConcatSpreadable:void 0;function grt(t){return mrt(t)||prt(t)||!!(GQ&&t&&t[GQ])}var yrt=grt,xrt=wne,vrt=yrt;function Pne(t,e,n,r,s){var i=-1,o=t.length;for(n||(n=vrt),s||(s=[]);++i<o;){var a=t[i];e>0&&n(a)?e>1?Pne(a,e-1,n,r,s):xrt(s,a):r||(s[s.length]=a)}return s}var Une=Pne;function brt(t){return function(e,n,r){for(var s=-1,i=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++s];if(n(i[l],l,i)===!1)break}return e}}var wrt=brt,Crt=wrt,Srt=Crt(),Brt=Srt,Nrt=Brt,Ert=F3;function Irt(t,e){return t&&Nrt(t,e,Ert)}var Lne=Irt,krt=Fv;function Trt(t,e){return function(n,r){if(n==null)return n;if(!krt(n))return t(n,r);for(var s=n.length,i=e?s:-1,o=Object(n);(e?i--:++i<s)&&r(o[i],i,o)!==!1;);return n}}var Frt=Trt,$rt=Lne,_rt=Frt,Ort=_rt($rt),oP=Ort,Drt=oP,Rrt=Fv;function Prt(t,e){var n=-1,r=Rrt(t)?Array(t.length):[];return Drt(t,function(s,i,o){r[++n]=e(s,i,o)}),r}var jne=Prt;function Urt(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var Lrt=Urt,KQ=pm;function jrt(t,e){if(t!==e){var n=t!==void 0,r=t===null,s=t===t,i=KQ(t),o=e!==void 0,a=e===null,l=e===e,c=KQ(e);if(!a&&!c&&!i&&t>e||i&&o&&l&&!a&&!c||r&&o&&l||!n&&l||!s)return 1;if(!r&&!i&&!c&&t<e||c&&n&&s&&!r&&!i||a&&n&&s||!o&&s||!l)return-1}return 0}var Mrt=jrt,Qrt=Mrt;function Hrt(t,e,n){for(var r=-1,s=t.criteria,i=e.criteria,o=s.length,a=n.length;++r<o;){var l=Qrt(s[r],i[r]);if(l){if(r>=a)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var zrt=Hrt,AE=zR,Vrt=VR,Wrt=Cl,Grt=jne,Krt=Lrt,Xrt=Bne,qrt=zrt,Yrt=wm,Jrt=ji;function Zrt(t,e,n){e.length?e=AE(e,function(i){return Jrt(i)?function(o){return Vrt(o,i.length===1?i[0]:i)}:i}):e=[Yrt];var r=-1;e=AE(e,Xrt(Wrt));var s=Grt(t,function(i,o,a){var l=AE(e,function(c){return c(i)});return{criteria:l,index:++r,value:i}});return Krt(s,function(i,o){return qrt(i,o,n)})}var est=Zrt;function tst(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var nst=tst,rst=nst,XQ=Math.max;function sst(t,e,n){return e=XQ(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,i=XQ(r.length-e,0),o=Array(i);++s<i;)o[s]=r[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=r[s];return a[e]=n(o),rst(t,this,a)}}var ist=sst;function ost(t){return function(){return t}}var ast=ost,lst=xf,cst=function(){try{var t=lst(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Mne=cst,ust=ast,qQ=Mne,Ast=wm,dst=qQ?function(t,e){return qQ(t,"toString",{configurable:!0,enumerable:!1,value:ust(e),writable:!0})}:Ast,fst=dst,hst=800,pst=16,mst=Date.now;function gst(t){var e=0,n=0;return function(){var r=mst(),s=pst-(r-n);if(n=r,s>0){if(++e>=hst)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var yst=gst,xst=fst,vst=yst,bst=vst(xst),wst=bst,Cst=wm,Sst=ist,Bst=wst;function Nst(t,e){return Bst(Sst(t,e,Cst),t+"")}var Est=Nst,Ist=jR,kst=Fv,Tst=rP,Fst=gA;function $st(t,e,n){if(!Fst(n))return!1;var r=typeof e;return(r=="number"?kst(n)&&Tst(e,n.length):r=="string"&&e in n)?Ist(n[e],t):!1}var _3=$st,_st=Une,Ost=est,Dst=Est,YQ=_3,Rst=Dst(function(t,e){if(t==null)return[];var n=e.length;return n>1&&YQ(t,e[0],e[1])?e=[]:n>2&&YQ(e[0],e[1],e[2])&&(e=[e[0]]),Ost(t,_st(e,1),[])}),Pst=Rst;const aP=Gt(Pst);function A0(t){"@babel/helpers - typeof";return A0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A0(t)}function LT(){return LT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LT.apply(this,arguments)}function Ust(t,e){return Qst(t)||Mst(t,e)||jst(t,e)||Lst()}function Lst(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jst(t,e){if(t){if(typeof t=="string")return JQ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JQ(t,e)}}function JQ(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mst(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function Qst(t){if(Array.isArray(t))return t}function ZQ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function dE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZQ(Object(n),!0).forEach(function(r){Hst(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZQ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hst(t,e,n){return e=zst(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zst(t){var e=Vst(t,"string");return A0(e)=="symbol"?e:e+""}function Vst(t,e){if(A0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(A0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wst(t){return Array.isArray(t)&&Hr(t[0])&&Hr(t[1])?t.join(" ~ "):t}var Gst=function(e){var n=e.separator,r=n===void 0?" : ":n,s=e.contentStyle,i=s===void 0?{}:s,o=e.itemStyle,a=o===void 0?{}:o,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,A=e.formatter,d=e.itemSorter,f=e.wrapperClassName,h=e.labelClassName,p=e.label,m=e.labelFormatter,y=e.accessibilityLayer,x=y===void 0?!1:y,v=function(){if(u&&u.length){var U={padding:0,margin:0},P=(d?aP(u,d):u).map(function(V,W){if(V.type==="none")return null;var j=dE({display:"block",paddingTop:4,paddingBottom:4,color:V.color||"#000"},a),G=V.formatter||A||Wst,D=V.value,M=V.name,q=D,Z=M;if(G&&q!=null&&Z!=null){var te=G(D,M,V,W,u);if(Array.isArray(te)){var ue=Ust(te,2);q=ue[0],Z=ue[1]}else q=te}return ie.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:j},Hr(Z)?ie.createElement("span",{className:"recharts-tooltip-item-name"},Z):null,Hr(Z)?ie.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,ie.createElement("span",{className:"recharts-tooltip-item-value"},q),ie.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return ie.createElement("ul",{className:"recharts-tooltip-item-list",style:U},P)}return null},b=dE({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=dE({margin:0},c),C=!Ht(p),B=C?p:"",S=It("recharts-default-tooltip",f),N=It("recharts-tooltip-label",h);C&&m&&u!==void 0&&u!==null&&(B=m(p,u));var k=x?{role:"status","aria-live":"assertive"}:{};return ie.createElement("div",LT({className:S,style:b},k),ie.createElement("p",{className:N,style:w},ie.isValidElement(B)?B:"".concat(B)),v())};function d0(t){"@babel/helpers - typeof";return d0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d0(t)}function bb(t,e,n){return e=Kst(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kst(t){var e=Xst(t,"string");return d0(e)=="symbol"?e:e+""}function Xst(t,e){if(d0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(d0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ug="recharts-tooltip-wrapper",qst={visibility:"hidden"};function Yst(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return It(ug,bb(bb(bb(bb({},"".concat(ug,"-right"),Ue(n)&&e&&Ue(e.x)&&n>=e.x),"".concat(ug,"-left"),Ue(n)&&e&&Ue(e.x)&&n<e.x),"".concat(ug,"-bottom"),Ue(r)&&e&&Ue(e.y)&&r>=e.y),"".concat(ug,"-top"),Ue(r)&&e&&Ue(e.y)&&r<e.y))}function e8(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,s=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(i&&Ue(i[r]))return i[r];var u=n[r]-a-s,A=n[r]+s;if(e[r])return o[r]?u:A;if(o[r]){var d=u,f=l[r];return d<f?Math.max(A,l[r]):Math.max(u,l[r])}var h=A+a,p=l[r]+c;return h>p?Math.max(u,l[r]):Math.max(A,l[r])}function Jst(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Zst(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,s=t.position,i=t.reverseDirection,o=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,c,u,A;return o.height>0&&o.width>0&&n?(u=e8({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),A=e8({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=Jst({translateX:u,translateY:A,useTranslate3d:a})):c=qst,{cssProperties:c,cssClasses:Yst({translateX:u,translateY:A,coordinate:n})}}function xp(t){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xp(t)}function t8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function n8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t8(Object(n),!0).forEach(function(r){MT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eit(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tit(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hne(r.key),r)}}function nit(t,e,n){return e&&tit(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rit(t,e,n){return e=H2(e),sit(t,Qne()?Reflect.construct(e,n||[],H2(t).constructor):e.apply(t,n))}function sit(t,e){if(e&&(xp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iit(t)}function iit(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qne=function(){return!!t})()}function H2(t){return H2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},H2(t)}function oit(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jT(t,e)}function jT(t,e){return jT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},jT(t,e)}function MT(t,e,n){return e=Hne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hne(t){var e=ait(t,"string");return xp(e)=="symbol"?e:e+""}function ait(t,e){if(xp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var r8=1,lit=function(t){function e(){var n;eit(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=rit(this,e,[].concat(s)),MT(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),MT(n,"handleKeyDown",function(o){if(o.key==="Escape"){var a,l,c,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(c=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),n}return oit(e,t),nit(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>r8||Math.abs(r.height-this.state.lastBoundingBox.height)>r8)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,a=s.animationDuration,l=s.animationEasing,c=s.children,u=s.coordinate,A=s.hasPayload,d=s.isAnimationActive,f=s.offset,h=s.position,p=s.reverseDirection,m=s.useTranslate3d,y=s.viewBox,x=s.wrapperStyle,v=Zst({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:f,position:h,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:y}),b=v.cssClasses,w=v.cssProperties,C=n8(n8({transition:d&&i?"transform ".concat(a,"ms ").concat(l):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&A?"visible":"hidden",position:"absolute",top:0,left:0},x);return ie.createElement("div",{tabIndex:-1,className:b,style:C,ref:function(S){r.wrapperNode=S}},c)}}])}(z.PureComponent),cit=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Cm={isSsr:cit()};function vp(t){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(t)}function s8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function i8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s8(Object(n),!0).forEach(function(r){lP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uit(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ait(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vne(r.key),r)}}function dit(t,e,n){return e&&Ait(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fit(t,e,n){return e=z2(e),hit(t,zne()?Reflect.construct(e,n||[],z2(t).constructor):e.apply(t,n))}function hit(t,e){if(e&&(vp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pit(t)}function pit(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zne=function(){return!!t})()}function z2(t){return z2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},z2(t)}function mit(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QT(t,e)}function QT(t,e){return QT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},QT(t,e)}function lP(t,e,n){return e=Vne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vne(t){var e=git(t,"string");return vp(e)=="symbol"?e:e+""}function git(t,e){if(vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function yit(t){return t.dataKey}function xit(t,e){return ie.isValidElement(t)?ie.cloneElement(t,e):typeof t=="function"?ie.createElement(t,e):ie.createElement(Gst,e)}var gi=function(t){function e(){return uit(this,e),fit(this,e,arguments)}return mit(e,t),dit(e,[{key:"render",value:function(){var r=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,a=s.animationDuration,l=s.animationEasing,c=s.content,u=s.coordinate,A=s.filterNull,d=s.isAnimationActive,f=s.offset,h=s.payload,p=s.payloadUniqBy,m=s.position,y=s.reverseDirection,x=s.useTranslate3d,v=s.viewBox,b=s.wrapperStyle,w=h??[];A&&w.length&&(w=One(h.filter(function(B){return B.value!=null&&(B.hide!==!0||r.props.includeHidden)}),p,yit));var C=w.length>0;return ie.createElement(lit,{allowEscapeViewBox:o,animationDuration:a,animationEasing:l,isAnimationActive:d,active:i,coordinate:u,hasPayload:C,offset:f,position:m,reverseDirection:y,useTranslate3d:x,viewBox:v,wrapperStyle:b},xit(c,i8(i8({},this.props),{},{payload:w})))}}])}(z.PureComponent);lP(gi,"displayName","Tooltip");lP(gi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Cm.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var vit=wl,bit=function(){return vit.Date.now()},wit=bit,Cit=/\s/;function Sit(t){for(var e=t.length;e--&&Cit.test(t.charAt(e)););return e}var Bit=Sit,Nit=Bit,Eit=/^\s+/;function Iit(t){return t&&t.slice(0,Nit(t)+1).replace(Eit,"")}var kit=Iit,Tit=kit,o8=gA,Fit=pm,a8=NaN,$it=/^[-+]0x[0-9a-f]+$/i,_it=/^0b[01]+$/i,Oit=/^0o[0-7]+$/i,Dit=parseInt;function Rit(t){if(typeof t=="number")return t;if(Fit(t))return a8;if(o8(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=o8(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Tit(t);var n=_it.test(t);return n||Oit.test(t)?Dit(t.slice(2),n?2:8):$it.test(t)?a8:+t}var Wne=Rit,Pit=gA,fE=wit,l8=Wne,Uit="Expected a function",Lit=Math.max,jit=Math.min;function Mit(t,e,n){var r,s,i,o,a,l,c=0,u=!1,A=!1,d=!0;if(typeof t!="function")throw new TypeError(Uit);e=l8(e)||0,Pit(n)&&(u=!!n.leading,A="maxWait"in n,i=A?Lit(l8(n.maxWait)||0,e):i,d="trailing"in n?!!n.trailing:d);function f(C){var B=r,S=s;return r=s=void 0,c=C,o=t.apply(S,B),o}function h(C){return c=C,a=setTimeout(y,e),u?f(C):o}function p(C){var B=C-l,S=C-c,N=e-B;return A?jit(N,i-S):N}function m(C){var B=C-l,S=C-c;return l===void 0||B>=e||B<0||A&&S>=i}function y(){var C=fE();if(m(C))return x(C);a=setTimeout(y,p(C))}function x(C){return a=void 0,d&&r?f(C):(r=s=void 0,o)}function v(){a!==void 0&&clearTimeout(a),c=0,r=l=s=a=void 0}function b(){return a===void 0?o:x(fE())}function w(){var C=fE(),B=m(C);if(r=arguments,s=this,l=C,B){if(a===void 0)return h(l);if(A)return clearTimeout(a),a=setTimeout(y,e),f(l)}return a===void 0&&(a=setTimeout(y,e)),o}return w.cancel=v,w.flush=b,w}var Qit=Mit,Hit=Qit,zit=gA,Vit="Expected a function";function Wit(t,e,n){var r=!0,s=!0;if(typeof t!="function")throw new TypeError(Vit);return zit(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),Hit(t,e,{leading:r,maxWait:e,trailing:s})}var Git=Wit;const Gne=Gt(Git);function f0(t){"@babel/helpers - typeof";return f0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f0(t)}function c8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function wb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c8(Object(n),!0).forEach(function(r){Kit(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kit(t,e,n){return e=Xit(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xit(t){var e=qit(t,"string");return f0(e)=="symbol"?e:e+""}function qit(t,e){if(f0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(f0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yit(t,e){return tot(t)||eot(t,e)||Zit(t,e)||Jit()}function Jit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zit(t,e){if(t){if(typeof t=="string")return u8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u8(t,e)}}function u8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function eot(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function tot(t){if(Array.isArray(t))return t}var Ag=z.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,s=r===void 0?{width:-1,height:-1}:r,i=t.width,o=i===void 0?"100%":i,a=t.height,l=a===void 0?"100%":a,c=t.minWidth,u=c===void 0?0:c,A=t.minHeight,d=t.maxHeight,f=t.children,h=t.debounce,p=h===void 0?0:h,m=t.id,y=t.className,x=t.onResize,v=t.style,b=v===void 0?{}:v,w=z.useRef(null),C=z.useRef();C.current=x,z.useImperativeHandle(e,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var B=z.useState({containerWidth:s.width,containerHeight:s.height}),S=Yit(B,2),N=S[0],k=S[1],O=z.useCallback(function(P,V){k(function(W){var j=Math.round(P),G=Math.round(V);return W.containerWidth===j&&W.containerHeight===G?W:{containerWidth:j,containerHeight:G}})},[]);z.useEffect(function(){var P=function(M){var q,Z=M[0].contentRect,te=Z.width,ue=Z.height;O(te,ue),(q=C.current)===null||q===void 0||q.call(C,te,ue)};p>0&&(P=Gne(P,p,{trailing:!0,leading:!1}));var V=new ResizeObserver(P),W=w.current.getBoundingClientRect(),j=W.width,G=W.height;return O(j,G),V.observe(w.current),function(){V.disconnect()}},[O,p]);var U=z.useMemo(function(){var P=N.containerWidth,V=N.containerHeight;if(P<0||V<0)return null;oc(od(o)||od(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),oc(!n||n>0,"The aspect(%s) must be greater than zero.",n);var W=od(o)?P:o,j=od(l)?V:l;n&&n>0&&(W?j=W/n:j&&(W=j*n),d&&j>d&&(j=d)),oc(W>0||j>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,j,o,l,u,A,n);var G=!Array.isArray(f)&&ic(f.type).endsWith("Chart");return ie.Children.map(f,function(D){return ie.isValidElement(D)?z.cloneElement(D,wb({width:W,height:j},G?{style:wb({height:"100%",width:"100%",maxHeight:j,maxWidth:W},D.props.style)}:{})):D})},[n,f,l,d,A,u,N,o]);return ie.createElement("div",{id:m?"".concat(m):void 0,className:It("recharts-responsive-container",y),style:wb(wb({},b),{},{width:o,height:l,minWidth:u,minHeight:A,maxHeight:d}),ref:w},U)}),Kne=function(e){return null};Kne.displayName="Cell";function h0(t){"@babel/helpers - typeof";return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h0(t)}function A8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function HT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A8(Object(n),!0).forEach(function(r){not(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function not(t,e,n){return e=rot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rot(t){var e=sot(t,"string");return h0(e)=="symbol"?e:e+""}function sot(t,e){if(h0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(h0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qf={widthCache:{},cacheCount:0},iot=2e3,oot={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},d8="recharts_measurement_span";function aot(t){var e=HT({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var uy=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Cm.isSsr)return{width:0,height:0};var r=aot(n),s=JSON.stringify({text:e,copyStyle:r});if(Qf.widthCache[s])return Qf.widthCache[s];try{var i=document.getElementById(d8);i||(i=document.createElement("span"),i.setAttribute("id",d8),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=HT(HT({},oot),r);Object.assign(i.style,o),i.textContent="".concat(e);var a=i.getBoundingClientRect(),l={width:a.width,height:a.height};return Qf.widthCache[s]=l,++Qf.cacheCount>iot&&(Qf.cacheCount=0,Qf.widthCache={}),l}catch{return{width:0,height:0}}},lot=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function p0(t){"@babel/helpers - typeof";return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p0(t)}function V2(t,e){return dot(t)||Aot(t,e)||uot(t,e)||cot()}function cot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uot(t,e){if(t){if(typeof t=="string")return f8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f8(t,e)}}function f8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Aot(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function dot(t){if(Array.isArray(t))return t}function fot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pot(r.key),r)}}function hot(t,e,n){return e&&h8(t.prototype,e),n&&h8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pot(t){var e=mot(t,"string");return p0(e)=="symbol"?e:e+""}function mot(t,e){if(p0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(p0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var p8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,m8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,got=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,yot=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Xne={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},xot=Object.keys(Xne),dh="NaN";function vot(t,e){return t*Xne[e]}var Cb=function(){function t(e,n){fot(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!got.test(n)&&(this.num=NaN,this.unit=""),xot.includes(n)&&(this.num=vot(e,n),this.unit="px")}return hot(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,s=(r=yot.exec(n))!==null&&r!==void 0?r:[],i=V2(s,3),o=i[1],a=i[2];return new t(parseFloat(o),a??"")}}])}();function qne(t){if(t.includes(dh))return dh;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=p8.exec(e))!==null&&n!==void 0?n:[],s=V2(r,4),i=s[1],o=s[2],a=s[3],l=Cb.parse(i??""),c=Cb.parse(a??""),u=o==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return dh;e=e.replace(p8,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var A,d=(A=m8.exec(e))!==null&&A!==void 0?A:[],f=V2(d,4),h=f[1],p=f[2],m=f[3],y=Cb.parse(h??""),x=Cb.parse(m??""),v=p==="+"?y.add(x):y.subtract(x);if(v.isNaN())return dh;e=e.replace(m8,v.toString())}return e}var g8=/\(([^()]*)\)/;function bot(t){for(var e=t;e.includes("(");){var n=g8.exec(e),r=V2(n,2),s=r[1];e=e.replace(g8,qne(s))}return e}function wot(t){var e=t.replace(/\s+/g,"");return e=bot(e),e=qne(e),e}function Cot(t){try{return wot(t)}catch{return dh}}function hE(t){var e=Cot(t.slice(5,-1));return e===dh?"":e}var Sot=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Bot=["dx","dy","angle","className","breakAll"];function zT(){return zT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zT.apply(this,arguments)}function y8(t,e){if(t==null)return{};var n=Not(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Not(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function x8(t,e){return Tot(t)||kot(t,e)||Iot(t,e)||Eot()}function Eot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Iot(t,e){if(t){if(typeof t=="string")return v8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v8(t,e)}}function v8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kot(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function Tot(t){if(Array.isArray(t))return t}var Yne=/[ \f\n\r\t\v\u2028\u2029]+/,Jne=function(e){var n=e.children,r=e.breakAll,s=e.style;try{var i=[];Ht(n)||(r?i=n.toString().split(""):i=n.toString().split(Yne));var o=i.map(function(l){return{word:l,width:uy(l,s).width}}),a=r?0:uy(" ",s).width;return{wordsWithComputedWidth:o,spaceWidth:a}}catch{return null}},Fot=function(e,n,r,s,i){var o=e.maxLines,a=e.children,l=e.style,c=e.breakAll,u=Ue(o),A=a,d=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(j,G){var D=G.word,M=G.width,q=j[j.length-1];if(q&&(s==null||i||q.width+M+r<Number(s)))q.words.push(D),q.width+=M+r;else{var Z={words:[D],width:M};j.push(Z)}return j},[])},f=d(n),h=function(W){return W.reduce(function(j,G){return j.width>G.width?j:G})};if(!u)return f;for(var p="…",m=function(W){var j=A.slice(0,W),G=Jne({breakAll:c,style:l,children:j+p}).wordsWithComputedWidth,D=d(G),M=D.length>o||h(D).width>Number(s);return[M,D]},y=0,x=A.length-1,v=0,b;y<=x&&v<=A.length-1;){var w=Math.floor((y+x)/2),C=w-1,B=m(C),S=x8(B,2),N=S[0],k=S[1],O=m(w),U=x8(O,1),P=U[0];if(!N&&!P&&(y=w+1),N&&P&&(x=w-1),!N&&P){b=k;break}v++}return b||f},b8=function(e){var n=Ht(e)?[]:e.toString().split(Yne);return[{words:n}]},$ot=function(e){var n=e.width,r=e.scaleToFit,s=e.children,i=e.style,o=e.breakAll,a=e.maxLines;if((n||r)&&!Cm.isSsr){var l,c,u=Jne({breakAll:o,children:s,style:i});if(u){var A=u.wordsWithComputedWidth,d=u.spaceWidth;l=A,c=d}else return b8(s);return Fot({breakAll:o,children:s,maxLines:a,style:i},l,c,n,r)}return b8(s)},w8="#808080",bp=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,i=s===void 0?0:s,o=e.lineHeight,a=o===void 0?"1em":o,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,A=u===void 0?!1:u,d=e.textAnchor,f=d===void 0?"start":d,h=e.verticalAnchor,p=h===void 0?"end":h,m=e.fill,y=m===void 0?w8:m,x=y8(e,Sot),v=z.useMemo(function(){return $ot({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:A,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,A,x.style,x.width]),b=x.dx,w=x.dy,C=x.angle,B=x.className,S=x.breakAll,N=y8(x,Bot);if(!Hr(r)||!Hr(i))return null;var k=r+(Ue(b)?b:0),O=i+(Ue(w)?w:0),U;switch(p){case"start":U=hE("calc(".concat(c,")"));break;case"middle":U=hE("calc(".concat((v.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:U=hE("calc(".concat(v.length-1," * -").concat(a,")"));break}var P=[];if(A){var V=v[0].width,W=x.width;P.push("scale(".concat((Ue(W)?W/V:1)/V,")"))}return C&&P.push("rotate(".concat(C,", ").concat(k,", ").concat(O,")")),P.length&&(N.transform=P.join(" ")),ie.createElement("text",zT({},ut(N,!0),{x:k,y:O,className:It("recharts-text",B),textAnchor:f,fill:y.includes("url")?w8:y}),v.map(function(j,G){var D=j.words.join(S?"":" ");return ie.createElement("tspan",{x:k,dy:G===0?U:a,key:"".concat(D,"-").concat(G)},D)}))};function Ru(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _ot(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cP(t){let e,n,r;t.length!==2?(e=Ru,n=(a,l)=>Ru(t(a),l),r=(a,l)=>t(a)-l):(e=t===Ru||t===_ot?t:Oot,n=t,r=t);function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const A=c+u>>>1;n(a[A],l)<0?c=A+1:u=A}while(c<u)}return c}function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const A=c+u>>>1;n(a[A],l)<=0?c=A+1:u=A}while(c<u)}return c}function o(a,l,c=0,u=a.length){const A=s(a,l,c,u-1);return A>c&&r(a[A-1],l)>-r(a[A],l)?A-1:A}return{left:s,center:o,right:i}}function Oot(){return 0}function Zne(t){return t===null?NaN:+t}function*Dot(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Rot=cP(Ru),$v=Rot.right;cP(Zne).center;class C8 extends Map{constructor(e,n=Lot){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(S8(this,e))}has(e){return super.has(S8(this,e))}set(e,n){return super.set(Pot(this,e),n)}delete(e){return super.delete(Uot(this,e))}}function S8({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Pot({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Uot({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Lot(t){return t!==null&&typeof t=="object"?t.valueOf():t}function jot(t=Ru){if(t===Ru)return ere;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function ere(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Mot=Math.sqrt(50),Qot=Math.sqrt(10),Hot=Math.sqrt(2);function W2(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),o=i>=Mot?10:i>=Qot?5:i>=Hot?2:1;let a,l,c;return s<0?(c=Math.pow(10,-s)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,s)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?W2(t,e,n*2):[a,l,c]}function VT(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,i,o]=r?W2(e,t,n):W2(t,e,n);if(!(i>=s))return[];const a=i-s+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(s+c)/-o;else for(let c=0;c<a;++c)l[c]=(s+c)*o;return l}function WT(t,e,n){return e=+e,t=+t,n=+n,W2(t,e,n)[2]}function GT(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?WT(e,t,n):WT(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function B8(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function N8(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function tre(t,e,n=0,r=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(s=s===void 0?ere:jot(s);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),A=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*A*(l-A)/l)*(c-l/2<0?-1:1),f=Math.max(n,Math.floor(e-c*A/l+d)),h=Math.min(r,Math.floor(e+(l-c)*A/l+d));tre(t,e,f,h,s)}const i=t[e];let o=n,a=r;for(dg(t,n,e),s(t[r],i)>0&&dg(t,n,r);o<a;){for(dg(t,o,a),++o,--a;s(t[o],i)<0;)++o;for(;s(t[a],i)>0;)--a}s(t[n],i)===0?dg(t,n,a):(++a,dg(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function dg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function zot(t,e,n){if(t=Float64Array.from(Dot(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return N8(t);if(e>=1)return B8(t);var r,s=(r-1)*e,i=Math.floor(s),o=B8(tre(t,i).subarray(0,i+1)),a=N8(t.subarray(i+1));return o+(a-o)*(s-i)}}function Vot(t,e,n=Zne){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,s=(r-1)*e,i=Math.floor(s),o=+n(t[i],i,t),a=+n(t[i+1],i+1,t);return o+(a-o)*(s-i)}}function Wot(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(s);++r<s;)i[r]=t+r*n;return i}function Yo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Oc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const KT=Symbol("implicit");function uP(){var t=new C8,e=[],n=[],r=KT;function s(i){let o=t.get(i);if(o===void 0){if(r!==KT)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return s.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new C8;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return uP(e,n).unknown(r)},Yo.apply(s,arguments),s}function m0(){var t=uP().unknown(void 0),e=t.domain,n=t.range,r=0,s=1,i,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function A(){var d=e().length,f=s<r,h=f?s:r,p=f?r:s;i=(p-h)/Math.max(1,d-l+c*2),a&&(i=Math.floor(i)),h+=(p-h-i*(d-l))*u,o=i*(1-l),a&&(h=Math.round(h),o=Math.round(o));var m=Wot(d).map(function(y){return h+i*y});return n(f?m.reverse():m)}return t.domain=function(d){return arguments.length?(e(d),A()):e()},t.range=function(d){return arguments.length?([r,s]=d,r=+r,s=+s,A()):[r,s]},t.rangeRound=function(d){return[r,s]=d,r=+r,s=+s,a=!0,A()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(d){return arguments.length?(a=!!d,A()):a},t.padding=function(d){return arguments.length?(l=Math.min(1,c=+d),A()):l},t.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),A()):l},t.paddingOuter=function(d){return arguments.length?(c=+d,A()):c},t.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),A()):u},t.copy=function(){return m0(e(),[r,s]).round(a).paddingInner(l).paddingOuter(c).align(u)},Yo.apply(A(),arguments)}function nre(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return nre(e())},t}function Ay(){return nre(m0.apply(null,arguments).paddingInner(1))}function AP(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function rre(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function _v(){}var g0=.7,G2=1/g0,Oh="\\s*([+-]?\\d+)\\s*",y0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Got=/^#([0-9a-f]{3,8})$/,Kot=new RegExp(`^rgb\\(${Oh},${Oh},${Oh}\\)$`),Xot=new RegExp(`^rgb\\(${dl},${dl},${dl}\\)$`),qot=new RegExp(`^rgba\\(${Oh},${Oh},${Oh},${y0}\\)$`),Yot=new RegExp(`^rgba\\(${dl},${dl},${dl},${y0}\\)$`),Jot=new RegExp(`^hsl\\(${y0},${dl},${dl}\\)$`),Zot=new RegExp(`^hsla\\(${y0},${dl},${dl},${y0}\\)$`),E8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};AP(_v,x0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:I8,formatHex:I8,formatHex8:eat,formatHsl:tat,formatRgb:k8,toString:k8});function I8(){return this.rgb().formatHex()}function eat(){return this.rgb().formatHex8()}function tat(){return sre(this).formatHsl()}function k8(){return this.rgb().formatRgb()}function x0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Got.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?T8(e):n===3?new Ni(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Sb(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Sb(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Kot.exec(t))?new Ni(e[1],e[2],e[3],1):(e=Xot.exec(t))?new Ni(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=qot.exec(t))?Sb(e[1],e[2],e[3],e[4]):(e=Yot.exec(t))?Sb(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Jot.exec(t))?_8(e[1],e[2]/100,e[3]/100,1):(e=Zot.exec(t))?_8(e[1],e[2]/100,e[3]/100,e[4]):E8.hasOwnProperty(t)?T8(E8[t]):t==="transparent"?new Ni(NaN,NaN,NaN,0):null}function T8(t){return new Ni(t>>16&255,t>>8&255,t&255,1)}function Sb(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ni(t,e,n,r)}function nat(t){return t instanceof _v||(t=x0(t)),t?(t=t.rgb(),new Ni(t.r,t.g,t.b,t.opacity)):new Ni}function XT(t,e,n,r){return arguments.length===1?nat(t):new Ni(t,e,n,r??1)}function Ni(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}AP(Ni,XT,rre(_v,{brighter(t){return t=t==null?G2:Math.pow(G2,t),new Ni(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?g0:Math.pow(g0,t),new Ni(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ni(Id(this.r),Id(this.g),Id(this.b),K2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:F8,formatHex:F8,formatHex8:rat,formatRgb:$8,toString:$8}));function F8(){return`#${ad(this.r)}${ad(this.g)}${ad(this.b)}`}function rat(){return`#${ad(this.r)}${ad(this.g)}${ad(this.b)}${ad((isNaN(this.opacity)?1:this.opacity)*255)}`}function $8(){const t=K2(this.opacity);return`${t===1?"rgb(":"rgba("}${Id(this.r)}, ${Id(this.g)}, ${Id(this.b)}${t===1?")":`, ${t})`}`}function K2(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Id(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ad(t){return t=Id(t),(t<16?"0":"")+t.toString(16)}function _8(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new fa(t,e,n,r)}function sre(t){if(t instanceof fa)return new fa(t.h,t.s,t.l,t.opacity);if(t instanceof _v||(t=x0(t)),!t)return new fa;if(t instanceof fa)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,a=i-s,l=(i+s)/2;return a?(e===i?o=(n-r)/a+(n<r)*6:n===i?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new fa(o,a,l,t.opacity)}function sat(t,e,n,r){return arguments.length===1?sre(t):new fa(t,e,n,r??1)}function fa(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}AP(fa,sat,rre(_v,{brighter(t){return t=t==null?G2:Math.pow(G2,t),new fa(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?g0:Math.pow(g0,t),new fa(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Ni(pE(t>=240?t-240:t+120,s,r),pE(t,s,r),pE(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new fa(O8(this.h),Bb(this.s),Bb(this.l),K2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=K2(this.opacity);return`${t===1?"hsl(":"hsla("}${O8(this.h)}, ${Bb(this.s)*100}%, ${Bb(this.l)*100}%${t===1?")":`, ${t})`}`}}));function O8(t){return t=(t||0)%360,t<0?t+360:t}function Bb(t){return Math.max(0,Math.min(1,t||0))}function pE(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const dP=t=>()=>t;function iat(t,e){return function(n){return t+n*e}}function oat(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function aat(t){return(t=+t)==1?ire:function(e,n){return n-e?oat(e,n,t):dP(isNaN(e)?n:e)}}function ire(t,e){var n=e-t;return n?iat(t,n):dP(isNaN(t)?e:t)}const D8=function t(e){var n=aat(e);function r(s,i){var o=n((s=XT(s)).r,(i=XT(i)).r),a=n(s.g,i.g),l=n(s.b,i.b),c=ire(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=a(u),s.b=l(u),s.opacity=c(u),s+""}}return r.gamma=t,r}(1);function lat(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=t[s]*(1-i)+e[s]*i;return r}}function cat(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function uat(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)s[o]=Sm(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(a){for(o=0;o<r;++o)i[o]=s[o](a);return i}}function Aat(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function X2(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function dat(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=Sm(t[s],e[s]):r[s]=e[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var qT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mE=new RegExp(qT.source,"g");function fat(t){return function(){return t}}function hat(t){return function(e){return t(e)+""}}function pat(t,e){var n=qT.lastIndex=mE.lastIndex=0,r,s,i,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=qT.exec(t))&&(s=mE.exec(e));)(i=s.index)>n&&(i=e.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(r=r[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:X2(r,s)})),n=mE.lastIndex;return n<e.length&&(i=e.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?hat(l[0].x):fat(e):(e=l.length,function(c){for(var u=0,A;u<e;++u)a[(A=l[u]).i]=A.x(c);return a.join("")})}function Sm(t,e){var n=typeof e,r;return e==null||n==="boolean"?dP(e):(n==="number"?X2:n==="string"?(r=x0(e))?(e=r,D8):pat:e instanceof x0?D8:e instanceof Date?Aat:cat(e)?lat:Array.isArray(e)?uat:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?dat:X2)(t,e)}function fP(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function mat(t,e){e===void 0&&(e=t,t=Sm);for(var n=0,r=e.length-1,s=e[0],i=new Array(r<0?0:r);n<r;)i[n]=t(s,s=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[a](o-a)}}function gat(t){return function(){return t}}function q2(t){return+t}var R8=[0,1];function ni(t){return t}function YT(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:gat(isNaN(e)?NaN:.5)}function yat(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function xat(t,e,n){var r=t[0],s=t[1],i=e[0],o=e[1];return s<r?(r=YT(s,r),i=n(o,i)):(r=YT(r,s),i=n(i,o)),function(a){return i(r(a))}}function vat(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),i=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)s[o]=YT(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(a){var l=$v(t,a,1,r)-1;return i[l](s[l](a))}}function Ov(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function O3(){var t=R8,e=R8,n=Sm,r,s,i,o=ni,a,l,c;function u(){var d=Math.min(t.length,e.length);return o!==ni&&(o=yat(t[0],t[d-1])),a=d>2?vat:xat,l=c=null,A}function A(d){return d==null||isNaN(d=+d)?i:(l||(l=a(t.map(r),e,n)))(r(o(d)))}return A.invert=function(d){return o(s((c||(c=a(e,t.map(r),X2)))(d)))},A.domain=function(d){return arguments.length?(t=Array.from(d,q2),u()):t.slice()},A.range=function(d){return arguments.length?(e=Array.from(d),u()):e.slice()},A.rangeRound=function(d){return e=Array.from(d),n=fP,u()},A.clamp=function(d){return arguments.length?(o=d?!0:ni,u()):o!==ni},A.interpolate=function(d){return arguments.length?(n=d,u()):n},A.unknown=function(d){return arguments.length?(i=d,A):i},function(d,f){return r=d,s=f,u()}}function hP(){return O3()(ni,ni)}function bat(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Y2(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function wp(t){return t=Y2(Math.abs(t)),t?t[1]:NaN}function wat(t,e){return function(n,r){for(var s=n.length,i=[],o=0,a=t[0],l=0;s>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),i.push(n.substring(s-=a,s+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return i.reverse().join(e)}}function Cat(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Sat=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function v0(t){if(!(e=Sat.exec(t)))throw new Error("invalid format: "+t);var e;return new pP({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}v0.prototype=pP.prototype;function pP(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}pP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Bat(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var ore;function Nat(t,e){var n=Y2(t,e);if(!n)return t+"";var r=n[0],s=n[1],i=s-(ore=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Y2(t,Math.max(0,e+i-1))[0]}function P8(t,e){var n=Y2(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const U8={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:bat,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>P8(t*100,e),r:P8,s:Nat,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function L8(t){return t}var j8=Array.prototype.map,M8=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Eat(t){var e=t.grouping===void 0||t.thousands===void 0?L8:wat(j8.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?L8:Cat(j8.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(A){A=v0(A);var d=A.fill,f=A.align,h=A.sign,p=A.symbol,m=A.zero,y=A.width,x=A.comma,v=A.precision,b=A.trim,w=A.type;w==="n"?(x=!0,w="g"):U8[w]||(v===void 0&&(v=12),b=!0,w="g"),(m||d==="0"&&f==="=")&&(m=!0,d="0",f="=");var C=p==="$"?n:p==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",B=p==="$"?r:/[%p]/.test(w)?o:"",S=U8[w],N=/[defgprs%]/.test(w);v=v===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function k(O){var U=C,P=B,V,W,j;if(w==="c")P=S(O)+P,O="";else{O=+O;var G=O<0||1/O<0;if(O=isNaN(O)?l:S(Math.abs(O),v),b&&(O=Bat(O)),G&&+O==0&&h!=="+"&&(G=!1),U=(G?h==="("?h:a:h==="-"||h==="("?"":h)+U,P=(w==="s"?M8[8+ore/3]:"")+P+(G&&h==="("?")":""),N){for(V=-1,W=O.length;++V<W;)if(j=O.charCodeAt(V),48>j||j>57){P=(j===46?s+O.slice(V+1):O.slice(V))+P,O=O.slice(0,V);break}}}x&&!m&&(O=e(O,1/0));var D=U.length+O.length+P.length,M=D<y?new Array(y-D+1).join(d):"";switch(x&&m&&(O=e(M+O,M.length?y-P.length:1/0),M=""),f){case"<":O=U+O+P+M;break;case"=":O=U+M+O+P;break;case"^":O=M.slice(0,D=M.length>>1)+U+O+P+M.slice(D);break;default:O=M+U+O+P;break}return i(O)}return k.toString=function(){return A+""},k}function u(A,d){var f=c((A=v0(A),A.type="f",A)),h=Math.max(-8,Math.min(8,Math.floor(wp(d)/3)))*3,p=Math.pow(10,-h),m=M8[8+h/3];return function(y){return f(p*y)+m}}return{format:c,formatPrefix:u}}var Nb,mP,are;Iat({thousands:",",grouping:[3],currency:["$",""]});function Iat(t){return Nb=Eat(t),mP=Nb.format,are=Nb.formatPrefix,Nb}function kat(t){return Math.max(0,-wp(Math.abs(t)))}function Tat(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(wp(e)/3)))*3-wp(Math.abs(t)))}function Fat(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,wp(e)-wp(t))+1}function lre(t,e,n,r){var s=GT(t,e,n),i;switch(r=v0(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=Tat(s,o))&&(r.precision=i),are(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=Fat(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=kat(s))&&(r.precision=i-(r.type==="%")*2);break}}return mP(r)}function yA(t){var e=t.domain;return t.ticks=function(n){var r=e();return VT(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return lre(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,i=r.length-1,o=r[s],a=r[i],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=s,s=i,i=c);u-- >0;){if(c=WT(o,a,n),c===l)return r[s]=o,r[i]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function J2(){var t=hP();return t.copy=function(){return Ov(t,J2())},Yo.apply(t,arguments),yA(t)}function cre(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,q2),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return cre(t).unknown(e)},t=arguments.length?Array.from(t,q2):[0,1],yA(n)}function ure(t,e){t=t.slice();var n=0,r=t.length-1,s=t[n],i=t[r],o;return i<s&&(o=n,n=r,r=o,o=s,s=i,i=o),t[n]=e.floor(s),t[r]=e.ceil(i),t}function Q8(t){return Math.log(t)}function H8(t){return Math.exp(t)}function $at(t){return-Math.log(-t)}function _at(t){return-Math.exp(-t)}function Oat(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Dat(t){return t===10?Oat:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Rat(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function z8(t){return(e,n)=>-t(-e,n)}function gP(t){const e=t(Q8,H8),n=e.domain;let r=10,s,i;function o(){return s=Rat(r),i=Dat(r),n()[0]<0?(s=z8(s),i=z8(i),t($at,_at)):t(Q8,H8),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const A=u<c;A&&([c,u]=[u,c]);let d=s(c),f=s(u),h,p;const m=a==null?10:+a;let y=[];if(!(r%1)&&f-d<m){if(d=Math.floor(d),f=Math.ceil(f),c>0){for(;d<=f;++d)for(h=1;h<r;++h)if(p=d<0?h/i(-d):h*i(d),!(p<c)){if(p>u)break;y.push(p)}}else for(;d<=f;++d)for(h=r-1;h>=1;--h)if(p=d>0?h/i(-d):h*i(d),!(p<c)){if(p>u)break;y.push(p)}y.length*2<m&&(y=VT(c,u,m))}else y=VT(d,f,Math.min(f-d,m)).map(i);return A?y.reverse():y},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=v0(l)).precision==null&&(l.trim=!0),l=mP(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return u=>{let A=u/i(Math.round(s(u)));return A*r<r-.5&&(A*=r),A<=c?l(u):""}},e.nice=()=>n(ure(n(),{floor:a=>i(Math.floor(s(a))),ceil:a=>i(Math.ceil(s(a)))})),e}function Are(){const t=gP(O3()).domain([1,10]);return t.copy=()=>Ov(t,Are()).base(t.base()),Yo.apply(t,arguments),t}function V8(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function W8(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function yP(t){var e=1,n=t(V8(e),W8(e));return n.constant=function(r){return arguments.length?t(V8(e=+r),W8(e)):e},yA(n)}function dre(){var t=yP(O3());return t.copy=function(){return Ov(t,dre()).constant(t.constant())},Yo.apply(t,arguments)}function G8(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Pat(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Uat(t){return t<0?-t*t:t*t}function xP(t){var e=t(ni,ni),n=1;function r(){return n===1?t(ni,ni):n===.5?t(Pat,Uat):t(G8(n),G8(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,r()):n},yA(e)}function vP(){var t=xP(O3());return t.copy=function(){return Ov(t,vP()).exponent(t.exponent())},Yo.apply(t,arguments),t}function Lat(){return vP.apply(null,arguments).exponent(.5)}function K8(t){return Math.sign(t)*t*t}function jat(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function fre(){var t=hP(),e=[0,1],n=!1,r;function s(i){var o=jat(t(i));return isNaN(o)?r:n?Math.round(o):o}return s.invert=function(i){return t.invert(K8(i))},s.domain=function(i){return arguments.length?(t.domain(i),s):t.domain()},s.range=function(i){return arguments.length?(t.range((e=Array.from(i,q2)).map(K8)),s):e.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(t.clamp(i),s):t.clamp()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return fre(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Yo.apply(s,arguments),yA(s)}function hre(){var t=[],e=[],n=[],r;function s(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=Vot(t,o/a);return i}function i(o){return o==null||isNaN(o=+o)?r:e[$v(n,o)]}return i.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Ru),s()},i.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return hre().domain(t).range(e).unknown(r)},Yo.apply(i,arguments)}function pre(){var t=0,e=1,n=1,r=[.5],s=[0,1],i;function o(l){return l!=null&&l<=l?s[$v(r,l,0,n)]:i}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(s=Array.from(l)).length-1,a()):s.slice()},o.invertExtent=function(l){var c=s.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return pre().domain([t,e]).range(s).unknown(i)},Yo.apply(yA(o),arguments)}function mre(){var t=[.5],e=[0,1],n,r=1;function s(i){return i!=null&&i<=i?e[$v(t,i,0,r)]:n}return s.domain=function(i){return arguments.length?(t=Array.from(i),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(i){return arguments.length?(e=Array.from(i),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return mre().domain(t).range(e).unknown(n)},Yo.apply(s,arguments)}const gE=new Date,yE=new Date;function Wr(t,e,n,r){function s(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(t(i=new Date(+i)),i),s.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),s.round=i=>{const o=s(i),a=s.ceil(i);return i-o<a-i?o:a},s.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,a)=>{const l=[];if(i=s.ceil(i),a=a==null?1:Math.floor(a),!(i<o)||!(a>0))return l;let c;do l.push(c=new Date(+i)),e(i,a),t(i);while(c<i&&i<o);return l},s.filter=i=>Wr(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!i(o););else for(;--a>=0;)for(;e(o,1),!i(o););}),n&&(s.count=(i,o)=>(gE.setTime(+i),yE.setTime(+o),t(gE),t(yE),Math.floor(n(gE,yE))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(r?o=>r(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Z2=Wr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Z2.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Wr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Z2);Z2.range;const Jl=1e3,Oo=Jl*60,Zl=Oo*60,xc=Zl*24,bP=xc*7,X8=xc*30,xE=xc*365,ld=Wr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Jl)},(t,e)=>(e-t)/Jl,t=>t.getUTCSeconds());ld.range;const wP=Wr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Jl)},(t,e)=>{t.setTime(+t+e*Oo)},(t,e)=>(e-t)/Oo,t=>t.getMinutes());wP.range;const CP=Wr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Oo)},(t,e)=>(e-t)/Oo,t=>t.getUTCMinutes());CP.range;const SP=Wr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Jl-t.getMinutes()*Oo)},(t,e)=>{t.setTime(+t+e*Zl)},(t,e)=>(e-t)/Zl,t=>t.getHours());SP.range;const BP=Wr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Zl)},(t,e)=>(e-t)/Zl,t=>t.getUTCHours());BP.range;const Dv=Wr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Oo)/xc,t=>t.getDate()-1);Dv.range;const D3=Wr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xc,t=>t.getUTCDate()-1);D3.range;const gre=Wr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xc,t=>Math.floor(t/xc));gre.range;function vf(t){return Wr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Oo)/bP)}const R3=vf(0),eC=vf(1),Mat=vf(2),Qat=vf(3),Cp=vf(4),Hat=vf(5),zat=vf(6);R3.range;eC.range;Mat.range;Qat.range;Cp.range;Hat.range;zat.range;function bf(t){return Wr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/bP)}const P3=bf(0),tC=bf(1),Vat=bf(2),Wat=bf(3),Sp=bf(4),Gat=bf(5),Kat=bf(6);P3.range;tC.range;Vat.range;Wat.range;Sp.range;Gat.range;Kat.range;const NP=Wr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());NP.range;const EP=Wr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());EP.range;const vc=Wr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());vc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});vc.range;const bc=Wr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());bc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});bc.range;function yre(t,e,n,r,s,i){const o=[[ld,1,Jl],[ld,5,5*Jl],[ld,15,15*Jl],[ld,30,30*Jl],[i,1,Oo],[i,5,5*Oo],[i,15,15*Oo],[i,30,30*Oo],[s,1,Zl],[s,3,3*Zl],[s,6,6*Zl],[s,12,12*Zl],[r,1,xc],[r,2,2*xc],[n,1,bP],[e,1,X8],[e,3,3*X8],[t,1,xE]];function a(c,u,A){const d=u<c;d&&([c,u]=[u,c]);const f=A&&typeof A.range=="function"?A:l(c,u,A),h=f?f.range(c,+u+1):[];return d?h.reverse():h}function l(c,u,A){const d=Math.abs(u-c)/A,f=cP(([,,m])=>m).right(o,d);if(f===o.length)return t.every(GT(c/xE,u/xE,A));if(f===0)return Z2.every(Math.max(GT(c,u,A),1));const[h,p]=o[d/o[f-1][2]<o[f][2]/d?f-1:f];return h.every(p)}return[a,l]}const[Xat,qat]=yre(bc,EP,P3,gre,BP,CP),[Yat,Jat]=yre(vc,NP,R3,Dv,SP,wP);function vE(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function bE(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function fg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Zat(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,i=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=hg(s),u=pg(s),A=hg(i),d=pg(i),f=hg(o),h=pg(o),p=hg(a),m=pg(a),y=hg(l),x=pg(l),v={a:G,A:D,b:M,B:q,c:null,d:tH,e:tH,f:wlt,g:$lt,G:Olt,H:xlt,I:vlt,j:blt,L:xre,m:Clt,M:Slt,p:Z,q:te,Q:sH,s:iH,S:Blt,u:Nlt,U:Elt,V:Ilt,w:klt,W:Tlt,x:null,X:null,y:Flt,Y:_lt,Z:Dlt,"%":rH},b={a:ue,A:de,b:le,B:he,c:null,d:nH,e:nH,f:Llt,g:Xlt,G:Ylt,H:Rlt,I:Plt,j:Ult,L:bre,m:jlt,M:Mlt,p:ke,q:Qe,Q:sH,s:iH,S:Qlt,u:Hlt,U:zlt,V:Vlt,w:Wlt,W:Glt,x:null,X:null,y:Klt,Y:qlt,Z:Jlt,"%":rH},w={a:k,A:O,b:U,B:P,c:V,d:Z8,e:Z8,f:plt,g:J8,G:Y8,H:eH,I:eH,j:Alt,L:hlt,m:ult,M:dlt,p:N,q:clt,Q:glt,s:ylt,S:flt,u:slt,U:ilt,V:olt,w:rlt,W:alt,x:W,X:j,y:J8,Y:Y8,Z:llt,"%":mlt};v.x=C(n,v),v.X=C(r,v),v.c=C(e,v),b.x=C(n,b),b.X=C(r,b),b.c=C(e,b);function C(xe,$e){return function(Fe){var be=[],it=-1,et=0,st=xe.length,rt,ht,dt;for(Fe instanceof Date||(Fe=new Date(+Fe));++it<st;)xe.charCodeAt(it)===37&&(be.push(xe.slice(et,it)),(ht=q8[rt=xe.charAt(++it)])!=null?rt=xe.charAt(++it):ht=rt==="e"?" ":"0",(dt=$e[rt])&&(rt=dt(Fe,ht)),be.push(rt),et=it+1);return be.push(xe.slice(et,it)),be.join("")}}function B(xe,$e){return function(Fe){var be=fg(1900,void 0,1),it=S(be,xe,Fe+="",0),et,st;if(it!=Fe.length)return null;if("Q"in be)return new Date(be.Q);if("s"in be)return new Date(be.s*1e3+("L"in be?be.L:0));if($e&&!("Z"in be)&&(be.Z=0),"p"in be&&(be.H=be.H%12+be.p*12),be.m===void 0&&(be.m="q"in be?be.q:0),"V"in be){if(be.V<1||be.V>53)return null;"w"in be||(be.w=1),"Z"in be?(et=bE(fg(be.y,0,1)),st=et.getUTCDay(),et=st>4||st===0?tC.ceil(et):tC(et),et=D3.offset(et,(be.V-1)*7),be.y=et.getUTCFullYear(),be.m=et.getUTCMonth(),be.d=et.getUTCDate()+(be.w+6)%7):(et=vE(fg(be.y,0,1)),st=et.getDay(),et=st>4||st===0?eC.ceil(et):eC(et),et=Dv.offset(et,(be.V-1)*7),be.y=et.getFullYear(),be.m=et.getMonth(),be.d=et.getDate()+(be.w+6)%7)}else("W"in be||"U"in be)&&("w"in be||(be.w="u"in be?be.u%7:"W"in be?1:0),st="Z"in be?bE(fg(be.y,0,1)).getUTCDay():vE(fg(be.y,0,1)).getDay(),be.m=0,be.d="W"in be?(be.w+6)%7+be.W*7-(st+5)%7:be.w+be.U*7-(st+6)%7);return"Z"in be?(be.H+=be.Z/100|0,be.M+=be.Z%100,bE(be)):vE(be)}}function S(xe,$e,Fe,be){for(var it=0,et=$e.length,st=Fe.length,rt,ht;it<et;){if(be>=st)return-1;if(rt=$e.charCodeAt(it++),rt===37){if(rt=$e.charAt(it++),ht=w[rt in q8?$e.charAt(it++):rt],!ht||(be=ht(xe,Fe,be))<0)return-1}else if(rt!=Fe.charCodeAt(be++))return-1}return be}function N(xe,$e,Fe){var be=c.exec($e.slice(Fe));return be?(xe.p=u.get(be[0].toLowerCase()),Fe+be[0].length):-1}function k(xe,$e,Fe){var be=f.exec($e.slice(Fe));return be?(xe.w=h.get(be[0].toLowerCase()),Fe+be[0].length):-1}function O(xe,$e,Fe){var be=A.exec($e.slice(Fe));return be?(xe.w=d.get(be[0].toLowerCase()),Fe+be[0].length):-1}function U(xe,$e,Fe){var be=y.exec($e.slice(Fe));return be?(xe.m=x.get(be[0].toLowerCase()),Fe+be[0].length):-1}function P(xe,$e,Fe){var be=p.exec($e.slice(Fe));return be?(xe.m=m.get(be[0].toLowerCase()),Fe+be[0].length):-1}function V(xe,$e,Fe){return S(xe,e,$e,Fe)}function W(xe,$e,Fe){return S(xe,n,$e,Fe)}function j(xe,$e,Fe){return S(xe,r,$e,Fe)}function G(xe){return o[xe.getDay()]}function D(xe){return i[xe.getDay()]}function M(xe){return l[xe.getMonth()]}function q(xe){return a[xe.getMonth()]}function Z(xe){return s[+(xe.getHours()>=12)]}function te(xe){return 1+~~(xe.getMonth()/3)}function ue(xe){return o[xe.getUTCDay()]}function de(xe){return i[xe.getUTCDay()]}function le(xe){return l[xe.getUTCMonth()]}function he(xe){return a[xe.getUTCMonth()]}function ke(xe){return s[+(xe.getUTCHours()>=12)]}function Qe(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var $e=C(xe+="",v);return $e.toString=function(){return xe},$e},parse:function(xe){var $e=B(xe+="",!1);return $e.toString=function(){return xe},$e},utcFormat:function(xe){var $e=C(xe+="",b);return $e.toString=function(){return xe},$e},utcParse:function(xe){var $e=B(xe+="",!0);return $e.toString=function(){return xe},$e}}}var q8={"-":"",_:" ",0:"0"},ls=/^\s*\d+/,elt=/^%/,tlt=/[\\^$*+?|[\]().{}]/g;function Wt(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",i=s.length;return r+(i<n?new Array(n-i+1).join(e)+s:s)}function nlt(t){return t.replace(tlt,"\\$&")}function hg(t){return new RegExp("^(?:"+t.map(nlt).join("|")+")","i")}function pg(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function rlt(t,e,n){var r=ls.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function slt(t,e,n){var r=ls.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function ilt(t,e,n){var r=ls.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function olt(t,e,n){var r=ls.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function alt(t,e,n){var r=ls.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Y8(t,e,n){var r=ls.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function J8(t,e,n){var r=ls.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function llt(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function clt(t,e,n){var r=ls.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function ult(t,e,n){var r=ls.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Z8(t,e,n){var r=ls.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Alt(t,e,n){var r=ls.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function eH(t,e,n){var r=ls.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function dlt(t,e,n){var r=ls.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function flt(t,e,n){var r=ls.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function hlt(t,e,n){var r=ls.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function plt(t,e,n){var r=ls.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function mlt(t,e,n){var r=elt.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function glt(t,e,n){var r=ls.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function ylt(t,e,n){var r=ls.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function tH(t,e){return Wt(t.getDate(),e,2)}function xlt(t,e){return Wt(t.getHours(),e,2)}function vlt(t,e){return Wt(t.getHours()%12||12,e,2)}function blt(t,e){return Wt(1+Dv.count(vc(t),t),e,3)}function xre(t,e){return Wt(t.getMilliseconds(),e,3)}function wlt(t,e){return xre(t,e)+"000"}function Clt(t,e){return Wt(t.getMonth()+1,e,2)}function Slt(t,e){return Wt(t.getMinutes(),e,2)}function Blt(t,e){return Wt(t.getSeconds(),e,2)}function Nlt(t){var e=t.getDay();return e===0?7:e}function Elt(t,e){return Wt(R3.count(vc(t)-1,t),e,2)}function vre(t){var e=t.getDay();return e>=4||e===0?Cp(t):Cp.ceil(t)}function Ilt(t,e){return t=vre(t),Wt(Cp.count(vc(t),t)+(vc(t).getDay()===4),e,2)}function klt(t){return t.getDay()}function Tlt(t,e){return Wt(eC.count(vc(t)-1,t),e,2)}function Flt(t,e){return Wt(t.getFullYear()%100,e,2)}function $lt(t,e){return t=vre(t),Wt(t.getFullYear()%100,e,2)}function _lt(t,e){return Wt(t.getFullYear()%1e4,e,4)}function Olt(t,e){var n=t.getDay();return t=n>=4||n===0?Cp(t):Cp.ceil(t),Wt(t.getFullYear()%1e4,e,4)}function Dlt(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Wt(e/60|0,"0",2)+Wt(e%60,"0",2)}function nH(t,e){return Wt(t.getUTCDate(),e,2)}function Rlt(t,e){return Wt(t.getUTCHours(),e,2)}function Plt(t,e){return Wt(t.getUTCHours()%12||12,e,2)}function Ult(t,e){return Wt(1+D3.count(bc(t),t),e,3)}function bre(t,e){return Wt(t.getUTCMilliseconds(),e,3)}function Llt(t,e){return bre(t,e)+"000"}function jlt(t,e){return Wt(t.getUTCMonth()+1,e,2)}function Mlt(t,e){return Wt(t.getUTCMinutes(),e,2)}function Qlt(t,e){return Wt(t.getUTCSeconds(),e,2)}function Hlt(t){var e=t.getUTCDay();return e===0?7:e}function zlt(t,e){return Wt(P3.count(bc(t)-1,t),e,2)}function wre(t){var e=t.getUTCDay();return e>=4||e===0?Sp(t):Sp.ceil(t)}function Vlt(t,e){return t=wre(t),Wt(Sp.count(bc(t),t)+(bc(t).getUTCDay()===4),e,2)}function Wlt(t){return t.getUTCDay()}function Glt(t,e){return Wt(tC.count(bc(t)-1,t),e,2)}function Klt(t,e){return Wt(t.getUTCFullYear()%100,e,2)}function Xlt(t,e){return t=wre(t),Wt(t.getUTCFullYear()%100,e,2)}function qlt(t,e){return Wt(t.getUTCFullYear()%1e4,e,4)}function Ylt(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Sp(t):Sp.ceil(t),Wt(t.getUTCFullYear()%1e4,e,4)}function Jlt(){return"+0000"}function rH(){return"%"}function sH(t){return+t}function iH(t){return Math.floor(+t/1e3)}var Hf,Cre,Sre;Zlt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Zlt(t){return Hf=Zat(t),Cre=Hf.format,Hf.parse,Sre=Hf.utcFormat,Hf.utcParse,Hf}function ect(t){return new Date(t)}function tct(t){return t instanceof Date?+t:+new Date(+t)}function IP(t,e,n,r,s,i,o,a,l,c){var u=hP(),A=u.invert,d=u.domain,f=c(".%L"),h=c(":%S"),p=c("%I:%M"),m=c("%I %p"),y=c("%a %d"),x=c("%b %d"),v=c("%B"),b=c("%Y");function w(C){return(l(C)<C?f:a(C)<C?h:o(C)<C?p:i(C)<C?m:r(C)<C?s(C)<C?y:x:n(C)<C?v:b)(C)}return u.invert=function(C){return new Date(A(C))},u.domain=function(C){return arguments.length?d(Array.from(C,tct)):d().map(ect)},u.ticks=function(C){var B=d();return t(B[0],B[B.length-1],C??10)},u.tickFormat=function(C,B){return B==null?w:c(B)},u.nice=function(C){var B=d();return(!C||typeof C.range!="function")&&(C=e(B[0],B[B.length-1],C??10)),C?d(ure(B,C)):u},u.copy=function(){return Ov(u,IP(t,e,n,r,s,i,o,a,l,c))},u}function nct(){return Yo.apply(IP(Yat,Jat,vc,NP,R3,Dv,SP,wP,ld,Cre).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function rct(){return Yo.apply(IP(Xat,qat,bc,EP,P3,D3,BP,CP,ld,Sre).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function U3(){var t=0,e=1,n,r,s,i,o=ni,a=!1,l;function c(A){return A==null||isNaN(A=+A)?l:o(s===0?.5:(A=(i(A)-n)*s,a?Math.max(0,Math.min(1,A)):A))}c.domain=function(A){return arguments.length?([t,e]=A,n=i(t=+t),r=i(e=+e),s=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(A){return arguments.length?(a=!!A,c):a},c.interpolator=function(A){return arguments.length?(o=A,c):o};function u(A){return function(d){var f,h;return arguments.length?([f,h]=d,o=A(f,h),c):[o(0),o(1)]}}return c.range=u(Sm),c.rangeRound=u(fP),c.unknown=function(A){return arguments.length?(l=A,c):l},function(A){return i=A,n=A(t),r=A(e),s=n===r?0:1/(r-n),c}}function xA(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Bre(){var t=yA(U3()(ni));return t.copy=function(){return xA(t,Bre())},Oc.apply(t,arguments)}function Nre(){var t=gP(U3()).domain([1,10]);return t.copy=function(){return xA(t,Nre()).base(t.base())},Oc.apply(t,arguments)}function Ere(){var t=yP(U3());return t.copy=function(){return xA(t,Ere()).constant(t.constant())},Oc.apply(t,arguments)}function kP(){var t=xP(U3());return t.copy=function(){return xA(t,kP()).exponent(t.exponent())},Oc.apply(t,arguments)}function sct(){return kP.apply(null,arguments).exponent(.5)}function Ire(){var t=[],e=ni;function n(r){if(r!=null&&!isNaN(r=+r))return e(($v(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Ru),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,i)=>zot(t,i/r))},n.copy=function(){return Ire(e).domain(t)},Oc.apply(n,arguments)}function L3(){var t=0,e=.5,n=1,r=1,s,i,o,a,l,c=ni,u,A=!1,d;function f(p){return isNaN(p=+p)?d:(p=.5+((p=+u(p))-i)*(r*p<r*i?a:l),c(A?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([t,e,n]=p,s=u(t=+t),i=u(e=+e),o=u(n=+n),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),r=i<s?-1:1,f):[t,e,n]},f.clamp=function(p){return arguments.length?(A=!!p,f):A},f.interpolator=function(p){return arguments.length?(c=p,f):c};function h(p){return function(m){var y,x,v;return arguments.length?([y,x,v]=m,c=mat(p,[y,x,v]),f):[c(0),c(.5),c(1)]}}return f.range=h(Sm),f.rangeRound=h(fP),f.unknown=function(p){return arguments.length?(d=p,f):d},function(p){return u=p,s=p(t),i=p(e),o=p(n),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),r=i<s?-1:1,f}}function kre(){var t=yA(L3()(ni));return t.copy=function(){return xA(t,kre())},Oc.apply(t,arguments)}function Tre(){var t=gP(L3()).domain([.1,1,10]);return t.copy=function(){return xA(t,Tre()).base(t.base())},Oc.apply(t,arguments)}function Fre(){var t=yP(L3());return t.copy=function(){return xA(t,Fre()).constant(t.constant())},Oc.apply(t,arguments)}function TP(){var t=xP(L3());return t.copy=function(){return xA(t,TP()).exponent(t.exponent())},Oc.apply(t,arguments)}function ict(){return TP.apply(null,arguments).exponent(.5)}const oH=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:m0,scaleDiverging:kre,scaleDivergingLog:Tre,scaleDivergingPow:TP,scaleDivergingSqrt:ict,scaleDivergingSymlog:Fre,scaleIdentity:cre,scaleImplicit:KT,scaleLinear:J2,scaleLog:Are,scaleOrdinal:uP,scalePoint:Ay,scalePow:vP,scaleQuantile:hre,scaleQuantize:pre,scaleRadial:fre,scaleSequential:Bre,scaleSequentialLog:Nre,scaleSequentialPow:kP,scaleSequentialQuantile:Ire,scaleSequentialSqrt:sct,scaleSequentialSymlog:Ere,scaleSqrt:Lat,scaleSymlog:dre,scaleThreshold:mre,scaleTime:nct,scaleUtc:rct,tickFormat:lre},Symbol.toStringTag,{value:"Module"}));var oct=pm;function act(t,e,n){for(var r=-1,s=t.length;++r<s;){var i=t[r],o=e(i);if(o!=null&&(a===void 0?o===o&&!oct(o):n(o,a)))var a=o,l=i}return l}var j3=act;function lct(t,e){return t>e}var $re=lct,cct=j3,uct=$re,Act=wm;function dct(t){return t&&t.length?cct(t,Act,uct):void 0}var fct=dct;const M3=Gt(fct);function hct(t,e){return t<e}var _re=hct,pct=j3,mct=_re,gct=wm;function yct(t){return t&&t.length?pct(t,gct,mct):void 0}var xct=yct;const Q3=Gt(xct);var vct=zR,bct=Cl,wct=jne,Cct=ji;function Sct(t,e){var n=Cct(t)?vct:wct;return n(t,bct(e))}var Bct=Sct,Nct=Une,Ect=Bct;function Ict(t,e){return Nct(Ect(t,e),1)}var kct=Ict;const Tct=Gt(kct);var Fct=iP;function $ct(t,e){return Fct(t,e)}var _ct=$ct;const H3=Gt(_ct);var Bm=1e9,Oct={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},$P,Qn=!0,zo="[DecimalError] ",kd=zo+"Invalid argument: ",FP=zo+"Exponent out of range: ",Nm=Math.floor,VA=Math.pow,Dct=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Yi,qr=1e7,Fn=7,Ore=9007199254740991,nC=Nm(Ore/Fn),qe={};qe.absoluteValue=qe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};qe.comparedTo=qe.cmp=function(t){var e,n,r,s,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(r=i.d.length,s=t.d.length,e=0,n=r<s?r:s;e<n;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return r===s?0:r>s^i.s<0?1:-1};qe.decimalPlaces=qe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Fn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};qe.dividedBy=qe.div=function(t){return ac(this,new this.constructor(t))};qe.dividedToIntegerBy=qe.idiv=function(t){var e=this,n=e.constructor;return xn(ac(e,new n(t),0,1),n.precision)};qe.equals=qe.eq=function(t){return!this.cmp(t)};qe.exponent=function(){return Tr(this)};qe.greaterThan=qe.gt=function(t){return this.cmp(t)>0};qe.greaterThanOrEqualTo=qe.gte=function(t){return this.cmp(t)>=0};qe.isInteger=qe.isint=function(){return this.e>this.d.length-2};qe.isNegative=qe.isneg=function(){return this.s<0};qe.isPositive=qe.ispos=function(){return this.s>0};qe.isZero=function(){return this.s===0};qe.lessThan=qe.lt=function(t){return this.cmp(t)<0};qe.lessThanOrEqualTo=qe.lte=function(t){return this.cmp(t)<1};qe.logarithm=qe.log=function(t){var e,n=this,r=n.constructor,s=r.precision,i=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Yi))throw Error(zo+"NaN");if(n.s<1)throw Error(zo+(n.s?"NaN":"-Infinity"));return n.eq(Yi)?new r(0):(Qn=!1,e=ac(b0(n,i),b0(t,i),i),Qn=!0,xn(e,s))};qe.minus=qe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Pre(e,t):Dre(e,(t.s=-t.s,t))};qe.modulo=qe.mod=function(t){var e,n=this,r=n.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(zo+"NaN");return n.s?(Qn=!1,e=ac(n,t,0,1).times(t),Qn=!0,n.minus(e)):xn(new r(n),s)};qe.naturalExponential=qe.exp=function(){return Rre(this)};qe.naturalLogarithm=qe.ln=function(){return b0(this)};qe.negated=qe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};qe.plus=qe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Dre(e,t):Pre(e,(t.s=-t.s,t))};qe.precision=qe.sd=function(t){var e,n,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(kd+t);if(e=Tr(s)+1,r=s.d.length-1,n=r*Fn+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};qe.squareRoot=qe.sqrt=function(){var t,e,n,r,s,i,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(zo+"NaN")}for(t=Tr(a),Qn=!1,s=Math.sqrt(+a),s==0||s==1/0?(e=sl(a.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=Nm((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(s.toString()),n=l.precision,s=o=n+3;;)if(i=r,r=i.plus(ac(a,i,o+2)).times(.5),sl(i.d).slice(0,o)===(e=sl(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),s==o&&e=="4999"){if(xn(i,n+1,0),i.times(i).eq(a)){r=i;break}}else if(e!="9999")break;o+=4}return Qn=!0,xn(r,n)};qe.times=qe.mul=function(t){var e,n,r,s,i,o,a,l,c,u=this,A=u.constructor,d=u.d,f=(t=new A(t)).d;if(!u.s||!t.s)return new A(0);for(t.s*=u.s,n=u.e+t.e,l=d.length,c=f.length,l<c&&(i=d,d=f,f=i,o=l,l=c,c=o),i=[],o=l+c,r=o;r--;)i.push(0);for(r=c;--r>=0;){for(e=0,s=l+r;s>r;)a=i[s]+f[r]*d[s-r-1]+e,i[s--]=a%qr|0,e=a/qr|0;i[s]=(i[s]+e)%qr|0}for(;!i[--o];)i.pop();return e?++n:i.shift(),t.d=i,t.e=n,Qn?xn(t,A.precision):t};qe.toDecimalPlaces=qe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(gl(t,0,Bm),e===void 0?e=r.rounding:gl(e,0,8),xn(n,t+Tr(n)+1,e))};qe.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=ef(r,!0):(gl(t,0,Bm),e===void 0?e=s.rounding:gl(e,0,8),r=xn(new s(r),t+1,e),n=ef(r,!0,t+1)),n};qe.toFixed=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?ef(s):(gl(t,0,Bm),e===void 0?e=i.rounding:gl(e,0,8),r=xn(new i(s),t+Tr(s)+1,e),n=ef(r.abs(),!1,t+Tr(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};qe.toInteger=qe.toint=function(){var t=this,e=t.constructor;return xn(new e(t),Tr(t)+1,e.rounding)};qe.toNumber=function(){return+this};qe.toPower=qe.pow=function(t){var e,n,r,s,i,o,a=this,l=a.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(Yi);if(a=new l(a),!a.s){if(t.s<1)throw Error(zo+"Infinity");return a}if(a.eq(Yi))return a;if(r=l.precision,t.eq(Yi))return xn(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,i=a.s,o){if((n=u<0?-u:u)<=Ore){for(s=new l(Yi),e=Math.ceil(r/Fn+4),Qn=!1;n%2&&(s=s.times(a),lH(s.d,e)),n=Nm(n/2),n!==0;)a=a.times(a),lH(a.d,e);return Qn=!0,t.s<0?new l(Yi).div(s):xn(s,r)}}else if(i<0)throw Error(zo+"NaN");return i=i<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Qn=!1,s=t.times(b0(a,r+c)),Qn=!0,s=Rre(s),s.s=i,s};qe.toPrecision=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?(n=Tr(s),r=ef(s,n<=i.toExpNeg||n>=i.toExpPos)):(gl(t,1,Bm),e===void 0?e=i.rounding:gl(e,0,8),s=xn(new i(s),t,e),n=Tr(s),r=ef(s,t<=n||n<=i.toExpNeg,t)),r};qe.toSignificantDigits=qe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(gl(t,1,Bm),e===void 0?e=r.rounding:gl(e,0,8)),xn(new r(n),t,e)};qe.toString=qe.valueOf=qe.val=qe.toJSON=qe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Tr(t),n=t.constructor;return ef(t,e<=n.toExpNeg||e>=n.toExpPos)};function Dre(t,e){var n,r,s,i,o,a,l,c,u=t.constructor,A=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),Qn?xn(e,A):e;if(l=t.d,c=e.d,o=t.e,s=e.e,l=l.slice(),i=o-s,i){for(i<0?(r=l,i=-i,a=c.length):(r=c,s=o,a=l.length),o=Math.ceil(A/Fn),a=o>a?o+1:a+1,i>a&&(i=a,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(a=l.length,i=c.length,a-i<0&&(i=a,r=c,c=l,l=r),n=0;i;)n=(l[--i]=l[i]+c[i]+n)/qr|0,l[i]%=qr;for(n&&(l.unshift(n),++s),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=s,Qn?xn(e,A):e}function gl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(kd+t)}function sl(t){var e,n,r,s=t.length-1,i="",o=t[0];if(s>0){for(i+=o,e=1;e<s;e++)r=t[e]+"",n=Fn-r.length,n&&(i+=Yc(n)),i+=r;o=t[e],r=o+"",n=Fn-r.length,n&&(i+=Yc(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var ac=function(){function t(r,s){var i,o=0,a=r.length;for(r=r.slice();a--;)i=r[a]*s+o,r[a]=i%qr|0,o=i/qr|0;return o&&r.unshift(o),r}function e(r,s,i,o){var a,l;if(i!=o)l=i>o?1:-1;else for(a=l=0;a<i;a++)if(r[a]!=s[a]){l=r[a]>s[a]?1:-1;break}return l}function n(r,s,i){for(var o=0;i--;)r[i]-=o,o=r[i]<s[i]?1:0,r[i]=o*qr+r[i]-s[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,i,o){var a,l,c,u,A,d,f,h,p,m,y,x,v,b,w,C,B,S,N=r.constructor,k=r.s==s.s?1:-1,O=r.d,U=s.d;if(!r.s)return new N(r);if(!s.s)throw Error(zo+"Division by zero");for(l=r.e-s.e,B=U.length,w=O.length,f=new N(k),h=f.d=[],c=0;U[c]==(O[c]||0);)++c;if(U[c]>(O[c]||0)&&--l,i==null?x=i=N.precision:o?x=i+(Tr(r)-Tr(s))+1:x=i,x<0)return new N(0);if(x=x/Fn+2|0,c=0,B==1)for(u=0,U=U[0],x++;(c<w||u)&&x--;c++)v=u*qr+(O[c]||0),h[c]=v/U|0,u=v%U|0;else{for(u=qr/(U[0]+1)|0,u>1&&(U=t(U,u),O=t(O,u),B=U.length,w=O.length),b=B,p=O.slice(0,B),m=p.length;m<B;)p[m++]=0;S=U.slice(),S.unshift(0),C=U[0],U[1]>=qr/2&&++C;do u=0,a=e(U,p,B,m),a<0?(y=p[0],B!=m&&(y=y*qr+(p[1]||0)),u=y/C|0,u>1?(u>=qr&&(u=qr-1),A=t(U,u),d=A.length,m=p.length,a=e(A,p,d,m),a==1&&(u--,n(A,B<d?S:U,d))):(u==0&&(a=u=1),A=U.slice()),d=A.length,d<m&&A.unshift(0),n(p,A,m),a==-1&&(m=p.length,a=e(U,p,B,m),a<1&&(u++,n(p,B<m?S:U,m))),m=p.length):a===0&&(u++,p=[0]),h[c++]=u,a&&p[0]?p[m++]=O[b]||0:(p=[O[b]],m=1);while((b++<w||p[0]!==void 0)&&x--)}return h[0]||h.shift(),f.e=l,xn(f,o?i+Tr(f)+1:i)}}();function Rre(t,e){var n,r,s,i,o,a,l=0,c=0,u=t.constructor,A=u.precision;if(Tr(t)>16)throw Error(FP+Tr(t));if(!t.s)return new u(Yi);for(Qn=!1,a=A,o=new u(.03125);t.abs().gte(.1);)t=t.times(o),c+=5;for(r=Math.log(VA(2,c))/Math.LN10*2+5|0,a+=r,n=s=i=new u(Yi),u.precision=a;;){if(s=xn(s.times(t),a),n=n.times(++l),o=i.plus(ac(s,n,a)),sl(o.d).slice(0,a)===sl(i.d).slice(0,a)){for(;c--;)i=xn(i.times(i),a);return u.precision=A,e==null?(Qn=!0,xn(i,A)):i}i=o}}function Tr(t){for(var e=t.e*Fn,n=t.d[0];n>=10;n/=10)e++;return e}function wE(t,e,n){if(e>t.LN10.sd())throw Qn=!0,n&&(t.precision=n),Error(zo+"LN10 precision limit exceeded");return xn(new t(t.LN10),e)}function Yc(t){for(var e="";t--;)e+="0";return e}function b0(t,e){var n,r,s,i,o,a,l,c,u,A=1,d=10,f=t,h=f.d,p=f.constructor,m=p.precision;if(f.s<1)throw Error(zo+(f.s?"NaN":"-Infinity"));if(f.eq(Yi))return new p(0);if(e==null?(Qn=!1,c=m):c=e,f.eq(10))return e==null&&(Qn=!0),wE(p,c);if(c+=d,p.precision=c,n=sl(h),r=n.charAt(0),i=Tr(f),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)f=f.times(t),n=sl(f.d),r=n.charAt(0),A++;i=Tr(f),r>1?(f=new p("0."+n),i++):f=new p(r+"."+n.slice(1))}else return l=wE(p,c+2,m).times(i+""),f=b0(new p(r+"."+n.slice(1)),c-d).plus(l),p.precision=m,e==null?(Qn=!0,xn(f,m)):f;for(a=o=f=ac(f.minus(Yi),f.plus(Yi),c),u=xn(f.times(f),c),s=3;;){if(o=xn(o.times(u),c),l=a.plus(ac(o,new p(s),c)),sl(l.d).slice(0,c)===sl(a.d).slice(0,c))return a=a.times(2),i!==0&&(a=a.plus(wE(p,c+2,m).times(i+""))),a=ac(a,new p(A),c),p.precision=m,e==null?(Qn=!0,xn(a,m)):a;a=l,s+=2}}function aH(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,n=n-r-1,t.e=Nm(n/Fn),t.d=[],r=(n+1)%Fn,n<0&&(r+=Fn),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=Fn;r<s;)t.d.push(+e.slice(r,r+=Fn));e=e.slice(r),r=Fn-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),Qn&&(t.e>nC||t.e<-nC))throw Error(FP+n)}else t.s=0,t.e=0,t.d=[0];return t}function xn(t,e,n){var r,s,i,o,a,l,c,u,A=t.d;for(o=1,i=A[0];i>=10;i/=10)o++;if(r=e-o,r<0)r+=Fn,s=e,c=A[u=0];else{if(u=Math.ceil((r+1)/Fn),i=A.length,u>=i)return t;for(c=i=A[u],o=1;i>=10;i/=10)o++;r%=Fn,s=r-Fn+o}if(n!==void 0&&(i=VA(10,o-s-1),a=c/i%10|0,l=e<0||A[u+1]!==void 0||c%i,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?s>0?c/VA(10,o-s):0:A[u-1])%10&1||n==(t.s<0?8:7))),e<1||!A[0])return l?(i=Tr(t),A.length=1,e=e-i-1,A[0]=VA(10,(Fn-e%Fn)%Fn),t.e=Nm(-e/Fn)||0):(A.length=1,A[0]=t.e=t.s=0),t;if(r==0?(A.length=u,i=1,u--):(A.length=u+1,i=VA(10,Fn-r),A[u]=s>0?(c/VA(10,o-s)%VA(10,s)|0)*i:0),l)for(;;)if(u==0){(A[0]+=i)==qr&&(A[0]=1,++t.e);break}else{if(A[u]+=i,A[u]!=qr)break;A[u--]=0,i=1}for(r=A.length;A[--r]===0;)A.pop();if(Qn&&(t.e>nC||t.e<-nC))throw Error(FP+Tr(t));return t}function Pre(t,e){var n,r,s,i,o,a,l,c,u,A,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new d(t),Qn?xn(e,f):e;if(l=t.d,A=e.d,r=e.e,c=t.e,l=l.slice(),o=c-r,o){for(u=o<0,u?(n=l,o=-o,a=A.length):(n=A,r=c,a=l.length),s=Math.max(Math.ceil(f/Fn),a)+2,o>s&&(o=s,n.length=1),n.reverse(),s=o;s--;)n.push(0);n.reverse()}else{for(s=l.length,a=A.length,u=s<a,u&&(a=s),s=0;s<a;s++)if(l[s]!=A[s]){u=l[s]<A[s];break}o=0}for(u&&(n=l,l=A,A=n,e.s=-e.s),a=l.length,s=A.length-a;s>0;--s)l[a++]=0;for(s=A.length;s>o;){if(l[--s]<A[s]){for(i=s;i&&l[--i]===0;)l[i]=qr-1;--l[i],l[s]+=qr}l[s]-=A[s]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Qn?xn(e,f):e):new d(0)}function ef(t,e,n){var r,s=Tr(t),i=sl(t.d),o=i.length;return e?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+Yc(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Yc(-s-1)+i,n&&(r=n-o)>0&&(i+=Yc(r))):s>=o?(i+=Yc(s+1-o),n&&(r=n-s-1)>0&&(i=i+"."+Yc(r))):((r=s+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(s+1===o&&(i+="."),i+=Yc(r))),t.s<0?"-"+i:i}function lH(t,e){if(t.length>e)return t.length=e,!0}function Ure(t){var e,n,r;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(kd+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return aH(o,i.toString())}else if(typeof i!="string")throw Error(kd+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Dct.test(i))aH(o,i);else throw Error(kd+i)}if(s.prototype=qe,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=Ure,s.config=s.set=Rct,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function Rct(t){if(!t||typeof t!="object")throw Error(zo+"Object expected");var e,n,r,s=["precision",1,Bm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[n=s[e]])!==void 0)if(Nm(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(kd+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(kd+n+": "+r);return this}var $P=Ure(Oct);Yi=new $P(1);const An=$P;function Pct(t){return Mct(t)||jct(t)||Lct(t)||Uct()}function Uct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lct(t,e){if(t){if(typeof t=="string")return JT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JT(t,e)}}function jct(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Mct(t){if(Array.isArray(t))return JT(t)}function JT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Qct=function(e){return e},Lre={},jre=function(e){return e===Lre},cH=function(e){return function n(){return arguments.length===0||arguments.length===1&&jre(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Hct=function t(e,n){return e===1?n:cH(function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];var o=s.filter(function(a){return a!==Lre}).length;return o>=e?n.apply(void 0,s):t(e-o,cH(function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];var u=s.map(function(A){return jre(A)?l.shift():A});return n.apply(void 0,Pct(u).concat(l))}))})},z3=function(e){return Hct(e.length,e)},ZT=function(e,n){for(var r=[],s=e;s<n;++s)r[s-e]=s;return r},zct=z3(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Vct=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Qct;var s=n.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(a,l){return l(a)},i.apply(void 0,arguments))}},eF=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Mre=function(e){var n=null,r=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return n&&i.every(function(a,l){return a===n[l]})||(n=i,r=e.apply(void 0,i)),r}};function Wct(t){var e;return t===0?e=1:e=Math.floor(new An(t).abs().log(10).toNumber())+1,e}function Gct(t,e,n){for(var r=new An(t),s=0,i=[];r.lt(e)&&s<1e5;)i.push(r.toNumber()),r=r.add(n),s++;return i}var Kct=z3(function(t,e,n){var r=+t,s=+e;return r+n*(s-r)}),Xct=z3(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),qct=z3(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const V3={rangeStep:Gct,getDigitCount:Wct,interpolateNumber:Kct,uninterpolateNumber:Xct,uninterpolateTruncation:qct};function tF(t){return Zct(t)||Jct(t)||Qre(t)||Yct()}function Yct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jct(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Zct(t){if(Array.isArray(t))return nF(t)}function w0(t,e){return nut(t)||tut(t,e)||Qre(t,e)||eut()}function eut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qre(t,e){if(t){if(typeof t=="string")return nF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nF(t,e)}}function nF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tut(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,i=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function nut(t){if(Array.isArray(t))return t}function Hre(t){var e=w0(t,2),n=e[0],r=e[1],s=n,i=r;return n>r&&(s=r,i=n),[s,i]}function zre(t,e,n){if(t.lte(0))return new An(0);var r=V3.getDigitCount(t.toNumber()),s=new An(10).pow(r),i=t.div(s),o=r!==1?.05:.1,a=new An(Math.ceil(i.div(o).toNumber())).add(n).mul(o),l=a.mul(s);return e?l:new An(Math.ceil(l))}function rut(t,e,n){var r=1,s=new An(t);if(!s.isint()&&n){var i=Math.abs(t);i<1?(r=new An(10).pow(V3.getDigitCount(t)-1),s=new An(Math.floor(s.div(r).toNumber())).mul(r)):i>1&&(s=new An(Math.floor(t)))}else t===0?s=new An(Math.floor((e-1)/2)):n||(s=new An(Math.floor(t)));var o=Math.floor((e-1)/2),a=Vct(zct(function(l){return s.add(new An(l-o).mul(r)).toNumber()}),ZT);return a(0,e)}function Vre(t,e,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new An(0),tickMin:new An(0),tickMax:new An(0)};var i=zre(new An(e).sub(t).div(n-1),r,s),o;t<=0&&e>=0?o=new An(0):(o=new An(t).add(e).div(2),o=o.sub(new An(o).mod(i)));var a=Math.ceil(o.sub(t).div(i).toNumber()),l=Math.ceil(new An(e).sub(o).div(i).toNumber()),c=a+l+1;return c>n?Vre(t,e,n,r,s+1):(c<n&&(l=e>0?l+(n-c):l,a=e>0?a:a+(n-c)),{step:i,tickMin:o.sub(new An(a).mul(i)),tickMax:o.add(new An(l).mul(i))})}function sut(t){var e=w0(t,2),n=e[0],r=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),a=Hre([n,r]),l=w0(a,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var A=u===1/0?[c].concat(tF(ZT(0,s-1).map(function(){return 1/0}))):[].concat(tF(ZT(0,s-1).map(function(){return-1/0})),[u]);return n>r?eF(A):A}if(c===u)return rut(c,s,i);var d=Vre(c,u,o,i),f=d.step,h=d.tickMin,p=d.tickMax,m=V3.rangeStep(h,p.add(new An(.1).mul(f)),f);return n>r?eF(m):m}function iut(t,e){var n=w0(t,2),r=n[0],s=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Hre([r,s]),a=w0(o,2),l=a[0],c=a[1];if(l===-1/0||c===1/0)return[r,s];if(l===c)return[l];var u=Math.max(e,2),A=zre(new An(c).sub(l).div(u-1),i,0),d=[].concat(tF(V3.rangeStep(new An(l),new An(c).sub(new An(.99).mul(A)),A)),[c]);return r>s?eF(d):d}var out=Mre(sut),aut=Mre(iut),lut="Invariant failed";function tf(t,e){throw new Error(lut)}var cut=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Bp(t){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bp(t)}function rC(){return rC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rC.apply(this,arguments)}function uut(t,e){return hut(t)||fut(t,e)||dut(t,e)||Aut()}function Aut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dut(t,e){if(t){if(typeof t=="string")return uH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uH(t,e)}}function uH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fut(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function hut(t){if(Array.isArray(t))return t}function put(t,e){if(t==null)return{};var n=mut(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mut(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function gut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kre(r.key),r)}}function xut(t,e,n){return e&&yut(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vut(t,e,n){return e=sC(e),but(t,Wre()?Reflect.construct(e,n||[],sC(t).constructor):e.apply(t,n))}function but(t,e){if(e&&(Bp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wut(t)}function wut(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wre(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wre=function(){return!!t})()}function sC(t){return sC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sC(t)}function Cut(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rF(t,e)}function rF(t,e){return rF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},rF(t,e)}function Gre(t,e,n){return e=Kre(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kre(t){var e=Sut(t,"string");return Bp(e)=="symbol"?e:e+""}function Sut(t,e){if(Bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var W3=function(t){function e(){return gut(this,e),vut(this,e,arguments)}return Cut(e,t),xut(e,[{key:"render",value:function(){var r=this.props,s=r.offset,i=r.layout,o=r.width,a=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,A=r.yAxis,d=put(r,cut),f=ut(d,!1);this.props.direction==="x"&&u.type!=="number"&&tf();var h=l.map(function(p){var m=c(p,a),y=m.x,x=m.y,v=m.value,b=m.errorVal;if(!b)return null;var w=[],C,B;if(Array.isArray(b)){var S=uut(b,2);C=S[0],B=S[1]}else C=B=b;if(i==="vertical"){var N=u.scale,k=x+s,O=k+o,U=k-o,P=N(v-C),V=N(v+B);w.push({x1:V,y1:O,x2:V,y2:U}),w.push({x1:P,y1:k,x2:V,y2:k}),w.push({x1:P,y1:O,x2:P,y2:U})}else if(i==="horizontal"){var W=A.scale,j=y+s,G=j-o,D=j+o,M=W(v-C),q=W(v+B);w.push({x1:G,y1:q,x2:D,y2:q}),w.push({x1:j,y1:M,x2:j,y2:q}),w.push({x1:G,y1:M,x2:D,y2:M})}return ie.createElement(yn,rC({className:"recharts-errorBar",key:"bar-".concat(w.map(function(Z){return"".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))},f),w.map(function(Z){return ie.createElement("line",rC({},Z,{key:"line-".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))}))});return ie.createElement(yn,{className:"recharts-errorBars"},h)}}])}(ie.Component);Gre(W3,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Gre(W3,"displayName","ErrorBar");function C0(t){"@babel/helpers - typeof";return C0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C0(t)}function AH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function DA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AH(Object(n),!0).forEach(function(r){But(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function But(t,e,n){return e=Nut(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nut(t){var e=Eut(t,"string");return C0(e)=="symbol"?e:e+""}function Eut(t,e){if(C0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(C0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xre=function(e){var n=e.children,r=e.formattedGraphicalItems,s=e.legendWidth,i=e.legendContent,o=Ki(n,da);if(!o)return null;var a=da.defaultProps,l=a!==void 0?DA(DA({},a),o.props):{},c;return o.props&&o.props.payload?c=o.props&&o.props.payload:i==="children"?c=(r||[]).reduce(function(u,A){var d=A.item,f=A.props,h=f.sectors||f.data||[];return u.concat(h.map(function(p){return{type:o.props.iconType||d.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):c=(r||[]).map(function(u){var A=u.item,d=A.type.defaultProps,f=d!==void 0?DA(DA({},d),A.props):{},h=f.dataKey,p=f.name,m=f.legendType,y=f.hide;return{inactive:y,dataKey:h,type:l.iconType||m||"square",color:_P(A),value:p||h,payload:f}}),DA(DA(DA({},l),da.getWithHeight(o,s)),{},{payload:c,item:o})};function S0(t){"@babel/helpers - typeof";return S0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S0(t)}function dH(t){return Fut(t)||Tut(t)||kut(t)||Iut()}function Iut(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kut(t,e){if(t){if(typeof t=="string")return sF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sF(t,e)}}function Tut(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fut(t){if(Array.isArray(t))return sF(t)}function sF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function nr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fH(Object(n),!0).forEach(function(r){Dh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dh(t,e,n){return e=$ut(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ut(t){var e=_ut(t,"string");return S0(e)=="symbol"?e:e+""}function _ut(t,e){if(S0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(S0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vo(t,e,n){return Ht(t)||Ht(e)?n:Hr(e)?Uo(t,e,n):xt(e)?e(t):n}function dy(t,e,n,r){var s=Tct(t,function(a){return Vo(a,e)});if(n==="number"){var i=s.filter(function(a){return Ue(a)||parseFloat(a)});return i.length?[Q3(i),M3(i)]:[1/0,-1/0]}var o=r?s.filter(function(a){return!Ht(a)}):s;return o.map(function(a){return Hr(a)||a instanceof Date?a:""})}var Out=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var l=i.range,c=0;c<a;c++){var u=c>0?s[c-1].coordinate:s[a-1].coordinate,A=s[c].coordinate,d=c>=a-1?s[0].coordinate:s[c+1].coordinate,f=void 0;if(ha(A-u)!==ha(d-A)){var h=[];if(ha(d-A)===ha(l[1]-l[0])){f=d;var p=A+l[1]-l[0];h[0]=Math.min(p,(p+u)/2),h[1]=Math.max(p,(p+u)/2)}else{f=u;var m=d+l[1]-l[0];h[0]=Math.min(A,(m+A)/2),h[1]=Math.max(A,(m+A)/2)}var y=[Math.min(A,(f+A)/2),Math.max(A,(f+A)/2)];if(e>y[0]&&e<=y[1]||e>=h[0]&&e<=h[1]){o=s[c].index;break}}else{var x=Math.min(u,d),v=Math.max(u,d);if(e>(x+A)/2&&e<=(v+A)/2){o=s[c].index;break}}}else for(var b=0;b<a;b++)if(b===0&&e<=(r[b].coordinate+r[b+1].coordinate)/2||b>0&&b<a-1&&e>(r[b].coordinate+r[b-1].coordinate)/2&&e<=(r[b].coordinate+r[b+1].coordinate)/2||b===a-1&&e>(r[b].coordinate+r[b-1].coordinate)/2){o=r[b].index;break}return o},_P=function(e){var n,r=e,s=r.type.displayName,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?nr(nr({},e.type.defaultProps),e.props):e.props,o=i.stroke,a=i.fill,l;switch(s){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:a;break;default:l=a;break}return l},Dut=function(e){var n=e.barSize,r=e.totalSize,s=e.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},a=Object.keys(i),l=0,c=a.length;l<c;l++)for(var u=i[a[l]].stackGroups,A=Object.keys(u),d=0,f=A.length;d<f;d++){var h=u[A[d]],p=h.items,m=h.cateAxisId,y=p.filter(function(B){return ic(B.type).indexOf("Bar")>=0});if(y&&y.length){var x=y[0].type.defaultProps,v=x!==void 0?nr(nr({},x),y[0].props):y[0].props,b=v.barSize,w=v[m];o[w]||(o[w]=[]);var C=Ht(b)?n:b;o[w].push({item:y[0],stackList:y.slice(1),barSize:Ht(C)?void 0:pa(C,r,0)})}}return o},Rut=function(e){var n=e.barGap,r=e.barCategoryGap,s=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,a=e.maxBarSize,l=o.length;if(l<1)return null;var c=pa(n,s,0,!0),u,A=[];if(o[0].barSize===+o[0].barSize){var d=!1,f=s/l,h=o.reduce(function(b,w){return b+w.barSize||0},0);h+=(l-1)*c,h>=s&&(h-=(l-1)*c,c=0),h>=s&&f>0&&(d=!0,f*=.9,h=l*f);var p=(s-h)/2>>0,m={offset:p-c,size:0};u=o.reduce(function(b,w){var C={item:w.item,position:{offset:m.offset+m.size+c,size:d?f:w.barSize}},B=[].concat(dH(b),[C]);return m=B[B.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){B.push({item:S,position:m})}),B},A)}else{var y=pa(r,s,0,!0);s-2*y-(l-1)*c<=0&&(c=0);var x=(s-2*y-(l-1)*c)/l;x>1&&(x>>=0);var v=a===+a?Math.min(x,a):x;u=o.reduce(function(b,w,C){var B=[].concat(dH(b),[{item:w.item,position:{offset:y+(x+c)*C+(x-v)/2,size:v}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){B.push({item:S,position:B[B.length-1].position})}),B},A)}return u},Put=function(e,n,r,s){var i=r.children,o=r.width,a=r.margin,l=o-(a.left||0)-(a.right||0),c=Xre({children:i,legendWidth:l});if(c){var u=s||{},A=u.width,d=u.height,f=c.align,h=c.verticalAlign,p=c.layout;if((p==="vertical"||p==="horizontal"&&h==="middle")&&f!=="center"&&Ue(e[f]))return nr(nr({},e),{},Dh({},f,e[f]+(A||0)));if((p==="horizontal"||p==="vertical"&&f==="center")&&h!=="middle"&&Ue(e[h]))return nr(nr({},e),{},Dh({},h,e[h]+(d||0)))}return e},Uut=function(e,n,r){return Ht(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},qre=function(e,n,r,s,i){var o=n.props.children,a=wa(o,W3).filter(function(c){return Uut(s,i,c.props.direction)});if(a&&a.length){var l=a.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var A=Vo(u,r);if(Ht(A))return c;var d=Array.isArray(A)?[Q3(A),M3(A)]:[A,A],f=l.reduce(function(h,p){var m=Vo(u,p,0),y=d[0]-Math.abs(Array.isArray(m)?m[0]:m),x=d[1]+Math.abs(Array.isArray(m)?m[1]:m);return[Math.min(y,h[0]),Math.max(x,h[1])]},[1/0,-1/0]);return[Math.min(f[0],c[0]),Math.max(f[1],c[1])]},[1/0,-1/0])}return null},Lut=function(e,n,r,s,i){var o=n.map(function(a){return qre(e,a,r,i,s)}).filter(function(a){return!Ht(a)});return o&&o.length?o.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},Yre=function(e,n,r,s,i){var o=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&qre(e,l,c,s)||dy(e,c,r,i)});if(r==="number")return o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var a={};return o.reduce(function(l,c){for(var u=0,A=c.length;u<A;u++)a[c[u]]||(a[c[u]]=!0,l.push(c[u]));return l},[])},Jre=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},Zre=function(e,n,r,s){if(s)return e.map(function(l){return l.coordinate});var i,o,a=e.map(function(l){return l.coordinate===n&&(i=!0),l.coordinate===r&&(o=!0),l.coordinate});return i||a.push(n),o||a.push(r),a},ec=function(e,n,r){if(!e)return null;var s=e.scale,i=e.duplicateDomain,o=e.type,a=e.range,l=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,c=(n||r)&&o==="category"&&s.bandwidth?s.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?ha(a[0]-a[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(A){var d=i?i.indexOf(A):A;return{coordinate:s(d)+c,value:A,offset:c}});return u.filter(function(A){return!Tv(A.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(A,d){return{coordinate:s(A)+c,value:A,index:d,offset:c}}):s.ticks&&!r?s.ticks(e.tickCount).map(function(A){return{coordinate:s(A)+c,value:A,offset:c}}):s.domain().map(function(A,d){return{coordinate:s(A)+c,value:i?i[A]:A,index:d,offset:c}})},CE=new WeakMap,Eb=function(e,n){if(typeof n!="function")return e;CE.has(e)||CE.set(e,new WeakMap);var r=CE.get(e);if(r.has(n))return r.get(n);var s=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,s),s},ese=function(e,n,r){var s=e.scale,i=e.type,o=e.layout,a=e.axisType;if(s==="auto")return o==="radial"&&a==="radiusAxis"?{scale:m0(),realScaleType:"band"}:o==="radial"&&a==="angleAxis"?{scale:J2(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Ay(),realScaleType:"point"}:i==="category"?{scale:m0(),realScaleType:"band"}:{scale:J2(),realScaleType:"linear"};if(Zd(s)){var l="scale".concat(E3(s));return{scale:(oH[l]||Ay)(),realScaleType:oH[l]?l:"point"}}return xt(s)?{scale:s}:{scale:Ay(),realScaleType:"point"}},hH=1e-4,tse=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,s=e.range(),i=Math.min(s[0],s[1])-hH,o=Math.max(s[0],s[1])+hH,a=e(n[0]),l=e(n[r-1]);(a<i||a>o||l<i||l>o)&&e.domain([n[0],n[r-1]])}},jut=function(e,n){if(!e)return null;for(var r=0,s=e.length;r<s;r++)if(e[r].item===n)return e[r].position;return null},Mut=function(e,n){if(!n||n.length!==2||!Ue(n[0])||!Ue(n[1]))return e;var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),i=[e[0],e[1]];return(!Ue(e[0])||e[0]<r)&&(i[0]=r),(!Ue(e[1])||e[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<r&&(i[1]=r),i},Qut=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var i=0,o=0,a=0;a<n;++a){var l=Tv(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=i,e[a][r][1]=i+l,i=e[a][r][1]):(e[a][r][0]=o,e[a][r][1]=o+l,o=e[a][r][1])}},Hut=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var i=0,o=0;o<n;++o){var a=Tv(e[o][r][1])?e[o][r][0]:e[o][r][1];a>=0?(e[o][r][0]=i,e[o][r][1]=i+a,i=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},zut={sign:Qut,expand:aYe,none:mp,silhouette:lYe,wiggle:cYe,positive:Hut},Vut=function(e,n,r){var s=n.map(function(a){return a.props.dataKey}),i=zut[r],o=oYe().keys(s).value(function(a,l){return+Vo(a,l,0)}).order(kT).offset(i);return o(e)},Wut=function(e,n,r,s,i,o){if(!e)return null;var a=o?n.reverse():n,l={},c=a.reduce(function(A,d){var f,h=(f=d.type)!==null&&f!==void 0&&f.defaultProps?nr(nr({},d.type.defaultProps),d.props):d.props,p=h.stackId,m=h.hide;if(m)return A;var y=h[r],x=A[y]||{hasStack:!1,stackGroups:{}};if(Hr(p)){var v=x.stackGroups[p]||{numericAxisId:r,cateAxisId:s,items:[]};v.items.push(d),x.hasStack=!0,x.stackGroups[p]=v}else x.stackGroups[N3("_stackId_")]={numericAxisId:r,cateAxisId:s,items:[d]};return nr(nr({},A),{},Dh({},y,x))},l),u={};return Object.keys(c).reduce(function(A,d){var f=c[d];if(f.hasStack){var h={};f.stackGroups=Object.keys(f.stackGroups).reduce(function(p,m){var y=f.stackGroups[m];return nr(nr({},p),{},Dh({},m,{numericAxisId:r,cateAxisId:s,items:y.items,stackedData:Vut(e,y.items,i)}))},h)}return nr(nr({},A),{},Dh({},d,f))},u)},nse=function(e,n){var r=n.realScaleType,s=n.type,i=n.tickCount,o=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=out(c,i,a);return e.domain([Q3(u),M3(u)]),{niceTicks:u}}if(i&&s==="number"){var A=e.domain(),d=aut(A,i,a);return{niceTicks:d}}return null},pH=function(e){var n=e.axis,r=e.ticks,s=e.offset,i=e.bandSize,o=e.entry,a=e.index;if(n.type==="category")return r[a]?r[a].coordinate+s:null;var l=Vo(o,n.dataKey,n.domain[a]);return Ht(l)?null:n.scale(l)-i/2+s},Gut=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var s=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return s<=0&&i>=0?0:i<0?i:s}return r[0]},Kut=function(e,n){var r,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?nr(nr({},e.type.defaultProps),e.props):e.props,i=s.stackId;if(Hr(i)){var o=n[i];if(o){var a=o.items.indexOf(e);return a>=0?o.stackedData[a]:null}}return null},Xut=function(e){return e.reduce(function(n,r){return[Q3(r.concat([n[0]]).filter(Ue)),M3(r.concat([n[1]]).filter(Ue))]},[1/0,-1/0])},rse=function(e,n,r){return Object.keys(e).reduce(function(s,i){var o=e[i],a=o.stackedData,l=a.reduce(function(c,u){var A=Xut(u.slice(n,r+1));return[Math.min(c[0],A[0]),Math.max(c[1],A[1])]},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},mH=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,gH=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,iF=function(e,n,r){if(xt(e))return e(n,r);if(!Array.isArray(e))return n;var s=[];if(Ue(e[0]))s[0]=r?e[0]:Math.min(e[0],n[0]);else if(mH.test(e[0])){var i=+mH.exec(e[0])[1];s[0]=n[0]-i}else xt(e[0])?s[0]=e[0](n[0]):s[0]=n[0];if(Ue(e[1]))s[1]=r?e[1]:Math.max(e[1],n[1]);else if(gH.test(e[1])){var o=+gH.exec(e[1])[1];s[1]=n[1]+o}else xt(e[1])?s[1]=e[1](n[1]):s[1]=n[1];return s},iC=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!r||s>0)return s}if(e&&n&&n.length>=2){for(var i=aP(n,function(A){return A.coordinate}),o=1/0,a=1,l=i.length;a<l;a++){var c=i[a],u=i[a-1];o=Math.min((c.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},yH=function(e,n,r){return!e||!e.length||H3(e,Uo(r,"type.defaultProps.domain"))?n:e},sse=function(e,n){var r=e.type.defaultProps?nr(nr({},e.type.defaultProps),e.props):e.props,s=r.dataKey,i=r.name,o=r.unit,a=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return nr(nr({},ut(e,!1)),{},{dataKey:s,unit:o,formatter:a,name:i||s,color:_P(e),value:Vo(n,s),type:l,payload:n,chartType:c,hide:u})};function B0(t){"@babel/helpers - typeof";return B0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B0(t)}function xH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Pl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xH(Object(n),!0).forEach(function(r){ise(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ise(t,e,n){return e=qut(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qut(t){var e=Yut(t,"string");return B0(e)=="symbol"?e:e+""}function Yut(t,e){if(B0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(B0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jut(t,e){return nAt(t)||tAt(t,e)||eAt(t,e)||Zut()}function Zut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eAt(t,e){if(t){if(typeof t=="string")return vH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vH(t,e)}}function vH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tAt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function nAt(t){if(Array.isArray(t))return t}var oC=Math.PI/180,rAt=function(e){return e*180/Math.PI},pn=function(e,n,r,s){return{x:e+Math.cos(-oC*s)*r,y:n+Math.sin(-oC*s)*r}},sAt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},iAt=function(e,n,r,s,i){var o=e.width,a=e.height,l=e.startAngle,c=e.endAngle,u=pa(e.cx,o,o/2),A=pa(e.cy,a,a/2),d=sAt(o,a,r),f=pa(e.innerRadius,d,0),h=pa(e.outerRadius,d,d*.8),p=Object.keys(n);return p.reduce(function(m,y){var x=n[y],v=x.domain,b=x.reversed,w;if(Ht(x.range))s==="angleAxis"?w=[l,c]:s==="radiusAxis"&&(w=[f,h]),b&&(w=[w[1],w[0]]);else{w=x.range;var C=w,B=Jut(C,2);l=B[0],c=B[1]}var S=ese(x,i),N=S.realScaleType,k=S.scale;k.domain(v).range(w),tse(k);var O=nse(k,Pl(Pl({},x),{},{realScaleType:N})),U=Pl(Pl(Pl({},x),O),{},{range:w,radius:h,realScaleType:N,scale:k,cx:u,cy:A,innerRadius:f,outerRadius:h,startAngle:l,endAngle:c});return Pl(Pl({},m),{},ise({},y,U))},{})},oAt=function(e,n){var r=e.x,s=e.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(s-o,2))},aAt=function(e,n){var r=e.x,s=e.y,i=n.cx,o=n.cy,a=oAt({x:r,y:s},{x:i,y:o});if(a<=0)return{radius:a};var l=(r-i)/a,c=Math.acos(l);return s>o&&(c=2*Math.PI-c),{radius:a,angle:rAt(c),angleInRadian:c}},lAt=function(e){var n=e.startAngle,r=e.endAngle,s=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(s,i);return{startAngle:n-o*360,endAngle:r-o*360}},cAt=function(e,n){var r=n.startAngle,s=n.endAngle,i=Math.floor(r/360),o=Math.floor(s/360),a=Math.min(i,o);return e+a*360},bH=function(e,n){var r=e.x,s=e.y,i=aAt({x:r,y:s},n),o=i.radius,a=i.angle,l=n.innerRadius,c=n.outerRadius;if(o<l||o>c)return!1;if(o===0)return!0;var u=lAt(n),A=u.startAngle,d=u.endAngle,f=a,h;if(A<=d){for(;f>d;)f-=360;for(;f<A;)f+=360;h=f>=A&&f<=d}else{for(;f>A;)f-=360;for(;f<d;)f+=360;h=f>=d&&f<=A}return h?Pl(Pl({},n),{},{radius:o,angle:cAt(f,n)}):null},ose=function(e){return!z.isValidElement(e)&&!xt(e)&&typeof e!="boolean"?e.className:""};function N0(t){"@babel/helpers - typeof";return N0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N0(t)}var uAt=["offset"];function AAt(t){return pAt(t)||hAt(t)||fAt(t)||dAt()}function dAt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fAt(t,e){if(t){if(typeof t=="string")return oF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oF(t,e)}}function hAt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pAt(t){if(Array.isArray(t))return oF(t)}function oF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mAt(t,e){if(t==null)return{};var n=gAt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gAt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Dr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wH(Object(n),!0).forEach(function(r){yAt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yAt(t,e,n){return e=xAt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xAt(t){var e=vAt(t,"string");return N0(e)=="symbol"?e:e+""}function vAt(t,e){if(N0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(N0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function E0(){return E0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E0.apply(this,arguments)}var bAt=function(e){var n=e.value,r=e.formatter,s=Ht(e.children)?n:e.children;return xt(r)?r(s):s},wAt=function(e,n){var r=ha(n-e),s=Math.min(Math.abs(n-e),360);return r*s},CAt=function(e,n,r){var s=e.position,i=e.viewBox,o=e.offset,a=e.className,l=i,c=l.cx,u=l.cy,A=l.innerRadius,d=l.outerRadius,f=l.startAngle,h=l.endAngle,p=l.clockWise,m=(A+d)/2,y=wAt(f,h),x=y>=0?1:-1,v,b;s==="insideStart"?(v=f+x*o,b=p):s==="insideEnd"?(v=h-x*o,b=!p):s==="end"&&(v=h+x*o,b=p),b=y<=0?b:!b;var w=pn(c,u,m,v),C=pn(c,u,m,v+(b?1:-1)*359),B="M".concat(w.x,",").concat(w.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(b?0:1,`,
    `).concat(C.x,",").concat(C.y),S=Ht(e.id)?N3("recharts-radial-line-"):e.id;return ie.createElement("text",E0({},r,{dominantBaseline:"central",className:It("recharts-radial-bar-label",a)}),ie.createElement("defs",null,ie.createElement("path",{id:S,d:B})),ie.createElement("textPath",{xlinkHref:"#".concat(S)},n))},SAt=function(e){var n=e.viewBox,r=e.offset,s=e.position,i=n,o=i.cx,a=i.cy,l=i.innerRadius,c=i.outerRadius,u=i.startAngle,A=i.endAngle,d=(u+A)/2;if(s==="outside"){var f=pn(o,a,c+r,d),h=f.x,p=f.y;return{x:h,y:p,textAnchor:h>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var m=(l+c)/2,y=pn(o,a,m,d),x=y.x,v=y.y;return{x,y:v,textAnchor:"middle",verticalAnchor:"middle"}},BAt=function(e){var n=e.viewBox,r=e.parentViewBox,s=e.offset,i=e.position,o=n,a=o.x,l=o.y,c=o.width,u=o.height,A=u>=0?1:-1,d=A*s,f=A>0?"end":"start",h=A>0?"start":"end",p=c>=0?1:-1,m=p*s,y=p>0?"end":"start",x=p>0?"start":"end";if(i==="top"){var v={x:a+c/2,y:l-A*s,textAnchor:"middle",verticalAnchor:f};return Dr(Dr({},v),r?{height:Math.max(l-r.y,0),width:c}:{})}if(i==="bottom"){var b={x:a+c/2,y:l+u+d,textAnchor:"middle",verticalAnchor:h};return Dr(Dr({},b),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(i==="left"){var w={x:a-m,y:l+u/2,textAnchor:y,verticalAnchor:"middle"};return Dr(Dr({},w),r?{width:Math.max(w.x-r.x,0),height:u}:{})}if(i==="right"){var C={x:a+c+m,y:l+u/2,textAnchor:x,verticalAnchor:"middle"};return Dr(Dr({},C),r?{width:Math.max(r.x+r.width-C.x,0),height:u}:{})}var B=r?{width:c,height:u}:{};return i==="insideLeft"?Dr({x:a+m,y:l+u/2,textAnchor:x,verticalAnchor:"middle"},B):i==="insideRight"?Dr({x:a+c-m,y:l+u/2,textAnchor:y,verticalAnchor:"middle"},B):i==="insideTop"?Dr({x:a+c/2,y:l+d,textAnchor:"middle",verticalAnchor:h},B):i==="insideBottom"?Dr({x:a+c/2,y:l+u-d,textAnchor:"middle",verticalAnchor:f},B):i==="insideTopLeft"?Dr({x:a+m,y:l+d,textAnchor:x,verticalAnchor:h},B):i==="insideTopRight"?Dr({x:a+c-m,y:l+d,textAnchor:y,verticalAnchor:h},B):i==="insideBottomLeft"?Dr({x:a+m,y:l+u-d,textAnchor:x,verticalAnchor:f},B):i==="insideBottomRight"?Dr({x:a+c-m,y:l+u-d,textAnchor:y,verticalAnchor:f},B):mm(i)&&(Ue(i.x)||od(i.x))&&(Ue(i.y)||od(i.y))?Dr({x:a+pa(i.x,c),y:l+pa(i.y,u),textAnchor:"end",verticalAnchor:"end"},B):Dr({x:a+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},B)},NAt=function(e){return"cx"in e&&Ue(e.cx)};function ps(t){var e=t.offset,n=e===void 0?5:e,r=mAt(t,uAt),s=Dr({offset:n},r),i=s.viewBox,o=s.position,a=s.value,l=s.children,c=s.content,u=s.className,A=u===void 0?"":u,d=s.textBreakAll;if(!i||Ht(a)&&Ht(l)&&!z.isValidElement(c)&&!xt(c))return null;if(z.isValidElement(c))return z.cloneElement(c,s);var f;if(xt(c)){if(f=z.createElement(c,s),z.isValidElement(f))return f}else f=bAt(s);var h=NAt(i),p=ut(s,!0);if(h&&(o==="insideStart"||o==="insideEnd"||o==="end"))return CAt(s,f,p);var m=h?SAt(s):BAt(s);return ie.createElement(bp,E0({className:It("recharts-label",A)},p,m,{breakAll:d}),f)}ps.displayName="Label";var ase=function(e){var n=e.cx,r=e.cy,s=e.angle,i=e.startAngle,o=e.endAngle,a=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,A=e.x,d=e.y,f=e.top,h=e.left,p=e.width,m=e.height,y=e.clockWise,x=e.labelViewBox;if(x)return x;if(Ue(p)&&Ue(m)){if(Ue(A)&&Ue(d))return{x:A,y:d,width:p,height:m};if(Ue(f)&&Ue(h))return{x:f,y:h,width:p,height:m}}return Ue(A)&&Ue(d)?{x:A,y:d,width:0,height:0}:Ue(n)&&Ue(r)?{cx:n,cy:r,startAngle:i||s||0,endAngle:o||s||0,innerRadius:c||0,outerRadius:u||l||a||0,clockWise:y}:e.viewBox?e.viewBox:{}},EAt=function(e,n){return e?e===!0?ie.createElement(ps,{key:"label-implicit",viewBox:n}):Hr(e)?ie.createElement(ps,{key:"label-implicit",viewBox:n,value:e}):z.isValidElement(e)?e.type===ps?z.cloneElement(e,{key:"label-implicit",viewBox:n}):ie.createElement(ps,{key:"label-implicit",content:e,viewBox:n}):xt(e)?ie.createElement(ps,{key:"label-implicit",content:e,viewBox:n}):mm(e)?ie.createElement(ps,E0({viewBox:n},e,{key:"label-implicit"})):null:null},IAt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,i=ase(e),o=wa(s,ps).map(function(l,c){return z.cloneElement(l,{viewBox:n||i,key:"label-".concat(c)})});if(!r)return o;var a=EAt(e.label,n||i);return[a].concat(AAt(o))};ps.parseViewBox=ase;ps.renderCallByParent=IAt;function kAt(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var TAt=kAt;const lse=Gt(TAt);function I0(t){"@babel/helpers - typeof";return I0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I0(t)}var FAt=["valueAccessor"],$At=["data","dataKey","clockWise","id","textBreakAll"];function _At(t){return PAt(t)||RAt(t)||DAt(t)||OAt()}function OAt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DAt(t,e){if(t){if(typeof t=="string")return aF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aF(t,e)}}function RAt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function PAt(t){if(Array.isArray(t))return aF(t)}function aF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aC(){return aC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aC.apply(this,arguments)}function CH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function SH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CH(Object(n),!0).forEach(function(r){UAt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UAt(t,e,n){return e=LAt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LAt(t){var e=jAt(t,"string");return I0(e)=="symbol"?e:e+""}function jAt(t,e){if(I0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(I0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BH(t,e){if(t==null)return{};var n=MAt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function MAt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var QAt=function(e){return Array.isArray(e.value)?lse(e.value):e.value};function Pu(t){var e=t.valueAccessor,n=e===void 0?QAt:e,r=BH(t,FAt),s=r.data,i=r.dataKey,o=r.clockWise,a=r.id,l=r.textBreakAll,c=BH(r,$At);return!s||!s.length?null:ie.createElement(yn,{className:"recharts-label-list"},s.map(function(u,A){var d=Ht(i)?n(u,A):Vo(u&&u.payload,i),f=Ht(a)?{}:{id:"".concat(a,"-").concat(A)};return ie.createElement(ps,aC({},ut(u,!0),c,f,{parentViewBox:u.parentViewBox,value:d,textBreakAll:l,viewBox:ps.parseViewBox(Ht(o)?u:SH(SH({},u),{},{clockWise:o})),key:"label-".concat(A),index:A}))}))}Pu.displayName="LabelList";function HAt(t,e){return t?t===!0?ie.createElement(Pu,{key:"labelList-implicit",data:e}):ie.isValidElement(t)||xt(t)?ie.createElement(Pu,{key:"labelList-implicit",data:e,content:t}):mm(t)?ie.createElement(Pu,aC({data:e},t,{key:"labelList-implicit"})):null:null}function zAt(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,s=wa(r,Pu).map(function(o,a){return z.cloneElement(o,{data:e,key:"labelList-".concat(a)})});if(!n)return s;var i=HAt(t.label,e);return[i].concat(_At(s))}Pu.renderCallByParent=zAt;function k0(t){"@babel/helpers - typeof";return k0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k0(t)}function lF(){return lF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lF.apply(this,arguments)}function NH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function EH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NH(Object(n),!0).forEach(function(r){VAt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VAt(t,e,n){return e=WAt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WAt(t){var e=GAt(t,"string");return k0(e)=="symbol"?e:e+""}function GAt(t,e){if(k0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(k0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KAt=function(e,n){var r=ha(n-e),s=Math.min(Math.abs(n-e),359.999);return r*s},Ib=function(e){var n=e.cx,r=e.cy,s=e.radius,i=e.angle,o=e.sign,a=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(a?1:-1)+s,A=Math.asin(l/u)/oC,d=c?i:i+o*A,f=pn(n,r,u,d),h=pn(n,r,s,d),p=c?i-o*A:i,m=pn(n,r,u*Math.cos(A*oC),p);return{center:f,circleTangency:h,lineTangency:m,theta:A}},cse=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.startAngle,a=e.endAngle,l=KAt(o,a),c=o+l,u=pn(n,r,i,o),A=pn(n,r,i,c),d="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>c),`,
    `).concat(A.x,",").concat(A.y,`
  `);if(s>0){var f=pn(n,r,s,o),h=pn(n,r,s,c);d+="L ".concat(h.x,",").concat(h.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else d+="L ".concat(n,",").concat(r," Z");return d},XAt=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,A=ha(u-c),d=Ib({cx:n,cy:r,radius:i,angle:c,sign:A,cornerRadius:o,cornerIsExternal:l}),f=d.circleTangency,h=d.lineTangency,p=d.theta,m=Ib({cx:n,cy:r,radius:i,angle:u,sign:-A,cornerRadius:o,cornerIsExternal:l}),y=m.circleTangency,x=m.lineTangency,v=m.theta,b=l?Math.abs(c-u):Math.abs(c-u)-p-v;if(b<0)return a?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):cse({cx:n,cy:r,innerRadius:s,outerRadius:i,startAngle:c,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(A<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(A<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(A<0),",").concat(x.x,",").concat(x.y,`
  `);if(s>0){var C=Ib({cx:n,cy:r,radius:s,angle:c,sign:A,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),B=C.circleTangency,S=C.lineTangency,N=C.theta,k=Ib({cx:n,cy:r,radius:s,angle:u,sign:-A,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),O=k.circleTangency,U=k.lineTangency,P=k.theta,V=l?Math.abs(c-u):Math.abs(c-u)-N-P;if(V<0&&o===0)return"".concat(w,"L").concat(n,",").concat(r,"Z");w+="L".concat(U.x,",").concat(U.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(A<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(V>180),",").concat(+(A>0),",").concat(B.x,",").concat(B.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(A<0),",").concat(S.x,",").concat(S.y,"Z")}else w+="L".concat(n,",").concat(r,"Z");return w},qAt={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},use=function(e){var n=EH(EH({},qAt),e),r=n.cx,s=n.cy,i=n.innerRadius,o=n.outerRadius,a=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,u=n.startAngle,A=n.endAngle,d=n.className;if(o<i||u===A)return null;var f=It("recharts-sector",d),h=o-i,p=pa(a,h,0,!0),m;return p>0&&Math.abs(u-A)<360?m=XAt({cx:r,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(p,h/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:A}):m=cse({cx:r,cy:s,innerRadius:i,outerRadius:o,startAngle:u,endAngle:A}),ie.createElement("path",lF({},ut(n,!0),{className:f,d:m,role:"img"}))};function T0(t){"@babel/helpers - typeof";return T0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T0(t)}function cF(){return cF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cF.apply(this,arguments)}function IH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function kH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IH(Object(n),!0).forEach(function(r){YAt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YAt(t,e,n){return e=JAt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JAt(t){var e=ZAt(t,"string");return T0(e)=="symbol"?e:e+""}function ZAt(t,e){if(T0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(T0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var TH={curveBasisClosed:Xqe,curveBasisOpen:qqe,curveBasis:Kqe,curveBumpX:Oqe,curveBumpY:Dqe,curveLinearClosed:Yqe,curveLinear:k3,curveMonotoneX:Jqe,curveMonotoneY:Zqe,curveNatural:eYe,curveStep:tYe,curveStepAfter:rYe,curveStepBefore:nYe},kb=function(e){return e.x===+e.x&&e.y===+e.y},mg=function(e){return e.x},gg=function(e){return e.y},edt=function(e,n){if(xt(e))return e;var r="curve".concat(E3(e));return(r==="curveMonotone"||r==="curveBump")&&n?TH["".concat(r).concat(n==="vertical"?"Y":"X")]:TH[r]||k3},tdt=function(e){var n=e.type,r=n===void 0?"linear":n,s=e.points,i=s===void 0?[]:s,o=e.baseLine,a=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=edt(r,a),A=c?i.filter(function(p){return kb(p)}):i,d;if(Array.isArray(o)){var f=c?o.filter(function(p){return kb(p)}):o,h=A.map(function(p,m){return kH(kH({},p),{},{base:f[m]})});return a==="vertical"?d=xb().y(gg).x1(mg).x0(function(p){return p.base.x}):d=xb().x(mg).y1(gg).y0(function(p){return p.base.y}),d.defined(kb).curve(u),d(h)}return a==="vertical"&&Ue(o)?d=xb().y(gg).x1(mg).x0(o):Ue(o)?d=xb().x(mg).y1(gg).y0(o):d=rne().x(mg).y(gg),d.defined(kb).curve(u),d(A)},FH=function(e){var n=e.className,r=e.points,s=e.path,i=e.pathRef;if((!r||!r.length)&&!s)return null;var o=r&&r.length?tdt(e):s;return z.createElement("path",cF({},ut(e,!1),$2(e),{className:It("recharts-curve",n),d:o,ref:i}))},Ase={exports:{}},ndt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rdt=ndt,sdt=rdt;function dse(){}function fse(){}fse.resetWarningCache=dse;var idt=function(){function t(r,s,i,o,a,l){if(l!==sdt){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:fse,resetWarningCache:dse};return n.PropTypes=n,n};Ase.exports=idt();var odt=Ase.exports;const Jt=Gt(odt);var adt=Object.getOwnPropertyNames,ldt=Object.getOwnPropertySymbols,cdt=Object.prototype.hasOwnProperty;function $H(t,e){return function(r,s,i){return t(r,s,i)&&e(r,s,i)}}function Tb(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);var i=s.cache,o=i.get(n),a=i.get(r);if(o&&a)return o===r&&a===n;i.set(n,r),i.set(r,n);var l=t(n,r,s);return i.delete(n),i.delete(r),l}}function udt(t){return t!=null?t[Symbol.toStringTag]:void 0}function _H(t){return adt(t).concat(ldt(t))}var Adt=Object.hasOwn||function(t,e){return cdt.call(t,e)};function wf(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var ddt="__v",fdt="__o",hdt="_owner",OH=Object.getOwnPropertyDescriptor,DH=Object.keys;function pdt(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function mdt(t,e){return wf(t.getTime(),e.getTime())}function gdt(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function ydt(t,e){return t===e}function RH(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),i=t.entries(),o,a,l=0;(o=i.next())&&!o.done;){for(var c=e.entries(),u=!1,A=0;(a=c.next())&&!a.done;){if(s[A]){A++;continue}var d=o.value,f=a.value;if(n.equals(d[0],f[0],l,A,t,e,n)&&n.equals(d[1],f[1],d[0],f[0],t,e,n)){u=s[A]=!0;break}A++}if(!u)return!1;l++}return!0}var xdt=wf;function vdt(t,e,n){var r=DH(t),s=r.length;if(DH(e).length!==s)return!1;for(;s-- >0;)if(!hse(t,e,n,r[s]))return!1;return!0}function yg(t,e,n){var r=_H(t),s=r.length;if(_H(e).length!==s)return!1;for(var i,o,a;s-- >0;)if(i=r[s],!hse(t,e,n,i)||(o=OH(t,i),a=OH(e,i),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function bdt(t,e){return wf(t.valueOf(),e.valueOf())}function wdt(t,e){return t.source===e.source&&t.flags===e.flags}function PH(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),i=t.values(),o,a;(o=i.next())&&!o.done;){for(var l=e.values(),c=!1,u=0;(a=l.next())&&!a.done;){if(!s[u]&&n.equals(o.value,a.value,o.value,a.value,t,e,n)){c=s[u]=!0;break}u++}if(!c)return!1}return!0}function Cdt(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function Sdt(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function hse(t,e,n,r){return(r===hdt||r===fdt||r===ddt)&&(t.$$typeof||e.$$typeof)?!0:Adt(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var Bdt="[object Arguments]",Ndt="[object Boolean]",Edt="[object Date]",Idt="[object Error]",kdt="[object Map]",Tdt="[object Number]",Fdt="[object Object]",$dt="[object RegExp]",_dt="[object Set]",Odt="[object String]",Ddt="[object URL]",Rdt=Array.isArray,UH=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,LH=Object.assign,Pdt=Object.prototype.toString.call.bind(Object.prototype.toString);function Udt(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,s=t.areFunctionsEqual,i=t.areMapsEqual,o=t.areNumbersEqual,a=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,c=t.areRegExpsEqual,u=t.areSetsEqual,A=t.areTypedArraysEqual,d=t.areUrlsEqual,f=t.unknownTagComparators;return function(p,m,y){if(p===m)return!0;if(p==null||m==null)return!1;var x=typeof p;if(x!==typeof m)return!1;if(x!=="object")return x==="number"?o(p,m,y):x==="function"?s(p,m,y):!1;var v=p.constructor;if(v!==m.constructor)return!1;if(v===Object)return a(p,m,y);if(Rdt(p))return e(p,m,y);if(UH!=null&&UH(p))return A(p,m,y);if(v===Date)return n(p,m,y);if(v===RegExp)return c(p,m,y);if(v===Map)return i(p,m,y);if(v===Set)return u(p,m,y);var b=Pdt(p);if(b===Edt)return n(p,m,y);if(b===$dt)return c(p,m,y);if(b===kdt)return i(p,m,y);if(b===_dt)return u(p,m,y);if(b===Fdt)return typeof p.then!="function"&&typeof m.then!="function"&&a(p,m,y);if(b===Ddt)return d(p,m,y);if(b===Idt)return r(p,m,y);if(b===Bdt)return a(p,m,y);if(b===Ndt||b===Tdt||b===Odt)return l(p,m,y);if(f){var w=f[b];if(!w){var C=udt(p);C&&(w=f[C])}if(w)return w(p,m,y)}return!1}}function Ldt(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,s={areArraysEqual:r?yg:pdt,areDatesEqual:mdt,areErrorsEqual:gdt,areFunctionsEqual:ydt,areMapsEqual:r?$H(RH,yg):RH,areNumbersEqual:xdt,areObjectsEqual:r?yg:vdt,arePrimitiveWrappersEqual:bdt,areRegExpsEqual:wdt,areSetsEqual:r?$H(PH,yg):PH,areTypedArraysEqual:r?yg:Cdt,areUrlsEqual:Sdt,unknownTagComparators:void 0};if(n&&(s=LH({},s,n(s))),e){var i=Tb(s.areArraysEqual),o=Tb(s.areMapsEqual),a=Tb(s.areObjectsEqual),l=Tb(s.areSetsEqual);s=LH({},s,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:l})}return s}function jdt(t){return function(e,n,r,s,i,o,a){return t(e,n,a)}}function Mdt(t){var e=t.circular,n=t.comparator,r=t.createState,s=t.equals,i=t.strict;if(r)return function(l,c){var u=r(),A=u.cache,d=A===void 0?e?new WeakMap:void 0:A,f=u.meta;return n(l,c,{cache:d,equals:s,meta:f,strict:i})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var o={cache:void 0,equals:s,meta:void 0,strict:i};return function(l,c){return n(l,c,o)}}var Qdt=vA();vA({strict:!0});vA({circular:!0});vA({circular:!0,strict:!0});vA({createInternalComparator:function(){return wf}});vA({strict:!0,createInternalComparator:function(){return wf}});vA({circular:!0,createInternalComparator:function(){return wf}});vA({circular:!0,createInternalComparator:function(){return wf},strict:!0});function vA(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,s=t.createState,i=t.strict,o=i===void 0?!1:i,a=Ldt(t),l=Udt(a),c=r?r(l):jdt(l);return Mdt({circular:n,comparator:l,createState:s,equals:c,strict:o})}function Hdt(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function jH(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function s(i){n<0&&(n=i),i-n>e?(t(i),n=-1):Hdt(s)};requestAnimationFrame(r)}function uF(t){"@babel/helpers - typeof";return uF=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uF(t)}function zdt(t){return Kdt(t)||Gdt(t)||Wdt(t)||Vdt()}function Vdt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wdt(t,e){if(t){if(typeof t=="string")return MH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MH(t,e)}}function MH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gdt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Kdt(t){if(Array.isArray(t))return t}function Xdt(){var t={},e=function(){return null},n=!1,r=function s(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,a=zdt(o),l=a[0],c=a.slice(1);if(typeof l=="number"){jH(s.bind(null,c),l);return}s(l),jH(s.bind(null,c));return}uF(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,r(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function F0(t){"@babel/helpers - typeof";return F0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F0(t)}function QH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function HH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QH(Object(n),!0).forEach(function(r){pse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pse(t,e,n){return e=qdt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qdt(t){var e=Ydt(t,"string");return F0(e)==="symbol"?e:String(e)}function Ydt(t,e){if(F0(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(F0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jdt=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,s){return r.filter(function(i){return s.includes(i)})})},Zdt=function(e){return e},eft=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},fy=function(e,n){return Object.keys(n).reduce(function(r,s){return HH(HH({},r),{},pse({},s,e(s,n[s])))},{})},zH=function(e,n,r){return e.map(function(s){return"".concat(eft(s)," ").concat(n,"ms ").concat(r)}).join(",")};function tft(t,e){return sft(t)||rft(t,e)||mse(t,e)||nft()}function nft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rft(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function sft(t){if(Array.isArray(t))return t}function ift(t){return lft(t)||aft(t)||mse(t)||oft()}function oft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mse(t,e){if(t){if(typeof t=="string")return AF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AF(t,e)}}function aft(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lft(t){if(Array.isArray(t))return AF(t)}function AF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var lC=1e-4,gse=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},yse=function(e,n){return e.map(function(r,s){return r*Math.pow(n,s)}).reduce(function(r,s){return r+s})},VH=function(e,n){return function(r){var s=gse(e,n);return yse(s,r)}},cft=function(e,n){return function(r){var s=gse(e,n),i=[].concat(ift(s.map(function(o,a){return o*a}).slice(1)),[0]);return yse(i,r)}},WH=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0],i=n[1],o=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,i=0,o=1,a=1;break;case"ease":s=.25,i=.1,o=.25,a=1;break;case"ease-in":s=.42,i=0,o=1,a=1;break;case"ease-out":s=.42,i=0,o=.58,a=1;break;case"ease-in-out":s=0,i=0,o=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(m){return parseFloat(m)}),u=tft(c,4);s=u[0],i=u[1],o=u[2],a=u[3]}}}var A=VH(s,o),d=VH(i,a),f=cft(s,o),h=function(y){return y>1?1:y<0?0:y},p=function(y){for(var x=y>1?1:y,v=x,b=0;b<8;++b){var w=A(v)-x,C=f(v);if(Math.abs(w-x)<lC||C<lC)return d(v);v=h(v-w/C)}return d(v)};return p.isStepper=!1,p},uft=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,s=e.damping,i=s===void 0?8:s,o=e.dt,a=o===void 0?17:o,l=function(u,A,d){var f=-(u-A)*r,h=d*i,p=d+(f-h)*a/1e3,m=d*a/1e3+u;return Math.abs(m-A)<lC&&Math.abs(p)<lC?[A,0]:[m,p]};return l.isStepper=!0,l.dt=a,l},Aft=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return WH(s);case"spring":return uft();default:if(s.split("(")[0]==="cubic-bezier")return WH(s)}return typeof s=="function"?s:null};function $0(t){"@babel/helpers - typeof";return $0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$0(t)}function GH(t){return hft(t)||fft(t)||xse(t)||dft()}function dft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fft(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hft(t){if(Array.isArray(t))return fF(t)}function KH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ds(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KH(Object(n),!0).forEach(function(r){dF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dF(t,e,n){return e=pft(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pft(t){var e=mft(t,"string");return $0(e)==="symbol"?e:String(e)}function mft(t,e){if($0(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gft(t,e){return vft(t)||xft(t,e)||xse(t,e)||yft()}function yft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xse(t,e){if(t){if(typeof t=="string")return fF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fF(t,e)}}function fF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xft(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function vft(t){if(Array.isArray(t))return t}var cC=function(e,n,r){return e+(n-e)*r},hF=function(e){var n=e.from,r=e.to;return n!==r},bft=function t(e,n,r){var s=fy(function(i,o){if(hF(o)){var a=e(o.from,o.to,o.velocity),l=gft(a,2),c=l[0],u=l[1];return ds(ds({},o),{},{from:c,velocity:u})}return o},n);return r<1?fy(function(i,o){return hF(o)?ds(ds({},o),{},{velocity:cC(o.velocity,s[i].velocity,r),from:cC(o.from,s[i].from,r)}):o},n):t(e,s,r-1)};const wft=function(t,e,n,r,s){var i=Jdt(t,e),o=i.reduce(function(m,y){return ds(ds({},m),{},dF({},y,[t[y],e[y]]))},{}),a=i.reduce(function(m,y){return ds(ds({},m),{},dF({},y,{from:t[y],velocity:0,to:e[y]}))},{}),l=-1,c,u,A=function(){return null},d=function(){return fy(function(y,x){return x.from},a)},f=function(){return!Object.values(a).filter(hF).length},h=function(y){c||(c=y);var x=y-c,v=x/n.dt;a=bft(n,a,v),s(ds(ds(ds({},t),e),d())),c=y,f()||(l=requestAnimationFrame(A))},p=function(y){u||(u=y);var x=(y-u)/r,v=fy(function(w,C){return cC.apply(void 0,GH(C).concat([n(x)]))},o);if(s(ds(ds(ds({},t),e),v)),x<1)l=requestAnimationFrame(A);else{var b=fy(function(w,C){return cC.apply(void 0,GH(C).concat([n(1)]))},o);s(ds(ds(ds({},t),e),b))}};return A=n.isStepper?h:p,function(){return requestAnimationFrame(A),function(){cancelAnimationFrame(l)}}};function Np(t){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Np(t)}var Cft=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Sft(t,e){if(t==null)return{};var n=Bft(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Bft(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function SE(t){return kft(t)||Ift(t)||Eft(t)||Nft()}function Nft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eft(t,e){if(t){if(typeof t=="string")return pF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pF(t,e)}}function Ift(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kft(t){if(Array.isArray(t))return pF(t)}function pF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function XH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ea(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XH(Object(n),!0).forEach(function(r){Hg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hg(t,e,n){return e=vse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vse(r.key),r)}}function $ft(t,e,n){return e&&Fft(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vse(t){var e=_ft(t,"string");return Np(e)==="symbol"?e:String(e)}function _ft(t,e){if(Np(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Np(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Oft(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mF(t,e)}function mF(t,e){return mF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},mF(t,e)}function Dft(t){var e=Rft();return function(){var r=uC(t),s;if(e){var i=uC(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return gF(this,s)}}function gF(t,e){if(e&&(Np(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yF(t)}function yF(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rft(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function uC(t){return uC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uC(t)}var wc=function(t){Oft(n,t);var e=Dft(n);function n(r,s){var i;Tft(this,n),i=e.call(this,r,s);var o=i.props,a=o.isActive,l=o.attributeName,c=o.from,u=o.to,A=o.steps,d=o.children,f=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(yF(i)),i.changeStyle=i.changeStyle.bind(yF(i)),!a||f<=0)return i.state={style:{}},typeof d=="function"&&(i.state={style:u}),gF(i);if(A&&A.length)i.state={style:A[0].style};else if(c){if(typeof d=="function")return i.state={style:c},gF(i);i.state={style:l?Hg({},l,c):c}}else i.state={style:{}};return i}return $ft(n,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,a=i.canBegin,l=i.attributeName,c=i.shouldReAnimate,u=i.to,A=i.from,d=this.state.style;if(a){if(!o){var f={style:l?Hg({},l,u):u};this.state&&d&&(l&&d[l]!==u||!l&&d!==u)&&this.setState(f);return}if(!(Qdt(s.to,u)&&s.canBegin&&s.isActive)){var h=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=h||c?A:s.to;if(this.state&&d){var m={style:l?Hg({},l,p):p};(l&&d[l]!==p||!l&&d!==p)&&this.setState(m)}this.runAnimation(ea(ea({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,a=s.to,l=s.duration,c=s.easing,u=s.begin,A=s.onAnimationEnd,d=s.onAnimationStart,f=wft(o,a,Aft(c),l,this.changeStyle),h=function(){i.stopJSAnimation=f()};this.manager.start([d,u,h,l,A])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,a=s.begin,l=s.onAnimationStart,c=o[0],u=c.style,A=c.duration,d=A===void 0?0:A,f=function(p,m,y){if(y===0)return p;var x=m.duration,v=m.easing,b=v===void 0?"ease":v,w=m.style,C=m.properties,B=m.onAnimationEnd,S=y>0?o[y-1]:m,N=C||Object.keys(w);if(typeof b=="function"||b==="spring")return[].concat(SE(p),[i.runJSAnimation.bind(i,{from:S.style,to:w,duration:x,easing:b}),x]);var k=zH(N,x,b),O=ea(ea(ea({},S.style),w),{},{transition:k});return[].concat(SE(p),[O,x,B]).filter(Zdt)};return this.manager.start([l].concat(SE(o.reduce(f,[u,Math.max(d,a)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=Xdt());var i=s.begin,o=s.duration,a=s.attributeName,l=s.to,c=s.easing,u=s.onAnimationStart,A=s.onAnimationEnd,d=s.steps,f=s.children,h=this.manager;if(this.unSubscribe=h.subscribe(this.handleStyleChange),typeof c=="function"||typeof f=="function"||c==="spring"){this.runJSAnimation(s);return}if(d.length>1){this.runStepAnimation(s);return}var p=a?Hg({},a,l):l,m=zH(Object.keys(p),o,c);h.start([u,i,ea(ea({},p),{},{transition:m}),o,A])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var a=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var l=Sft(s,Cft),c=z.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!a||c===0||o<=0)return i;var A=function(f){var h=f.props,p=h.style,m=p===void 0?{}:p,y=h.className,x=z.cloneElement(f,ea(ea({},l),{},{style:ea(ea({},m),u),className:y}));return x};return c===1?A(z.Children.only(i)):ie.createElement("div",null,z.Children.map(i,function(d){return A(d)}))}}]),n}(z.PureComponent);wc.displayName="Animate";wc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};wc.propTypes={from:Jt.oneOfType([Jt.object,Jt.string]),to:Jt.oneOfType([Jt.object,Jt.string]),attributeName:Jt.string,duration:Jt.number,begin:Jt.number,easing:Jt.oneOfType([Jt.string,Jt.func]),steps:Jt.arrayOf(Jt.shape({duration:Jt.number.isRequired,style:Jt.object.isRequired,easing:Jt.oneOfType([Jt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Jt.func]),properties:Jt.arrayOf("string"),onAnimationEnd:Jt.func})),children:Jt.oneOfType([Jt.node,Jt.func]),isActive:Jt.bool,canBegin:Jt.bool,onAnimationEnd:Jt.func,shouldReAnimate:Jt.bool,onAnimationStart:Jt.func,onAnimationReStart:Jt.func};function _0(t){"@babel/helpers - typeof";return _0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_0(t)}function AC(){return AC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AC.apply(this,arguments)}function Pft(t,e){return Mft(t)||jft(t,e)||Lft(t,e)||Uft()}function Uft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lft(t,e){if(t){if(typeof t=="string")return qH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qH(t,e)}}function qH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jft(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function Mft(t){if(Array.isArray(t))return t}function YH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function JH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YH(Object(n),!0).forEach(function(r){Qft(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qft(t,e,n){return e=Hft(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hft(t){var e=zft(t,"string");return _0(e)=="symbol"?e:e+""}function zft(t,e){if(_0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZH=function(e,n,r,s,i){var o=Math.min(Math.abs(r)/2,Math.abs(s)/2),a=s>=0?1:-1,l=r>=0?1:-1,c=s>=0&&r>=0||s<0&&r<0?1:0,u;if(o>0&&i instanceof Array){for(var A=[0,0,0,0],d=0,f=4;d<f;d++)A[d]=i[d]>o?o:i[d];u="M".concat(e,",").concat(n+a*A[0]),A[0]>0&&(u+="A ".concat(A[0],",").concat(A[0],",0,0,").concat(c,",").concat(e+l*A[0],",").concat(n)),u+="L ".concat(e+r-l*A[1],",").concat(n),A[1]>0&&(u+="A ".concat(A[1],",").concat(A[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+a*A[1])),u+="L ".concat(e+r,",").concat(n+s-a*A[2]),A[2]>0&&(u+="A ".concat(A[2],",").concat(A[2],",0,0,").concat(c,`,
        `).concat(e+r-l*A[2],",").concat(n+s)),u+="L ".concat(e+l*A[3],",").concat(n+s),A[3]>0&&(u+="A ".concat(A[3],",").concat(A[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+s-a*A[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var h=Math.min(o,i);u="M ".concat(e,",").concat(n+a*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(n,`
            L `).concat(e+r-l*h,",").concat(n,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r,",").concat(n+a*h,`
            L `).concat(e+r,",").concat(n+s-a*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r-l*h,",").concat(n+s,`
            L `).concat(e+l*h,",").concat(n+s,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(n+s-a*h," Z")}else u="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return u},Vft=function(e,n){if(!e||!n)return!1;var r=e.x,s=e.y,i=n.x,o=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var c=Math.min(i,i+a),u=Math.max(i,i+a),A=Math.min(o,o+l),d=Math.max(o,o+l);return r>=c&&r<=u&&s>=A&&s<=d}return!1},Wft={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},OP=function(e){var n=JH(JH({},Wft),e),r=z.useRef(),s=z.useState(-1),i=Pft(s,2),o=i[0],a=i[1];z.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var l=n.x,c=n.y,u=n.width,A=n.height,d=n.radius,f=n.className,h=n.animationEasing,p=n.animationDuration,m=n.animationBegin,y=n.isAnimationActive,x=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||A!==+A||u===0||A===0)return null;var v=It("recharts-rectangle",f);return x?ie.createElement(wc,{canBegin:o>0,from:{width:u,height:A,x:l,y:c},to:{width:u,height:A,x:l,y:c},duration:p,animationEasing:h,isActive:x},function(b){var w=b.width,C=b.height,B=b.x,S=b.y;return ie.createElement(wc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,isActive:y,easing:h},ie.createElement("path",AC({},ut(n,!0),{className:v,d:ZH(B,S,w,C,d),ref:r})))}):ie.createElement("path",AC({},ut(n,!0),{className:v,d:ZH(l,c,u,A,d)}))},Gft=["points","className","baseLinePoints","connectNulls"];function fh(){return fh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fh.apply(this,arguments)}function Kft(t,e){if(t==null)return{};var n=Xft(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Xft(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function e7(t){return Zft(t)||Jft(t)||Yft(t)||qft()}function qft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yft(t,e){if(t){if(typeof t=="string")return xF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xF(t,e)}}function Jft(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Zft(t){if(Array.isArray(t))return xF(t)}function xF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var t7=function(e){return e&&e.x===+e.x&&e.y===+e.y},eht=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){t7(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),t7(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},hy=function(e,n){var r=eht(e);n&&(r=[r.reduce(function(i,o){return[].concat(e7(i),e7(o))},[])]);var s=r.map(function(i){return i.reduce(function(o,a,l){return"".concat(o).concat(l===0?"M":"L").concat(a.x,",").concat(a.y)},"")}).join("");return r.length===1?"".concat(s,"Z"):s},tht=function(e,n,r){var s=hy(e,r);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(hy(n.reverse(),r).slice(1))},bse=function(e){var n=e.points,r=e.className,s=e.baseLinePoints,i=e.connectNulls,o=Kft(e,Gft);if(!n||!n.length)return null;var a=It("recharts-polygon",r);if(s&&s.length){var l=o.stroke&&o.stroke!=="none",c=tht(n,s,i);return ie.createElement("g",{className:a},ie.createElement("path",fh({},ut(o,!0),{fill:c.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:c})),l?ie.createElement("path",fh({},ut(o,!0),{fill:"none",d:hy(n,i)})):null,l?ie.createElement("path",fh({},ut(o,!0),{fill:"none",d:hy(s,i)})):null)}var u=hy(n,i);return ie.createElement("path",fh({},ut(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",className:a,d:u}))};function vF(){return vF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vF.apply(this,arguments)}var G3=function(e){var n=e.cx,r=e.cy,s=e.r,i=e.className,o=It("recharts-dot",i);return n===+n&&r===+r&&s===+s?z.createElement("circle",vF({},ut(e,!1),$2(e),{className:o,cx:n,cy:r,r:s})):null};function O0(t){"@babel/helpers - typeof";return O0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O0(t)}var nht=["x","y","top","left","width","height","className"];function bF(){return bF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bF.apply(this,arguments)}function n7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function rht(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n7(Object(n),!0).forEach(function(r){sht(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sht(t,e,n){return e=iht(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iht(t){var e=oht(t,"string");return O0(e)=="symbol"?e:e+""}function oht(t,e){if(O0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(O0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aht(t,e){if(t==null)return{};var n=lht(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lht(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var cht=function(e,n,r,s,i,o){return"M".concat(e,",").concat(i,"v").concat(s,"M").concat(o,",").concat(n,"h").concat(r)},uht=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,i=s===void 0?0:s,o=e.top,a=o===void 0?0:o,l=e.left,c=l===void 0?0:l,u=e.width,A=u===void 0?0:u,d=e.height,f=d===void 0?0:d,h=e.className,p=aht(e,nht),m=rht({x:r,y:i,top:a,left:c,width:A,height:f},p);return!Ue(r)||!Ue(i)||!Ue(A)||!Ue(f)||!Ue(a)||!Ue(c)?null:ie.createElement("path",bF({},ut(m,!0),{className:It("recharts-cross",h),d:cht(r,i,A,f,a,c)}))},Aht=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function D0(t){"@babel/helpers - typeof";return D0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D0(t)}function dht(t,e){if(t==null)return{};var n=fht(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fht(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Cc(){return Cc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cc.apply(this,arguments)}function r7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function R0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r7(Object(n),!0).forEach(function(r){hht(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hht(t,e,n){return e=pht(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pht(t){var e=mht(t,"string");return D0(e)=="symbol"?e:e+""}function mht(t,e){if(D0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(D0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ght=function(e,n,r,s){var i="";return s.forEach(function(o,a){var l=pn(n,r,e,o);a?i+="L ".concat(l.x,",").concat(l.y):i+="M ".concat(l.x,",").concat(l.y)}),i+="Z",i},yht=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.polarAngles,a=e.radialLines;if(!o||!o.length||!a)return null;var l=R0({stroke:"#ccc"},ut(e,!1));return ie.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(c){var u=pn(n,r,s,c),A=pn(n,r,i,c);return ie.createElement("line",Cc({},l,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:A.x,y2:A.y}))}))},xht=function(e){var n=e.cx,r=e.cy,s=e.radius,i=e.index,o=R0(R0({stroke:"#ccc"},ut(e,!1)),{},{fill:"none"});return ie.createElement("circle",Cc({},o,{className:It("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(i),cx:n,cy:r,r:s}))},vht=function(e){var n=e.radius,r=e.index,s=R0(R0({stroke:"#ccc"},ut(e,!1)),{},{fill:"none"});return ie.createElement("path",Cc({},s,{className:It("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:ght(n,e.cx,e.cy,e.polarAngles)}))},bht=function(e){var n=e.polarRadius,r=e.gridType;return!n||!n.length?null:ie.createElement("g",{className:"recharts-polar-grid-concentric"},n.map(function(s,i){var o=i;return r==="circle"?ie.createElement(xht,Cc({key:o},e,{radius:s,index:i})):ie.createElement(vht,Cc({key:o},e,{radius:s,index:i}))}))},wse=function(e){var n=e.cx,r=n===void 0?0:n,s=e.cy,i=s===void 0?0:s,o=e.innerRadius,a=o===void 0?0:o,l=e.outerRadius,c=l===void 0?0:l,u=e.gridType,A=u===void 0?"polygon":u,d=e.radialLines,f=d===void 0?!0:d,h=dht(e,Aht);return c<=0?null:ie.createElement("g",{className:"recharts-polar-grid"},ie.createElement(yht,Cc({cx:r,cy:i,innerRadius:a,outerRadius:c,gridType:A,radialLines:f},h)),ie.createElement(bht,Cc({cx:r,cy:i,innerRadius:a,outerRadius:c,gridType:A,radialLines:f},h)))};wse.displayName="PolarGrid";var wht=j3,Cht=$re,Sht=Cl;function Bht(t,e){return t&&t.length?wht(t,Sht(e),Cht):void 0}var Nht=Bht;const Eht=Gt(Nht);var Iht=j3,kht=Cl,Tht=_re;function Fht(t,e){return t&&t.length?Iht(t,kht(e),Tht):void 0}var $ht=Fht;const _ht=Gt($ht);var Oht=["cx","cy","angle","ticks","axisLine"],Dht=["ticks","tick","angle","tickFormatter","stroke"];function Ep(t){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(t)}function py(){return py=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},py.apply(this,arguments)}function s7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function RA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s7(Object(n),!0).forEach(function(r){K3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function i7(t,e){if(t==null)return{};var n=Rht(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Rht(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Pht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Sse(r.key),r)}}function Uht(t,e,n){return e&&o7(t.prototype,e),n&&o7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lht(t,e,n){return e=dC(e),jht(t,Cse()?Reflect.construct(e,n||[],dC(t).constructor):e.apply(t,n))}function jht(t,e){if(e&&(Ep(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mht(t)}function Mht(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cse=function(){return!!t})()}function dC(t){return dC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dC(t)}function Qht(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wF(t,e)}function wF(t,e){return wF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},wF(t,e)}function K3(t,e,n){return e=Sse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sse(t){var e=Hht(t,"string");return Ep(e)=="symbol"?e:e+""}function Hht(t,e){if(Ep(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Rv=function(t){function e(){return Pht(this,e),Lht(this,e,arguments)}return Qht(e,t),Uht(e,[{key:"getTickValueCoord",value:function(r){var s=r.coordinate,i=this.props,o=i.angle,a=i.cx,l=i.cy;return pn(a,l,s,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,s;switch(r){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.angle,a=r.ticks,l=Eht(a,function(u){return u.coordinate||0}),c=_ht(a,function(u){return u.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:c.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.angle,a=r.ticks,l=r.axisLine,c=i7(r,Oht),u=a.reduce(function(h,p){return[Math.min(h[0],p.coordinate),Math.max(h[1],p.coordinate)]},[1/0,-1/0]),A=pn(s,i,u[0],o),d=pn(s,i,u[1],o),f=RA(RA(RA({},ut(c,!1)),{},{fill:"none"},ut(l,!1)),{},{x1:A.x,y1:A.y,x2:d.x,y2:d.y});return ie.createElement("line",py({className:"recharts-polar-radius-axis-line"},f))}},{key:"renderTicks",value:function(){var r=this,s=this.props,i=s.ticks,o=s.tick,a=s.angle,l=s.tickFormatter,c=s.stroke,u=i7(s,Dht),A=this.getTickTextAnchor(),d=ut(u,!1),f=ut(o,!1),h=i.map(function(p,m){var y=r.getTickValueCoord(p),x=RA(RA(RA(RA({textAnchor:A,transform:"rotate(".concat(90-a,", ").concat(y.x,", ").concat(y.y,")")},d),{},{stroke:"none",fill:c},f),{},{index:m},y),{},{payload:p});return ie.createElement(yn,py({className:It("recharts-polar-radius-axis-tick",ose(o)),key:"tick-".concat(p.coordinate)},pp(r.props,p,m)),e.renderTickItem(o,x,l?l(p.value,m):p.value))});return ie.createElement(yn,{className:"recharts-polar-radius-axis-ticks"},h)}},{key:"render",value:function(){var r=this.props,s=r.ticks,i=r.axisLine,o=r.tick;return!s||!s.length?null:ie.createElement(yn,{className:It("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),ps.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,s,i){var o;return ie.isValidElement(r)?o=ie.cloneElement(r,s):xt(r)?o=r(s):o=ie.createElement(bp,py({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(z.PureComponent);K3(Rv,"displayName","PolarRadiusAxis");K3(Rv,"axisType","radiusAxis");K3(Rv,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Ip(t){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ip(t)}function YA(){return YA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YA.apply(this,arguments)}function a7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function PA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a7(Object(n),!0).forEach(function(r){X3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nse(r.key),r)}}function Vht(t,e,n){return e&&l7(t.prototype,e),n&&l7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wht(t,e,n){return e=fC(e),Ght(t,Bse()?Reflect.construct(e,n||[],fC(t).constructor):e.apply(t,n))}function Ght(t,e){if(e&&(Ip(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kht(t)}function Kht(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bse=function(){return!!t})()}function fC(t){return fC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fC(t)}function Xht(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CF(t,e)}function CF(t,e){return CF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},CF(t,e)}function X3(t,e,n){return e=Nse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nse(t){var e=qht(t,"string");return Ip(e)=="symbol"?e:e+""}function qht(t,e){if(Ip(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ip(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Yht=Math.PI/180,c7=1e-5,Pv=function(t){function e(){return zht(this,e),Wht(this,e,arguments)}return Xht(e,t),Vht(e,[{key:"getTickLineCoord",value:function(r){var s=this.props,i=s.cx,o=s.cy,a=s.radius,l=s.orientation,c=s.tickSize,u=c||8,A=pn(i,o,a,r.coordinate),d=pn(i,o,a+(l==="inner"?-1:1)*u,r.coordinate);return{x1:A.x,y1:A.y,x2:d.x,y2:d.y}}},{key:"getTickTextAnchor",value:function(r){var s=this.props.orientation,i=Math.cos(-r.coordinate*Yht),o;return i>c7?o=s==="outer"?"start":"end":i<-c7?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.radius,a=r.axisLine,l=r.axisLineType,c=PA(PA({},ut(this.props,!1)),{},{fill:"none"},ut(a,!1));if(l==="circle")return ie.createElement(G3,YA({className:"recharts-polar-angle-axis-line"},c,{cx:s,cy:i,r:o}));var u=this.props.ticks,A=u.map(function(d){return pn(s,i,o,d.coordinate)});return ie.createElement(bse,YA({className:"recharts-polar-angle-axis-line"},c,{points:A}))}},{key:"renderTicks",value:function(){var r=this,s=this.props,i=s.ticks,o=s.tick,a=s.tickLine,l=s.tickFormatter,c=s.stroke,u=ut(this.props,!1),A=ut(o,!1),d=PA(PA({},u),{},{fill:"none"},ut(a,!1)),f=i.map(function(h,p){var m=r.getTickLineCoord(h),y=r.getTickTextAnchor(h),x=PA(PA(PA({textAnchor:y},u),{},{stroke:"none",fill:c},A),{},{index:p,payload:h,x:m.x2,y:m.y2});return ie.createElement(yn,YA({className:It("recharts-polar-angle-axis-tick",ose(o)),key:"tick-".concat(h.coordinate)},pp(r.props,h,p)),a&&ie.createElement("line",YA({className:"recharts-polar-angle-axis-tick-line"},d,m)),o&&e.renderTickItem(o,x,l?l(h.value,p):h.value))});return ie.createElement(yn,{className:"recharts-polar-angle-axis-ticks"},f)}},{key:"render",value:function(){var r=this.props,s=r.ticks,i=r.radius,o=r.axisLine;return i<=0||!s||!s.length?null:ie.createElement(yn,{className:It("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,s,i){var o;return ie.isValidElement(r)?o=ie.cloneElement(r,s):xt(r)?o=r(s):o=ie.createElement(bp,YA({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(z.PureComponent);X3(Pv,"displayName","PolarAngleAxis");X3(Pv,"axisType","angleAxis");X3(Pv,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Jht=Ene,Zht=Jht(Object.getPrototypeOf,Object),ept=Zht,tpt=$c,npt=ept,rpt=_c,spt="[object Object]",ipt=Function.prototype,opt=Object.prototype,Ese=ipt.toString,apt=opt.hasOwnProperty,lpt=Ese.call(Object);function cpt(t){if(!rpt(t)||tpt(t)!=spt)return!1;var e=npt(t);if(e===null)return!0;var n=apt.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Ese.call(n)==lpt}var upt=cpt;const Apt=Gt(upt);var dpt=$c,fpt=_c,hpt="[object Boolean]";function ppt(t){return t===!0||t===!1||fpt(t)&&dpt(t)==hpt}var mpt=ppt;const gpt=Gt(mpt);function P0(t){"@babel/helpers - typeof";return P0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P0(t)}function hC(){return hC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hC.apply(this,arguments)}function ypt(t,e){return wpt(t)||bpt(t,e)||vpt(t,e)||xpt()}function xpt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vpt(t,e){if(t){if(typeof t=="string")return u7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u7(t,e)}}function u7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bpt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function wpt(t){if(Array.isArray(t))return t}function A7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function d7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A7(Object(n),!0).forEach(function(r){Cpt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cpt(t,e,n){return e=Spt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Spt(t){var e=Bpt(t,"string");return P0(e)=="symbol"?e:e+""}function Bpt(t,e){if(P0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(P0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var f7=function(e,n,r,s,i){var o=r-s,a;return a="M ".concat(e,",").concat(n),a+="L ".concat(e+r,",").concat(n),a+="L ".concat(e+r-o/2,",").concat(n+i),a+="L ".concat(e+r-o/2-s,",").concat(n+i),a+="L ".concat(e,",").concat(n," Z"),a},Npt={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ept=function(e){var n=d7(d7({},Npt),e),r=z.useRef(),s=z.useState(-1),i=ypt(s,2),o=i[0],a=i[1];z.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&a(v)}catch{}},[]);var l=n.x,c=n.y,u=n.upperWidth,A=n.lowerWidth,d=n.height,f=n.className,h=n.animationEasing,p=n.animationDuration,m=n.animationBegin,y=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||A!==+A||d!==+d||u===0&&A===0||d===0)return null;var x=It("recharts-trapezoid",f);return y?ie.createElement(wc,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:d,x:l,y:c},to:{upperWidth:u,lowerWidth:A,height:d,x:l,y:c},duration:p,animationEasing:h,isActive:y},function(v){var b=v.upperWidth,w=v.lowerWidth,C=v.height,B=v.x,S=v.y;return ie.createElement(wc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,easing:h},ie.createElement("path",hC({},ut(n,!0),{className:x,d:f7(B,S,b,w,C),ref:r})))}):ie.createElement("g",null,ie.createElement("path",hC({},ut(n,!0),{className:x,d:f7(l,c,u,A,d)})))},Ipt=["option","shapeType","propTransformer","activeClassName","isActive"];function U0(t){"@babel/helpers - typeof";return U0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U0(t)}function kpt(t,e){if(t==null)return{};var n=Tpt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Tpt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function h7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h7(Object(n),!0).forEach(function(r){Fpt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fpt(t,e,n){return e=$pt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $pt(t){var e=_pt(t,"string");return U0(e)=="symbol"?e:e+""}function _pt(t,e){if(U0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(U0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Opt(t,e){return pC(pC({},e),t)}function Dpt(t,e){return t==="symbols"}function p7(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return ie.createElement(OP,n);case"trapezoid":return ie.createElement(Ept,n);case"sector":return ie.createElement(use,n);case"symbols":if(Dpt(e))return ie.createElement(ZR,n);break;default:return null}}function Rpt(t){return z.isValidElement(t)?t.props:t}function Ppt(t){var e=t.option,n=t.shapeType,r=t.propTransformer,s=r===void 0?Opt:r,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,a=t.isActive,l=kpt(t,Ipt),c;if(z.isValidElement(e))c=z.cloneElement(e,pC(pC({},l),Rpt(e)));else if(xt(e))c=e(l);else if(Apt(e)&&!gpt(e)){var u=s(e,l);c=ie.createElement(p7,{shapeType:n,elementProps:u})}else{var A=l;c=ie.createElement(p7,{shapeType:n,elementProps:A})}return a?ie.createElement(yn,{className:o},c):c}function q3(t,e){return e!=null&&"trapezoids"in t.props}function Y3(t,e){return e!=null&&"sectors"in t.props}function L0(t,e){return e!=null&&"points"in t.props}function Upt(t,e){var n,r,s=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,i=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return s&&i}function Lpt(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function jpt(t,e){var n=t.x===e.x,r=t.y===e.y,s=t.z===e.z;return n&&r&&s}function Mpt(t,e){var n;return q3(t,e)?n=Upt:Y3(t,e)?n=Lpt:L0(t,e)&&(n=jpt),n}function Qpt(t,e){var n;return q3(t,e)?n="trapezoids":Y3(t,e)?n="sectors":L0(t,e)&&(n="points"),n}function Hpt(t,e){if(q3(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Y3(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return L0(t,e)?e.payload:{}}function zpt(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,s=Qpt(n,e),i=Hpt(n,e),o=r.filter(function(l,c){var u=H3(i,l),A=n.props[s].filter(function(h){var p=Mpt(n,e);return p(h,e)}),d=n.props[s].indexOf(A[A.length-1]),f=c===d;return u&&f}),a=r.indexOf(o[o.length-1]);return a}function Vpt(t){return t&&t.length?t[0]:void 0}var Wpt=Vpt,Gpt=Wpt;const Kpt=Gt(Gpt);var Xpt=["key"];function kp(t){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kp(t)}function qpt(t,e){if(t==null)return{};var n=Ypt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ypt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function mC(){return mC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mC.apply(this,arguments)}function m7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Xs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m7(Object(n),!0).forEach(function(r){Vl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jpt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kse(r.key),r)}}function Zpt(t,e,n){return e&&g7(t.prototype,e),n&&g7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function emt(t,e,n){return e=gC(e),tmt(t,Ise()?Reflect.construct(e,n||[],gC(t).constructor):e.apply(t,n))}function tmt(t,e){if(e&&(kp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nmt(t)}function nmt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ise(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ise=function(){return!!t})()}function gC(t){return gC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gC(t)}function rmt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SF(t,e)}function SF(t,e){return SF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},SF(t,e)}function Vl(t,e,n){return e=kse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kse(t){var e=smt(t,"string");return kp(e)=="symbol"?e:e+""}function smt(t,e){if(kp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Uv=function(t){function e(){var n;Jpt(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=emt(this,e,[].concat(s)),Vl(n,"state",{isAnimationFinished:!1}),Vl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),xt(o)&&o()}),Vl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),xt(o)&&o()}),Vl(n,"handleMouseEnter",function(o){var a=n.props.onMouseEnter;a&&a(n.props,o)}),Vl(n,"handleMouseLeave",function(o){var a=n.props.onMouseLeave;a&&a(n.props,o)}),n}return rmt(e,t),Zpt(e,[{key:"renderDots",value:function(r){var s=this.props,i=s.dot,o=s.dataKey,a=ut(this.props,!1),l=ut(i,!0),c=r.map(function(u,A){var d=Xs(Xs(Xs({key:"dot-".concat(A),r:3},a),l),{},{dataKey:o,cx:u.x,cy:u.y,index:A,payload:u});return e.renderDotItem(i,d)});return ie.createElement(yn,{className:"recharts-radar-dots"},c)}},{key:"renderPolygonStatically",value:function(r){var s=this.props,i=s.shape,o=s.dot,a=s.isRange,l=s.baseLinePoints,c=s.connectNulls,u;return ie.isValidElement(i)?u=ie.cloneElement(i,Xs(Xs({},this.props),{},{points:r})):xt(i)?u=i(Xs(Xs({},this.props),{},{points:r})):u=ie.createElement(bse,mC({},ut(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:r,baseLinePoints:a?l:null,connectNulls:c})),ie.createElement(yn,{className:"recharts-radar-polygon"},u,o?this.renderDots(r):null)}},{key:"renderPolygonWithAnimation",value:function(){var r=this,s=this.props,i=s.points,o=s.isAnimationActive,a=s.animationBegin,l=s.animationDuration,c=s.animationEasing,u=s.animationId,A=this.state.prevPoints;return ie.createElement(wc,{begin:a,duration:l,isActive:o,easing:c,from:{t:0},to:{t:1},key:"radar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(d){var f=d.t,h=A&&A.length/i.length,p=i.map(function(m,y){var x=A&&A[Math.floor(y*h)];if(x){var v=Za(x.x,m.x),b=Za(x.y,m.y);return Xs(Xs({},m),{},{x:v(f),y:b(f)})}var w=Za(m.cx,m.x),C=Za(m.cy,m.y);return Xs(Xs({},m),{},{x:w(f),y:C(f)})});return r.renderPolygonStatically(p)})}},{key:"renderPolygon",value:function(){var r=this.props,s=r.points,i=r.isAnimationActive,o=r.isRange,a=this.state.prevPoints;return i&&s&&s.length&&!o&&(!a||!H3(a,s))?this.renderPolygonWithAnimation():this.renderPolygonStatically(s)}},{key:"render",value:function(){var r=this.props,s=r.hide,i=r.className,o=r.points,a=r.isAnimationActive;if(s||!o||!o.length)return null;var l=this.state.isAnimationFinished,c=It("recharts-radar",i);return ie.createElement(yn,{className:c},this.renderPolygon(),(!a||l)&&Pu.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}},{key:"renderDotItem",value:function(r,s){var i;if(ie.isValidElement(r))i=ie.cloneElement(r,s);else if(xt(r))i=r(s);else{var o=s.key,a=qpt(s,Xpt);i=ie.createElement(G3,mC({},a,{key:o,className:It("recharts-radar-dot",typeof r!="boolean"?r.className:"")}))}return i}}])}(z.PureComponent);Vl(Uv,"displayName","Radar");Vl(Uv,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Cm.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Vl(Uv,"getComposedData",function(t){var e=t.radiusAxis,n=t.angleAxis,r=t.displayedData,s=t.dataKey,i=t.bandSize,o=n.cx,a=n.cy,l=!1,c=[],u=n.type!=="number"?i??0:0;r.forEach(function(d,f){var h=Vo(d,n.dataKey,f),p=Vo(d,s),m=n.scale(h)+u,y=Array.isArray(p)?lse(p):p,x=Ht(y)?void 0:e.scale(y);Array.isArray(p)&&p.length>=2&&(l=!0),c.push(Xs(Xs({},pn(o,a,x,m)),{},{name:h,value:p,cx:o,cy:a,radius:x,angle:m,payload:d}))});var A=[];return l&&c.forEach(function(d){if(Array.isArray(d.value)){var f=Kpt(d.value),h=Ht(f)?void 0:e.scale(f);A.push(Xs(Xs({},d),{},{radius:h},pn(o,a,h,d.angle)))}else A.push(d)}),{points:c,isRange:l,baseLinePoints:A}});var imt=Math.ceil,omt=Math.max;function amt(t,e,n,r){for(var s=-1,i=omt(imt((e-t)/(n||1)),0),o=Array(i);i--;)o[r?i:++s]=t,t+=n;return o}var lmt=amt,cmt=Wne,y7=1/0,umt=17976931348623157e292;function Amt(t){if(!t)return t===0?t:0;if(t=cmt(t),t===y7||t===-y7){var e=t<0?-1:1;return e*umt}return t===t?t:0}var Tse=Amt,dmt=lmt,fmt=_3,BE=Tse;function hmt(t){return function(e,n,r){return r&&typeof r!="number"&&fmt(e,n,r)&&(n=r=void 0),e=BE(e),n===void 0?(n=e,e=0):n=BE(n),r=r===void 0?e<n?1:-1:BE(r),dmt(e,n,r,t)}}var pmt=hmt,mmt=pmt,gmt=mmt(),ymt=gmt;const yC=Gt(ymt);function j0(t){"@babel/helpers - typeof";return j0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j0(t)}function x7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function v7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x7(Object(n),!0).forEach(function(r){Fse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fse(t,e,n){return e=xmt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xmt(t){var e=vmt(t,"string");return j0(e)=="symbol"?e:e+""}function vmt(t,e){if(j0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(j0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bmt=["Webkit","Moz","O","ms"],wmt=function(e,n){var r=e.replace(/(\w)/,function(i){return i.toUpperCase()}),s=bmt.reduce(function(i,o){return v7(v7({},i),{},Fse({},o+r,n))},{});return s[e]=n,s};function Tp(t){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tp(t)}function xC(){return xC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xC.apply(this,arguments)}function b7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function NE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b7(Object(n),!0).forEach(function(r){Wi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cmt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_se(r.key),r)}}function Smt(t,e,n){return e&&w7(t.prototype,e),n&&w7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bmt(t,e,n){return e=vC(e),Nmt(t,$se()?Reflect.construct(e,n||[],vC(t).constructor):e.apply(t,n))}function Nmt(t,e){if(e&&(Tp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Emt(t)}function Emt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $se(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($se=function(){return!!t})()}function vC(t){return vC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vC(t)}function Imt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BF(t,e)}function BF(t,e){return BF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},BF(t,e)}function Wi(t,e,n){return e=_se(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _se(t){var e=kmt(t,"string");return Tp(e)=="symbol"?e:e+""}function kmt(t,e){if(Tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Tmt=function(e){var n=e.data,r=e.startIndex,s=e.endIndex,i=e.x,o=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=Ay().domain(yC(0,l)).range([i,i+o-a]),u=c.domain().map(function(A){return c(A)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(s),scale:c,scaleValues:u}},C7=function(e){return e.changedTouches&&!!e.changedTouches.length},Fp=function(t){function e(n){var r;return Cmt(this,e),r=Bmt(this,e,[n]),Wi(r,"handleDrag",function(s){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(s):r.state.isSlideMoving&&r.handleSlideDrag(s)}),Wi(r,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&r.handleDrag(s.changedTouches[0])}),Wi(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=r.props,i=s.endIndex,o=s.onDragEnd,a=s.startIndex;o==null||o({endIndex:i,startIndex:a})}),r.detachDragEndListener()}),Wi(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Wi(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Wi(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Wi(r,"handleSlideDragStart",function(s){var i=C7(s)?s.changedTouches[0]:s;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Imt(e,t),Smt(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var s=r.startX,i=r.endX,o=this.state.scaleValues,a=this.props,l=a.gap,c=a.data,u=c.length-1,A=Math.min(s,i),d=Math.max(s,i),f=e.getIndexInRange(o,A),h=e.getIndexInRange(o,d);return{startIndex:f-f%l,endIndex:h===u?u:h-h%l}}},{key:"getTextOfTick",value:function(r){var s=this.props,i=s.data,o=s.tickFormatter,a=s.dataKey,l=Vo(i[r],a,r);return xt(o)?o(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var s=this.state,i=s.slideMoveStartX,o=s.startX,a=s.endX,l=this.props,c=l.x,u=l.width,A=l.travellerWidth,d=l.startIndex,f=l.endIndex,h=l.onChange,p=r.pageX-i;p>0?p=Math.min(p,c+u-A-a,c+u-A-o):p<0&&(p=Math.max(p,c-o,c-a));var m=this.getIndex({startX:o+p,endX:a+p});(m.startIndex!==d||m.endIndex!==f)&&h&&h(m),this.setState({startX:o+p,endX:a+p,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,s){var i=C7(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,a=s.endX,l=s.startX,c=this.state[o],u=this.props,A=u.x,d=u.width,f=u.travellerWidth,h=u.onChange,p=u.gap,m=u.data,y={startX:this.state.startX,endX:this.state.endX},x=r.pageX-i;x>0?x=Math.min(x,A+d-f-c):x<0&&(x=Math.max(x,A-c)),y[o]=c+x;var v=this.getIndex(y),b=v.startIndex,w=v.endIndex,C=function(){var S=m.length-1;return o==="startX"&&(a>l?b%p===0:w%p===0)||a<l&&w===S||o==="endX"&&(a>l?w%p===0:b%p===0)||a>l&&w===S};this.setState(Wi(Wi({},o,c+x),"brushMoveStartX",r.pageX),function(){h&&C()&&h(v)})}},{key:"handleTravellerMoveKeyboard",value:function(r,s){var i=this,o=this.state,a=o.scaleValues,l=o.startX,c=o.endX,u=this.state[s],A=a.indexOf(u);if(A!==-1){var d=A+r;if(!(d===-1||d>=a.length)){var f=a[d];s==="startX"&&f>=c||s==="endX"&&f<=l||this.setState(Wi({},s,f),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,a=r.height,l=r.fill,c=r.stroke;return ie.createElement("rect",{stroke:c,fill:l,x:s,y:i,width:o,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,a=r.height,l=r.data,c=r.children,u=r.padding,A=z.Children.only(c);return A?ie.cloneElement(A,{x:s,y:i,width:o,height:a,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,s){var i,o,a=this,l=this.props,c=l.y,u=l.travellerWidth,A=l.height,d=l.traveller,f=l.ariaLabel,h=l.data,p=l.startIndex,m=l.endIndex,y=Math.max(r,this.props.x),x=NE(NE({},ut(this.props,!1)),{},{x:y,y:c,width:u,height:A}),v=f||"Min value: ".concat((i=h[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=h[m])===null||o===void 0?void 0:o.name);return ie.createElement(yn,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),a.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,s))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(d,x))}},{key:"renderSlide",value:function(r,s){var i=this.props,o=i.y,a=i.height,l=i.stroke,c=i.travellerWidth,u=Math.min(r,s)+c,A=Math.max(Math.abs(s-r)-c,0);return ie.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:o,width:A,height:a})}},{key:"renderText",value:function(){var r=this.props,s=r.startIndex,i=r.endIndex,o=r.y,a=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,A=u.startX,d=u.endX,f=5,h={pointerEvents:"none",fill:c};return ie.createElement(yn,{className:"recharts-brush-texts"},ie.createElement(bp,xC({textAnchor:"end",verticalAnchor:"middle",x:Math.min(A,d)-f,y:o+a/2},h),this.getTextOfTick(s)),ie.createElement(bp,xC({textAnchor:"start",verticalAnchor:"middle",x:Math.max(A,d)+l+f,y:o+a/2},h),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,s=r.data,i=r.className,o=r.children,a=r.x,l=r.y,c=r.width,u=r.height,A=r.alwaysShowText,d=this.state,f=d.startX,h=d.endX,p=d.isTextActive,m=d.isSlideMoving,y=d.isTravellerMoving,x=d.isTravellerFocused;if(!s||!s.length||!Ue(a)||!Ue(l)||!Ue(c)||!Ue(u)||c<=0||u<=0)return null;var v=It("recharts-brush",i),b=ie.Children.count(o)===1,w=wmt("userSelect","none");return ie.createElement(yn,{className:v,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),b&&this.renderPanorama(),this.renderSlide(f,h),this.renderTravellerLayer(f,"startX"),this.renderTravellerLayer(h,"endX"),(p||m||y||x||A)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var s=r.x,i=r.y,o=r.width,a=r.height,l=r.stroke,c=Math.floor(i+a/2)-1;return ie.createElement(ie.Fragment,null,ie.createElement("rect",{x:s,y:i,width:o,height:a,fill:l,stroke:"none"}),ie.createElement("line",{x1:s+1,y1:c,x2:s+o-1,y2:c,fill:"none",stroke:"#fff"}),ie.createElement("line",{x1:s+1,y1:c+2,x2:s+o-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,s){var i;return ie.isValidElement(r)?i=ie.cloneElement(r,s):xt(r)?i=r(s):i=e.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(r,s){var i=r.data,o=r.width,a=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,A=r.endIndex;if(i!==s.prevData||c!==s.prevUpdateId)return NE({prevData:i,prevTravellerWidth:l,prevUpdateId:c,prevX:a,prevWidth:o},i&&i.length?Tmt({data:i,width:o,x:a,travellerWidth:l,startIndex:u,endIndex:A}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||a!==s.prevX||l!==s.prevTravellerWidth)){s.scale.range([a,a+o-l]);var d=s.scale.domain().map(function(f){return s.scale(f)});return{prevData:i,prevTravellerWidth:l,prevUpdateId:c,prevX:a,prevWidth:o,startX:s.scale(r.startIndex),endX:s.scale(r.endIndex),scaleValues:d}}return null}},{key:"getIndexInRange",value:function(r,s){for(var i=r.length,o=0,a=i-1;a-o>1;){var l=Math.floor((o+a)/2);r[l]>s?a=l:o=l}return s>=r[a]?a:o}}])}(z.PureComponent);Wi(Fp,"displayName","Brush");Wi(Fp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Fmt=oP;function $mt(t,e){var n;return Fmt(t,function(r,s,i){return n=e(r,s,i),!n}),!!n}var _mt=$mt,Omt=xne,Dmt=Cl,Rmt=_mt,Pmt=ji,Umt=_3;function Lmt(t,e,n){var r=Pmt(t)?Omt:Rmt;return n&&Umt(t,e,n)&&(e=void 0),r(t,Dmt(e))}var jmt=Lmt;const Mmt=Gt(jmt);var fl=function(e,n){var r=e.alwaysShow,s=e.ifOverflow;return r&&(s="extendDomain"),s===n},S7=Mne;function Qmt(t,e,n){e=="__proto__"&&S7?S7(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Hmt=Qmt,zmt=Hmt,Vmt=Lne,Wmt=Cl;function Gmt(t,e){var n={};return e=Wmt(e),Vmt(t,function(r,s,i){zmt(n,s,e(r,s,i))}),n}var Kmt=Gmt;const Xmt=Gt(Kmt);function qmt(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var Ymt=qmt,Jmt=oP;function Zmt(t,e){var n=!0;return Jmt(t,function(r,s,i){return n=!!e(r,s,i),n}),n}var egt=Zmt,tgt=Ymt,ngt=egt,rgt=Cl,sgt=ji,igt=_3;function ogt(t,e,n){var r=sgt(t)?tgt:ngt;return n&&igt(t,e,n)&&(e=void 0),r(t,rgt(e))}var agt=ogt;const Ose=Gt(agt);var lgt=["x","y"];function M0(t){"@babel/helpers - typeof";return M0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M0(t)}function NF(){return NF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NF.apply(this,arguments)}function B7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function xg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B7(Object(n),!0).forEach(function(r){cgt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cgt(t,e,n){return e=ugt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ugt(t){var e=Agt(t,"string");return M0(e)=="symbol"?e:e+""}function Agt(t,e){if(M0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(M0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dgt(t,e){if(t==null)return{};var n=fgt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fgt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function hgt(t,e){var n=t.x,r=t.y,s=dgt(t,lgt),i="".concat(n),o=parseInt(i,10),a="".concat(r),l=parseInt(a,10),c="".concat(e.height||s.height),u=parseInt(c,10),A="".concat(e.width||s.width),d=parseInt(A,10);return xg(xg(xg(xg(xg({},e),s),o?{x:o}:{}),l?{y:l}:{}),{},{height:u,width:d,name:e.name,radius:e.radius})}function N7(t){return ie.createElement(Ppt,NF({shapeType:"rectangle",propTransformer:hgt,activeClassName:"recharts-active-bar"},t))}var pgt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,s){if(typeof e=="number")return e;var i=Ue(r)||vXe(r);return i?e(r,s):(i||tf(),n)}},mgt=["value","background"],Dse;function $p(t){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(t)}function ggt(t,e){if(t==null)return{};var n=ygt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ygt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function bC(){return bC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bC.apply(this,arguments)}function E7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function xr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E7(Object(n),!0).forEach(function(r){yu(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xgt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pse(r.key),r)}}function vgt(t,e,n){return e&&I7(t.prototype,e),n&&I7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bgt(t,e,n){return e=wC(e),wgt(t,Rse()?Reflect.construct(e,n||[],wC(t).constructor):e.apply(t,n))}function wgt(t,e){if(e&&($p(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cgt(t)}function Cgt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rse=function(){return!!t})()}function wC(t){return wC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wC(t)}function Sgt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EF(t,e)}function EF(t,e){return EF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},EF(t,e)}function yu(t,e,n){return e=Pse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pse(t){var e=Bgt(t,"string");return $p(e)=="symbol"?e:e+""}function Bgt(t,e){if($p(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($p(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var pi=function(t){function e(){var n;xgt(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=bgt(this,e,[].concat(s)),yu(n,"state",{isAnimationFinished:!1}),yu(n,"id",N3("recharts-bar-")),yu(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),yu(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return Sgt(e,t),vgt(e,[{key:"renderRectanglesStatically",value:function(r){var s=this,i=this.props,o=i.shape,a=i.dataKey,l=i.activeIndex,c=i.activeBar,u=ut(this.props,!1);return r&&r.map(function(A,d){var f=d===l,h=f?c:o,p=xr(xr(xr({},u),A),{},{isActive:f,option:h,index:d,dataKey:a,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return ie.createElement(yn,bC({className:"recharts-bar-rectangle"},pp(s.props,A,d),{key:"rectangle-".concat(A==null?void 0:A.x,"-").concat(A==null?void 0:A.y,"-").concat(A==null?void 0:A.value,"-").concat(d)}),ie.createElement(N7,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,s=this.props,i=s.data,o=s.layout,a=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,u=s.animationEasing,A=s.animationId,d=this.state.prevData;return ie.createElement(wc,{begin:l,duration:c,isActive:a,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(A),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var h=f.t,p=i.map(function(m,y){var x=d&&d[y];if(x){var v=Za(x.x,m.x),b=Za(x.y,m.y),w=Za(x.width,m.width),C=Za(x.height,m.height);return xr(xr({},m),{},{x:v(h),y:b(h),width:w(h),height:C(h)})}if(o==="horizontal"){var B=Za(0,m.height),S=B(h);return xr(xr({},m),{},{y:m.y+m.height-S,height:S})}var N=Za(0,m.width),k=N(h);return xr(xr({},m),{},{width:k})});return ie.createElement(yn,null,r.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var r=this.props,s=r.data,i=r.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!H3(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var r=this,s=this.props,i=s.data,o=s.dataKey,a=s.activeIndex,l=ut(this.props.background,!1);return i.map(function(c,u){c.value;var A=c.background,d=ggt(c,mgt);if(!A)return null;var f=xr(xr(xr(xr(xr({},d),{},{fill:"#eee"},A),l),pp(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return ie.createElement(N7,bC({key:"background-bar-".concat(u),option:r.props.background,isActive:u===a},f))})}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,a=i.xAxis,l=i.yAxis,c=i.layout,u=i.children,A=wa(u,W3);if(!A)return null;var d=c==="vertical"?o[0].height/2:o[0].width/2,f=function(m,y){var x=Array.isArray(m.value)?m.value[1]:m.value;return{x:m.x,y:m.y,value:x,errorVal:Vo(m,y)}},h={clipPath:r?"url(#clipPath-".concat(s,")"):null};return ie.createElement(yn,h,A.map(function(p){return ie.cloneElement(p,{key:"error-bar-".concat(s,"-").concat(p.props.dataKey),data:o,xAxis:a,yAxis:l,layout:c,offset:d,dataPointFormatter:f})}))}},{key:"render",value:function(){var r=this.props,s=r.hide,i=r.data,o=r.className,a=r.xAxis,l=r.yAxis,c=r.left,u=r.top,A=r.width,d=r.height,f=r.isAnimationActive,h=r.background,p=r.id;if(s||!i||!i.length)return null;var m=this.state.isAnimationFinished,y=It("recharts-bar",o),x=a&&a.allowDataOverflow,v=l&&l.allowDataOverflow,b=x||v,w=Ht(p)?this.id:p;return ie.createElement(yn,{className:y},x||v?ie.createElement("defs",null,ie.createElement("clipPath",{id:"clipPath-".concat(w)},ie.createElement("rect",{x:x?c:c-A/2,y:v?u:u-d/2,width:x?A:A*2,height:v?d:d*2}))):null,ie.createElement(yn,{className:"recharts-bar-rectangles",clipPath:b?"url(#clipPath-".concat(w,")"):null},h?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(b,w),(!f||m)&&Pu.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:s.curData}:r.data!==s.curData?{curData:r.data}:null}}])}(z.PureComponent);Dse=pi;yu(pi,"displayName","Bar");yu(pi,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Cm.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});yu(pi,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,s=t.bandSize,i=t.xAxis,o=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,A=t.displayedData,d=t.offset,f=jut(r,n);if(!f)return null;var h=e.layout,p=n.type.defaultProps,m=p!==void 0?xr(xr({},p),n.props):n.props,y=m.dataKey,x=m.children,v=m.minPointSize,b=h==="horizontal"?o:i,w=c?b.scale.domain():null,C=Gut({numericAxis:b}),B=wa(x,Kne),S=A.map(function(N,k){var O,U,P,V,W,j;c?O=Mut(c[u+k],w):(O=Vo(N,y),Array.isArray(O)||(O=[C,O]));var G=pgt(v,Dse.defaultProps.minPointSize)(O[1],k);if(h==="horizontal"){var D,M=[o.scale(O[0]),o.scale(O[1])],q=M[0],Z=M[1];U=pH({axis:i,ticks:a,bandSize:s,offset:f.offset,entry:N,index:k}),P=(D=Z??q)!==null&&D!==void 0?D:void 0,V=f.size;var te=q-Z;if(W=Number.isNaN(te)?0:te,j={x:U,y:o.y,width:V,height:o.height},Math.abs(G)>0&&Math.abs(W)<Math.abs(G)){var ue=ha(W||G)*(Math.abs(G)-Math.abs(W));P-=ue,W+=ue}}else{var de=[i.scale(O[0]),i.scale(O[1])],le=de[0],he=de[1];if(U=le,P=pH({axis:o,ticks:l,bandSize:s,offset:f.offset,entry:N,index:k}),V=he-le,W=f.size,j={x:i.x,y:P,width:i.width,height:W},Math.abs(G)>0&&Math.abs(V)<Math.abs(G)){var ke=ha(V||G)*(Math.abs(G)-Math.abs(V));V+=ke}}return xr(xr(xr({},N),{},{x:U,y:P,width:V,height:W,value:c?O:O[1],payload:N,background:j},B&&B[k]&&B[k].props),{},{tooltipPayload:[sse(n,N)],tooltipPosition:{x:U+V/2,y:P+W/2}})});return xr({data:S,layout:h},d)});function Q0(t){"@babel/helpers - typeof";return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q0(t)}function Ngt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Use(r.key),r)}}function Egt(t,e,n){return e&&k7(t.prototype,e),n&&k7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function T7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function la(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T7(Object(n),!0).forEach(function(r){J3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function J3(t,e,n){return e=Use(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Use(t){var e=Igt(t,"string");return Q0(e)=="symbol"?e:e+""}function Igt(t,e){if(Q0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Q0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kgt=function(e,n,r,s,i){var o=e.width,a=e.height,l=e.layout,c=e.children,u=Object.keys(n),A={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},d=!!Ki(c,pi);return u.reduce(function(f,h){var p=n[h],m=p.orientation,y=p.domain,x=p.padding,v=x===void 0?{}:x,b=p.mirror,w=p.reversed,C="".concat(m).concat(b?"Mirror":""),B,S,N,k,O;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var U=y[1]-y[0],P=1/0,V=p.categoricalDomain.sort(CXe);if(V.forEach(function(de,le){le>0&&(P=Math.min((de||0)-(V[le-1]||0),P))}),Number.isFinite(P)){var W=P/U,j=p.layout==="vertical"?r.height:r.width;if(p.padding==="gap"&&(B=W*j/2),p.padding==="no-gap"){var G=pa(e.barCategoryGap,W*j),D=W*j/2;B=D-G-(D-G)/j*G}}}s==="xAxis"?S=[r.left+(v.left||0)+(B||0),r.left+r.width-(v.right||0)-(B||0)]:s==="yAxis"?S=l==="horizontal"?[r.top+r.height-(v.bottom||0),r.top+(v.top||0)]:[r.top+(v.top||0)+(B||0),r.top+r.height-(v.bottom||0)-(B||0)]:S=p.range,w&&(S=[S[1],S[0]]);var M=ese(p,i,d),q=M.scale,Z=M.realScaleType;q.domain(y).range(S),tse(q);var te=nse(q,la(la({},p),{},{realScaleType:Z}));s==="xAxis"?(O=m==="top"&&!b||m==="bottom"&&b,N=r.left,k=A[C]-O*p.height):s==="yAxis"&&(O=m==="left"&&!b||m==="right"&&b,N=A[C]-O*p.width,k=r.top);var ue=la(la(la({},p),te),{},{realScaleType:Z,x:N,y:k,scale:q,width:s==="xAxis"?r.width:p.width,height:s==="yAxis"?r.height:p.height});return ue.bandSize=iC(ue,te),!p.hide&&s==="xAxis"?A[C]+=(O?-1:1)*ue.height:p.hide||(A[C]+=(O?-1:1)*ue.width),la(la({},f),{},J3({},h,ue))},{})},Lse=function(e,n){var r=e.x,s=e.y,i=n.x,o=n.y;return{x:Math.min(r,i),y:Math.min(s,o),width:Math.abs(i-r),height:Math.abs(o-s)}},Tgt=function(e){var n=e.x1,r=e.y1,s=e.x2,i=e.y2;return Lse({x:n,y:r},{x:s,y:i})},jse=function(){function t(e){Ngt(this,t),this.scale=e}return Egt(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.bandAware,i=r.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(s){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),s=r[0],i=r[r.length-1];return s<=i?n>=s&&n<=i:n>=i&&n<=s}}],[{key:"create",value:function(n){return new t(n)}}])}();J3(jse,"EPS",1e-4);var DP=function(e){var n=Object.keys(e).reduce(function(r,s){return la(la({},r),{},J3({},s,jse.create(e[s])))},{});return la(la({},n),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,a=i.position;return Xmt(s,function(l,c){return n[c].apply(l,{bandAware:o,position:a})})},isInRange:function(s){return Ose(s,function(i,o){return n[o].isInRange(i)})}})};function Fgt(t){return(t%180+180)%180}var $gt=function(e){var n=e.width,r=e.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Fgt(s),o=i*Math.PI/180,a=Math.atan(r/n),l=o>a&&o<Math.PI-a?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},_gt=Cl,Ogt=Fv,Dgt=F3;function Rgt(t){return function(e,n,r){var s=Object(e);if(!Ogt(e)){var i=_gt(n);e=Dgt(e),n=function(a){return i(s[a],a,s)}}var o=t(e,n,r);return o>-1?s[i?e[o]:o]:void 0}}var Pgt=Rgt,Ugt=Tse;function Lgt(t){var e=Ugt(t),n=e%1;return e===e?n?e-n:e:0}var jgt=Lgt,Mgt=_ne,Qgt=Cl,Hgt=jgt,zgt=Math.max;function Vgt(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var s=n==null?0:Hgt(n);return s<0&&(s=zgt(r+s,0)),Mgt(t,Qgt(e),s)}var Wgt=Vgt,Ggt=Pgt,Kgt=Wgt,Xgt=Ggt(Kgt),qgt=Xgt;const Ygt=Gt(qgt);var Jgt=NKe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),RP=z.createContext(void 0),PP=z.createContext(void 0),Mse=z.createContext(void 0),Qse=z.createContext({}),Hse=z.createContext(void 0),zse=z.createContext(0),Vse=z.createContext(0),F7=function(e){var n=e.state,r=n.xAxisMap,s=n.yAxisMap,i=n.offset,o=e.clipPathId,a=e.children,l=e.width,c=e.height,u=Jgt(i);return ie.createElement(RP.Provider,{value:r},ie.createElement(PP.Provider,{value:s},ie.createElement(Qse.Provider,{value:i},ie.createElement(Mse.Provider,{value:u},ie.createElement(Hse.Provider,{value:o},ie.createElement(zse.Provider,{value:c},ie.createElement(Vse.Provider,{value:l},a)))))))},Zgt=function(){return z.useContext(Hse)},Wse=function(e){var n=z.useContext(RP);n==null&&tf();var r=n[e];return r==null&&tf(),r},eyt=function(){var e=z.useContext(RP);return eu(e)},tyt=function(){var e=z.useContext(PP),n=Ygt(e,function(r){return Ose(r.domain,Number.isFinite)});return n||eu(e)},Gse=function(e){var n=z.useContext(PP);n==null&&tf();var r=n[e];return r==null&&tf(),r},nyt=function(){var e=z.useContext(Mse);return e},ryt=function(){return z.useContext(Qse)},UP=function(){return z.useContext(Vse)},LP=function(){return z.useContext(zse)};function _p(t){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(t)}function syt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iyt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xse(r.key),r)}}function oyt(t,e,n){return e&&iyt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ayt(t,e,n){return e=CC(e),lyt(t,Kse()?Reflect.construct(e,n||[],CC(t).constructor):e.apply(t,n))}function lyt(t,e){if(e&&(_p(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cyt(t)}function cyt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kse=function(){return!!t})()}function CC(t){return CC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},CC(t)}function uyt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IF(t,e)}function IF(t,e){return IF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},IF(t,e)}function $7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$7(Object(n),!0).forEach(function(r){jP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jP(t,e,n){return e=Xse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xse(t){var e=Ayt(t,"string");return _p(e)=="symbol"?e:e+""}function Ayt(t,e){if(_p(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_p(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function dyt(t,e){return myt(t)||pyt(t,e)||hyt(t,e)||fyt()}function fyt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hyt(t,e){if(t){if(typeof t=="string")return O7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O7(t,e)}}function O7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pyt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function myt(t){if(Array.isArray(t))return t}function kF(){return kF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kF.apply(this,arguments)}var gyt=function(e,n){var r;return ie.isValidElement(e)?r=ie.cloneElement(e,n):xt(e)?r=e(n):r=ie.createElement("line",kF({},n,{className:"recharts-reference-line-line"})),r},yyt=function(e,n,r,s,i,o,a,l,c){var u=i.x,A=i.y,d=i.width,f=i.height;if(r){var h=c.y,p=e.y.apply(h,{position:o});if(fl(c,"discard")&&!e.y.isInRange(p))return null;var m=[{x:u+d,y:p},{x:u,y:p}];return l==="left"?m.reverse():m}if(n){var y=c.x,x=e.x.apply(y,{position:o});if(fl(c,"discard")&&!e.x.isInRange(x))return null;var v=[{x,y:A+f},{x,y:A}];return a==="top"?v.reverse():v}if(s){var b=c.segment,w=b.map(function(C){return e.apply(C,{position:o})});return fl(c,"discard")&&Mmt(w,function(C){return!e.isInRange(C)})?null:w}return null};function xyt(t){var e=t.x,n=t.y,r=t.segment,s=t.xAxisId,i=t.yAxisId,o=t.shape,a=t.className,l=t.alwaysShow,c=Zgt(),u=Wse(s),A=Gse(i),d=nyt();if(!c||!d)return null;oc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=DP({x:u.scale,y:A.scale}),h=Hr(e),p=Hr(n),m=r&&r.length===2,y=yyt(f,h,p,m,d,t.position,u.orientation,A.orientation,t);if(!y)return null;var x=dyt(y,2),v=x[0],b=v.x,w=v.y,C=x[1],B=C.x,S=C.y,N=fl(t,"hidden")?"url(#".concat(c,")"):void 0,k=_7(_7({clipPath:N},ut(t,!0)),{},{x1:b,y1:w,x2:B,y2:S});return ie.createElement(yn,{className:It("recharts-reference-line",a)},gyt(o,k),ps.renderCallByParent(t,Tgt({x1:b,y1:w,x2:B,y2:S})))}var MP=function(t){function e(){return syt(this,e),ayt(this,e,arguments)}return uyt(e,t),oyt(e,[{key:"render",value:function(){return ie.createElement(xyt,this.props)}}])}(ie.Component);jP(MP,"displayName","ReferenceLine");jP(MP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function TF(){return TF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TF.apply(this,arguments)}function Op(t){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Op(t)}function D7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function R7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D7(Object(n),!0).forEach(function(r){Z3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vyt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function byt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yse(r.key),r)}}function wyt(t,e,n){return e&&byt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cyt(t,e,n){return e=SC(e),Syt(t,qse()?Reflect.construct(e,n||[],SC(t).constructor):e.apply(t,n))}function Syt(t,e){if(e&&(Op(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Byt(t)}function Byt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qse=function(){return!!t})()}function SC(t){return SC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},SC(t)}function Nyt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FF(t,e)}function FF(t,e){return FF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},FF(t,e)}function Z3(t,e,n){return e=Yse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yse(t){var e=Eyt(t,"string");return Op(e)=="symbol"?e:e+""}function Eyt(t,e){if(Op(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Op(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Iyt=function(e){var n=e.x,r=e.y,s=e.xAxis,i=e.yAxis,o=DP({x:s.scale,y:i.scale}),a=o.apply({x:n,y:r},{bandAware:!0});return fl(e,"discard")&&!o.isInRange(a)?null:a},eN=function(t){function e(){return vyt(this,e),Cyt(this,e,arguments)}return Nyt(e,t),wyt(e,[{key:"render",value:function(){var r=this.props,s=r.x,i=r.y,o=r.r,a=r.alwaysShow,l=r.clipPathId,c=Hr(s),u=Hr(i);if(oc(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var A=Iyt(this.props);if(!A)return null;var d=A.x,f=A.y,h=this.props,p=h.shape,m=h.className,y=fl(this.props,"hidden")?"url(#".concat(l,")"):void 0,x=R7(R7({clipPath:y},ut(this.props,!0)),{},{cx:d,cy:f});return ie.createElement(yn,{className:It("recharts-reference-dot",m)},e.renderDot(p,x),ps.renderCallByParent(this.props,{x:d-o,y:f-o,width:2*o,height:2*o}))}}])}(ie.Component);Z3(eN,"displayName","ReferenceDot");Z3(eN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Z3(eN,"renderDot",function(t,e){var n;return ie.isValidElement(t)?n=ie.cloneElement(t,e):xt(t)?n=t(e):n=ie.createElement(G3,TF({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function $F(){return $F=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$F.apply(this,arguments)}function Dp(t){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dp(t)}function P7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function U7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P7(Object(n),!0).forEach(function(r){tN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kyt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tyt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zse(r.key),r)}}function Fyt(t,e,n){return e&&Tyt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $yt(t,e,n){return e=BC(e),_yt(t,Jse()?Reflect.construct(e,n||[],BC(t).constructor):e.apply(t,n))}function _yt(t,e){if(e&&(Dp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Oyt(t)}function Oyt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jse=function(){return!!t})()}function BC(t){return BC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},BC(t)}function Dyt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_F(t,e)}function _F(t,e){return _F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},_F(t,e)}function tN(t,e,n){return e=Zse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zse(t){var e=Ryt(t,"string");return Dp(e)=="symbol"?e:e+""}function Ryt(t,e){if(Dp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Pyt=function(e,n,r,s,i){var o=i.x1,a=i.x2,l=i.y1,c=i.y2,u=i.xAxis,A=i.yAxis;if(!u||!A)return null;var d=DP({x:u.scale,y:A.scale}),f={x:e?d.x.apply(o,{position:"start"}):d.x.rangeMin,y:r?d.y.apply(l,{position:"start"}):d.y.rangeMin},h={x:n?d.x.apply(a,{position:"end"}):d.x.rangeMax,y:s?d.y.apply(c,{position:"end"}):d.y.rangeMax};return fl(i,"discard")&&(!d.isInRange(f)||!d.isInRange(h))?null:Lse(f,h)},nN=function(t){function e(){return kyt(this,e),$yt(this,e,arguments)}return Dyt(e,t),Fyt(e,[{key:"render",value:function(){var r=this.props,s=r.x1,i=r.x2,o=r.y1,a=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;oc(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var A=Hr(s),d=Hr(i),f=Hr(o),h=Hr(a),p=this.props.shape;if(!A&&!d&&!f&&!h&&!p)return null;var m=Pyt(A,d,f,h,this.props);if(!m&&!p)return null;var y=fl(this.props,"hidden")?"url(#".concat(u,")"):void 0;return ie.createElement(yn,{className:It("recharts-reference-area",l)},e.renderRect(p,U7(U7({clipPath:y},ut(this.props,!0)),m)),ps.renderCallByParent(this.props,m))}}])}(ie.Component);tN(nN,"displayName","ReferenceArea");tN(nN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});tN(nN,"renderRect",function(t,e){var n;return ie.isValidElement(t)?n=ie.cloneElement(t,e):xt(t)?n=t(e):n=ie.createElement(OP,$F({},e,{className:"recharts-reference-area-rect"})),n});function eie(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],s=0;s<t.length;s+=e)r.push(t[s]);return r}function Uyt(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return $gt(r,n)}function Lyt(t,e,n){var r=n==="width",s=t.x,i=t.y,o=t.width,a=t.height;return e===1?{start:r?s:i,end:r?s+o:i+a}:{start:r?s+o:i+a,end:r?s:i}}function NC(t,e,n,r,s){if(t*e<t*r||t*e>t*s)return!1;var i=n();return t*(e-t*i/2-r)>=0&&t*(e+t*i/2-s)<=0}function jyt(t,e){return eie(t,e+1)}function Myt(t,e,n,r,s){for(var i=(r||[]).slice(),o=e.start,a=e.end,l=0,c=1,u=o,A=function(){var h=r==null?void 0:r[l];if(h===void 0)return{v:eie(r,c)};var p=l,m,y=function(){return m===void 0&&(m=n(h,p)),m},x=h.coordinate,v=l===0||NC(t,x,y,u,a);v||(l=0,u=o,c+=1),v&&(u=x+t*(y()/2+s),l+=c)},d;c<=i.length;)if(d=A(),d)return d.v;return[]}function H0(t){"@babel/helpers - typeof";return H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H0(t)}function L7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ks(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L7(Object(n),!0).forEach(function(r){Qyt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qyt(t,e,n){return e=Hyt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hyt(t){var e=zyt(t,"string");return H0(e)=="symbol"?e:e+""}function zyt(t,e){if(H0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(H0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vyt(t,e,n,r,s){for(var i=(r||[]).slice(),o=i.length,a=e.start,l=e.end,c=function(d){var f=i[d],h,p=function(){return h===void 0&&(h=n(f,d)),h};if(d===o-1){var m=t*(f.coordinate+t*p()/2-l);i[d]=f=ks(ks({},f),{},{tickCoord:m>0?f.coordinate-m*t:f.coordinate})}else i[d]=f=ks(ks({},f),{},{tickCoord:f.coordinate});var y=NC(t,f.tickCoord,p,a,l);y&&(l=f.tickCoord-t*(p()/2+s),i[d]=ks(ks({},f),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return i}function Wyt(t,e,n,r,s,i){var o=(r||[]).slice(),a=o.length,l=e.start,c=e.end;if(i){var u=r[a-1],A=n(u,a-1),d=t*(u.coordinate+t*A/2-c);o[a-1]=u=ks(ks({},u),{},{tickCoord:d>0?u.coordinate-d*t:u.coordinate});var f=NC(t,u.tickCoord,function(){return A},l,c);f&&(c=u.tickCoord-t*(A/2+s),o[a-1]=ks(ks({},u),{},{isShow:!0}))}for(var h=i?a-1:a,p=function(x){var v=o[x],b,w=function(){return b===void 0&&(b=n(v,x)),b};if(x===0){var C=t*(v.coordinate-t*w()/2-l);o[x]=v=ks(ks({},v),{},{tickCoord:C<0?v.coordinate-C*t:v.coordinate})}else o[x]=v=ks(ks({},v),{},{tickCoord:v.coordinate});var B=NC(t,v.tickCoord,w,l,c);B&&(l=v.tickCoord+t*(w()/2+s),o[x]=ks(ks({},v),{},{isShow:!0}))},m=0;m<h;m++)p(m);return o}function QP(t,e,n){var r=t.tick,s=t.ticks,i=t.viewBox,o=t.minTickGap,a=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,A=t.angle;if(!s||!s.length||!r)return[];if(Ue(l)||Cm.isSsr)return jyt(s,typeof l=="number"&&Ue(l)?l:0);var d=[],f=a==="top"||a==="bottom"?"width":"height",h=u&&f==="width"?uy(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},p=function(v,b){var w=xt(c)?c(v.value,b):v.value;return f==="width"?Uyt(uy(w,{fontSize:e,letterSpacing:n}),h,A):uy(w,{fontSize:e,letterSpacing:n})[f]},m=s.length>=2?ha(s[1].coordinate-s[0].coordinate):1,y=Lyt(i,m,f);return l==="equidistantPreserveStart"?Myt(m,y,p,s,o):(l==="preserveStart"||l==="preserveStartEnd"?d=Wyt(m,y,p,s,o,l==="preserveStartEnd"):d=Vyt(m,y,p,s,o),d.filter(function(x){return x.isShow}))}var Gyt=["viewBox"],Kyt=["viewBox"],Xyt=["ticks"];function Rp(t){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rp(t)}function hh(){return hh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hh.apply(this,arguments)}function j7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Or(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j7(Object(n),!0).forEach(function(r){HP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EE(t,e){if(t==null)return{};var n=qyt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qyt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Yyt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nie(r.key),r)}}function Jyt(t,e,n){return e&&M7(t.prototype,e),n&&M7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zyt(t,e,n){return e=EC(e),e0t(t,tie()?Reflect.construct(e,n||[],EC(t).constructor):e.apply(t,n))}function e0t(t,e){if(e&&(Rp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t0t(t)}function t0t(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tie=function(){return!!t})()}function EC(t){return EC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},EC(t)}function n0t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OF(t,e)}function OF(t,e){return OF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},OF(t,e)}function HP(t,e,n){return e=nie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nie(t){var e=r0t(t,"string");return Rp(e)=="symbol"?e:e+""}function r0t(t,e){if(Rp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Em=function(t){function e(n){var r;return Yyt(this,e),r=Zyt(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return n0t(e,t),Jyt(e,[{key:"shouldComponentUpdate",value:function(r,s){var i=r.viewBox,o=EE(r,Gyt),a=this.props,l=a.viewBox,c=EE(a,Kyt);return!_h(i,l)||!_h(o,c)||!_h(s,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var s=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var s=this.props,i=s.x,o=s.y,a=s.width,l=s.height,c=s.orientation,u=s.tickSize,A=s.mirror,d=s.tickMargin,f,h,p,m,y,x,v=A?-1:1,b=r.tickSize||u,w=Ue(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":f=h=r.coordinate,m=o+ +!A*l,p=m-v*b,x=p-v*d,y=w;break;case"left":p=m=r.coordinate,h=i+ +!A*a,f=h-v*b,y=f-v*d,x=w;break;case"right":p=m=r.coordinate,h=i+ +A*a,f=h+v*b,y=f+v*d,x=w;break;default:f=h=r.coordinate,m=o+ +A*l,p=m+v*b,x=p+v*d,y=w;break}return{line:{x1:f,y1:p,x2:h,y2:m},tick:{x:y,y:x}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,s=r.orientation,i=r.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,s=r.orientation,i=r.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,a=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,A=Or(Or(Or({},ut(this.props,!1)),ut(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var d=+(l==="top"&&!c||l==="bottom"&&c);A=Or(Or({},A),{},{x1:s,y1:i+d*a,x2:s+o,y2:i+d*a})}else{var f=+(l==="left"&&!c||l==="right"&&c);A=Or(Or({},A),{},{x1:s+f*o,y1:i,x2:s+f*o,y2:i+a})}return ie.createElement("line",hh({},A,{className:It("recharts-cartesian-axis-line",Uo(u,"className"))}))}},{key:"renderTicks",value:function(r,s,i){var o=this,a=this.props,l=a.tickLine,c=a.stroke,u=a.tick,A=a.tickFormatter,d=a.unit,f=QP(Or(Or({},this.props),{},{ticks:r}),s,i),h=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),m=ut(this.props,!1),y=ut(u,!1),x=Or(Or({},m),{},{fill:"none"},ut(l,!1)),v=f.map(function(b,w){var C=o.getTickLineCoord(b),B=C.line,S=C.tick,N=Or(Or(Or(Or({textAnchor:h,verticalAnchor:p},m),{},{stroke:"none",fill:c},y),S),{},{index:w,payload:b,visibleTicksCount:f.length,tickFormatter:A});return ie.createElement(yn,hh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(b.value,"-").concat(b.coordinate,"-").concat(b.tickCoord)},pp(o.props,b,w)),l&&ie.createElement("line",hh({},x,B,{className:It("recharts-cartesian-axis-tick-line",Uo(l,"className"))})),u&&e.renderTickItem(u,N,"".concat(xt(A)?A(b.value,w):b.value).concat(d||"")))});return ie.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var r=this,s=this.props,i=s.axisLine,o=s.width,a=s.height,l=s.ticksGenerator,c=s.className,u=s.hide;if(u)return null;var A=this.props,d=A.ticks,f=EE(A,Xyt),h=d;return xt(l)&&(h=d&&d.length>0?l(this.props):l(f)),o<=0||a<=0||!h||!h.length?null:ie.createElement(yn,{className:It("recharts-cartesian-axis",c),ref:function(m){r.layerReference=m}},i&&this.renderAxisLine(),this.renderTicks(h,this.state.fontSize,this.state.letterSpacing),ps.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,s,i){var o,a=It(s.className,"recharts-cartesian-axis-tick-value");return ie.isValidElement(r)?o=ie.cloneElement(r,Or(Or({},s),{},{className:a})):xt(r)?o=r(Or(Or({},s),{},{className:a})):o=ie.createElement(bp,hh({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(z.Component);HP(Em,"displayName","CartesianAxis");HP(Em,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var s0t=["x1","y1","x2","y2","key"],i0t=["offset"];function nf(t){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(t)}function Q7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ds(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q7(Object(n),!0).forEach(function(r){o0t(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o0t(t,e,n){return e=a0t(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a0t(t){var e=l0t(t,"string");return nf(e)=="symbol"?e:e+""}function l0t(t,e){if(nf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cd(){return cd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cd.apply(this,arguments)}function H7(t,e){if(t==null)return{};var n=c0t(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function c0t(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var u0t=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,s=e.x,i=e.y,o=e.width,a=e.height,l=e.ry;return ie.createElement("rect",{x:s,y:i,ry:l,width:o,height:a,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function rie(t,e){var n;if(ie.isValidElement(t))n=ie.cloneElement(t,e);else if(xt(t))n=t(e);else{var r=e.x1,s=e.y1,i=e.x2,o=e.y2,a=e.key,l=H7(e,s0t),c=ut(l,!1);c.offset;var u=H7(c,i0t);n=ie.createElement("line",cd({},u,{x1:r,y1:s,x2:i,y2:o,fill:"none",key:a}))}return n}function A0t(t){var e=t.x,n=t.width,r=t.horizontal,s=r===void 0?!0:r,i=t.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(a,l){var c=Ds(Ds({},t),{},{x1:e,y1:a,x2:e+n,y2:a,key:"line-".concat(l),index:l});return rie(s,c)});return ie.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function d0t(t){var e=t.y,n=t.height,r=t.vertical,s=r===void 0?!0:r,i=t.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(a,l){var c=Ds(Ds({},t),{},{x1:a,y1:e,x2:a,y2:e+n,key:"line-".concat(l),index:l});return rie(s,c)});return ie.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function f0t(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,s=t.y,i=t.width,o=t.height,a=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var u=a.map(function(d){return Math.round(d+s-s)}).sort(function(d,f){return d-f});s!==u[0]&&u.unshift(0);var A=u.map(function(d,f){var h=!u[f+1],p=h?s+o-d:u[f+1]-d;if(p<=0)return null;var m=f%e.length;return ie.createElement("rect",{key:"react-".concat(f),y:d,x:r,height:p,width:i,stroke:"none",fill:e[m],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return ie.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},A)}function h0t(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,s=t.fillOpacity,i=t.x,o=t.y,a=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var u=c.map(function(d){return Math.round(d+i-i)}).sort(function(d,f){return d-f});i!==u[0]&&u.unshift(0);var A=u.map(function(d,f){var h=!u[f+1],p=h?i+a-d:u[f+1]-d;if(p<=0)return null;var m=f%r.length;return ie.createElement("rect",{key:"react-".concat(f),x:d,y:o,width:p,height:l,stroke:"none",fill:r[m],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return ie.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},A)}var p0t=function(e,n){var r=e.xAxis,s=e.width,i=e.height,o=e.offset;return Zre(QP(Ds(Ds(Ds({},Em.defaultProps),r),{},{ticks:ec(r,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,n)},m0t=function(e,n){var r=e.yAxis,s=e.width,i=e.height,o=e.offset;return Zre(QP(Ds(Ds(Ds({},Em.defaultProps),r),{},{ticks:ec(r,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,n)},zf={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function zg(t){var e,n,r,s,i,o,a=UP(),l=LP(),c=ryt(),u=Ds(Ds({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:zf.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:zf.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:zf.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:zf.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:zf.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:zf.verticalFill,x:Ue(t.x)?t.x:c.left,y:Ue(t.y)?t.y:c.top,width:Ue(t.width)?t.width:c.width,height:Ue(t.height)?t.height:c.height}),A=u.x,d=u.y,f=u.width,h=u.height,p=u.syncWithTicks,m=u.horizontalValues,y=u.verticalValues,x=eyt(),v=tyt();if(!Ue(f)||f<=0||!Ue(h)||h<=0||!Ue(A)||A!==+A||!Ue(d)||d!==+d)return null;var b=u.verticalCoordinatesGenerator||p0t,w=u.horizontalCoordinatesGenerator||m0t,C=u.horizontalPoints,B=u.verticalPoints;if((!C||!C.length)&&xt(w)){var S=m&&m.length,N=w({yAxis:v?Ds(Ds({},v),{},{ticks:S?m:v.ticks}):void 0,width:a,height:l,offset:c},S?!0:p);oc(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(nf(N),"]")),Array.isArray(N)&&(C=N)}if((!B||!B.length)&&xt(b)){var k=y&&y.length,O=b({xAxis:x?Ds(Ds({},x),{},{ticks:k?y:x.ticks}):void 0,width:a,height:l,offset:c},k?!0:p);oc(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(nf(O),"]")),Array.isArray(O)&&(B=O)}return ie.createElement("g",{className:"recharts-cartesian-grid"},ie.createElement(u0t,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),ie.createElement(A0t,cd({},u,{offset:c,horizontalPoints:C,xAxis:x,yAxis:v})),ie.createElement(d0t,cd({},u,{offset:c,verticalPoints:B,xAxis:x,yAxis:v})),ie.createElement(f0t,cd({},u,{horizontalPoints:C})),ie.createElement(h0t,cd({},u,{verticalPoints:B})))}zg.displayName="CartesianGrid";function Pp(t){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pp(t)}function g0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y0t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oie(r.key),r)}}function x0t(t,e,n){return e&&y0t(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function v0t(t,e,n){return e=IC(e),b0t(t,sie()?Reflect.construct(e,n||[],IC(t).constructor):e.apply(t,n))}function b0t(t,e){if(e&&(Pp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w0t(t)}function w0t(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sie=function(){return!!t})()}function IC(t){return IC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},IC(t)}function C0t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DF(t,e)}function DF(t,e){return DF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},DF(t,e)}function iie(t,e,n){return e=oie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oie(t){var e=S0t(t,"string");return Pp(e)=="symbol"?e:e+""}function S0t(t,e){if(Pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function RF(){return RF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RF.apply(this,arguments)}function B0t(t){var e=t.xAxisId,n=UP(),r=LP(),s=Wse(e);return s==null?null:z.createElement(Em,RF({},s,{className:It("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return ec(o,!0)}}))}var ud=function(t){function e(){return g0t(this,e),v0t(this,e,arguments)}return C0t(e,t),x0t(e,[{key:"render",value:function(){return z.createElement(B0t,this.props)}}])}(z.Component);iie(ud,"displayName","XAxis");iie(ud,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Up(t){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Up(t)}function N0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E0t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cie(r.key),r)}}function I0t(t,e,n){return e&&E0t(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function k0t(t,e,n){return e=kC(e),T0t(t,aie()?Reflect.construct(e,n||[],kC(t).constructor):e.apply(t,n))}function T0t(t,e){if(e&&(Up(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F0t(t)}function F0t(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aie=function(){return!!t})()}function kC(t){return kC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kC(t)}function $0t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PF(t,e)}function PF(t,e){return PF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},PF(t,e)}function lie(t,e,n){return e=cie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cie(t){var e=_0t(t,"string");return Up(e)=="symbol"?e:e+""}function _0t(t,e){if(Up(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function UF(){return UF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UF.apply(this,arguments)}var O0t=function(e){var n=e.yAxisId,r=UP(),s=LP(),i=Gse(n);return i==null?null:z.createElement(Em,UF({},i,{className:It("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(a){return ec(a,!0)}}))},Ad=function(t){function e(){return N0t(this,e),k0t(this,e,arguments)}return $0t(e,t),I0t(e,[{key:"render",value:function(){return z.createElement(O0t,this.props)}}])}(z.Component);lie(Ad,"displayName","YAxis");lie(Ad,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function z7(t){return U0t(t)||P0t(t)||R0t(t)||D0t()}function D0t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R0t(t,e){if(t){if(typeof t=="string")return LF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LF(t,e)}}function P0t(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function U0t(t){if(Array.isArray(t))return LF(t)}function LF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var jF=function(e,n,r,s,i){var o=wa(e,MP),a=wa(e,eN),l=[].concat(z7(o),z7(a)),c=wa(e,nN),u="".concat(s,"Id"),A=s[0],d=n;if(l.length&&(d=l.reduce(function(p,m){if(m.props[u]===r&&fl(m.props,"extendDomain")&&Ue(m.props[A])){var y=m.props[A];return[Math.min(p[0],y),Math.max(p[1],y)]}return p},d)),c.length){var f="".concat(A,"1"),h="".concat(A,"2");d=c.reduce(function(p,m){if(m.props[u]===r&&fl(m.props,"extendDomain")&&Ue(m.props[f])&&Ue(m.props[h])){var y=m.props[f],x=m.props[h];return[Math.min(p[0],y,x),Math.max(p[1],y,x)]}return p},d)}return i&&i.length&&(d=i.reduce(function(p,m){return Ue(m)?[Math.min(p[0],m),Math.max(p[1],m)]:p},d)),d},uie={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,A,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,A||l,d),h=n?n+c:c;return l._events[h]?l._events[h].fn?l._events[h]=[l._events[h],f]:l._events[h].push(f):(l._events[h]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,A;if(this._eventsCount===0)return c;for(A in u=this._events)e.call(u,A)&&c.push(n?A.slice(1):A);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,A=this._events[u];if(!A)return[];if(A.fn)return[A.fn];for(var d=0,f=A.length,h=new Array(f);d<f;d++)h[d]=A[d].fn;return h},a.prototype.listenerCount=function(c){var u=n?n+c:c,A=this._events[u];return A?A.fn?1:A.length:0},a.prototype.emit=function(c,u,A,d,f,h){var p=n?n+c:c;if(!this._events[p])return!1;var m=this._events[p],y=arguments.length,x,v;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,A),!0;case 4:return m.fn.call(m.context,u,A,d),!0;case 5:return m.fn.call(m.context,u,A,d,f),!0;case 6:return m.fn.call(m.context,u,A,d,f,h),!0}for(v=1,x=new Array(y-1);v<y;v++)x[v-1]=arguments[v];m.fn.apply(m.context,x)}else{var b=m.length,w;for(v=0;v<b;v++)switch(m[v].once&&this.removeListener(c,m[v].fn,void 0,!0),y){case 1:m[v].fn.call(m[v].context);break;case 2:m[v].fn.call(m[v].context,u);break;case 3:m[v].fn.call(m[v].context,u,A);break;case 4:m[v].fn.call(m[v].context,u,A,d);break;default:if(!x)for(w=1,x=new Array(y-1);w<y;w++)x[w-1]=arguments[w];m[v].fn.apply(m[v].context,x)}}return!0},a.prototype.on=function(c,u,A){return i(this,c,u,A,!1)},a.prototype.once=function(c,u,A){return i(this,c,u,A,!0)},a.prototype.removeListener=function(c,u,A,d){var f=n?n+c:c;if(!this._events[f])return this;if(!u)return o(this,f),this;var h=this._events[f];if(h.fn)h.fn===u&&(!d||h.once)&&(!A||h.context===A)&&o(this,f);else{for(var p=0,m=[],y=h.length;p<y;p++)(h[p].fn!==u||d&&!h[p].once||A&&h[p].context!==A)&&m.push(h[p]);m.length?this._events[f]=m.length===1?m[0]:m:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(uie);var L0t=uie.exports;const j0t=Gt(L0t);var IE=new j0t,kE="recharts.syncMouseEvents";function z0(t){"@babel/helpers - typeof";return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z0(t)}function M0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q0t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Aie(r.key),r)}}function H0t(t,e,n){return e&&Q0t(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function TE(t,e,n){return e=Aie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aie(t){var e=z0t(t,"string");return z0(e)=="symbol"?e:e+""}function z0t(t,e){if(z0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(z0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var V0t=function(){function t(){M0t(this,t),TE(this,"activeIndex",0),TE(this,"coordinateList",[]),TE(this,"layout","horizontal")}return H0t(t,[{key:"setDetails",value:function(n){var r,s=n.coordinateList,i=s===void 0?null:s,o=n.container,a=o===void 0?null:o,l=n.layout,c=l===void 0?null:l,u=n.offset,A=u===void 0?null:u,d=n.mouseHandlerCallback,f=d===void 0?null:d;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=c??this.layout,this.offset=A??this.offset,this.mouseHandlerCallback=f??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,a=s.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,A=i+l+c,d=o+this.offset.top+a/2+u;this.mouseHandlerCallback({pageX:A,pageY:d})}}}])}();function W0t(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],s=t==null?void 0:t[1];if(r&&s&&Ue(r)&&Ue(s))return!0}return!1}function G0t(t,e,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-s,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function die(t){var e=t.cx,n=t.cy,r=t.radius,s=t.startAngle,i=t.endAngle,o=pn(e,n,r,s),a=pn(e,n,r,i);return{points:[o,a],cx:e,cy:n,radius:r,startAngle:s,endAngle:i}}function K0t(t,e,n){var r,s,i,o;if(t==="horizontal")r=e.x,i=r,s=n.top,o=n.top+n.height;else if(t==="vertical")s=e.y,o=s,r=n.left,i=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,A=e.angle,d=pn(a,l,c,A),f=pn(a,l,u,A);r=d.x,s=d.y,i=f.x,o=f.y}else return die(e);return[{x:r,y:s},{x:i,y:o}]}function V0(t){"@babel/helpers - typeof";return V0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V0(t)}function V7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Fb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V7(Object(n),!0).forEach(function(r){X0t(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function X0t(t,e,n){return e=q0t(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q0t(t){var e=Y0t(t,"string");return V0(e)=="symbol"?e:e+""}function Y0t(t,e){if(V0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(V0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function J0t(t){var e,n,r=t.element,s=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,a=t.activePayload,l=t.offset,c=t.activeTooltipIndex,u=t.tooltipAxisBandSize,A=t.layout,d=t.chartName,f=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!f||!i||!o||d!=="ScatterChart"&&s!=="axis")return null;var h,p=FH;if(d==="ScatterChart")h=o,p=uht;else if(d==="BarChart")h=G0t(A,o,l,u),p=OP;else if(A==="radial"){var m=die(o),y=m.cx,x=m.cy,v=m.radius,b=m.startAngle,w=m.endAngle;h={cx:y,cy:x,startAngle:b,endAngle:w,innerRadius:v,outerRadius:v},p=use}else h={points:K0t(A,o,l)},p=FH;var C=Fb(Fb(Fb(Fb({stroke:"#ccc",pointerEvents:"none"},l),h),ut(f,!1)),{},{payload:a,payloadIndex:c,className:It("recharts-tooltip-cursor",f.className)});return z.isValidElement(f)?z.cloneElement(f,C):z.createElement(p,C)}var Z0t=["item"],ext=["children","className","width","height","style","compact","title","desc"];function Lp(t){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lp(t)}function ph(){return ph=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ph.apply(this,arguments)}function W7(t,e){return rxt(t)||nxt(t,e)||hie(t,e)||txt()}function txt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nxt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function rxt(t){if(Array.isArray(t))return t}function G7(t,e){if(t==null)return{};var n=sxt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sxt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ixt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oxt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pie(r.key),r)}}function axt(t,e,n){return e&&oxt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lxt(t,e,n){return e=TC(e),cxt(t,fie()?Reflect.construct(e,n||[],TC(t).constructor):e.apply(t,n))}function cxt(t,e){if(e&&(Lp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uxt(t)}function uxt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fie=function(){return!!t})()}function TC(t){return TC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},TC(t)}function Axt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MF(t,e)}function MF(t,e){return MF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},MF(t,e)}function jp(t){return hxt(t)||fxt(t)||hie(t)||dxt()}function dxt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hie(t,e){if(t){if(typeof t=="string")return QF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QF(t,e)}}function fxt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hxt(t){if(Array.isArray(t))return QF(t)}function QF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function K7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function we(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K7(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lt(t,e,n){return e=pie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pie(t){var e=pxt(t,"string");return Lp(e)=="symbol"?e:e+""}function pxt(t,e){if(Lp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mxt={xAxis:["bottom","top"],yAxis:["left","right"]},gxt={width:"100%",height:"100%"},mie={x:0,y:0};function $b(t){return t}var yxt=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},xxt=function(e,n,r,s){var i=n.find(function(u){return u&&u.index===r});if(i){if(e==="horizontal")return{x:i.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,a=s.radius;return we(we(we({},s),pn(s.cx,s.cy,a,o)),{},{angle:o,radius:a})}var l=i.coordinate,c=s.angle;return we(we(we({},s),pn(s.cx,s.cy,l,c)),{},{angle:c,radius:l})}return mie},rN=function(e,n){var r=n.graphicalItems,s=n.dataStartIndex,i=n.dataEndIndex,o=(r??[]).reduce(function(a,l){var c=l.props.data;return c&&c.length?[].concat(jp(a),jp(c)):a},[]);return o.length>0?o:e&&e.length&&Ue(s)&&Ue(i)?e.slice(s,i+1):[]};function gie(t){return t==="number"?[0,"auto"]:void 0}var HF=function(e,n,r,s){var i=e.graphicalItems,o=e.tooltipAxis,a=rN(n,e);return r<0||!i||!i.length||r>=a.length?null:i.reduce(function(l,c){var u,A=(u=c.props.data)!==null&&u!==void 0?u:n;A&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(A=A.slice(e.dataStartIndex,e.dataEndIndex+1));var d;if(o.dataKey&&!o.allowDuplicatedCategory){var f=A===void 0?a:A;d=yT(f,o.dataKey,s)}else d=A&&A[r]||a[r];return d?[].concat(jp(l),[sse(c,d)]):l},[])},X7=function(e,n,r,s){var i=s||{x:e.chartX,y:e.chartY},o=yxt(i,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=Out(o,a,c,l);if(u>=0&&c){var A=c[u]&&c[u].value,d=HF(e,n,u,A),f=xxt(r,a,u,i);return{activeTooltipIndex:u,activeLabel:A,activePayload:d,activeCoordinate:f}}return null},vxt=function(e,n){var r=n.axes,s=n.graphicalItems,i=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,A=e.children,d=e.stackOffset,f=Jre(u,i);return r.reduce(function(h,p){var m,y=p.type.defaultProps!==void 0?we(we({},p.type.defaultProps),p.props):p.props,x=y.type,v=y.dataKey,b=y.allowDataOverflow,w=y.allowDuplicatedCategory,C=y.scale,B=y.ticks,S=y.includeHidden,N=y[o];if(h[N])return h;var k=rN(e.data,{graphicalItems:s.filter(function(te){var ue,de=o in te.props?te.props[o]:(ue=te.type.defaultProps)===null||ue===void 0?void 0:ue[o];return de===N}),dataStartIndex:l,dataEndIndex:c}),O=k.length,U,P,V;W0t(y.domain,b,x)&&(U=iF(y.domain,null,b),f&&(x==="number"||C!=="auto")&&(V=dy(k,v,"category")));var W=gie(x);if(!U||U.length===0){var j,G=(j=y.domain)!==null&&j!==void 0?j:W;if(v){if(U=dy(k,v,x),x==="category"&&f){var D=wXe(U);w&&D?(P=U,U=yC(0,O)):w||(U=yH(G,U,p).reduce(function(te,ue){return te.indexOf(ue)>=0?te:[].concat(jp(te),[ue])},[]))}else if(x==="category")w?U=U.filter(function(te){return te!==""&&!Ht(te)}):U=yH(G,U,p).reduce(function(te,ue){return te.indexOf(ue)>=0||ue===""||Ht(ue)?te:[].concat(jp(te),[ue])},[]);else if(x==="number"){var M=Lut(k,s.filter(function(te){var ue,de,le=o in te.props?te.props[o]:(ue=te.type.defaultProps)===null||ue===void 0?void 0:ue[o],he="hide"in te.props?te.props.hide:(de=te.type.defaultProps)===null||de===void 0?void 0:de.hide;return le===N&&(S||!he)}),v,i,u);M&&(U=M)}f&&(x==="number"||C!=="auto")&&(V=dy(k,v,"category"))}else f?U=yC(0,O):a&&a[N]&&a[N].hasStack&&x==="number"?U=d==="expand"?[0,1]:rse(a[N].stackGroups,l,c):U=Yre(k,s.filter(function(te){var ue=o in te.props?te.props[o]:te.type.defaultProps[o],de="hide"in te.props?te.props.hide:te.type.defaultProps.hide;return ue===N&&(S||!de)}),x,u,!0);if(x==="number")U=jF(A,U,N,i,B),G&&(U=iF(G,U,b));else if(x==="category"&&G){var q=G,Z=U.every(function(te){return q.indexOf(te)>=0});Z&&(U=q)}}return we(we({},h),{},lt({},N,we(we({},y),{},{axisType:i,domain:U,categoricalDomain:V,duplicateDomain:P,originalDomain:(m=y.domain)!==null&&m!==void 0?m:W,isCategorical:f,layout:u})))},{})},bxt=function(e,n){var r=n.graphicalItems,s=n.Axis,i=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,A=e.children,d=rN(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),f=d.length,h=Jre(u,i),p=-1;return r.reduce(function(m,y){var x=y.type.defaultProps!==void 0?we(we({},y.type.defaultProps),y.props):y.props,v=x[o],b=gie("number");if(!m[v]){p++;var w;return h?w=yC(0,f):a&&a[v]&&a[v].hasStack?(w=rse(a[v].stackGroups,l,c),w=jF(A,w,v,i)):(w=iF(b,Yre(d,r.filter(function(C){var B,S,N=o in C.props?C.props[o]:(B=C.type.defaultProps)===null||B===void 0?void 0:B[o],k="hide"in C.props?C.props.hide:(S=C.type.defaultProps)===null||S===void 0?void 0:S.hide;return N===v&&!k}),"number",u),s.defaultProps.allowDataOverflow),w=jF(A,w,v,i)),we(we({},m),{},lt({},v,we(we({axisType:i},s.defaultProps),{},{hide:!0,orientation:Uo(mxt,"".concat(i,".").concat(p%2),null),domain:w,originalDomain:b,isCategorical:h,layout:u})))}return m},{})},wxt=function(e,n){var r=n.axisType,s=r===void 0?"xAxis":r,i=n.AxisComp,o=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.children,A="".concat(s,"Id"),d=wa(u,i),f={};return d&&d.length?f=vxt(e,{axes:d,graphicalItems:o,axisType:s,axisIdKey:A,stackGroups:a,dataStartIndex:l,dataEndIndex:c}):o&&o.length&&(f=bxt(e,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:A,stackGroups:a,dataStartIndex:l,dataEndIndex:c})),f},Cxt=function(e){var n=eu(e),r=ec(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:aP(r,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:iC(n,r)}},q7=function(e){var n=e.children,r=e.defaultShowTooltip,s=Ki(n,Fp),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},Sxt=function(e){return!e||!e.length?!1:e.some(function(n){var r=ic(n&&n.type);return r&&r.indexOf("Bar")>=0})},Y7=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Bxt=function(e,n){var r=e.props,s=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,a=e.yAxisMap,l=a===void 0?{}:a,c=r.width,u=r.height,A=r.children,d=r.margin||{},f=Ki(A,Fp),h=Ki(A,da),p=Object.keys(l).reduce(function(w,C){var B=l[C],S=B.orientation;return!B.mirror&&!B.hide?we(we({},w),{},lt({},S,w[S]+B.width)):w},{left:d.left||0,right:d.right||0}),m=Object.keys(o).reduce(function(w,C){var B=o[C],S=B.orientation;return!B.mirror&&!B.hide?we(we({},w),{},lt({},S,Uo(w,"".concat(S))+B.height)):w},{top:d.top||0,bottom:d.bottom||0}),y=we(we({},m),p),x=y.bottom;f&&(y.bottom+=f.props.height||Fp.defaultProps.height),h&&n&&(y=Put(y,s,r,n));var v=c-y.left-y.right,b=u-y.top-y.bottom;return we(we({brushBottom:x},y),{},{width:Math.max(v,0),height:Math.max(b,0)})},Nxt=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},yie=function(e){var n=e.chartName,r=e.GraphicalChild,s=e.defaultTooltipEventType,i=s===void 0?"axis":s,o=e.validateTooltipEventTypes,a=o===void 0?["axis"]:o,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,A=e.defaultProps,d=function(y,x){var v=x.graphicalItems,b=x.stackGroups,w=x.offset,C=x.updateId,B=x.dataStartIndex,S=x.dataEndIndex,N=y.barSize,k=y.layout,O=y.barGap,U=y.barCategoryGap,P=y.maxBarSize,V=Y7(k),W=V.numericAxisName,j=V.cateAxisName,G=Sxt(v),D=[];return v.forEach(function(M,q){var Z=rN(y.data,{graphicalItems:[M],dataStartIndex:B,dataEndIndex:S}),te=M.type.defaultProps!==void 0?we(we({},M.type.defaultProps),M.props):M.props,ue=te.dataKey,de=te.maxBarSize,le=te["".concat(W,"Id")],he=te["".concat(j,"Id")],ke={},Qe=l.reduce(function(Dt,rn){var cs=x["".concat(rn.axisType,"Map")],yr=te["".concat(rn.axisType,"Id")];cs&&cs[yr]||rn.axisType==="zAxis"||tf();var Zn=cs[yr];return we(we({},Dt),{},lt(lt({},rn.axisType,Zn),"".concat(rn.axisType,"Ticks"),ec(Zn)))},ke),xe=Qe[j],$e=Qe["".concat(j,"Ticks")],Fe=b&&b[le]&&b[le].hasStack&&Kut(M,b[le].stackGroups),be=ic(M.type).indexOf("Bar")>=0,it=iC(xe,$e),et=[],st=G&&Dut({barSize:N,stackGroups:b,totalSize:Nxt(Qe,j)});if(be){var rt,ht,dt=Ht(de)?P:de,cn=(rt=(ht=iC(xe,$e,!0))!==null&&ht!==void 0?ht:dt)!==null&&rt!==void 0?rt:0;et=Rut({barGap:O,barCategoryGap:U,bandSize:cn!==it?cn:it,sizeList:st[he],maxBarSize:dt}),cn!==it&&(et=et.map(function(Dt){return we(we({},Dt),{},{position:we(we({},Dt.position),{},{offset:Dt.position.offset-cn/2})})}))}var Yt=M&&M.type&&M.type.getComposedData;Yt&&D.push({props:we(we({},Yt(we(we({},Qe),{},{displayedData:Z,props:y,dataKey:ue,item:M,bandSize:it,barPosition:et,offset:w,stackedData:Fe,layout:k,dataStartIndex:B,dataEndIndex:S}))),{},lt(lt(lt({key:M.key||"item-".concat(q)},W,Qe[W]),j,Qe[j]),"animationId",C)),childIndex:OXe(M,y.children),item:M})}),D},f=function(y,x){var v=y.props,b=y.dataStartIndex,w=y.dataEndIndex,C=y.updateId;if(!dQ({props:v}))return null;var B=v.children,S=v.layout,N=v.stackOffset,k=v.data,O=v.reverseStackOrder,U=Y7(S),P=U.numericAxisName,V=U.cateAxisName,W=wa(B,r),j=Wut(k,W,"".concat(P,"Id"),"".concat(V,"Id"),N,O),G=l.reduce(function(te,ue){var de="".concat(ue.axisType,"Map");return we(we({},te),{},lt({},de,wxt(v,we(we({},ue),{},{graphicalItems:W,stackGroups:ue.axisType===P&&j,dataStartIndex:b,dataEndIndex:w}))))},{}),D=Bxt(we(we({},G),{},{props:v,graphicalItems:W}),x==null?void 0:x.legendBBox);Object.keys(G).forEach(function(te){G[te]=u(v,G[te],D,te.replace("Map",""),n)});var M=G["".concat(V,"Map")],q=Cxt(M),Z=d(v,we(we({},G),{},{dataStartIndex:b,dataEndIndex:w,updateId:C,graphicalItems:W,stackGroups:j,offset:D}));return we(we({formattedGraphicalItems:Z,graphicalItems:W,offset:D,stackGroups:j},q),G)},h=function(m){function y(x){var v,b,w;return ixt(this,y),w=lxt(this,y,[x]),lt(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),lt(w,"accessibilityManager",new V0t),lt(w,"handleLegendBBoxUpdate",function(C){if(C){var B=w.state,S=B.dataStartIndex,N=B.dataEndIndex,k=B.updateId;w.setState(we({legendBBox:C},f({props:w.props,dataStartIndex:S,dataEndIndex:N,updateId:k},we(we({},w.state),{},{legendBBox:C}))))}}),lt(w,"handleReceiveSyncEvent",function(C,B,S){if(w.props.syncId===C){if(S===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(B)}}),lt(w,"handleBrushChange",function(C){var B=C.startIndex,S=C.endIndex;if(B!==w.state.dataStartIndex||S!==w.state.dataEndIndex){var N=w.state.updateId;w.setState(function(){return we({dataStartIndex:B,dataEndIndex:S},f({props:w.props,dataStartIndex:B,dataEndIndex:S,updateId:N},w.state))}),w.triggerSyncEvent({dataStartIndex:B,dataEndIndex:S})}}),lt(w,"handleMouseEnter",function(C){var B=w.getMouseInfo(C);if(B){var S=we(we({},B),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var N=w.props.onMouseEnter;xt(N)&&N(S,C)}}),lt(w,"triggeredAfterMouseMove",function(C){var B=w.getMouseInfo(C),S=B?we(we({},B),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(S),w.triggerSyncEvent(S);var N=w.props.onMouseMove;xt(N)&&N(S,C)}),lt(w,"handleItemMouseEnter",function(C){w.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),lt(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),lt(w,"handleMouseMove",function(C){C.persist(),w.throttleTriggeredAfterMouseMove(C)}),lt(w,"handleMouseLeave",function(C){w.throttleTriggeredAfterMouseMove.cancel();var B={isTooltipActive:!1};w.setState(B),w.triggerSyncEvent(B);var S=w.props.onMouseLeave;xt(S)&&S(B,C)}),lt(w,"handleOuterEvent",function(C){var B=_Xe(C),S=Uo(w.props,"".concat(B));if(B&&xt(S)){var N,k;/.*touch.*/i.test(B)?k=w.getMouseInfo(C.changedTouches[0]):k=w.getMouseInfo(C),S((N=k)!==null&&N!==void 0?N:{},C)}}),lt(w,"handleClick",function(C){var B=w.getMouseInfo(C);if(B){var S=we(we({},B),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var N=w.props.onClick;xt(N)&&N(S,C)}}),lt(w,"handleMouseDown",function(C){var B=w.props.onMouseDown;if(xt(B)){var S=w.getMouseInfo(C);B(S,C)}}),lt(w,"handleMouseUp",function(C){var B=w.props.onMouseUp;if(xt(B)){var S=w.getMouseInfo(C);B(S,C)}}),lt(w,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),lt(w,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.handleMouseDown(C.changedTouches[0])}),lt(w,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.handleMouseUp(C.changedTouches[0])}),lt(w,"handleDoubleClick",function(C){var B=w.props.onDoubleClick;if(xt(B)){var S=w.getMouseInfo(C);B(S,C)}}),lt(w,"handleContextMenu",function(C){var B=w.props.onContextMenu;if(xt(B)){var S=w.getMouseInfo(C);B(S,C)}}),lt(w,"triggerSyncEvent",function(C){w.props.syncId!==void 0&&IE.emit(kE,w.props.syncId,C,w.eventEmitterSymbol)}),lt(w,"applySyncEvent",function(C){var B=w.props,S=B.layout,N=B.syncMethod,k=w.state.updateId,O=C.dataStartIndex,U=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)w.setState(we({dataStartIndex:O,dataEndIndex:U},f({props:w.props,dataStartIndex:O,dataEndIndex:U,updateId:k},w.state)));else if(C.activeTooltipIndex!==void 0){var P=C.chartX,V=C.chartY,W=C.activeTooltipIndex,j=w.state,G=j.offset,D=j.tooltipTicks;if(!G)return;if(typeof N=="function")W=N(D,C);else if(N==="value"){W=-1;for(var M=0;M<D.length;M++)if(D[M].value===C.activeLabel){W=M;break}}var q=we(we({},G),{},{x:G.left,y:G.top}),Z=Math.min(P,q.x+q.width),te=Math.min(V,q.y+q.height),ue=D[W]&&D[W].value,de=HF(w.state,w.props.data,W),le=D[W]?{x:S==="horizontal"?D[W].coordinate:Z,y:S==="horizontal"?te:D[W].coordinate}:mie;w.setState(we(we({},C),{},{activeLabel:ue,activeCoordinate:le,activePayload:de,activeTooltipIndex:W}))}else w.setState(C)}),lt(w,"renderCursor",function(C){var B,S=w.state,N=S.isTooltipActive,k=S.activeCoordinate,O=S.activePayload,U=S.offset,P=S.activeTooltipIndex,V=S.tooltipAxisBandSize,W=w.getTooltipEventType(),j=(B=C.props.active)!==null&&B!==void 0?B:N,G=w.props.layout,D=C.key||"_recharts-cursor";return ie.createElement(J0t,{key:D,activeCoordinate:k,activePayload:O,activeTooltipIndex:P,chartName:n,element:C,isActive:j,layout:G,offset:U,tooltipAxisBandSize:V,tooltipEventType:W})}),lt(w,"renderPolarAxis",function(C,B,S){var N=Uo(C,"type.axisType"),k=Uo(w.state,"".concat(N,"Map")),O=C.type.defaultProps,U=O!==void 0?we(we({},O),C.props):C.props,P=k&&k[U["".concat(N,"Id")]];return z.cloneElement(C,we(we({},P),{},{className:It(N,P.className),key:C.key||"".concat(B,"-").concat(S),ticks:ec(P,!0)}))}),lt(w,"renderPolarGrid",function(C){var B=C.props,S=B.radialLines,N=B.polarAngles,k=B.polarRadius,O=w.state,U=O.radiusAxisMap,P=O.angleAxisMap,V=eu(U),W=eu(P),j=W.cx,G=W.cy,D=W.innerRadius,M=W.outerRadius;return z.cloneElement(C,{polarAngles:Array.isArray(N)?N:ec(W,!0).map(function(q){return q.coordinate}),polarRadius:Array.isArray(k)?k:ec(V,!0).map(function(q){return q.coordinate}),cx:j,cy:G,innerRadius:D,outerRadius:M,key:C.key||"polar-grid",radialLines:S})}),lt(w,"renderLegend",function(){var C=w.state.formattedGraphicalItems,B=w.props,S=B.children,N=B.width,k=B.height,O=w.props.margin||{},U=N-(O.left||0)-(O.right||0),P=Xre({children:S,formattedGraphicalItems:C,legendWidth:U,legendContent:c});if(!P)return null;var V=P.item,W=G7(P,Z0t);return z.cloneElement(V,we(we({},W),{},{chartWidth:N,chartHeight:k,margin:O,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),lt(w,"renderTooltip",function(){var C,B=w.props,S=B.children,N=B.accessibilityLayer,k=Ki(S,gi);if(!k)return null;var O=w.state,U=O.isTooltipActive,P=O.activeCoordinate,V=O.activePayload,W=O.activeLabel,j=O.offset,G=(C=k.props.active)!==null&&C!==void 0?C:U;return z.cloneElement(k,{viewBox:we(we({},j),{},{x:j.left,y:j.top}),active:G,label:W,payload:G?V:[],coordinate:P,accessibilityLayer:N})}),lt(w,"renderBrush",function(C){var B=w.props,S=B.margin,N=B.data,k=w.state,O=k.offset,U=k.dataStartIndex,P=k.dataEndIndex,V=k.updateId;return z.cloneElement(C,{key:C.key||"_recharts-brush",onChange:Eb(w.handleBrushChange,C.props.onChange),data:N,x:Ue(C.props.x)?C.props.x:O.left,y:Ue(C.props.y)?C.props.y:O.top+O.height+O.brushBottom-(S.bottom||0),width:Ue(C.props.width)?C.props.width:O.width,startIndex:U,endIndex:P,updateId:"brush-".concat(V)})}),lt(w,"renderReferenceElement",function(C,B,S){if(!C)return null;var N=w,k=N.clipPathId,O=w.state,U=O.xAxisMap,P=O.yAxisMap,V=O.offset,W=C.type.defaultProps||{},j=C.props,G=j.xAxisId,D=G===void 0?W.xAxisId:G,M=j.yAxisId,q=M===void 0?W.yAxisId:M;return z.cloneElement(C,{key:C.key||"".concat(B,"-").concat(S),xAxis:U[D],yAxis:P[q],viewBox:{x:V.left,y:V.top,width:V.width,height:V.height},clipPathId:k})}),lt(w,"renderActivePoints",function(C){var B=C.item,S=C.activePoint,N=C.basePoint,k=C.childIndex,O=C.isRange,U=[],P=B.props.key,V=B.item.type.defaultProps!==void 0?we(we({},B.item.type.defaultProps),B.item.props):B.item.props,W=V.activeDot,j=V.dataKey,G=we(we({index:k,dataKey:j,cx:S.x,cy:S.y,r:4,fill:_P(B.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value},ut(W,!1)),$2(W));return U.push(y.renderActiveDot(W,G,"".concat(P,"-activePoint-").concat(k))),N?U.push(y.renderActiveDot(W,we(we({},G),{},{cx:N.x,cy:N.y}),"".concat(P,"-basePoint-").concat(k))):O&&U.push(null),U}),lt(w,"renderGraphicChild",function(C,B,S){var N=w.filterFormatItem(C,B,S);if(!N)return null;var k=w.getTooltipEventType(),O=w.state,U=O.isTooltipActive,P=O.tooltipAxis,V=O.activeTooltipIndex,W=O.activeLabel,j=w.props.children,G=Ki(j,gi),D=N.props,M=D.points,q=D.isRange,Z=D.baseLine,te=N.item.type.defaultProps!==void 0?we(we({},N.item.type.defaultProps),N.item.props):N.item.props,ue=te.activeDot,de=te.hide,le=te.activeBar,he=te.activeShape,ke=!!(!de&&U&&G&&(ue||le||he)),Qe={};k!=="axis"&&G&&G.props.trigger==="click"?Qe={onClick:Eb(w.handleItemMouseEnter,C.props.onClick)}:k!=="axis"&&(Qe={onMouseLeave:Eb(w.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:Eb(w.handleItemMouseEnter,C.props.onMouseEnter)});var xe=z.cloneElement(C,we(we({},N.props),Qe));function $e(rn){return typeof P.dataKey=="function"?P.dataKey(rn.payload):null}if(ke)if(V>=0){var Fe,be;if(P.dataKey&&!P.allowDuplicatedCategory){var it=typeof P.dataKey=="function"?$e:"payload.".concat(P.dataKey.toString());Fe=yT(M,it,W),be=q&&Z&&yT(Z,it,W)}else Fe=M==null?void 0:M[V],be=q&&Z&&Z[V];if(he||le){var et=C.props.activeIndex!==void 0?C.props.activeIndex:V;return[z.cloneElement(C,we(we(we({},N.props),Qe),{},{activeIndex:et})),null,null]}if(!Ht(Fe))return[xe].concat(jp(w.renderActivePoints({item:N,activePoint:Fe,basePoint:be,childIndex:V,isRange:q})))}else{var st,rt=(st=w.getItemByXY(w.state.activeCoordinate))!==null&&st!==void 0?st:{graphicalItem:xe},ht=rt.graphicalItem,dt=ht.item,cn=dt===void 0?C:dt,Yt=ht.childIndex,Dt=we(we(we({},N.props),Qe),{},{activeIndex:Yt});return[z.cloneElement(cn,Dt),null,null]}return q?[xe,null,null]:[xe,null]}),lt(w,"renderCustomized",function(C,B,S){return z.cloneElement(C,we(we({key:"recharts-customized-".concat(S)},w.props),w.state))}),lt(w,"renderMap",{CartesianGrid:{handler:$b,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:$b},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:$b},YAxis:{handler:$b},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((v=x.id)!==null&&v!==void 0?v:N3("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=Gne(w.triggeredAfterMouseMove,(b=x.throttleDelay)!==null&&b!==void 0?b:1e3/60),w.state={},w}return Axt(y,m),axt(y,[{key:"componentDidMount",value:function(){var v,b;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(b=this.props.margin.top)!==null&&b!==void 0?b:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var v=this.props,b=v.children,w=v.data,C=v.height,B=v.layout,S=Ki(b,gi);if(S){var N=S.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var k=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,O=HF(this.state,w,N,k),U=this.state.tooltipTicks[N].coordinate,P=(this.state.offset.top+C)/2,V=B==="horizontal",W=V?{x:U,y:P}:{y:U,x:P},j=this.state.formattedGraphicalItems.find(function(D){var M=D.item;return M.type.name==="Scatter"});j&&(W=we(we({},W),j.props.points[N].tooltipPosition),O=j.props.points[N].tooltipPayload);var G={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:k,activePayload:O,activeCoordinate:W};this.setState(G),this.renderCursor(S),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(v,b){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==b.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==v.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==v.margin){var w,C;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(v){vT([Ki(v.children,gi)],[Ki(this.props.children,gi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var v=Ki(this.props.children,gi);if(v&&typeof v.props.shared=="boolean"){var b=v.props.shared?"axis":"item";return a.indexOf(b)>=0?b:i}return i}},{key:"getMouseInfo",value:function(v){if(!this.container)return null;var b=this.container,w=b.getBoundingClientRect(),C=lot(w),B={chartX:Math.round(v.pageX-C.left),chartY:Math.round(v.pageY-C.top)},S=w.width/b.offsetWidth||1,N=this.inRange(B.chartX,B.chartY,S);if(!N)return null;var k=this.state,O=k.xAxisMap,U=k.yAxisMap,P=this.getTooltipEventType(),V=X7(this.state,this.props.data,this.props.layout,N);if(P!=="axis"&&O&&U){var W=eu(O).scale,j=eu(U).scale,G=W&&W.invert?W.invert(B.chartX):null,D=j&&j.invert?j.invert(B.chartY):null;return we(we({},B),{},{xValue:G,yValue:D},V)}return V?we(we({},B),V):null}},{key:"inRange",value:function(v,b){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,B=v/w,S=b/w;if(C==="horizontal"||C==="vertical"){var N=this.state.offset,k=B>=N.left&&B<=N.left+N.width&&S>=N.top&&S<=N.top+N.height;return k?{x:B,y:S}:null}var O=this.state,U=O.angleAxisMap,P=O.radiusAxisMap;if(U&&P){var V=eu(U);return bH({x:B,y:S},V)}return null}},{key:"parseEventsOfWrapper",value:function(){var v=this.props.children,b=this.getTooltipEventType(),w=Ki(v,gi),C={};w&&b==="axis"&&(w.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var B=$2(this.props,this.handleOuterEvent);return we(we({},B),C)}},{key:"addListener",value:function(){IE.on(kE,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){IE.removeListener(kE,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(v,b,w){for(var C=this.state.formattedGraphicalItems,B=0,S=C.length;B<S;B++){var N=C[B];if(N.item===v||N.props.key===v.key||b===ic(N.item.type)&&w===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var v=this.clipPathId,b=this.state.offset,w=b.left,C=b.top,B=b.height,S=b.width;return ie.createElement("defs",null,ie.createElement("clipPath",{id:v},ie.createElement("rect",{x:w,y:C,height:B,width:S})))}},{key:"getXScales",value:function(){var v=this.state.xAxisMap;return v?Object.entries(v).reduce(function(b,w){var C=W7(w,2),B=C[0],S=C[1];return we(we({},b),{},lt({},B,S.scale))},{}):null}},{key:"getYScales",value:function(){var v=this.state.yAxisMap;return v?Object.entries(v).reduce(function(b,w){var C=W7(w,2),B=C[0],S=C[1];return we(we({},b),{},lt({},B,S.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(v){var b;return(b=this.state.xAxisMap)===null||b===void 0||(b=b[v])===null||b===void 0?void 0:b.scale}},{key:"getYScaleByAxisId",value:function(v){var b;return(b=this.state.yAxisMap)===null||b===void 0||(b=b[v])===null||b===void 0?void 0:b.scale}},{key:"getItemByXY",value:function(v){var b=this.state,w=b.formattedGraphicalItems,C=b.activeItem;if(w&&w.length)for(var B=0,S=w.length;B<S;B++){var N=w[B],k=N.props,O=N.item,U=O.type.defaultProps!==void 0?we(we({},O.type.defaultProps),O.props):O.props,P=ic(O.type);if(P==="Bar"){var V=(k.data||[]).find(function(D){return Vft(v,D)});if(V)return{graphicalItem:N,payload:V}}else if(P==="RadialBar"){var W=(k.data||[]).find(function(D){return bH(v,D)});if(W)return{graphicalItem:N,payload:W}}else if(q3(N,C)||Y3(N,C)||L0(N,C)){var j=zpt({graphicalItem:N,activeTooltipItem:C,itemData:U.data}),G=U.activeIndex===void 0?j:U.activeIndex;return{graphicalItem:we(we({},N),{},{childIndex:G}),payload:L0(N,C)?U.data[j]:N.props.data[j]}}}return null}},{key:"render",value:function(){var v=this;if(!dQ(this))return null;var b=this.props,w=b.children,C=b.className,B=b.width,S=b.height,N=b.style,k=b.compact,O=b.title,U=b.desc,P=G7(b,ext),V=ut(P,!1);if(k)return ie.createElement(F7,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ie.createElement(wT,ph({},V,{width:B,height:S,title:O,desc:U}),this.renderClipPath(),hQ(w,this.renderMap)));if(this.props.accessibilityLayer){var W,j;V.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,V.role=(j=this.props.role)!==null&&j!==void 0?j:"application",V.onKeyDown=function(D){v.accessibilityManager.keyboardEvent(D)},V.onFocus=function(){v.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return ie.createElement(F7,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ie.createElement("div",ph({className:It("recharts-wrapper",C),style:we({position:"relative",cursor:"default",width:B,height:S},N)},G,{ref:function(M){v.container=M}}),ie.createElement(wT,ph({},V,{width:B,height:S,title:O,desc:U,style:gxt}),this.renderClipPath(),hQ(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(z.Component);lt(h,"displayName",n),lt(h,"defaultProps",we({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},A)),lt(h,"getDerivedStateFromProps",function(m,y){var x=m.dataKey,v=m.data,b=m.children,w=m.width,C=m.height,B=m.layout,S=m.stackOffset,N=m.margin,k=y.dataStartIndex,O=y.dataEndIndex;if(y.updateId===void 0){var U=q7(m);return we(we(we({},U),{},{updateId:0},f(we(we({props:m},U),{},{updateId:0}),y)),{},{prevDataKey:x,prevData:v,prevWidth:w,prevHeight:C,prevLayout:B,prevStackOffset:S,prevMargin:N,prevChildren:b})}if(x!==y.prevDataKey||v!==y.prevData||w!==y.prevWidth||C!==y.prevHeight||B!==y.prevLayout||S!==y.prevStackOffset||!_h(N,y.prevMargin)){var P=q7(m),V={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},W=we(we({},X7(y,v,B)),{},{updateId:y.updateId+1}),j=we(we(we({},P),V),W);return we(we(we({},j),f(we({props:m},j),y)),{},{prevDataKey:x,prevData:v,prevWidth:w,prevHeight:C,prevLayout:B,prevStackOffset:S,prevMargin:N,prevChildren:b})}if(!vT(b,y.prevChildren)){var G,D,M,q,Z=Ki(b,Fp),te=Z&&(G=(D=Z.props)===null||D===void 0?void 0:D.startIndex)!==null&&G!==void 0?G:k,ue=Z&&(M=(q=Z.props)===null||q===void 0?void 0:q.endIndex)!==null&&M!==void 0?M:O,de=te!==k||ue!==O,le=!Ht(v),he=le&&!de?y.updateId:y.updateId+1;return we(we({updateId:he},f(we(we({props:m},y),{},{updateId:he,dataStartIndex:te,dataEndIndex:ue}),y)),{},{prevChildren:b,dataStartIndex:te,dataEndIndex:ue})}return null}),lt(h,"renderActiveDot",function(m,y,x){var v;return z.isValidElement(m)?v=z.cloneElement(m,y):xt(m)?v=m(y):v=ie.createElement(G3,y),ie.createElement(yn,{className:"recharts-active-dot",key:x},v)});var p=z.forwardRef(function(y,x){return ie.createElement(h,ph({},y,{ref:x}))});return p.displayName=h.displayName,p},_b=yie({chartName:"BarChart",GraphicalChild:pi,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ud},{axisType:"yAxis",AxisComp:Ad}],formatAxisMap:kgt}),Ext=yie({chartName:"RadarChart",GraphicalChild:Uv,axisComponents:[{axisType:"angleAxis",AxisComp:Pv},{axisType:"radiusAxis",AxisComp:Rv}],formatAxisMap:iAt,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Ixt=()=>{const{sessionId:t}=of(),e=Qs(),n=z.useRef(null),[r,s]=z.useState(!0),[i,o]=z.useState(""),[a,l]=z.useState(null),[c,u]=z.useState(null),[A,d]=z.useState([]),[f,h]=z.useState(null),[p,m]=z.useState(""),[y,x]=z.useState(null);z.useEffect(()=>{(async()=>{if(t)try{s(!0);const N=await MVe(t);l(N.metrics),u(N.aiAnalysis),d(N.heatmapData),m(N.studentName),x(N.testDate),N.metrics.comparisonWithPeers&&h(N.metrics.comparisonWithPeers),s(!1)}catch(N){console.error("Failed to load report:",N),o("리포트를 불러오는데 실패했습니다."),s(!1)}})()},[t]),z.useEffect(()=>{if(A.length===0||!n.current)return;const S=n.current,N=S.getContext("2d");if(!N)return;const k=A[0],{resolution:O,cells:U}=k;N.clearRect(0,0,S.width,S.height);const P=Math.max(...U.map(D=>D.intensity)),V=O.width,W=O.height,j=S.width/V,G=S.height/W;U.forEach(D=>{const M=P>0?D.intensity/P:0,q=270,Z=70,te=90-M*50;N.fillStyle=`hsl(${q}, ${Z}%, ${te}%)`,N.fillRect(D.x*j,D.y*G,j,G)}),N.strokeStyle="rgba(147, 51, 234, 0.1)",N.lineWidth=1;for(let D=0;D<=V;D++)N.beginPath(),N.moveTo(D*j,0),N.lineTo(D*j,S.height),N.stroke();for(let D=0;D<=W;D++)N.beginPath(),N.moveTo(0,D*G),N.lineTo(S.width,D*G),N.stroke()},[A]);const v=()=>a?[{name:"도약폭",value:a.averageSaccadeAmplitude,unit:"px",optimal:200},{name:"도약 변동성",value:a.saccadeVariability,unit:"px",optimal:50},{name:"도약 속도",value:a.averageSaccadeVelocity,unit:"px/s",optimal:1e3},{name:"최적 착지율",value:a.optimalLandingRate,unit:"%",optimal:70},{name:"줄바꿈 정확도",value:a.returnSweepAccuracy,unit:"%",optimal:80},{name:"경로 효율성",value:a.scanPathEfficiency*100,unit:"%",optimal:70}]:[],b=()=>a?[{name:"평균 응시시간",value:a.averageFixationDuration,unit:"ms",optimal:250},{name:"단어당 응시",value:a.fixationsPerWord,unit:"회",optimal:1.2},{name:"역행률",value:a.regressionRate,unit:"%",optimal:15},{name:"어휘 격차",value:a.vocabularyGapScore,unit:"점",optimal:30}]:[],w=()=>a?[{name:"읽기 속도",value:a.wordsPerMinute,unit:"WPM",optimal:150},{name:"리듬 규칙성",value:a.rhythmRegularity*100,unit:"%",optimal:70},{name:"체력 점수",value:a.staminaScore,unit:"점",optimal:70}]:[],C=()=>a?[{category:"도약 품질",value:a.averageSaccadeAmplitude/300*100,fullMark:100},{category:"응시 효율",value:250/a.averageFixationDuration*100,fullMark:100},{category:"읽기 속도",value:a.wordsPerMinute/200*100,fullMark:100},{category:"경로 효율",value:a.scanPathEfficiency*100,fullMark:100},{category:"이해도",value:(a.gazeComprehensionCorrelation+1)*50,fullMark:100}]:[],B=()=>{alert("PDF 내보내기 기능은 곧 추가될 예정입니다.")};return r?g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),g.jsx("p",{className:"text-foreground",children:"리포트를 생성하는 중..."})]})}):i?g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"text-destructive mb-4",children:i}),g.jsx("button",{onClick:()=>e("/student/dashboard"),className:"px-6 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90",children:"대시보드로 돌아가기"})]})}):!a||!c?g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:g.jsx("p",{className:"text-foreground",children:"리포트 데이터를 찾을 수 없습니다."})}):g.jsx("div",{className:"min-h-screen bg-background py-8",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"mb-8",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Vision TEST 결과"}),g.jsxs("p",{className:"text-muted-foreground",children:[p," | ",y?new Date(y).toLocaleDateString("ko-KR"):""]})]}),g.jsx("button",{onClick:B,className:"px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:"PDF 내보내기"})]}),g.jsx("div",{className:"bg-gradient-to-br from-primary/10 to-primary/5 rounded-2xl p-8 border border-primary/20",children:g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"종합 시선 추적 점수"}),g.jsx("div",{className:"text-6xl font-bold text-primary mb-2",children:a.overallEyeTrackingScore.toFixed(1)}),g.jsx("p",{className:"text-muted-foreground",children:"/ 100점"})]})})]}),g.jsxs("div",{className:"mb-8",children:[g.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"AI 분석 결과"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[g.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center",children:[g.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"강점"]}),g.jsx("ul",{className:"space-y-2",children:c.strengths.map((S,N)=>g.jsxs("li",{className:"text-foreground text-sm flex items-start",children:[g.jsx("span",{className:"text-primary mr-2",children:"•"}),g.jsx("span",{children:S})]},N))})]}),g.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[g.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center",children:[g.jsx("span",{className:"text-yellow-500 mr-2",children:"⚠"}),"개선점"]}),g.jsx("ul",{className:"space-y-2",children:c.weaknesses.map((S,N)=>g.jsxs("li",{className:"text-foreground text-sm flex items-start",children:[g.jsx("span",{className:"text-primary mr-2",children:"•"}),g.jsx("span",{children:S})]},N))})]}),g.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[g.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center",children:[g.jsx("span",{className:"text-blue-500 mr-2",children:"💡"}),"추천 사항"]}),g.jsx("ul",{className:"space-y-2",children:c.recommendations.map((S,N)=>g.jsxs("li",{className:"text-foreground text-sm flex items-start",children:[g.jsx("span",{className:"text-primary mr-2",children:"•"}),g.jsx("span",{children:S})]},N))})]})]}),g.jsxs("div",{className:"mt-6 bg-card rounded-2xl p-6 shadow-lg",children:[g.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"읽기 전략 분석"}),g.jsx("p",{className:"text-foreground",children:c.readingStrategy})]})]}),g.jsxs("div",{className:"mb-8",children:[g.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"세부 메트릭"}),g.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg mb-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"종합 성능 레이더"}),g.jsx(Ag,{width:"100%",height:400,children:g.jsxs(Ext,{data:C(),children:[g.jsx(wse,{stroke:"hsl(var(--border))"}),g.jsx(Pv,{dataKey:"category",tick:{fill:"hsl(var(--foreground))"}}),g.jsx(Rv,{angle:90,domain:[0,100],tick:{fill:"hsl(var(--muted-foreground))"}}),g.jsx(Uv,{name:"내 점수",dataKey:"value",stroke:"hsl(var(--primary))",fill:"hsl(var(--primary))",fillOpacity:.3}),g.jsx(gi,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),g.jsx(da,{})]})})]}),g.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg mb-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"A. 눈 움직임 패턴"}),g.jsx(Ag,{width:"100%",height:300,children:g.jsxs(_b,{data:v(),children:[g.jsx(zg,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),g.jsx(ud,{dataKey:"name",tick:{fill:"hsl(var(--foreground))"}}),g.jsx(Ad,{tick:{fill:"hsl(var(--muted-foreground))"}}),g.jsx(gi,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},formatter:(S,N,k)=>[`${S.toFixed(1)} ${k.payload.unit}`,"현재 값"]}),g.jsx(da,{}),g.jsx(pi,{dataKey:"value",fill:"hsl(var(--primary))",name:"현재 값"}),g.jsx(pi,{dataKey:"optimal",fill:"hsl(var(--muted))",name:"목표 값"})]})})]}),g.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg mb-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"B. 응시 행동"}),g.jsx(Ag,{width:"100%",height:300,children:g.jsxs(_b,{data:b(),children:[g.jsx(zg,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),g.jsx(ud,{dataKey:"name",tick:{fill:"hsl(var(--foreground))"}}),g.jsx(Ad,{tick:{fill:"hsl(var(--muted-foreground))"}}),g.jsx(gi,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},formatter:(S,N,k)=>[`${S.toFixed(1)} ${k.payload.unit}`,"현재 값"]}),g.jsx(da,{}),g.jsx(pi,{dataKey:"value",fill:"hsl(var(--primary))",name:"현재 값"}),g.jsx(pi,{dataKey:"optimal",fill:"hsl(var(--muted))",name:"목표 값"})]})})]}),g.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg mb-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"C. 읽기 속도 & 리듬"}),g.jsx(Ag,{width:"100%",height:300,children:g.jsxs(_b,{data:w(),children:[g.jsx(zg,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),g.jsx(ud,{dataKey:"name",tick:{fill:"hsl(var(--foreground))"}}),g.jsx(Ad,{tick:{fill:"hsl(var(--muted-foreground))"}}),g.jsx(gi,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},formatter:(S,N,k)=>[`${S.toFixed(1)} ${k.payload.unit}`,"현재 값"]}),g.jsx(da,{}),g.jsx(pi,{dataKey:"value",fill:"hsl(var(--primary))",name:"현재 값"}),g.jsx(pi,{dataKey:"optimal",fill:"hsl(var(--muted))",name:"목표 값"})]})})]})]}),g.jsxs("div",{className:"mb-8",children:[g.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"집중도 히트맵"}),g.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[g.jsx("p",{className:"text-muted-foreground mb-4",children:"밝은 영역일수록 더 오래 응시한 부분입니다."}),g.jsx("div",{className:"flex justify-center",children:g.jsx("canvas",{ref:n,width:1280,height:720,className:"max-w-full h-auto border border-border rounded-lg"})})]})]}),f&&g.jsxs("div",{className:"mb-8",children:[g.jsxs("h2",{className:"text-2xl font-bold text-foreground mb-4",children:["또래 비교 (학년: ",f.grade,")"]}),g.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg",children:[g.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["백분위: ",f.percentileRank,"% | 비교 대상: ",f.sampleSize,"명"]}),g.jsx(Ag,{width:"100%",height:400,children:g.jsxs(_b,{data:Object.entries(f.metricsComparison).map(([S,N])=>({metric:S,myValue:N.studentValue,peerAverage:N.peerAverage})),children:[g.jsx(zg,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),g.jsx(ud,{dataKey:"metric",tick:{fill:"hsl(var(--foreground))"}}),g.jsx(Ad,{tick:{fill:"hsl(var(--muted-foreground))"}}),g.jsx(gi,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),g.jsx(da,{}),g.jsx(pi,{dataKey:"myValue",fill:"hsl(var(--primary))",name:"내 점수"}),g.jsx(pi,{dataKey:"peerAverage",fill:"hsl(var(--muted))",name:"또래 평균"})]})})]})]}),g.jsxs("div",{className:"flex gap-4 justify-center",children:[g.jsx("button",{onClick:()=>e("/student/dashboard"),className:"px-6 py-3 bg-muted text-foreground rounded-lg hover:bg-muted/80 transition-colors",children:"대시보드로"}),g.jsx("button",{onClick:B,className:"px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:"PDF 다운로드"})]})]})})},kxt=new bce({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});function Txt(){return g.jsx(Cce,{client:kxt,children:g.jsx(Wle,{children:g.jsxs(Lle,{children:[g.jsx(Vn,{path:"/login",element:g.jsx($Ae,{})}),g.jsx(Vn,{path:"/register",element:g.jsx(_Ae,{})}),g.jsx(Vn,{path:"/unauthorized",element:g.jsx(g1e,{})}),g.jsx(Vn,{path:"/dashboard",element:g.jsx(As,{allowedRoles:["student"],children:g.jsx(OAe,{})})}),g.jsx(Vn,{path:"/test/start/:templateCode",element:g.jsx(As,{allowedRoles:["student"],children:g.jsx(DAe,{})})}),g.jsx(Vn,{path:"/test/survey/:sessionId",element:g.jsx(As,{allowedRoles:["student"],children:g.jsx(RAe,{})})}),g.jsx(Vn,{path:"/test/session/:sessionId",element:g.jsx(As,{allowedRoles:["student"],children:g.jsx(UAe,{})})}),g.jsx(Vn,{path:"/test/result/:sessionId",element:g.jsx(As,{allowedRoles:["student","admin","parent","teacher"],children:g.jsx(Dme,{})})}),g.jsx(Vn,{path:"/student/vision/test/:sessionId",element:g.jsx(As,{allowedRoles:["student"],children:g.jsx(HVe,{})})}),g.jsx(Vn,{path:"/student/vision/result/:sessionId",element:g.jsx(As,{allowedRoles:["student","admin","parent","teacher"],children:g.jsx(Ixt,{})})}),g.jsx(Vn,{path:"/parent/dashboard",element:g.jsx(As,{allowedRoles:["parent"],children:g.jsx(Hme,{})})}),g.jsx(Vn,{path:"/admin/dashboard",element:g.jsx(As,{allowedRoles:["admin"],children:g.jsx(Ume,{})})}),g.jsx(Vn,{path:"/admin/questions",element:g.jsx(As,{allowedRoles:["admin"],children:g.jsx(Rme,{})})}),g.jsx(Vn,{path:"/admin/question-analytics",element:g.jsx(As,{allowedRoles:["admin"],children:g.jsx(Pme,{})})}),g.jsx(Vn,{path:"/admin/grading",element:g.jsx(As,{allowedRoles:["admin"],children:g.jsx(Lme,{})})}),g.jsx(Vn,{path:"/admin/bulk-upload",element:g.jsx(As,{allowedRoles:["admin"],children:g.jsx(jme,{})})}),g.jsx(Vn,{path:"/admin/reports",element:g.jsx(As,{allowedRoles:["admin"],children:g.jsx(Mme,{})})}),g.jsx(Vn,{path:"/admin/users",element:g.jsx(As,{allowedRoles:["admin"],children:g.jsx(Qme,{})})}),g.jsx(Vn,{path:"/report/:resultId",element:g.jsx(As,{allowedRoles:["student","parent","teacher","admin"],children:g.jsx(m1e,{})})}),g.jsx(Vn,{path:"/teacher/dashboard",element:g.jsx(As,{allowedRoles:["teacher"],children:g.jsx(zme,{})})}),g.jsx(Vn,{path:"/",element:g.jsx(yL,{})}),g.jsx(Vn,{path:"*",element:g.jsx(yL,{})})]})})})}$E.createRoot(document.getElementById("root")).render(g.jsx(ie.StrictMode,{children:g.jsx(Txt,{})}));
//# sourceMappingURL=index-C5VVy8oF.js.map
